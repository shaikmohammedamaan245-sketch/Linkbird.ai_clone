"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/better-auth";
exports.ids = ["vendor-chunks/better-auth"];
exports.modules = {

/***/ "(rsc)/./node_modules/better-auth/dist/adapters/drizzle-adapter/index.mjs":
/*!**************************************************************************!*\
  !*** ./node_modules/better-auth/dist/adapters/drizzle-adapter/index.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   drizzleAdapter: () => (/* binding */ drizzleAdapter)\n/* harmony export */ });\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/drizzle-orm/sql/sql.js\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/drizzle-orm/sql/expressions/select.js\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/drizzle-orm/sql/expressions/conditions.js\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/drizzle-orm/sql/functions/aggregate.js\");\n/* harmony import */ var _shared_better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/better-auth.DdzSJf-n.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.DdzSJf-n.mjs\");\n/* harmony import */ var _shared_better_auth_BuBqXPUp_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../shared/better-auth.BuBqXPUp.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.BuBqXPUp.mjs\");\n/* harmony import */ var _shared_better_auth_BZZKN1g7_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../shared/better-auth.BZZKN1g7.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.BZZKN1g7.mjs\");\n/* harmony import */ var _shared_better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../shared/better-auth.BjBlybv-.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.BjBlybv-.mjs\");\n/* harmony import */ var _shared_better_auth_B_PTVODM_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../shared/better-auth.B_PTVODM.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.B_PTVODM.mjs\");\n/* harmony import */ var _shared_better_auth_BUPPRXfK_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../shared/better-auth.BUPPRXfK.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.BUPPRXfK.mjs\");\n/* harmony import */ var _better_auth_utils_random__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/utils/random */ \"(rsc)/./node_modules/@better-auth/utils/dist/random.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.js\");\n/* harmony import */ var _better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/utils/hash */ \"(rsc)/./node_modules/@better-auth/utils/dist/hash.mjs\");\n/* harmony import */ var _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @better-auth/utils/base64 */ \"(rsc)/./node_modules/@better-auth/utils/dist/base64.mjs\");\n/* harmony import */ var _better_auth_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @better-auth/utils */ \"(rsc)/./node_modules/@better-auth/utils/dist/index.mjs\");\n/* harmony import */ var _better_auth_utils_hex__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @better-auth/utils/hex */ \"(rsc)/./node_modules/@better-auth/utils/dist/hex.mjs\");\n/* harmony import */ var _shared_better_auth_B4Qoxdgc_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../shared/better-auth.B4Qoxdgc.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.B4Qoxdgc.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst drizzleAdapter = (db, config) => (0,_shared_better_auth_BuBqXPUp_mjs__WEBPACK_IMPORTED_MODULE_1__.c)({\n  config: {\n    adapterId: \"drizzle\",\n    adapterName: \"Drizzle Adapter\",\n    usePlural: config.usePlural ?? false,\n    debugLogs: config.debugLogs ?? false\n  },\n  adapter: ({ getFieldName, debugLog }) => {\n    function getSchema(model) {\n      const schema = config.schema || db._.fullSchema;\n      if (!schema) {\n        throw new _shared_better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_0__.B(\n          \"Drizzle adapter failed to initialize. Schema not found. Please provide a schema object in the adapter options object.\"\n        );\n      }\n      const schemaModel = schema[model];\n      if (!schemaModel) {\n        throw new _shared_better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_0__.B(\n          `[# Drizzle Adapter]: The model \"${model}\" was not found in the schema object. Please pass the schema directly to the adapter options.`\n        );\n      }\n      return schemaModel;\n    }\n    const withReturning = async (model, builder, data, where) => {\n      if (config.provider !== \"mysql\") {\n        const c = await builder.returning();\n        return c[0];\n      }\n      await builder.execute();\n      const schemaModel = getSchema(model);\n      const builderVal = builder.config?.values;\n      if (where?.length) {\n        const clause = convertWhereClause(where, model);\n        const res = await db.select().from(schemaModel).where(...clause);\n        return res[0];\n      } else if (builderVal && builderVal[0]?.id?.value) {\n        let tId = builderVal[0]?.id?.value;\n        if (!tId) {\n          const lastInsertId = await db.select({ id: (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_13__.sql)`LAST_INSERT_ID()` }).from(schemaModel).orderBy((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_14__.desc)(schemaModel.id)).limit(1);\n          tId = lastInsertId[0].id;\n        }\n        const res = await db.select().from(schemaModel).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_15__.eq)(schemaModel.id, tId)).limit(1).execute();\n        return res[0];\n      } else if (data.id) {\n        const res = await db.select().from(schemaModel).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_15__.eq)(schemaModel.id, data.id)).limit(1).execute();\n        return res[0];\n      } else {\n        if (!(\"id\" in schemaModel)) {\n          throw new _shared_better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_0__.B(\n            `The model \"${model}\" does not have an \"id\" field. Please use the \"id\" field as your primary key.`\n          );\n        }\n        const res = await db.select().from(schemaModel).orderBy((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_14__.desc)(schemaModel.id)).limit(1).execute();\n        return res[0];\n      }\n    };\n    function convertWhereClause(where, model) {\n      const schemaModel = getSchema(model);\n      if (!where) return [];\n      if (where.length === 1) {\n        const w = where[0];\n        if (!w) {\n          return [];\n        }\n        const field = getFieldName({ model, field: w.field });\n        if (!schemaModel[field]) {\n          throw new _shared_better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_0__.B(\n            `The field \"${w.field}\" does not exist in the schema for the model \"${model}\". Please update your schema.`\n          );\n        }\n        if (w.operator === \"in\") {\n          if (!Array.isArray(w.value)) {\n            throw new _shared_better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_0__.B(\n              `The value for the field \"${w.field}\" must be an array when using the \"in\" operator.`\n            );\n          }\n          return [(0,drizzle_orm__WEBPACK_IMPORTED_MODULE_15__.inArray)(schemaModel[field], w.value)];\n        }\n        if (w.operator === \"contains\") {\n          return [(0,drizzle_orm__WEBPACK_IMPORTED_MODULE_15__.like)(schemaModel[field], `%${w.value}%`)];\n        }\n        if (w.operator === \"starts_with\") {\n          return [(0,drizzle_orm__WEBPACK_IMPORTED_MODULE_15__.like)(schemaModel[field], `${w.value}%`)];\n        }\n        if (w.operator === \"ends_with\") {\n          return [(0,drizzle_orm__WEBPACK_IMPORTED_MODULE_15__.like)(schemaModel[field], `%${w.value}`)];\n        }\n        if (w.operator === \"lt\") {\n          return [(0,drizzle_orm__WEBPACK_IMPORTED_MODULE_15__.lt)(schemaModel[field], w.value)];\n        }\n        if (w.operator === \"lte\") {\n          return [(0,drizzle_orm__WEBPACK_IMPORTED_MODULE_15__.lte)(schemaModel[field], w.value)];\n        }\n        if (w.operator === \"ne\") {\n          return [(0,drizzle_orm__WEBPACK_IMPORTED_MODULE_15__.ne)(schemaModel[field], w.value)];\n        }\n        if (w.operator === \"gt\") {\n          return [(0,drizzle_orm__WEBPACK_IMPORTED_MODULE_15__.gt)(schemaModel[field], w.value)];\n        }\n        if (w.operator === \"gte\") {\n          return [(0,drizzle_orm__WEBPACK_IMPORTED_MODULE_15__.gte)(schemaModel[field], w.value)];\n        }\n        return [(0,drizzle_orm__WEBPACK_IMPORTED_MODULE_15__.eq)(schemaModel[field], w.value)];\n      }\n      const andGroup = where.filter(\n        (w) => w.connector === \"AND\" || !w.connector\n      );\n      const orGroup = where.filter((w) => w.connector === \"OR\");\n      const andClause = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_15__.and)(\n        ...andGroup.map((w) => {\n          const field = getFieldName({ model, field: w.field });\n          if (w.operator === \"in\") {\n            if (!Array.isArray(w.value)) {\n              throw new _shared_better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_0__.B(\n                `The value for the field \"${w.field}\" must be an array when using the \"in\" operator.`\n              );\n            }\n            return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_15__.inArray)(schemaModel[field], w.value);\n          }\n          return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_15__.eq)(schemaModel[field], w.value);\n        })\n      );\n      const orClause = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_15__.or)(\n        ...orGroup.map((w) => {\n          const field = getFieldName({ model, field: w.field });\n          return (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_15__.eq)(schemaModel[field], w.value);\n        })\n      );\n      const clause = [];\n      if (andGroup.length) clause.push(andClause);\n      if (orGroup.length) clause.push(orClause);\n      return clause;\n    }\n    function checkMissingFields(schema, model, values) {\n      if (!schema) {\n        throw new _shared_better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_0__.B(\n          \"Drizzle adapter failed to initialize. Schema not found. Please provide a schema object in the adapter options object.\"\n        );\n      }\n      for (const key in values) {\n        if (!schema[key]) {\n          throw new _shared_better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_0__.B(\n            `The field \"${key}\" does not exist in the \"${model}\" schema. Please update your drizzle schema or re-generate using \"npx @better-auth/cli generate\".`\n          );\n        }\n      }\n    }\n    return {\n      async create({ model, data: values }) {\n        const schemaModel = getSchema(model);\n        checkMissingFields(schemaModel, model, values);\n        const builder = db.insert(schemaModel).values(values);\n        const returned = await withReturning(model, builder, values);\n        return returned;\n      },\n      async findOne({ model, where }) {\n        const schemaModel = getSchema(model);\n        const clause = convertWhereClause(where, model);\n        const res = await db.select().from(schemaModel).where(...clause);\n        if (!res.length) return null;\n        return res[0];\n      },\n      async findMany({ model, where, sortBy, limit, offset }) {\n        const schemaModel = getSchema(model);\n        const clause = where ? convertWhereClause(where, model) : [];\n        const sortFn = sortBy?.direction === \"desc\" ? drizzle_orm__WEBPACK_IMPORTED_MODULE_14__.desc : drizzle_orm__WEBPACK_IMPORTED_MODULE_14__.asc;\n        const builder = db.select().from(schemaModel).limit(limit || 100).offset(offset || 0);\n        if (sortBy?.field) {\n          builder.orderBy(\n            sortFn(\n              schemaModel[getFieldName({ model, field: sortBy?.field })]\n            )\n          );\n        }\n        return await builder.where(...clause);\n      },\n      async count({ model, where }) {\n        const schemaModel = getSchema(model);\n        const clause = where ? convertWhereClause(where, model) : [];\n        const res = await db.select({ count: (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_16__.count)() }).from(schemaModel).where(...clause);\n        return res[0].count;\n      },\n      async update({ model, where, update: values }) {\n        const schemaModel = getSchema(model);\n        const clause = convertWhereClause(where, model);\n        const builder = db.update(schemaModel).set(values).where(...clause);\n        return await withReturning(model, builder, values, where);\n      },\n      async updateMany({ model, where, update: values }) {\n        const schemaModel = getSchema(model);\n        const clause = convertWhereClause(where, model);\n        const builder = db.update(schemaModel).set(values).where(...clause);\n        return await builder;\n      },\n      async delete({ model, where }) {\n        const schemaModel = getSchema(model);\n        const clause = convertWhereClause(where, model);\n        const builder = db.delete(schemaModel).where(...clause);\n        return await builder;\n      },\n      async deleteMany({ model, where }) {\n        const schemaModel = getSchema(model);\n        const clause = convertWhereClause(where, model);\n        const builder = db.delete(schemaModel).where(...clause);\n        return await builder;\n      },\n      options: config\n    };\n  }\n});\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hZGFwdGVycy9kcml6emxlLWFkYXB0ZXIvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN6QjtBQUNGO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ1o7QUFDbkI7QUFDSztBQUNZO0FBQ0Y7QUFDRDtBQUNJO0FBQ0M7QUFDckI7QUFDZ0I7QUFDRjtBQUNJO0FBQ0g7QUFDa0I7O0FBRS9DLHVDQUF1QyxtRUFBYTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILGNBQWMsd0JBQXdCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiwrREFBZTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLCtEQUFlO0FBQ2pDLDZDQUE2QyxNQUFNO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxpREFBaUQsSUFBSSxpREFBRyxvQkFBb0IsNEJBQTRCLGtEQUFJO0FBQzVHO0FBQ0E7QUFDQSw4REFBOEQsZ0RBQUU7QUFDaEU7QUFDQSxRQUFRO0FBQ1IsOERBQThELGdEQUFFO0FBQ2hFO0FBQ0EsUUFBUTtBQUNSO0FBQ0Esb0JBQW9CLCtEQUFlO0FBQ25DLDBCQUEwQixNQUFNO0FBQ2hDO0FBQ0E7QUFDQSxnRUFBZ0Usa0RBQUk7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyx1QkFBdUI7QUFDNUQ7QUFDQSxvQkFBb0IsK0RBQWU7QUFDbkMsMEJBQTBCLFFBQVEsZ0RBQWdELE1BQU07QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsK0RBQWU7QUFDckMsMENBQTBDLFFBQVE7QUFDbEQ7QUFDQTtBQUNBLGtCQUFrQixxREFBTztBQUN6QjtBQUNBO0FBQ0Esa0JBQWtCLGtEQUFJLHlCQUF5QixRQUFRO0FBQ3ZEO0FBQ0E7QUFDQSxrQkFBa0Isa0RBQUksd0JBQXdCLFFBQVE7QUFDdEQ7QUFDQTtBQUNBLGtCQUFrQixrREFBSSx5QkFBeUIsUUFBUTtBQUN2RDtBQUNBO0FBQ0Esa0JBQWtCLGdEQUFFO0FBQ3BCO0FBQ0E7QUFDQSxrQkFBa0IsaURBQUc7QUFDckI7QUFDQTtBQUNBLGtCQUFrQixnREFBRTtBQUNwQjtBQUNBO0FBQ0Esa0JBQWtCLGdEQUFFO0FBQ3BCO0FBQ0E7QUFDQSxrQkFBa0IsaURBQUc7QUFDckI7QUFDQSxnQkFBZ0IsZ0RBQUU7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixpREFBRztBQUMzQjtBQUNBLHVDQUF1Qyx1QkFBdUI7QUFDOUQ7QUFDQTtBQUNBLHdCQUF3QiwrREFBZTtBQUN2Qyw0Q0FBNEMsUUFBUTtBQUNwRDtBQUNBO0FBQ0EsbUJBQW1CLHFEQUFPO0FBQzFCO0FBQ0EsaUJBQWlCLGdEQUFFO0FBQ25CLFNBQVM7QUFDVDtBQUNBLHVCQUF1QixnREFBRTtBQUN6QjtBQUNBLHVDQUF1Qyx1QkFBdUI7QUFDOUQsaUJBQWlCLGdEQUFFO0FBQ25CLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLCtEQUFlO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsK0RBQWU7QUFDbkMsMEJBQTBCLElBQUksMkJBQTJCLE1BQU07QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixxQkFBcUI7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxzQkFBc0IsY0FBYztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLHVCQUF1QixxQ0FBcUM7QUFDNUQ7QUFDQTtBQUNBLHNEQUFzRCw4Q0FBSSxHQUFHLDZDQUFHO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLDZCQUE2QjtBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxvQkFBb0IsY0FBYztBQUNsQztBQUNBO0FBQ0Esc0NBQXNDLE9BQU8sbURBQUssSUFBSTtBQUN0RDtBQUNBLE9BQU87QUFDUCxxQkFBcUIsOEJBQThCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLHlCQUF5Qiw4QkFBOEI7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AscUJBQXFCLGNBQWM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AseUJBQXlCLGNBQWM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFeUIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYW1hYW5cXE9uZURyaXZlXFxEZXNrdG9wXFxLYW5kaWRfMlxcTmV3IGZvbGRlciAoMilcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGFkYXB0ZXJzXFxkcml6emxlLWFkYXB0ZXJcXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb3VudCwgZGVzYywgYXNjLCBzcWwsIGVxLCBpbkFycmF5LCBsaWtlLCBsdCwgbHRlLCBuZSwgZ3QsIGd0ZSwgYW5kLCBvciB9IGZyb20gJ2RyaXp6bGUtb3JtJztcbmltcG9ydCB7IEIgYXMgQmV0dGVyQXV0aEVycm9yIH0gZnJvbSAnLi4vLi4vc2hhcmVkL2JldHRlci1hdXRoLkRkelNKZi1uLm1qcyc7XG5pbXBvcnQgeyBjIGFzIGNyZWF0ZUFkYXB0ZXIgfSBmcm9tICcuLi8uLi9zaGFyZWQvYmV0dGVyLWF1dGguQnVCcVhQVXAubWpzJztcbmltcG9ydCAnLi4vLi4vc2hhcmVkL2JldHRlci1hdXRoLkJaWktOMWc3Lm1qcyc7XG5pbXBvcnQgJy4uLy4uL3NoYXJlZC9iZXR0ZXItYXV0aC5CakJseWJ2LS5tanMnO1xuaW1wb3J0ICcuLi8uLi9zaGFyZWQvYmV0dGVyLWF1dGguQl9QVFZPRE0ubWpzJztcbmltcG9ydCAnLi4vLi4vc2hhcmVkL2JldHRlci1hdXRoLkJVUFBSWGZLLm1qcyc7XG5pbXBvcnQgJ0BiZXR0ZXItYXV0aC91dGlscy9yYW5kb20nO1xuaW1wb3J0ICd6b2QvdjQnO1xuaW1wb3J0ICdiZXR0ZXItY2FsbCc7XG5pbXBvcnQgJ0BiZXR0ZXItYXV0aC91dGlscy9oYXNoJztcbmltcG9ydCAnQG5vYmxlL2NpcGhlcnMvY2hhY2hhJztcbmltcG9ydCAnQG5vYmxlL2NpcGhlcnMvdXRpbHMnO1xuaW1wb3J0ICdAbm9ibGUvY2lwaGVycy93ZWJjcnlwdG8nO1xuaW1wb3J0ICdAYmV0dGVyLWF1dGgvdXRpbHMvYmFzZTY0JztcbmltcG9ydCAnam9zZSc7XG5pbXBvcnQgJ0Bub2JsZS9oYXNoZXMvc2NyeXB0JztcbmltcG9ydCAnQGJldHRlci1hdXRoL3V0aWxzJztcbmltcG9ydCAnQGJldHRlci1hdXRoL3V0aWxzL2hleCc7XG5pbXBvcnQgJ0Bub2JsZS9oYXNoZXMvdXRpbHMnO1xuaW1wb3J0ICcuLi8uLi9zaGFyZWQvYmV0dGVyLWF1dGguQjRRb3hkZ2MubWpzJztcblxuY29uc3QgZHJpenpsZUFkYXB0ZXIgPSAoZGIsIGNvbmZpZykgPT4gY3JlYXRlQWRhcHRlcih7XG4gIGNvbmZpZzoge1xuICAgIGFkYXB0ZXJJZDogXCJkcml6emxlXCIsXG4gICAgYWRhcHRlck5hbWU6IFwiRHJpenpsZSBBZGFwdGVyXCIsXG4gICAgdXNlUGx1cmFsOiBjb25maWcudXNlUGx1cmFsID8/IGZhbHNlLFxuICAgIGRlYnVnTG9nczogY29uZmlnLmRlYnVnTG9ncyA/PyBmYWxzZVxuICB9LFxuICBhZGFwdGVyOiAoeyBnZXRGaWVsZE5hbWUsIGRlYnVnTG9nIH0pID0+IHtcbiAgICBmdW5jdGlvbiBnZXRTY2hlbWEobW9kZWwpIHtcbiAgICAgIGNvbnN0IHNjaGVtYSA9IGNvbmZpZy5zY2hlbWEgfHwgZGIuXy5mdWxsU2NoZW1hO1xuICAgICAgaWYgKCFzY2hlbWEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcbiAgICAgICAgICBcIkRyaXp6bGUgYWRhcHRlciBmYWlsZWQgdG8gaW5pdGlhbGl6ZS4gU2NoZW1hIG5vdCBmb3VuZC4gUGxlYXNlIHByb3ZpZGUgYSBzY2hlbWEgb2JqZWN0IGluIHRoZSBhZGFwdGVyIG9wdGlvbnMgb2JqZWN0LlwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBjb25zdCBzY2hlbWFNb2RlbCA9IHNjaGVtYVttb2RlbF07XG4gICAgICBpZiAoIXNjaGVtYU1vZGVsKSB7XG4gICAgICAgIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXG4gICAgICAgICAgYFsjIERyaXp6bGUgQWRhcHRlcl06IFRoZSBtb2RlbCBcIiR7bW9kZWx9XCIgd2FzIG5vdCBmb3VuZCBpbiB0aGUgc2NoZW1hIG9iamVjdC4gUGxlYXNlIHBhc3MgdGhlIHNjaGVtYSBkaXJlY3RseSB0byB0aGUgYWRhcHRlciBvcHRpb25zLmBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzY2hlbWFNb2RlbDtcbiAgICB9XG4gICAgY29uc3Qgd2l0aFJldHVybmluZyA9IGFzeW5jIChtb2RlbCwgYnVpbGRlciwgZGF0YSwgd2hlcmUpID0+IHtcbiAgICAgIGlmIChjb25maWcucHJvdmlkZXIgIT09IFwibXlzcWxcIikge1xuICAgICAgICBjb25zdCBjID0gYXdhaXQgYnVpbGRlci5yZXR1cm5pbmcoKTtcbiAgICAgICAgcmV0dXJuIGNbMF07XG4gICAgICB9XG4gICAgICBhd2FpdCBidWlsZGVyLmV4ZWN1dGUoKTtcbiAgICAgIGNvbnN0IHNjaGVtYU1vZGVsID0gZ2V0U2NoZW1hKG1vZGVsKTtcbiAgICAgIGNvbnN0IGJ1aWxkZXJWYWwgPSBidWlsZGVyLmNvbmZpZz8udmFsdWVzO1xuICAgICAgaWYgKHdoZXJlPy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgY2xhdXNlID0gY29udmVydFdoZXJlQ2xhdXNlKHdoZXJlLCBtb2RlbCk7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGRiLnNlbGVjdCgpLmZyb20oc2NoZW1hTW9kZWwpLndoZXJlKC4uLmNsYXVzZSk7XG4gICAgICAgIHJldHVybiByZXNbMF07XG4gICAgICB9IGVsc2UgaWYgKGJ1aWxkZXJWYWwgJiYgYnVpbGRlclZhbFswXT8uaWQ/LnZhbHVlKSB7XG4gICAgICAgIGxldCB0SWQgPSBidWlsZGVyVmFsWzBdPy5pZD8udmFsdWU7XG4gICAgICAgIGlmICghdElkKSB7XG4gICAgICAgICAgY29uc3QgbGFzdEluc2VydElkID0gYXdhaXQgZGIuc2VsZWN0KHsgaWQ6IHNxbGBMQVNUX0lOU0VSVF9JRCgpYCB9KS5mcm9tKHNjaGVtYU1vZGVsKS5vcmRlckJ5KGRlc2Moc2NoZW1hTW9kZWwuaWQpKS5saW1pdCgxKTtcbiAgICAgICAgICB0SWQgPSBsYXN0SW5zZXJ0SWRbMF0uaWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZGIuc2VsZWN0KCkuZnJvbShzY2hlbWFNb2RlbCkud2hlcmUoZXEoc2NoZW1hTW9kZWwuaWQsIHRJZCkpLmxpbWl0KDEpLmV4ZWN1dGUoKTtcbiAgICAgICAgcmV0dXJuIHJlc1swXTtcbiAgICAgIH0gZWxzZSBpZiAoZGF0YS5pZCkge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBkYi5zZWxlY3QoKS5mcm9tKHNjaGVtYU1vZGVsKS53aGVyZShlcShzY2hlbWFNb2RlbC5pZCwgZGF0YS5pZCkpLmxpbWl0KDEpLmV4ZWN1dGUoKTtcbiAgICAgICAgcmV0dXJuIHJlc1swXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghKFwiaWRcIiBpbiBzY2hlbWFNb2RlbCkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKFxuICAgICAgICAgICAgYFRoZSBtb2RlbCBcIiR7bW9kZWx9XCIgZG9lcyBub3QgaGF2ZSBhbiBcImlkXCIgZmllbGQuIFBsZWFzZSB1c2UgdGhlIFwiaWRcIiBmaWVsZCBhcyB5b3VyIHByaW1hcnkga2V5LmBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGRiLnNlbGVjdCgpLmZyb20oc2NoZW1hTW9kZWwpLm9yZGVyQnkoZGVzYyhzY2hlbWFNb2RlbC5pZCkpLmxpbWl0KDEpLmV4ZWN1dGUoKTtcbiAgICAgICAgcmV0dXJuIHJlc1swXTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGZ1bmN0aW9uIGNvbnZlcnRXaGVyZUNsYXVzZSh3aGVyZSwgbW9kZWwpIHtcbiAgICAgIGNvbnN0IHNjaGVtYU1vZGVsID0gZ2V0U2NoZW1hKG1vZGVsKTtcbiAgICAgIGlmICghd2hlcmUpIHJldHVybiBbXTtcbiAgICAgIGlmICh3aGVyZS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgY29uc3QgdyA9IHdoZXJlWzBdO1xuICAgICAgICBpZiAoIXcpIHtcbiAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmllbGQgPSBnZXRGaWVsZE5hbWUoeyBtb2RlbCwgZmllbGQ6IHcuZmllbGQgfSk7XG4gICAgICAgIGlmICghc2NoZW1hTW9kZWxbZmllbGRdKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcbiAgICAgICAgICAgIGBUaGUgZmllbGQgXCIke3cuZmllbGR9XCIgZG9lcyBub3QgZXhpc3QgaW4gdGhlIHNjaGVtYSBmb3IgdGhlIG1vZGVsIFwiJHttb2RlbH1cIi4gUGxlYXNlIHVwZGF0ZSB5b3VyIHNjaGVtYS5gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAody5vcGVyYXRvciA9PT0gXCJpblwiKSB7XG4gICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHcudmFsdWUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKFxuICAgICAgICAgICAgICBgVGhlIHZhbHVlIGZvciB0aGUgZmllbGQgXCIke3cuZmllbGR9XCIgbXVzdCBiZSBhbiBhcnJheSB3aGVuIHVzaW5nIHRoZSBcImluXCIgb3BlcmF0b3IuYFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIFtpbkFycmF5KHNjaGVtYU1vZGVsW2ZpZWxkXSwgdy52YWx1ZSldO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3Lm9wZXJhdG9yID09PSBcImNvbnRhaW5zXCIpIHtcbiAgICAgICAgICByZXR1cm4gW2xpa2Uoc2NoZW1hTW9kZWxbZmllbGRdLCBgJSR7dy52YWx1ZX0lYCldO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3Lm9wZXJhdG9yID09PSBcInN0YXJ0c193aXRoXCIpIHtcbiAgICAgICAgICByZXR1cm4gW2xpa2Uoc2NoZW1hTW9kZWxbZmllbGRdLCBgJHt3LnZhbHVlfSVgKV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHcub3BlcmF0b3IgPT09IFwiZW5kc193aXRoXCIpIHtcbiAgICAgICAgICByZXR1cm4gW2xpa2Uoc2NoZW1hTW9kZWxbZmllbGRdLCBgJSR7dy52YWx1ZX1gKV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHcub3BlcmF0b3IgPT09IFwibHRcIikge1xuICAgICAgICAgIHJldHVybiBbbHQoc2NoZW1hTW9kZWxbZmllbGRdLCB3LnZhbHVlKV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHcub3BlcmF0b3IgPT09IFwibHRlXCIpIHtcbiAgICAgICAgICByZXR1cm4gW2x0ZShzY2hlbWFNb2RlbFtmaWVsZF0sIHcudmFsdWUpXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAody5vcGVyYXRvciA9PT0gXCJuZVwiKSB7XG4gICAgICAgICAgcmV0dXJuIFtuZShzY2hlbWFNb2RlbFtmaWVsZF0sIHcudmFsdWUpXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAody5vcGVyYXRvciA9PT0gXCJndFwiKSB7XG4gICAgICAgICAgcmV0dXJuIFtndChzY2hlbWFNb2RlbFtmaWVsZF0sIHcudmFsdWUpXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAody5vcGVyYXRvciA9PT0gXCJndGVcIikge1xuICAgICAgICAgIHJldHVybiBbZ3RlKHNjaGVtYU1vZGVsW2ZpZWxkXSwgdy52YWx1ZSldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbZXEoc2NoZW1hTW9kZWxbZmllbGRdLCB3LnZhbHVlKV07XG4gICAgICB9XG4gICAgICBjb25zdCBhbmRHcm91cCA9IHdoZXJlLmZpbHRlcihcbiAgICAgICAgKHcpID0+IHcuY29ubmVjdG9yID09PSBcIkFORFwiIHx8ICF3LmNvbm5lY3RvclxuICAgICAgKTtcbiAgICAgIGNvbnN0IG9yR3JvdXAgPSB3aGVyZS5maWx0ZXIoKHcpID0+IHcuY29ubmVjdG9yID09PSBcIk9SXCIpO1xuICAgICAgY29uc3QgYW5kQ2xhdXNlID0gYW5kKFxuICAgICAgICAuLi5hbmRHcm91cC5tYXAoKHcpID0+IHtcbiAgICAgICAgICBjb25zdCBmaWVsZCA9IGdldEZpZWxkTmFtZSh7IG1vZGVsLCBmaWVsZDogdy5maWVsZCB9KTtcbiAgICAgICAgICBpZiAody5vcGVyYXRvciA9PT0gXCJpblwiKSB7XG4gICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkody52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcbiAgICAgICAgICAgICAgICBgVGhlIHZhbHVlIGZvciB0aGUgZmllbGQgXCIke3cuZmllbGR9XCIgbXVzdCBiZSBhbiBhcnJheSB3aGVuIHVzaW5nIHRoZSBcImluXCIgb3BlcmF0b3IuYFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGluQXJyYXkoc2NoZW1hTW9kZWxbZmllbGRdLCB3LnZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGVxKHNjaGVtYU1vZGVsW2ZpZWxkXSwgdy52YWx1ZSk7XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgICAgY29uc3Qgb3JDbGF1c2UgPSBvcihcbiAgICAgICAgLi4ub3JHcm91cC5tYXAoKHcpID0+IHtcbiAgICAgICAgICBjb25zdCBmaWVsZCA9IGdldEZpZWxkTmFtZSh7IG1vZGVsLCBmaWVsZDogdy5maWVsZCB9KTtcbiAgICAgICAgICByZXR1cm4gZXEoc2NoZW1hTW9kZWxbZmllbGRdLCB3LnZhbHVlKTtcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgICBjb25zdCBjbGF1c2UgPSBbXTtcbiAgICAgIGlmIChhbmRHcm91cC5sZW5ndGgpIGNsYXVzZS5wdXNoKGFuZENsYXVzZSk7XG4gICAgICBpZiAob3JHcm91cC5sZW5ndGgpIGNsYXVzZS5wdXNoKG9yQ2xhdXNlKTtcbiAgICAgIHJldHVybiBjbGF1c2U7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNoZWNrTWlzc2luZ0ZpZWxkcyhzY2hlbWEsIG1vZGVsLCB2YWx1ZXMpIHtcbiAgICAgIGlmICghc2NoZW1hKSB7XG4gICAgICAgIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXG4gICAgICAgICAgXCJEcml6emxlIGFkYXB0ZXIgZmFpbGVkIHRvIGluaXRpYWxpemUuIFNjaGVtYSBub3QgZm91bmQuIFBsZWFzZSBwcm92aWRlIGEgc2NoZW1hIG9iamVjdCBpbiB0aGUgYWRhcHRlciBvcHRpb25zIG9iamVjdC5cIlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBrZXkgaW4gdmFsdWVzKSB7XG4gICAgICAgIGlmICghc2NoZW1hW2tleV0pIHtcbiAgICAgICAgICB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKFxuICAgICAgICAgICAgYFRoZSBmaWVsZCBcIiR7a2V5fVwiIGRvZXMgbm90IGV4aXN0IGluIHRoZSBcIiR7bW9kZWx9XCIgc2NoZW1hLiBQbGVhc2UgdXBkYXRlIHlvdXIgZHJpenpsZSBzY2hlbWEgb3IgcmUtZ2VuZXJhdGUgdXNpbmcgXCJucHggQGJldHRlci1hdXRoL2NsaSBnZW5lcmF0ZVwiLmBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBhc3luYyBjcmVhdGUoeyBtb2RlbCwgZGF0YTogdmFsdWVzIH0pIHtcbiAgICAgICAgY29uc3Qgc2NoZW1hTW9kZWwgPSBnZXRTY2hlbWEobW9kZWwpO1xuICAgICAgICBjaGVja01pc3NpbmdGaWVsZHMoc2NoZW1hTW9kZWwsIG1vZGVsLCB2YWx1ZXMpO1xuICAgICAgICBjb25zdCBidWlsZGVyID0gZGIuaW5zZXJ0KHNjaGVtYU1vZGVsKS52YWx1ZXModmFsdWVzKTtcbiAgICAgICAgY29uc3QgcmV0dXJuZWQgPSBhd2FpdCB3aXRoUmV0dXJuaW5nKG1vZGVsLCBidWlsZGVyLCB2YWx1ZXMpO1xuICAgICAgICByZXR1cm4gcmV0dXJuZWQ7XG4gICAgICB9LFxuICAgICAgYXN5bmMgZmluZE9uZSh7IG1vZGVsLCB3aGVyZSB9KSB7XG4gICAgICAgIGNvbnN0IHNjaGVtYU1vZGVsID0gZ2V0U2NoZW1hKG1vZGVsKTtcbiAgICAgICAgY29uc3QgY2xhdXNlID0gY29udmVydFdoZXJlQ2xhdXNlKHdoZXJlLCBtb2RlbCk7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGRiLnNlbGVjdCgpLmZyb20oc2NoZW1hTW9kZWwpLndoZXJlKC4uLmNsYXVzZSk7XG4gICAgICAgIGlmICghcmVzLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiByZXNbMF07XG4gICAgICB9LFxuICAgICAgYXN5bmMgZmluZE1hbnkoeyBtb2RlbCwgd2hlcmUsIHNvcnRCeSwgbGltaXQsIG9mZnNldCB9KSB7XG4gICAgICAgIGNvbnN0IHNjaGVtYU1vZGVsID0gZ2V0U2NoZW1hKG1vZGVsKTtcbiAgICAgICAgY29uc3QgY2xhdXNlID0gd2hlcmUgPyBjb252ZXJ0V2hlcmVDbGF1c2Uod2hlcmUsIG1vZGVsKSA6IFtdO1xuICAgICAgICBjb25zdCBzb3J0Rm4gPSBzb3J0Qnk/LmRpcmVjdGlvbiA9PT0gXCJkZXNjXCIgPyBkZXNjIDogYXNjO1xuICAgICAgICBjb25zdCBidWlsZGVyID0gZGIuc2VsZWN0KCkuZnJvbShzY2hlbWFNb2RlbCkubGltaXQobGltaXQgfHwgMTAwKS5vZmZzZXQob2Zmc2V0IHx8IDApO1xuICAgICAgICBpZiAoc29ydEJ5Py5maWVsZCkge1xuICAgICAgICAgIGJ1aWxkZXIub3JkZXJCeShcbiAgICAgICAgICAgIHNvcnRGbihcbiAgICAgICAgICAgICAgc2NoZW1hTW9kZWxbZ2V0RmllbGROYW1lKHsgbW9kZWwsIGZpZWxkOiBzb3J0Qnk/LmZpZWxkIH0pXVxuICAgICAgICAgICAgKVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGF3YWl0IGJ1aWxkZXIud2hlcmUoLi4uY2xhdXNlKTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBjb3VudCh7IG1vZGVsLCB3aGVyZSB9KSB7XG4gICAgICAgIGNvbnN0IHNjaGVtYU1vZGVsID0gZ2V0U2NoZW1hKG1vZGVsKTtcbiAgICAgICAgY29uc3QgY2xhdXNlID0gd2hlcmUgPyBjb252ZXJ0V2hlcmVDbGF1c2Uod2hlcmUsIG1vZGVsKSA6IFtdO1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBkYi5zZWxlY3QoeyBjb3VudDogY291bnQoKSB9KS5mcm9tKHNjaGVtYU1vZGVsKS53aGVyZSguLi5jbGF1c2UpO1xuICAgICAgICByZXR1cm4gcmVzWzBdLmNvdW50O1xuICAgICAgfSxcbiAgICAgIGFzeW5jIHVwZGF0ZSh7IG1vZGVsLCB3aGVyZSwgdXBkYXRlOiB2YWx1ZXMgfSkge1xuICAgICAgICBjb25zdCBzY2hlbWFNb2RlbCA9IGdldFNjaGVtYShtb2RlbCk7XG4gICAgICAgIGNvbnN0IGNsYXVzZSA9IGNvbnZlcnRXaGVyZUNsYXVzZSh3aGVyZSwgbW9kZWwpO1xuICAgICAgICBjb25zdCBidWlsZGVyID0gZGIudXBkYXRlKHNjaGVtYU1vZGVsKS5zZXQodmFsdWVzKS53aGVyZSguLi5jbGF1c2UpO1xuICAgICAgICByZXR1cm4gYXdhaXQgd2l0aFJldHVybmluZyhtb2RlbCwgYnVpbGRlciwgdmFsdWVzLCB3aGVyZSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgdXBkYXRlTWFueSh7IG1vZGVsLCB3aGVyZSwgdXBkYXRlOiB2YWx1ZXMgfSkge1xuICAgICAgICBjb25zdCBzY2hlbWFNb2RlbCA9IGdldFNjaGVtYShtb2RlbCk7XG4gICAgICAgIGNvbnN0IGNsYXVzZSA9IGNvbnZlcnRXaGVyZUNsYXVzZSh3aGVyZSwgbW9kZWwpO1xuICAgICAgICBjb25zdCBidWlsZGVyID0gZGIudXBkYXRlKHNjaGVtYU1vZGVsKS5zZXQodmFsdWVzKS53aGVyZSguLi5jbGF1c2UpO1xuICAgICAgICByZXR1cm4gYXdhaXQgYnVpbGRlcjtcbiAgICAgIH0sXG4gICAgICBhc3luYyBkZWxldGUoeyBtb2RlbCwgd2hlcmUgfSkge1xuICAgICAgICBjb25zdCBzY2hlbWFNb2RlbCA9IGdldFNjaGVtYShtb2RlbCk7XG4gICAgICAgIGNvbnN0IGNsYXVzZSA9IGNvbnZlcnRXaGVyZUNsYXVzZSh3aGVyZSwgbW9kZWwpO1xuICAgICAgICBjb25zdCBidWlsZGVyID0gZGIuZGVsZXRlKHNjaGVtYU1vZGVsKS53aGVyZSguLi5jbGF1c2UpO1xuICAgICAgICByZXR1cm4gYXdhaXQgYnVpbGRlcjtcbiAgICAgIH0sXG4gICAgICBhc3luYyBkZWxldGVNYW55KHsgbW9kZWwsIHdoZXJlIH0pIHtcbiAgICAgICAgY29uc3Qgc2NoZW1hTW9kZWwgPSBnZXRTY2hlbWEobW9kZWwpO1xuICAgICAgICBjb25zdCBjbGF1c2UgPSBjb252ZXJ0V2hlcmVDbGF1c2Uod2hlcmUsIG1vZGVsKTtcbiAgICAgICAgY29uc3QgYnVpbGRlciA9IGRiLmRlbGV0ZShzY2hlbWFNb2RlbCkud2hlcmUoLi4uY2xhdXNlKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGJ1aWxkZXI7XG4gICAgICB9LFxuICAgICAgb3B0aW9uczogY29uZmlnXG4gICAgfTtcbiAgfVxufSk7XG5cbmV4cG9ydCB7IGRyaXp6bGVBZGFwdGVyIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/adapters/drizzle-adapter/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/index.mjs":
/*!*****************************************************!*\
  !*** ./node_modules/better-auth/dist/api/index.mjs ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   APIError: () => (/* reexport safe */ better_call__WEBPACK_IMPORTED_MODULE_0__.APIError),\n/* harmony export */   accountInfo: () => (/* reexport safe */ _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.q),\n/* harmony export */   callbackOAuth: () => (/* reexport safe */ _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.R),\n/* harmony export */   changeEmail: () => (/* reexport safe */ _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.K),\n/* harmony export */   changePassword: () => (/* reexport safe */ _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.J),\n/* harmony export */   checkEndpointConflicts: () => (/* binding */ checkEndpointConflicts),\n/* harmony export */   createAuthEndpoint: () => (/* reexport safe */ _shared_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_2__.a),\n/* harmony export */   createAuthMiddleware: () => (/* reexport safe */ _shared_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_2__.c),\n/* harmony export */   createEmailVerificationToken: () => (/* reexport safe */ _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.k),\n/* harmony export */   deleteUser: () => (/* reexport safe */ _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.G),\n/* harmony export */   deleteUserCallback: () => (/* reexport safe */ _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.A),\n/* harmony export */   error: () => (/* reexport safe */ _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.m),\n/* harmony export */   forgetPassword: () => (/* reexport safe */ _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.O),\n/* harmony export */   forgetPasswordCallback: () => (/* reexport safe */ _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.F),\n/* harmony export */   freshSessionMiddleware: () => (/* reexport safe */ _shared_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_2__.f),\n/* harmony export */   getAccessToken: () => (/* reexport safe */ _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.x),\n/* harmony export */   getEndpoints: () => (/* binding */ getEndpoints),\n/* harmony export */   getSession: () => (/* reexport safe */ _shared_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_2__.b),\n/* harmony export */   getSessionFromCtx: () => (/* reexport safe */ _shared_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_2__.g),\n/* harmony export */   getSessionQuerySchema: () => (/* reexport safe */ _shared_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_2__.h),\n/* harmony export */   linkSocialAccount: () => (/* reexport safe */ _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.C),\n/* harmony export */   listSessions: () => (/* reexport safe */ _shared_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_2__.l),\n/* harmony export */   listUserAccounts: () => (/* reexport safe */ _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.B),\n/* harmony export */   ok: () => (/* reexport safe */ _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.n),\n/* harmony export */   optionsMiddleware: () => (/* reexport safe */ _shared_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_2__.o),\n/* harmony export */   originCheck: () => (/* reexport safe */ _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.o),\n/* harmony export */   originCheckMiddleware: () => (/* reexport safe */ _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.l),\n/* harmony export */   refreshToken: () => (/* reexport safe */ _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.y),\n/* harmony export */   requestOnlySessionMiddleware: () => (/* reexport safe */ _shared_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_2__.i),\n/* harmony export */   requestPasswordReset: () => (/* reexport safe */ _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.E),\n/* harmony export */   requestPasswordResetCallback: () => (/* reexport safe */ _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.D),\n/* harmony export */   resetPassword: () => (/* reexport safe */ _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.N),\n/* harmony export */   revokeOtherSessions: () => (/* reexport safe */ _shared_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_2__.r),\n/* harmony export */   revokeSession: () => (/* reexport safe */ _shared_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_2__.e),\n/* harmony export */   revokeSessions: () => (/* reexport safe */ _shared_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_2__.d),\n/* harmony export */   router: () => (/* binding */ router),\n/* harmony export */   sendVerificationEmail: () => (/* reexport safe */ _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.L),\n/* harmony export */   sendVerificationEmailFn: () => (/* reexport safe */ _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.T),\n/* harmony export */   sessionMiddleware: () => (/* reexport safe */ _shared_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_2__.s),\n/* harmony export */   setPassword: () => (/* reexport safe */ _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.I),\n/* harmony export */   signInEmail: () => (/* reexport safe */ _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.P),\n/* harmony export */   signInSocial: () => (/* reexport safe */ _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.S),\n/* harmony export */   signOut: () => (/* reexport safe */ _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.Q),\n/* harmony export */   signUpEmail: () => (/* binding */ signUpEmail),\n/* harmony export */   unlinkAccount: () => (/* reexport safe */ _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.z),\n/* harmony export */   updateUser: () => (/* reexport safe */ _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.u),\n/* harmony export */   verifyEmail: () => (/* reexport safe */ _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.M)\n/* harmony export */ });\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.js\");\n/* harmony import */ var _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../shared/better-auth.nqWf7zUe.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.nqWf7zUe.mjs\");\n/* harmony import */ var _shared_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../shared/better-auth.DV5EHeYG.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.DV5EHeYG.mjs\");\n/* harmony import */ var zod_v4__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! zod/v4 */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/classic/schemas.js\");\n/* harmony import */ var _shared_better_auth_UfVWArIB_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../shared/better-auth.UfVWArIB.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.UfVWArIB.mjs\");\n/* harmony import */ var _shared_better_auth_Dcv8PS7T_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../shared/better-auth.Dcv8PS7T.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.Dcv8PS7T.mjs\");\n/* harmony import */ var _shared_better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../shared/better-auth.CMQ3rA-I.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.CMQ3rA-I.mjs\");\n/* harmony import */ var _shared_better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../shared/better-auth.BjBlybv-.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.BjBlybv-.mjs\");\n/* harmony import */ var _shared_better_auth_BZZKN1g7_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../shared/better-auth.BZZKN1g7.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.BZZKN1g7.mjs\");\n/* harmony import */ var _shared_better_auth_O2VtDkDK_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../shared/better-auth.O2VtDkDK.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.O2VtDkDK.mjs\");\n/* harmony import */ var _shared_better_auth_CW6D9eSx_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../shared/better-auth.CW6D9eSx.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.CW6D9eSx.mjs\");\n/* harmony import */ var _better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @better-auth/utils/hash */ \"(rsc)/./node_modules/@better-auth/utils/dist/hash.mjs\");\n/* harmony import */ var _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @better-auth/utils/base64 */ \"(rsc)/./node_modules/@better-auth/utils/dist/base64.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../crypto/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _better_auth_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @better-auth/utils */ \"(rsc)/./node_modules/@better-auth/utils/dist/index.mjs\");\n/* harmony import */ var _better_auth_utils_hex__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @better-auth/utils/hex */ \"(rsc)/./node_modules/@better-auth/utils/dist/hex.mjs\");\n/* harmony import */ var _shared_better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../shared/better-auth.DdzSJf-n.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.DdzSJf-n.mjs\");\n/* harmony import */ var _shared_better_auth_B4Qoxdgc_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../shared/better-auth.B4Qoxdgc.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.B4Qoxdgc.mjs\");\n/* harmony import */ var _better_auth_utils_random__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @better-auth/utils/random */ \"(rsc)/./node_modules/@better-auth/utils/dist/random.mjs\");\n/* harmony import */ var _better_fetch_fetch__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @better-fetch/fetch */ \"(rsc)/./node_modules/@better-fetch/fetch/dist/index.js\");\n/* harmony import */ var _shared_better_auth_CuS_eDdK_mjs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../shared/better-auth.CuS_eDdK.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.CuS_eDdK.mjs\");\n/* harmony import */ var _shared_better_auth_BUPPRXfK_mjs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../shared/better-auth.BUPPRXfK.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.BUPPRXfK.mjs\");\n/* harmony import */ var _better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @better-auth/utils/hmac */ \"(rsc)/./node_modules/@better-auth/utils/dist/hmac.mjs\");\n/* harmony import */ var _better_auth_utils_binary__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @better-auth/utils/binary */ \"(rsc)/./node_modules/@better-auth/utils/dist/binary.mjs\");\n/* harmony import */ var defu__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! defu */ \"(rsc)/./node_modules/defu/dist/defu.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst signUpEmail = () => (0,_shared_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_2__.a)(\n  \"/sign-up/email\",\n  {\n    method: \"POST\",\n    body: zod_v4__WEBPACK_IMPORTED_MODULE_24__.record(zod_v4__WEBPACK_IMPORTED_MODULE_24__.string(), zod_v4__WEBPACK_IMPORTED_MODULE_24__.any()),\n    metadata: {\n      $Infer: {\n        body: {}\n      },\n      openapi: {\n        description: \"Sign up a user using email and password\",\n        requestBody: {\n          content: {\n            \"application/json\": {\n              schema: {\n                type: \"object\",\n                properties: {\n                  name: {\n                    type: \"string\",\n                    description: \"The name of the user\"\n                  },\n                  email: {\n                    type: \"string\",\n                    description: \"The email of the user\"\n                  },\n                  password: {\n                    type: \"string\",\n                    description: \"The password of the user\"\n                  },\n                  image: {\n                    type: \"string\",\n                    description: \"The profile image URL of the user\"\n                  },\n                  callbackURL: {\n                    type: \"string\",\n                    description: \"The URL to use for email verification callback\"\n                  },\n                  rememberMe: {\n                    type: \"boolean\",\n                    description: \"If this is false, the session will not be remembered. Default is `true`.\"\n                  }\n                },\n                required: [\"name\", \"email\", \"password\"]\n              }\n            }\n          }\n        },\n        responses: {\n          \"200\": {\n            description: \"Successfully created user\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    token: {\n                      type: \"string\",\n                      nullable: true,\n                      description: \"Authentication token for the session\"\n                    },\n                    user: {\n                      type: \"object\",\n                      properties: {\n                        id: {\n                          type: \"string\",\n                          description: \"The unique identifier of the user\"\n                        },\n                        email: {\n                          type: \"string\",\n                          format: \"email\",\n                          description: \"The email address of the user\"\n                        },\n                        name: {\n                          type: \"string\",\n                          description: \"The name of the user\"\n                        },\n                        image: {\n                          type: \"string\",\n                          format: \"uri\",\n                          nullable: true,\n                          description: \"The profile image URL of the user\"\n                        },\n                        emailVerified: {\n                          type: \"boolean\",\n                          description: \"Whether the email has been verified\"\n                        },\n                        createdAt: {\n                          type: \"string\",\n                          format: \"date-time\",\n                          description: \"When the user was created\"\n                        },\n                        updatedAt: {\n                          type: \"string\",\n                          format: \"date-time\",\n                          description: \"When the user was last updated\"\n                        }\n                      },\n                      required: [\n                        \"id\",\n                        \"email\",\n                        \"name\",\n                        \"emailVerified\",\n                        \"createdAt\",\n                        \"updatedAt\"\n                      ]\n                    }\n                  },\n                  required: [\"user\"]\n                  // token is optional\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    if (!ctx.context.options.emailAndPassword?.enabled || ctx.context.options.emailAndPassword?.disableSignUp) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_0__.APIError(\"BAD_REQUEST\", {\n        message: \"Email and password sign up is not enabled\"\n      });\n    }\n    const body = ctx.body;\n    const {\n      name,\n      email,\n      password,\n      image,\n      callbackURL,\n      rememberMe,\n      ...additionalFields\n    } = body;\n    const isValidEmail = zod_v4__WEBPACK_IMPORTED_MODULE_24__.email().safeParse(email);\n    if (!isValidEmail.success) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_0__.APIError(\"BAD_REQUEST\", {\n        message: _shared_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_2__.B.INVALID_EMAIL\n      });\n    }\n    const minPasswordLength = ctx.context.password.config.minPasswordLength;\n    if (password.length < minPasswordLength) {\n      ctx.context.logger.error(\"Password is too short\");\n      throw new better_call__WEBPACK_IMPORTED_MODULE_0__.APIError(\"BAD_REQUEST\", {\n        message: _shared_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_2__.B.PASSWORD_TOO_SHORT\n      });\n    }\n    const maxPasswordLength = ctx.context.password.config.maxPasswordLength;\n    if (password.length > maxPasswordLength) {\n      ctx.context.logger.error(\"Password is too long\");\n      throw new better_call__WEBPACK_IMPORTED_MODULE_0__.APIError(\"BAD_REQUEST\", {\n        message: _shared_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_2__.B.PASSWORD_TOO_LONG\n      });\n    }\n    const dbUser = await ctx.context.internalAdapter.findUserByEmail(email);\n    if (dbUser?.user) {\n      ctx.context.logger.info(`Sign-up attempt for existing email: ${email}`);\n      throw new better_call__WEBPACK_IMPORTED_MODULE_0__.APIError(\"UNPROCESSABLE_ENTITY\", {\n        message: _shared_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_2__.B.USER_ALREADY_EXISTS\n      });\n    }\n    const additionalData = (0,_shared_better_auth_Dcv8PS7T_mjs__WEBPACK_IMPORTED_MODULE_4__.h)(\n      ctx.context.options,\n      additionalFields\n    );\n    const hash = await ctx.context.password.hash(password);\n    let createdUser;\n    try {\n      createdUser = await ctx.context.internalAdapter.createUser(\n        {\n          email: email.toLowerCase(),\n          name,\n          image,\n          ...additionalData,\n          emailVerified: false\n        },\n        ctx\n      );\n      if (!createdUser) {\n        throw new better_call__WEBPACK_IMPORTED_MODULE_0__.APIError(\"BAD_REQUEST\", {\n          message: _shared_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_2__.B.FAILED_TO_CREATE_USER\n        });\n      }\n    } catch (e) {\n      if (_shared_better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_5__.b) {\n        ctx.context.logger.error(\"Failed to create user\", e);\n      }\n      if (e instanceof better_call__WEBPACK_IMPORTED_MODULE_0__.APIError) {\n        throw e;\n      }\n      throw new better_call__WEBPACK_IMPORTED_MODULE_0__.APIError(\"UNPROCESSABLE_ENTITY\", {\n        message: _shared_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_2__.B.FAILED_TO_CREATE_USER,\n        details: e\n      });\n    }\n    if (!createdUser) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_0__.APIError(\"UNPROCESSABLE_ENTITY\", {\n        message: _shared_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_2__.B.FAILED_TO_CREATE_USER\n      });\n    }\n    await ctx.context.internalAdapter.linkAccount(\n      {\n        userId: createdUser.id,\n        providerId: \"credential\",\n        accountId: createdUser.id,\n        password: hash\n      },\n      ctx\n    );\n    if (ctx.context.options.emailVerification?.sendOnSignUp || ctx.context.options.emailAndPassword.requireEmailVerification) {\n      const token = await (0,_shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.k)(\n        ctx.context.secret,\n        createdUser.email,\n        void 0,\n        ctx.context.options.emailVerification?.expiresIn\n      );\n      const url = `${ctx.context.baseURL}/verify-email?token=${token}&callbackURL=${body.callbackURL || \"/\"}`;\n      await ctx.context.options.emailVerification?.sendVerificationEmail?.(\n        {\n          user: createdUser,\n          url,\n          token\n        },\n        ctx.request\n      );\n    }\n    if (ctx.context.options.emailAndPassword.autoSignIn === false || ctx.context.options.emailAndPassword.requireEmailVerification) {\n      return ctx.json({\n        token: null,\n        user: {\n          id: createdUser.id,\n          email: createdUser.email,\n          name: createdUser.name,\n          image: createdUser.image,\n          emailVerified: createdUser.emailVerified,\n          createdAt: createdUser.createdAt,\n          updatedAt: createdUser.updatedAt\n        }\n      });\n    }\n    const session = await ctx.context.internalAdapter.createSession(\n      createdUser.id,\n      ctx,\n      rememberMe === false\n    );\n    if (!session) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_0__.APIError(\"BAD_REQUEST\", {\n        message: _shared_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_2__.B.FAILED_TO_CREATE_SESSION\n      });\n    }\n    await (0,_shared_better_auth_UfVWArIB_mjs__WEBPACK_IMPORTED_MODULE_3__.s)(\n      ctx,\n      {\n        session,\n        user: createdUser\n      },\n      rememberMe === false\n    );\n    return ctx.json({\n      token: session.token,\n      user: {\n        id: createdUser.id,\n        email: createdUser.email,\n        name: createdUser.name,\n        image: createdUser.image,\n        emailVerified: createdUser.emailVerified,\n        createdAt: createdUser.createdAt,\n        updatedAt: createdUser.updatedAt\n      }\n    });\n  }\n);\n\nfunction shouldRateLimit(max, window, rateLimitData) {\n  const now = Date.now();\n  const windowInMs = window * 1e3;\n  const timeSinceLastRequest = now - rateLimitData.lastRequest;\n  return timeSinceLastRequest < windowInMs && rateLimitData.count >= max;\n}\nfunction rateLimitResponse(retryAfter) {\n  return new Response(\n    JSON.stringify({\n      message: \"Too many requests. Please try again later.\"\n    }),\n    {\n      status: 429,\n      statusText: \"Too Many Requests\",\n      headers: {\n        \"X-Retry-After\": retryAfter.toString()\n      }\n    }\n  );\n}\nfunction getRetryAfter(lastRequest, window) {\n  const now = Date.now();\n  const windowInMs = window * 1e3;\n  return Math.ceil((lastRequest + windowInMs - now) / 1e3);\n}\nfunction createDBStorage(ctx) {\n  const model = \"rateLimit\";\n  const db = ctx.adapter;\n  return {\n    get: async (key) => {\n      const res = await db.findMany({\n        model,\n        where: [{ field: \"key\", value: key }]\n      });\n      const data = res[0];\n      if (typeof data?.lastRequest === \"bigint\") {\n        data.lastRequest = Number(data.lastRequest);\n      }\n      return data;\n    },\n    set: async (key, value, _update) => {\n      try {\n        if (_update) {\n          await db.updateMany({\n            model,\n            where: [{ field: \"key\", value: key }],\n            update: {\n              count: value.count,\n              lastRequest: value.lastRequest\n            }\n          });\n        } else {\n          await db.create({\n            model,\n            data: {\n              key,\n              count: value.count,\n              lastRequest: value.lastRequest\n            }\n          });\n        }\n      } catch (e) {\n        ctx.logger.error(\"Error setting rate limit\", e);\n      }\n    }\n  };\n}\nconst memory = /* @__PURE__ */ new Map();\nfunction getRateLimitStorage(ctx) {\n  if (ctx.options.rateLimit?.customStorage) {\n    return ctx.options.rateLimit.customStorage;\n  }\n  if (ctx.rateLimit.storage === \"secondary-storage\") {\n    return {\n      get: async (key) => {\n        const data = await ctx.options.secondaryStorage?.get(key);\n        return data ? (0,_shared_better_auth_BZZKN1g7_mjs__WEBPACK_IMPORTED_MODULE_7__.s)(data) : void 0;\n      },\n      set: async (key, value) => {\n        await ctx.options.secondaryStorage?.set?.(key, JSON.stringify(value));\n      }\n    };\n  }\n  const storage = ctx.rateLimit.storage;\n  if (storage === \"memory\") {\n    return {\n      async get(key) {\n        return memory.get(key);\n      },\n      async set(key, value, _update) {\n        memory.set(key, value);\n      }\n    };\n  }\n  return createDBStorage(ctx);\n}\nasync function onRequestRateLimit(req, ctx) {\n  if (!ctx.rateLimit.enabled) {\n    return;\n  }\n  const path = new URL(req.url).pathname.replace(\n    ctx.options.basePath || \"/api/auth\",\n    \"\"\n  );\n  let window = ctx.rateLimit.window;\n  let max = ctx.rateLimit.max;\n  const ip = (0,_shared_better_auth_O2VtDkDK_mjs__WEBPACK_IMPORTED_MODULE_8__.g)(req, ctx.options);\n  if (!ip) {\n    return;\n  }\n  const key = ip + path;\n  const specialRules = getDefaultSpecialRules();\n  const specialRule = specialRules.find((rule) => rule.pathMatcher(path));\n  if (specialRule) {\n    window = specialRule.window;\n    max = specialRule.max;\n  }\n  for (const plugin of ctx.options.plugins || []) {\n    if (plugin.rateLimit) {\n      const matchedRule = plugin.rateLimit.find(\n        (rule) => rule.pathMatcher(path)\n      );\n      if (matchedRule) {\n        window = matchedRule.window;\n        max = matchedRule.max;\n        break;\n      }\n    }\n  }\n  if (ctx.rateLimit.customRules) {\n    const _path = Object.keys(ctx.rateLimit.customRules).find((p) => {\n      if (p.includes(\"*\")) {\n        const isMatch = (0,_shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.w)(p)(path);\n        return isMatch;\n      }\n      return p === path;\n    });\n    if (_path) {\n      const customRule = ctx.rateLimit.customRules[_path];\n      const resolved = typeof customRule === \"function\" ? await customRule(req) : customRule;\n      if (resolved) {\n        window = resolved.window;\n        max = resolved.max;\n      }\n    }\n  }\n  const storage = getRateLimitStorage(ctx);\n  const data = await storage.get(key);\n  const now = Date.now();\n  if (!data) {\n    await storage.set(key, {\n      key,\n      count: 1,\n      lastRequest: now\n    });\n  } else {\n    const timeSinceLastRequest = now - data.lastRequest;\n    if (shouldRateLimit(max, window, data)) {\n      const retryAfter = getRetryAfter(data.lastRequest, window);\n      return rateLimitResponse(retryAfter);\n    } else if (timeSinceLastRequest > window * 1e3) {\n      await storage.set(\n        key,\n        {\n          ...data,\n          count: 1,\n          lastRequest: now\n        },\n        true\n      );\n    } else {\n      await storage.set(\n        key,\n        {\n          ...data,\n          count: data.count + 1,\n          lastRequest: now\n        },\n        true\n      );\n    }\n  }\n}\nfunction getDefaultSpecialRules() {\n  const specialRules = [\n    {\n      pathMatcher(path) {\n        return path.startsWith(\"/sign-in\") || path.startsWith(\"/sign-up\") || path.startsWith(\"/change-password\") || path.startsWith(\"/change-email\");\n      },\n      window: 10,\n      max: 3\n    }\n  ];\n  return specialRules;\n}\n\nfunction checkEndpointConflicts(options, logger2) {\n  const endpointRegistry = /* @__PURE__ */ new Map();\n  options.plugins?.forEach((plugin) => {\n    if (plugin.endpoints) {\n      for (const [key, endpoint] of Object.entries(plugin.endpoints)) {\n        if (endpoint && \"path\" in endpoint) {\n          const path = endpoint.path;\n          if (!endpointRegistry.has(path)) {\n            endpointRegistry.set(path, []);\n          }\n          endpointRegistry.get(path).push({\n            pluginId: plugin.id,\n            endpointKey: key\n          });\n        }\n      }\n    }\n  });\n  const conflicts = [];\n  for (const [path, entries] of endpointRegistry.entries()) {\n    if (entries.length > 1) {\n      const uniquePlugins = [...new Set(entries.map((e) => e.pluginId))];\n      conflicts.push({\n        path,\n        plugins: uniquePlugins\n      });\n    }\n  }\n  if (conflicts.length > 0) {\n    const conflictMessages = conflicts.map(\n      (conflict) => `  - \"${conflict.path}\" used by plugins: ${conflict.plugins.join(\", \")}`\n    ).join(\"\\n\");\n    logger2.error(\n      `Endpoint path conflicts detected! Multiple plugins are trying to use the same endpoint paths:\n${conflictMessages}\n\nTo resolve this, you can:\n\t1. Use only one of the conflicting plugins\n\t2. Configure the plugins to use different paths (if supported)\n`\n    );\n  }\n}\nfunction getEndpoints(ctx, options) {\n  const pluginEndpoints = options.plugins?.reduce(\n    (acc, plugin) => {\n      return {\n        ...acc,\n        ...plugin.endpoints\n      };\n    },\n    {}\n  );\n  const middlewares = options.plugins?.map(\n    (plugin) => plugin.middlewares?.map((m) => {\n      const middleware = (async (context) => {\n        const authContext = await ctx;\n        return m.middleware({\n          ...context,\n          context: {\n            ...authContext,\n            ...context.context\n          }\n        });\n      });\n      middleware.options = m.middleware.options;\n      return {\n        path: m.path,\n        middleware\n      };\n    })\n  ).filter((plugin) => plugin !== void 0).flat() || [];\n  const baseEndpoints = {\n    signInSocial: _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.S,\n    callbackOAuth: _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.R,\n    getSession: (0,_shared_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_2__.b)(),\n    signOut: _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.Q,\n    signUpEmail: signUpEmail(),\n    signInEmail: _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.P,\n    forgetPassword: _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.O,\n    resetPassword: _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.N,\n    verifyEmail: _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.M,\n    sendVerificationEmail: _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.L,\n    changeEmail: _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.K,\n    changePassword: _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.J,\n    setPassword: _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.I,\n    updateUser: (0,_shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.u)(),\n    deleteUser: _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.G,\n    forgetPasswordCallback: _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.F,\n    requestPasswordReset: _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.E,\n    requestPasswordResetCallback: _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.D,\n    listSessions: (0,_shared_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_2__.l)(),\n    revokeSession: _shared_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_2__.e,\n    revokeSessions: _shared_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_2__.d,\n    revokeOtherSessions: _shared_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_2__.r,\n    linkSocialAccount: _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.C,\n    listUserAccounts: _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.B,\n    deleteUserCallback: _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.A,\n    unlinkAccount: _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.z,\n    refreshToken: _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.y,\n    getAccessToken: _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.x,\n    accountInfo: _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.q\n  };\n  const endpoints = {\n    ...baseEndpoints,\n    ...pluginEndpoints,\n    ok: _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.n,\n    error: _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.m\n  };\n  const api = (0,_shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.t)(endpoints, ctx);\n  return {\n    api,\n    middlewares\n  };\n}\nconst router = (ctx, options) => {\n  const { api, middlewares } = getEndpoints(ctx, options);\n  const basePath = new URL(ctx.baseURL).pathname;\n  return (0,better_call__WEBPACK_IMPORTED_MODULE_0__.createRouter)(api, {\n    routerContext: ctx,\n    openapi: {\n      disabled: true\n    },\n    basePath,\n    routerMiddleware: [\n      {\n        path: \"/**\",\n        middleware: _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_1__.l\n      },\n      ...middlewares\n    ],\n    async onRequest(req) {\n      const disabledPaths = ctx.options.disabledPaths || [];\n      const path = new URL(req.url).pathname.replace(basePath, \"\");\n      if (disabledPaths.includes(path)) {\n        return new Response(\"Not Found\", { status: 404 });\n      }\n      for (const plugin of ctx.options.plugins || []) {\n        if (plugin.onRequest) {\n          const response = await plugin.onRequest(req, ctx);\n          if (response && \"response\" in response) {\n            return response.response;\n          }\n        }\n      }\n      return onRequestRateLimit(req, ctx);\n    },\n    async onResponse(res) {\n      for (const plugin of ctx.options.plugins || []) {\n        if (plugin.onResponse) {\n          const response = await plugin.onResponse(res, ctx);\n          if (response) {\n            return response.response;\n          }\n        }\n      }\n      return res;\n    },\n    onError(e) {\n      if (e instanceof better_call__WEBPACK_IMPORTED_MODULE_0__.APIError && e.status === \"FOUND\") {\n        return;\n      }\n      if (options.onAPIError?.throw) {\n        throw e;\n      }\n      if (options.onAPIError?.onError) {\n        options.onAPIError.onError(e, ctx);\n        return;\n      }\n      const optLogLevel = options.logger?.level;\n      const log = optLogLevel === \"error\" || optLogLevel === \"warn\" || optLogLevel === \"debug\" ? _shared_better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_6__.a : void 0;\n      if (options.logger?.disabled !== true) {\n        if (e && typeof e === \"object\" && \"message\" in e && typeof e.message === \"string\") {\n          if (e.message.includes(\"no column\") || e.message.includes(\"column\") || e.message.includes(\"relation\") || e.message.includes(\"table\") || e.message.includes(\"does not exist\")) {\n            ctx.logger?.error(e.message);\n            return;\n          }\n        }\n        if (e instanceof better_call__WEBPACK_IMPORTED_MODULE_0__.APIError) {\n          if (e.status === \"INTERNAL_SERVER_ERROR\") {\n            ctx.logger.error(e.status, e);\n          }\n          log?.error(e.message);\n        } else {\n          ctx.logger?.error(\n            e && typeof e === \"object\" && \"name\" in e ? e.name : \"\",\n            e\n          );\n        }\n      }\n    }\n  });\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFxRDtBQUNkO0FBQ3FuQjtBQUN4akI7QUFDdUc7QUFDd0M7QUFDdk47QUFDK0M7QUFDRjtBQUNEO0FBQ1A7QUFDTztBQUNSO0FBQ3BCO0FBQ1g7QUFDRTtBQUNOO0FBQ0U7QUFDRDtBQUNJO0FBQ3BCO0FBQ2dCO0FBQ0Y7QUFDSTtBQUNIO0FBQ2U7QUFDQTtBQUNUO0FBQ047QUFDZTtBQUN2QjtBQUN1QjtBQUNYO0FBQ0U7QUFDckI7O0FBRWQsMEJBQTBCLG1FQUFrQjtBQUM1QztBQUNBO0FBQ0E7QUFDQSxVQUFVLDJDQUFRLENBQUMsMkNBQVEsSUFBSSx3Q0FBSztBQUNwQztBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsbUVBQWE7QUFDbkMsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLG1FQUFLO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG1FQUFhO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixjQUFjLHFCQUFxQiw0QkFBNEI7QUFDM0Y7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCLGlCQUFpQjtBQUNqQixnQkFBZ0IsbUVBQVU7QUFDMUIsV0FBVztBQUNYO0FBQ0EsZUFBZTtBQUNmLGtCQUFrQjtBQUNsQixpQkFBaUI7QUFDakIsZUFBZTtBQUNmLHlCQUF5QjtBQUN6QixlQUFlO0FBQ2Ysa0JBQWtCO0FBQ2xCLGVBQWU7QUFDZixnQkFBZ0IsbUVBQVU7QUFDMUIsY0FBYztBQUNkLDBCQUEwQjtBQUMxQix3QkFBd0I7QUFDeEIsZ0NBQWdDO0FBQ2hDLGtCQUFrQixtRUFBWTtBQUM5QixpQkFBaUI7QUFDakIsa0JBQWtCO0FBQ2xCLHVCQUF1QjtBQUN2QixxQkFBcUI7QUFDckIsb0JBQW9CO0FBQ3BCLHNCQUFzQjtBQUN0QixpQkFBaUI7QUFDakIsZ0JBQWdCO0FBQ2hCLGtCQUFrQjtBQUNsQixlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sU0FBUztBQUNUO0FBQ0EsY0FBYyxtRUFBZTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLG1CQUFtQjtBQUM3QjtBQUNBLFNBQVMseURBQVk7QUFDckI7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLCtEQUFxQjtBQUN6QyxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLGFBQWE7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSx1QkFBdUIsaURBQVE7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpR0FBaUcsOERBQU07QUFDdkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsaURBQVE7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRThsQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhbWFhblxcT25lRHJpdmVcXERlc2t0b3BcXEthbmRpZF8yXFxOZXcgZm9sZGVyICgyKVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcYXBpXFxpbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQVBJRXJyb3IsIGNyZWF0ZVJvdXRlciB9IGZyb20gJ2JldHRlci1jYWxsJztcbmV4cG9ydCB7IEFQSUVycm9yIH0gZnJvbSAnYmV0dGVyLWNhbGwnO1xuaW1wb3J0IHsgayBhcyBjcmVhdGVFbWFpbFZlcmlmaWNhdGlvblRva2VuLCB3IGFzIHdpbGRjYXJkTWF0Y2gsIHUgYXMgdXBkYXRlVXNlciwgdCBhcyB0b0F1dGhFbmRwb2ludHMsIGwgYXMgb3JpZ2luQ2hlY2tNaWRkbGV3YXJlLCBtIGFzIGVycm9yLCBuIGFzIG9rLCBxIGFzIGFjY291bnRJbmZvLCB4IGFzIGdldEFjY2Vzc1Rva2VuLCB5IGFzIHJlZnJlc2hUb2tlbiwgeiBhcyB1bmxpbmtBY2NvdW50LCBBIGFzIGRlbGV0ZVVzZXJDYWxsYmFjaywgQiBhcyBsaXN0VXNlckFjY291bnRzLCBDIGFzIGxpbmtTb2NpYWxBY2NvdW50LCBEIGFzIHJlcXVlc3RQYXNzd29yZFJlc2V0Q2FsbGJhY2ssIEUgYXMgcmVxdWVzdFBhc3N3b3JkUmVzZXQsIEYgYXMgZm9yZ2V0UGFzc3dvcmRDYWxsYmFjaywgRyBhcyBkZWxldGVVc2VyLCBJIGFzIHNldFBhc3N3b3JkLCBKIGFzIGNoYW5nZVBhc3N3b3JkLCBLIGFzIGNoYW5nZUVtYWlsLCBMIGFzIHNlbmRWZXJpZmljYXRpb25FbWFpbCwgTSBhcyB2ZXJpZnlFbWFpbCwgTiBhcyByZXNldFBhc3N3b3JkLCBPIGFzIGZvcmdldFBhc3N3b3JkLCBQIGFzIHNpZ25JbkVtYWlsLCBRIGFzIHNpZ25PdXQsIFIgYXMgY2FsbGJhY2tPQXV0aCwgUyBhcyBzaWduSW5Tb2NpYWwgfSBmcm9tICcuLi9zaGFyZWQvYmV0dGVyLWF1dGgubnFXZjd6VWUubWpzJztcbmV4cG9ydCB7IG8gYXMgb3JpZ2luQ2hlY2ssIFQgYXMgc2VuZFZlcmlmaWNhdGlvbkVtYWlsRm4gfSBmcm9tICcuLi9zaGFyZWQvYmV0dGVyLWF1dGgubnFXZjd6VWUubWpzJztcbmltcG9ydCB7IGEgYXMgY3JlYXRlQXV0aEVuZHBvaW50LCBCIGFzIEJBU0VfRVJST1JfQ09ERVMsIGwgYXMgbGlzdFNlc3Npb25zLCBiIGFzIGdldFNlc3Npb24sIHIgYXMgcmV2b2tlT3RoZXJTZXNzaW9ucywgZCBhcyByZXZva2VTZXNzaW9ucywgZSBhcyByZXZva2VTZXNzaW9uIH0gZnJvbSAnLi4vc2hhcmVkL2JldHRlci1hdXRoLkRWNUVIZVlHLm1qcyc7XG5leHBvcnQgeyBjIGFzIGNyZWF0ZUF1dGhNaWRkbGV3YXJlLCBmIGFzIGZyZXNoU2Vzc2lvbk1pZGRsZXdhcmUsIGcgYXMgZ2V0U2Vzc2lvbkZyb21DdHgsIGggYXMgZ2V0U2Vzc2lvblF1ZXJ5U2NoZW1hLCBvIGFzIG9wdGlvbnNNaWRkbGV3YXJlLCBpIGFzIHJlcXVlc3RPbmx5U2Vzc2lvbk1pZGRsZXdhcmUsIHMgYXMgc2Vzc2lvbk1pZGRsZXdhcmUgfSBmcm9tICcuLi9zaGFyZWQvYmV0dGVyLWF1dGguRFY1RUhlWUcubWpzJztcbmltcG9ydCAqIGFzIHogZnJvbSAnem9kL3Y0JztcbmltcG9ydCB7IHMgYXMgc2V0U2Vzc2lvbkNvb2tpZSB9IGZyb20gJy4uL3NoYXJlZC9iZXR0ZXItYXV0aC5VZlZXQXJJQi5tanMnO1xuaW1wb3J0IHsgaCBhcyBwYXJzZVVzZXJJbnB1dCB9IGZyb20gJy4uL3NoYXJlZC9iZXR0ZXItYXV0aC5EY3Y4UFM3VC5tanMnO1xuaW1wb3J0IHsgYiBhcyBpc0RldmVsb3BtZW50IH0gZnJvbSAnLi4vc2hhcmVkL2JldHRlci1hdXRoLkNNUTNyQS1JLm1qcyc7XG5pbXBvcnQgeyBhIGFzIGxvZ2dlciB9IGZyb20gJy4uL3NoYXJlZC9iZXR0ZXItYXV0aC5CakJseWJ2LS5tanMnO1xuaW1wb3J0IHsgcyBhcyBzYWZlSlNPTlBhcnNlIH0gZnJvbSAnLi4vc2hhcmVkL2JldHRlci1hdXRoLkJaWktOMWc3Lm1qcyc7XG5pbXBvcnQgeyBnIGFzIGdldElwIH0gZnJvbSAnLi4vc2hhcmVkL2JldHRlci1hdXRoLk8yVnREa0RLLm1qcyc7XG5pbXBvcnQgJy4uL3NoYXJlZC9iZXR0ZXItYXV0aC5DVzZEOWVTeC5tanMnO1xuaW1wb3J0ICdAYmV0dGVyLWF1dGgvdXRpbHMvaGFzaCc7XG5pbXBvcnQgJ0BiZXR0ZXItYXV0aC91dGlscy9iYXNlNjQnO1xuaW1wb3J0ICcuLi9jcnlwdG8vaW5kZXgubWpzJztcbmltcG9ydCAnQG5vYmxlL2NpcGhlcnMvY2hhY2hhJztcbmltcG9ydCAnQG5vYmxlL2NpcGhlcnMvdXRpbHMnO1xuaW1wb3J0ICdAbm9ibGUvY2lwaGVycy93ZWJjcnlwdG8nO1xuaW1wb3J0ICdqb3NlJztcbmltcG9ydCAnQG5vYmxlL2hhc2hlcy9zY3J5cHQnO1xuaW1wb3J0ICdAYmV0dGVyLWF1dGgvdXRpbHMnO1xuaW1wb3J0ICdAYmV0dGVyLWF1dGgvdXRpbHMvaGV4JztcbmltcG9ydCAnQG5vYmxlL2hhc2hlcy91dGlscyc7XG5pbXBvcnQgJy4uL3NoYXJlZC9iZXR0ZXItYXV0aC5EZHpTSmYtbi5tanMnO1xuaW1wb3J0ICcuLi9zaGFyZWQvYmV0dGVyLWF1dGguQjRRb3hkZ2MubWpzJztcbmltcG9ydCAnQGJldHRlci1hdXRoL3V0aWxzL3JhbmRvbSc7XG5pbXBvcnQgJ0BiZXR0ZXItZmV0Y2gvZmV0Y2gnO1xuaW1wb3J0ICcuLi9zaGFyZWQvYmV0dGVyLWF1dGguQ3VTX2VEZEsubWpzJztcbmltcG9ydCAnam9zZS9lcnJvcnMnO1xuaW1wb3J0ICcuLi9zaGFyZWQvYmV0dGVyLWF1dGguQlVQUFJYZksubWpzJztcbmltcG9ydCAnQGJldHRlci1hdXRoL3V0aWxzL2htYWMnO1xuaW1wb3J0ICdAYmV0dGVyLWF1dGgvdXRpbHMvYmluYXJ5JztcbmltcG9ydCAnZGVmdSc7XG5cbmNvbnN0IHNpZ25VcEVtYWlsID0gKCkgPT4gY3JlYXRlQXV0aEVuZHBvaW50KFxuICBcIi9zaWduLXVwL2VtYWlsXCIsXG4gIHtcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIGJvZHk6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxuICAgIG1ldGFkYXRhOiB7XG4gICAgICAkSW5mZXI6IHtcbiAgICAgICAgYm9keToge31cbiAgICAgIH0sXG4gICAgICBvcGVuYXBpOiB7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIlNpZ24gdXAgYSB1c2VyIHVzaW5nIGVtYWlsIGFuZCBwYXNzd29yZFwiLFxuICAgICAgICByZXF1ZXN0Qm9keToge1xuICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgIFwiYXBwbGljYXRpb24vanNvblwiOiB7XG4gICAgICAgICAgICAgIHNjaGVtYToge1xuICAgICAgICAgICAgICAgIHR5cGU6IFwib2JqZWN0XCIsXG4gICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgbmFtZSBvZiB0aGUgdXNlclwiXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgZW1haWw6IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIGVtYWlsIG9mIHRoZSB1c2VyXCJcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICBwYXNzd29yZDoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgcGFzc3dvcmQgb2YgdGhlIHVzZXJcIlxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIGltYWdlOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlRoZSBwcm9maWxlIGltYWdlIFVSTCBvZiB0aGUgdXNlclwiXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgY2FsbGJhY2tVUkw6IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIFVSTCB0byB1c2UgZm9yIGVtYWlsIHZlcmlmaWNhdGlvbiBjYWxsYmFja1wiXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgcmVtZW1iZXJNZToge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJvb2xlYW5cIixcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiSWYgdGhpcyBpcyBmYWxzZSwgdGhlIHNlc3Npb24gd2lsbCBub3QgYmUgcmVtZW1iZXJlZC4gRGVmYXVsdCBpcyBgdHJ1ZWAuXCJcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBbXCJuYW1lXCIsIFwiZW1haWxcIiwgXCJwYXNzd29yZFwiXVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICByZXNwb25zZXM6IHtcbiAgICAgICAgICBcIjIwMFwiOiB7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJTdWNjZXNzZnVsbHkgY3JlYXRlZCB1c2VyXCIsXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgIFwiYXBwbGljYXRpb24vanNvblwiOiB7XG4gICAgICAgICAgICAgICAgc2NoZW1hOiB7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcIm9iamVjdFwiLFxuICAgICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICB0b2tlbjoge1xuICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgbnVsbGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiQXV0aGVudGljYXRpb24gdG9rZW4gZm9yIHRoZSBzZXNzaW9uXCJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwib2JqZWN0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIHVuaXF1ZSBpZGVudGlmaWVyIG9mIHRoZSB1c2VyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IFwiZW1haWxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIGVtYWlsIGFkZHJlc3Mgb2YgdGhlIHVzZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIG5hbWUgb2YgdGhlIHVzZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogXCJ1cmlcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlRoZSBwcm9maWxlIGltYWdlIFVSTCBvZiB0aGUgdXNlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZW1haWxWZXJpZmllZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJvb2xlYW5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiV2hldGhlciB0aGUgZW1haWwgaGFzIGJlZW4gdmVyaWZpZWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IFwiZGF0ZS10aW1lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIldoZW4gdGhlIHVzZXIgd2FzIGNyZWF0ZWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IFwiZGF0ZS10aW1lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIldoZW4gdGhlIHVzZXIgd2FzIGxhc3QgdXBkYXRlZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogW1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJlbWFpbFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImVtYWlsVmVyaWZpZWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY3JlYXRlZEF0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInVwZGF0ZWRBdFwiXG4gICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IFtcInVzZXJcIl1cbiAgICAgICAgICAgICAgICAgIC8vIHRva2VuIGlzIG9wdGlvbmFsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LFxuICBhc3luYyAoY3R4KSA9PiB7XG4gICAgaWYgKCFjdHguY29udGV4dC5vcHRpb25zLmVtYWlsQW5kUGFzc3dvcmQ/LmVuYWJsZWQgfHwgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkPy5kaXNhYmxlU2lnblVwKSB7XG4gICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG4gICAgICAgIG1lc3NhZ2U6IFwiRW1haWwgYW5kIHBhc3N3b3JkIHNpZ24gdXAgaXMgbm90IGVuYWJsZWRcIlxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IGJvZHkgPSBjdHguYm9keTtcbiAgICBjb25zdCB7XG4gICAgICBuYW1lLFxuICAgICAgZW1haWwsXG4gICAgICBwYXNzd29yZCxcbiAgICAgIGltYWdlLFxuICAgICAgY2FsbGJhY2tVUkwsXG4gICAgICByZW1lbWJlck1lLFxuICAgICAgLi4uYWRkaXRpb25hbEZpZWxkc1xuICAgIH0gPSBib2R5O1xuICAgIGNvbnN0IGlzVmFsaWRFbWFpbCA9IHouZW1haWwoKS5zYWZlUGFyc2UoZW1haWwpO1xuICAgIGlmICghaXNWYWxpZEVtYWlsLnN1Y2Nlc3MpIHtcbiAgICAgIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcbiAgICAgICAgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5JTlZBTElEX0VNQUlMXG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgbWluUGFzc3dvcmRMZW5ndGggPSBjdHguY29udGV4dC5wYXNzd29yZC5jb25maWcubWluUGFzc3dvcmRMZW5ndGg7XG4gICAgaWYgKHBhc3N3b3JkLmxlbmd0aCA8IG1pblBhc3N3b3JkTGVuZ3RoKSB7XG4gICAgICBjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJQYXNzd29yZCBpcyB0b28gc2hvcnRcIik7XG4gICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG4gICAgICAgIG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuUEFTU1dPUkRfVE9PX1NIT1JUXG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgbWF4UGFzc3dvcmRMZW5ndGggPSBjdHguY29udGV4dC5wYXNzd29yZC5jb25maWcubWF4UGFzc3dvcmRMZW5ndGg7XG4gICAgaWYgKHBhc3N3b3JkLmxlbmd0aCA+IG1heFBhc3N3b3JkTGVuZ3RoKSB7XG4gICAgICBjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJQYXNzd29yZCBpcyB0b28gbG9uZ1wiKTtcbiAgICAgIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcbiAgICAgICAgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5QQVNTV09SRF9UT09fTE9OR1xuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IGRiVXNlciA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVXNlckJ5RW1haWwoZW1haWwpO1xuICAgIGlmIChkYlVzZXI/LnVzZXIpIHtcbiAgICAgIGN0eC5jb250ZXh0LmxvZ2dlci5pbmZvKGBTaWduLXVwIGF0dGVtcHQgZm9yIGV4aXN0aW5nIGVtYWlsOiAke2VtYWlsfWApO1xuICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5QUk9DRVNTQUJMRV9FTlRJVFlcIiwge1xuICAgICAgICBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLlVTRVJfQUxSRUFEWV9FWElTVFNcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBhZGRpdGlvbmFsRGF0YSA9IHBhcnNlVXNlcklucHV0KFxuICAgICAgY3R4LmNvbnRleHQub3B0aW9ucyxcbiAgICAgIGFkZGl0aW9uYWxGaWVsZHNcbiAgICApO1xuICAgIGNvbnN0IGhhc2ggPSBhd2FpdCBjdHguY29udGV4dC5wYXNzd29yZC5oYXNoKHBhc3N3b3JkKTtcbiAgICBsZXQgY3JlYXRlZFVzZXI7XG4gICAgdHJ5IHtcbiAgICAgIGNyZWF0ZWRVc2VyID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZVVzZXIoXG4gICAgICAgIHtcbiAgICAgICAgICBlbWFpbDogZW1haWwudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICBuYW1lLFxuICAgICAgICAgIGltYWdlLFxuICAgICAgICAgIC4uLmFkZGl0aW9uYWxEYXRhLFxuICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIGN0eFxuICAgICAgKTtcbiAgICAgIGlmICghY3JlYXRlZFVzZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwge1xuICAgICAgICAgIG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuRkFJTEVEX1RPX0NSRUFURV9VU0VSXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmIChpc0RldmVsb3BtZW50KSB7XG4gICAgICAgIGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBjcmVhdGUgdXNlclwiLCBlKTtcbiAgICAgIH1cbiAgICAgIGlmIChlIGluc3RhbmNlb2YgQVBJRXJyb3IpIHtcbiAgICAgICAgdGhyb3cgZTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBBUElFcnJvcihcIlVOUFJPQ0VTU0FCTEVfRU5USVRZXCIsIHtcbiAgICAgICAgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5GQUlMRURfVE9fQ1JFQVRFX1VTRVIsXG4gICAgICAgIGRldGFpbHM6IGVcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoIWNyZWF0ZWRVc2VyKSB7XG4gICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTlBST0NFU1NBQkxFX0VOVElUWVwiLCB7XG4gICAgICAgIG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuRkFJTEVEX1RPX0NSRUFURV9VU0VSXG4gICAgICB9KTtcbiAgICB9XG4gICAgYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmxpbmtBY2NvdW50KFxuICAgICAge1xuICAgICAgICB1c2VySWQ6IGNyZWF0ZWRVc2VyLmlkLFxuICAgICAgICBwcm92aWRlcklkOiBcImNyZWRlbnRpYWxcIixcbiAgICAgICAgYWNjb3VudElkOiBjcmVhdGVkVXNlci5pZCxcbiAgICAgICAgcGFzc3dvcmQ6IGhhc2hcbiAgICAgIH0sXG4gICAgICBjdHhcbiAgICApO1xuICAgIGlmIChjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5zZW5kT25TaWduVXAgfHwgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkLnJlcXVpcmVFbWFpbFZlcmlmaWNhdGlvbikge1xuICAgICAgY29uc3QgdG9rZW4gPSBhd2FpdCBjcmVhdGVFbWFpbFZlcmlmaWNhdGlvblRva2VuKFxuICAgICAgICBjdHguY29udGV4dC5zZWNyZXQsXG4gICAgICAgIGNyZWF0ZWRVc2VyLmVtYWlsLFxuICAgICAgICB2b2lkIDAsXG4gICAgICAgIGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LmV4cGlyZXNJblxuICAgICAgKTtcbiAgICAgIGNvbnN0IHVybCA9IGAke2N0eC5jb250ZXh0LmJhc2VVUkx9L3ZlcmlmeS1lbWFpbD90b2tlbj0ke3Rva2VufSZjYWxsYmFja1VSTD0ke2JvZHkuY2FsbGJhY2tVUkwgfHwgXCIvXCJ9YDtcbiAgICAgIGF3YWl0IGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LnNlbmRWZXJpZmljYXRpb25FbWFpbD8uKFxuICAgICAgICB7XG4gICAgICAgICAgdXNlcjogY3JlYXRlZFVzZXIsXG4gICAgICAgICAgdXJsLFxuICAgICAgICAgIHRva2VuXG4gICAgICAgIH0sXG4gICAgICAgIGN0eC5yZXF1ZXN0XG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkLmF1dG9TaWduSW4gPT09IGZhbHNlIHx8IGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxBbmRQYXNzd29yZC5yZXF1aXJlRW1haWxWZXJpZmljYXRpb24pIHtcbiAgICAgIHJldHVybiBjdHguanNvbih7XG4gICAgICAgIHRva2VuOiBudWxsLFxuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgaWQ6IGNyZWF0ZWRVc2VyLmlkLFxuICAgICAgICAgIGVtYWlsOiBjcmVhdGVkVXNlci5lbWFpbCxcbiAgICAgICAgICBuYW1lOiBjcmVhdGVkVXNlci5uYW1lLFxuICAgICAgICAgIGltYWdlOiBjcmVhdGVkVXNlci5pbWFnZSxcbiAgICAgICAgICBlbWFpbFZlcmlmaWVkOiBjcmVhdGVkVXNlci5lbWFpbFZlcmlmaWVkLFxuICAgICAgICAgIGNyZWF0ZWRBdDogY3JlYXRlZFVzZXIuY3JlYXRlZEF0LFxuICAgICAgICAgIHVwZGF0ZWRBdDogY3JlYXRlZFVzZXIudXBkYXRlZEF0XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZVNlc3Npb24oXG4gICAgICBjcmVhdGVkVXNlci5pZCxcbiAgICAgIGN0eCxcbiAgICAgIHJlbWVtYmVyTWUgPT09IGZhbHNlXG4gICAgKTtcbiAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcbiAgICAgICAgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5GQUlMRURfVE9fQ1JFQVRFX1NFU1NJT05cbiAgICAgIH0pO1xuICAgIH1cbiAgICBhd2FpdCBzZXRTZXNzaW9uQ29va2llKFxuICAgICAgY3R4LFxuICAgICAge1xuICAgICAgICBzZXNzaW9uLFxuICAgICAgICB1c2VyOiBjcmVhdGVkVXNlclxuICAgICAgfSxcbiAgICAgIHJlbWVtYmVyTWUgPT09IGZhbHNlXG4gICAgKTtcbiAgICByZXR1cm4gY3R4Lmpzb24oe1xuICAgICAgdG9rZW46IHNlc3Npb24udG9rZW4sXG4gICAgICB1c2VyOiB7XG4gICAgICAgIGlkOiBjcmVhdGVkVXNlci5pZCxcbiAgICAgICAgZW1haWw6IGNyZWF0ZWRVc2VyLmVtYWlsLFxuICAgICAgICBuYW1lOiBjcmVhdGVkVXNlci5uYW1lLFxuICAgICAgICBpbWFnZTogY3JlYXRlZFVzZXIuaW1hZ2UsXG4gICAgICAgIGVtYWlsVmVyaWZpZWQ6IGNyZWF0ZWRVc2VyLmVtYWlsVmVyaWZpZWQsXG4gICAgICAgIGNyZWF0ZWRBdDogY3JlYXRlZFVzZXIuY3JlYXRlZEF0LFxuICAgICAgICB1cGRhdGVkQXQ6IGNyZWF0ZWRVc2VyLnVwZGF0ZWRBdFxuICAgICAgfVxuICAgIH0pO1xuICB9XG4pO1xuXG5mdW5jdGlvbiBzaG91bGRSYXRlTGltaXQobWF4LCB3aW5kb3csIHJhdGVMaW1pdERhdGEpIHtcbiAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgY29uc3Qgd2luZG93SW5NcyA9IHdpbmRvdyAqIDFlMztcbiAgY29uc3QgdGltZVNpbmNlTGFzdFJlcXVlc3QgPSBub3cgLSByYXRlTGltaXREYXRhLmxhc3RSZXF1ZXN0O1xuICByZXR1cm4gdGltZVNpbmNlTGFzdFJlcXVlc3QgPCB3aW5kb3dJbk1zICYmIHJhdGVMaW1pdERhdGEuY291bnQgPj0gbWF4O1xufVxuZnVuY3Rpb24gcmF0ZUxpbWl0UmVzcG9uc2UocmV0cnlBZnRlcikge1xuICByZXR1cm4gbmV3IFJlc3BvbnNlKFxuICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIG1lc3NhZ2U6IFwiVG9vIG1hbnkgcmVxdWVzdHMuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuXCJcbiAgICB9KSxcbiAgICB7XG4gICAgICBzdGF0dXM6IDQyOSxcbiAgICAgIHN0YXR1c1RleHQ6IFwiVG9vIE1hbnkgUmVxdWVzdHNcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgXCJYLVJldHJ5LUFmdGVyXCI6IHJldHJ5QWZ0ZXIudG9TdHJpbmcoKVxuICAgICAgfVxuICAgIH1cbiAgKTtcbn1cbmZ1bmN0aW9uIGdldFJldHJ5QWZ0ZXIobGFzdFJlcXVlc3QsIHdpbmRvdykge1xuICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICBjb25zdCB3aW5kb3dJbk1zID0gd2luZG93ICogMWUzO1xuICByZXR1cm4gTWF0aC5jZWlsKChsYXN0UmVxdWVzdCArIHdpbmRvd0luTXMgLSBub3cpIC8gMWUzKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZURCU3RvcmFnZShjdHgpIHtcbiAgY29uc3QgbW9kZWwgPSBcInJhdGVMaW1pdFwiO1xuICBjb25zdCBkYiA9IGN0eC5hZGFwdGVyO1xuICByZXR1cm4ge1xuICAgIGdldDogYXN5bmMgKGtleSkgPT4ge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZGIuZmluZE1hbnkoe1xuICAgICAgICBtb2RlbCxcbiAgICAgICAgd2hlcmU6IFt7IGZpZWxkOiBcImtleVwiLCB2YWx1ZToga2V5IH1dXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGRhdGEgPSByZXNbMF07XG4gICAgICBpZiAodHlwZW9mIGRhdGE/Lmxhc3RSZXF1ZXN0ID09PSBcImJpZ2ludFwiKSB7XG4gICAgICAgIGRhdGEubGFzdFJlcXVlc3QgPSBOdW1iZXIoZGF0YS5sYXN0UmVxdWVzdCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9LFxuICAgIHNldDogYXN5bmMgKGtleSwgdmFsdWUsIF91cGRhdGUpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChfdXBkYXRlKSB7XG4gICAgICAgICAgYXdhaXQgZGIudXBkYXRlTWFueSh7XG4gICAgICAgICAgICBtb2RlbCxcbiAgICAgICAgICAgIHdoZXJlOiBbeyBmaWVsZDogXCJrZXlcIiwgdmFsdWU6IGtleSB9XSxcbiAgICAgICAgICAgIHVwZGF0ZToge1xuICAgICAgICAgICAgICBjb3VudDogdmFsdWUuY291bnQsXG4gICAgICAgICAgICAgIGxhc3RSZXF1ZXN0OiB2YWx1ZS5sYXN0UmVxdWVzdFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGF3YWl0IGRiLmNyZWF0ZSh7XG4gICAgICAgICAgICBtb2RlbCxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICBjb3VudDogdmFsdWUuY291bnQsXG4gICAgICAgICAgICAgIGxhc3RSZXF1ZXN0OiB2YWx1ZS5sYXN0UmVxdWVzdFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGN0eC5sb2dnZXIuZXJyb3IoXCJFcnJvciBzZXR0aW5nIHJhdGUgbGltaXRcIiwgZSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuY29uc3QgbWVtb3J5ID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbmZ1bmN0aW9uIGdldFJhdGVMaW1pdFN0b3JhZ2UoY3R4KSB7XG4gIGlmIChjdHgub3B0aW9ucy5yYXRlTGltaXQ/LmN1c3RvbVN0b3JhZ2UpIHtcbiAgICByZXR1cm4gY3R4Lm9wdGlvbnMucmF0ZUxpbWl0LmN1c3RvbVN0b3JhZ2U7XG4gIH1cbiAgaWYgKGN0eC5yYXRlTGltaXQuc3RvcmFnZSA9PT0gXCJzZWNvbmRhcnktc3RvcmFnZVwiKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGdldDogYXN5bmMgKGtleSkgPT4ge1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgY3R4Lm9wdGlvbnMuc2Vjb25kYXJ5U3RvcmFnZT8uZ2V0KGtleSk7XG4gICAgICAgIHJldHVybiBkYXRhID8gc2FmZUpTT05QYXJzZShkYXRhKSA6IHZvaWQgMDtcbiAgICAgIH0sXG4gICAgICBzZXQ6IGFzeW5jIChrZXksIHZhbHVlKSA9PiB7XG4gICAgICAgIGF3YWl0IGN0eC5vcHRpb25zLnNlY29uZGFyeVN0b3JhZ2U/LnNldD8uKGtleSwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIGNvbnN0IHN0b3JhZ2UgPSBjdHgucmF0ZUxpbWl0LnN0b3JhZ2U7XG4gIGlmIChzdG9yYWdlID09PSBcIm1lbW9yeVwiKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFzeW5jIGdldChrZXkpIHtcbiAgICAgICAgcmV0dXJuIG1lbW9yeS5nZXQoa2V5KTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBzZXQoa2V5LCB2YWx1ZSwgX3VwZGF0ZSkge1xuICAgICAgICBtZW1vcnkuc2V0KGtleSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgcmV0dXJuIGNyZWF0ZURCU3RvcmFnZShjdHgpO1xufVxuYXN5bmMgZnVuY3Rpb24gb25SZXF1ZXN0UmF0ZUxpbWl0KHJlcSwgY3R4KSB7XG4gIGlmICghY3R4LnJhdGVMaW1pdC5lbmFibGVkKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHBhdGggPSBuZXcgVVJMKHJlcS51cmwpLnBhdGhuYW1lLnJlcGxhY2UoXG4gICAgY3R4Lm9wdGlvbnMuYmFzZVBhdGggfHwgXCIvYXBpL2F1dGhcIixcbiAgICBcIlwiXG4gICk7XG4gIGxldCB3aW5kb3cgPSBjdHgucmF0ZUxpbWl0LndpbmRvdztcbiAgbGV0IG1heCA9IGN0eC5yYXRlTGltaXQubWF4O1xuICBjb25zdCBpcCA9IGdldElwKHJlcSwgY3R4Lm9wdGlvbnMpO1xuICBpZiAoIWlwKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGtleSA9IGlwICsgcGF0aDtcbiAgY29uc3Qgc3BlY2lhbFJ1bGVzID0gZ2V0RGVmYXVsdFNwZWNpYWxSdWxlcygpO1xuICBjb25zdCBzcGVjaWFsUnVsZSA9IHNwZWNpYWxSdWxlcy5maW5kKChydWxlKSA9PiBydWxlLnBhdGhNYXRjaGVyKHBhdGgpKTtcbiAgaWYgKHNwZWNpYWxSdWxlKSB7XG4gICAgd2luZG93ID0gc3BlY2lhbFJ1bGUud2luZG93O1xuICAgIG1heCA9IHNwZWNpYWxSdWxlLm1heDtcbiAgfVxuICBmb3IgKGNvbnN0IHBsdWdpbiBvZiBjdHgub3B0aW9ucy5wbHVnaW5zIHx8IFtdKSB7XG4gICAgaWYgKHBsdWdpbi5yYXRlTGltaXQpIHtcbiAgICAgIGNvbnN0IG1hdGNoZWRSdWxlID0gcGx1Z2luLnJhdGVMaW1pdC5maW5kKFxuICAgICAgICAocnVsZSkgPT4gcnVsZS5wYXRoTWF0Y2hlcihwYXRoKVxuICAgICAgKTtcbiAgICAgIGlmIChtYXRjaGVkUnVsZSkge1xuICAgICAgICB3aW5kb3cgPSBtYXRjaGVkUnVsZS53aW5kb3c7XG4gICAgICAgIG1heCA9IG1hdGNoZWRSdWxlLm1heDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmIChjdHgucmF0ZUxpbWl0LmN1c3RvbVJ1bGVzKSB7XG4gICAgY29uc3QgX3BhdGggPSBPYmplY3Qua2V5cyhjdHgucmF0ZUxpbWl0LmN1c3RvbVJ1bGVzKS5maW5kKChwKSA9PiB7XG4gICAgICBpZiAocC5pbmNsdWRlcyhcIipcIikpIHtcbiAgICAgICAgY29uc3QgaXNNYXRjaCA9IHdpbGRjYXJkTWF0Y2gocCkocGF0aCk7XG4gICAgICAgIHJldHVybiBpc01hdGNoO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHAgPT09IHBhdGg7XG4gICAgfSk7XG4gICAgaWYgKF9wYXRoKSB7XG4gICAgICBjb25zdCBjdXN0b21SdWxlID0gY3R4LnJhdGVMaW1pdC5jdXN0b21SdWxlc1tfcGF0aF07XG4gICAgICBjb25zdCByZXNvbHZlZCA9IHR5cGVvZiBjdXN0b21SdWxlID09PSBcImZ1bmN0aW9uXCIgPyBhd2FpdCBjdXN0b21SdWxlKHJlcSkgOiBjdXN0b21SdWxlO1xuICAgICAgaWYgKHJlc29sdmVkKSB7XG4gICAgICAgIHdpbmRvdyA9IHJlc29sdmVkLndpbmRvdztcbiAgICAgICAgbWF4ID0gcmVzb2x2ZWQubWF4O1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBjb25zdCBzdG9yYWdlID0gZ2V0UmF0ZUxpbWl0U3RvcmFnZShjdHgpO1xuICBjb25zdCBkYXRhID0gYXdhaXQgc3RvcmFnZS5nZXQoa2V5KTtcbiAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgaWYgKCFkYXRhKSB7XG4gICAgYXdhaXQgc3RvcmFnZS5zZXQoa2V5LCB7XG4gICAgICBrZXksXG4gICAgICBjb3VudDogMSxcbiAgICAgIGxhc3RSZXF1ZXN0OiBub3dcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCB0aW1lU2luY2VMYXN0UmVxdWVzdCA9IG5vdyAtIGRhdGEubGFzdFJlcXVlc3Q7XG4gICAgaWYgKHNob3VsZFJhdGVMaW1pdChtYXgsIHdpbmRvdywgZGF0YSkpIHtcbiAgICAgIGNvbnN0IHJldHJ5QWZ0ZXIgPSBnZXRSZXRyeUFmdGVyKGRhdGEubGFzdFJlcXVlc3QsIHdpbmRvdyk7XG4gICAgICByZXR1cm4gcmF0ZUxpbWl0UmVzcG9uc2UocmV0cnlBZnRlcik7XG4gICAgfSBlbHNlIGlmICh0aW1lU2luY2VMYXN0UmVxdWVzdCA+IHdpbmRvdyAqIDFlMykge1xuICAgICAgYXdhaXQgc3RvcmFnZS5zZXQoXG4gICAgICAgIGtleSxcbiAgICAgICAge1xuICAgICAgICAgIC4uLmRhdGEsXG4gICAgICAgICAgY291bnQ6IDEsXG4gICAgICAgICAgbGFzdFJlcXVlc3Q6IG5vd1xuICAgICAgICB9LFxuICAgICAgICB0cnVlXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCBzdG9yYWdlLnNldChcbiAgICAgICAga2V5LFxuICAgICAgICB7XG4gICAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgICBjb3VudDogZGF0YS5jb3VudCArIDEsXG4gICAgICAgICAgbGFzdFJlcXVlc3Q6IG5vd1xuICAgICAgICB9LFxuICAgICAgICB0cnVlXG4gICAgICApO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gZ2V0RGVmYXVsdFNwZWNpYWxSdWxlcygpIHtcbiAgY29uc3Qgc3BlY2lhbFJ1bGVzID0gW1xuICAgIHtcbiAgICAgIHBhdGhNYXRjaGVyKHBhdGgpIHtcbiAgICAgICAgcmV0dXJuIHBhdGguc3RhcnRzV2l0aChcIi9zaWduLWluXCIpIHx8IHBhdGguc3RhcnRzV2l0aChcIi9zaWduLXVwXCIpIHx8IHBhdGguc3RhcnRzV2l0aChcIi9jaGFuZ2UtcGFzc3dvcmRcIikgfHwgcGF0aC5zdGFydHNXaXRoKFwiL2NoYW5nZS1lbWFpbFwiKTtcbiAgICAgIH0sXG4gICAgICB3aW5kb3c6IDEwLFxuICAgICAgbWF4OiAzXG4gICAgfVxuICBdO1xuICByZXR1cm4gc3BlY2lhbFJ1bGVzO1xufVxuXG5mdW5jdGlvbiBjaGVja0VuZHBvaW50Q29uZmxpY3RzKG9wdGlvbnMsIGxvZ2dlcjIpIHtcbiAgY29uc3QgZW5kcG9pbnRSZWdpc3RyeSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIG9wdGlvbnMucGx1Z2lucz8uZm9yRWFjaCgocGx1Z2luKSA9PiB7XG4gICAgaWYgKHBsdWdpbi5lbmRwb2ludHMpIHtcbiAgICAgIGZvciAoY29uc3QgW2tleSwgZW5kcG9pbnRdIG9mIE9iamVjdC5lbnRyaWVzKHBsdWdpbi5lbmRwb2ludHMpKSB7XG4gICAgICAgIGlmIChlbmRwb2ludCAmJiBcInBhdGhcIiBpbiBlbmRwb2ludCkge1xuICAgICAgICAgIGNvbnN0IHBhdGggPSBlbmRwb2ludC5wYXRoO1xuICAgICAgICAgIGlmICghZW5kcG9pbnRSZWdpc3RyeS5oYXMocGF0aCkpIHtcbiAgICAgICAgICAgIGVuZHBvaW50UmVnaXN0cnkuc2V0KHBhdGgsIFtdKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZW5kcG9pbnRSZWdpc3RyeS5nZXQocGF0aCkucHVzaCh7XG4gICAgICAgICAgICBwbHVnaW5JZDogcGx1Z2luLmlkLFxuICAgICAgICAgICAgZW5kcG9pbnRLZXk6IGtleVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgY29uc3QgY29uZmxpY3RzID0gW107XG4gIGZvciAoY29uc3QgW3BhdGgsIGVudHJpZXNdIG9mIGVuZHBvaW50UmVnaXN0cnkuZW50cmllcygpKSB7XG4gICAgaWYgKGVudHJpZXMubGVuZ3RoID4gMSkge1xuICAgICAgY29uc3QgdW5pcXVlUGx1Z2lucyA9IFsuLi5uZXcgU2V0KGVudHJpZXMubWFwKChlKSA9PiBlLnBsdWdpbklkKSldO1xuICAgICAgY29uZmxpY3RzLnB1c2goe1xuICAgICAgICBwYXRoLFxuICAgICAgICBwbHVnaW5zOiB1bmlxdWVQbHVnaW5zXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgaWYgKGNvbmZsaWN0cy5sZW5ndGggPiAwKSB7XG4gICAgY29uc3QgY29uZmxpY3RNZXNzYWdlcyA9IGNvbmZsaWN0cy5tYXAoXG4gICAgICAoY29uZmxpY3QpID0+IGAgIC0gXCIke2NvbmZsaWN0LnBhdGh9XCIgdXNlZCBieSBwbHVnaW5zOiAke2NvbmZsaWN0LnBsdWdpbnMuam9pbihcIiwgXCIpfWBcbiAgICApLmpvaW4oXCJcXG5cIik7XG4gICAgbG9nZ2VyMi5lcnJvcihcbiAgICAgIGBFbmRwb2ludCBwYXRoIGNvbmZsaWN0cyBkZXRlY3RlZCEgTXVsdGlwbGUgcGx1Z2lucyBhcmUgdHJ5aW5nIHRvIHVzZSB0aGUgc2FtZSBlbmRwb2ludCBwYXRoczpcbiR7Y29uZmxpY3RNZXNzYWdlc31cblxuVG8gcmVzb2x2ZSB0aGlzLCB5b3UgY2FuOlxuXHQxLiBVc2Ugb25seSBvbmUgb2YgdGhlIGNvbmZsaWN0aW5nIHBsdWdpbnNcblx0Mi4gQ29uZmlndXJlIHRoZSBwbHVnaW5zIHRvIHVzZSBkaWZmZXJlbnQgcGF0aHMgKGlmIHN1cHBvcnRlZClcbmBcbiAgICApO1xuICB9XG59XG5mdW5jdGlvbiBnZXRFbmRwb2ludHMoY3R4LCBvcHRpb25zKSB7XG4gIGNvbnN0IHBsdWdpbkVuZHBvaW50cyA9IG9wdGlvbnMucGx1Z2lucz8ucmVkdWNlKFxuICAgIChhY2MsIHBsdWdpbikgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uYWNjLFxuICAgICAgICAuLi5wbHVnaW4uZW5kcG9pbnRzXG4gICAgICB9O1xuICAgIH0sXG4gICAge31cbiAgKTtcbiAgY29uc3QgbWlkZGxld2FyZXMgPSBvcHRpb25zLnBsdWdpbnM/Lm1hcChcbiAgICAocGx1Z2luKSA9PiBwbHVnaW4ubWlkZGxld2FyZXM/Lm1hcCgobSkgPT4ge1xuICAgICAgY29uc3QgbWlkZGxld2FyZSA9IChhc3luYyAoY29udGV4dCkgPT4ge1xuICAgICAgICBjb25zdCBhdXRoQ29udGV4dCA9IGF3YWl0IGN0eDtcbiAgICAgICAgcmV0dXJuIG0ubWlkZGxld2FyZSh7XG4gICAgICAgICAgLi4uY29udGV4dCxcbiAgICAgICAgICBjb250ZXh0OiB7XG4gICAgICAgICAgICAuLi5hdXRoQ29udGV4dCxcbiAgICAgICAgICAgIC4uLmNvbnRleHQuY29udGV4dFxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIG1pZGRsZXdhcmUub3B0aW9ucyA9IG0ubWlkZGxld2FyZS5vcHRpb25zO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcGF0aDogbS5wYXRoLFxuICAgICAgICBtaWRkbGV3YXJlXG4gICAgICB9O1xuICAgIH0pXG4gICkuZmlsdGVyKChwbHVnaW4pID0+IHBsdWdpbiAhPT0gdm9pZCAwKS5mbGF0KCkgfHwgW107XG4gIGNvbnN0IGJhc2VFbmRwb2ludHMgPSB7XG4gICAgc2lnbkluU29jaWFsLFxuICAgIGNhbGxiYWNrT0F1dGgsXG4gICAgZ2V0U2Vzc2lvbjogZ2V0U2Vzc2lvbigpLFxuICAgIHNpZ25PdXQsXG4gICAgc2lnblVwRW1haWw6IHNpZ25VcEVtYWlsKCksXG4gICAgc2lnbkluRW1haWwsXG4gICAgZm9yZ2V0UGFzc3dvcmQsXG4gICAgcmVzZXRQYXNzd29yZCxcbiAgICB2ZXJpZnlFbWFpbCxcbiAgICBzZW5kVmVyaWZpY2F0aW9uRW1haWwsXG4gICAgY2hhbmdlRW1haWwsXG4gICAgY2hhbmdlUGFzc3dvcmQsXG4gICAgc2V0UGFzc3dvcmQsXG4gICAgdXBkYXRlVXNlcjogdXBkYXRlVXNlcigpLFxuICAgIGRlbGV0ZVVzZXIsXG4gICAgZm9yZ2V0UGFzc3dvcmRDYWxsYmFjayxcbiAgICByZXF1ZXN0UGFzc3dvcmRSZXNldCxcbiAgICByZXF1ZXN0UGFzc3dvcmRSZXNldENhbGxiYWNrLFxuICAgIGxpc3RTZXNzaW9uczogbGlzdFNlc3Npb25zKCksXG4gICAgcmV2b2tlU2Vzc2lvbixcbiAgICByZXZva2VTZXNzaW9ucyxcbiAgICByZXZva2VPdGhlclNlc3Npb25zLFxuICAgIGxpbmtTb2NpYWxBY2NvdW50LFxuICAgIGxpc3RVc2VyQWNjb3VudHMsXG4gICAgZGVsZXRlVXNlckNhbGxiYWNrLFxuICAgIHVubGlua0FjY291bnQsXG4gICAgcmVmcmVzaFRva2VuLFxuICAgIGdldEFjY2Vzc1Rva2VuLFxuICAgIGFjY291bnRJbmZvXG4gIH07XG4gIGNvbnN0IGVuZHBvaW50cyA9IHtcbiAgICAuLi5iYXNlRW5kcG9pbnRzLFxuICAgIC4uLnBsdWdpbkVuZHBvaW50cyxcbiAgICBvayxcbiAgICBlcnJvclxuICB9O1xuICBjb25zdCBhcGkgPSB0b0F1dGhFbmRwb2ludHMoZW5kcG9pbnRzLCBjdHgpO1xuICByZXR1cm4ge1xuICAgIGFwaSxcbiAgICBtaWRkbGV3YXJlc1xuICB9O1xufVxuY29uc3Qgcm91dGVyID0gKGN0eCwgb3B0aW9ucykgPT4ge1xuICBjb25zdCB7IGFwaSwgbWlkZGxld2FyZXMgfSA9IGdldEVuZHBvaW50cyhjdHgsIG9wdGlvbnMpO1xuICBjb25zdCBiYXNlUGF0aCA9IG5ldyBVUkwoY3R4LmJhc2VVUkwpLnBhdGhuYW1lO1xuICByZXR1cm4gY3JlYXRlUm91dGVyKGFwaSwge1xuICAgIHJvdXRlckNvbnRleHQ6IGN0eCxcbiAgICBvcGVuYXBpOiB7XG4gICAgICBkaXNhYmxlZDogdHJ1ZVxuICAgIH0sXG4gICAgYmFzZVBhdGgsXG4gICAgcm91dGVyTWlkZGxld2FyZTogW1xuICAgICAge1xuICAgICAgICBwYXRoOiBcIi8qKlwiLFxuICAgICAgICBtaWRkbGV3YXJlOiBvcmlnaW5DaGVja01pZGRsZXdhcmVcbiAgICAgIH0sXG4gICAgICAuLi5taWRkbGV3YXJlc1xuICAgIF0sXG4gICAgYXN5bmMgb25SZXF1ZXN0KHJlcSkge1xuICAgICAgY29uc3QgZGlzYWJsZWRQYXRocyA9IGN0eC5vcHRpb25zLmRpc2FibGVkUGF0aHMgfHwgW107XG4gICAgICBjb25zdCBwYXRoID0gbmV3IFVSTChyZXEudXJsKS5wYXRobmFtZS5yZXBsYWNlKGJhc2VQYXRoLCBcIlwiKTtcbiAgICAgIGlmIChkaXNhYmxlZFBhdGhzLmluY2x1ZGVzKHBhdGgpKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoXCJOb3QgRm91bmRcIiwgeyBzdGF0dXM6IDQwNCB9KTtcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgcGx1Z2luIG9mIGN0eC5vcHRpb25zLnBsdWdpbnMgfHwgW10pIHtcbiAgICAgICAgaWYgKHBsdWdpbi5vblJlcXVlc3QpIHtcbiAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHBsdWdpbi5vblJlcXVlc3QocmVxLCBjdHgpO1xuICAgICAgICAgIGlmIChyZXNwb25zZSAmJiBcInJlc3BvbnNlXCIgaW4gcmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5yZXNwb25zZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBvblJlcXVlc3RSYXRlTGltaXQocmVxLCBjdHgpO1xuICAgIH0sXG4gICAgYXN5bmMgb25SZXNwb25zZShyZXMpIHtcbiAgICAgIGZvciAoY29uc3QgcGx1Z2luIG9mIGN0eC5vcHRpb25zLnBsdWdpbnMgfHwgW10pIHtcbiAgICAgICAgaWYgKHBsdWdpbi5vblJlc3BvbnNlKSB7XG4gICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBwbHVnaW4ub25SZXNwb25zZShyZXMsIGN0eCk7XG4gICAgICAgICAgaWYgKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UucmVzcG9uc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH0sXG4gICAgb25FcnJvcihlKSB7XG4gICAgICBpZiAoZSBpbnN0YW5jZW9mIEFQSUVycm9yICYmIGUuc3RhdHVzID09PSBcIkZPVU5EXCIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMub25BUElFcnJvcj8udGhyb3cpIHtcbiAgICAgICAgdGhyb3cgZTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zLm9uQVBJRXJyb3I/Lm9uRXJyb3IpIHtcbiAgICAgICAgb3B0aW9ucy5vbkFQSUVycm9yLm9uRXJyb3IoZSwgY3R4KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3Qgb3B0TG9nTGV2ZWwgPSBvcHRpb25zLmxvZ2dlcj8ubGV2ZWw7XG4gICAgICBjb25zdCBsb2cgPSBvcHRMb2dMZXZlbCA9PT0gXCJlcnJvclwiIHx8IG9wdExvZ0xldmVsID09PSBcIndhcm5cIiB8fCBvcHRMb2dMZXZlbCA9PT0gXCJkZWJ1Z1wiID8gbG9nZ2VyIDogdm9pZCAwO1xuICAgICAgaWYgKG9wdGlvbnMubG9nZ2VyPy5kaXNhYmxlZCAhPT0gdHJ1ZSkge1xuICAgICAgICBpZiAoZSAmJiB0eXBlb2YgZSA9PT0gXCJvYmplY3RcIiAmJiBcIm1lc3NhZ2VcIiBpbiBlICYmIHR5cGVvZiBlLm1lc3NhZ2UgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICBpZiAoZS5tZXNzYWdlLmluY2x1ZGVzKFwibm8gY29sdW1uXCIpIHx8IGUubWVzc2FnZS5pbmNsdWRlcyhcImNvbHVtblwiKSB8fCBlLm1lc3NhZ2UuaW5jbHVkZXMoXCJyZWxhdGlvblwiKSB8fCBlLm1lc3NhZ2UuaW5jbHVkZXMoXCJ0YWJsZVwiKSB8fCBlLm1lc3NhZ2UuaW5jbHVkZXMoXCJkb2VzIG5vdCBleGlzdFwiKSkge1xuICAgICAgICAgICAgY3R4LmxvZ2dlcj8uZXJyb3IoZS5tZXNzYWdlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBBUElFcnJvcikge1xuICAgICAgICAgIGlmIChlLnN0YXR1cyA9PT0gXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIikge1xuICAgICAgICAgICAgY3R4LmxvZ2dlci5lcnJvcihlLnN0YXR1cywgZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxvZz8uZXJyb3IoZS5tZXNzYWdlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjdHgubG9nZ2VyPy5lcnJvcihcbiAgICAgICAgICAgIGUgJiYgdHlwZW9mIGUgPT09IFwib2JqZWN0XCIgJiYgXCJuYW1lXCIgaW4gZSA/IGUubmFtZSA6IFwiXCIsXG4gICAgICAgICAgICBlXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSk7XG59O1xuXG5leHBvcnQgeyBhY2NvdW50SW5mbywgY2FsbGJhY2tPQXV0aCwgY2hhbmdlRW1haWwsIGNoYW5nZVBhc3N3b3JkLCBjaGVja0VuZHBvaW50Q29uZmxpY3RzLCBjcmVhdGVBdXRoRW5kcG9pbnQsIGNyZWF0ZUVtYWlsVmVyaWZpY2F0aW9uVG9rZW4sIGRlbGV0ZVVzZXIsIGRlbGV0ZVVzZXJDYWxsYmFjaywgZXJyb3IsIGZvcmdldFBhc3N3b3JkLCBmb3JnZXRQYXNzd29yZENhbGxiYWNrLCBnZXRBY2Nlc3NUb2tlbiwgZ2V0RW5kcG9pbnRzLCBnZXRTZXNzaW9uLCBsaW5rU29jaWFsQWNjb3VudCwgbGlzdFNlc3Npb25zLCBsaXN0VXNlckFjY291bnRzLCBvaywgb3JpZ2luQ2hlY2tNaWRkbGV3YXJlLCByZWZyZXNoVG9rZW4sIHJlcXVlc3RQYXNzd29yZFJlc2V0LCByZXF1ZXN0UGFzc3dvcmRSZXNldENhbGxiYWNrLCByZXNldFBhc3N3b3JkLCByZXZva2VPdGhlclNlc3Npb25zLCByZXZva2VTZXNzaW9uLCByZXZva2VTZXNzaW9ucywgcm91dGVyLCBzZW5kVmVyaWZpY2F0aW9uRW1haWwsIHNldFBhc3N3b3JkLCBzaWduSW5FbWFpbCwgc2lnbkluU29jaWFsLCBzaWduT3V0LCBzaWduVXBFbWFpbCwgdW5saW5rQWNjb3VudCwgdXBkYXRlVXNlciwgdmVyaWZ5RW1haWwgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/chunks/bun-sqlite-dialect.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/better-auth/dist/chunks/bun-sqlite-dialect.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BunSqliteAdapter: () => (/* binding */ BunSqliteAdapter),\n/* harmony export */   BunSqliteDialect: () => (/* binding */ BunSqliteDialect),\n/* harmony export */   BunSqliteDriver: () => (/* binding */ BunSqliteDriver),\n/* harmony export */   BunSqliteIntrospector: () => (/* binding */ BunSqliteIntrospector),\n/* harmony export */   BunSqliteQueryCompiler: () => (/* binding */ BunSqliteQueryCompiler)\n/* harmony export */ });\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/query-compiler/compiled-query.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/migration/migrator.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/raw-builder/sql.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/query-compiler/default-query-compiler.js\");\n\n\nclass BunSqliteAdapter {\n  get supportsCreateIfNotExists() {\n    return true;\n  }\n  get supportsTransactionalDdl() {\n    return false;\n  }\n  get supportsReturning() {\n    return true;\n  }\n  async acquireMigrationLock() {\n  }\n  async releaseMigrationLock() {\n  }\n  get supportsOutput() {\n    return true;\n  }\n}\nclass BunSqliteDriver {\n  #config;\n  #connectionMutex = new ConnectionMutex();\n  #db;\n  #connection;\n  constructor(config) {\n    this.#config = { ...config };\n  }\n  async init() {\n    this.#db = this.#config.database;\n    this.#connection = new BunSqliteConnection(this.#db);\n    if (this.#config.onCreateConnection) {\n      await this.#config.onCreateConnection(this.#connection);\n    }\n  }\n  async acquireConnection() {\n    await this.#connectionMutex.lock();\n    return this.#connection;\n  }\n  async beginTransaction(connection) {\n    await connection.executeQuery(kysely__WEBPACK_IMPORTED_MODULE_0__.CompiledQuery.raw(\"begin\"));\n  }\n  async commitTransaction(connection) {\n    await connection.executeQuery(kysely__WEBPACK_IMPORTED_MODULE_0__.CompiledQuery.raw(\"commit\"));\n  }\n  async rollbackTransaction(connection) {\n    await connection.executeQuery(kysely__WEBPACK_IMPORTED_MODULE_0__.CompiledQuery.raw(\"rollback\"));\n  }\n  async releaseConnection() {\n    this.#connectionMutex.unlock();\n  }\n  async destroy() {\n    this.#db?.close();\n  }\n}\nclass BunSqliteConnection {\n  #db;\n  constructor(db) {\n    this.#db = db;\n  }\n  executeQuery(compiledQuery) {\n    const { sql: sql2, parameters } = compiledQuery;\n    const stmt = this.#db.prepare(sql2);\n    return Promise.resolve({\n      rows: stmt.all(parameters)\n    });\n  }\n  async *streamQuery() {\n    throw new Error(\"Streaming query is not supported by SQLite driver.\");\n  }\n}\nclass ConnectionMutex {\n  #promise;\n  #resolve;\n  async lock() {\n    while (this.#promise) {\n      await this.#promise;\n    }\n    this.#promise = new Promise((resolve) => {\n      this.#resolve = resolve;\n    });\n  }\n  unlock() {\n    const resolve = this.#resolve;\n    this.#promise = void 0;\n    this.#resolve = void 0;\n    resolve?.();\n  }\n}\nclass BunSqliteIntrospector {\n  #db;\n  constructor(db) {\n    this.#db = db;\n  }\n  async getSchemas() {\n    return [];\n  }\n  async getTables(options = { withInternalKyselyTables: false }) {\n    let query = this.#db.selectFrom(\"sqlite_schema\").where(\"type\", \"=\", \"table\").where(\"name\", \"not like\", \"sqlite_%\").select(\"name\").$castTo();\n    if (!options.withInternalKyselyTables) {\n      query = query.where(\"name\", \"!=\", kysely__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_MIGRATION_TABLE).where(\"name\", \"!=\", kysely__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_MIGRATION_LOCK_TABLE);\n    }\n    const tables = await query.execute();\n    return Promise.all(tables.map(({ name }) => this.#getTableMetadata(name)));\n  }\n  async getMetadata(options) {\n    return {\n      tables: await this.getTables(options)\n    };\n  }\n  async #getTableMetadata(table) {\n    const db = this.#db;\n    const createSql = await db.selectFrom(\"sqlite_master\").where(\"name\", \"=\", table).select(\"sql\").$castTo().execute();\n    const autoIncrementCol = createSql[0]?.sql?.split(/[\\(\\),]/)?.find((it) => it.toLowerCase().includes(\"autoincrement\"))?.split(/\\s+/)?.[0]?.replace(/[\"`]/g, \"\");\n    const columns = await db.selectFrom(\n      (0,kysely__WEBPACK_IMPORTED_MODULE_2__.sql)`pragma_table_info(${table})`.as(\"table_info\")\n    ).select([\"name\", \"type\", \"notnull\", \"dflt_value\"]).execute();\n    return {\n      name: table,\n      columns: columns.map((col) => ({\n        name: col.name,\n        dataType: col.type,\n        isNullable: !col.notnull,\n        isAutoIncrementing: col.name === autoIncrementCol,\n        hasDefaultValue: col.dflt_value != null\n      })),\n      isView: true\n    };\n  }\n}\nclass BunSqliteQueryCompiler extends kysely__WEBPACK_IMPORTED_MODULE_3__.DefaultQueryCompiler {\n  getCurrentParameterPlaceholder() {\n    return \"?\";\n  }\n  getLeftIdentifierWrapper() {\n    return '\"';\n  }\n  getRightIdentifierWrapper() {\n    return '\"';\n  }\n  getAutoIncrement() {\n    return \"autoincrement\";\n  }\n}\nclass BunSqliteDialect {\n  #config;\n  constructor(config) {\n    this.#config = { ...config };\n  }\n  createDriver() {\n    return new BunSqliteDriver(this.#config);\n  }\n  createQueryCompiler() {\n    return new BunSqliteQueryCompiler();\n  }\n  createAdapter() {\n    return new BunSqliteAdapter();\n  }\n  createIntrospector(db) {\n    return new BunSqliteIntrospector(db);\n  }\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jaHVua3MvYnVuLXNxbGl0ZS1kaWFsZWN0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBeUg7O0FBRXpIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxpREFBYTtBQUMvQztBQUNBO0FBQ0Esa0NBQWtDLGlEQUFhO0FBQy9DO0FBQ0E7QUFDQSxrQ0FBa0MsaURBQWE7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksd0JBQXdCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGlDQUFpQztBQUMvRDtBQUNBO0FBQ0Esd0NBQXdDLDJEQUF1QixzQkFBc0IsZ0VBQTRCO0FBQ2pIO0FBQ0E7QUFDQSxxQ0FBcUMsTUFBTTtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSwyQ0FBRyxxQkFBcUIsTUFBTTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsd0RBQW9CO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRThHIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFtYWFuXFxPbmVEcml2ZVxcRGVza3RvcFxcS2FuZGlkXzJcXE5ldyBmb2xkZXIgKDIpXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxjaHVua3NcXGJ1bi1zcWxpdGUtZGlhbGVjdC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcGlsZWRRdWVyeSwgRGVmYXVsdFF1ZXJ5Q29tcGlsZXIsIERFRkFVTFRfTUlHUkFUSU9OX1RBQkxFLCBERUZBVUxUX01JR1JBVElPTl9MT0NLX1RBQkxFLCBzcWwgfSBmcm9tICdreXNlbHknO1xuXG5jbGFzcyBCdW5TcWxpdGVBZGFwdGVyIHtcbiAgZ2V0IHN1cHBvcnRzQ3JlYXRlSWZOb3RFeGlzdHMoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgZ2V0IHN1cHBvcnRzVHJhbnNhY3Rpb25hbERkbCgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgZ2V0IHN1cHBvcnRzUmV0dXJuaW5nKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGFzeW5jIGFjcXVpcmVNaWdyYXRpb25Mb2NrKCkge1xuICB9XG4gIGFzeW5jIHJlbGVhc2VNaWdyYXRpb25Mb2NrKCkge1xuICB9XG4gIGdldCBzdXBwb3J0c091dHB1dCgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuY2xhc3MgQnVuU3FsaXRlRHJpdmVyIHtcbiAgI2NvbmZpZztcbiAgI2Nvbm5lY3Rpb25NdXRleCA9IG5ldyBDb25uZWN0aW9uTXV0ZXgoKTtcbiAgI2RiO1xuICAjY29ubmVjdGlvbjtcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgdGhpcy4jY29uZmlnID0geyAuLi5jb25maWcgfTtcbiAgfVxuICBhc3luYyBpbml0KCkge1xuICAgIHRoaXMuI2RiID0gdGhpcy4jY29uZmlnLmRhdGFiYXNlO1xuICAgIHRoaXMuI2Nvbm5lY3Rpb24gPSBuZXcgQnVuU3FsaXRlQ29ubmVjdGlvbih0aGlzLiNkYik7XG4gICAgaWYgKHRoaXMuI2NvbmZpZy5vbkNyZWF0ZUNvbm5lY3Rpb24pIHtcbiAgICAgIGF3YWl0IHRoaXMuI2NvbmZpZy5vbkNyZWF0ZUNvbm5lY3Rpb24odGhpcy4jY29ubmVjdGlvbik7XG4gICAgfVxuICB9XG4gIGFzeW5jIGFjcXVpcmVDb25uZWN0aW9uKCkge1xuICAgIGF3YWl0IHRoaXMuI2Nvbm5lY3Rpb25NdXRleC5sb2NrKCk7XG4gICAgcmV0dXJuIHRoaXMuI2Nvbm5lY3Rpb247XG4gIH1cbiAgYXN5bmMgYmVnaW5UcmFuc2FjdGlvbihjb25uZWN0aW9uKSB7XG4gICAgYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlUXVlcnkoQ29tcGlsZWRRdWVyeS5yYXcoXCJiZWdpblwiKSk7XG4gIH1cbiAgYXN5bmMgY29tbWl0VHJhbnNhY3Rpb24oY29ubmVjdGlvbikge1xuICAgIGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZVF1ZXJ5KENvbXBpbGVkUXVlcnkucmF3KFwiY29tbWl0XCIpKTtcbiAgfVxuICBhc3luYyByb2xsYmFja1RyYW5zYWN0aW9uKGNvbm5lY3Rpb24pIHtcbiAgICBhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGVRdWVyeShDb21waWxlZFF1ZXJ5LnJhdyhcInJvbGxiYWNrXCIpKTtcbiAgfVxuICBhc3luYyByZWxlYXNlQ29ubmVjdGlvbigpIHtcbiAgICB0aGlzLiNjb25uZWN0aW9uTXV0ZXgudW5sb2NrKCk7XG4gIH1cbiAgYXN5bmMgZGVzdHJveSgpIHtcbiAgICB0aGlzLiNkYj8uY2xvc2UoKTtcbiAgfVxufVxuY2xhc3MgQnVuU3FsaXRlQ29ubmVjdGlvbiB7XG4gICNkYjtcbiAgY29uc3RydWN0b3IoZGIpIHtcbiAgICB0aGlzLiNkYiA9IGRiO1xuICB9XG4gIGV4ZWN1dGVRdWVyeShjb21waWxlZFF1ZXJ5KSB7XG4gICAgY29uc3QgeyBzcWw6IHNxbDIsIHBhcmFtZXRlcnMgfSA9IGNvbXBpbGVkUXVlcnk7XG4gICAgY29uc3Qgc3RtdCA9IHRoaXMuI2RiLnByZXBhcmUoc3FsMik7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICByb3dzOiBzdG10LmFsbChwYXJhbWV0ZXJzKVxuICAgIH0pO1xuICB9XG4gIGFzeW5jICpzdHJlYW1RdWVyeSgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJTdHJlYW1pbmcgcXVlcnkgaXMgbm90IHN1cHBvcnRlZCBieSBTUUxpdGUgZHJpdmVyLlwiKTtcbiAgfVxufVxuY2xhc3MgQ29ubmVjdGlvbk11dGV4IHtcbiAgI3Byb21pc2U7XG4gICNyZXNvbHZlO1xuICBhc3luYyBsb2NrKCkge1xuICAgIHdoaWxlICh0aGlzLiNwcm9taXNlKSB7XG4gICAgICBhd2FpdCB0aGlzLiNwcm9taXNlO1xuICAgIH1cbiAgICB0aGlzLiNwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIHRoaXMuI3Jlc29sdmUgPSByZXNvbHZlO1xuICAgIH0pO1xuICB9XG4gIHVubG9jaygpIHtcbiAgICBjb25zdCByZXNvbHZlID0gdGhpcy4jcmVzb2x2ZTtcbiAgICB0aGlzLiNwcm9taXNlID0gdm9pZCAwO1xuICAgIHRoaXMuI3Jlc29sdmUgPSB2b2lkIDA7XG4gICAgcmVzb2x2ZT8uKCk7XG4gIH1cbn1cbmNsYXNzIEJ1blNxbGl0ZUludHJvc3BlY3RvciB7XG4gICNkYjtcbiAgY29uc3RydWN0b3IoZGIpIHtcbiAgICB0aGlzLiNkYiA9IGRiO1xuICB9XG4gIGFzeW5jIGdldFNjaGVtYXMoKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGFzeW5jIGdldFRhYmxlcyhvcHRpb25zID0geyB3aXRoSW50ZXJuYWxLeXNlbHlUYWJsZXM6IGZhbHNlIH0pIHtcbiAgICBsZXQgcXVlcnkgPSB0aGlzLiNkYi5zZWxlY3RGcm9tKFwic3FsaXRlX3NjaGVtYVwiKS53aGVyZShcInR5cGVcIiwgXCI9XCIsIFwidGFibGVcIikud2hlcmUoXCJuYW1lXCIsIFwibm90IGxpa2VcIiwgXCJzcWxpdGVfJVwiKS5zZWxlY3QoXCJuYW1lXCIpLiRjYXN0VG8oKTtcbiAgICBpZiAoIW9wdGlvbnMud2l0aEludGVybmFsS3lzZWx5VGFibGVzKSB7XG4gICAgICBxdWVyeSA9IHF1ZXJ5LndoZXJlKFwibmFtZVwiLCBcIiE9XCIsIERFRkFVTFRfTUlHUkFUSU9OX1RBQkxFKS53aGVyZShcIm5hbWVcIiwgXCIhPVwiLCBERUZBVUxUX01JR1JBVElPTl9MT0NLX1RBQkxFKTtcbiAgICB9XG4gICAgY29uc3QgdGFibGVzID0gYXdhaXQgcXVlcnkuZXhlY3V0ZSgpO1xuICAgIHJldHVybiBQcm9taXNlLmFsbCh0YWJsZXMubWFwKCh7IG5hbWUgfSkgPT4gdGhpcy4jZ2V0VGFibGVNZXRhZGF0YShuYW1lKSkpO1xuICB9XG4gIGFzeW5jIGdldE1ldGFkYXRhKG9wdGlvbnMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGFibGVzOiBhd2FpdCB0aGlzLmdldFRhYmxlcyhvcHRpb25zKVxuICAgIH07XG4gIH1cbiAgYXN5bmMgI2dldFRhYmxlTWV0YWRhdGEodGFibGUpIHtcbiAgICBjb25zdCBkYiA9IHRoaXMuI2RiO1xuICAgIGNvbnN0IGNyZWF0ZVNxbCA9IGF3YWl0IGRiLnNlbGVjdEZyb20oXCJzcWxpdGVfbWFzdGVyXCIpLndoZXJlKFwibmFtZVwiLCBcIj1cIiwgdGFibGUpLnNlbGVjdChcInNxbFwiKS4kY2FzdFRvKCkuZXhlY3V0ZSgpO1xuICAgIGNvbnN0IGF1dG9JbmNyZW1lbnRDb2wgPSBjcmVhdGVTcWxbMF0/LnNxbD8uc3BsaXQoL1tcXChcXCksXS8pPy5maW5kKChpdCkgPT4gaXQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImF1dG9pbmNyZW1lbnRcIikpPy5zcGxpdCgvXFxzKy8pPy5bMF0/LnJlcGxhY2UoL1tcImBdL2csIFwiXCIpO1xuICAgIGNvbnN0IGNvbHVtbnMgPSBhd2FpdCBkYi5zZWxlY3RGcm9tKFxuICAgICAgc3FsYHByYWdtYV90YWJsZV9pbmZvKCR7dGFibGV9KWAuYXMoXCJ0YWJsZV9pbmZvXCIpXG4gICAgKS5zZWxlY3QoW1wibmFtZVwiLCBcInR5cGVcIiwgXCJub3RudWxsXCIsIFwiZGZsdF92YWx1ZVwiXSkuZXhlY3V0ZSgpO1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0YWJsZSxcbiAgICAgIGNvbHVtbnM6IGNvbHVtbnMubWFwKChjb2wpID0+ICh7XG4gICAgICAgIG5hbWU6IGNvbC5uYW1lLFxuICAgICAgICBkYXRhVHlwZTogY29sLnR5cGUsXG4gICAgICAgIGlzTnVsbGFibGU6ICFjb2wubm90bnVsbCxcbiAgICAgICAgaXNBdXRvSW5jcmVtZW50aW5nOiBjb2wubmFtZSA9PT0gYXV0b0luY3JlbWVudENvbCxcbiAgICAgICAgaGFzRGVmYXVsdFZhbHVlOiBjb2wuZGZsdF92YWx1ZSAhPSBudWxsXG4gICAgICB9KSksXG4gICAgICBpc1ZpZXc6IHRydWVcbiAgICB9O1xuICB9XG59XG5jbGFzcyBCdW5TcWxpdGVRdWVyeUNvbXBpbGVyIGV4dGVuZHMgRGVmYXVsdFF1ZXJ5Q29tcGlsZXIge1xuICBnZXRDdXJyZW50UGFyYW1ldGVyUGxhY2Vob2xkZXIoKSB7XG4gICAgcmV0dXJuIFwiP1wiO1xuICB9XG4gIGdldExlZnRJZGVudGlmaWVyV3JhcHBlcigpIHtcbiAgICByZXR1cm4gJ1wiJztcbiAgfVxuICBnZXRSaWdodElkZW50aWZpZXJXcmFwcGVyKCkge1xuICAgIHJldHVybiAnXCInO1xuICB9XG4gIGdldEF1dG9JbmNyZW1lbnQoKSB7XG4gICAgcmV0dXJuIFwiYXV0b2luY3JlbWVudFwiO1xuICB9XG59XG5jbGFzcyBCdW5TcWxpdGVEaWFsZWN0IHtcbiAgI2NvbmZpZztcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgdGhpcy4jY29uZmlnID0geyAuLi5jb25maWcgfTtcbiAgfVxuICBjcmVhdGVEcml2ZXIoKSB7XG4gICAgcmV0dXJuIG5ldyBCdW5TcWxpdGVEcml2ZXIodGhpcy4jY29uZmlnKTtcbiAgfVxuICBjcmVhdGVRdWVyeUNvbXBpbGVyKCkge1xuICAgIHJldHVybiBuZXcgQnVuU3FsaXRlUXVlcnlDb21waWxlcigpO1xuICB9XG4gIGNyZWF0ZUFkYXB0ZXIoKSB7XG4gICAgcmV0dXJuIG5ldyBCdW5TcWxpdGVBZGFwdGVyKCk7XG4gIH1cbiAgY3JlYXRlSW50cm9zcGVjdG9yKGRiKSB7XG4gICAgcmV0dXJuIG5ldyBCdW5TcWxpdGVJbnRyb3NwZWN0b3IoZGIpO1xuICB9XG59XG5cbmV4cG9ydCB7IEJ1blNxbGl0ZUFkYXB0ZXIsIEJ1blNxbGl0ZURpYWxlY3QsIEJ1blNxbGl0ZURyaXZlciwgQnVuU3FsaXRlSW50cm9zcGVjdG9yLCBCdW5TcWxpdGVRdWVyeUNvbXBpbGVyIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/chunks/bun-sqlite-dialect.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/chunks/node-sqlite-dialect.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/better-auth/dist/chunks/node-sqlite-dialect.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NodeSqliteAdapter: () => (/* binding */ NodeSqliteAdapter),\n/* harmony export */   NodeSqliteDialect: () => (/* binding */ NodeSqliteDialect),\n/* harmony export */   NodeSqliteDriver: () => (/* binding */ NodeSqliteDriver),\n/* harmony export */   NodeSqliteIntrospector: () => (/* binding */ NodeSqliteIntrospector),\n/* harmony export */   NodeSqliteQueryCompiler: () => (/* binding */ NodeSqliteQueryCompiler)\n/* harmony export */ });\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/query-compiler/compiled-query.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/migration/migrator.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/raw-builder/sql.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/query-compiler/default-query-compiler.js\");\n\n\nclass NodeSqliteAdapter {\n  get supportsCreateIfNotExists() {\n    return true;\n  }\n  get supportsTransactionalDdl() {\n    return false;\n  }\n  get supportsReturning() {\n    return true;\n  }\n  async acquireMigrationLock() {\n  }\n  async releaseMigrationLock() {\n  }\n  get supportsOutput() {\n    return true;\n  }\n}\nclass NodeSqliteDriver {\n  #config;\n  #connectionMutex = new ConnectionMutex();\n  #db;\n  #connection;\n  constructor(config) {\n    this.#config = { ...config };\n  }\n  async init() {\n    this.#db = this.#config.database;\n    this.#connection = new NodeSqliteConnection(this.#db);\n    if (this.#config.onCreateConnection) {\n      await this.#config.onCreateConnection(this.#connection);\n    }\n  }\n  async acquireConnection() {\n    await this.#connectionMutex.lock();\n    return this.#connection;\n  }\n  async beginTransaction(connection) {\n    await connection.executeQuery(kysely__WEBPACK_IMPORTED_MODULE_0__.CompiledQuery.raw(\"begin\"));\n  }\n  async commitTransaction(connection) {\n    await connection.executeQuery(kysely__WEBPACK_IMPORTED_MODULE_0__.CompiledQuery.raw(\"commit\"));\n  }\n  async rollbackTransaction(connection) {\n    await connection.executeQuery(kysely__WEBPACK_IMPORTED_MODULE_0__.CompiledQuery.raw(\"rollback\"));\n  }\n  async releaseConnection() {\n    this.#connectionMutex.unlock();\n  }\n  async destroy() {\n    this.#db?.close();\n  }\n}\nclass NodeSqliteConnection {\n  #db;\n  constructor(db) {\n    this.#db = db;\n  }\n  executeQuery(compiledQuery) {\n    const { sql: sql2, parameters } = compiledQuery;\n    const stmt = this.#db.prepare(sql2);\n    const rows = stmt.all(...parameters);\n    return Promise.resolve({\n      rows\n    });\n  }\n  async *streamQuery() {\n    throw new Error(\"Streaming query is not supported by SQLite driver.\");\n  }\n}\nclass ConnectionMutex {\n  #promise;\n  #resolve;\n  async lock() {\n    while (this.#promise) {\n      await this.#promise;\n    }\n    this.#promise = new Promise((resolve) => {\n      this.#resolve = resolve;\n    });\n  }\n  unlock() {\n    const resolve = this.#resolve;\n    this.#promise = void 0;\n    this.#resolve = void 0;\n    resolve?.();\n  }\n}\nclass NodeSqliteIntrospector {\n  #db;\n  constructor(db) {\n    this.#db = db;\n  }\n  async getSchemas() {\n    return [];\n  }\n  async getTables(options = { withInternalKyselyTables: false }) {\n    let query = this.#db.selectFrom(\"sqlite_schema\").where(\"type\", \"=\", \"table\").where(\"name\", \"not like\", \"sqlite_%\").select(\"name\").$castTo();\n    if (!options.withInternalKyselyTables) {\n      query = query.where(\"name\", \"!=\", kysely__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_MIGRATION_TABLE).where(\"name\", \"!=\", kysely__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_MIGRATION_LOCK_TABLE);\n    }\n    const tables = await query.execute();\n    return Promise.all(tables.map(({ name }) => this.#getTableMetadata(name)));\n  }\n  async getMetadata(options) {\n    return {\n      tables: await this.getTables(options)\n    };\n  }\n  async #getTableMetadata(table) {\n    const db = this.#db;\n    const createSql = await db.selectFrom(\"sqlite_master\").where(\"name\", \"=\", table).select(\"sql\").$castTo().execute();\n    const autoIncrementCol = createSql[0]?.sql?.split(/[\\(\\),]/)?.find((it) => it.toLowerCase().includes(\"autoincrement\"))?.split(/\\s+/)?.[0]?.replace(/[\"`]/g, \"\");\n    const columns = await db.selectFrom(\n      (0,kysely__WEBPACK_IMPORTED_MODULE_2__.sql)`pragma_table_info(${table})`.as(\"table_info\")\n    ).select([\"name\", \"type\", \"notnull\", \"dflt_value\"]).execute();\n    return {\n      name: table,\n      columns: columns.map((col) => ({\n        name: col.name,\n        dataType: col.type,\n        isNullable: !col.notnull,\n        isAutoIncrementing: col.name === autoIncrementCol,\n        hasDefaultValue: col.dflt_value != null\n      })),\n      isView: true\n    };\n  }\n}\nclass NodeSqliteQueryCompiler extends kysely__WEBPACK_IMPORTED_MODULE_3__.DefaultQueryCompiler {\n  getCurrentParameterPlaceholder() {\n    return \"?\";\n  }\n  getLeftIdentifierWrapper() {\n    return '\"';\n  }\n  getRightIdentifierWrapper() {\n    return '\"';\n  }\n  getAutoIncrement() {\n    return \"autoincrement\";\n  }\n}\nclass NodeSqliteDialect {\n  #config;\n  constructor(config) {\n    this.#config = { ...config };\n  }\n  createDriver() {\n    return new NodeSqliteDriver(this.#config);\n  }\n  createQueryCompiler() {\n    return new NodeSqliteQueryCompiler();\n  }\n  createAdapter() {\n    return new NodeSqliteAdapter();\n  }\n  createIntrospector(db) {\n    return new NodeSqliteIntrospector(db);\n  }\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jaHVua3Mvbm9kZS1zcWxpdGUtZGlhbGVjdC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQXlIOztBQUV6SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsaURBQWE7QUFDL0M7QUFDQTtBQUNBLGtDQUFrQyxpREFBYTtBQUMvQztBQUNBO0FBQ0Esa0NBQWtDLGlEQUFhO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHdCQUF3QjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGlDQUFpQztBQUMvRDtBQUNBO0FBQ0Esd0NBQXdDLDJEQUF1QixzQkFBc0IsZ0VBQTRCO0FBQ2pIO0FBQ0E7QUFDQSxxQ0FBcUMsTUFBTTtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSwyQ0FBRyxxQkFBcUIsTUFBTTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0Msd0RBQW9CO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRW1IIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFtYWFuXFxPbmVEcml2ZVxcRGVza3RvcFxcS2FuZGlkXzJcXE5ldyBmb2xkZXIgKDIpXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxjaHVua3NcXG5vZGUtc3FsaXRlLWRpYWxlY3QubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBpbGVkUXVlcnksIERlZmF1bHRRdWVyeUNvbXBpbGVyLCBERUZBVUxUX01JR1JBVElPTl9UQUJMRSwgREVGQVVMVF9NSUdSQVRJT05fTE9DS19UQUJMRSwgc3FsIH0gZnJvbSAna3lzZWx5JztcblxuY2xhc3MgTm9kZVNxbGl0ZUFkYXB0ZXIge1xuICBnZXQgc3VwcG9ydHNDcmVhdGVJZk5vdEV4aXN0cygpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBnZXQgc3VwcG9ydHNUcmFuc2FjdGlvbmFsRGRsKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBnZXQgc3VwcG9ydHNSZXR1cm5pbmcoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgYXN5bmMgYWNxdWlyZU1pZ3JhdGlvbkxvY2soKSB7XG4gIH1cbiAgYXN5bmMgcmVsZWFzZU1pZ3JhdGlvbkxvY2soKSB7XG4gIH1cbiAgZ2V0IHN1cHBvcnRzT3V0cHV0KCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59XG5jbGFzcyBOb2RlU3FsaXRlRHJpdmVyIHtcbiAgI2NvbmZpZztcbiAgI2Nvbm5lY3Rpb25NdXRleCA9IG5ldyBDb25uZWN0aW9uTXV0ZXgoKTtcbiAgI2RiO1xuICAjY29ubmVjdGlvbjtcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgdGhpcy4jY29uZmlnID0geyAuLi5jb25maWcgfTtcbiAgfVxuICBhc3luYyBpbml0KCkge1xuICAgIHRoaXMuI2RiID0gdGhpcy4jY29uZmlnLmRhdGFiYXNlO1xuICAgIHRoaXMuI2Nvbm5lY3Rpb24gPSBuZXcgTm9kZVNxbGl0ZUNvbm5lY3Rpb24odGhpcy4jZGIpO1xuICAgIGlmICh0aGlzLiNjb25maWcub25DcmVhdGVDb25uZWN0aW9uKSB7XG4gICAgICBhd2FpdCB0aGlzLiNjb25maWcub25DcmVhdGVDb25uZWN0aW9uKHRoaXMuI2Nvbm5lY3Rpb24pO1xuICAgIH1cbiAgfVxuICBhc3luYyBhY3F1aXJlQ29ubmVjdGlvbigpIHtcbiAgICBhd2FpdCB0aGlzLiNjb25uZWN0aW9uTXV0ZXgubG9jaygpO1xuICAgIHJldHVybiB0aGlzLiNjb25uZWN0aW9uO1xuICB9XG4gIGFzeW5jIGJlZ2luVHJhbnNhY3Rpb24oY29ubmVjdGlvbikge1xuICAgIGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZVF1ZXJ5KENvbXBpbGVkUXVlcnkucmF3KFwiYmVnaW5cIikpO1xuICB9XG4gIGFzeW5jIGNvbW1pdFRyYW5zYWN0aW9uKGNvbm5lY3Rpb24pIHtcbiAgICBhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGVRdWVyeShDb21waWxlZFF1ZXJ5LnJhdyhcImNvbW1pdFwiKSk7XG4gIH1cbiAgYXN5bmMgcm9sbGJhY2tUcmFuc2FjdGlvbihjb25uZWN0aW9uKSB7XG4gICAgYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlUXVlcnkoQ29tcGlsZWRRdWVyeS5yYXcoXCJyb2xsYmFja1wiKSk7XG4gIH1cbiAgYXN5bmMgcmVsZWFzZUNvbm5lY3Rpb24oKSB7XG4gICAgdGhpcy4jY29ubmVjdGlvbk11dGV4LnVubG9jaygpO1xuICB9XG4gIGFzeW5jIGRlc3Ryb3koKSB7XG4gICAgdGhpcy4jZGI/LmNsb3NlKCk7XG4gIH1cbn1cbmNsYXNzIE5vZGVTcWxpdGVDb25uZWN0aW9uIHtcbiAgI2RiO1xuICBjb25zdHJ1Y3RvcihkYikge1xuICAgIHRoaXMuI2RiID0gZGI7XG4gIH1cbiAgZXhlY3V0ZVF1ZXJ5KGNvbXBpbGVkUXVlcnkpIHtcbiAgICBjb25zdCB7IHNxbDogc3FsMiwgcGFyYW1ldGVycyB9ID0gY29tcGlsZWRRdWVyeTtcbiAgICBjb25zdCBzdG10ID0gdGhpcy4jZGIucHJlcGFyZShzcWwyKTtcbiAgICBjb25zdCByb3dzID0gc3RtdC5hbGwoLi4ucGFyYW1ldGVycyk7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICByb3dzXG4gICAgfSk7XG4gIH1cbiAgYXN5bmMgKnN0cmVhbVF1ZXJ5KCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlN0cmVhbWluZyBxdWVyeSBpcyBub3Qgc3VwcG9ydGVkIGJ5IFNRTGl0ZSBkcml2ZXIuXCIpO1xuICB9XG59XG5jbGFzcyBDb25uZWN0aW9uTXV0ZXgge1xuICAjcHJvbWlzZTtcbiAgI3Jlc29sdmU7XG4gIGFzeW5jIGxvY2soKSB7XG4gICAgd2hpbGUgKHRoaXMuI3Byb21pc2UpIHtcbiAgICAgIGF3YWl0IHRoaXMuI3Byb21pc2U7XG4gICAgfVxuICAgIHRoaXMuI3Byb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgdGhpcy4jcmVzb2x2ZSA9IHJlc29sdmU7XG4gICAgfSk7XG4gIH1cbiAgdW5sb2NrKCkge1xuICAgIGNvbnN0IHJlc29sdmUgPSB0aGlzLiNyZXNvbHZlO1xuICAgIHRoaXMuI3Byb21pc2UgPSB2b2lkIDA7XG4gICAgdGhpcy4jcmVzb2x2ZSA9IHZvaWQgMDtcbiAgICByZXNvbHZlPy4oKTtcbiAgfVxufVxuY2xhc3MgTm9kZVNxbGl0ZUludHJvc3BlY3RvciB7XG4gICNkYjtcbiAgY29uc3RydWN0b3IoZGIpIHtcbiAgICB0aGlzLiNkYiA9IGRiO1xuICB9XG4gIGFzeW5jIGdldFNjaGVtYXMoKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGFzeW5jIGdldFRhYmxlcyhvcHRpb25zID0geyB3aXRoSW50ZXJuYWxLeXNlbHlUYWJsZXM6IGZhbHNlIH0pIHtcbiAgICBsZXQgcXVlcnkgPSB0aGlzLiNkYi5zZWxlY3RGcm9tKFwic3FsaXRlX3NjaGVtYVwiKS53aGVyZShcInR5cGVcIiwgXCI9XCIsIFwidGFibGVcIikud2hlcmUoXCJuYW1lXCIsIFwibm90IGxpa2VcIiwgXCJzcWxpdGVfJVwiKS5zZWxlY3QoXCJuYW1lXCIpLiRjYXN0VG8oKTtcbiAgICBpZiAoIW9wdGlvbnMud2l0aEludGVybmFsS3lzZWx5VGFibGVzKSB7XG4gICAgICBxdWVyeSA9IHF1ZXJ5LndoZXJlKFwibmFtZVwiLCBcIiE9XCIsIERFRkFVTFRfTUlHUkFUSU9OX1RBQkxFKS53aGVyZShcIm5hbWVcIiwgXCIhPVwiLCBERUZBVUxUX01JR1JBVElPTl9MT0NLX1RBQkxFKTtcbiAgICB9XG4gICAgY29uc3QgdGFibGVzID0gYXdhaXQgcXVlcnkuZXhlY3V0ZSgpO1xuICAgIHJldHVybiBQcm9taXNlLmFsbCh0YWJsZXMubWFwKCh7IG5hbWUgfSkgPT4gdGhpcy4jZ2V0VGFibGVNZXRhZGF0YShuYW1lKSkpO1xuICB9XG4gIGFzeW5jIGdldE1ldGFkYXRhKG9wdGlvbnMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGFibGVzOiBhd2FpdCB0aGlzLmdldFRhYmxlcyhvcHRpb25zKVxuICAgIH07XG4gIH1cbiAgYXN5bmMgI2dldFRhYmxlTWV0YWRhdGEodGFibGUpIHtcbiAgICBjb25zdCBkYiA9IHRoaXMuI2RiO1xuICAgIGNvbnN0IGNyZWF0ZVNxbCA9IGF3YWl0IGRiLnNlbGVjdEZyb20oXCJzcWxpdGVfbWFzdGVyXCIpLndoZXJlKFwibmFtZVwiLCBcIj1cIiwgdGFibGUpLnNlbGVjdChcInNxbFwiKS4kY2FzdFRvKCkuZXhlY3V0ZSgpO1xuICAgIGNvbnN0IGF1dG9JbmNyZW1lbnRDb2wgPSBjcmVhdGVTcWxbMF0/LnNxbD8uc3BsaXQoL1tcXChcXCksXS8pPy5maW5kKChpdCkgPT4gaXQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImF1dG9pbmNyZW1lbnRcIikpPy5zcGxpdCgvXFxzKy8pPy5bMF0/LnJlcGxhY2UoL1tcImBdL2csIFwiXCIpO1xuICAgIGNvbnN0IGNvbHVtbnMgPSBhd2FpdCBkYi5zZWxlY3RGcm9tKFxuICAgICAgc3FsYHByYWdtYV90YWJsZV9pbmZvKCR7dGFibGV9KWAuYXMoXCJ0YWJsZV9pbmZvXCIpXG4gICAgKS5zZWxlY3QoW1wibmFtZVwiLCBcInR5cGVcIiwgXCJub3RudWxsXCIsIFwiZGZsdF92YWx1ZVwiXSkuZXhlY3V0ZSgpO1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0YWJsZSxcbiAgICAgIGNvbHVtbnM6IGNvbHVtbnMubWFwKChjb2wpID0+ICh7XG4gICAgICAgIG5hbWU6IGNvbC5uYW1lLFxuICAgICAgICBkYXRhVHlwZTogY29sLnR5cGUsXG4gICAgICAgIGlzTnVsbGFibGU6ICFjb2wubm90bnVsbCxcbiAgICAgICAgaXNBdXRvSW5jcmVtZW50aW5nOiBjb2wubmFtZSA9PT0gYXV0b0luY3JlbWVudENvbCxcbiAgICAgICAgaGFzRGVmYXVsdFZhbHVlOiBjb2wuZGZsdF92YWx1ZSAhPSBudWxsXG4gICAgICB9KSksXG4gICAgICBpc1ZpZXc6IHRydWVcbiAgICB9O1xuICB9XG59XG5jbGFzcyBOb2RlU3FsaXRlUXVlcnlDb21waWxlciBleHRlbmRzIERlZmF1bHRRdWVyeUNvbXBpbGVyIHtcbiAgZ2V0Q3VycmVudFBhcmFtZXRlclBsYWNlaG9sZGVyKCkge1xuICAgIHJldHVybiBcIj9cIjtcbiAgfVxuICBnZXRMZWZ0SWRlbnRpZmllcldyYXBwZXIoKSB7XG4gICAgcmV0dXJuICdcIic7XG4gIH1cbiAgZ2V0UmlnaHRJZGVudGlmaWVyV3JhcHBlcigpIHtcbiAgICByZXR1cm4gJ1wiJztcbiAgfVxuICBnZXRBdXRvSW5jcmVtZW50KCkge1xuICAgIHJldHVybiBcImF1dG9pbmNyZW1lbnRcIjtcbiAgfVxufVxuY2xhc3MgTm9kZVNxbGl0ZURpYWxlY3Qge1xuICAjY29uZmlnO1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICB0aGlzLiNjb25maWcgPSB7IC4uLmNvbmZpZyB9O1xuICB9XG4gIGNyZWF0ZURyaXZlcigpIHtcbiAgICByZXR1cm4gbmV3IE5vZGVTcWxpdGVEcml2ZXIodGhpcy4jY29uZmlnKTtcbiAgfVxuICBjcmVhdGVRdWVyeUNvbXBpbGVyKCkge1xuICAgIHJldHVybiBuZXcgTm9kZVNxbGl0ZVF1ZXJ5Q29tcGlsZXIoKTtcbiAgfVxuICBjcmVhdGVBZGFwdGVyKCkge1xuICAgIHJldHVybiBuZXcgTm9kZVNxbGl0ZUFkYXB0ZXIoKTtcbiAgfVxuICBjcmVhdGVJbnRyb3NwZWN0b3IoZGIpIHtcbiAgICByZXR1cm4gbmV3IE5vZGVTcWxpdGVJbnRyb3NwZWN0b3IoZGIpO1xuICB9XG59XG5cbmV4cG9ydCB7IE5vZGVTcWxpdGVBZGFwdGVyLCBOb2RlU3FsaXRlRGlhbGVjdCwgTm9kZVNxbGl0ZURyaXZlciwgTm9kZVNxbGl0ZUludHJvc3BlY3RvciwgTm9kZVNxbGl0ZVF1ZXJ5Q29tcGlsZXIgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/chunks/node-sqlite-dialect.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/crypto/index.mjs":
/*!********************************************************!*\
  !*** ./node_modules/better-auth/dist/crypto/index.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   compareHash: () => (/* binding */ compareHash),\n/* harmony export */   constantTimeEqual: () => (/* binding */ constantTimeEqual),\n/* harmony export */   generateRandomString: () => (/* reexport safe */ _shared_better_auth_B4Qoxdgc_mjs__WEBPACK_IMPORTED_MODULE_5__.g),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   hashToBase64: () => (/* binding */ hashToBase64),\n/* harmony export */   signJWT: () => (/* binding */ signJWT),\n/* harmony export */   symmetricDecrypt: () => (/* binding */ symmetricDecrypt),\n/* harmony export */   symmetricEncrypt: () => (/* binding */ symmetricEncrypt),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword)\n/* harmony export */ });\n/* harmony import */ var _better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/utils/hash */ \"(rsc)/./node_modules/@better-auth/utils/dist/hash.mjs\");\n/* harmony import */ var _noble_ciphers_chacha__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @noble/ciphers/chacha */ \"(rsc)/./node_modules/@noble/ciphers/esm/chacha.js\");\n/* harmony import */ var _noble_ciphers_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @noble/ciphers/utils */ \"(rsc)/./node_modules/@noble/ciphers/esm/utils.js\");\n/* harmony import */ var _noble_ciphers_webcrypto__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @noble/ciphers/webcrypto */ \"(rsc)/./node_modules/@noble/ciphers/esm/webcrypto.js\");\n/* harmony import */ var _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/utils/base64 */ \"(rsc)/./node_modules/@better-auth/utils/dist/base64.mjs\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/node/esm/jwt/sign.js\");\n/* harmony import */ var _noble_hashes_scrypt__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @noble/hashes/scrypt */ \"(rsc)/./node_modules/@noble/hashes/esm/scrypt.js\");\n/* harmony import */ var _better_auth_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/utils */ \"(rsc)/./node_modules/@better-auth/utils/dist/index.mjs\");\n/* harmony import */ var _better_auth_utils_hex__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @better-auth/utils/hex */ \"(rsc)/./node_modules/@better-auth/utils/dist/hex.mjs\");\n/* harmony import */ var _noble_hashes_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @noble/hashes/utils */ \"(rsc)/./node_modules/@noble/hashes/esm/utils.js\");\n/* harmony import */ var _shared_better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../shared/better-auth.DdzSJf-n.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.DdzSJf-n.mjs\");\n/* harmony import */ var _shared_better_auth_B4Qoxdgc_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../shared/better-auth.B4Qoxdgc.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.B4Qoxdgc.mjs\");\n/* harmony import */ var _better_auth_utils_random__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/utils/random */ \"(rsc)/./node_modules/@better-auth/utils/dist/random.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nasync function signJWT(payload, secret, expiresIn = 3600) {\n  const jwt = await new jose__WEBPACK_IMPORTED_MODULE_7__.SignJWT(payload).setProtectedHeader({ alg: \"HS256\" }).setIssuedAt().setExpirationTime(Math.floor(Date.now() / 1e3) + expiresIn).sign(new TextEncoder().encode(secret));\n  return jwt;\n}\n\nfunction constantTimeEqual(a, b) {\n  const aBuffer = new Uint8Array(a);\n  const bBuffer = new Uint8Array(b);\n  let c = aBuffer.length ^ bBuffer.length;\n  const length = Math.max(aBuffer.length, bBuffer.length);\n  for (let i = 0; i < length; i++) {\n    c |= (i < aBuffer.length ? aBuffer[i] : 0) ^ (i < bBuffer.length ? bBuffer[i] : 0);\n  }\n  return c === 0;\n}\n\nasync function hashToBase64(data) {\n  const buffer = await (0,_better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_0__.createHash)(\"SHA-256\").digest(data);\n  return _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_1__.base64.encode(buffer);\n}\nasync function compareHash(data, hash) {\n  const buffer = await (0,_better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_0__.createHash)(\"SHA-256\").digest(\n    typeof data === \"string\" ? new TextEncoder().encode(data) : data\n  );\n  const hashBuffer = _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_1__.base64.decode(hash);\n  return constantTimeEqual(buffer, hashBuffer);\n}\n\nconst config = {\n  N: 16384,\n  r: 16,\n  p: 1,\n  dkLen: 64\n};\nasync function generateKey(password, salt) {\n  return await (0,_noble_hashes_scrypt__WEBPACK_IMPORTED_MODULE_8__.scryptAsync)(password.normalize(\"NFKC\"), salt, {\n    N: config.N,\n    p: config.p,\n    r: config.r,\n    dkLen: config.dkLen,\n    maxmem: 128 * config.N * config.r * 2\n  });\n}\nconst hashPassword = async (password) => {\n  const salt = _better_auth_utils_hex__WEBPACK_IMPORTED_MODULE_3__.hex.encode((0,_better_auth_utils__WEBPACK_IMPORTED_MODULE_2__.getRandomValues)(new Uint8Array(16)));\n  const key = await generateKey(password, salt);\n  return `${salt}:${_better_auth_utils_hex__WEBPACK_IMPORTED_MODULE_3__.hex.encode(key)}`;\n};\nconst verifyPassword = async ({\n  hash,\n  password\n}) => {\n  const [salt, key] = hash.split(\":\");\n  if (!salt || !key) {\n    throw new _shared_better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_4__.B(\"Invalid password hash\");\n  }\n  const targetKey = await generateKey(password, salt);\n  return constantTimeEqual(targetKey, (0,_noble_hashes_utils__WEBPACK_IMPORTED_MODULE_9__.hexToBytes)(key));\n};\n\nconst symmetricEncrypt = async ({\n  key,\n  data\n}) => {\n  const keyAsBytes = await (0,_better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_0__.createHash)(\"SHA-256\").digest(key);\n  const dataAsBytes = (0,_noble_ciphers_utils__WEBPACK_IMPORTED_MODULE_10__.utf8ToBytes)(data);\n  const chacha = (0,_noble_ciphers_webcrypto__WEBPACK_IMPORTED_MODULE_11__.managedNonce)(_noble_ciphers_chacha__WEBPACK_IMPORTED_MODULE_12__.xchacha20poly1305)(new Uint8Array(keyAsBytes));\n  return (0,_noble_ciphers_utils__WEBPACK_IMPORTED_MODULE_10__.bytesToHex)(chacha.encrypt(dataAsBytes));\n};\nconst symmetricDecrypt = async ({\n  key,\n  data\n}) => {\n  const keyAsBytes = await (0,_better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_0__.createHash)(\"SHA-256\").digest(key);\n  const dataAsBytes = (0,_noble_ciphers_utils__WEBPACK_IMPORTED_MODULE_10__.hexToBytes)(data);\n  const chacha = (0,_noble_ciphers_webcrypto__WEBPACK_IMPORTED_MODULE_11__.managedNonce)(_noble_ciphers_chacha__WEBPACK_IMPORTED_MODULE_12__.xchacha20poly1305)(new Uint8Array(keyAsBytes));\n  return new TextDecoder().decode(chacha.decrypt(dataAsBytes));\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jcnlwdG8vaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBcUQ7QUFDSztBQUNpQztBQUNuQztBQUNMO0FBQ3BCO0FBQ29CO0FBQ0U7QUFDUjtBQUNJO0FBQ3lCO0FBQ0s7QUFDNUM7O0FBRW5DO0FBQ0Esd0JBQXdCLHlDQUFPLCtCQUErQixjQUFjO0FBQzVFO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixZQUFZO0FBQzlCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsdUJBQXVCLG1FQUFVO0FBQ2pDLFNBQVMsNkRBQU07QUFDZjtBQUNBO0FBQ0EsdUJBQXVCLG1FQUFVO0FBQ2pDO0FBQ0E7QUFDQSxxQkFBcUIsNkRBQU07QUFDM0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsaUVBQVc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsZUFBZSx1REFBRyxRQUFRLG1FQUFlO0FBQ3pDO0FBQ0EsWUFBWSxLQUFLLEdBQUcsdURBQUcsYUFBYTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsY0FBYywrREFBZTtBQUM3QjtBQUNBO0FBQ0Esc0NBQXNDLCtEQUFVO0FBQ2hEOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCwyQkFBMkIsbUVBQVU7QUFDckMsc0JBQXNCLGtFQUFXO0FBQ2pDLGlCQUFpQix1RUFBWSxDQUFDLHFFQUFpQjtBQUMvQyxTQUFTLGlFQUFVO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELDJCQUEyQixtRUFBVTtBQUNyQyxzQkFBc0IsaUVBQVk7QUFDbEMsaUJBQWlCLHVFQUFZLENBQUMscUVBQWlCO0FBQy9DO0FBQ0E7O0FBRW1JIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFtYWFuXFxPbmVEcml2ZVxcRGVza3RvcFxcS2FuZGlkXzJcXE5ldyBmb2xkZXIgKDIpXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxjcnlwdG9cXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVIYXNoIH0gZnJvbSAnQGJldHRlci1hdXRoL3V0aWxzL2hhc2gnO1xuaW1wb3J0IHsgeGNoYWNoYTIwcG9seTEzMDUgfSBmcm9tICdAbm9ibGUvY2lwaGVycy9jaGFjaGEnO1xuaW1wb3J0IHsgdXRmOFRvQnl0ZXMsIGJ5dGVzVG9IZXgsIGhleFRvQnl0ZXMgYXMgaGV4VG9CeXRlcyQxIH0gZnJvbSAnQG5vYmxlL2NpcGhlcnMvdXRpbHMnO1xuaW1wb3J0IHsgbWFuYWdlZE5vbmNlIH0gZnJvbSAnQG5vYmxlL2NpcGhlcnMvd2ViY3J5cHRvJztcbmltcG9ydCB7IGJhc2U2NCB9IGZyb20gJ0BiZXR0ZXItYXV0aC91dGlscy9iYXNlNjQnO1xuaW1wb3J0IHsgU2lnbkpXVCB9IGZyb20gJ2pvc2UnO1xuaW1wb3J0IHsgc2NyeXB0QXN5bmMgfSBmcm9tICdAbm9ibGUvaGFzaGVzL3NjcnlwdCc7XG5pbXBvcnQgeyBnZXRSYW5kb21WYWx1ZXMgfSBmcm9tICdAYmV0dGVyLWF1dGgvdXRpbHMnO1xuaW1wb3J0IHsgaGV4IH0gZnJvbSAnQGJldHRlci1hdXRoL3V0aWxzL2hleCc7XG5pbXBvcnQgeyBoZXhUb0J5dGVzIH0gZnJvbSAnQG5vYmxlL2hhc2hlcy91dGlscyc7XG5pbXBvcnQgeyBCIGFzIEJldHRlckF1dGhFcnJvciB9IGZyb20gJy4uL3NoYXJlZC9iZXR0ZXItYXV0aC5EZHpTSmYtbi5tanMnO1xuZXhwb3J0IHsgZyBhcyBnZW5lcmF0ZVJhbmRvbVN0cmluZyB9IGZyb20gJy4uL3NoYXJlZC9iZXR0ZXItYXV0aC5CNFFveGRnYy5tanMnO1xuaW1wb3J0ICdAYmV0dGVyLWF1dGgvdXRpbHMvcmFuZG9tJztcblxuYXN5bmMgZnVuY3Rpb24gc2lnbkpXVChwYXlsb2FkLCBzZWNyZXQsIGV4cGlyZXNJbiA9IDM2MDApIHtcbiAgY29uc3Qgand0ID0gYXdhaXQgbmV3IFNpZ25KV1QocGF5bG9hZCkuc2V0UHJvdGVjdGVkSGVhZGVyKHsgYWxnOiBcIkhTMjU2XCIgfSkuc2V0SXNzdWVkQXQoKS5zZXRFeHBpcmF0aW9uVGltZShNYXRoLmZsb29yKERhdGUubm93KCkgLyAxZTMpICsgZXhwaXJlc0luKS5zaWduKG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzZWNyZXQpKTtcbiAgcmV0dXJuIGp3dDtcbn1cblxuZnVuY3Rpb24gY29uc3RhbnRUaW1lRXF1YWwoYSwgYikge1xuICBjb25zdCBhQnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoYSk7XG4gIGNvbnN0IGJCdWZmZXIgPSBuZXcgVWludDhBcnJheShiKTtcbiAgbGV0IGMgPSBhQnVmZmVyLmxlbmd0aCBeIGJCdWZmZXIubGVuZ3RoO1xuICBjb25zdCBsZW5ndGggPSBNYXRoLm1heChhQnVmZmVyLmxlbmd0aCwgYkJ1ZmZlci5sZW5ndGgpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgYyB8PSAoaSA8IGFCdWZmZXIubGVuZ3RoID8gYUJ1ZmZlcltpXSA6IDApIF4gKGkgPCBiQnVmZmVyLmxlbmd0aCA/IGJCdWZmZXJbaV0gOiAwKTtcbiAgfVxuICByZXR1cm4gYyA9PT0gMDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gaGFzaFRvQmFzZTY0KGRhdGEpIHtcbiAgY29uc3QgYnVmZmVyID0gYXdhaXQgY3JlYXRlSGFzaChcIlNIQS0yNTZcIikuZGlnZXN0KGRhdGEpO1xuICByZXR1cm4gYmFzZTY0LmVuY29kZShidWZmZXIpO1xufVxuYXN5bmMgZnVuY3Rpb24gY29tcGFyZUhhc2goZGF0YSwgaGFzaCkge1xuICBjb25zdCBidWZmZXIgPSBhd2FpdCBjcmVhdGVIYXNoKFwiU0hBLTI1NlwiKS5kaWdlc3QoXG4gICAgdHlwZW9mIGRhdGEgPT09IFwic3RyaW5nXCIgPyBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoZGF0YSkgOiBkYXRhXG4gICk7XG4gIGNvbnN0IGhhc2hCdWZmZXIgPSBiYXNlNjQuZGVjb2RlKGhhc2gpO1xuICByZXR1cm4gY29uc3RhbnRUaW1lRXF1YWwoYnVmZmVyLCBoYXNoQnVmZmVyKTtcbn1cblxuY29uc3QgY29uZmlnID0ge1xuICBOOiAxNjM4NCxcbiAgcjogMTYsXG4gIHA6IDEsXG4gIGRrTGVuOiA2NFxufTtcbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlS2V5KHBhc3N3b3JkLCBzYWx0KSB7XG4gIHJldHVybiBhd2FpdCBzY3J5cHRBc3luYyhwYXNzd29yZC5ub3JtYWxpemUoXCJORktDXCIpLCBzYWx0LCB7XG4gICAgTjogY29uZmlnLk4sXG4gICAgcDogY29uZmlnLnAsXG4gICAgcjogY29uZmlnLnIsXG4gICAgZGtMZW46IGNvbmZpZy5ka0xlbixcbiAgICBtYXhtZW06IDEyOCAqIGNvbmZpZy5OICogY29uZmlnLnIgKiAyXG4gIH0pO1xufVxuY29uc3QgaGFzaFBhc3N3b3JkID0gYXN5bmMgKHBhc3N3b3JkKSA9PiB7XG4gIGNvbnN0IHNhbHQgPSBoZXguZW5jb2RlKGdldFJhbmRvbVZhbHVlcyhuZXcgVWludDhBcnJheSgxNikpKTtcbiAgY29uc3Qga2V5ID0gYXdhaXQgZ2VuZXJhdGVLZXkocGFzc3dvcmQsIHNhbHQpO1xuICByZXR1cm4gYCR7c2FsdH06JHtoZXguZW5jb2RlKGtleSl9YDtcbn07XG5jb25zdCB2ZXJpZnlQYXNzd29yZCA9IGFzeW5jICh7XG4gIGhhc2gsXG4gIHBhc3N3b3JkXG59KSA9PiB7XG4gIGNvbnN0IFtzYWx0LCBrZXldID0gaGFzaC5zcGxpdChcIjpcIik7XG4gIGlmICghc2FsdCB8fCAha2V5KSB7XG4gICAgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcIkludmFsaWQgcGFzc3dvcmQgaGFzaFwiKTtcbiAgfVxuICBjb25zdCB0YXJnZXRLZXkgPSBhd2FpdCBnZW5lcmF0ZUtleShwYXNzd29yZCwgc2FsdCk7XG4gIHJldHVybiBjb25zdGFudFRpbWVFcXVhbCh0YXJnZXRLZXksIGhleFRvQnl0ZXMoa2V5KSk7XG59O1xuXG5jb25zdCBzeW1tZXRyaWNFbmNyeXB0ID0gYXN5bmMgKHtcbiAga2V5LFxuICBkYXRhXG59KSA9PiB7XG4gIGNvbnN0IGtleUFzQnl0ZXMgPSBhd2FpdCBjcmVhdGVIYXNoKFwiU0hBLTI1NlwiKS5kaWdlc3Qoa2V5KTtcbiAgY29uc3QgZGF0YUFzQnl0ZXMgPSB1dGY4VG9CeXRlcyhkYXRhKTtcbiAgY29uc3QgY2hhY2hhID0gbWFuYWdlZE5vbmNlKHhjaGFjaGEyMHBvbHkxMzA1KShuZXcgVWludDhBcnJheShrZXlBc0J5dGVzKSk7XG4gIHJldHVybiBieXRlc1RvSGV4KGNoYWNoYS5lbmNyeXB0KGRhdGFBc0J5dGVzKSk7XG59O1xuY29uc3Qgc3ltbWV0cmljRGVjcnlwdCA9IGFzeW5jICh7XG4gIGtleSxcbiAgZGF0YVxufSkgPT4ge1xuICBjb25zdCBrZXlBc0J5dGVzID0gYXdhaXQgY3JlYXRlSGFzaChcIlNIQS0yNTZcIikuZGlnZXN0KGtleSk7XG4gIGNvbnN0IGRhdGFBc0J5dGVzID0gaGV4VG9CeXRlcyQxKGRhdGEpO1xuICBjb25zdCBjaGFjaGEgPSBtYW5hZ2VkTm9uY2UoeGNoYWNoYTIwcG9seTEzMDUpKG5ldyBVaW50OEFycmF5KGtleUFzQnl0ZXMpKTtcbiAgcmV0dXJuIG5ldyBUZXh0RGVjb2RlcigpLmRlY29kZShjaGFjaGEuZGVjcnlwdChkYXRhQXNCeXRlcykpO1xufTtcblxuZXhwb3J0IHsgY29tcGFyZUhhc2gsIGNvbnN0YW50VGltZUVxdWFsLCBoYXNoUGFzc3dvcmQsIGhhc2hUb0Jhc2U2NCwgc2lnbkpXVCwgc3ltbWV0cmljRGVjcnlwdCwgc3ltbWV0cmljRW5jcnlwdCwgdmVyaWZ5UGFzc3dvcmQgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/index.mjs":
/*!*************************************************!*\
  !*** ./node_modules/better-auth/dist/index.mjs ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   APIError: () => (/* reexport safe */ better_call__WEBPACK_IMPORTED_MODULE_6__.APIError),\n/* harmony export */   BetterAuthError: () => (/* reexport safe */ _shared_better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_1__.B),\n/* harmony export */   HIDE_METADATA: () => (/* reexport safe */ _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_3__.H),\n/* harmony export */   MissingDependencyError: () => (/* reexport safe */ _shared_better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_1__.M),\n/* harmony export */   betterAuth: () => (/* reexport safe */ _shared_better_auth_DlWzob1_mjs__WEBPACK_IMPORTED_MODULE_0__.b),\n/* harmony export */   capitalizeFirstLetter: () => (/* reexport safe */ _shared_better_auth_D_2CmEwz_mjs__WEBPACK_IMPORTED_MODULE_2__.c),\n/* harmony export */   createLogger: () => (/* reexport safe */ _shared_better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_5__.c),\n/* harmony export */   createTelemetry: () => (/* reexport safe */ _shared_better_auth_DlWzob1_mjs__WEBPACK_IMPORTED_MODULE_0__.c),\n/* harmony export */   generateId: () => (/* reexport safe */ _shared_better_auth_BUPPRXfK_mjs__WEBPACK_IMPORTED_MODULE_4__.g),\n/* harmony export */   generateState: () => (/* reexport safe */ _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_3__.g),\n/* harmony export */   getTelemetryAuthConfig: () => (/* reexport safe */ _shared_better_auth_DlWzob1_mjs__WEBPACK_IMPORTED_MODULE_0__.g),\n/* harmony export */   levels: () => (/* reexport safe */ _shared_better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_5__.l),\n/* harmony export */   logger: () => (/* reexport safe */ _shared_better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_5__.a),\n/* harmony export */   parseState: () => (/* reexport safe */ _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_3__.p),\n/* harmony export */   shouldPublishLog: () => (/* reexport safe */ _shared_better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_5__.s)\n/* harmony export */ });\n/* harmony import */ var _shared_better_auth_DlWzob1_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./shared/better-auth.DlWzob1-.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.DlWzob1-.mjs\");\n/* harmony import */ var _shared_better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shared/better-auth.DdzSJf-n.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.DdzSJf-n.mjs\");\n/* harmony import */ var _shared_better_auth_D_2CmEwz_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shared/better-auth.D-2CmEwz.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.D-2CmEwz.mjs\");\n/* harmony import */ var _shared_better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shared/better-auth.nqWf7zUe.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.nqWf7zUe.mjs\");\n/* harmony import */ var _shared_better_auth_BUPPRXfK_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./shared/better-auth.BUPPRXfK.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.BUPPRXfK.mjs\");\n/* harmony import */ var _shared_better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./shared/better-auth.BjBlybv-.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.BjBlybv-.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.js\");\n/* harmony import */ var _shared_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./shared/better-auth.DV5EHeYG.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.DV5EHeYG.mjs\");\n/* harmony import */ var _shared_better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./shared/better-auth.CMQ3rA-I.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.CMQ3rA-I.mjs\");\n/* harmony import */ var _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @better-auth/utils/base64 */ \"(rsc)/./node_modules/@better-auth/utils/dist/base64.mjs\");\n/* harmony import */ var _better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @better-auth/utils/hmac */ \"(rsc)/./node_modules/@better-auth/utils/dist/hmac.mjs\");\n/* harmony import */ var _better_auth_utils_binary__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @better-auth/utils/binary */ \"(rsc)/./node_modules/@better-auth/utils/dist/binary.mjs\");\n/* harmony import */ var _shared_better_auth_Dcv8PS7T_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./shared/better-auth.Dcv8PS7T.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.Dcv8PS7T.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _shared_better_auth_UfVWArIB_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./shared/better-auth.UfVWArIB.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.UfVWArIB.mjs\");\n/* harmony import */ var _shared_better_auth_CW6D9eSx_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./shared/better-auth.CW6D9eSx.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.CW6D9eSx.mjs\");\n/* harmony import */ var _shared_better_auth_BZZKN1g7_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./shared/better-auth.BZZKN1g7.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.BZZKN1g7.mjs\");\n/* harmony import */ var _shared_better_auth_CuS_eDdK_mjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./shared/better-auth.CuS_eDdK.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.CuS_eDdK.mjs\");\n/* harmony import */ var _shared_better_auth_O2VtDkDK_mjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./shared/better-auth.O2VtDkDK.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.O2VtDkDK.mjs\");\n/* harmony import */ var defu__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! defu */ \"(rsc)/./node_modules/defu/dist/defu.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./crypto/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @better-auth/utils/hash */ \"(rsc)/./node_modules/@better-auth/utils/dist/hash.mjs\");\n/* harmony import */ var _better_auth_utils__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @better-auth/utils */ \"(rsc)/./node_modules/@better-auth/utils/dist/index.mjs\");\n/* harmony import */ var _better_auth_utils_hex__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @better-auth/utils/hex */ \"(rsc)/./node_modules/@better-auth/utils/dist/hex.mjs\");\n/* harmony import */ var _shared_better_auth_B4Qoxdgc_mjs__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./shared/better-auth.B4Qoxdgc.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.B4Qoxdgc.mjs\");\n/* harmony import */ var _better_auth_utils_random__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @better-auth/utils/random */ \"(rsc)/./node_modules/@better-auth/utils/dist/random.mjs\");\n/* harmony import */ var _shared_better_auth_CSVCtb77_mjs__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./shared/better-auth.CSVCtb77.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.CSVCtb77.mjs\");\n/* harmony import */ var _shared_better_auth_B_PTVODM_mjs__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./shared/better-auth.B_PTVODM.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.B_PTVODM.mjs\");\n/* harmony import */ var _shared_better_auth_B8b3lep0_mjs__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./shared/better-auth.B8b3lep0.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.B8b3lep0.mjs\");\n/* harmony import */ var _shared_better_auth_BuBqXPUp_mjs__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./shared/better-auth.BuBqXPUp.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.BuBqXPUp.mjs\");\n/* harmony import */ var _shared_better_auth_C7uhlcDq_mjs__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./shared/better-auth.C7uhlcDq.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.C7uhlcDq.mjs\");\n/* harmony import */ var _shared_better_auth_YwDQhoPc_mjs__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./shared/better-auth.YwDQhoPc.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.YwDQhoPc.mjs\");\n/* harmony import */ var _better_fetch_fetch__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! @better-fetch/fetch */ \"(rsc)/./node_modules/@better-fetch/fetch/dist/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXVIO0FBQ2pCO0FBQ3ZCO0FBQzZCO0FBQ3hDO0FBQ21EO0FBQ2hGO0FBQ0k7QUFDM0I7QUFDMkI7QUFDUjtBQUNGO0FBQ0U7QUFDUTtBQUNsQjtBQUNrQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQzdCO0FBQ2M7QUFDSztBQUNGO0FBQ0Q7QUFDSTtBQUNwQjtBQUNnQjtBQUNGO0FBQ0k7QUFDSDtBQUNjO0FBQ1I7QUFDUTtBQUNBO0FBQ0E7QUFDM0I7QUFDMkI7QUFDQTtBQUNBO0FBQ2Q7QUFDUiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhbWFhblxcT25lRHJpdmVcXERlc2t0b3BcXEthbmRpZF8yXFxOZXcgZm9sZGVyICgyKVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB7IGIgYXMgYmV0dGVyQXV0aCwgYyBhcyBjcmVhdGVUZWxlbWV0cnksIGcgYXMgZ2V0VGVsZW1ldHJ5QXV0aENvbmZpZyB9IGZyb20gJy4vc2hhcmVkL2JldHRlci1hdXRoLkRsV3pvYjEtLm1qcyc7XG5leHBvcnQgeyBCIGFzIEJldHRlckF1dGhFcnJvciwgTSBhcyBNaXNzaW5nRGVwZW5kZW5jeUVycm9yIH0gZnJvbSAnLi9zaGFyZWQvYmV0dGVyLWF1dGguRGR6U0pmLW4ubWpzJztcbmV4cG9ydCB7IGMgYXMgY2FwaXRhbGl6ZUZpcnN0TGV0dGVyIH0gZnJvbSAnLi9zaGFyZWQvYmV0dGVyLWF1dGguRC0yQ21Fd3oubWpzJztcbmV4cG9ydCB7IEggYXMgSElERV9NRVRBREFUQSwgZyBhcyBnZW5lcmF0ZVN0YXRlLCBwIGFzIHBhcnNlU3RhdGUgfSBmcm9tICcuL3NoYXJlZC9iZXR0ZXItYXV0aC5ucVdmN3pVZS5tanMnO1xuZXhwb3J0IHsgZyBhcyBnZW5lcmF0ZUlkIH0gZnJvbSAnLi9zaGFyZWQvYmV0dGVyLWF1dGguQlVQUFJYZksubWpzJztcbmV4cG9ydCB7IGMgYXMgY3JlYXRlTG9nZ2VyLCBsIGFzIGxldmVscywgYSBhcyBsb2dnZXIsIHMgYXMgc2hvdWxkUHVibGlzaExvZyB9IGZyb20gJy4vc2hhcmVkL2JldHRlci1hdXRoLkJqQmx5YnYtLm1qcyc7XG5leHBvcnQgeyBBUElFcnJvciB9IGZyb20gJ2JldHRlci1jYWxsJztcbmltcG9ydCAnLi9zaGFyZWQvYmV0dGVyLWF1dGguRFY1RUhlWUcubWpzJztcbmltcG9ydCAnem9kL3Y0JztcbmltcG9ydCAnLi9zaGFyZWQvYmV0dGVyLWF1dGguQ01RM3JBLUkubWpzJztcbmltcG9ydCAnQGJldHRlci1hdXRoL3V0aWxzL2Jhc2U2NCc7XG5pbXBvcnQgJ0BiZXR0ZXItYXV0aC91dGlscy9obWFjJztcbmltcG9ydCAnQGJldHRlci1hdXRoL3V0aWxzL2JpbmFyeSc7XG5pbXBvcnQgJy4vc2hhcmVkL2JldHRlci1hdXRoLkRjdjhQUzdULm1qcyc7XG5pbXBvcnQgJy4vYXBpL2luZGV4Lm1qcyc7XG5pbXBvcnQgJy4vc2hhcmVkL2JldHRlci1hdXRoLlVmVldBcklCLm1qcyc7XG5pbXBvcnQgJy4vc2hhcmVkL2JldHRlci1hdXRoLkNXNkQ5ZVN4Lm1qcyc7XG5pbXBvcnQgJy4vc2hhcmVkL2JldHRlci1hdXRoLkJaWktOMWc3Lm1qcyc7XG5pbXBvcnQgJy4vc2hhcmVkL2JldHRlci1hdXRoLkN1U19lRGRLLm1qcyc7XG5pbXBvcnQgJy4vc2hhcmVkL2JldHRlci1hdXRoLk8yVnREa0RLLm1qcyc7XG5pbXBvcnQgJ2RlZnUnO1xuaW1wb3J0ICcuL2NyeXB0by9pbmRleC5tanMnO1xuaW1wb3J0ICdAYmV0dGVyLWF1dGgvdXRpbHMvaGFzaCc7XG5pbXBvcnQgJ0Bub2JsZS9jaXBoZXJzL2NoYWNoYSc7XG5pbXBvcnQgJ0Bub2JsZS9jaXBoZXJzL3V0aWxzJztcbmltcG9ydCAnQG5vYmxlL2NpcGhlcnMvd2ViY3J5cHRvJztcbmltcG9ydCAnam9zZSc7XG5pbXBvcnQgJ0Bub2JsZS9oYXNoZXMvc2NyeXB0JztcbmltcG9ydCAnQGJldHRlci1hdXRoL3V0aWxzJztcbmltcG9ydCAnQGJldHRlci1hdXRoL3V0aWxzL2hleCc7XG5pbXBvcnQgJ0Bub2JsZS9oYXNoZXMvdXRpbHMnO1xuaW1wb3J0ICcuL3NoYXJlZC9iZXR0ZXItYXV0aC5CNFFveGRnYy5tanMnO1xuaW1wb3J0ICdAYmV0dGVyLWF1dGgvdXRpbHMvcmFuZG9tJztcbmltcG9ydCAnLi9zaGFyZWQvYmV0dGVyLWF1dGguQ1NWQ3RiNzcubWpzJztcbmltcG9ydCAnLi9zaGFyZWQvYmV0dGVyLWF1dGguQl9QVFZPRE0ubWpzJztcbmltcG9ydCAnLi9zaGFyZWQvYmV0dGVyLWF1dGguQjhiM2xlcDAubWpzJztcbmltcG9ydCAna3lzZWx5JztcbmltcG9ydCAnLi9zaGFyZWQvYmV0dGVyLWF1dGguQnVCcVhQVXAubWpzJztcbmltcG9ydCAnLi9zaGFyZWQvYmV0dGVyLWF1dGguQzd1aGxjRHEubWpzJztcbmltcG9ydCAnLi9zaGFyZWQvYmV0dGVyLWF1dGguWXdEUWhvUGMubWpzJztcbmltcG9ydCAnQGJldHRlci1mZXRjaC9mZXRjaCc7XG5pbXBvcnQgJ2pvc2UvZXJyb3JzJztcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/shared/better-auth.B4Qoxdgc.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/shared/better-auth.B4Qoxdgc.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   g: () => (/* binding */ generateRandomString)\n/* harmony export */ });\n/* harmony import */ var _better_auth_utils_random__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/utils/random */ \"(rsc)/./node_modules/@better-auth/utils/dist/random.mjs\");\n\n\nconst generateRandomString = (0,_better_auth_utils_random__WEBPACK_IMPORTED_MODULE_0__.createRandomStringGenerator)(\n  \"a-z\",\n  \"0-9\",\n  \"A-Z\",\n  \"-_\"\n);\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9zaGFyZWQvYmV0dGVyLWF1dGguQjRRb3hkZ2MubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXdFOztBQUV4RSw2QkFBNkIsc0ZBQTJCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRXFDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFtYWFuXFxPbmVEcml2ZVxcRGVza3RvcFxcS2FuZGlkXzJcXE5ldyBmb2xkZXIgKDIpXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxzaGFyZWRcXGJldHRlci1hdXRoLkI0UW94ZGdjLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVSYW5kb21TdHJpbmdHZW5lcmF0b3IgfSBmcm9tICdAYmV0dGVyLWF1dGgvdXRpbHMvcmFuZG9tJztcblxuY29uc3QgZ2VuZXJhdGVSYW5kb21TdHJpbmcgPSBjcmVhdGVSYW5kb21TdHJpbmdHZW5lcmF0b3IoXG4gIFwiYS16XCIsXG4gIFwiMC05XCIsXG4gIFwiQS1aXCIsXG4gIFwiLV9cIlxuKTtcblxuZXhwb3J0IHsgZ2VuZXJhdGVSYW5kb21TdHJpbmcgYXMgZyB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/shared/better-auth.B4Qoxdgc.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/shared/better-auth.B8b3lep0.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/shared/better-auth.B8b3lep0.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   c: () => (/* binding */ createKyselyAdapter),\n/* harmony export */   g: () => (/* binding */ getKyselyDatabaseType),\n/* harmony export */   k: () => (/* binding */ kyselyAdapter)\n/* harmony export */ });\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/dialect/sqlite/sqlite-dialect.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/dialect/mysql/mysql-dialect.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/dialect/postgres/postgres-dialect.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/dialect/mssql/mssql-dialect.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/kysely.js\");\n/* harmony import */ var _better_auth_BuBqXPUp_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./better-auth.BuBqXPUp.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.BuBqXPUp.mjs\");\n\n\n\nfunction getKyselyDatabaseType(db) {\n  if (!db) {\n    return null;\n  }\n  if (\"dialect\" in db) {\n    return getKyselyDatabaseType(db.dialect);\n  }\n  if (\"createDriver\" in db) {\n    if (db instanceof kysely__WEBPACK_IMPORTED_MODULE_1__.SqliteDialect) {\n      return \"sqlite\";\n    }\n    if (db instanceof kysely__WEBPACK_IMPORTED_MODULE_2__.MysqlDialect) {\n      return \"mysql\";\n    }\n    if (db instanceof kysely__WEBPACK_IMPORTED_MODULE_3__.PostgresDialect) {\n      return \"postgres\";\n    }\n    if (db instanceof kysely__WEBPACK_IMPORTED_MODULE_4__.MssqlDialect) {\n      return \"mssql\";\n    }\n  }\n  if (\"aggregate\" in db) {\n    return \"sqlite\";\n  }\n  if (\"getConnection\" in db) {\n    return \"mysql\";\n  }\n  if (\"connect\" in db) {\n    return \"postgres\";\n  }\n  if (\"fileControl\" in db) {\n    return \"sqlite\";\n  }\n  if (\"open\" in db && \"close\" in db && \"prepare\" in db) {\n    return \"sqlite\";\n  }\n  return null;\n}\nconst createKyselyAdapter = async (config) => {\n  const db = config.database;\n  if (!db) {\n    return {\n      kysely: null,\n      databaseType: null\n    };\n  }\n  if (\"db\" in db) {\n    return {\n      kysely: db.db,\n      databaseType: db.type\n    };\n  }\n  if (\"dialect\" in db) {\n    return {\n      kysely: new kysely__WEBPACK_IMPORTED_MODULE_5__.Kysely({ dialect: db.dialect }),\n      databaseType: db.type\n    };\n  }\n  let dialect = void 0;\n  const databaseType = getKyselyDatabaseType(db);\n  if (\"createDriver\" in db) {\n    dialect = db;\n  }\n  if (\"aggregate\" in db && !(\"createSession\" in db)) {\n    dialect = new kysely__WEBPACK_IMPORTED_MODULE_1__.SqliteDialect({\n      database: db\n    });\n  }\n  if (\"getConnection\" in db) {\n    dialect = new kysely__WEBPACK_IMPORTED_MODULE_2__.MysqlDialect(db);\n  }\n  if (\"connect\" in db) {\n    dialect = new kysely__WEBPACK_IMPORTED_MODULE_3__.PostgresDialect({\n      pool: db\n    });\n  }\n  if (\"fileControl\" in db) {\n    const { BunSqliteDialect } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/better-auth\").then(__webpack_require__.bind(__webpack_require__, /*! ../chunks/bun-sqlite-dialect.mjs */ \"(rsc)/./node_modules/better-auth/dist/chunks/bun-sqlite-dialect.mjs\"));\n    dialect = new BunSqliteDialect({\n      database: db\n    });\n  }\n  if (\"createSession\" in db && typeof window === \"undefined\") {\n    let DatabaseSync = void 0;\n    try {\n      ({ DatabaseSync } = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! node:sqlite */ \"node:sqlite\", 19)));\n    } catch (error) {\n      if (error !== null && typeof error === \"object\" && \"code\" in error && error.code !== \"ERR_UNKNOWN_BUILTIN_MODULE\") {\n        throw error;\n      }\n    }\n    if (DatabaseSync && db instanceof DatabaseSync) {\n      const { NodeSqliteDialect } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/better-auth\").then(__webpack_require__.bind(__webpack_require__, /*! ../chunks/node-sqlite-dialect.mjs */ \"(rsc)/./node_modules/better-auth/dist/chunks/node-sqlite-dialect.mjs\"));\n      dialect = new NodeSqliteDialect({\n        database: db\n      });\n    }\n  }\n  return {\n    kysely: dialect ? new kysely__WEBPACK_IMPORTED_MODULE_5__.Kysely({ dialect }) : null,\n    databaseType\n  };\n};\n\nconst kyselyAdapter = (db, config) => (0,_better_auth_BuBqXPUp_mjs__WEBPACK_IMPORTED_MODULE_0__.c)({\n  config: {\n    adapterId: \"kysely\",\n    adapterName: \"Kysely Adapter\",\n    usePlural: config?.usePlural,\n    debugLogs: config?.debugLogs,\n    supportsBooleans: config?.type === \"sqlite\" || config?.type === \"mssql\" || !config?.type ? false : true,\n    supportsDates: config?.type === \"sqlite\" || config?.type === \"mssql\" || !config?.type ? false : true,\n    supportsJSON: false\n  },\n  adapter: ({ getFieldName, schema }) => {\n    const withReturning = async (values, builder, model, where) => {\n      let res;\n      if (config?.type === \"mysql\") {\n        await builder.execute();\n        const field = values.id ? \"id\" : where.length > 0 && where[0].field ? where[0].field : \"id\";\n        if (!values.id && where.length === 0) {\n          res = await db.selectFrom(model).selectAll().orderBy(getFieldName({ model, field }), \"desc\").limit(1).executeTakeFirst();\n          return res;\n        }\n        const value = values[field] || where[0].value;\n        res = await db.selectFrom(model).selectAll().orderBy(getFieldName({ model, field }), \"desc\").where(getFieldName({ model, field }), \"=\", value).limit(1).executeTakeFirst();\n        return res;\n      }\n      if (config?.type === \"mssql\") {\n        res = await builder.outputAll(\"inserted\").executeTakeFirst();\n        return res;\n      }\n      res = await builder.returningAll().executeTakeFirst();\n      return res;\n    };\n    function transformValueToDB(value, model, field) {\n      if (field === \"id\") {\n        return value;\n      }\n      const { type = \"sqlite\" } = config || {};\n      let f = schema[model]?.fields[field];\n      if (!f) {\n        f = Object.values(schema).find((f2) => f2.modelName === model);\n      }\n      if (f.type === \"boolean\" && (type === \"sqlite\" || type === \"mssql\") && value !== null && value !== void 0) {\n        return value ? 1 : 0;\n      }\n      if (f.type === \"date\" && value && value instanceof Date) {\n        return type === \"sqlite\" ? value.toISOString() : value;\n      }\n      return value;\n    }\n    function convertWhereClause(model, w) {\n      if (!w)\n        return {\n          and: null,\n          or: null\n        };\n      const conditions = {\n        and: [],\n        or: []\n      };\n      w.forEach((condition) => {\n        let {\n          field: _field,\n          value,\n          operator = \"=\",\n          connector = \"AND\"\n        } = condition;\n        const field = getFieldName({ model, field: _field });\n        value = transformValueToDB(value, model, _field);\n        const expr = (eb) => {\n          if (operator.toLowerCase() === \"in\") {\n            return eb(field, \"in\", Array.isArray(value) ? value : [value]);\n          }\n          if (operator === \"contains\") {\n            return eb(field, \"like\", `%${value}%`);\n          }\n          if (operator === \"starts_with\") {\n            return eb(field, \"like\", `${value}%`);\n          }\n          if (operator === \"ends_with\") {\n            return eb(field, \"like\", `%${value}`);\n          }\n          if (operator === \"eq\") {\n            return eb(field, \"=\", value);\n          }\n          if (operator === \"ne\") {\n            return eb(field, \"<>\", value);\n          }\n          if (operator === \"gt\") {\n            return eb(field, \">\", value);\n          }\n          if (operator === \"gte\") {\n            return eb(field, \">=\", value);\n          }\n          if (operator === \"lt\") {\n            return eb(field, \"<\", value);\n          }\n          if (operator === \"lte\") {\n            return eb(field, \"<=\", value);\n          }\n          return eb(field, operator, value);\n        };\n        if (connector === \"OR\") {\n          conditions.or.push(expr);\n        } else {\n          conditions.and.push(expr);\n        }\n      });\n      return {\n        and: conditions.and.length ? conditions.and : null,\n        or: conditions.or.length ? conditions.or : null\n      };\n    }\n    return {\n      async create({ data, model }) {\n        const builder = db.insertInto(model).values(data);\n        return await withReturning(data, builder, model, []);\n      },\n      async findOne({ model, where, select }) {\n        const { and, or } = convertWhereClause(model, where);\n        let query = db.selectFrom(model).selectAll();\n        if (and) {\n          query = query.where((eb) => eb.and(and.map((expr) => expr(eb))));\n        }\n        if (or) {\n          query = query.where((eb) => eb.or(or.map((expr) => expr(eb))));\n        }\n        const res = await query.executeTakeFirst();\n        if (!res) return null;\n        return res;\n      },\n      async findMany({ model, where, limit, offset, sortBy }) {\n        const { and, or } = convertWhereClause(model, where);\n        let query = db.selectFrom(model);\n        if (and) {\n          query = query.where((eb) => eb.and(and.map((expr) => expr(eb))));\n        }\n        if (or) {\n          query = query.where((eb) => eb.or(or.map((expr) => expr(eb))));\n        }\n        if (config?.type === \"mssql\") {\n          if (!offset) {\n            query = query.top(limit || 100);\n          }\n        } else {\n          query = query.limit(limit || 100);\n        }\n        if (sortBy) {\n          query = query.orderBy(\n            getFieldName({ model, field: sortBy.field }),\n            sortBy.direction\n          );\n        }\n        if (offset) {\n          if (config?.type === \"mssql\") {\n            if (!sortBy) {\n              query = query.orderBy(getFieldName({ model, field: \"id\" }));\n            }\n            query = query.offset(offset).fetch(limit || 100);\n          } else {\n            query = query.offset(offset);\n          }\n        }\n        const res = await query.selectAll().execute();\n        if (!res) return [];\n        return res;\n      },\n      async update({ model, where, update: values }) {\n        const { and, or } = convertWhereClause(model, where);\n        let query = db.updateTable(model).set(values);\n        if (and) {\n          query = query.where((eb) => eb.and(and.map((expr) => expr(eb))));\n        }\n        if (or) {\n          query = query.where((eb) => eb.or(or.map((expr) => expr(eb))));\n        }\n        return await withReturning(values, query, model, where);\n      },\n      async updateMany({ model, where, update: values }) {\n        const { and, or } = convertWhereClause(model, where);\n        let query = db.updateTable(model).set(values);\n        if (and) {\n          query = query.where((eb) => eb.and(and.map((expr) => expr(eb))));\n        }\n        if (or) {\n          query = query.where((eb) => eb.or(or.map((expr) => expr(eb))));\n        }\n        const res = await query.execute();\n        return res.length;\n      },\n      async count({ model, where }) {\n        const { and, or } = convertWhereClause(model, where);\n        let query = db.selectFrom(model).select(db.fn.count(\"id\").as(\"count\"));\n        if (and) {\n          query = query.where((eb) => eb.and(and.map((expr) => expr(eb))));\n        }\n        if (or) {\n          query = query.where((eb) => eb.or(or.map((expr) => expr(eb))));\n        }\n        const res = await query.execute();\n        return res[0].count;\n      },\n      async delete({ model, where }) {\n        const { and, or } = convertWhereClause(model, where);\n        let query = db.deleteFrom(model);\n        if (and) {\n          query = query.where((eb) => eb.and(and.map((expr) => expr(eb))));\n        }\n        if (or) {\n          query = query.where((eb) => eb.or(or.map((expr) => expr(eb))));\n        }\n        await query.execute();\n      },\n      async deleteMany({ model, where }) {\n        const { and, or } = convertWhereClause(model, where);\n        let query = db.deleteFrom(model);\n        if (and) {\n          query = query.where((eb) => eb.and(and.map((expr) => expr(eb))));\n        }\n        if (or) {\n          query = query.where((eb) => eb.or(or.map((expr) => expr(eb))));\n        }\n        return (await query.execute()).length;\n      },\n      options: config\n    };\n  }\n});\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9zaGFyZWQvYmV0dGVyLWF1dGguQjhiM2xlcDAubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUE0RjtBQUM1Qjs7QUFFaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixpREFBYTtBQUNuQztBQUNBO0FBQ0Esc0JBQXNCLGdEQUFZO0FBQ2xDO0FBQ0E7QUFDQSxzQkFBc0IsbURBQWU7QUFDckM7QUFDQTtBQUNBLHNCQUFzQixnREFBWTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsMENBQU0sR0FBRyxxQkFBcUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGlEQUFhO0FBQy9CO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxrQkFBa0IsZ0RBQVk7QUFDOUI7QUFDQTtBQUNBLGtCQUFrQixtREFBZTtBQUNqQztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWSxtQkFBbUIsUUFBUSxxT0FBMEM7QUFDakY7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsZUFBZSxRQUFRLDRIQUFxQjtBQUNyRCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsb0JBQW9CLFFBQVEsdU9BQTJDO0FBQ3JGO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDBDQUFNLEdBQUcsU0FBUztBQUM1QztBQUNBO0FBQ0E7O0FBRUEsc0NBQXNDLDREQUFhO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEVBQThFLGNBQWM7QUFDNUY7QUFDQTtBQUNBO0FBQ0EsNEVBQTRFLGNBQWMsZ0NBQWdDLGNBQWM7QUFDeEk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLGtCQUFrQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVixxQ0FBcUMsc0JBQXNCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxNQUFNO0FBQy9DO0FBQ0E7QUFDQSx3Q0FBd0MsTUFBTTtBQUM5QztBQUNBO0FBQ0EseUNBQXlDLE1BQU07QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixhQUFhO0FBQ2xDO0FBQ0E7QUFDQSxPQUFPO0FBQ1Asc0JBQXNCLHNCQUFzQjtBQUM1QyxnQkFBZ0IsVUFBVTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCx1QkFBdUIscUNBQXFDO0FBQzVELGdCQUFnQixVQUFVO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsNEJBQTRCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxvQkFBb0I7QUFDdkU7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AscUJBQXFCLDhCQUE4QjtBQUNuRCxnQkFBZ0IsVUFBVTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLHlCQUF5Qiw4QkFBOEI7QUFDdkQsZ0JBQWdCLFVBQVU7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLG9CQUFvQixjQUFjO0FBQ2xDLGdCQUFnQixVQUFVO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxxQkFBcUIsY0FBYztBQUNuQyxnQkFBZ0IsVUFBVTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLHlCQUF5QixjQUFjO0FBQ3ZDLGdCQUFnQixVQUFVO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFbUYiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYW1hYW5cXE9uZURyaXZlXFxEZXNrdG9wXFxLYW5kaWRfMlxcTmV3IGZvbGRlciAoMilcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHNoYXJlZFxcYmV0dGVyLWF1dGguQjhiM2xlcDAubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNxbGl0ZURpYWxlY3QsIE15c3FsRGlhbGVjdCwgUG9zdGdyZXNEaWFsZWN0LCBNc3NxbERpYWxlY3QsIEt5c2VseSB9IGZyb20gJ2t5c2VseSc7XG5pbXBvcnQgeyBjIGFzIGNyZWF0ZUFkYXB0ZXIgfSBmcm9tICcuL2JldHRlci1hdXRoLkJ1QnFYUFVwLm1qcyc7XG5cbmZ1bmN0aW9uIGdldEt5c2VseURhdGFiYXNlVHlwZShkYikge1xuICBpZiAoIWRiKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKFwiZGlhbGVjdFwiIGluIGRiKSB7XG4gICAgcmV0dXJuIGdldEt5c2VseURhdGFiYXNlVHlwZShkYi5kaWFsZWN0KTtcbiAgfVxuICBpZiAoXCJjcmVhdGVEcml2ZXJcIiBpbiBkYikge1xuICAgIGlmIChkYiBpbnN0YW5jZW9mIFNxbGl0ZURpYWxlY3QpIHtcbiAgICAgIHJldHVybiBcInNxbGl0ZVwiO1xuICAgIH1cbiAgICBpZiAoZGIgaW5zdGFuY2VvZiBNeXNxbERpYWxlY3QpIHtcbiAgICAgIHJldHVybiBcIm15c3FsXCI7XG4gICAgfVxuICAgIGlmIChkYiBpbnN0YW5jZW9mIFBvc3RncmVzRGlhbGVjdCkge1xuICAgICAgcmV0dXJuIFwicG9zdGdyZXNcIjtcbiAgICB9XG4gICAgaWYgKGRiIGluc3RhbmNlb2YgTXNzcWxEaWFsZWN0KSB7XG4gICAgICByZXR1cm4gXCJtc3NxbFwiO1xuICAgIH1cbiAgfVxuICBpZiAoXCJhZ2dyZWdhdGVcIiBpbiBkYikge1xuICAgIHJldHVybiBcInNxbGl0ZVwiO1xuICB9XG4gIGlmIChcImdldENvbm5lY3Rpb25cIiBpbiBkYikge1xuICAgIHJldHVybiBcIm15c3FsXCI7XG4gIH1cbiAgaWYgKFwiY29ubmVjdFwiIGluIGRiKSB7XG4gICAgcmV0dXJuIFwicG9zdGdyZXNcIjtcbiAgfVxuICBpZiAoXCJmaWxlQ29udHJvbFwiIGluIGRiKSB7XG4gICAgcmV0dXJuIFwic3FsaXRlXCI7XG4gIH1cbiAgaWYgKFwib3BlblwiIGluIGRiICYmIFwiY2xvc2VcIiBpbiBkYiAmJiBcInByZXBhcmVcIiBpbiBkYikge1xuICAgIHJldHVybiBcInNxbGl0ZVwiO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuY29uc3QgY3JlYXRlS3lzZWx5QWRhcHRlciA9IGFzeW5jIChjb25maWcpID0+IHtcbiAgY29uc3QgZGIgPSBjb25maWcuZGF0YWJhc2U7XG4gIGlmICghZGIpIHtcbiAgICByZXR1cm4ge1xuICAgICAga3lzZWx5OiBudWxsLFxuICAgICAgZGF0YWJhc2VUeXBlOiBudWxsXG4gICAgfTtcbiAgfVxuICBpZiAoXCJkYlwiIGluIGRiKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGt5c2VseTogZGIuZGIsXG4gICAgICBkYXRhYmFzZVR5cGU6IGRiLnR5cGVcbiAgICB9O1xuICB9XG4gIGlmIChcImRpYWxlY3RcIiBpbiBkYikge1xuICAgIHJldHVybiB7XG4gICAgICBreXNlbHk6IG5ldyBLeXNlbHkoeyBkaWFsZWN0OiBkYi5kaWFsZWN0IH0pLFxuICAgICAgZGF0YWJhc2VUeXBlOiBkYi50eXBlXG4gICAgfTtcbiAgfVxuICBsZXQgZGlhbGVjdCA9IHZvaWQgMDtcbiAgY29uc3QgZGF0YWJhc2VUeXBlID0gZ2V0S3lzZWx5RGF0YWJhc2VUeXBlKGRiKTtcbiAgaWYgKFwiY3JlYXRlRHJpdmVyXCIgaW4gZGIpIHtcbiAgICBkaWFsZWN0ID0gZGI7XG4gIH1cbiAgaWYgKFwiYWdncmVnYXRlXCIgaW4gZGIgJiYgIShcImNyZWF0ZVNlc3Npb25cIiBpbiBkYikpIHtcbiAgICBkaWFsZWN0ID0gbmV3IFNxbGl0ZURpYWxlY3Qoe1xuICAgICAgZGF0YWJhc2U6IGRiXG4gICAgfSk7XG4gIH1cbiAgaWYgKFwiZ2V0Q29ubmVjdGlvblwiIGluIGRiKSB7XG4gICAgZGlhbGVjdCA9IG5ldyBNeXNxbERpYWxlY3QoZGIpO1xuICB9XG4gIGlmIChcImNvbm5lY3RcIiBpbiBkYikge1xuICAgIGRpYWxlY3QgPSBuZXcgUG9zdGdyZXNEaWFsZWN0KHtcbiAgICAgIHBvb2w6IGRiXG4gICAgfSk7XG4gIH1cbiAgaWYgKFwiZmlsZUNvbnRyb2xcIiBpbiBkYikge1xuICAgIGNvbnN0IHsgQnVuU3FsaXRlRGlhbGVjdCB9ID0gYXdhaXQgaW1wb3J0KCcuLi9jaHVua3MvYnVuLXNxbGl0ZS1kaWFsZWN0Lm1qcycpO1xuICAgIGRpYWxlY3QgPSBuZXcgQnVuU3FsaXRlRGlhbGVjdCh7XG4gICAgICBkYXRhYmFzZTogZGJcbiAgICB9KTtcbiAgfVxuICBpZiAoXCJjcmVhdGVTZXNzaW9uXCIgaW4gZGIgJiYgdHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIGxldCBEYXRhYmFzZVN5bmMgPSB2b2lkIDA7XG4gICAgdHJ5IHtcbiAgICAgICh7IERhdGFiYXNlU3luYyB9ID0gYXdhaXQgaW1wb3J0KCdub2RlOnNxbGl0ZScpKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yICE9PSBudWxsICYmIHR5cGVvZiBlcnJvciA9PT0gXCJvYmplY3RcIiAmJiBcImNvZGVcIiBpbiBlcnJvciAmJiBlcnJvci5jb2RlICE9PSBcIkVSUl9VTktOT1dOX0JVSUxUSU5fTU9EVUxFXCIpIHtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChEYXRhYmFzZVN5bmMgJiYgZGIgaW5zdGFuY2VvZiBEYXRhYmFzZVN5bmMpIHtcbiAgICAgIGNvbnN0IHsgTm9kZVNxbGl0ZURpYWxlY3QgfSA9IGF3YWl0IGltcG9ydCgnLi4vY2h1bmtzL25vZGUtc3FsaXRlLWRpYWxlY3QubWpzJyk7XG4gICAgICBkaWFsZWN0ID0gbmV3IE5vZGVTcWxpdGVEaWFsZWN0KHtcbiAgICAgICAgZGF0YWJhc2U6IGRiXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBreXNlbHk6IGRpYWxlY3QgPyBuZXcgS3lzZWx5KHsgZGlhbGVjdCB9KSA6IG51bGwsXG4gICAgZGF0YWJhc2VUeXBlXG4gIH07XG59O1xuXG5jb25zdCBreXNlbHlBZGFwdGVyID0gKGRiLCBjb25maWcpID0+IGNyZWF0ZUFkYXB0ZXIoe1xuICBjb25maWc6IHtcbiAgICBhZGFwdGVySWQ6IFwia3lzZWx5XCIsXG4gICAgYWRhcHRlck5hbWU6IFwiS3lzZWx5IEFkYXB0ZXJcIixcbiAgICB1c2VQbHVyYWw6IGNvbmZpZz8udXNlUGx1cmFsLFxuICAgIGRlYnVnTG9nczogY29uZmlnPy5kZWJ1Z0xvZ3MsXG4gICAgc3VwcG9ydHNCb29sZWFuczogY29uZmlnPy50eXBlID09PSBcInNxbGl0ZVwiIHx8IGNvbmZpZz8udHlwZSA9PT0gXCJtc3NxbFwiIHx8ICFjb25maWc/LnR5cGUgPyBmYWxzZSA6IHRydWUsXG4gICAgc3VwcG9ydHNEYXRlczogY29uZmlnPy50eXBlID09PSBcInNxbGl0ZVwiIHx8IGNvbmZpZz8udHlwZSA9PT0gXCJtc3NxbFwiIHx8ICFjb25maWc/LnR5cGUgPyBmYWxzZSA6IHRydWUsXG4gICAgc3VwcG9ydHNKU09OOiBmYWxzZVxuICB9LFxuICBhZGFwdGVyOiAoeyBnZXRGaWVsZE5hbWUsIHNjaGVtYSB9KSA9PiB7XG4gICAgY29uc3Qgd2l0aFJldHVybmluZyA9IGFzeW5jICh2YWx1ZXMsIGJ1aWxkZXIsIG1vZGVsLCB3aGVyZSkgPT4ge1xuICAgICAgbGV0IHJlcztcbiAgICAgIGlmIChjb25maWc/LnR5cGUgPT09IFwibXlzcWxcIikge1xuICAgICAgICBhd2FpdCBidWlsZGVyLmV4ZWN1dGUoKTtcbiAgICAgICAgY29uc3QgZmllbGQgPSB2YWx1ZXMuaWQgPyBcImlkXCIgOiB3aGVyZS5sZW5ndGggPiAwICYmIHdoZXJlWzBdLmZpZWxkID8gd2hlcmVbMF0uZmllbGQgOiBcImlkXCI7XG4gICAgICAgIGlmICghdmFsdWVzLmlkICYmIHdoZXJlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHJlcyA9IGF3YWl0IGRiLnNlbGVjdEZyb20obW9kZWwpLnNlbGVjdEFsbCgpLm9yZGVyQnkoZ2V0RmllbGROYW1lKHsgbW9kZWwsIGZpZWxkIH0pLCBcImRlc2NcIikubGltaXQoMSkuZXhlY3V0ZVRha2VGaXJzdCgpO1xuICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmFsdWUgPSB2YWx1ZXNbZmllbGRdIHx8IHdoZXJlWzBdLnZhbHVlO1xuICAgICAgICByZXMgPSBhd2FpdCBkYi5zZWxlY3RGcm9tKG1vZGVsKS5zZWxlY3RBbGwoKS5vcmRlckJ5KGdldEZpZWxkTmFtZSh7IG1vZGVsLCBmaWVsZCB9KSwgXCJkZXNjXCIpLndoZXJlKGdldEZpZWxkTmFtZSh7IG1vZGVsLCBmaWVsZCB9KSwgXCI9XCIsIHZhbHVlKS5saW1pdCgxKS5leGVjdXRlVGFrZUZpcnN0KCk7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgICB9XG4gICAgICBpZiAoY29uZmlnPy50eXBlID09PSBcIm1zc3FsXCIpIHtcbiAgICAgICAgcmVzID0gYXdhaXQgYnVpbGRlci5vdXRwdXRBbGwoXCJpbnNlcnRlZFwiKS5leGVjdXRlVGFrZUZpcnN0KCk7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgICB9XG4gICAgICByZXMgPSBhd2FpdCBidWlsZGVyLnJldHVybmluZ0FsbCgpLmV4ZWN1dGVUYWtlRmlyc3QoKTtcbiAgICAgIHJldHVybiByZXM7XG4gICAgfTtcbiAgICBmdW5jdGlvbiB0cmFuc2Zvcm1WYWx1ZVRvREIodmFsdWUsIG1vZGVsLCBmaWVsZCkge1xuICAgICAgaWYgKGZpZWxkID09PSBcImlkXCIpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgICAgY29uc3QgeyB0eXBlID0gXCJzcWxpdGVcIiB9ID0gY29uZmlnIHx8IHt9O1xuICAgICAgbGV0IGYgPSBzY2hlbWFbbW9kZWxdPy5maWVsZHNbZmllbGRdO1xuICAgICAgaWYgKCFmKSB7XG4gICAgICAgIGYgPSBPYmplY3QudmFsdWVzKHNjaGVtYSkuZmluZCgoZjIpID0+IGYyLm1vZGVsTmFtZSA9PT0gbW9kZWwpO1xuICAgICAgfVxuICAgICAgaWYgKGYudHlwZSA9PT0gXCJib29sZWFuXCIgJiYgKHR5cGUgPT09IFwic3FsaXRlXCIgfHwgdHlwZSA9PT0gXCJtc3NxbFwiKSAmJiB2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZSA/IDEgOiAwO1xuICAgICAgfVxuICAgICAgaWYgKGYudHlwZSA9PT0gXCJkYXRlXCIgJiYgdmFsdWUgJiYgdmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgIHJldHVybiB0eXBlID09PSBcInNxbGl0ZVwiID8gdmFsdWUudG9JU09TdHJpbmcoKSA6IHZhbHVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjb252ZXJ0V2hlcmVDbGF1c2UobW9kZWwsIHcpIHtcbiAgICAgIGlmICghdylcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBhbmQ6IG51bGwsXG4gICAgICAgICAgb3I6IG51bGxcbiAgICAgICAgfTtcbiAgICAgIGNvbnN0IGNvbmRpdGlvbnMgPSB7XG4gICAgICAgIGFuZDogW10sXG4gICAgICAgIG9yOiBbXVxuICAgICAgfTtcbiAgICAgIHcuZm9yRWFjaCgoY29uZGl0aW9uKSA9PiB7XG4gICAgICAgIGxldCB7XG4gICAgICAgICAgZmllbGQ6IF9maWVsZCxcbiAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICBvcGVyYXRvciA9IFwiPVwiLFxuICAgICAgICAgIGNvbm5lY3RvciA9IFwiQU5EXCJcbiAgICAgICAgfSA9IGNvbmRpdGlvbjtcbiAgICAgICAgY29uc3QgZmllbGQgPSBnZXRGaWVsZE5hbWUoeyBtb2RlbCwgZmllbGQ6IF9maWVsZCB9KTtcbiAgICAgICAgdmFsdWUgPSB0cmFuc2Zvcm1WYWx1ZVRvREIodmFsdWUsIG1vZGVsLCBfZmllbGQpO1xuICAgICAgICBjb25zdCBleHByID0gKGViKSA9PiB7XG4gICAgICAgICAgaWYgKG9wZXJhdG9yLnRvTG93ZXJDYXNlKCkgPT09IFwiaW5cIikge1xuICAgICAgICAgICAgcmV0dXJuIGViKGZpZWxkLCBcImluXCIsIEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBbdmFsdWVdKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKG9wZXJhdG9yID09PSBcImNvbnRhaW5zXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBlYihmaWVsZCwgXCJsaWtlXCIsIGAlJHt2YWx1ZX0lYCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChvcGVyYXRvciA9PT0gXCJzdGFydHNfd2l0aFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gZWIoZmllbGQsIFwibGlrZVwiLCBgJHt2YWx1ZX0lYCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChvcGVyYXRvciA9PT0gXCJlbmRzX3dpdGhcIikge1xuICAgICAgICAgICAgcmV0dXJuIGViKGZpZWxkLCBcImxpa2VcIiwgYCUke3ZhbHVlfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAob3BlcmF0b3IgPT09IFwiZXFcIikge1xuICAgICAgICAgICAgcmV0dXJuIGViKGZpZWxkLCBcIj1cIiwgdmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAob3BlcmF0b3IgPT09IFwibmVcIikge1xuICAgICAgICAgICAgcmV0dXJuIGViKGZpZWxkLCBcIjw+XCIsIHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKG9wZXJhdG9yID09PSBcImd0XCIpIHtcbiAgICAgICAgICAgIHJldHVybiBlYihmaWVsZCwgXCI+XCIsIHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKG9wZXJhdG9yID09PSBcImd0ZVwiKSB7XG4gICAgICAgICAgICByZXR1cm4gZWIoZmllbGQsIFwiPj1cIiwgdmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAob3BlcmF0b3IgPT09IFwibHRcIikge1xuICAgICAgICAgICAgcmV0dXJuIGViKGZpZWxkLCBcIjxcIiwgdmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAob3BlcmF0b3IgPT09IFwibHRlXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBlYihmaWVsZCwgXCI8PVwiLCB2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBlYihmaWVsZCwgb3BlcmF0b3IsIHZhbHVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGNvbm5lY3RvciA9PT0gXCJPUlwiKSB7XG4gICAgICAgICAgY29uZGl0aW9ucy5vci5wdXNoKGV4cHIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbmRpdGlvbnMuYW5kLnB1c2goZXhwcik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYW5kOiBjb25kaXRpb25zLmFuZC5sZW5ndGggPyBjb25kaXRpb25zLmFuZCA6IG51bGwsXG4gICAgICAgIG9yOiBjb25kaXRpb25zLm9yLmxlbmd0aCA/IGNvbmRpdGlvbnMub3IgOiBudWxsXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgYXN5bmMgY3JlYXRlKHsgZGF0YSwgbW9kZWwgfSkge1xuICAgICAgICBjb25zdCBidWlsZGVyID0gZGIuaW5zZXJ0SW50byhtb2RlbCkudmFsdWVzKGRhdGEpO1xuICAgICAgICByZXR1cm4gYXdhaXQgd2l0aFJldHVybmluZyhkYXRhLCBidWlsZGVyLCBtb2RlbCwgW10pO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIGZpbmRPbmUoeyBtb2RlbCwgd2hlcmUsIHNlbGVjdCB9KSB7XG4gICAgICAgIGNvbnN0IHsgYW5kLCBvciB9ID0gY29udmVydFdoZXJlQ2xhdXNlKG1vZGVsLCB3aGVyZSk7XG4gICAgICAgIGxldCBxdWVyeSA9IGRiLnNlbGVjdEZyb20obW9kZWwpLnNlbGVjdEFsbCgpO1xuICAgICAgICBpZiAoYW5kKSB7XG4gICAgICAgICAgcXVlcnkgPSBxdWVyeS53aGVyZSgoZWIpID0+IGViLmFuZChhbmQubWFwKChleHByKSA9PiBleHByKGViKSkpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3IpIHtcbiAgICAgICAgICBxdWVyeSA9IHF1ZXJ5LndoZXJlKChlYikgPT4gZWIub3Iob3IubWFwKChleHByKSA9PiBleHByKGViKSkpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBxdWVyeS5leGVjdXRlVGFrZUZpcnN0KCk7XG4gICAgICAgIGlmICghcmVzKSByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgIH0sXG4gICAgICBhc3luYyBmaW5kTWFueSh7IG1vZGVsLCB3aGVyZSwgbGltaXQsIG9mZnNldCwgc29ydEJ5IH0pIHtcbiAgICAgICAgY29uc3QgeyBhbmQsIG9yIH0gPSBjb252ZXJ0V2hlcmVDbGF1c2UobW9kZWwsIHdoZXJlKTtcbiAgICAgICAgbGV0IHF1ZXJ5ID0gZGIuc2VsZWN0RnJvbShtb2RlbCk7XG4gICAgICAgIGlmIChhbmQpIHtcbiAgICAgICAgICBxdWVyeSA9IHF1ZXJ5LndoZXJlKChlYikgPT4gZWIuYW5kKGFuZC5tYXAoKGV4cHIpID0+IGV4cHIoZWIpKSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcikge1xuICAgICAgICAgIHF1ZXJ5ID0gcXVlcnkud2hlcmUoKGViKSA9PiBlYi5vcihvci5tYXAoKGV4cHIpID0+IGV4cHIoZWIpKSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb25maWc/LnR5cGUgPT09IFwibXNzcWxcIikge1xuICAgICAgICAgIGlmICghb2Zmc2V0KSB7XG4gICAgICAgICAgICBxdWVyeSA9IHF1ZXJ5LnRvcChsaW1pdCB8fCAxMDApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBxdWVyeSA9IHF1ZXJ5LmxpbWl0KGxpbWl0IHx8IDEwMCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNvcnRCeSkge1xuICAgICAgICAgIHF1ZXJ5ID0gcXVlcnkub3JkZXJCeShcbiAgICAgICAgICAgIGdldEZpZWxkTmFtZSh7IG1vZGVsLCBmaWVsZDogc29ydEJ5LmZpZWxkIH0pLFxuICAgICAgICAgICAgc29ydEJ5LmRpcmVjdGlvblxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9mZnNldCkge1xuICAgICAgICAgIGlmIChjb25maWc/LnR5cGUgPT09IFwibXNzcWxcIikge1xuICAgICAgICAgICAgaWYgKCFzb3J0QnkpIHtcbiAgICAgICAgICAgICAgcXVlcnkgPSBxdWVyeS5vcmRlckJ5KGdldEZpZWxkTmFtZSh7IG1vZGVsLCBmaWVsZDogXCJpZFwiIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHF1ZXJ5ID0gcXVlcnkub2Zmc2V0KG9mZnNldCkuZmV0Y2gobGltaXQgfHwgMTAwKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcXVlcnkgPSBxdWVyeS5vZmZzZXQob2Zmc2V0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgcXVlcnkuc2VsZWN0QWxsKCkuZXhlY3V0ZSgpO1xuICAgICAgICBpZiAoIXJlcykgcmV0dXJuIFtdO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIHVwZGF0ZSh7IG1vZGVsLCB3aGVyZSwgdXBkYXRlOiB2YWx1ZXMgfSkge1xuICAgICAgICBjb25zdCB7IGFuZCwgb3IgfSA9IGNvbnZlcnRXaGVyZUNsYXVzZShtb2RlbCwgd2hlcmUpO1xuICAgICAgICBsZXQgcXVlcnkgPSBkYi51cGRhdGVUYWJsZShtb2RlbCkuc2V0KHZhbHVlcyk7XG4gICAgICAgIGlmIChhbmQpIHtcbiAgICAgICAgICBxdWVyeSA9IHF1ZXJ5LndoZXJlKChlYikgPT4gZWIuYW5kKGFuZC5tYXAoKGV4cHIpID0+IGV4cHIoZWIpKSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcikge1xuICAgICAgICAgIHF1ZXJ5ID0gcXVlcnkud2hlcmUoKGViKSA9PiBlYi5vcihvci5tYXAoKGV4cHIpID0+IGV4cHIoZWIpKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhd2FpdCB3aXRoUmV0dXJuaW5nKHZhbHVlcywgcXVlcnksIG1vZGVsLCB3aGVyZSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgdXBkYXRlTWFueSh7IG1vZGVsLCB3aGVyZSwgdXBkYXRlOiB2YWx1ZXMgfSkge1xuICAgICAgICBjb25zdCB7IGFuZCwgb3IgfSA9IGNvbnZlcnRXaGVyZUNsYXVzZShtb2RlbCwgd2hlcmUpO1xuICAgICAgICBsZXQgcXVlcnkgPSBkYi51cGRhdGVUYWJsZShtb2RlbCkuc2V0KHZhbHVlcyk7XG4gICAgICAgIGlmIChhbmQpIHtcbiAgICAgICAgICBxdWVyeSA9IHF1ZXJ5LndoZXJlKChlYikgPT4gZWIuYW5kKGFuZC5tYXAoKGV4cHIpID0+IGV4cHIoZWIpKSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcikge1xuICAgICAgICAgIHF1ZXJ5ID0gcXVlcnkud2hlcmUoKGViKSA9PiBlYi5vcihvci5tYXAoKGV4cHIpID0+IGV4cHIoZWIpKSkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHF1ZXJ5LmV4ZWN1dGUoKTtcbiAgICAgICAgcmV0dXJuIHJlcy5sZW5ndGg7XG4gICAgICB9LFxuICAgICAgYXN5bmMgY291bnQoeyBtb2RlbCwgd2hlcmUgfSkge1xuICAgICAgICBjb25zdCB7IGFuZCwgb3IgfSA9IGNvbnZlcnRXaGVyZUNsYXVzZShtb2RlbCwgd2hlcmUpO1xuICAgICAgICBsZXQgcXVlcnkgPSBkYi5zZWxlY3RGcm9tKG1vZGVsKS5zZWxlY3QoZGIuZm4uY291bnQoXCJpZFwiKS5hcyhcImNvdW50XCIpKTtcbiAgICAgICAgaWYgKGFuZCkge1xuICAgICAgICAgIHF1ZXJ5ID0gcXVlcnkud2hlcmUoKGViKSA9PiBlYi5hbmQoYW5kLm1hcCgoZXhwcikgPT4gZXhwcihlYikpKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9yKSB7XG4gICAgICAgICAgcXVlcnkgPSBxdWVyeS53aGVyZSgoZWIpID0+IGViLm9yKG9yLm1hcCgoZXhwcikgPT4gZXhwcihlYikpKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgcXVlcnkuZXhlY3V0ZSgpO1xuICAgICAgICByZXR1cm4gcmVzWzBdLmNvdW50O1xuICAgICAgfSxcbiAgICAgIGFzeW5jIGRlbGV0ZSh7IG1vZGVsLCB3aGVyZSB9KSB7XG4gICAgICAgIGNvbnN0IHsgYW5kLCBvciB9ID0gY29udmVydFdoZXJlQ2xhdXNlKG1vZGVsLCB3aGVyZSk7XG4gICAgICAgIGxldCBxdWVyeSA9IGRiLmRlbGV0ZUZyb20obW9kZWwpO1xuICAgICAgICBpZiAoYW5kKSB7XG4gICAgICAgICAgcXVlcnkgPSBxdWVyeS53aGVyZSgoZWIpID0+IGViLmFuZChhbmQubWFwKChleHByKSA9PiBleHByKGViKSkpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3IpIHtcbiAgICAgICAgICBxdWVyeSA9IHF1ZXJ5LndoZXJlKChlYikgPT4gZWIub3Iob3IubWFwKChleHByKSA9PiBleHByKGViKSkpKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBxdWVyeS5leGVjdXRlKCk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgZGVsZXRlTWFueSh7IG1vZGVsLCB3aGVyZSB9KSB7XG4gICAgICAgIGNvbnN0IHsgYW5kLCBvciB9ID0gY29udmVydFdoZXJlQ2xhdXNlKG1vZGVsLCB3aGVyZSk7XG4gICAgICAgIGxldCBxdWVyeSA9IGRiLmRlbGV0ZUZyb20obW9kZWwpO1xuICAgICAgICBpZiAoYW5kKSB7XG4gICAgICAgICAgcXVlcnkgPSBxdWVyeS53aGVyZSgoZWIpID0+IGViLmFuZChhbmQubWFwKChleHByKSA9PiBleHByKGViKSkpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3IpIHtcbiAgICAgICAgICBxdWVyeSA9IHF1ZXJ5LndoZXJlKChlYikgPT4gZWIub3Iob3IubWFwKChleHByKSA9PiBleHByKGViKSkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKGF3YWl0IHF1ZXJ5LmV4ZWN1dGUoKSkubGVuZ3RoO1xuICAgICAgfSxcbiAgICAgIG9wdGlvbnM6IGNvbmZpZ1xuICAgIH07XG4gIH1cbn0pO1xuXG5leHBvcnQgeyBjcmVhdGVLeXNlbHlBZGFwdGVyIGFzIGMsIGdldEt5c2VseURhdGFiYXNlVHlwZSBhcyBnLCBreXNlbHlBZGFwdGVyIGFzIGsgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/shared/better-auth.B8b3lep0.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/shared/better-auth.BUPPRXfK.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/shared/better-auth.BUPPRXfK.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   g: () => (/* binding */ generateId)\n/* harmony export */ });\n/* harmony import */ var _better_auth_utils_random__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/utils/random */ \"(rsc)/./node_modules/@better-auth/utils/dist/random.mjs\");\n\n\nconst generateId = (size) => {\n  return (0,_better_auth_utils_random__WEBPACK_IMPORTED_MODULE_0__.createRandomStringGenerator)(\"a-z\", \"A-Z\", \"0-9\")(size || 32);\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9zaGFyZWQvYmV0dGVyLWF1dGguQlVQUFJYZksubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXdFOztBQUV4RTtBQUNBLFNBQVMsc0ZBQTJCO0FBQ3BDOztBQUUyQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhbWFhblxcT25lRHJpdmVcXERlc2t0b3BcXEthbmRpZF8yXFxOZXcgZm9sZGVyICgyKVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcc2hhcmVkXFxiZXR0ZXItYXV0aC5CVVBQUlhmSy5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlUmFuZG9tU3RyaW5nR2VuZXJhdG9yIH0gZnJvbSAnQGJldHRlci1hdXRoL3V0aWxzL3JhbmRvbSc7XG5cbmNvbnN0IGdlbmVyYXRlSWQgPSAoc2l6ZSkgPT4ge1xuICByZXR1cm4gY3JlYXRlUmFuZG9tU3RyaW5nR2VuZXJhdG9yKFwiYS16XCIsIFwiQS1aXCIsIFwiMC05XCIpKHNpemUgfHwgMzIpO1xufTtcblxuZXhwb3J0IHsgZ2VuZXJhdGVJZCBhcyBnIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/shared/better-auth.BUPPRXfK.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/shared/better-auth.BZZKN1g7.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/shared/better-auth.BZZKN1g7.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   s: () => (/* binding */ safeJSONParse)\n/* harmony export */ });\n/* harmony import */ var _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./better-auth.BjBlybv-.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.BjBlybv-.mjs\");\n\n\nfunction safeJSONParse(data) {\n  function reviver(_, value) {\n    if (typeof value === \"string\") {\n      const iso8601Regex = /^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(?:\\.\\d+)?Z$/;\n      if (iso8601Regex.test(value)) {\n        const date = new Date(value);\n        if (!isNaN(date.getTime())) {\n          return date;\n        }\n      }\n    }\n    return value;\n  }\n  try {\n    if (typeof data !== \"string\") {\n      return data;\n    }\n    return JSON.parse(data, reviver);\n  } catch (e) {\n    _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_0__.a.error(\"Error parsing JSON\", { error: e });\n    return null;\n  }\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9zaGFyZWQvYmV0dGVyLWF1dGguQlpaS04xZzcubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXlEOztBQUV6RDtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osSUFBSSx1REFBTSwrQkFBK0IsVUFBVTtBQUNuRDtBQUNBO0FBQ0E7O0FBRThCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFtYWFuXFxPbmVEcml2ZVxcRGVza3RvcFxcS2FuZGlkXzJcXE5ldyBmb2xkZXIgKDIpXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxzaGFyZWRcXGJldHRlci1hdXRoLkJaWktOMWc3Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhIGFzIGxvZ2dlciB9IGZyb20gJy4vYmV0dGVyLWF1dGguQmpCbHlidi0ubWpzJztcblxuZnVuY3Rpb24gc2FmZUpTT05QYXJzZShkYXRhKSB7XG4gIGZ1bmN0aW9uIHJldml2ZXIoXywgdmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBjb25zdCBpc284NjAxUmVnZXggPSAvXlxcZHs0fS1cXGR7Mn0tXFxkezJ9VFxcZHsyfTpcXGR7Mn06XFxkezJ9KD86XFwuXFxkKyk/WiQvO1xuICAgICAgaWYgKGlzbzg2MDFSZWdleC50ZXN0KHZhbHVlKSkge1xuICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodmFsdWUpO1xuICAgICAgICBpZiAoIWlzTmFOKGRhdGUuZ2V0VGltZSgpKSkge1xuICAgICAgICAgIHJldHVybiBkYXRlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICB0cnkge1xuICAgIGlmICh0eXBlb2YgZGF0YSAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuICAgIHJldHVybiBKU09OLnBhcnNlKGRhdGEsIHJldml2ZXIpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgbG9nZ2VyLmVycm9yKFwiRXJyb3IgcGFyc2luZyBKU09OXCIsIHsgZXJyb3I6IGUgfSk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IHsgc2FmZUpTT05QYXJzZSBhcyBzIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/shared/better-auth.BZZKN1g7.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/shared/better-auth.B_PTVODM.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/shared/better-auth.B_PTVODM.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   g: () => (/* binding */ getAuthTables)\n/* harmony export */ });\nconst getAuthTables = (options) => {\n  const pluginSchema = (options.plugins ?? []).reduce(\n    (acc, plugin) => {\n      const schema = plugin.schema;\n      if (!schema) return acc;\n      for (const [key, value] of Object.entries(schema)) {\n        acc[key] = {\n          fields: {\n            ...acc[key]?.fields,\n            ...value.fields\n          },\n          modelName: value.modelName || key\n        };\n      }\n      return acc;\n    },\n    {}\n  );\n  const shouldAddRateLimitTable = options.rateLimit?.storage === \"database\";\n  const rateLimitTable = {\n    rateLimit: {\n      modelName: options.rateLimit?.modelName || \"rateLimit\",\n      fields: {\n        key: {\n          type: \"string\",\n          fieldName: options.rateLimit?.fields?.key || \"key\"\n        },\n        count: {\n          type: \"number\",\n          fieldName: options.rateLimit?.fields?.count || \"count\"\n        },\n        lastRequest: {\n          type: \"number\",\n          bigint: true,\n          fieldName: options.rateLimit?.fields?.lastRequest || \"lastRequest\"\n        }\n      }\n    }\n  };\n  const { user, session, account, ...pluginTables } = pluginSchema;\n  const sessionTable = {\n    session: {\n      modelName: options.session?.modelName || \"session\",\n      fields: {\n        expiresAt: {\n          type: \"date\",\n          required: true,\n          fieldName: options.session?.fields?.expiresAt || \"expiresAt\"\n        },\n        token: {\n          type: \"string\",\n          required: true,\n          fieldName: options.session?.fields?.token || \"token\",\n          unique: true\n        },\n        createdAt: {\n          type: \"date\",\n          required: true,\n          fieldName: options.session?.fields?.createdAt || \"createdAt\",\n          defaultValue: () => /* @__PURE__ */ new Date()\n        },\n        updatedAt: {\n          type: \"date\",\n          required: true,\n          fieldName: options.session?.fields?.updatedAt || \"updatedAt\",\n          onUpdate: () => /* @__PURE__ */ new Date()\n        },\n        ipAddress: {\n          type: \"string\",\n          required: false,\n          fieldName: options.session?.fields?.ipAddress || \"ipAddress\"\n        },\n        userAgent: {\n          type: \"string\",\n          required: false,\n          fieldName: options.session?.fields?.userAgent || \"userAgent\"\n        },\n        userId: {\n          type: \"string\",\n          fieldName: options.session?.fields?.userId || \"userId\",\n          references: {\n            model: options.user?.modelName || \"user\",\n            field: \"id\",\n            onDelete: \"cascade\"\n          },\n          required: true\n        },\n        ...session?.fields,\n        ...options.session?.additionalFields\n      },\n      order: 2\n    }\n  };\n  return {\n    user: {\n      modelName: options.user?.modelName || \"user\",\n      fields: {\n        name: {\n          type: \"string\",\n          required: true,\n          fieldName: options.user?.fields?.name || \"name\",\n          sortable: true\n        },\n        email: {\n          type: \"string\",\n          unique: true,\n          required: true,\n          fieldName: options.user?.fields?.email || \"email\",\n          sortable: true\n        },\n        emailVerified: {\n          type: \"boolean\",\n          defaultValue: false,\n          required: true,\n          fieldName: options.user?.fields?.emailVerified || \"emailVerified\"\n        },\n        image: {\n          type: \"string\",\n          required: false,\n          fieldName: options.user?.fields?.image || \"image\"\n        },\n        createdAt: {\n          type: \"date\",\n          defaultValue: () => /* @__PURE__ */ new Date(),\n          required: true,\n          fieldName: options.user?.fields?.createdAt || \"createdAt\"\n        },\n        updatedAt: {\n          type: \"date\",\n          defaultValue: () => /* @__PURE__ */ new Date(),\n          onUpdate: () => /* @__PURE__ */ new Date(),\n          required: true,\n          fieldName: options.user?.fields?.updatedAt || \"updatedAt\"\n        },\n        ...user?.fields,\n        ...options.user?.additionalFields\n      },\n      order: 1\n    },\n    //only add session table if it's not stored in secondary storage\n    ...!options.secondaryStorage || options.session?.storeSessionInDatabase ? sessionTable : {},\n    account: {\n      modelName: options.account?.modelName || \"account\",\n      fields: {\n        accountId: {\n          type: \"string\",\n          required: true,\n          fieldName: options.account?.fields?.accountId || \"accountId\"\n        },\n        providerId: {\n          type: \"string\",\n          required: true,\n          fieldName: options.account?.fields?.providerId || \"providerId\"\n        },\n        userId: {\n          type: \"string\",\n          references: {\n            model: options.user?.modelName || \"user\",\n            field: \"id\",\n            onDelete: \"cascade\"\n          },\n          required: true,\n          fieldName: options.account?.fields?.userId || \"userId\"\n        },\n        accessToken: {\n          type: \"string\",\n          required: false,\n          fieldName: options.account?.fields?.accessToken || \"accessToken\"\n        },\n        refreshToken: {\n          type: \"string\",\n          required: false,\n          fieldName: options.account?.fields?.refreshToken || \"refreshToken\"\n        },\n        idToken: {\n          type: \"string\",\n          required: false,\n          fieldName: options.account?.fields?.idToken || \"idToken\"\n        },\n        accessTokenExpiresAt: {\n          type: \"date\",\n          required: false,\n          fieldName: options.account?.fields?.accessTokenExpiresAt || \"accessTokenExpiresAt\"\n        },\n        refreshTokenExpiresAt: {\n          type: \"date\",\n          required: false,\n          fieldName: options.account?.fields?.accessTokenExpiresAt || \"refreshTokenExpiresAt\"\n        },\n        scope: {\n          type: \"string\",\n          required: false,\n          fieldName: options.account?.fields?.scope || \"scope\"\n        },\n        password: {\n          type: \"string\",\n          required: false,\n          fieldName: options.account?.fields?.password || \"password\"\n        },\n        createdAt: {\n          type: \"date\",\n          required: true,\n          fieldName: options.account?.fields?.createdAt || \"createdAt\",\n          defaultValue: () => /* @__PURE__ */ new Date()\n        },\n        updatedAt: {\n          type: \"date\",\n          required: true,\n          fieldName: options.account?.fields?.updatedAt || \"updatedAt\",\n          onUpdate: () => /* @__PURE__ */ new Date()\n        },\n        ...account?.fields\n      },\n      order: 3\n    },\n    verification: {\n      modelName: options.verification?.modelName || \"verification\",\n      fields: {\n        identifier: {\n          type: \"string\",\n          required: true,\n          fieldName: options.verification?.fields?.identifier || \"identifier\"\n        },\n        value: {\n          type: \"string\",\n          required: true,\n          fieldName: options.verification?.fields?.value || \"value\"\n        },\n        expiresAt: {\n          type: \"date\",\n          required: true,\n          fieldName: options.verification?.fields?.expiresAt || \"expiresAt\"\n        },\n        createdAt: {\n          type: \"date\",\n          required: true,\n          defaultValue: () => /* @__PURE__ */ new Date(),\n          fieldName: options.verification?.fields?.createdAt || \"createdAt\"\n        },\n        updatedAt: {\n          type: \"date\",\n          required: true,\n          defaultValue: () => /* @__PURE__ */ new Date(),\n          onUpdate: () => /* @__PURE__ */ new Date(),\n          fieldName: options.verification?.fields?.updatedAt || \"updatedAt\"\n        }\n      },\n      order: 4\n    },\n    ...pluginTables,\n    ...shouldAddRateLimitTable ? rateLimitTable : {}\n  };\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9zaGFyZWQvYmV0dGVyLWF1dGguQl9QVFZPRE0ubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsMENBQTBDO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBLCtGQUErRjtBQUMvRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFOEIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYW1hYW5cXE9uZURyaXZlXFxEZXNrdG9wXFxLYW5kaWRfMlxcTmV3IGZvbGRlciAoMilcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHNoYXJlZFxcYmV0dGVyLWF1dGguQl9QVFZPRE0ubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGdldEF1dGhUYWJsZXMgPSAob3B0aW9ucykgPT4ge1xuICBjb25zdCBwbHVnaW5TY2hlbWEgPSAob3B0aW9ucy5wbHVnaW5zID8/IFtdKS5yZWR1Y2UoXG4gICAgKGFjYywgcGx1Z2luKSA9PiB7XG4gICAgICBjb25zdCBzY2hlbWEgPSBwbHVnaW4uc2NoZW1hO1xuICAgICAgaWYgKCFzY2hlbWEpIHJldHVybiBhY2M7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhzY2hlbWEpKSB7XG4gICAgICAgIGFjY1trZXldID0ge1xuICAgICAgICAgIGZpZWxkczoge1xuICAgICAgICAgICAgLi4uYWNjW2tleV0/LmZpZWxkcyxcbiAgICAgICAgICAgIC4uLnZhbHVlLmZpZWxkc1xuICAgICAgICAgIH0sXG4gICAgICAgICAgbW9kZWxOYW1lOiB2YWx1ZS5tb2RlbE5hbWUgfHwga2V5XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICByZXR1cm4gYWNjO1xuICAgIH0sXG4gICAge31cbiAgKTtcbiAgY29uc3Qgc2hvdWxkQWRkUmF0ZUxpbWl0VGFibGUgPSBvcHRpb25zLnJhdGVMaW1pdD8uc3RvcmFnZSA9PT0gXCJkYXRhYmFzZVwiO1xuICBjb25zdCByYXRlTGltaXRUYWJsZSA9IHtcbiAgICByYXRlTGltaXQ6IHtcbiAgICAgIG1vZGVsTmFtZTogb3B0aW9ucy5yYXRlTGltaXQ/Lm1vZGVsTmFtZSB8fCBcInJhdGVMaW1pdFwiLFxuICAgICAgZmllbGRzOiB7XG4gICAgICAgIGtleToge1xuICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgZmllbGROYW1lOiBvcHRpb25zLnJhdGVMaW1pdD8uZmllbGRzPy5rZXkgfHwgXCJrZXlcIlxuICAgICAgICB9LFxuICAgICAgICBjb3VudDoge1xuICAgICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXG4gICAgICAgICAgZmllbGROYW1lOiBvcHRpb25zLnJhdGVMaW1pdD8uZmllbGRzPy5jb3VudCB8fCBcImNvdW50XCJcbiAgICAgICAgfSxcbiAgICAgICAgbGFzdFJlcXVlc3Q6IHtcbiAgICAgICAgICB0eXBlOiBcIm51bWJlclwiLFxuICAgICAgICAgIGJpZ2ludDogdHJ1ZSxcbiAgICAgICAgICBmaWVsZE5hbWU6IG9wdGlvbnMucmF0ZUxpbWl0Py5maWVsZHM/Lmxhc3RSZXF1ZXN0IHx8IFwibGFzdFJlcXVlc3RcIlxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBjb25zdCB7IHVzZXIsIHNlc3Npb24sIGFjY291bnQsIC4uLnBsdWdpblRhYmxlcyB9ID0gcGx1Z2luU2NoZW1hO1xuICBjb25zdCBzZXNzaW9uVGFibGUgPSB7XG4gICAgc2Vzc2lvbjoge1xuICAgICAgbW9kZWxOYW1lOiBvcHRpb25zLnNlc3Npb24/Lm1vZGVsTmFtZSB8fCBcInNlc3Npb25cIixcbiAgICAgIGZpZWxkczoge1xuICAgICAgICBleHBpcmVzQXQ6IHtcbiAgICAgICAgICB0eXBlOiBcImRhdGVcIixcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICBmaWVsZE5hbWU6IG9wdGlvbnMuc2Vzc2lvbj8uZmllbGRzPy5leHBpcmVzQXQgfHwgXCJleHBpcmVzQXRcIlxuICAgICAgICB9LFxuICAgICAgICB0b2tlbjoge1xuICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgZmllbGROYW1lOiBvcHRpb25zLnNlc3Npb24/LmZpZWxkcz8udG9rZW4gfHwgXCJ0b2tlblwiLFxuICAgICAgICAgIHVuaXF1ZTogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBjcmVhdGVkQXQ6IHtcbiAgICAgICAgICB0eXBlOiBcImRhdGVcIixcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICBmaWVsZE5hbWU6IG9wdGlvbnMuc2Vzc2lvbj8uZmllbGRzPy5jcmVhdGVkQXQgfHwgXCJjcmVhdGVkQXRcIixcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6ICgpID0+IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG4gICAgICAgIH0sXG4gICAgICAgIHVwZGF0ZWRBdDoge1xuICAgICAgICAgIHR5cGU6IFwiZGF0ZVwiLFxuICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgIGZpZWxkTmFtZTogb3B0aW9ucy5zZXNzaW9uPy5maWVsZHM/LnVwZGF0ZWRBdCB8fCBcInVwZGF0ZWRBdFwiLFxuICAgICAgICAgIG9uVXBkYXRlOiAoKSA9PiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuICAgICAgICB9LFxuICAgICAgICBpcEFkZHJlc3M6IHtcbiAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgICBmaWVsZE5hbWU6IG9wdGlvbnMuc2Vzc2lvbj8uZmllbGRzPy5pcEFkZHJlc3MgfHwgXCJpcEFkZHJlc3NcIlxuICAgICAgICB9LFxuICAgICAgICB1c2VyQWdlbnQ6IHtcbiAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgICBmaWVsZE5hbWU6IG9wdGlvbnMuc2Vzc2lvbj8uZmllbGRzPy51c2VyQWdlbnQgfHwgXCJ1c2VyQWdlbnRcIlxuICAgICAgICB9LFxuICAgICAgICB1c2VySWQ6IHtcbiAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgIGZpZWxkTmFtZTogb3B0aW9ucy5zZXNzaW9uPy5maWVsZHM/LnVzZXJJZCB8fCBcInVzZXJJZFwiLFxuICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgIG1vZGVsOiBvcHRpb25zLnVzZXI/Lm1vZGVsTmFtZSB8fCBcInVzZXJcIixcbiAgICAgICAgICAgIGZpZWxkOiBcImlkXCIsXG4gICAgICAgICAgICBvbkRlbGV0ZTogXCJjYXNjYWRlXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIC4uLnNlc3Npb24/LmZpZWxkcyxcbiAgICAgICAgLi4ub3B0aW9ucy5zZXNzaW9uPy5hZGRpdGlvbmFsRmllbGRzXG4gICAgICB9LFxuICAgICAgb3JkZXI6IDJcbiAgICB9XG4gIH07XG4gIHJldHVybiB7XG4gICAgdXNlcjoge1xuICAgICAgbW9kZWxOYW1lOiBvcHRpb25zLnVzZXI/Lm1vZGVsTmFtZSB8fCBcInVzZXJcIixcbiAgICAgIGZpZWxkczoge1xuICAgICAgICBuYW1lOiB7XG4gICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICBmaWVsZE5hbWU6IG9wdGlvbnMudXNlcj8uZmllbGRzPy5uYW1lIHx8IFwibmFtZVwiLFxuICAgICAgICAgIHNvcnRhYmxlOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIGVtYWlsOiB7XG4gICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICB1bmlxdWU6IHRydWUsXG4gICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgZmllbGROYW1lOiBvcHRpb25zLnVzZXI/LmZpZWxkcz8uZW1haWwgfHwgXCJlbWFpbFwiLFxuICAgICAgICAgIHNvcnRhYmxlOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIGVtYWlsVmVyaWZpZWQ6IHtcbiAgICAgICAgICB0eXBlOiBcImJvb2xlYW5cIixcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6IGZhbHNlLFxuICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgIGZpZWxkTmFtZTogb3B0aW9ucy51c2VyPy5maWVsZHM/LmVtYWlsVmVyaWZpZWQgfHwgXCJlbWFpbFZlcmlmaWVkXCJcbiAgICAgICAgfSxcbiAgICAgICAgaW1hZ2U6IHtcbiAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgICBmaWVsZE5hbWU6IG9wdGlvbnMudXNlcj8uZmllbGRzPy5pbWFnZSB8fCBcImltYWdlXCJcbiAgICAgICAgfSxcbiAgICAgICAgY3JlYXRlZEF0OiB7XG4gICAgICAgICAgdHlwZTogXCJkYXRlXCIsXG4gICAgICAgICAgZGVmYXVsdFZhbHVlOiAoKSA9PiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICBmaWVsZE5hbWU6IG9wdGlvbnMudXNlcj8uZmllbGRzPy5jcmVhdGVkQXQgfHwgXCJjcmVhdGVkQXRcIlxuICAgICAgICB9LFxuICAgICAgICB1cGRhdGVkQXQ6IHtcbiAgICAgICAgICB0eXBlOiBcImRhdGVcIixcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6ICgpID0+IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuICAgICAgICAgIG9uVXBkYXRlOiAoKSA9PiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICBmaWVsZE5hbWU6IG9wdGlvbnMudXNlcj8uZmllbGRzPy51cGRhdGVkQXQgfHwgXCJ1cGRhdGVkQXRcIlxuICAgICAgICB9LFxuICAgICAgICAuLi51c2VyPy5maWVsZHMsXG4gICAgICAgIC4uLm9wdGlvbnMudXNlcj8uYWRkaXRpb25hbEZpZWxkc1xuICAgICAgfSxcbiAgICAgIG9yZGVyOiAxXG4gICAgfSxcbiAgICAvL29ubHkgYWRkIHNlc3Npb24gdGFibGUgaWYgaXQncyBub3Qgc3RvcmVkIGluIHNlY29uZGFyeSBzdG9yYWdlXG4gICAgLi4uIW9wdGlvbnMuc2Vjb25kYXJ5U3RvcmFnZSB8fCBvcHRpb25zLnNlc3Npb24/LnN0b3JlU2Vzc2lvbkluRGF0YWJhc2UgPyBzZXNzaW9uVGFibGUgOiB7fSxcbiAgICBhY2NvdW50OiB7XG4gICAgICBtb2RlbE5hbWU6IG9wdGlvbnMuYWNjb3VudD8ubW9kZWxOYW1lIHx8IFwiYWNjb3VudFwiLFxuICAgICAgZmllbGRzOiB7XG4gICAgICAgIGFjY291bnRJZDoge1xuICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgZmllbGROYW1lOiBvcHRpb25zLmFjY291bnQ/LmZpZWxkcz8uYWNjb3VudElkIHx8IFwiYWNjb3VudElkXCJcbiAgICAgICAgfSxcbiAgICAgICAgcHJvdmlkZXJJZDoge1xuICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgZmllbGROYW1lOiBvcHRpb25zLmFjY291bnQ/LmZpZWxkcz8ucHJvdmlkZXJJZCB8fCBcInByb3ZpZGVySWRcIlxuICAgICAgICB9LFxuICAgICAgICB1c2VySWQ6IHtcbiAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgIG1vZGVsOiBvcHRpb25zLnVzZXI/Lm1vZGVsTmFtZSB8fCBcInVzZXJcIixcbiAgICAgICAgICAgIGZpZWxkOiBcImlkXCIsXG4gICAgICAgICAgICBvbkRlbGV0ZTogXCJjYXNjYWRlXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgIGZpZWxkTmFtZTogb3B0aW9ucy5hY2NvdW50Py5maWVsZHM/LnVzZXJJZCB8fCBcInVzZXJJZFwiXG4gICAgICAgIH0sXG4gICAgICAgIGFjY2Vzc1Rva2VuOiB7XG4gICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgICAgICAgZmllbGROYW1lOiBvcHRpb25zLmFjY291bnQ/LmZpZWxkcz8uYWNjZXNzVG9rZW4gfHwgXCJhY2Nlc3NUb2tlblwiXG4gICAgICAgIH0sXG4gICAgICAgIHJlZnJlc2hUb2tlbjoge1xuICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICAgIGZpZWxkTmFtZTogb3B0aW9ucy5hY2NvdW50Py5maWVsZHM/LnJlZnJlc2hUb2tlbiB8fCBcInJlZnJlc2hUb2tlblwiXG4gICAgICAgIH0sXG4gICAgICAgIGlkVG9rZW46IHtcbiAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgICBmaWVsZE5hbWU6IG9wdGlvbnMuYWNjb3VudD8uZmllbGRzPy5pZFRva2VuIHx8IFwiaWRUb2tlblwiXG4gICAgICAgIH0sXG4gICAgICAgIGFjY2Vzc1Rva2VuRXhwaXJlc0F0OiB7XG4gICAgICAgICAgdHlwZTogXCJkYXRlXCIsXG4gICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICAgIGZpZWxkTmFtZTogb3B0aW9ucy5hY2NvdW50Py5maWVsZHM/LmFjY2Vzc1Rva2VuRXhwaXJlc0F0IHx8IFwiYWNjZXNzVG9rZW5FeHBpcmVzQXRcIlxuICAgICAgICB9LFxuICAgICAgICByZWZyZXNoVG9rZW5FeHBpcmVzQXQ6IHtcbiAgICAgICAgICB0eXBlOiBcImRhdGVcIixcbiAgICAgICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgICAgICAgZmllbGROYW1lOiBvcHRpb25zLmFjY291bnQ/LmZpZWxkcz8uYWNjZXNzVG9rZW5FeHBpcmVzQXQgfHwgXCJyZWZyZXNoVG9rZW5FeHBpcmVzQXRcIlxuICAgICAgICB9LFxuICAgICAgICBzY29wZToge1xuICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICAgIGZpZWxkTmFtZTogb3B0aW9ucy5hY2NvdW50Py5maWVsZHM/LnNjb3BlIHx8IFwic2NvcGVcIlxuICAgICAgICB9LFxuICAgICAgICBwYXNzd29yZDoge1xuICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICAgIGZpZWxkTmFtZTogb3B0aW9ucy5hY2NvdW50Py5maWVsZHM/LnBhc3N3b3JkIHx8IFwicGFzc3dvcmRcIlxuICAgICAgICB9LFxuICAgICAgICBjcmVhdGVkQXQ6IHtcbiAgICAgICAgICB0eXBlOiBcImRhdGVcIixcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICBmaWVsZE5hbWU6IG9wdGlvbnMuYWNjb3VudD8uZmllbGRzPy5jcmVhdGVkQXQgfHwgXCJjcmVhdGVkQXRcIixcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6ICgpID0+IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG4gICAgICAgIH0sXG4gICAgICAgIHVwZGF0ZWRBdDoge1xuICAgICAgICAgIHR5cGU6IFwiZGF0ZVwiLFxuICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgIGZpZWxkTmFtZTogb3B0aW9ucy5hY2NvdW50Py5maWVsZHM/LnVwZGF0ZWRBdCB8fCBcInVwZGF0ZWRBdFwiLFxuICAgICAgICAgIG9uVXBkYXRlOiAoKSA9PiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuICAgICAgICB9LFxuICAgICAgICAuLi5hY2NvdW50Py5maWVsZHNcbiAgICAgIH0sXG4gICAgICBvcmRlcjogM1xuICAgIH0sXG4gICAgdmVyaWZpY2F0aW9uOiB7XG4gICAgICBtb2RlbE5hbWU6IG9wdGlvbnMudmVyaWZpY2F0aW9uPy5tb2RlbE5hbWUgfHwgXCJ2ZXJpZmljYXRpb25cIixcbiAgICAgIGZpZWxkczoge1xuICAgICAgICBpZGVudGlmaWVyOiB7XG4gICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICBmaWVsZE5hbWU6IG9wdGlvbnMudmVyaWZpY2F0aW9uPy5maWVsZHM/LmlkZW50aWZpZXIgfHwgXCJpZGVudGlmaWVyXCJcbiAgICAgICAgfSxcbiAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgIGZpZWxkTmFtZTogb3B0aW9ucy52ZXJpZmljYXRpb24/LmZpZWxkcz8udmFsdWUgfHwgXCJ2YWx1ZVwiXG4gICAgICAgIH0sXG4gICAgICAgIGV4cGlyZXNBdDoge1xuICAgICAgICAgIHR5cGU6IFwiZGF0ZVwiLFxuICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgIGZpZWxkTmFtZTogb3B0aW9ucy52ZXJpZmljYXRpb24/LmZpZWxkcz8uZXhwaXJlc0F0IHx8IFwiZXhwaXJlc0F0XCJcbiAgICAgICAgfSxcbiAgICAgICAgY3JlYXRlZEF0OiB7XG4gICAgICAgICAgdHlwZTogXCJkYXRlXCIsXG4gICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgZGVmYXVsdFZhbHVlOiAoKSA9PiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcbiAgICAgICAgICBmaWVsZE5hbWU6IG9wdGlvbnMudmVyaWZpY2F0aW9uPy5maWVsZHM/LmNyZWF0ZWRBdCB8fCBcImNyZWF0ZWRBdFwiXG4gICAgICAgIH0sXG4gICAgICAgIHVwZGF0ZWRBdDoge1xuICAgICAgICAgIHR5cGU6IFwiZGF0ZVwiLFxuICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZTogKCkgPT4gLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG4gICAgICAgICAgb25VcGRhdGU6ICgpID0+IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuICAgICAgICAgIGZpZWxkTmFtZTogb3B0aW9ucy52ZXJpZmljYXRpb24/LmZpZWxkcz8udXBkYXRlZEF0IHx8IFwidXBkYXRlZEF0XCJcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG9yZGVyOiA0XG4gICAgfSxcbiAgICAuLi5wbHVnaW5UYWJsZXMsXG4gICAgLi4uc2hvdWxkQWRkUmF0ZUxpbWl0VGFibGUgPyByYXRlTGltaXRUYWJsZSA6IHt9XG4gIH07XG59O1xuXG5leHBvcnQgeyBnZXRBdXRoVGFibGVzIGFzIGcgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/shared/better-auth.B_PTVODM.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/shared/better-auth.BjBlybv-.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/shared/better-auth.BjBlybv-.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   a: () => (/* binding */ logger),\n/* harmony export */   c: () => (/* binding */ createLogger),\n/* harmony export */   l: () => (/* binding */ levels),\n/* harmony export */   s: () => (/* binding */ shouldPublishLog)\n/* harmony export */ });\nconst levels = [\"info\", \"success\", \"warn\", \"error\", \"debug\"];\nfunction shouldPublishLog(currentLogLevel, logLevel) {\n  return levels.indexOf(logLevel) <= levels.indexOf(currentLogLevel);\n}\nconst colors = {\n  reset: \"\\x1B[0m\",\n  bright: \"\\x1B[1m\",\n  dim: \"\\x1B[2m\",\n  fg: {\n    red: \"\\x1B[31m\",\n    green: \"\\x1B[32m\",\n    yellow: \"\\x1B[33m\",\n    blue: \"\\x1B[34m\",\n    magenta: \"\\x1B[35m\"}};\nconst levelColors = {\n  info: colors.fg.blue,\n  success: colors.fg.green,\n  warn: colors.fg.yellow,\n  error: colors.fg.red,\n  debug: colors.fg.magenta\n};\nconst formatMessage = (level, message) => {\n  const timestamp = (/* @__PURE__ */ new Date()).toISOString();\n  return `${colors.dim}${timestamp}${colors.reset} ${levelColors[level]}${level.toUpperCase()}${colors.reset} ${colors.bright}[Better Auth]:${colors.reset} ${message}`;\n};\nconst createLogger = (options) => {\n  const enabled = options?.disabled !== true;\n  const logLevel = options?.level ?? \"error\";\n  const LogFunc = (level, message, args = []) => {\n    if (!enabled || !shouldPublishLog(logLevel, level)) {\n      return;\n    }\n    const formattedMessage = formatMessage(level, message);\n    if (!options || typeof options.log !== \"function\") {\n      if (level === \"error\") {\n        console.error(formattedMessage, ...args);\n      } else if (level === \"warn\") {\n        console.warn(formattedMessage, ...args);\n      } else {\n        console.log(formattedMessage, ...args);\n      }\n      return;\n    }\n    options.log(level === \"success\" ? \"info\" : level, message, ...args);\n  };\n  const logger2 = Object.fromEntries(\n    levels.map((level) => [\n      level,\n      (...[message, ...args]) => LogFunc(level, message, args)\n    ])\n  );\n  return {\n    ...logger2,\n    get level() {\n      return logLevel;\n    }\n  };\n};\nconst logger = createLogger();\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9zaGFyZWQvYmV0dGVyLWF1dGguQmpCbHlidi0ubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxXQUFXLEVBQUUsVUFBVSxFQUFFLGNBQWMsRUFBRSxtQkFBbUIsRUFBRSxvQkFBb0IsRUFBRSxjQUFjLEVBQUUsY0FBYyxnQkFBZ0IsY0FBYyxFQUFFLFFBQVE7QUFDdEs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRThFIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFtYWFuXFxPbmVEcml2ZVxcRGVza3RvcFxcS2FuZGlkXzJcXE5ldyBmb2xkZXIgKDIpXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxzaGFyZWRcXGJldHRlci1hdXRoLkJqQmx5YnYtLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBsZXZlbHMgPSBbXCJpbmZvXCIsIFwic3VjY2Vzc1wiLCBcIndhcm5cIiwgXCJlcnJvclwiLCBcImRlYnVnXCJdO1xuZnVuY3Rpb24gc2hvdWxkUHVibGlzaExvZyhjdXJyZW50TG9nTGV2ZWwsIGxvZ0xldmVsKSB7XG4gIHJldHVybiBsZXZlbHMuaW5kZXhPZihsb2dMZXZlbCkgPD0gbGV2ZWxzLmluZGV4T2YoY3VycmVudExvZ0xldmVsKTtcbn1cbmNvbnN0IGNvbG9ycyA9IHtcbiAgcmVzZXQ6IFwiXFx4MUJbMG1cIixcbiAgYnJpZ2h0OiBcIlxceDFCWzFtXCIsXG4gIGRpbTogXCJcXHgxQlsybVwiLFxuICBmZzoge1xuICAgIHJlZDogXCJcXHgxQlszMW1cIixcbiAgICBncmVlbjogXCJcXHgxQlszMm1cIixcbiAgICB5ZWxsb3c6IFwiXFx4MUJbMzNtXCIsXG4gICAgYmx1ZTogXCJcXHgxQlszNG1cIixcbiAgICBtYWdlbnRhOiBcIlxceDFCWzM1bVwifX07XG5jb25zdCBsZXZlbENvbG9ycyA9IHtcbiAgaW5mbzogY29sb3JzLmZnLmJsdWUsXG4gIHN1Y2Nlc3M6IGNvbG9ycy5mZy5ncmVlbixcbiAgd2FybjogY29sb3JzLmZnLnllbGxvdyxcbiAgZXJyb3I6IGNvbG9ycy5mZy5yZWQsXG4gIGRlYnVnOiBjb2xvcnMuZmcubWFnZW50YVxufTtcbmNvbnN0IGZvcm1hdE1lc3NhZ2UgPSAobGV2ZWwsIG1lc3NhZ2UpID0+IHtcbiAgY29uc3QgdGltZXN0YW1wID0gKC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKS50b0lTT1N0cmluZygpO1xuICByZXR1cm4gYCR7Y29sb3JzLmRpbX0ke3RpbWVzdGFtcH0ke2NvbG9ycy5yZXNldH0gJHtsZXZlbENvbG9yc1tsZXZlbF19JHtsZXZlbC50b1VwcGVyQ2FzZSgpfSR7Y29sb3JzLnJlc2V0fSAke2NvbG9ycy5icmlnaHR9W0JldHRlciBBdXRoXToke2NvbG9ycy5yZXNldH0gJHttZXNzYWdlfWA7XG59O1xuY29uc3QgY3JlYXRlTG9nZ2VyID0gKG9wdGlvbnMpID0+IHtcbiAgY29uc3QgZW5hYmxlZCA9IG9wdGlvbnM/LmRpc2FibGVkICE9PSB0cnVlO1xuICBjb25zdCBsb2dMZXZlbCA9IG9wdGlvbnM/LmxldmVsID8/IFwiZXJyb3JcIjtcbiAgY29uc3QgTG9nRnVuYyA9IChsZXZlbCwgbWVzc2FnZSwgYXJncyA9IFtdKSA9PiB7XG4gICAgaWYgKCFlbmFibGVkIHx8ICFzaG91bGRQdWJsaXNoTG9nKGxvZ0xldmVsLCBsZXZlbCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZm9ybWF0dGVkTWVzc2FnZSA9IGZvcm1hdE1lc3NhZ2UobGV2ZWwsIG1lc3NhZ2UpO1xuICAgIGlmICghb3B0aW9ucyB8fCB0eXBlb2Ygb3B0aW9ucy5sb2cgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgaWYgKGxldmVsID09PSBcImVycm9yXCIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihmb3JtYXR0ZWRNZXNzYWdlLCAuLi5hcmdzKTtcbiAgICAgIH0gZWxzZSBpZiAobGV2ZWwgPT09IFwid2FyblwiKSB7XG4gICAgICAgIGNvbnNvbGUud2Fybihmb3JtYXR0ZWRNZXNzYWdlLCAuLi5hcmdzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGZvcm1hdHRlZE1lc3NhZ2UsIC4uLmFyZ3MpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBvcHRpb25zLmxvZyhsZXZlbCA9PT0gXCJzdWNjZXNzXCIgPyBcImluZm9cIiA6IGxldmVsLCBtZXNzYWdlLCAuLi5hcmdzKTtcbiAgfTtcbiAgY29uc3QgbG9nZ2VyMiA9IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICBsZXZlbHMubWFwKChsZXZlbCkgPT4gW1xuICAgICAgbGV2ZWwsXG4gICAgICAoLi4uW21lc3NhZ2UsIC4uLmFyZ3NdKSA9PiBMb2dGdW5jKGxldmVsLCBtZXNzYWdlLCBhcmdzKVxuICAgIF0pXG4gICk7XG4gIHJldHVybiB7XG4gICAgLi4ubG9nZ2VyMixcbiAgICBnZXQgbGV2ZWwoKSB7XG4gICAgICByZXR1cm4gbG9nTGV2ZWw7XG4gICAgfVxuICB9O1xufTtcbmNvbnN0IGxvZ2dlciA9IGNyZWF0ZUxvZ2dlcigpO1xuXG5leHBvcnQgeyBsb2dnZXIgYXMgYSwgY3JlYXRlTG9nZ2VyIGFzIGMsIGxldmVscyBhcyBsLCBzaG91bGRQdWJsaXNoTG9nIGFzIHMgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/shared/better-auth.BjBlybv-.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/shared/better-auth.BuBqXPUp.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/shared/better-auth.BuBqXPUp.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   c: () => (/* binding */ createAdapter)\n/* harmony export */ });\n/* harmony import */ var _better_auth_BZZKN1g7_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./better-auth.BZZKN1g7.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.BZZKN1g7.mjs\");\n/* harmony import */ var _better_auth_B_PTVODM_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./better-auth.B_PTVODM.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.B_PTVODM.mjs\");\n/* harmony import */ var _better_auth_BUPPRXfK_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./better-auth.BUPPRXfK.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.BUPPRXfK.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.js\");\n/* harmony import */ var _better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/utils/hash */ \"(rsc)/./node_modules/@better-auth/utils/dist/hash.mjs\");\n/* harmony import */ var _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @better-auth/utils/base64 */ \"(rsc)/./node_modules/@better-auth/utils/dist/base64.mjs\");\n/* harmony import */ var _better_auth_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/utils */ \"(rsc)/./node_modules/@better-auth/utils/dist/index.mjs\");\n/* harmony import */ var _better_auth_utils_hex__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/utils/hex */ \"(rsc)/./node_modules/@better-auth/utils/dist/hex.mjs\");\n/* harmony import */ var _better_auth_B4Qoxdgc_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./better-auth.B4Qoxdgc.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.B4Qoxdgc.mjs\");\n/* harmony import */ var _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./better-auth.BjBlybv-.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.BjBlybv-.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction withApplyDefault(value, field, action) {\n  if (action === \"update\") {\n    if (value === void 0 && field.onUpdate !== void 0) {\n      if (typeof field.onUpdate === \"function\") {\n        return field.onUpdate();\n      }\n      return field.onUpdate;\n    }\n    return value;\n  }\n  if (value === void 0 || value === null) {\n    if (field.defaultValue !== void 0) {\n      if (typeof field.defaultValue === \"function\") {\n        return field.defaultValue();\n      }\n      return field.defaultValue;\n    }\n  }\n  return value;\n}\n\nlet debugLogs = [];\nlet transactionId = -1;\nconst colors = {\n  reset: \"\\x1B[0m\",\n  bright: \"\\x1B[1m\",\n  dim: \"\\x1B[2m\",\n  fg: {\n    yellow: \"\\x1B[33m\",\n    magenta: \"\\x1B[35m\"},\n  bg: {\n    black: \"\\x1B[40m\"}\n};\nconst createAdapter = ({\n  adapter,\n  config: cfg\n}) => (options) => {\n  const config = {\n    ...cfg,\n    supportsBooleans: cfg.supportsBooleans ?? true,\n    supportsDates: cfg.supportsDates ?? true,\n    supportsJSON: cfg.supportsJSON ?? false,\n    adapterName: cfg.adapterName ?? cfg.adapterId,\n    supportsNumericIds: cfg.supportsNumericIds ?? true\n  };\n  if (options.advanced?.database?.useNumberId === true && config.supportsNumericIds === false) {\n    throw new Error(\n      `[${config.adapterName}] Your database or database adapter does not support numeric ids. Please disable \"useNumberId\" in your config.`\n    );\n  }\n  const schema = (0,_better_auth_B_PTVODM_mjs__WEBPACK_IMPORTED_MODULE_1__.g)(options);\n  const getDefaultFieldName = ({\n    field,\n    model: unsafe_model\n  }) => {\n    if (field === \"id\" || field === \"_id\") {\n      return \"id\";\n    }\n    const model = getDefaultModelName(unsafe_model);\n    let f = schema[model]?.fields[field];\n    if (!f) {\n      f = Object.values(schema[model]?.fields).find(\n        (f2) => f2.fieldName === field\n      );\n    }\n    if (!f) {\n      debugLog(`Field ${field} not found in model ${model}`);\n      debugLog(`Schema:`, schema);\n      throw new Error(`Field ${field} not found in model ${model}`);\n    }\n    return field;\n  };\n  const getDefaultModelName = (model) => {\n    if (config.usePlural && model.charAt(model.length - 1) === \"s\") {\n      let pluralessModel = model.slice(0, -1);\n      let m2 = schema[pluralessModel] ? pluralessModel : void 0;\n      if (!m2) {\n        m2 = Object.entries(schema).find(\n          ([_, f]) => f.modelName === pluralessModel\n        )?.[0];\n      }\n      if (m2) {\n        return m2;\n      }\n    }\n    let m = schema[model] ? model : void 0;\n    if (!m) {\n      m = Object.entries(schema).find(([_, f]) => f.modelName === model)?.[0];\n    }\n    if (!m) {\n      debugLog(`Model \"${model}\" not found in schema`);\n      debugLog(`Schema:`, schema);\n      throw new Error(`Model \"${model}\" not found in schema`);\n    }\n    return m;\n  };\n  const getModelName = (model) => {\n    const defaultModelKey = getDefaultModelName(model);\n    const usePlural = config && config.usePlural;\n    const useCustomModelName = schema && schema[defaultModelKey] && schema[defaultModelKey].modelName !== model;\n    if (useCustomModelName) {\n      return usePlural ? `${schema[defaultModelKey].modelName}s` : schema[defaultModelKey].modelName;\n    }\n    return usePlural ? `${model}s` : model;\n  };\n  function getFieldName({\n    model: model_name,\n    field: field_name\n  }) {\n    const model = getDefaultModelName(model_name);\n    const field = getDefaultFieldName({ model, field: field_name });\n    return schema[model]?.fields[field]?.fieldName || field;\n  }\n  const debugLog = (...args) => {\n    if (config.debugLogs === true || typeof config.debugLogs === \"object\") {\n      if (typeof config.debugLogs === \"object\" && \"isRunningAdapterTests\" in config.debugLogs) {\n        if (config.debugLogs.isRunningAdapterTests) {\n          args.shift();\n          debugLogs.push(args);\n        }\n        return;\n      }\n      if (typeof config.debugLogs === \"object\" && config.debugLogs.logCondition && !config.debugLogs.logCondition?.()) {\n        return;\n      }\n      if (typeof args[0] === \"object\" && \"method\" in args[0]) {\n        const method = args.shift().method;\n        if (typeof config.debugLogs === \"object\") {\n          if (method === \"create\" && !config.debugLogs.create) {\n            return;\n          } else if (method === \"update\" && !config.debugLogs.update) {\n            return;\n          } else if (method === \"updateMany\" && !config.debugLogs.updateMany) {\n            return;\n          } else if (method === \"findOne\" && !config.debugLogs.findOne) {\n            return;\n          } else if (method === \"findMany\" && !config.debugLogs.findMany) {\n            return;\n          } else if (method === \"delete\" && !config.debugLogs.delete) {\n            return;\n          } else if (method === \"deleteMany\" && !config.debugLogs.deleteMany) {\n            return;\n          } else if (method === \"count\" && !config.debugLogs.count) {\n            return;\n          }\n        }\n        _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_9__.a.info(`[${config.adapterName}]`, ...args);\n      } else {\n        _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_9__.a.info(`[${config.adapterName}]`, ...args);\n      }\n    }\n  };\n  const idField = ({\n    customModelName,\n    forceAllowId\n  }) => {\n    const shouldGenerateId = !config.disableIdGeneration && !options.advanced?.database?.useNumberId && !forceAllowId;\n    const model = getDefaultModelName(customModelName ?? \"id\");\n    return {\n      type: options.advanced?.database?.useNumberId ? \"number\" : \"string\",\n      required: shouldGenerateId ? true : false,\n      ...shouldGenerateId ? {\n        defaultValue() {\n          if (config.disableIdGeneration) return void 0;\n          const useNumberId = options.advanced?.database?.useNumberId;\n          let generateId$1 = options.advanced?.database?.generateId;\n          if (options.advanced?.generateId !== void 0) {\n            _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_9__.a.warn(\n              \"Your Better Auth config includes advanced.generateId which is deprecated. Please use advanced.database.generateId instead. This will be removed in future releases.\"\n            );\n            generateId$1 = options.advanced?.generateId;\n          }\n          if (generateId$1 === false || useNumberId) return void 0;\n          if (generateId$1) {\n            return generateId$1({\n              model\n            });\n          }\n          if (config.customIdGenerator) {\n            return config.customIdGenerator({ model });\n          }\n          return (0,_better_auth_BUPPRXfK_mjs__WEBPACK_IMPORTED_MODULE_2__.g)();\n        }\n      } : {}\n    };\n  };\n  const getFieldAttributes = ({\n    model,\n    field\n  }) => {\n    const defaultModelName = getDefaultModelName(model);\n    const defaultFieldName = getDefaultFieldName({\n      field,\n      model\n    });\n    const fields = schema[defaultModelName].fields;\n    fields.id = idField({ customModelName: defaultModelName });\n    return fields[defaultFieldName];\n  };\n  const adapterInstance = adapter({\n    options,\n    schema,\n    debugLog,\n    getFieldName,\n    getModelName,\n    getDefaultModelName,\n    getDefaultFieldName,\n    getFieldAttributes\n  });\n  const transformInput = async (data, unsafe_model, action, forceAllowId) => {\n    const transformedData = {};\n    const fields = schema[unsafe_model].fields;\n    const newMappedKeys = config.mapKeysTransformInput ?? {};\n    if (!config.disableIdGeneration && !options.advanced?.database?.useNumberId) {\n      fields.id = idField({\n        customModelName: unsafe_model,\n        forceAllowId: forceAllowId && \"id\" in data\n      });\n    }\n    for (const field in fields) {\n      const value = data[field];\n      const fieldAttributes = fields[field];\n      let newFieldName = newMappedKeys[field] || fields[field].fieldName || field;\n      if (value === void 0 && (fieldAttributes.defaultValue === void 0 && !fieldAttributes.transform?.input && !(action === \"update\" && fieldAttributes.onUpdate) || action === \"update\" && !fieldAttributes.onUpdate)) {\n        continue;\n      }\n      let newValue = withApplyDefault(value, fieldAttributes, action);\n      if (fieldAttributes.transform?.input) {\n        newValue = await fieldAttributes.transform.input(newValue);\n      }\n      if (fieldAttributes.references?.field === \"id\" && options.advanced?.database?.useNumberId) {\n        if (Array.isArray(newValue)) {\n          newValue = newValue.map(Number);\n        } else {\n          newValue = Number(newValue);\n        }\n      } else if (config.supportsJSON === false && typeof newValue === \"object\" && fieldAttributes.type === \"json\") {\n        newValue = JSON.stringify(newValue);\n      } else if (config.supportsDates === false && newValue instanceof Date && fieldAttributes.type === \"date\") {\n        newValue = newValue.toISOString();\n      } else if (config.supportsBooleans === false && typeof newValue === \"boolean\") {\n        newValue = newValue ? 1 : 0;\n      }\n      if (config.customTransformInput) {\n        newValue = config.customTransformInput({\n          data: newValue,\n          action,\n          field: newFieldName,\n          fieldAttributes,\n          model: unsafe_model,\n          schema,\n          options\n        });\n      }\n      if (newValue !== void 0) {\n        transformedData[newFieldName] = newValue;\n      }\n    }\n    return transformedData;\n  };\n  const transformOutput = async (data, unsafe_model, select = []) => {\n    if (!data) return null;\n    const newMappedKeys = config.mapKeysTransformOutput ?? {};\n    const transformedData = {};\n    const tableSchema = schema[unsafe_model].fields;\n    const idKey = Object.entries(newMappedKeys).find(\n      ([_, v]) => v === \"id\"\n    )?.[0];\n    tableSchema[idKey ?? \"id\"] = {\n      type: options.advanced?.database?.useNumberId ? \"number\" : \"string\"\n    };\n    for (const key in tableSchema) {\n      if (select.length && !select.includes(key)) {\n        continue;\n      }\n      const field = tableSchema[key];\n      if (field) {\n        const originalKey = field.fieldName || key;\n        let newValue = data[Object.entries(newMappedKeys).find(\n          ([_, v]) => v === originalKey\n        )?.[0] || originalKey];\n        if (field.transform?.output) {\n          newValue = await field.transform.output(newValue);\n        }\n        let newFieldName = newMappedKeys[key] || key;\n        if (originalKey === \"id\" || field.references?.field === \"id\") {\n          if (typeof newValue !== \"undefined\") newValue = String(newValue);\n        } else if (config.supportsJSON === false && typeof newValue === \"string\" && field.type === \"json\") {\n          newValue = (0,_better_auth_BZZKN1g7_mjs__WEBPACK_IMPORTED_MODULE_0__.s)(newValue);\n        } else if (config.supportsDates === false && typeof newValue === \"string\" && field.type === \"date\") {\n          newValue = new Date(newValue);\n        } else if (config.supportsBooleans === false && typeof newValue === \"number\" && field.type === \"boolean\") {\n          newValue = newValue === 1;\n        }\n        if (config.customTransformOutput) {\n          newValue = config.customTransformOutput({\n            data: newValue,\n            field: newFieldName,\n            fieldAttributes: field,\n            select,\n            model: unsafe_model,\n            schema,\n            options\n          });\n        }\n        transformedData[newFieldName] = newValue;\n      }\n    }\n    return transformedData;\n  };\n  const transformWhereClause = ({\n    model,\n    where\n  }) => {\n    if (!where) return void 0;\n    const newMappedKeys = config.mapKeysTransformInput ?? {};\n    return where.map((w) => {\n      const {\n        field: unsafe_field,\n        value,\n        operator = \"eq\",\n        connector = \"AND\"\n      } = w;\n      if (operator === \"in\") {\n        if (!Array.isArray(value)) {\n          throw new Error(\"Value must be an array\");\n        }\n      }\n      const defaultModelName = getDefaultModelName(model);\n      const defaultFieldName = getDefaultFieldName({\n        field: unsafe_field,\n        model\n      });\n      const fieldName = newMappedKeys[defaultFieldName] || getFieldName({\n        field: defaultFieldName,\n        model: defaultModelName\n      });\n      const fieldAttr = getFieldAttributes({\n        field: defaultFieldName,\n        model: defaultModelName\n      });\n      if (defaultFieldName === \"id\" || fieldAttr.references?.field === \"id\") {\n        if (options.advanced?.database?.useNumberId) {\n          if (Array.isArray(value)) {\n            return {\n              operator,\n              connector,\n              field: fieldName,\n              value: value.map(Number)\n            };\n          }\n          return {\n            operator,\n            connector,\n            field: fieldName,\n            value: Number(value)\n          };\n        }\n      }\n      return {\n        operator,\n        connector,\n        field: fieldName,\n        value\n      };\n    });\n  };\n  return {\n    create: async ({\n      data: unsafeData,\n      model: unsafeModel,\n      select,\n      forceAllowId = false\n    }) => {\n      transactionId++;\n      let thisTransactionId = transactionId;\n      const model = getModelName(unsafeModel);\n      if (\"id\" in unsafeData && !forceAllowId) {\n        _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_9__.a.warn(\n          `[${config.adapterName}] - You are trying to create a record with an id. This is not allowed as we handle id generation for you, unless you pass in the \\`forceAllowId\\` parameter. The id will be ignored.`\n        );\n        const err = new Error();\n        const stack = err.stack?.split(\"\\n\").filter((_, i) => i !== 1).join(\"\\n\").replace(\"Error:\", \"Create method with `id` being called at:\");\n        console.log(stack);\n        unsafeData.id = void 0;\n      }\n      debugLog(\n        { method: \"create\" },\n        `${formatTransactionId(thisTransactionId)} ${formatStep(1, 4)}`,\n        `${formatMethod(\"create\")} ${formatAction(\"Unsafe Input\")}:`,\n        { model, data: unsafeData }\n      );\n      const data = await transformInput(\n        unsafeData,\n        unsafeModel,\n        \"create\",\n        forceAllowId\n      );\n      debugLog(\n        { method: \"create\" },\n        `${formatTransactionId(thisTransactionId)} ${formatStep(2, 4)}`,\n        `${formatMethod(\"create\")} ${formatAction(\"Parsed Input\")}:`,\n        { model, data }\n      );\n      const res = await adapterInstance.create({ data, model });\n      debugLog(\n        { method: \"create\" },\n        `${formatTransactionId(thisTransactionId)} ${formatStep(3, 4)}`,\n        `${formatMethod(\"create\")} ${formatAction(\"DB Result\")}:`,\n        { model, res }\n      );\n      const transformed = await transformOutput(res, unsafeModel, select);\n      debugLog(\n        { method: \"create\" },\n        `${formatTransactionId(thisTransactionId)} ${formatStep(4, 4)}`,\n        `${formatMethod(\"create\")} ${formatAction(\"Parsed Result\")}:`,\n        { model, data: transformed }\n      );\n      return transformed;\n    },\n    update: async ({\n      model: unsafeModel,\n      where: unsafeWhere,\n      update: unsafeData\n    }) => {\n      transactionId++;\n      let thisTransactionId = transactionId;\n      const model = getModelName(unsafeModel);\n      const where = transformWhereClause({\n        model: unsafeModel,\n        where: unsafeWhere\n      });\n      debugLog(\n        { method: \"update\" },\n        `${formatTransactionId(thisTransactionId)} ${formatStep(1, 4)}`,\n        `${formatMethod(\"update\")} ${formatAction(\"Unsafe Input\")}:`,\n        { model, data: unsafeData }\n      );\n      const data = await transformInput(\n        unsafeData,\n        unsafeModel,\n        \"update\"\n      );\n      debugLog(\n        { method: \"update\" },\n        `${formatTransactionId(thisTransactionId)} ${formatStep(2, 4)}`,\n        `${formatMethod(\"update\")} ${formatAction(\"Parsed Input\")}:`,\n        { model, data }\n      );\n      const res = await adapterInstance.update({\n        model,\n        where,\n        update: data\n      });\n      debugLog(\n        { method: \"update\" },\n        `${formatTransactionId(thisTransactionId)} ${formatStep(3, 4)}`,\n        `${formatMethod(\"update\")} ${formatAction(\"DB Result\")}:`,\n        { model, data: res }\n      );\n      const transformed = await transformOutput(res, unsafeModel);\n      debugLog(\n        { method: \"update\" },\n        `${formatTransactionId(thisTransactionId)} ${formatStep(4, 4)}`,\n        `${formatMethod(\"update\")} ${formatAction(\"Parsed Result\")}:`,\n        { model, data: transformed }\n      );\n      return transformed;\n    },\n    updateMany: async ({\n      model: unsafeModel,\n      where: unsafeWhere,\n      update: unsafeData\n    }) => {\n      transactionId++;\n      let thisTransactionId = transactionId;\n      const model = getModelName(unsafeModel);\n      const where = transformWhereClause({\n        model: unsafeModel,\n        where: unsafeWhere\n      });\n      debugLog(\n        { method: \"updateMany\" },\n        `${formatTransactionId(thisTransactionId)} ${formatStep(1, 4)}`,\n        `${formatMethod(\"updateMany\")} ${formatAction(\"Unsafe Input\")}:`,\n        { model, data: unsafeData }\n      );\n      const data = await transformInput(unsafeData, unsafeModel, \"update\");\n      debugLog(\n        { method: \"updateMany\" },\n        `${formatTransactionId(thisTransactionId)} ${formatStep(2, 4)}`,\n        `${formatMethod(\"updateMany\")} ${formatAction(\"Parsed Input\")}:`,\n        { model, data }\n      );\n      const updatedCount = await adapterInstance.updateMany({\n        model,\n        where,\n        update: data\n      });\n      debugLog(\n        { method: \"updateMany\" },\n        `${formatTransactionId(thisTransactionId)} ${formatStep(3, 4)}`,\n        `${formatMethod(\"updateMany\")} ${formatAction(\"DB Result\")}:`,\n        { model, data: updatedCount }\n      );\n      debugLog(\n        { method: \"updateMany\" },\n        `${formatTransactionId(thisTransactionId)} ${formatStep(4, 4)}`,\n        `${formatMethod(\"updateMany\")} ${formatAction(\"Parsed Result\")}:`,\n        { model, data: updatedCount }\n      );\n      return updatedCount;\n    },\n    findOne: async ({\n      model: unsafeModel,\n      where: unsafeWhere,\n      select\n    }) => {\n      transactionId++;\n      let thisTransactionId = transactionId;\n      const model = getModelName(unsafeModel);\n      const where = transformWhereClause({\n        model: unsafeModel,\n        where: unsafeWhere\n      });\n      debugLog(\n        { method: \"findOne\" },\n        `${formatTransactionId(thisTransactionId)} ${formatStep(1, 3)}`,\n        `${formatMethod(\"findOne\")}:`,\n        { model, where, select }\n      );\n      const res = await adapterInstance.findOne({\n        model,\n        where,\n        select\n      });\n      debugLog(\n        { method: \"findOne\" },\n        `${formatTransactionId(thisTransactionId)} ${formatStep(2, 3)}`,\n        `${formatMethod(\"findOne\")} ${formatAction(\"DB Result\")}:`,\n        { model, data: res }\n      );\n      const transformed = await transformOutput(\n        res,\n        unsafeModel,\n        select\n      );\n      debugLog(\n        { method: \"findOne\" },\n        `${formatTransactionId(thisTransactionId)} ${formatStep(3, 3)}`,\n        `${formatMethod(\"findOne\")} ${formatAction(\"Parsed Result\")}:`,\n        { model, data: transformed }\n      );\n      return transformed;\n    },\n    findMany: async ({\n      model: unsafeModel,\n      where: unsafeWhere,\n      limit: unsafeLimit,\n      sortBy,\n      offset\n    }) => {\n      transactionId++;\n      let thisTransactionId = transactionId;\n      const limit = unsafeLimit ?? options.advanced?.database?.defaultFindManyLimit ?? 100;\n      const model = getModelName(unsafeModel);\n      const where = transformWhereClause({\n        model: unsafeModel,\n        where: unsafeWhere\n      });\n      debugLog(\n        { method: \"findMany\" },\n        `${formatTransactionId(thisTransactionId)} ${formatStep(1, 3)}`,\n        `${formatMethod(\"findMany\")}:`,\n        { model, where, limit, sortBy, offset }\n      );\n      const res = await adapterInstance.findMany({\n        model,\n        where,\n        limit,\n        sortBy,\n        offset\n      });\n      debugLog(\n        { method: \"findMany\" },\n        `${formatTransactionId(thisTransactionId)} ${formatStep(2, 3)}`,\n        `${formatMethod(\"findMany\")} ${formatAction(\"DB Result\")}:`,\n        { model, data: res }\n      );\n      const transformed = await Promise.all(\n        res.map(async (r) => await transformOutput(r, unsafeModel))\n      );\n      debugLog(\n        { method: \"findMany\" },\n        `${formatTransactionId(thisTransactionId)} ${formatStep(3, 3)}`,\n        `${formatMethod(\"findMany\")} ${formatAction(\"Parsed Result\")}:`,\n        { model, data: transformed }\n      );\n      return transformed;\n    },\n    delete: async ({\n      model: unsafeModel,\n      where: unsafeWhere\n    }) => {\n      transactionId++;\n      let thisTransactionId = transactionId;\n      const model = getModelName(unsafeModel);\n      const where = transformWhereClause({\n        model: unsafeModel,\n        where: unsafeWhere\n      });\n      debugLog(\n        { method: \"delete\" },\n        `${formatTransactionId(thisTransactionId)} ${formatStep(1, 2)}`,\n        `${formatMethod(\"delete\")}:`,\n        { model, where }\n      );\n      await adapterInstance.delete({\n        model,\n        where\n      });\n      debugLog(\n        { method: \"delete\" },\n        `${formatTransactionId(thisTransactionId)} ${formatStep(2, 2)}`,\n        `${formatMethod(\"delete\")} ${formatAction(\"DB Result\")}:`,\n        { model }\n      );\n    },\n    deleteMany: async ({\n      model: unsafeModel,\n      where: unsafeWhere\n    }) => {\n      transactionId++;\n      let thisTransactionId = transactionId;\n      const model = getModelName(unsafeModel);\n      const where = transformWhereClause({\n        model: unsafeModel,\n        where: unsafeWhere\n      });\n      debugLog(\n        { method: \"deleteMany\" },\n        `${formatTransactionId(thisTransactionId)} ${formatStep(1, 2)}`,\n        `${formatMethod(\"deleteMany\")} ${formatAction(\"DeleteMany\")}:`,\n        { model, where }\n      );\n      const res = await adapterInstance.deleteMany({\n        model,\n        where\n      });\n      debugLog(\n        { method: \"deleteMany\" },\n        `${formatTransactionId(thisTransactionId)} ${formatStep(2, 2)}`,\n        `${formatMethod(\"deleteMany\")} ${formatAction(\"DB Result\")}:`,\n        { model, data: res }\n      );\n      return res;\n    },\n    count: async ({\n      model: unsafeModel,\n      where: unsafeWhere\n    }) => {\n      transactionId++;\n      let thisTransactionId = transactionId;\n      const model = getModelName(unsafeModel);\n      const where = transformWhereClause({\n        model: unsafeModel,\n        where: unsafeWhere\n      });\n      debugLog(\n        { method: \"count\" },\n        `${formatTransactionId(thisTransactionId)} ${formatStep(1, 2)}`,\n        `${formatMethod(\"count\")}:`,\n        {\n          model,\n          where\n        }\n      );\n      const res = await adapterInstance.count({\n        model,\n        where\n      });\n      debugLog(\n        { method: \"count\" },\n        `${formatTransactionId(thisTransactionId)} ${formatStep(2, 2)}`,\n        `${formatMethod(\"count\")}:`,\n        {\n          model,\n          data: res\n        }\n      );\n      return res;\n    },\n    createSchema: adapterInstance.createSchema ? async (_, file) => {\n      const tables = (0,_better_auth_B_PTVODM_mjs__WEBPACK_IMPORTED_MODULE_1__.g)(options);\n      if (options.secondaryStorage && !options.session?.storeSessionInDatabase) {\n        delete tables.session;\n      }\n      if (options.rateLimit && options.rateLimit.storage === \"database\" && // rate-limit will default to enabled in production,\n      // and given storage is database, it will try to use the rate-limit table,\n      // so we should make sure to generate rate-limit table schema\n      (typeof options.rateLimit.enabled === \"undefined\" || // and of course if they forcefully set to true, then they want rate-limit,\n      // thus we should also generate rate-limit table schema\n      options.rateLimit.enabled === true)) {\n        tables.ratelimit = {\n          modelName: options.rateLimit.modelName ?? \"ratelimit\",\n          fields: {\n            key: {\n              type: \"string\",\n              unique: true,\n              required: true,\n              fieldName: options.rateLimit.fields?.key ?? \"key\"\n            },\n            count: {\n              type: \"number\",\n              required: true,\n              fieldName: options.rateLimit.fields?.count ?? \"count\"\n            },\n            lastRequest: {\n              type: \"number\",\n              required: true,\n              bigint: true,\n              defaultValue: () => Date.now(),\n              fieldName: options.rateLimit.fields?.lastRequest ?? \"lastRequest\"\n            }\n          }\n        };\n      }\n      return adapterInstance.createSchema({ file, tables });\n    } : void 0,\n    options: {\n      adapterConfig: config,\n      ...adapterInstance.options ?? {}\n    },\n    id: config.adapterId,\n    // Secretly export values ONLY if this adapter has enabled adapter-test-debug-logs.\n    // This would then be used during our adapter-tests to help print debug logs if a test fails.\n    //@ts-expect-error - ^^\n    ...config.debugLogs?.isRunningAdapterTests ? {\n      adapterTestDebugLogs: {\n        resetDebugLogs() {\n          debugLogs = [];\n        },\n        printDebugLogs() {\n          const separator = `\\u2500`.repeat(80);\n          let log = debugLogs.reverse().map((log2) => {\n            log2[0] = `\n${log2[0]}`;\n            return [...log2, \"\\n\"];\n          }).reduce(\n            (prev, curr) => {\n              return [...curr, ...prev];\n            },\n            [`\n${separator}`]\n          );\n          console.log(...log);\n        }\n      }\n    } : {}\n  };\n};\nfunction formatTransactionId(transactionId2) {\n  return `${colors.fg.magenta}#${transactionId2}${colors.reset}`;\n}\nfunction formatStep(step, total) {\n  return `${colors.bg.black}${colors.fg.yellow}[${step}/${total}]${colors.reset}`;\n}\nfunction formatMethod(method) {\n  return `${colors.bright}${method}${colors.reset}`;\n}\nfunction formatAction(action) {\n  return `${colors.dim}(${action})${colors.reset}`;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9zaGFyZWQvYmV0dGVyLWF1dGguQnVCcVhQVXAubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQWdFO0FBQ0E7QUFDSDtBQUM3QztBQUNLO0FBQ1k7QUFDRjtBQUNEO0FBQ0k7QUFDQztBQUNyQjtBQUNnQjtBQUNGO0FBQ0k7QUFDSDtBQUNPO0FBQ3FCOztBQUV6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxtQkFBbUI7QUFDN0I7QUFDQTtBQUNBLGlCQUFpQiw0REFBYTtBQUM5QjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixPQUFPLHFCQUFxQixNQUFNO0FBQzFEO0FBQ0EsK0JBQStCLE9BQU8scUJBQXFCLE1BQU07QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLE1BQU07QUFDL0I7QUFDQSxnQ0FBZ0MsTUFBTTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGtDQUFrQztBQUM5RDtBQUNBLDBCQUEwQixNQUFNO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Es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QWtCLEdBQUcsZUFBZSxFQUFFLGFBQWE7QUFDL0Q7QUFDQTtBQUNBLFlBQVksZ0JBQWdCLEVBQUUsaUJBQWlCLEdBQUcsS0FBSyxHQUFHLE1BQU0sR0FBRyxhQUFhO0FBQ2hGO0FBQ0E7QUFDQSxZQUFZLGNBQWMsRUFBRSxPQUFPLEVBQUUsYUFBYTtBQUNsRDtBQUNBO0FBQ0EsWUFBWSxXQUFXLEdBQUcsT0FBTyxHQUFHLGFBQWE7QUFDakQ7O0FBRThCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFtYWFuXFxPbmVEcml2ZVxcRGVza3RvcFxcS2FuZGlkXzJcXE5ldyBmb2xkZXIgKDIpXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxzaGFyZWRcXGJldHRlci1hdXRoLkJ1QnFYUFVwLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzIGFzIHNhZmVKU09OUGFyc2UgfSBmcm9tICcuL2JldHRlci1hdXRoLkJaWktOMWc3Lm1qcyc7XG5pbXBvcnQgeyBnIGFzIGdldEF1dGhUYWJsZXMgfSBmcm9tICcuL2JldHRlci1hdXRoLkJfUFRWT0RNLm1qcyc7XG5pbXBvcnQgeyBnIGFzIGdlbmVyYXRlSWQgfSBmcm9tICcuL2JldHRlci1hdXRoLkJVUFBSWGZLLm1qcyc7XG5pbXBvcnQgJ3pvZC92NCc7XG5pbXBvcnQgJ2JldHRlci1jYWxsJztcbmltcG9ydCAnQGJldHRlci1hdXRoL3V0aWxzL2hhc2gnO1xuaW1wb3J0ICdAbm9ibGUvY2lwaGVycy9jaGFjaGEnO1xuaW1wb3J0ICdAbm9ibGUvY2lwaGVycy91dGlscyc7XG5pbXBvcnQgJ0Bub2JsZS9jaXBoZXJzL3dlYmNyeXB0byc7XG5pbXBvcnQgJ0BiZXR0ZXItYXV0aC91dGlscy9iYXNlNjQnO1xuaW1wb3J0ICdqb3NlJztcbmltcG9ydCAnQG5vYmxlL2hhc2hlcy9zY3J5cHQnO1xuaW1wb3J0ICdAYmV0dGVyLWF1dGgvdXRpbHMnO1xuaW1wb3J0ICdAYmV0dGVyLWF1dGgvdXRpbHMvaGV4JztcbmltcG9ydCAnQG5vYmxlL2hhc2hlcy91dGlscyc7XG5pbXBvcnQgJy4vYmV0dGVyLWF1dGguQjRRb3hkZ2MubWpzJztcbmltcG9ydCB7IGEgYXMgbG9nZ2VyIH0gZnJvbSAnLi9iZXR0ZXItYXV0aC5CakJseWJ2LS5tanMnO1xuXG5mdW5jdGlvbiB3aXRoQXBwbHlEZWZhdWx0KHZhbHVlLCBmaWVsZCwgYWN0aW9uKSB7XG4gIGlmIChhY3Rpb24gPT09IFwidXBkYXRlXCIpIHtcbiAgICBpZiAodmFsdWUgPT09IHZvaWQgMCAmJiBmaWVsZC5vblVwZGF0ZSAhPT0gdm9pZCAwKSB7XG4gICAgICBpZiAodHlwZW9mIGZpZWxkLm9uVXBkYXRlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIGZpZWxkLm9uVXBkYXRlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmllbGQub25VcGRhdGU7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAodmFsdWUgPT09IHZvaWQgMCB8fCB2YWx1ZSA9PT0gbnVsbCkge1xuICAgIGlmIChmaWVsZC5kZWZhdWx0VmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgaWYgKHR5cGVvZiBmaWVsZC5kZWZhdWx0VmFsdWUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gZmllbGQuZGVmYXVsdFZhbHVlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmllbGQuZGVmYXVsdFZhbHVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdmFsdWU7XG59XG5cbmxldCBkZWJ1Z0xvZ3MgPSBbXTtcbmxldCB0cmFuc2FjdGlvbklkID0gLTE7XG5jb25zdCBjb2xvcnMgPSB7XG4gIHJlc2V0OiBcIlxceDFCWzBtXCIsXG4gIGJyaWdodDogXCJcXHgxQlsxbVwiLFxuICBkaW06IFwiXFx4MUJbMm1cIixcbiAgZmc6IHtcbiAgICB5ZWxsb3c6IFwiXFx4MUJbMzNtXCIsXG4gICAgbWFnZW50YTogXCJcXHgxQlszNW1cIn0sXG4gIGJnOiB7XG4gICAgYmxhY2s6IFwiXFx4MUJbNDBtXCJ9XG59O1xuY29uc3QgY3JlYXRlQWRhcHRlciA9ICh7XG4gIGFkYXB0ZXIsXG4gIGNvbmZpZzogY2ZnXG59KSA9PiAob3B0aW9ucykgPT4ge1xuICBjb25zdCBjb25maWcgPSB7XG4gICAgLi4uY2ZnLFxuICAgIHN1cHBvcnRzQm9vbGVhbnM6IGNmZy5zdXBwb3J0c0Jvb2xlYW5zID8/IHRydWUsXG4gICAgc3VwcG9ydHNEYXRlczogY2ZnLnN1cHBvcnRzRGF0ZXMgPz8gdHJ1ZSxcbiAgICBzdXBwb3J0c0pTT046IGNmZy5zdXBwb3J0c0pTT04gPz8gZmFsc2UsXG4gICAgYWRhcHRlck5hbWU6IGNmZy5hZGFwdGVyTmFtZSA/PyBjZmcuYWRhcHRlcklkLFxuICAgIHN1cHBvcnRzTnVtZXJpY0lkczogY2ZnLnN1cHBvcnRzTnVtZXJpY0lkcyA/PyB0cnVlXG4gIH07XG4gIGlmIChvcHRpb25zLmFkdmFuY2VkPy5kYXRhYmFzZT8udXNlTnVtYmVySWQgPT09IHRydWUgJiYgY29uZmlnLnN1cHBvcnRzTnVtZXJpY0lkcyA9PT0gZmFsc2UpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgWyR7Y29uZmlnLmFkYXB0ZXJOYW1lfV0gWW91ciBkYXRhYmFzZSBvciBkYXRhYmFzZSBhZGFwdGVyIGRvZXMgbm90IHN1cHBvcnQgbnVtZXJpYyBpZHMuIFBsZWFzZSBkaXNhYmxlIFwidXNlTnVtYmVySWRcIiBpbiB5b3VyIGNvbmZpZy5gXG4gICAgKTtcbiAgfVxuICBjb25zdCBzY2hlbWEgPSBnZXRBdXRoVGFibGVzKG9wdGlvbnMpO1xuICBjb25zdCBnZXREZWZhdWx0RmllbGROYW1lID0gKHtcbiAgICBmaWVsZCxcbiAgICBtb2RlbDogdW5zYWZlX21vZGVsXG4gIH0pID0+IHtcbiAgICBpZiAoZmllbGQgPT09IFwiaWRcIiB8fCBmaWVsZCA9PT0gXCJfaWRcIikge1xuICAgICAgcmV0dXJuIFwiaWRcIjtcbiAgICB9XG4gICAgY29uc3QgbW9kZWwgPSBnZXREZWZhdWx0TW9kZWxOYW1lKHVuc2FmZV9tb2RlbCk7XG4gICAgbGV0IGYgPSBzY2hlbWFbbW9kZWxdPy5maWVsZHNbZmllbGRdO1xuICAgIGlmICghZikge1xuICAgICAgZiA9IE9iamVjdC52YWx1ZXMoc2NoZW1hW21vZGVsXT8uZmllbGRzKS5maW5kKFxuICAgICAgICAoZjIpID0+IGYyLmZpZWxkTmFtZSA9PT0gZmllbGRcbiAgICAgICk7XG4gICAgfVxuICAgIGlmICghZikge1xuICAgICAgZGVidWdMb2coYEZpZWxkICR7ZmllbGR9IG5vdCBmb3VuZCBpbiBtb2RlbCAke21vZGVsfWApO1xuICAgICAgZGVidWdMb2coYFNjaGVtYTpgLCBzY2hlbWEpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGaWVsZCAke2ZpZWxkfSBub3QgZm91bmQgaW4gbW9kZWwgJHttb2RlbH1gKTtcbiAgICB9XG4gICAgcmV0dXJuIGZpZWxkO1xuICB9O1xuICBjb25zdCBnZXREZWZhdWx0TW9kZWxOYW1lID0gKG1vZGVsKSA9PiB7XG4gICAgaWYgKGNvbmZpZy51c2VQbHVyYWwgJiYgbW9kZWwuY2hhckF0KG1vZGVsLmxlbmd0aCAtIDEpID09PSBcInNcIikge1xuICAgICAgbGV0IHBsdXJhbGVzc01vZGVsID0gbW9kZWwuc2xpY2UoMCwgLTEpO1xuICAgICAgbGV0IG0yID0gc2NoZW1hW3BsdXJhbGVzc01vZGVsXSA/IHBsdXJhbGVzc01vZGVsIDogdm9pZCAwO1xuICAgICAgaWYgKCFtMikge1xuICAgICAgICBtMiA9IE9iamVjdC5lbnRyaWVzKHNjaGVtYSkuZmluZChcbiAgICAgICAgICAoW18sIGZdKSA9PiBmLm1vZGVsTmFtZSA9PT0gcGx1cmFsZXNzTW9kZWxcbiAgICAgICAgKT8uWzBdO1xuICAgICAgfVxuICAgICAgaWYgKG0yKSB7XG4gICAgICAgIHJldHVybiBtMjtcbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IG0gPSBzY2hlbWFbbW9kZWxdID8gbW9kZWwgOiB2b2lkIDA7XG4gICAgaWYgKCFtKSB7XG4gICAgICBtID0gT2JqZWN0LmVudHJpZXMoc2NoZW1hKS5maW5kKChbXywgZl0pID0+IGYubW9kZWxOYW1lID09PSBtb2RlbCk/LlswXTtcbiAgICB9XG4gICAgaWYgKCFtKSB7XG4gICAgICBkZWJ1Z0xvZyhgTW9kZWwgXCIke21vZGVsfVwiIG5vdCBmb3VuZCBpbiBzY2hlbWFgKTtcbiAgICAgIGRlYnVnTG9nKGBTY2hlbWE6YCwgc2NoZW1hKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTW9kZWwgXCIke21vZGVsfVwiIG5vdCBmb3VuZCBpbiBzY2hlbWFgKTtcbiAgICB9XG4gICAgcmV0dXJuIG07XG4gIH07XG4gIGNvbnN0IGdldE1vZGVsTmFtZSA9IChtb2RlbCkgPT4ge1xuICAgIGNvbnN0IGRlZmF1bHRNb2RlbEtleSA9IGdldERlZmF1bHRNb2RlbE5hbWUobW9kZWwpO1xuICAgIGNvbnN0IHVzZVBsdXJhbCA9IGNvbmZpZyAmJiBjb25maWcudXNlUGx1cmFsO1xuICAgIGNvbnN0IHVzZUN1c3RvbU1vZGVsTmFtZSA9IHNjaGVtYSAmJiBzY2hlbWFbZGVmYXVsdE1vZGVsS2V5XSAmJiBzY2hlbWFbZGVmYXVsdE1vZGVsS2V5XS5tb2RlbE5hbWUgIT09IG1vZGVsO1xuICAgIGlmICh1c2VDdXN0b21Nb2RlbE5hbWUpIHtcbiAgICAgIHJldHVybiB1c2VQbHVyYWwgPyBgJHtzY2hlbWFbZGVmYXVsdE1vZGVsS2V5XS5tb2RlbE5hbWV9c2AgOiBzY2hlbWFbZGVmYXVsdE1vZGVsS2V5XS5tb2RlbE5hbWU7XG4gICAgfVxuICAgIHJldHVybiB1c2VQbHVyYWwgPyBgJHttb2RlbH1zYCA6IG1vZGVsO1xuICB9O1xuICBmdW5jdGlvbiBnZXRGaWVsZE5hbWUoe1xuICAgIG1vZGVsOiBtb2RlbF9uYW1lLFxuICAgIGZpZWxkOiBmaWVsZF9uYW1lXG4gIH0pIHtcbiAgICBjb25zdCBtb2RlbCA9IGdldERlZmF1bHRNb2RlbE5hbWUobW9kZWxfbmFtZSk7XG4gICAgY29uc3QgZmllbGQgPSBnZXREZWZhdWx0RmllbGROYW1lKHsgbW9kZWwsIGZpZWxkOiBmaWVsZF9uYW1lIH0pO1xuICAgIHJldHVybiBzY2hlbWFbbW9kZWxdPy5maWVsZHNbZmllbGRdPy5maWVsZE5hbWUgfHwgZmllbGQ7XG4gIH1cbiAgY29uc3QgZGVidWdMb2cgPSAoLi4uYXJncykgPT4ge1xuICAgIGlmIChjb25maWcuZGVidWdMb2dzID09PSB0cnVlIHx8IHR5cGVvZiBjb25maWcuZGVidWdMb2dzID09PSBcIm9iamVjdFwiKSB7XG4gICAgICBpZiAodHlwZW9mIGNvbmZpZy5kZWJ1Z0xvZ3MgPT09IFwib2JqZWN0XCIgJiYgXCJpc1J1bm5pbmdBZGFwdGVyVGVzdHNcIiBpbiBjb25maWcuZGVidWdMb2dzKSB7XG4gICAgICAgIGlmIChjb25maWcuZGVidWdMb2dzLmlzUnVubmluZ0FkYXB0ZXJUZXN0cykge1xuICAgICAgICAgIGFyZ3Muc2hpZnQoKTtcbiAgICAgICAgICBkZWJ1Z0xvZ3MucHVzaChhcmdzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGNvbmZpZy5kZWJ1Z0xvZ3MgPT09IFwib2JqZWN0XCIgJiYgY29uZmlnLmRlYnVnTG9ncy5sb2dDb25kaXRpb24gJiYgIWNvbmZpZy5kZWJ1Z0xvZ3MubG9nQ29uZGl0aW9uPy4oKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGFyZ3NbMF0gPT09IFwib2JqZWN0XCIgJiYgXCJtZXRob2RcIiBpbiBhcmdzWzBdKSB7XG4gICAgICAgIGNvbnN0IG1ldGhvZCA9IGFyZ3Muc2hpZnQoKS5tZXRob2Q7XG4gICAgICAgIGlmICh0eXBlb2YgY29uZmlnLmRlYnVnTG9ncyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgIGlmIChtZXRob2QgPT09IFwiY3JlYXRlXCIgJiYgIWNvbmZpZy5kZWJ1Z0xvZ3MuY3JlYXRlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfSBlbHNlIGlmIChtZXRob2QgPT09IFwidXBkYXRlXCIgJiYgIWNvbmZpZy5kZWJ1Z0xvZ3MudXBkYXRlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfSBlbHNlIGlmIChtZXRob2QgPT09IFwidXBkYXRlTWFueVwiICYmICFjb25maWcuZGVidWdMb2dzLnVwZGF0ZU1hbnkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9IGVsc2UgaWYgKG1ldGhvZCA9PT0gXCJmaW5kT25lXCIgJiYgIWNvbmZpZy5kZWJ1Z0xvZ3MuZmluZE9uZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH0gZWxzZSBpZiAobWV0aG9kID09PSBcImZpbmRNYW55XCIgJiYgIWNvbmZpZy5kZWJ1Z0xvZ3MuZmluZE1hbnkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9IGVsc2UgaWYgKG1ldGhvZCA9PT0gXCJkZWxldGVcIiAmJiAhY29uZmlnLmRlYnVnTG9ncy5kZWxldGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9IGVsc2UgaWYgKG1ldGhvZCA9PT0gXCJkZWxldGVNYW55XCIgJiYgIWNvbmZpZy5kZWJ1Z0xvZ3MuZGVsZXRlTWFueSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH0gZWxzZSBpZiAobWV0aG9kID09PSBcImNvdW50XCIgJiYgIWNvbmZpZy5kZWJ1Z0xvZ3MuY291bnQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmluZm8oYFske2NvbmZpZy5hZGFwdGVyTmFtZX1dYCwgLi4uYXJncyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2dnZXIuaW5mbyhgWyR7Y29uZmlnLmFkYXB0ZXJOYW1lfV1gLCAuLi5hcmdzKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGNvbnN0IGlkRmllbGQgPSAoe1xuICAgIGN1c3RvbU1vZGVsTmFtZSxcbiAgICBmb3JjZUFsbG93SWRcbiAgfSkgPT4ge1xuICAgIGNvbnN0IHNob3VsZEdlbmVyYXRlSWQgPSAhY29uZmlnLmRpc2FibGVJZEdlbmVyYXRpb24gJiYgIW9wdGlvbnMuYWR2YW5jZWQ/LmRhdGFiYXNlPy51c2VOdW1iZXJJZCAmJiAhZm9yY2VBbGxvd0lkO1xuICAgIGNvbnN0IG1vZGVsID0gZ2V0RGVmYXVsdE1vZGVsTmFtZShjdXN0b21Nb2RlbE5hbWUgPz8gXCJpZFwiKTtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogb3B0aW9ucy5hZHZhbmNlZD8uZGF0YWJhc2U/LnVzZU51bWJlcklkID8gXCJudW1iZXJcIiA6IFwic3RyaW5nXCIsXG4gICAgICByZXF1aXJlZDogc2hvdWxkR2VuZXJhdGVJZCA/IHRydWUgOiBmYWxzZSxcbiAgICAgIC4uLnNob3VsZEdlbmVyYXRlSWQgPyB7XG4gICAgICAgIGRlZmF1bHRWYWx1ZSgpIHtcbiAgICAgICAgICBpZiAoY29uZmlnLmRpc2FibGVJZEdlbmVyYXRpb24pIHJldHVybiB2b2lkIDA7XG4gICAgICAgICAgY29uc3QgdXNlTnVtYmVySWQgPSBvcHRpb25zLmFkdmFuY2VkPy5kYXRhYmFzZT8udXNlTnVtYmVySWQ7XG4gICAgICAgICAgbGV0IGdlbmVyYXRlSWQkMSA9IG9wdGlvbnMuYWR2YW5jZWQ/LmRhdGFiYXNlPy5nZW5lcmF0ZUlkO1xuICAgICAgICAgIGlmIChvcHRpb25zLmFkdmFuY2VkPy5nZW5lcmF0ZUlkICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKFxuICAgICAgICAgICAgICBcIllvdXIgQmV0dGVyIEF1dGggY29uZmlnIGluY2x1ZGVzIGFkdmFuY2VkLmdlbmVyYXRlSWQgd2hpY2ggaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBhZHZhbmNlZC5kYXRhYmFzZS5nZW5lcmF0ZUlkIGluc3RlYWQuIFRoaXMgd2lsbCBiZSByZW1vdmVkIGluIGZ1dHVyZSByZWxlYXNlcy5cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGdlbmVyYXRlSWQkMSA9IG9wdGlvbnMuYWR2YW5jZWQ/LmdlbmVyYXRlSWQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChnZW5lcmF0ZUlkJDEgPT09IGZhbHNlIHx8IHVzZU51bWJlcklkKSByZXR1cm4gdm9pZCAwO1xuICAgICAgICAgIGlmIChnZW5lcmF0ZUlkJDEpIHtcbiAgICAgICAgICAgIHJldHVybiBnZW5lcmF0ZUlkJDEoe1xuICAgICAgICAgICAgICBtb2RlbFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjb25maWcuY3VzdG9tSWRHZW5lcmF0b3IpIHtcbiAgICAgICAgICAgIHJldHVybiBjb25maWcuY3VzdG9tSWRHZW5lcmF0b3IoeyBtb2RlbCB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGdlbmVyYXRlSWQoKTtcbiAgICAgICAgfVxuICAgICAgfSA6IHt9XG4gICAgfTtcbiAgfTtcbiAgY29uc3QgZ2V0RmllbGRBdHRyaWJ1dGVzID0gKHtcbiAgICBtb2RlbCxcbiAgICBmaWVsZFxuICB9KSA9PiB7XG4gICAgY29uc3QgZGVmYXVsdE1vZGVsTmFtZSA9IGdldERlZmF1bHRNb2RlbE5hbWUobW9kZWwpO1xuICAgIGNvbnN0IGRlZmF1bHRGaWVsZE5hbWUgPSBnZXREZWZhdWx0RmllbGROYW1lKHtcbiAgICAgIGZpZWxkLFxuICAgICAgbW9kZWxcbiAgICB9KTtcbiAgICBjb25zdCBmaWVsZHMgPSBzY2hlbWFbZGVmYXVsdE1vZGVsTmFtZV0uZmllbGRzO1xuICAgIGZpZWxkcy5pZCA9IGlkRmllbGQoeyBjdXN0b21Nb2RlbE5hbWU6IGRlZmF1bHRNb2RlbE5hbWUgfSk7XG4gICAgcmV0dXJuIGZpZWxkc1tkZWZhdWx0RmllbGROYW1lXTtcbiAgfTtcbiAgY29uc3QgYWRhcHRlckluc3RhbmNlID0gYWRhcHRlcih7XG4gICAgb3B0aW9ucyxcbiAgICBzY2hlbWEsXG4gICAgZGVidWdMb2csXG4gICAgZ2V0RmllbGROYW1lLFxuICAgIGdldE1vZGVsTmFtZSxcbiAgICBnZXREZWZhdWx0TW9kZWxOYW1lLFxuICAgIGdldERlZmF1bHRGaWVsZE5hbWUsXG4gICAgZ2V0RmllbGRBdHRyaWJ1dGVzXG4gIH0pO1xuICBjb25zdCB0cmFuc2Zvcm1JbnB1dCA9IGFzeW5jIChkYXRhLCB1bnNhZmVfbW9kZWwsIGFjdGlvbiwgZm9yY2VBbGxvd0lkKSA9PiB7XG4gICAgY29uc3QgdHJhbnNmb3JtZWREYXRhID0ge307XG4gICAgY29uc3QgZmllbGRzID0gc2NoZW1hW3Vuc2FmZV9tb2RlbF0uZmllbGRzO1xuICAgIGNvbnN0IG5ld01hcHBlZEtleXMgPSBjb25maWcubWFwS2V5c1RyYW5zZm9ybUlucHV0ID8/IHt9O1xuICAgIGlmICghY29uZmlnLmRpc2FibGVJZEdlbmVyYXRpb24gJiYgIW9wdGlvbnMuYWR2YW5jZWQ/LmRhdGFiYXNlPy51c2VOdW1iZXJJZCkge1xuICAgICAgZmllbGRzLmlkID0gaWRGaWVsZCh7XG4gICAgICAgIGN1c3RvbU1vZGVsTmFtZTogdW5zYWZlX21vZGVsLFxuICAgICAgICBmb3JjZUFsbG93SWQ6IGZvcmNlQWxsb3dJZCAmJiBcImlkXCIgaW4gZGF0YVxuICAgICAgfSk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgZmllbGQgaW4gZmllbGRzKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGRhdGFbZmllbGRdO1xuICAgICAgY29uc3QgZmllbGRBdHRyaWJ1dGVzID0gZmllbGRzW2ZpZWxkXTtcbiAgICAgIGxldCBuZXdGaWVsZE5hbWUgPSBuZXdNYXBwZWRLZXlzW2ZpZWxkXSB8fCBmaWVsZHNbZmllbGRdLmZpZWxkTmFtZSB8fCBmaWVsZDtcbiAgICAgIGlmICh2YWx1ZSA9PT0gdm9pZCAwICYmIChmaWVsZEF0dHJpYnV0ZXMuZGVmYXVsdFZhbHVlID09PSB2b2lkIDAgJiYgIWZpZWxkQXR0cmlidXRlcy50cmFuc2Zvcm0/LmlucHV0ICYmICEoYWN0aW9uID09PSBcInVwZGF0ZVwiICYmIGZpZWxkQXR0cmlidXRlcy5vblVwZGF0ZSkgfHwgYWN0aW9uID09PSBcInVwZGF0ZVwiICYmICFmaWVsZEF0dHJpYnV0ZXMub25VcGRhdGUpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgbGV0IG5ld1ZhbHVlID0gd2l0aEFwcGx5RGVmYXVsdCh2YWx1ZSwgZmllbGRBdHRyaWJ1dGVzLCBhY3Rpb24pO1xuICAgICAgaWYgKGZpZWxkQXR0cmlidXRlcy50cmFuc2Zvcm0/LmlucHV0KSB7XG4gICAgICAgIG5ld1ZhbHVlID0gYXdhaXQgZmllbGRBdHRyaWJ1dGVzLnRyYW5zZm9ybS5pbnB1dChuZXdWYWx1ZSk7XG4gICAgICB9XG4gICAgICBpZiAoZmllbGRBdHRyaWJ1dGVzLnJlZmVyZW5jZXM/LmZpZWxkID09PSBcImlkXCIgJiYgb3B0aW9ucy5hZHZhbmNlZD8uZGF0YWJhc2U/LnVzZU51bWJlcklkKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5ld1ZhbHVlKSkge1xuICAgICAgICAgIG5ld1ZhbHVlID0gbmV3VmFsdWUubWFwKE51bWJlcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3VmFsdWUgPSBOdW1iZXIobmV3VmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGNvbmZpZy5zdXBwb3J0c0pTT04gPT09IGZhbHNlICYmIHR5cGVvZiBuZXdWYWx1ZSA9PT0gXCJvYmplY3RcIiAmJiBmaWVsZEF0dHJpYnV0ZXMudHlwZSA9PT0gXCJqc29uXCIpIHtcbiAgICAgICAgbmV3VmFsdWUgPSBKU09OLnN0cmluZ2lmeShuZXdWYWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKGNvbmZpZy5zdXBwb3J0c0RhdGVzID09PSBmYWxzZSAmJiBuZXdWYWx1ZSBpbnN0YW5jZW9mIERhdGUgJiYgZmllbGRBdHRyaWJ1dGVzLnR5cGUgPT09IFwiZGF0ZVwiKSB7XG4gICAgICAgIG5ld1ZhbHVlID0gbmV3VmFsdWUudG9JU09TdHJpbmcoKTtcbiAgICAgIH0gZWxzZSBpZiAoY29uZmlnLnN1cHBvcnRzQm9vbGVhbnMgPT09IGZhbHNlICYmIHR5cGVvZiBuZXdWYWx1ZSA9PT0gXCJib29sZWFuXCIpIHtcbiAgICAgICAgbmV3VmFsdWUgPSBuZXdWYWx1ZSA/IDEgOiAwO1xuICAgICAgfVxuICAgICAgaWYgKGNvbmZpZy5jdXN0b21UcmFuc2Zvcm1JbnB1dCkge1xuICAgICAgICBuZXdWYWx1ZSA9IGNvbmZpZy5jdXN0b21UcmFuc2Zvcm1JbnB1dCh7XG4gICAgICAgICAgZGF0YTogbmV3VmFsdWUsXG4gICAgICAgICAgYWN0aW9uLFxuICAgICAgICAgIGZpZWxkOiBuZXdGaWVsZE5hbWUsXG4gICAgICAgICAgZmllbGRBdHRyaWJ1dGVzLFxuICAgICAgICAgIG1vZGVsOiB1bnNhZmVfbW9kZWwsXG4gICAgICAgICAgc2NoZW1hLFxuICAgICAgICAgIG9wdGlvbnNcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAobmV3VmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgICB0cmFuc2Zvcm1lZERhdGFbbmV3RmllbGROYW1lXSA9IG5ld1ZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJhbnNmb3JtZWREYXRhO1xuICB9O1xuICBjb25zdCB0cmFuc2Zvcm1PdXRwdXQgPSBhc3luYyAoZGF0YSwgdW5zYWZlX21vZGVsLCBzZWxlY3QgPSBbXSkgPT4ge1xuICAgIGlmICghZGF0YSkgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgbmV3TWFwcGVkS2V5cyA9IGNvbmZpZy5tYXBLZXlzVHJhbnNmb3JtT3V0cHV0ID8/IHt9O1xuICAgIGNvbnN0IHRyYW5zZm9ybWVkRGF0YSA9IHt9O1xuICAgIGNvbnN0IHRhYmxlU2NoZW1hID0gc2NoZW1hW3Vuc2FmZV9tb2RlbF0uZmllbGRzO1xuICAgIGNvbnN0IGlkS2V5ID0gT2JqZWN0LmVudHJpZXMobmV3TWFwcGVkS2V5cykuZmluZChcbiAgICAgIChbXywgdl0pID0+IHYgPT09IFwiaWRcIlxuICAgICk/LlswXTtcbiAgICB0YWJsZVNjaGVtYVtpZEtleSA/PyBcImlkXCJdID0ge1xuICAgICAgdHlwZTogb3B0aW9ucy5hZHZhbmNlZD8uZGF0YWJhc2U/LnVzZU51bWJlcklkID8gXCJudW1iZXJcIiA6IFwic3RyaW5nXCJcbiAgICB9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIHRhYmxlU2NoZW1hKSB7XG4gICAgICBpZiAoc2VsZWN0Lmxlbmd0aCAmJiAhc2VsZWN0LmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCBmaWVsZCA9IHRhYmxlU2NoZW1hW2tleV07XG4gICAgICBpZiAoZmllbGQpIHtcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxLZXkgPSBmaWVsZC5maWVsZE5hbWUgfHwga2V5O1xuICAgICAgICBsZXQgbmV3VmFsdWUgPSBkYXRhW09iamVjdC5lbnRyaWVzKG5ld01hcHBlZEtleXMpLmZpbmQoXG4gICAgICAgICAgKFtfLCB2XSkgPT4gdiA9PT0gb3JpZ2luYWxLZXlcbiAgICAgICAgKT8uWzBdIHx8IG9yaWdpbmFsS2V5XTtcbiAgICAgICAgaWYgKGZpZWxkLnRyYW5zZm9ybT8ub3V0cHV0KSB7XG4gICAgICAgICAgbmV3VmFsdWUgPSBhd2FpdCBmaWVsZC50cmFuc2Zvcm0ub3V0cHV0KG5ld1ZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbmV3RmllbGROYW1lID0gbmV3TWFwcGVkS2V5c1trZXldIHx8IGtleTtcbiAgICAgICAgaWYgKG9yaWdpbmFsS2V5ID09PSBcImlkXCIgfHwgZmllbGQucmVmZXJlbmNlcz8uZmllbGQgPT09IFwiaWRcIikge1xuICAgICAgICAgIGlmICh0eXBlb2YgbmV3VmFsdWUgIT09IFwidW5kZWZpbmVkXCIpIG5ld1ZhbHVlID0gU3RyaW5nKG5ld1ZhbHVlKTtcbiAgICAgICAgfSBlbHNlIGlmIChjb25maWcuc3VwcG9ydHNKU09OID09PSBmYWxzZSAmJiB0eXBlb2YgbmV3VmFsdWUgPT09IFwic3RyaW5nXCIgJiYgZmllbGQudHlwZSA9PT0gXCJqc29uXCIpIHtcbiAgICAgICAgICBuZXdWYWx1ZSA9IHNhZmVKU09OUGFyc2UobmV3VmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKGNvbmZpZy5zdXBwb3J0c0RhdGVzID09PSBmYWxzZSAmJiB0eXBlb2YgbmV3VmFsdWUgPT09IFwic3RyaW5nXCIgJiYgZmllbGQudHlwZSA9PT0gXCJkYXRlXCIpIHtcbiAgICAgICAgICBuZXdWYWx1ZSA9IG5ldyBEYXRlKG5ld1ZhbHVlKTtcbiAgICAgICAgfSBlbHNlIGlmIChjb25maWcuc3VwcG9ydHNCb29sZWFucyA9PT0gZmFsc2UgJiYgdHlwZW9mIG5ld1ZhbHVlID09PSBcIm51bWJlclwiICYmIGZpZWxkLnR5cGUgPT09IFwiYm9vbGVhblwiKSB7XG4gICAgICAgICAgbmV3VmFsdWUgPSBuZXdWYWx1ZSA9PT0gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29uZmlnLmN1c3RvbVRyYW5zZm9ybU91dHB1dCkge1xuICAgICAgICAgIG5ld1ZhbHVlID0gY29uZmlnLmN1c3RvbVRyYW5zZm9ybU91dHB1dCh7XG4gICAgICAgICAgICBkYXRhOiBuZXdWYWx1ZSxcbiAgICAgICAgICAgIGZpZWxkOiBuZXdGaWVsZE5hbWUsXG4gICAgICAgICAgICBmaWVsZEF0dHJpYnV0ZXM6IGZpZWxkLFxuICAgICAgICAgICAgc2VsZWN0LFxuICAgICAgICAgICAgbW9kZWw6IHVuc2FmZV9tb2RlbCxcbiAgICAgICAgICAgIHNjaGVtYSxcbiAgICAgICAgICAgIG9wdGlvbnNcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0cmFuc2Zvcm1lZERhdGFbbmV3RmllbGROYW1lXSA9IG5ld1ZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJhbnNmb3JtZWREYXRhO1xuICB9O1xuICBjb25zdCB0cmFuc2Zvcm1XaGVyZUNsYXVzZSA9ICh7XG4gICAgbW9kZWwsXG4gICAgd2hlcmVcbiAgfSkgPT4ge1xuICAgIGlmICghd2hlcmUpIHJldHVybiB2b2lkIDA7XG4gICAgY29uc3QgbmV3TWFwcGVkS2V5cyA9IGNvbmZpZy5tYXBLZXlzVHJhbnNmb3JtSW5wdXQgPz8ge307XG4gICAgcmV0dXJuIHdoZXJlLm1hcCgodykgPT4ge1xuICAgICAgY29uc3Qge1xuICAgICAgICBmaWVsZDogdW5zYWZlX2ZpZWxkLFxuICAgICAgICB2YWx1ZSxcbiAgICAgICAgb3BlcmF0b3IgPSBcImVxXCIsXG4gICAgICAgIGNvbm5lY3RvciA9IFwiQU5EXCJcbiAgICAgIH0gPSB3O1xuICAgICAgaWYgKG9wZXJhdG9yID09PSBcImluXCIpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlZhbHVlIG11c3QgYmUgYW4gYXJyYXlcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGRlZmF1bHRNb2RlbE5hbWUgPSBnZXREZWZhdWx0TW9kZWxOYW1lKG1vZGVsKTtcbiAgICAgIGNvbnN0IGRlZmF1bHRGaWVsZE5hbWUgPSBnZXREZWZhdWx0RmllbGROYW1lKHtcbiAgICAgICAgZmllbGQ6IHVuc2FmZV9maWVsZCxcbiAgICAgICAgbW9kZWxcbiAgICAgIH0pO1xuICAgICAgY29uc3QgZmllbGROYW1lID0gbmV3TWFwcGVkS2V5c1tkZWZhdWx0RmllbGROYW1lXSB8fCBnZXRGaWVsZE5hbWUoe1xuICAgICAgICBmaWVsZDogZGVmYXVsdEZpZWxkTmFtZSxcbiAgICAgICAgbW9kZWw6IGRlZmF1bHRNb2RlbE5hbWVcbiAgICAgIH0pO1xuICAgICAgY29uc3QgZmllbGRBdHRyID0gZ2V0RmllbGRBdHRyaWJ1dGVzKHtcbiAgICAgICAgZmllbGQ6IGRlZmF1bHRGaWVsZE5hbWUsXG4gICAgICAgIG1vZGVsOiBkZWZhdWx0TW9kZWxOYW1lXG4gICAgICB9KTtcbiAgICAgIGlmIChkZWZhdWx0RmllbGROYW1lID09PSBcImlkXCIgfHwgZmllbGRBdHRyLnJlZmVyZW5jZXM/LmZpZWxkID09PSBcImlkXCIpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMuYWR2YW5jZWQ/LmRhdGFiYXNlPy51c2VOdW1iZXJJZCkge1xuICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgb3BlcmF0b3IsXG4gICAgICAgICAgICAgIGNvbm5lY3RvcixcbiAgICAgICAgICAgICAgZmllbGQ6IGZpZWxkTmFtZSxcbiAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlLm1hcChOdW1iZXIpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb3BlcmF0b3IsXG4gICAgICAgICAgICBjb25uZWN0b3IsXG4gICAgICAgICAgICBmaWVsZDogZmllbGROYW1lLFxuICAgICAgICAgICAgdmFsdWU6IE51bWJlcih2YWx1ZSlcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICBvcGVyYXRvcixcbiAgICAgICAgY29ubmVjdG9yLFxuICAgICAgICBmaWVsZDogZmllbGROYW1lLFxuICAgICAgICB2YWx1ZVxuICAgICAgfTtcbiAgICB9KTtcbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBjcmVhdGU6IGFzeW5jICh7XG4gICAgICBkYXRhOiB1bnNhZmVEYXRhLFxuICAgICAgbW9kZWw6IHVuc2FmZU1vZGVsLFxuICAgICAgc2VsZWN0LFxuICAgICAgZm9yY2VBbGxvd0lkID0gZmFsc2VcbiAgICB9KSA9PiB7XG4gICAgICB0cmFuc2FjdGlvbklkKys7XG4gICAgICBsZXQgdGhpc1RyYW5zYWN0aW9uSWQgPSB0cmFuc2FjdGlvbklkO1xuICAgICAgY29uc3QgbW9kZWwgPSBnZXRNb2RlbE5hbWUodW5zYWZlTW9kZWwpO1xuICAgICAgaWYgKFwiaWRcIiBpbiB1bnNhZmVEYXRhICYmICFmb3JjZUFsbG93SWQpIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oXG4gICAgICAgICAgYFske2NvbmZpZy5hZGFwdGVyTmFtZX1dIC0gWW91IGFyZSB0cnlpbmcgdG8gY3JlYXRlIGEgcmVjb3JkIHdpdGggYW4gaWQuIFRoaXMgaXMgbm90IGFsbG93ZWQgYXMgd2UgaGFuZGxlIGlkIGdlbmVyYXRpb24gZm9yIHlvdSwgdW5sZXNzIHlvdSBwYXNzIGluIHRoZSBcXGBmb3JjZUFsbG93SWRcXGAgcGFyYW1ldGVyLiBUaGUgaWQgd2lsbCBiZSBpZ25vcmVkLmBcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgZXJyID0gbmV3IEVycm9yKCk7XG4gICAgICAgIGNvbnN0IHN0YWNrID0gZXJyLnN0YWNrPy5zcGxpdChcIlxcblwiKS5maWx0ZXIoKF8sIGkpID0+IGkgIT09IDEpLmpvaW4oXCJcXG5cIikucmVwbGFjZShcIkVycm9yOlwiLCBcIkNyZWF0ZSBtZXRob2Qgd2l0aCBgaWRgIGJlaW5nIGNhbGxlZCBhdDpcIik7XG4gICAgICAgIGNvbnNvbGUubG9nKHN0YWNrKTtcbiAgICAgICAgdW5zYWZlRGF0YS5pZCA9IHZvaWQgMDtcbiAgICAgIH1cbiAgICAgIGRlYnVnTG9nKFxuICAgICAgICB7IG1ldGhvZDogXCJjcmVhdGVcIiB9LFxuICAgICAgICBgJHtmb3JtYXRUcmFuc2FjdGlvbklkKHRoaXNUcmFuc2FjdGlvbklkKX0gJHtmb3JtYXRTdGVwKDEsIDQpfWAsXG4gICAgICAgIGAke2Zvcm1hdE1ldGhvZChcImNyZWF0ZVwiKX0gJHtmb3JtYXRBY3Rpb24oXCJVbnNhZmUgSW5wdXRcIil9OmAsXG4gICAgICAgIHsgbW9kZWwsIGRhdGE6IHVuc2FmZURhdGEgfVxuICAgICAgKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0cmFuc2Zvcm1JbnB1dChcbiAgICAgICAgdW5zYWZlRGF0YSxcbiAgICAgICAgdW5zYWZlTW9kZWwsXG4gICAgICAgIFwiY3JlYXRlXCIsXG4gICAgICAgIGZvcmNlQWxsb3dJZFxuICAgICAgKTtcbiAgICAgIGRlYnVnTG9nKFxuICAgICAgICB7IG1ldGhvZDogXCJjcmVhdGVcIiB9LFxuICAgICAgICBgJHtmb3JtYXRUcmFuc2FjdGlvbklkKHRoaXNUcmFuc2FjdGlvbklkKX0gJHtmb3JtYXRTdGVwKDIsIDQpfWAsXG4gICAgICAgIGAke2Zvcm1hdE1ldGhvZChcImNyZWF0ZVwiKX0gJHtmb3JtYXRBY3Rpb24oXCJQYXJzZWQgSW5wdXRcIil9OmAsXG4gICAgICAgIHsgbW9kZWwsIGRhdGEgfVxuICAgICAgKTtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFkYXB0ZXJJbnN0YW5jZS5jcmVhdGUoeyBkYXRhLCBtb2RlbCB9KTtcbiAgICAgIGRlYnVnTG9nKFxuICAgICAgICB7IG1ldGhvZDogXCJjcmVhdGVcIiB9LFxuICAgICAgICBgJHtmb3JtYXRUcmFuc2FjdGlvbklkKHRoaXNUcmFuc2FjdGlvbklkKX0gJHtmb3JtYXRTdGVwKDMsIDQpfWAsXG4gICAgICAgIGAke2Zvcm1hdE1ldGhvZChcImNyZWF0ZVwiKX0gJHtmb3JtYXRBY3Rpb24oXCJEQiBSZXN1bHRcIil9OmAsXG4gICAgICAgIHsgbW9kZWwsIHJlcyB9XG4gICAgICApO1xuICAgICAgY29uc3QgdHJhbnNmb3JtZWQgPSBhd2FpdCB0cmFuc2Zvcm1PdXRwdXQocmVzLCB1bnNhZmVNb2RlbCwgc2VsZWN0KTtcbiAgICAgIGRlYnVnTG9nKFxuICAgICAgICB7IG1ldGhvZDogXCJjcmVhdGVcIiB9LFxuICAgICAgICBgJHtmb3JtYXRUcmFuc2FjdGlvbklkKHRoaXNUcmFuc2FjdGlvbklkKX0gJHtmb3JtYXRTdGVwKDQsIDQpfWAsXG4gICAgICAgIGAke2Zvcm1hdE1ldGhvZChcImNyZWF0ZVwiKX0gJHtmb3JtYXRBY3Rpb24oXCJQYXJzZWQgUmVzdWx0XCIpfTpgLFxuICAgICAgICB7IG1vZGVsLCBkYXRhOiB0cmFuc2Zvcm1lZCB9XG4gICAgICApO1xuICAgICAgcmV0dXJuIHRyYW5zZm9ybWVkO1xuICAgIH0sXG4gICAgdXBkYXRlOiBhc3luYyAoe1xuICAgICAgbW9kZWw6IHVuc2FmZU1vZGVsLFxuICAgICAgd2hlcmU6IHVuc2FmZVdoZXJlLFxuICAgICAgdXBkYXRlOiB1bnNhZmVEYXRhXG4gICAgfSkgPT4ge1xuICAgICAgdHJhbnNhY3Rpb25JZCsrO1xuICAgICAgbGV0IHRoaXNUcmFuc2FjdGlvbklkID0gdHJhbnNhY3Rpb25JZDtcbiAgICAgIGNvbnN0IG1vZGVsID0gZ2V0TW9kZWxOYW1lKHVuc2FmZU1vZGVsKTtcbiAgICAgIGNvbnN0IHdoZXJlID0gdHJhbnNmb3JtV2hlcmVDbGF1c2Uoe1xuICAgICAgICBtb2RlbDogdW5zYWZlTW9kZWwsXG4gICAgICAgIHdoZXJlOiB1bnNhZmVXaGVyZVxuICAgICAgfSk7XG4gICAgICBkZWJ1Z0xvZyhcbiAgICAgICAgeyBtZXRob2Q6IFwidXBkYXRlXCIgfSxcbiAgICAgICAgYCR7Zm9ybWF0VHJhbnNhY3Rpb25JZCh0aGlzVHJhbnNhY3Rpb25JZCl9ICR7Zm9ybWF0U3RlcCgxLCA0KX1gLFxuICAgICAgICBgJHtmb3JtYXRNZXRob2QoXCJ1cGRhdGVcIil9ICR7Zm9ybWF0QWN0aW9uKFwiVW5zYWZlIElucHV0XCIpfTpgLFxuICAgICAgICB7IG1vZGVsLCBkYXRhOiB1bnNhZmVEYXRhIH1cbiAgICAgICk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgdHJhbnNmb3JtSW5wdXQoXG4gICAgICAgIHVuc2FmZURhdGEsXG4gICAgICAgIHVuc2FmZU1vZGVsLFxuICAgICAgICBcInVwZGF0ZVwiXG4gICAgICApO1xuICAgICAgZGVidWdMb2coXG4gICAgICAgIHsgbWV0aG9kOiBcInVwZGF0ZVwiIH0sXG4gICAgICAgIGAke2Zvcm1hdFRyYW5zYWN0aW9uSWQodGhpc1RyYW5zYWN0aW9uSWQpfSAke2Zvcm1hdFN0ZXAoMiwgNCl9YCxcbiAgICAgICAgYCR7Zm9ybWF0TWV0aG9kKFwidXBkYXRlXCIpfSAke2Zvcm1hdEFjdGlvbihcIlBhcnNlZCBJbnB1dFwiKX06YCxcbiAgICAgICAgeyBtb2RlbCwgZGF0YSB9XG4gICAgICApO1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgYWRhcHRlckluc3RhbmNlLnVwZGF0ZSh7XG4gICAgICAgIG1vZGVsLFxuICAgICAgICB3aGVyZSxcbiAgICAgICAgdXBkYXRlOiBkYXRhXG4gICAgICB9KTtcbiAgICAgIGRlYnVnTG9nKFxuICAgICAgICB7IG1ldGhvZDogXCJ1cGRhdGVcIiB9LFxuICAgICAgICBgJHtmb3JtYXRUcmFuc2FjdGlvbklkKHRoaXNUcmFuc2FjdGlvbklkKX0gJHtmb3JtYXRTdGVwKDMsIDQpfWAsXG4gICAgICAgIGAke2Zvcm1hdE1ldGhvZChcInVwZGF0ZVwiKX0gJHtmb3JtYXRBY3Rpb24oXCJEQiBSZXN1bHRcIil9OmAsXG4gICAgICAgIHsgbW9kZWwsIGRhdGE6IHJlcyB9XG4gICAgICApO1xuICAgICAgY29uc3QgdHJhbnNmb3JtZWQgPSBhd2FpdCB0cmFuc2Zvcm1PdXRwdXQocmVzLCB1bnNhZmVNb2RlbCk7XG4gICAgICBkZWJ1Z0xvZyhcbiAgICAgICAgeyBtZXRob2Q6IFwidXBkYXRlXCIgfSxcbiAgICAgICAgYCR7Zm9ybWF0VHJhbnNhY3Rpb25JZCh0aGlzVHJhbnNhY3Rpb25JZCl9ICR7Zm9ybWF0U3RlcCg0LCA0KX1gLFxuICAgICAgICBgJHtmb3JtYXRNZXRob2QoXCJ1cGRhdGVcIil9ICR7Zm9ybWF0QWN0aW9uKFwiUGFyc2VkIFJlc3VsdFwiKX06YCxcbiAgICAgICAgeyBtb2RlbCwgZGF0YTogdHJhbnNmb3JtZWQgfVxuICAgICAgKTtcbiAgICAgIHJldHVybiB0cmFuc2Zvcm1lZDtcbiAgICB9LFxuICAgIHVwZGF0ZU1hbnk6IGFzeW5jICh7XG4gICAgICBtb2RlbDogdW5zYWZlTW9kZWwsXG4gICAgICB3aGVyZTogdW5zYWZlV2hlcmUsXG4gICAgICB1cGRhdGU6IHVuc2FmZURhdGFcbiAgICB9KSA9PiB7XG4gICAgICB0cmFuc2FjdGlvbklkKys7XG4gICAgICBsZXQgdGhpc1RyYW5zYWN0aW9uSWQgPSB0cmFuc2FjdGlvbklkO1xuICAgICAgY29uc3QgbW9kZWwgPSBnZXRNb2RlbE5hbWUodW5zYWZlTW9kZWwpO1xuICAgICAgY29uc3Qgd2hlcmUgPSB0cmFuc2Zvcm1XaGVyZUNsYXVzZSh7XG4gICAgICAgIG1vZGVsOiB1bnNhZmVNb2RlbCxcbiAgICAgICAgd2hlcmU6IHVuc2FmZVdoZXJlXG4gICAgICB9KTtcbiAgICAgIGRlYnVnTG9nKFxuICAgICAgICB7IG1ldGhvZDogXCJ1cGRhdGVNYW55XCIgfSxcbiAgICAgICAgYCR7Zm9ybWF0VHJhbnNhY3Rpb25JZCh0aGlzVHJhbnNhY3Rpb25JZCl9ICR7Zm9ybWF0U3RlcCgxLCA0KX1gLFxuICAgICAgICBgJHtmb3JtYXRNZXRob2QoXCJ1cGRhdGVNYW55XCIpfSAke2Zvcm1hdEFjdGlvbihcIlVuc2FmZSBJbnB1dFwiKX06YCxcbiAgICAgICAgeyBtb2RlbCwgZGF0YTogdW5zYWZlRGF0YSB9XG4gICAgICApO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRyYW5zZm9ybUlucHV0KHVuc2FmZURhdGEsIHVuc2FmZU1vZGVsLCBcInVwZGF0ZVwiKTtcbiAgICAgIGRlYnVnTG9nKFxuICAgICAgICB7IG1ldGhvZDogXCJ1cGRhdGVNYW55XCIgfSxcbiAgICAgICAgYCR7Zm9ybWF0VHJhbnNhY3Rpb25JZCh0aGlzVHJhbnNhY3Rpb25JZCl9ICR7Zm9ybWF0U3RlcCgyLCA0KX1gLFxuICAgICAgICBgJHtmb3JtYXRNZXRob2QoXCJ1cGRhdGVNYW55XCIpfSAke2Zvcm1hdEFjdGlvbihcIlBhcnNlZCBJbnB1dFwiKX06YCxcbiAgICAgICAgeyBtb2RlbCwgZGF0YSB9XG4gICAgICApO1xuICAgICAgY29uc3QgdXBkYXRlZENvdW50ID0gYXdhaXQgYWRhcHRlckluc3RhbmNlLnVwZGF0ZU1hbnkoe1xuICAgICAgICBtb2RlbCxcbiAgICAgICAgd2hlcmUsXG4gICAgICAgIHVwZGF0ZTogZGF0YVxuICAgICAgfSk7XG4gICAgICBkZWJ1Z0xvZyhcbiAgICAgICAgeyBtZXRob2Q6IFwidXBkYXRlTWFueVwiIH0sXG4gICAgICAgIGAke2Zvcm1hdFRyYW5zYWN0aW9uSWQodGhpc1RyYW5zYWN0aW9uSWQpfSAke2Zvcm1hdFN0ZXAoMywgNCl9YCxcbiAgICAgICAgYCR7Zm9ybWF0TWV0aG9kKFwidXBkYXRlTWFueVwiKX0gJHtmb3JtYXRBY3Rpb24oXCJEQiBSZXN1bHRcIil9OmAsXG4gICAgICAgIHsgbW9kZWwsIGRhdGE6IHVwZGF0ZWRDb3VudCB9XG4gICAgICApO1xuICAgICAgZGVidWdMb2coXG4gICAgICAgIHsgbWV0aG9kOiBcInVwZGF0ZU1hbnlcIiB9LFxuICAgICAgICBgJHtmb3JtYXRUcmFuc2FjdGlvbklkKHRoaXNUcmFuc2FjdGlvbklkKX0gJHtmb3JtYXRTdGVwKDQsIDQpfWAsXG4gICAgICAgIGAke2Zvcm1hdE1ldGhvZChcInVwZGF0ZU1hbnlcIil9ICR7Zm9ybWF0QWN0aW9uKFwiUGFyc2VkIFJlc3VsdFwiKX06YCxcbiAgICAgICAgeyBtb2RlbCwgZGF0YTogdXBkYXRlZENvdW50IH1cbiAgICAgICk7XG4gICAgICByZXR1cm4gdXBkYXRlZENvdW50O1xuICAgIH0sXG4gICAgZmluZE9uZTogYXN5bmMgKHtcbiAgICAgIG1vZGVsOiB1bnNhZmVNb2RlbCxcbiAgICAgIHdoZXJlOiB1bnNhZmVXaGVyZSxcbiAgICAgIHNlbGVjdFxuICAgIH0pID0+IHtcbiAgICAgIHRyYW5zYWN0aW9uSWQrKztcbiAgICAgIGxldCB0aGlzVHJhbnNhY3Rpb25JZCA9IHRyYW5zYWN0aW9uSWQ7XG4gICAgICBjb25zdCBtb2RlbCA9IGdldE1vZGVsTmFtZSh1bnNhZmVNb2RlbCk7XG4gICAgICBjb25zdCB3aGVyZSA9IHRyYW5zZm9ybVdoZXJlQ2xhdXNlKHtcbiAgICAgICAgbW9kZWw6IHVuc2FmZU1vZGVsLFxuICAgICAgICB3aGVyZTogdW5zYWZlV2hlcmVcbiAgICAgIH0pO1xuICAgICAgZGVidWdMb2coXG4gICAgICAgIHsgbWV0aG9kOiBcImZpbmRPbmVcIiB9LFxuICAgICAgICBgJHtmb3JtYXRUcmFuc2FjdGlvbklkKHRoaXNUcmFuc2FjdGlvbklkKX0gJHtmb3JtYXRTdGVwKDEsIDMpfWAsXG4gICAgICAgIGAke2Zvcm1hdE1ldGhvZChcImZpbmRPbmVcIil9OmAsXG4gICAgICAgIHsgbW9kZWwsIHdoZXJlLCBzZWxlY3QgfVxuICAgICAgKTtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFkYXB0ZXJJbnN0YW5jZS5maW5kT25lKHtcbiAgICAgICAgbW9kZWwsXG4gICAgICAgIHdoZXJlLFxuICAgICAgICBzZWxlY3RcbiAgICAgIH0pO1xuICAgICAgZGVidWdMb2coXG4gICAgICAgIHsgbWV0aG9kOiBcImZpbmRPbmVcIiB9LFxuICAgICAgICBgJHtmb3JtYXRUcmFuc2FjdGlvbklkKHRoaXNUcmFuc2FjdGlvbklkKX0gJHtmb3JtYXRTdGVwKDIsIDMpfWAsXG4gICAgICAgIGAke2Zvcm1hdE1ldGhvZChcImZpbmRPbmVcIil9ICR7Zm9ybWF0QWN0aW9uKFwiREIgUmVzdWx0XCIpfTpgLFxuICAgICAgICB7IG1vZGVsLCBkYXRhOiByZXMgfVxuICAgICAgKTtcbiAgICAgIGNvbnN0IHRyYW5zZm9ybWVkID0gYXdhaXQgdHJhbnNmb3JtT3V0cHV0KFxuICAgICAgICByZXMsXG4gICAgICAgIHVuc2FmZU1vZGVsLFxuICAgICAgICBzZWxlY3RcbiAgICAgICk7XG4gICAgICBkZWJ1Z0xvZyhcbiAgICAgICAgeyBtZXRob2Q6IFwiZmluZE9uZVwiIH0sXG4gICAgICAgIGAke2Zvcm1hdFRyYW5zYWN0aW9uSWQodGhpc1RyYW5zYWN0aW9uSWQpfSAke2Zvcm1hdFN0ZXAoMywgMyl9YCxcbiAgICAgICAgYCR7Zm9ybWF0TWV0aG9kKFwiZmluZE9uZVwiKX0gJHtmb3JtYXRBY3Rpb24oXCJQYXJzZWQgUmVzdWx0XCIpfTpgLFxuICAgICAgICB7IG1vZGVsLCBkYXRhOiB0cmFuc2Zvcm1lZCB9XG4gICAgICApO1xuICAgICAgcmV0dXJuIHRyYW5zZm9ybWVkO1xuICAgIH0sXG4gICAgZmluZE1hbnk6IGFzeW5jICh7XG4gICAgICBtb2RlbDogdW5zYWZlTW9kZWwsXG4gICAgICB3aGVyZTogdW5zYWZlV2hlcmUsXG4gICAgICBsaW1pdDogdW5zYWZlTGltaXQsXG4gICAgICBzb3J0QnksXG4gICAgICBvZmZzZXRcbiAgICB9KSA9PiB7XG4gICAgICB0cmFuc2FjdGlvbklkKys7XG4gICAgICBsZXQgdGhpc1RyYW5zYWN0aW9uSWQgPSB0cmFuc2FjdGlvbklkO1xuICAgICAgY29uc3QgbGltaXQgPSB1bnNhZmVMaW1pdCA/PyBvcHRpb25zLmFkdmFuY2VkPy5kYXRhYmFzZT8uZGVmYXVsdEZpbmRNYW55TGltaXQgPz8gMTAwO1xuICAgICAgY29uc3QgbW9kZWwgPSBnZXRNb2RlbE5hbWUodW5zYWZlTW9kZWwpO1xuICAgICAgY29uc3Qgd2hlcmUgPSB0cmFuc2Zvcm1XaGVyZUNsYXVzZSh7XG4gICAgICAgIG1vZGVsOiB1bnNhZmVNb2RlbCxcbiAgICAgICAgd2hlcmU6IHVuc2FmZVdoZXJlXG4gICAgICB9KTtcbiAgICAgIGRlYnVnTG9nKFxuICAgICAgICB7IG1ldGhvZDogXCJmaW5kTWFueVwiIH0sXG4gICAgICAgIGAke2Zvcm1hdFRyYW5zYWN0aW9uSWQodGhpc1RyYW5zYWN0aW9uSWQpfSAke2Zvcm1hdFN0ZXAoMSwgMyl9YCxcbiAgICAgICAgYCR7Zm9ybWF0TWV0aG9kKFwiZmluZE1hbnlcIil9OmAsXG4gICAgICAgIHsgbW9kZWwsIHdoZXJlLCBsaW1pdCwgc29ydEJ5LCBvZmZzZXQgfVxuICAgICAgKTtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFkYXB0ZXJJbnN0YW5jZS5maW5kTWFueSh7XG4gICAgICAgIG1vZGVsLFxuICAgICAgICB3aGVyZSxcbiAgICAgICAgbGltaXQsXG4gICAgICAgIHNvcnRCeSxcbiAgICAgICAgb2Zmc2V0XG4gICAgICB9KTtcbiAgICAgIGRlYnVnTG9nKFxuICAgICAgICB7IG1ldGhvZDogXCJmaW5kTWFueVwiIH0sXG4gICAgICAgIGAke2Zvcm1hdFRyYW5zYWN0aW9uSWQodGhpc1RyYW5zYWN0aW9uSWQpfSAke2Zvcm1hdFN0ZXAoMiwgMyl9YCxcbiAgICAgICAgYCR7Zm9ybWF0TWV0aG9kKFwiZmluZE1hbnlcIil9ICR7Zm9ybWF0QWN0aW9uKFwiREIgUmVzdWx0XCIpfTpgLFxuICAgICAgICB7IG1vZGVsLCBkYXRhOiByZXMgfVxuICAgICAgKTtcbiAgICAgIGNvbnN0IHRyYW5zZm9ybWVkID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgIHJlcy5tYXAoYXN5bmMgKHIpID0+IGF3YWl0IHRyYW5zZm9ybU91dHB1dChyLCB1bnNhZmVNb2RlbCkpXG4gICAgICApO1xuICAgICAgZGVidWdMb2coXG4gICAgICAgIHsgbWV0aG9kOiBcImZpbmRNYW55XCIgfSxcbiAgICAgICAgYCR7Zm9ybWF0VHJhbnNhY3Rpb25JZCh0aGlzVHJhbnNhY3Rpb25JZCl9ICR7Zm9ybWF0U3RlcCgzLCAzKX1gLFxuICAgICAgICBgJHtmb3JtYXRNZXRob2QoXCJmaW5kTWFueVwiKX0gJHtmb3JtYXRBY3Rpb24oXCJQYXJzZWQgUmVzdWx0XCIpfTpgLFxuICAgICAgICB7IG1vZGVsLCBkYXRhOiB0cmFuc2Zvcm1lZCB9XG4gICAgICApO1xuICAgICAgcmV0dXJuIHRyYW5zZm9ybWVkO1xuICAgIH0sXG4gICAgZGVsZXRlOiBhc3luYyAoe1xuICAgICAgbW9kZWw6IHVuc2FmZU1vZGVsLFxuICAgICAgd2hlcmU6IHVuc2FmZVdoZXJlXG4gICAgfSkgPT4ge1xuICAgICAgdHJhbnNhY3Rpb25JZCsrO1xuICAgICAgbGV0IHRoaXNUcmFuc2FjdGlvbklkID0gdHJhbnNhY3Rpb25JZDtcbiAgICAgIGNvbnN0IG1vZGVsID0gZ2V0TW9kZWxOYW1lKHVuc2FmZU1vZGVsKTtcbiAgICAgIGNvbnN0IHdoZXJlID0gdHJhbnNmb3JtV2hlcmVDbGF1c2Uoe1xuICAgICAgICBtb2RlbDogdW5zYWZlTW9kZWwsXG4gICAgICAgIHdoZXJlOiB1bnNhZmVXaGVyZVxuICAgICAgfSk7XG4gICAgICBkZWJ1Z0xvZyhcbiAgICAgICAgeyBtZXRob2Q6IFwiZGVsZXRlXCIgfSxcbiAgICAgICAgYCR7Zm9ybWF0VHJhbnNhY3Rpb25JZCh0aGlzVHJhbnNhY3Rpb25JZCl9ICR7Zm9ybWF0U3RlcCgxLCAyKX1gLFxuICAgICAgICBgJHtmb3JtYXRNZXRob2QoXCJkZWxldGVcIil9OmAsXG4gICAgICAgIHsgbW9kZWwsIHdoZXJlIH1cbiAgICAgICk7XG4gICAgICBhd2FpdCBhZGFwdGVySW5zdGFuY2UuZGVsZXRlKHtcbiAgICAgICAgbW9kZWwsXG4gICAgICAgIHdoZXJlXG4gICAgICB9KTtcbiAgICAgIGRlYnVnTG9nKFxuICAgICAgICB7IG1ldGhvZDogXCJkZWxldGVcIiB9LFxuICAgICAgICBgJHtmb3JtYXRUcmFuc2FjdGlvbklkKHRoaXNUcmFuc2FjdGlvbklkKX0gJHtmb3JtYXRTdGVwKDIsIDIpfWAsXG4gICAgICAgIGAke2Zvcm1hdE1ldGhvZChcImRlbGV0ZVwiKX0gJHtmb3JtYXRBY3Rpb24oXCJEQiBSZXN1bHRcIil9OmAsXG4gICAgICAgIHsgbW9kZWwgfVxuICAgICAgKTtcbiAgICB9LFxuICAgIGRlbGV0ZU1hbnk6IGFzeW5jICh7XG4gICAgICBtb2RlbDogdW5zYWZlTW9kZWwsXG4gICAgICB3aGVyZTogdW5zYWZlV2hlcmVcbiAgICB9KSA9PiB7XG4gICAgICB0cmFuc2FjdGlvbklkKys7XG4gICAgICBsZXQgdGhpc1RyYW5zYWN0aW9uSWQgPSB0cmFuc2FjdGlvbklkO1xuICAgICAgY29uc3QgbW9kZWwgPSBnZXRNb2RlbE5hbWUodW5zYWZlTW9kZWwpO1xuICAgICAgY29uc3Qgd2hlcmUgPSB0cmFuc2Zvcm1XaGVyZUNsYXVzZSh7XG4gICAgICAgIG1vZGVsOiB1bnNhZmVNb2RlbCxcbiAgICAgICAgd2hlcmU6IHVuc2FmZVdoZXJlXG4gICAgICB9KTtcbiAgICAgIGRlYnVnTG9nKFxuICAgICAgICB7IG1ldGhvZDogXCJkZWxldGVNYW55XCIgfSxcbiAgICAgICAgYCR7Zm9ybWF0VHJhbnNhY3Rpb25JZCh0aGlzVHJhbnNhY3Rpb25JZCl9ICR7Zm9ybWF0U3RlcCgxLCAyKX1gLFxuICAgICAgICBgJHtmb3JtYXRNZXRob2QoXCJkZWxldGVNYW55XCIpfSAke2Zvcm1hdEFjdGlvbihcIkRlbGV0ZU1hbnlcIil9OmAsXG4gICAgICAgIHsgbW9kZWwsIHdoZXJlIH1cbiAgICAgICk7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBhZGFwdGVySW5zdGFuY2UuZGVsZXRlTWFueSh7XG4gICAgICAgIG1vZGVsLFxuICAgICAgICB3aGVyZVxuICAgICAgfSk7XG4gICAgICBkZWJ1Z0xvZyhcbiAgICAgICAgeyBtZXRob2Q6IFwiZGVsZXRlTWFueVwiIH0sXG4gICAgICAgIGAke2Zvcm1hdFRyYW5zYWN0aW9uSWQodGhpc1RyYW5zYWN0aW9uSWQpfSAke2Zvcm1hdFN0ZXAoMiwgMil9YCxcbiAgICAgICAgYCR7Zm9ybWF0TWV0aG9kKFwiZGVsZXRlTWFueVwiKX0gJHtmb3JtYXRBY3Rpb24oXCJEQiBSZXN1bHRcIil9OmAsXG4gICAgICAgIHsgbW9kZWwsIGRhdGE6IHJlcyB9XG4gICAgICApO1xuICAgICAgcmV0dXJuIHJlcztcbiAgICB9LFxuICAgIGNvdW50OiBhc3luYyAoe1xuICAgICAgbW9kZWw6IHVuc2FmZU1vZGVsLFxuICAgICAgd2hlcmU6IHVuc2FmZVdoZXJlXG4gICAgfSkgPT4ge1xuICAgICAgdHJhbnNhY3Rpb25JZCsrO1xuICAgICAgbGV0IHRoaXNUcmFuc2FjdGlvbklkID0gdHJhbnNhY3Rpb25JZDtcbiAgICAgIGNvbnN0IG1vZGVsID0gZ2V0TW9kZWxOYW1lKHVuc2FmZU1vZGVsKTtcbiAgICAgIGNvbnN0IHdoZXJlID0gdHJhbnNmb3JtV2hlcmVDbGF1c2Uoe1xuICAgICAgICBtb2RlbDogdW5zYWZlTW9kZWwsXG4gICAgICAgIHdoZXJlOiB1bnNhZmVXaGVyZVxuICAgICAgfSk7XG4gICAgICBkZWJ1Z0xvZyhcbiAgICAgICAgeyBtZXRob2Q6IFwiY291bnRcIiB9LFxuICAgICAgICBgJHtmb3JtYXRUcmFuc2FjdGlvbklkKHRoaXNUcmFuc2FjdGlvbklkKX0gJHtmb3JtYXRTdGVwKDEsIDIpfWAsXG4gICAgICAgIGAke2Zvcm1hdE1ldGhvZChcImNvdW50XCIpfTpgLFxuICAgICAgICB7XG4gICAgICAgICAgbW9kZWwsXG4gICAgICAgICAgd2hlcmVcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFkYXB0ZXJJbnN0YW5jZS5jb3VudCh7XG4gICAgICAgIG1vZGVsLFxuICAgICAgICB3aGVyZVxuICAgICAgfSk7XG4gICAgICBkZWJ1Z0xvZyhcbiAgICAgICAgeyBtZXRob2Q6IFwiY291bnRcIiB9LFxuICAgICAgICBgJHtmb3JtYXRUcmFuc2FjdGlvbklkKHRoaXNUcmFuc2FjdGlvbklkKX0gJHtmb3JtYXRTdGVwKDIsIDIpfWAsXG4gICAgICAgIGAke2Zvcm1hdE1ldGhvZChcImNvdW50XCIpfTpgLFxuICAgICAgICB7XG4gICAgICAgICAgbW9kZWwsXG4gICAgICAgICAgZGF0YTogcmVzXG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH0sXG4gICAgY3JlYXRlU2NoZW1hOiBhZGFwdGVySW5zdGFuY2UuY3JlYXRlU2NoZW1hID8gYXN5bmMgKF8sIGZpbGUpID0+IHtcbiAgICAgIGNvbnN0IHRhYmxlcyA9IGdldEF1dGhUYWJsZXMob3B0aW9ucyk7XG4gICAgICBpZiAob3B0aW9ucy5zZWNvbmRhcnlTdG9yYWdlICYmICFvcHRpb25zLnNlc3Npb24/LnN0b3JlU2Vzc2lvbkluRGF0YWJhc2UpIHtcbiAgICAgICAgZGVsZXRlIHRhYmxlcy5zZXNzaW9uO1xuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMucmF0ZUxpbWl0ICYmIG9wdGlvbnMucmF0ZUxpbWl0LnN0b3JhZ2UgPT09IFwiZGF0YWJhc2VcIiAmJiAvLyByYXRlLWxpbWl0IHdpbGwgZGVmYXVsdCB0byBlbmFibGVkIGluIHByb2R1Y3Rpb24sXG4gICAgICAvLyBhbmQgZ2l2ZW4gc3RvcmFnZSBpcyBkYXRhYmFzZSwgaXQgd2lsbCB0cnkgdG8gdXNlIHRoZSByYXRlLWxpbWl0IHRhYmxlLFxuICAgICAgLy8gc28gd2Ugc2hvdWxkIG1ha2Ugc3VyZSB0byBnZW5lcmF0ZSByYXRlLWxpbWl0IHRhYmxlIHNjaGVtYVxuICAgICAgKHR5cGVvZiBvcHRpb25zLnJhdGVMaW1pdC5lbmFibGVkID09PSBcInVuZGVmaW5lZFwiIHx8IC8vIGFuZCBvZiBjb3Vyc2UgaWYgdGhleSBmb3JjZWZ1bGx5IHNldCB0byB0cnVlLCB0aGVuIHRoZXkgd2FudCByYXRlLWxpbWl0LFxuICAgICAgLy8gdGh1cyB3ZSBzaG91bGQgYWxzbyBnZW5lcmF0ZSByYXRlLWxpbWl0IHRhYmxlIHNjaGVtYVxuICAgICAgb3B0aW9ucy5yYXRlTGltaXQuZW5hYmxlZCA9PT0gdHJ1ZSkpIHtcbiAgICAgICAgdGFibGVzLnJhdGVsaW1pdCA9IHtcbiAgICAgICAgICBtb2RlbE5hbWU6IG9wdGlvbnMucmF0ZUxpbWl0Lm1vZGVsTmFtZSA/PyBcInJhdGVsaW1pdFwiLFxuICAgICAgICAgIGZpZWxkczoge1xuICAgICAgICAgICAga2V5OiB7XG4gICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgIGZpZWxkTmFtZTogb3B0aW9ucy5yYXRlTGltaXQuZmllbGRzPy5rZXkgPz8gXCJrZXlcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvdW50OiB7XG4gICAgICAgICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXG4gICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICBmaWVsZE5hbWU6IG9wdGlvbnMucmF0ZUxpbWl0LmZpZWxkcz8uY291bnQgPz8gXCJjb3VudFwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbGFzdFJlcXVlc3Q6IHtcbiAgICAgICAgICAgICAgdHlwZTogXCJudW1iZXJcIixcbiAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgIGJpZ2ludDogdHJ1ZSxcbiAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAoKSA9PiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgICBmaWVsZE5hbWU6IG9wdGlvbnMucmF0ZUxpbWl0LmZpZWxkcz8ubGFzdFJlcXVlc3QgPz8gXCJsYXN0UmVxdWVzdFwiXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFkYXB0ZXJJbnN0YW5jZS5jcmVhdGVTY2hlbWEoeyBmaWxlLCB0YWJsZXMgfSk7XG4gICAgfSA6IHZvaWQgMCxcbiAgICBvcHRpb25zOiB7XG4gICAgICBhZGFwdGVyQ29uZmlnOiBjb25maWcsXG4gICAgICAuLi5hZGFwdGVySW5zdGFuY2Uub3B0aW9ucyA/PyB7fVxuICAgIH0sXG4gICAgaWQ6IGNvbmZpZy5hZGFwdGVySWQsXG4gICAgLy8gU2VjcmV0bHkgZXhwb3J0IHZhbHVlcyBPTkxZIGlmIHRoaXMgYWRhcHRlciBoYXMgZW5hYmxlZCBhZGFwdGVyLXRlc3QtZGVidWctbG9ncy5cbiAgICAvLyBUaGlzIHdvdWxkIHRoZW4gYmUgdXNlZCBkdXJpbmcgb3VyIGFkYXB0ZXItdGVzdHMgdG8gaGVscCBwcmludCBkZWJ1ZyBsb2dzIGlmIGEgdGVzdCBmYWlscy5cbiAgICAvL0B0cy1leHBlY3QtZXJyb3IgLSBeXlxuICAgIC4uLmNvbmZpZy5kZWJ1Z0xvZ3M/LmlzUnVubmluZ0FkYXB0ZXJUZXN0cyA/IHtcbiAgICAgIGFkYXB0ZXJUZXN0RGVidWdMb2dzOiB7XG4gICAgICAgIHJlc2V0RGVidWdMb2dzKCkge1xuICAgICAgICAgIGRlYnVnTG9ncyA9IFtdO1xuICAgICAgICB9LFxuICAgICAgICBwcmludERlYnVnTG9ncygpIHtcbiAgICAgICAgICBjb25zdCBzZXBhcmF0b3IgPSBgXFx1MjUwMGAucmVwZWF0KDgwKTtcbiAgICAgICAgICBsZXQgbG9nID0gZGVidWdMb2dzLnJldmVyc2UoKS5tYXAoKGxvZzIpID0+IHtcbiAgICAgICAgICAgIGxvZzJbMF0gPSBgXG4ke2xvZzJbMF19YDtcbiAgICAgICAgICAgIHJldHVybiBbLi4ubG9nMiwgXCJcXG5cIl07XG4gICAgICAgICAgfSkucmVkdWNlKFxuICAgICAgICAgICAgKHByZXYsIGN1cnIpID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIFsuLi5jdXJyLCAuLi5wcmV2XTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBbYFxuJHtzZXBhcmF0b3J9YF1cbiAgICAgICAgICApO1xuICAgICAgICAgIGNvbnNvbGUubG9nKC4uLmxvZyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IDoge31cbiAgfTtcbn07XG5mdW5jdGlvbiBmb3JtYXRUcmFuc2FjdGlvbklkKHRyYW5zYWN0aW9uSWQyKSB7XG4gIHJldHVybiBgJHtjb2xvcnMuZmcubWFnZW50YX0jJHt0cmFuc2FjdGlvbklkMn0ke2NvbG9ycy5yZXNldH1gO1xufVxuZnVuY3Rpb24gZm9ybWF0U3RlcChzdGVwLCB0b3RhbCkge1xuICByZXR1cm4gYCR7Y29sb3JzLmJnLmJsYWNrfSR7Y29sb3JzLmZnLnllbGxvd31bJHtzdGVwfS8ke3RvdGFsfV0ke2NvbG9ycy5yZXNldH1gO1xufVxuZnVuY3Rpb24gZm9ybWF0TWV0aG9kKG1ldGhvZCkge1xuICByZXR1cm4gYCR7Y29sb3JzLmJyaWdodH0ke21ldGhvZH0ke2NvbG9ycy5yZXNldH1gO1xufVxuZnVuY3Rpb24gZm9ybWF0QWN0aW9uKGFjdGlvbikge1xuICByZXR1cm4gYCR7Y29sb3JzLmRpbX0oJHthY3Rpb259KSR7Y29sb3JzLnJlc2V0fWA7XG59XG5cbmV4cG9ydCB7IGNyZWF0ZUFkYXB0ZXIgYXMgYyB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/shared/better-auth.BuBqXPUp.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/shared/better-auth.C7uhlcDq.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/shared/better-auth.C7uhlcDq.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   m: () => (/* binding */ memoryAdapter)\n/* harmony export */ });\n/* harmony import */ var _better_auth_utils_random__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/utils/random */ \"(rsc)/./node_modules/@better-auth/utils/dist/random.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.js\");\n/* harmony import */ var _better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/utils/hash */ \"(rsc)/./node_modules/@better-auth/utils/dist/hash.mjs\");\n/* harmony import */ var _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @better-auth/utils/base64 */ \"(rsc)/./node_modules/@better-auth/utils/dist/base64.mjs\");\n/* harmony import */ var _better_auth_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/utils */ \"(rsc)/./node_modules/@better-auth/utils/dist/index.mjs\");\n/* harmony import */ var _better_auth_utils_hex__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @better-auth/utils/hex */ \"(rsc)/./node_modules/@better-auth/utils/dist/hex.mjs\");\n/* harmony import */ var _better_auth_B4Qoxdgc_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./better-auth.B4Qoxdgc.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.B4Qoxdgc.mjs\");\n/* harmony import */ var _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./better-auth.BjBlybv-.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.BjBlybv-.mjs\");\n/* harmony import */ var _better_auth_BuBqXPUp_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./better-auth.BuBqXPUp.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.BuBqXPUp.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst memoryAdapter = (db, config) => (0,_better_auth_BuBqXPUp_mjs__WEBPACK_IMPORTED_MODULE_8__.c)({\n  config: {\n    adapterId: \"memory\",\n    adapterName: \"Memory Adapter\",\n    usePlural: false,\n    debugLogs: config?.debugLogs || false,\n    customTransformInput(props) {\n      if (props.options.advanced?.database?.useNumberId && props.field === \"id\" && props.action === \"create\") {\n        return db[props.model].length + 1;\n      }\n      return props.data;\n    }\n  },\n  adapter: ({ getFieldName, options, debugLog }) => {\n    function convertWhereClause(where, model) {\n      const table = db[model];\n      if (!table) {\n        _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_7__.a.error(\n          `[MemoryAdapter] Model ${model} not found in the DB`,\n          Object.keys(db)\n        );\n        throw new Error(`Model ${model} not found`);\n      }\n      return table.filter((record) => {\n        return where.every((clause) => {\n          let { field, value, operator } = clause;\n          if (operator === \"in\") {\n            if (!Array.isArray(value)) {\n              throw new Error(\"Value must be an array\");\n            }\n            return value.includes(record[field]);\n          } else if (operator === \"contains\") {\n            return record[field].includes(value);\n          } else if (operator === \"starts_with\") {\n            return record[field].startsWith(value);\n          } else if (operator === \"ends_with\") {\n            return record[field].endsWith(value);\n          } else {\n            return record[field] === value;\n          }\n        });\n      });\n    }\n    return {\n      create: async ({ model, data }) => {\n        if (options.advanced?.database?.useNumberId) {\n          data.id = db[model].length + 1;\n        }\n        if (!db[model]) {\n          db[model] = [];\n        }\n        db[model].push(data);\n        return data;\n      },\n      findOne: async ({ model, where }) => {\n        const res = convertWhereClause(where, model);\n        const record = res[0] || null;\n        return record;\n      },\n      findMany: async ({ model, where, sortBy, limit, offset }) => {\n        let table = db[model];\n        if (where) {\n          table = convertWhereClause(where, model);\n        }\n        if (sortBy) {\n          table = table.sort((a, b) => {\n            const field = getFieldName({ model, field: sortBy.field });\n            if (sortBy.direction === \"asc\") {\n              return a[field] > b[field] ? 1 : -1;\n            } else {\n              return a[field] < b[field] ? 1 : -1;\n            }\n          });\n        }\n        if (offset !== void 0) {\n          table = table.slice(offset);\n        }\n        if (limit !== void 0) {\n          table = table.slice(0, limit);\n        }\n        return table;\n      },\n      count: async ({ model }) => {\n        return db[model].length;\n      },\n      update: async ({ model, where, update }) => {\n        const res = convertWhereClause(where, model);\n        res.forEach((record) => {\n          Object.assign(record, update);\n        });\n        return res[0] || null;\n      },\n      delete: async ({ model, where }) => {\n        const table = db[model];\n        const res = convertWhereClause(where, model);\n        db[model] = table.filter((record) => !res.includes(record));\n      },\n      deleteMany: async ({ model, where }) => {\n        const table = db[model];\n        const res = convertWhereClause(where, model);\n        let count = 0;\n        db[model] = table.filter((record) => {\n          if (res.includes(record)) {\n            count++;\n            return false;\n          }\n          return !res.includes(record);\n        });\n        return count;\n      },\n      updateMany({ model, where, update }) {\n        const res = convertWhereClause(where, model);\n        res.forEach((record) => {\n          Object.assign(record, update);\n        });\n        return res[0] || null;\n      }\n    };\n  }\n});\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9zaGFyZWQvYmV0dGVyLWF1dGguQzd1aGxjRHEubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBbUM7QUFDbkI7QUFDSztBQUNZO0FBQ0Y7QUFDRDtBQUNJO0FBQ0M7QUFDckI7QUFDZ0I7QUFDRjtBQUNJO0FBQ0g7QUFDTztBQUNxQjtBQUNPOztBQUVoRSxzQ0FBc0MsNERBQWE7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxjQUFjLGlDQUFpQztBQUMvQztBQUNBO0FBQ0E7QUFDQSxRQUFRLHVEQUFNO0FBQ2QsbUNBQW1DLE9BQU87QUFDMUM7QUFDQTtBQUNBLGlDQUFpQyxPQUFPO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix5QkFBeUI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBLFlBQVk7QUFDWjtBQUNBLFlBQVk7QUFDWjtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0EsdUJBQXVCLGFBQWE7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCx3QkFBd0IsY0FBYztBQUN0QztBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AseUJBQXlCLHFDQUFxQztBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsNEJBQTRCO0FBQ3JFO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLHNCQUFzQixPQUFPO0FBQzdCO0FBQ0EsT0FBTztBQUNQLHVCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsT0FBTztBQUNQLHVCQUF1QixjQUFjO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCwyQkFBMkIsY0FBYztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxPQUFPO0FBQ1AsbUJBQW1CLHNCQUFzQjtBQUN6QztBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUU2QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhbWFhblxcT25lRHJpdmVcXERlc2t0b3BcXEthbmRpZF8yXFxOZXcgZm9sZGVyICgyKVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcc2hhcmVkXFxiZXR0ZXItYXV0aC5DN3VobGNEcS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICdAYmV0dGVyLWF1dGgvdXRpbHMvcmFuZG9tJztcbmltcG9ydCAnem9kL3Y0JztcbmltcG9ydCAnYmV0dGVyLWNhbGwnO1xuaW1wb3J0ICdAYmV0dGVyLWF1dGgvdXRpbHMvaGFzaCc7XG5pbXBvcnQgJ0Bub2JsZS9jaXBoZXJzL2NoYWNoYSc7XG5pbXBvcnQgJ0Bub2JsZS9jaXBoZXJzL3V0aWxzJztcbmltcG9ydCAnQG5vYmxlL2NpcGhlcnMvd2ViY3J5cHRvJztcbmltcG9ydCAnQGJldHRlci1hdXRoL3V0aWxzL2Jhc2U2NCc7XG5pbXBvcnQgJ2pvc2UnO1xuaW1wb3J0ICdAbm9ibGUvaGFzaGVzL3NjcnlwdCc7XG5pbXBvcnQgJ0BiZXR0ZXItYXV0aC91dGlscyc7XG5pbXBvcnQgJ0BiZXR0ZXItYXV0aC91dGlscy9oZXgnO1xuaW1wb3J0ICdAbm9ibGUvaGFzaGVzL3V0aWxzJztcbmltcG9ydCAnLi9iZXR0ZXItYXV0aC5CNFFveGRnYy5tanMnO1xuaW1wb3J0IHsgYSBhcyBsb2dnZXIgfSBmcm9tICcuL2JldHRlci1hdXRoLkJqQmx5YnYtLm1qcyc7XG5pbXBvcnQgeyBjIGFzIGNyZWF0ZUFkYXB0ZXIgfSBmcm9tICcuL2JldHRlci1hdXRoLkJ1QnFYUFVwLm1qcyc7XG5cbmNvbnN0IG1lbW9yeUFkYXB0ZXIgPSAoZGIsIGNvbmZpZykgPT4gY3JlYXRlQWRhcHRlcih7XG4gIGNvbmZpZzoge1xuICAgIGFkYXB0ZXJJZDogXCJtZW1vcnlcIixcbiAgICBhZGFwdGVyTmFtZTogXCJNZW1vcnkgQWRhcHRlclwiLFxuICAgIHVzZVBsdXJhbDogZmFsc2UsXG4gICAgZGVidWdMb2dzOiBjb25maWc/LmRlYnVnTG9ncyB8fCBmYWxzZSxcbiAgICBjdXN0b21UcmFuc2Zvcm1JbnB1dChwcm9wcykge1xuICAgICAgaWYgKHByb3BzLm9wdGlvbnMuYWR2YW5jZWQ/LmRhdGFiYXNlPy51c2VOdW1iZXJJZCAmJiBwcm9wcy5maWVsZCA9PT0gXCJpZFwiICYmIHByb3BzLmFjdGlvbiA9PT0gXCJjcmVhdGVcIikge1xuICAgICAgICByZXR1cm4gZGJbcHJvcHMubW9kZWxdLmxlbmd0aCArIDE7XG4gICAgICB9XG4gICAgICByZXR1cm4gcHJvcHMuZGF0YTtcbiAgICB9XG4gIH0sXG4gIGFkYXB0ZXI6ICh7IGdldEZpZWxkTmFtZSwgb3B0aW9ucywgZGVidWdMb2cgfSkgPT4ge1xuICAgIGZ1bmN0aW9uIGNvbnZlcnRXaGVyZUNsYXVzZSh3aGVyZSwgbW9kZWwpIHtcbiAgICAgIGNvbnN0IHRhYmxlID0gZGJbbW9kZWxdO1xuICAgICAgaWYgKCF0YWJsZSkge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXG4gICAgICAgICAgYFtNZW1vcnlBZGFwdGVyXSBNb2RlbCAke21vZGVsfSBub3QgZm91bmQgaW4gdGhlIERCYCxcbiAgICAgICAgICBPYmplY3Qua2V5cyhkYilcbiAgICAgICAgKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNb2RlbCAke21vZGVsfSBub3QgZm91bmRgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0YWJsZS5maWx0ZXIoKHJlY29yZCkgPT4ge1xuICAgICAgICByZXR1cm4gd2hlcmUuZXZlcnkoKGNsYXVzZSkgPT4ge1xuICAgICAgICAgIGxldCB7IGZpZWxkLCB2YWx1ZSwgb3BlcmF0b3IgfSA9IGNsYXVzZTtcbiAgICAgICAgICBpZiAob3BlcmF0b3IgPT09IFwiaW5cIikge1xuICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJWYWx1ZSBtdXN0IGJlIGFuIGFycmF5XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLmluY2x1ZGVzKHJlY29yZFtmaWVsZF0pO1xuICAgICAgICAgIH0gZWxzZSBpZiAob3BlcmF0b3IgPT09IFwiY29udGFpbnNcIikge1xuICAgICAgICAgICAgcmV0dXJuIHJlY29yZFtmaWVsZF0uaW5jbHVkZXModmFsdWUpO1xuICAgICAgICAgIH0gZWxzZSBpZiAob3BlcmF0b3IgPT09IFwic3RhcnRzX3dpdGhcIikge1xuICAgICAgICAgICAgcmV0dXJuIHJlY29yZFtmaWVsZF0uc3RhcnRzV2l0aCh2YWx1ZSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChvcGVyYXRvciA9PT0gXCJlbmRzX3dpdGhcIikge1xuICAgICAgICAgICAgcmV0dXJuIHJlY29yZFtmaWVsZF0uZW5kc1dpdGgodmFsdWUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gcmVjb3JkW2ZpZWxkXSA9PT0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgY3JlYXRlOiBhc3luYyAoeyBtb2RlbCwgZGF0YSB9KSA9PiB7XG4gICAgICAgIGlmIChvcHRpb25zLmFkdmFuY2VkPy5kYXRhYmFzZT8udXNlTnVtYmVySWQpIHtcbiAgICAgICAgICBkYXRhLmlkID0gZGJbbW9kZWxdLmxlbmd0aCArIDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFkYlttb2RlbF0pIHtcbiAgICAgICAgICBkYlttb2RlbF0gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBkYlttb2RlbF0ucHVzaChkYXRhKTtcbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICB9LFxuICAgICAgZmluZE9uZTogYXN5bmMgKHsgbW9kZWwsIHdoZXJlIH0pID0+IHtcbiAgICAgICAgY29uc3QgcmVzID0gY29udmVydFdoZXJlQ2xhdXNlKHdoZXJlLCBtb2RlbCk7XG4gICAgICAgIGNvbnN0IHJlY29yZCA9IHJlc1swXSB8fCBudWxsO1xuICAgICAgICByZXR1cm4gcmVjb3JkO1xuICAgICAgfSxcbiAgICAgIGZpbmRNYW55OiBhc3luYyAoeyBtb2RlbCwgd2hlcmUsIHNvcnRCeSwgbGltaXQsIG9mZnNldCB9KSA9PiB7XG4gICAgICAgIGxldCB0YWJsZSA9IGRiW21vZGVsXTtcbiAgICAgICAgaWYgKHdoZXJlKSB7XG4gICAgICAgICAgdGFibGUgPSBjb252ZXJ0V2hlcmVDbGF1c2Uod2hlcmUsIG1vZGVsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc29ydEJ5KSB7XG4gICAgICAgICAgdGFibGUgPSB0YWJsZS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmaWVsZCA9IGdldEZpZWxkTmFtZSh7IG1vZGVsLCBmaWVsZDogc29ydEJ5LmZpZWxkIH0pO1xuICAgICAgICAgICAgaWYgKHNvcnRCeS5kaXJlY3Rpb24gPT09IFwiYXNjXCIpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGFbZmllbGRdID4gYltmaWVsZF0gPyAxIDogLTE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm4gYVtmaWVsZF0gPCBiW2ZpZWxkXSA/IDEgOiAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob2Zmc2V0ICE9PSB2b2lkIDApIHtcbiAgICAgICAgICB0YWJsZSA9IHRhYmxlLnNsaWNlKG9mZnNldCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxpbWl0ICE9PSB2b2lkIDApIHtcbiAgICAgICAgICB0YWJsZSA9IHRhYmxlLnNsaWNlKDAsIGxpbWl0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGFibGU7XG4gICAgICB9LFxuICAgICAgY291bnQ6IGFzeW5jICh7IG1vZGVsIH0pID0+IHtcbiAgICAgICAgcmV0dXJuIGRiW21vZGVsXS5sZW5ndGg7XG4gICAgICB9LFxuICAgICAgdXBkYXRlOiBhc3luYyAoeyBtb2RlbCwgd2hlcmUsIHVwZGF0ZSB9KSA9PiB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGNvbnZlcnRXaGVyZUNsYXVzZSh3aGVyZSwgbW9kZWwpO1xuICAgICAgICByZXMuZm9yRWFjaCgocmVjb3JkKSA9PiB7XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihyZWNvcmQsIHVwZGF0ZSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzWzBdIHx8IG51bGw7XG4gICAgICB9LFxuICAgICAgZGVsZXRlOiBhc3luYyAoeyBtb2RlbCwgd2hlcmUgfSkgPT4ge1xuICAgICAgICBjb25zdCB0YWJsZSA9IGRiW21vZGVsXTtcbiAgICAgICAgY29uc3QgcmVzID0gY29udmVydFdoZXJlQ2xhdXNlKHdoZXJlLCBtb2RlbCk7XG4gICAgICAgIGRiW21vZGVsXSA9IHRhYmxlLmZpbHRlcigocmVjb3JkKSA9PiAhcmVzLmluY2x1ZGVzKHJlY29yZCkpO1xuICAgICAgfSxcbiAgICAgIGRlbGV0ZU1hbnk6IGFzeW5jICh7IG1vZGVsLCB3aGVyZSB9KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhYmxlID0gZGJbbW9kZWxdO1xuICAgICAgICBjb25zdCByZXMgPSBjb252ZXJ0V2hlcmVDbGF1c2Uod2hlcmUsIG1vZGVsKTtcbiAgICAgICAgbGV0IGNvdW50ID0gMDtcbiAgICAgICAgZGJbbW9kZWxdID0gdGFibGUuZmlsdGVyKChyZWNvcmQpID0+IHtcbiAgICAgICAgICBpZiAocmVzLmluY2x1ZGVzKHJlY29yZCkpIHtcbiAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiAhcmVzLmluY2x1ZGVzKHJlY29yZCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gY291bnQ7XG4gICAgICB9LFxuICAgICAgdXBkYXRlTWFueSh7IG1vZGVsLCB3aGVyZSwgdXBkYXRlIH0pIHtcbiAgICAgICAgY29uc3QgcmVzID0gY29udmVydFdoZXJlQ2xhdXNlKHdoZXJlLCBtb2RlbCk7XG4gICAgICAgIHJlcy5mb3JFYWNoKChyZWNvcmQpID0+IHtcbiAgICAgICAgICBPYmplY3QuYXNzaWduKHJlY29yZCwgdXBkYXRlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXNbMF0gfHwgbnVsbDtcbiAgICAgIH1cbiAgICB9O1xuICB9XG59KTtcblxuZXhwb3J0IHsgbWVtb3J5QWRhcHRlciBhcyBtIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/shared/better-auth.C7uhlcDq.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/shared/better-auth.CMQ3rA-I.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/shared/better-auth.CMQ3rA-I.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   E: () => (/* binding */ ENV),\n/* harmony export */   a: () => (/* binding */ isProduction),\n/* harmony export */   b: () => (/* binding */ isDevelopment),\n/* harmony export */   c: () => (/* binding */ getBooleanEnvVar),\n/* harmony export */   e: () => (/* binding */ env),\n/* harmony export */   g: () => (/* binding */ getEnvVar),\n/* harmony export */   i: () => (/* binding */ isTest)\n/* harmony export */ });\nconst _envShim = /* @__PURE__ */ Object.create(null);\nconst _getEnv = (useShim) => globalThis.process?.env || //@ts-expect-error\nglobalThis.Deno?.env.toObject() || //@ts-expect-error\nglobalThis.__env__ || (useShim ? _envShim : globalThis);\nconst env = new Proxy(_envShim, {\n  get(_, prop) {\n    const env2 = _getEnv();\n    return env2[prop] ?? _envShim[prop];\n  },\n  has(_, prop) {\n    const env2 = _getEnv();\n    return prop in env2 || prop in _envShim;\n  },\n  set(_, prop, value) {\n    const env2 = _getEnv(true);\n    env2[prop] = value;\n    return true;\n  },\n  deleteProperty(_, prop) {\n    if (!prop) {\n      return false;\n    }\n    const env2 = _getEnv(true);\n    delete env2[prop];\n    return true;\n  },\n  ownKeys() {\n    const env2 = _getEnv(true);\n    return Object.keys(env2);\n  }\n});\nfunction toBoolean(val) {\n  return val ? val !== \"false\" : false;\n}\nconst nodeENV = typeof process !== \"undefined\" && process.env && \"development\" || \"\";\nconst isProduction = nodeENV === \"production\";\nconst isDevelopment = nodeENV === \"dev\" || nodeENV === \"development\";\nconst isTest = () => nodeENV === \"test\" || toBoolean(env.TEST);\nfunction getEnvVar(key, fallback) {\n  if (typeof process !== \"undefined\" && process.env) {\n    return process.env[key] ?? fallback;\n  }\n  if (typeof Deno !== \"undefined\") {\n    return Deno.env.get(key) ?? fallback;\n  }\n  if (typeof Bun !== \"undefined\") {\n    return Bun.env[key] ?? fallback;\n  }\n  return fallback;\n}\nfunction getBooleanEnvVar(key, fallback = true) {\n  const value = getEnvVar(key);\n  if (!value) return fallback;\n  return value !== \"0\" && value.toLowerCase() !== \"false\" && value !== \"\";\n}\nconst ENV = {\n  get BETTER_AUTH_TELEMETRY_ENDPOINT() {\n    return getEnvVar(\n      \"BETTER_AUTH_TELEMETRY_ENDPOINT\",\n      \"https://telemetry.better-auth.com/v1/track\"\n    );\n  }\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9zaGFyZWQvYmV0dGVyLWF1dGguQ01RM3JBLUkubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsYUFBb0I7QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRXlIIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFtYWFuXFxPbmVEcml2ZVxcRGVza3RvcFxcS2FuZGlkXzJcXE5ldyBmb2xkZXIgKDIpXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxzaGFyZWRcXGJldHRlci1hdXRoLkNNUTNyQS1JLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBfZW52U2hpbSA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpO1xuY29uc3QgX2dldEVudiA9ICh1c2VTaGltKSA9PiBnbG9iYWxUaGlzLnByb2Nlc3M/LmVudiB8fCAvL0B0cy1leHBlY3QtZXJyb3Jcbmdsb2JhbFRoaXMuRGVubz8uZW52LnRvT2JqZWN0KCkgfHwgLy9AdHMtZXhwZWN0LWVycm9yXG5nbG9iYWxUaGlzLl9fZW52X18gfHwgKHVzZVNoaW0gPyBfZW52U2hpbSA6IGdsb2JhbFRoaXMpO1xuY29uc3QgZW52ID0gbmV3IFByb3h5KF9lbnZTaGltLCB7XG4gIGdldChfLCBwcm9wKSB7XG4gICAgY29uc3QgZW52MiA9IF9nZXRFbnYoKTtcbiAgICByZXR1cm4gZW52Mltwcm9wXSA/PyBfZW52U2hpbVtwcm9wXTtcbiAgfSxcbiAgaGFzKF8sIHByb3ApIHtcbiAgICBjb25zdCBlbnYyID0gX2dldEVudigpO1xuICAgIHJldHVybiBwcm9wIGluIGVudjIgfHwgcHJvcCBpbiBfZW52U2hpbTtcbiAgfSxcbiAgc2V0KF8sIHByb3AsIHZhbHVlKSB7XG4gICAgY29uc3QgZW52MiA9IF9nZXRFbnYodHJ1ZSk7XG4gICAgZW52Mltwcm9wXSA9IHZhbHVlO1xuICAgIHJldHVybiB0cnVlO1xuICB9LFxuICBkZWxldGVQcm9wZXJ0eShfLCBwcm9wKSB7XG4gICAgaWYgKCFwcm9wKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGVudjIgPSBfZ2V0RW52KHRydWUpO1xuICAgIGRlbGV0ZSBlbnYyW3Byb3BdO1xuICAgIHJldHVybiB0cnVlO1xuICB9LFxuICBvd25LZXlzKCkge1xuICAgIGNvbnN0IGVudjIgPSBfZ2V0RW52KHRydWUpO1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhlbnYyKTtcbiAgfVxufSk7XG5mdW5jdGlvbiB0b0Jvb2xlYW4odmFsKSB7XG4gIHJldHVybiB2YWwgPyB2YWwgIT09IFwiZmFsc2VcIiA6IGZhbHNlO1xufVxuY29uc3Qgbm9kZUVOViA9IHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiICYmIHByb2Nlc3MuZW52ICYmIHByb2Nlc3MuZW52Lk5PREVfRU5WIHx8IFwiXCI7XG5jb25zdCBpc1Byb2R1Y3Rpb24gPSBub2RlRU5WID09PSBcInByb2R1Y3Rpb25cIjtcbmNvbnN0IGlzRGV2ZWxvcG1lbnQgPSBub2RlRU5WID09PSBcImRldlwiIHx8IG5vZGVFTlYgPT09IFwiZGV2ZWxvcG1lbnRcIjtcbmNvbnN0IGlzVGVzdCA9ICgpID0+IG5vZGVFTlYgPT09IFwidGVzdFwiIHx8IHRvQm9vbGVhbihlbnYuVEVTVCk7XG5mdW5jdGlvbiBnZXRFbnZWYXIoa2V5LCBmYWxsYmFjaykge1xuICBpZiAodHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiYgcHJvY2Vzcy5lbnYpIHtcbiAgICByZXR1cm4gcHJvY2Vzcy5lbnZba2V5XSA/PyBmYWxsYmFjaztcbiAgfVxuICBpZiAodHlwZW9mIERlbm8gIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm4gRGVuby5lbnYuZ2V0KGtleSkgPz8gZmFsbGJhY2s7XG4gIH1cbiAgaWYgKHR5cGVvZiBCdW4gIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm4gQnVuLmVudltrZXldID8/IGZhbGxiYWNrO1xuICB9XG4gIHJldHVybiBmYWxsYmFjaztcbn1cbmZ1bmN0aW9uIGdldEJvb2xlYW5FbnZWYXIoa2V5LCBmYWxsYmFjayA9IHRydWUpIHtcbiAgY29uc3QgdmFsdWUgPSBnZXRFbnZWYXIoa2V5KTtcbiAgaWYgKCF2YWx1ZSkgcmV0dXJuIGZhbGxiYWNrO1xuICByZXR1cm4gdmFsdWUgIT09IFwiMFwiICYmIHZhbHVlLnRvTG93ZXJDYXNlKCkgIT09IFwiZmFsc2VcIiAmJiB2YWx1ZSAhPT0gXCJcIjtcbn1cbmNvbnN0IEVOViA9IHtcbiAgZ2V0IEJFVFRFUl9BVVRIX1RFTEVNRVRSWV9FTkRQT0lOVCgpIHtcbiAgICByZXR1cm4gZ2V0RW52VmFyKFxuICAgICAgXCJCRVRURVJfQVVUSF9URUxFTUVUUllfRU5EUE9JTlRcIixcbiAgICAgIFwiaHR0cHM6Ly90ZWxlbWV0cnkuYmV0dGVyLWF1dGguY29tL3YxL3RyYWNrXCJcbiAgICApO1xuICB9XG59O1xuXG5leHBvcnQgeyBFTlYgYXMgRSwgaXNQcm9kdWN0aW9uIGFzIGEsIGlzRGV2ZWxvcG1lbnQgYXMgYiwgZ2V0Qm9vbGVhbkVudlZhciBhcyBjLCBlbnYgYXMgZSwgZ2V0RW52VmFyIGFzIGcsIGlzVGVzdCBhcyBpIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/shared/better-auth.CMQ3rA-I.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/shared/better-auth.CSVCtb77.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/shared/better-auth.CSVCtb77.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   a: () => (/* binding */ getAdapter),\n/* harmony export */   b: () => (/* binding */ convertToDB),\n/* harmony export */   c: () => (/* binding */ createInternalAdapter),\n/* harmony export */   d: () => (/* binding */ convertFromDB),\n/* harmony export */   e: () => (/* binding */ getMigrations),\n/* harmony export */   f: () => (/* binding */ getSchema),\n/* harmony export */   g: () => (/* binding */ getWithHooks),\n/* harmony export */   m: () => (/* binding */ matchType)\n/* harmony export */ });\n/* harmony import */ var _better_auth_CW6D9eSx_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./better-auth.CW6D9eSx.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.CW6D9eSx.mjs\");\n/* harmony import */ var _better_auth_Dcv8PS7T_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./better-auth.Dcv8PS7T.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.Dcv8PS7T.mjs\");\n/* harmony import */ var _better_auth_O2VtDkDK_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./better-auth.O2VtDkDK.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.O2VtDkDK.mjs\");\n/* harmony import */ var _better_auth_BZZKN1g7_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./better-auth.BZZKN1g7.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.BZZKN1g7.mjs\");\n/* harmony import */ var _better_auth_BUPPRXfK_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./better-auth.BUPPRXfK.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.BUPPRXfK.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.js\");\n/* harmony import */ var _better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/utils/hash */ \"(rsc)/./node_modules/@better-auth/utils/dist/hash.mjs\");\n/* harmony import */ var _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/utils/base64 */ \"(rsc)/./node_modules/@better-auth/utils/dist/base64.mjs\");\n/* harmony import */ var _better_auth_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/utils */ \"(rsc)/./node_modules/@better-auth/utils/dist/index.mjs\");\n/* harmony import */ var _better_auth_utils_hex__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @better-auth/utils/hex */ \"(rsc)/./node_modules/@better-auth/utils/dist/hex.mjs\");\n/* harmony import */ var _better_auth_B4Qoxdgc_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./better-auth.B4Qoxdgc.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.B4Qoxdgc.mjs\");\n/* harmony import */ var _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./better-auth.BjBlybv-.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.BjBlybv-.mjs\");\n/* harmony import */ var _better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./better-auth.CMQ3rA-I.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.CMQ3rA-I.mjs\");\n/* harmony import */ var _better_auth_utils_random__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @better-auth/utils/random */ \"(rsc)/./node_modules/@better-auth/utils/dist/random.mjs\");\n/* harmony import */ var _better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./better-auth.DdzSJf-n.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.DdzSJf-n.mjs\");\n/* harmony import */ var _better_auth_B_PTVODM_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./better-auth.B_PTVODM.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.B_PTVODM.mjs\");\n/* harmony import */ var _better_auth_B8b3lep0_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./better-auth.B8b3lep0.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.B8b3lep0.mjs\");\n/* harmony import */ var _better_auth_C7uhlcDq_mjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./better-auth.C7uhlcDq.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.C7uhlcDq.mjs\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/raw-builder/sql.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction getWithHooks(adapter, ctx) {\n  const hooks = ctx.hooks;\n  async function createWithHooks(data, model, customCreateFn, context) {\n    let actualData = data;\n    for (const hook of hooks || []) {\n      const toRun = hook[model]?.create?.before;\n      if (toRun) {\n        const result = await toRun(actualData, context);\n        if (result === false) {\n          return null;\n        }\n        const isObject = typeof result === \"object\" && \"data\" in result;\n        if (isObject) {\n          actualData = {\n            ...actualData,\n            ...result.data\n          };\n        }\n      }\n    }\n    const customCreated = customCreateFn ? await customCreateFn.fn(actualData) : null;\n    const created = !customCreateFn || customCreateFn.executeMainFn ? await adapter.create({\n      model,\n      data: actualData,\n      forceAllowId: true\n    }) : customCreated;\n    for (const hook of hooks || []) {\n      const toRun = hook[model]?.create?.after;\n      if (toRun) {\n        await toRun(created, context);\n      }\n    }\n    return created;\n  }\n  async function updateWithHooks(data, where, model, customUpdateFn, context) {\n    let actualData = data;\n    for (const hook of hooks || []) {\n      const toRun = hook[model]?.update?.before;\n      if (toRun) {\n        const result = await toRun(data, context);\n        if (result === false) {\n          return null;\n        }\n        const isObject = typeof result === \"object\";\n        actualData = isObject ? result.data : result;\n      }\n    }\n    const customUpdated = customUpdateFn ? await customUpdateFn.fn(actualData) : null;\n    const updated = !customUpdateFn || customUpdateFn.executeMainFn ? await adapter.update({\n      model,\n      update: actualData,\n      where\n    }) : customUpdated;\n    for (const hook of hooks || []) {\n      const toRun = hook[model]?.update?.after;\n      if (toRun) {\n        await toRun(updated, context);\n      }\n    }\n    return updated;\n  }\n  async function updateManyWithHooks(data, where, model, customUpdateFn, context) {\n    let actualData = data;\n    for (const hook of hooks || []) {\n      const toRun = hook[model]?.update?.before;\n      if (toRun) {\n        const result = await toRun(data, context);\n        if (result === false) {\n          return null;\n        }\n        const isObject = typeof result === \"object\";\n        actualData = isObject ? result.data : result;\n      }\n    }\n    const customUpdated = customUpdateFn ? await customUpdateFn.fn(actualData) : null;\n    const updated = !customUpdateFn || customUpdateFn.executeMainFn ? await adapter.updateMany({\n      model,\n      update: actualData,\n      where\n    }) : customUpdated;\n    for (const hook of hooks || []) {\n      const toRun = hook[model]?.update?.after;\n      if (toRun) {\n        await toRun(updated, context);\n      }\n    }\n    return updated;\n  }\n  return {\n    createWithHooks,\n    updateWithHooks,\n    updateManyWithHooks\n  };\n}\n\nconst createInternalAdapter = (adapter, ctx) => {\n  const logger = ctx.logger;\n  const options = ctx.options;\n  const secondaryStorage = options.secondaryStorage;\n  const sessionExpiration = options.session?.expiresIn || 60 * 60 * 24 * 7;\n  const { createWithHooks, updateWithHooks, updateManyWithHooks } = getWithHooks(adapter, ctx);\n  return {\n    createOAuthUser: async (user, account, context) => {\n      const createdUser = await createWithHooks(\n        {\n          // todo: we should remove auto setting createdAt and updatedAt in the next major release, since the db generators already handle that\n          createdAt: /* @__PURE__ */ new Date(),\n          updatedAt: /* @__PURE__ */ new Date(),\n          ...user\n        },\n        \"user\",\n        void 0,\n        context\n      );\n      const createdAccount = await createWithHooks(\n        {\n          ...account,\n          userId: createdUser.id,\n          // todo: we should remove auto setting createdAt and updatedAt in the next major release, since the db generators already handle that\n          createdAt: /* @__PURE__ */ new Date(),\n          updatedAt: /* @__PURE__ */ new Date()\n        },\n        \"account\",\n        void 0,\n        context\n      );\n      return {\n        user: createdUser,\n        account: createdAccount\n      };\n    },\n    createUser: async (user, context) => {\n      const createdUser = await createWithHooks(\n        {\n          // todo: we should remove auto setting createdAt and updatedAt in the next major release, since the db generators already handle that\n          createdAt: /* @__PURE__ */ new Date(),\n          updatedAt: /* @__PURE__ */ new Date(),\n          ...user,\n          email: user.email?.toLowerCase()\n        },\n        \"user\",\n        void 0,\n        context\n      );\n      return createdUser;\n    },\n    createAccount: async (account, context) => {\n      const createdAccount = await createWithHooks(\n        {\n          // todo: we should remove auto setting createdAt and updatedAt in the next major release, since the db generators already handle that\n          createdAt: /* @__PURE__ */ new Date(),\n          updatedAt: /* @__PURE__ */ new Date(),\n          ...account\n        },\n        \"account\",\n        void 0,\n        context\n      );\n      return createdAccount;\n    },\n    listSessions: async (userId) => {\n      if (secondaryStorage) {\n        const currentList = await secondaryStorage.get(\n          `active-sessions-${userId}`\n        );\n        if (!currentList) return [];\n        const list = (0,_better_auth_BZZKN1g7_mjs__WEBPACK_IMPORTED_MODULE_3__.s)(currentList) || [];\n        const now = Date.now();\n        const validSessions = list.filter((s) => s.expiresAt > now);\n        const sessions2 = [];\n        for (const session of validSessions) {\n          const sessionStringified = await secondaryStorage.get(session.token);\n          if (sessionStringified) {\n            const s = (0,_better_auth_BZZKN1g7_mjs__WEBPACK_IMPORTED_MODULE_3__.s)(sessionStringified);\n            if (!s) return [];\n            const parsedSession = (0,_better_auth_Dcv8PS7T_mjs__WEBPACK_IMPORTED_MODULE_1__.e)(ctx.options, {\n              ...s.session,\n              expiresAt: new Date(s.session.expiresAt)\n            });\n            sessions2.push(parsedSession);\n          }\n        }\n        return sessions2;\n      }\n      const sessions = await adapter.findMany({\n        model: \"session\",\n        where: [\n          {\n            field: \"userId\",\n            value: userId\n          }\n        ]\n      });\n      return sessions;\n    },\n    listUsers: async (limit, offset, sortBy, where) => {\n      const users = await adapter.findMany({\n        model: \"user\",\n        limit,\n        offset,\n        sortBy,\n        where\n      });\n      return users;\n    },\n    countTotalUsers: async (where) => {\n      const total = await adapter.count({\n        model: \"user\",\n        where\n      });\n      if (typeof total === \"string\") {\n        return parseInt(total);\n      }\n      return total;\n    },\n    deleteUser: async (userId) => {\n      if (secondaryStorage) {\n        await secondaryStorage.delete(`active-sessions-${userId}`);\n      }\n      if (!secondaryStorage || options.session?.storeSessionInDatabase) {\n        await adapter.deleteMany({\n          model: \"session\",\n          where: [\n            {\n              field: \"userId\",\n              value: userId\n            }\n          ]\n        });\n      }\n      await adapter.deleteMany({\n        model: \"account\",\n        where: [\n          {\n            field: \"userId\",\n            value: userId\n          }\n        ]\n      });\n      await adapter.delete({\n        model: \"user\",\n        where: [\n          {\n            field: \"id\",\n            value: userId\n          }\n        ]\n      });\n    },\n    createSession: async (userId, ctx2, dontRememberMe, override, overrideAll) => {\n      const headers = ctx2.headers || ctx2.request?.headers;\n      const { id: _, ...rest } = override || {};\n      const data = {\n        ipAddress: ctx2.request || ctx2.headers ? (0,_better_auth_O2VtDkDK_mjs__WEBPACK_IMPORTED_MODULE_2__.g)(ctx2.request || ctx2.headers, ctx2.context.options) || \"\" : \"\",\n        userAgent: headers?.get(\"user-agent\") || \"\",\n        ...rest,\n        /**\n         * If the user doesn't want to be remembered\n         * set the session to expire in 1 day.\n         * The cookie will be set to expire at the end of the session\n         */\n        expiresAt: dontRememberMe ? (0,_better_auth_CW6D9eSx_mjs__WEBPACK_IMPORTED_MODULE_0__.g)(60 * 60 * 24, \"sec\") : (0,_better_auth_CW6D9eSx_mjs__WEBPACK_IMPORTED_MODULE_0__.g)(sessionExpiration, \"sec\"),\n        userId,\n        token: (0,_better_auth_BUPPRXfK_mjs__WEBPACK_IMPORTED_MODULE_4__.g)(32),\n        // todo: we should remove auto setting createdAt and updatedAt in the next major release, since the db generators already handle that\n        createdAt: /* @__PURE__ */ new Date(),\n        updatedAt: /* @__PURE__ */ new Date(),\n        ...overrideAll ? rest : {}\n      };\n      const res = await createWithHooks(\n        data,\n        \"session\",\n        secondaryStorage ? {\n          fn: async (sessionData) => {\n            const currentList = await secondaryStorage.get(\n              `active-sessions-${userId}`\n            );\n            let list = [];\n            const now = Date.now();\n            if (currentList) {\n              list = (0,_better_auth_BZZKN1g7_mjs__WEBPACK_IMPORTED_MODULE_3__.s)(currentList) || [];\n              list = list.filter((session) => session.expiresAt > now);\n            }\n            list.push({\n              token: data.token,\n              expiresAt: now + sessionExpiration * 1e3\n            });\n            await secondaryStorage.set(\n              `active-sessions-${userId}`,\n              JSON.stringify(list),\n              sessionExpiration\n            );\n            return sessionData;\n          },\n          executeMainFn: options.session?.storeSessionInDatabase\n        } : void 0,\n        ctx2\n      );\n      return res;\n    },\n    findSession: async (token) => {\n      if (secondaryStorage) {\n        const sessionStringified = await secondaryStorage.get(token);\n        if (!sessionStringified && !options.session?.storeSessionInDatabase) {\n          return null;\n        }\n        if (sessionStringified) {\n          const s = (0,_better_auth_BZZKN1g7_mjs__WEBPACK_IMPORTED_MODULE_3__.s)(sessionStringified);\n          if (!s) return null;\n          const parsedSession2 = (0,_better_auth_Dcv8PS7T_mjs__WEBPACK_IMPORTED_MODULE_1__.e)(ctx.options, {\n            ...s.session,\n            expiresAt: new Date(s.session.expiresAt),\n            createdAt: new Date(s.session.createdAt),\n            updatedAt: new Date(s.session.updatedAt)\n          });\n          const parsedUser2 = (0,_better_auth_Dcv8PS7T_mjs__WEBPACK_IMPORTED_MODULE_1__.b)(ctx.options, {\n            ...s.user,\n            createdAt: new Date(s.user.createdAt),\n            updatedAt: new Date(s.user.updatedAt)\n          });\n          return {\n            session: parsedSession2,\n            user: parsedUser2\n          };\n        }\n      }\n      const session = await adapter.findOne({\n        model: \"session\",\n        where: [\n          {\n            value: token,\n            field: \"token\"\n          }\n        ]\n      });\n      if (!session) {\n        return null;\n      }\n      const user = await adapter.findOne({\n        model: \"user\",\n        where: [\n          {\n            value: session.userId,\n            field: \"id\"\n          }\n        ]\n      });\n      if (!user) {\n        return null;\n      }\n      const parsedSession = (0,_better_auth_Dcv8PS7T_mjs__WEBPACK_IMPORTED_MODULE_1__.e)(ctx.options, session);\n      const parsedUser = (0,_better_auth_Dcv8PS7T_mjs__WEBPACK_IMPORTED_MODULE_1__.b)(ctx.options, user);\n      return {\n        session: parsedSession,\n        user: parsedUser\n      };\n    },\n    findSessions: async (sessionTokens) => {\n      if (secondaryStorage) {\n        const sessions2 = [];\n        for (const sessionToken of sessionTokens) {\n          const sessionStringified = await secondaryStorage.get(sessionToken);\n          if (sessionStringified) {\n            const s = (0,_better_auth_BZZKN1g7_mjs__WEBPACK_IMPORTED_MODULE_3__.s)(sessionStringified);\n            if (!s) return [];\n            const session = {\n              session: {\n                ...s.session,\n                expiresAt: new Date(s.session.expiresAt)\n              },\n              user: {\n                ...s.user,\n                createdAt: new Date(s.user.createdAt),\n                updatedAt: new Date(s.user.updatedAt)\n              }\n            };\n            sessions2.push(session);\n          }\n        }\n        return sessions2;\n      }\n      const sessions = await adapter.findMany({\n        model: \"session\",\n        where: [\n          {\n            field: \"token\",\n            value: sessionTokens,\n            operator: \"in\"\n          }\n        ]\n      });\n      const userIds = sessions.map((session) => {\n        return session.userId;\n      });\n      if (!userIds.length) return [];\n      const users = await adapter.findMany({\n        model: \"user\",\n        where: [\n          {\n            field: \"id\",\n            value: userIds,\n            operator: \"in\"\n          }\n        ]\n      });\n      return sessions.map((session) => {\n        const user = users.find((u) => u.id === session.userId);\n        if (!user) return null;\n        return {\n          session,\n          user\n        };\n      });\n    },\n    updateSession: async (sessionToken, session, context) => {\n      const updatedSession = await updateWithHooks(\n        session,\n        [{ field: \"token\", value: sessionToken }],\n        \"session\",\n        secondaryStorage ? {\n          async fn(data) {\n            const currentSession = await secondaryStorage.get(sessionToken);\n            let updatedSession2 = null;\n            if (currentSession) {\n              const parsedSession = (0,_better_auth_BZZKN1g7_mjs__WEBPACK_IMPORTED_MODULE_3__.s)(currentSession);\n              if (!parsedSession) return null;\n              updatedSession2 = {\n                ...parsedSession.session,\n                ...data\n              };\n              return updatedSession2;\n            } else {\n              return null;\n            }\n          },\n          executeMainFn: options.session?.storeSessionInDatabase\n        } : void 0,\n        context\n      );\n      return updatedSession;\n    },\n    deleteSession: async (token) => {\n      if (secondaryStorage) {\n        const data = await secondaryStorage.get(token);\n        if (data) {\n          const { session } = (0,_better_auth_BZZKN1g7_mjs__WEBPACK_IMPORTED_MODULE_3__.s)(data) ?? {};\n          if (!session) {\n            logger.error(\"Session not found in secondary storage\");\n            return;\n          }\n          const userId = session.userId;\n          const currentList = await secondaryStorage.get(\n            `active-sessions-${userId}`\n          );\n          if (currentList) {\n            let list = (0,_better_auth_BZZKN1g7_mjs__WEBPACK_IMPORTED_MODULE_3__.s)(currentList) || [];\n            list = list.filter((s) => s.token !== token);\n            if (list.length > 0) {\n              await secondaryStorage.set(\n                `active-sessions-${userId}`,\n                JSON.stringify(list),\n                sessionExpiration\n              );\n            } else {\n              await secondaryStorage.delete(`active-sessions-${userId}`);\n            }\n          } else {\n            logger.error(\"Active sessions list not found in secondary storage\");\n          }\n        }\n        await secondaryStorage.delete(token);\n        if (!options.session?.storeSessionInDatabase || ctx.options.session?.preserveSessionInDatabase) {\n          return;\n        }\n      }\n      await adapter.delete({\n        model: \"session\",\n        where: [\n          {\n            field: \"token\",\n            value: token\n          }\n        ]\n      });\n    },\n    deleteAccounts: async (userId) => {\n      await adapter.deleteMany({\n        model: \"account\",\n        where: [\n          {\n            field: \"userId\",\n            value: userId\n          }\n        ]\n      });\n    },\n    deleteAccount: async (accountId) => {\n      await adapter.delete({\n        model: \"account\",\n        where: [\n          {\n            field: \"id\",\n            value: accountId\n          }\n        ]\n      });\n    },\n    deleteSessions: async (userIdOrSessionTokens) => {\n      if (secondaryStorage) {\n        if (typeof userIdOrSessionTokens === \"string\") {\n          const activeSession = await secondaryStorage.get(\n            `active-sessions-${userIdOrSessionTokens}`\n          );\n          const sessions = activeSession ? (0,_better_auth_BZZKN1g7_mjs__WEBPACK_IMPORTED_MODULE_3__.s)(activeSession) : [];\n          if (!sessions) return;\n          for (const session of sessions) {\n            await secondaryStorage.delete(session.token);\n          }\n        } else {\n          for (const sessionToken of userIdOrSessionTokens) {\n            const session = await secondaryStorage.get(sessionToken);\n            if (session) {\n              await secondaryStorage.delete(sessionToken);\n            }\n          }\n        }\n        if (!options.session?.storeSessionInDatabase || ctx.options.session?.preserveSessionInDatabase) {\n          return;\n        }\n      }\n      await adapter.deleteMany({\n        model: \"session\",\n        where: [\n          {\n            field: Array.isArray(userIdOrSessionTokens) ? \"token\" : \"userId\",\n            value: userIdOrSessionTokens,\n            operator: Array.isArray(userIdOrSessionTokens) ? \"in\" : void 0\n          }\n        ]\n      });\n    },\n    findOAuthUser: async (email, accountId, providerId) => {\n      const account = await adapter.findMany({\n        model: \"account\",\n        where: [\n          {\n            value: accountId,\n            field: \"accountId\"\n          }\n        ]\n      }).then((accounts) => {\n        return accounts.find((a) => a.providerId === providerId);\n      });\n      if (account) {\n        const user = await adapter.findOne({\n          model: \"user\",\n          where: [\n            {\n              value: account.userId,\n              field: \"id\"\n            }\n          ]\n        });\n        if (user) {\n          return {\n            user,\n            accounts: [account]\n          };\n        } else {\n          const user2 = await adapter.findOne({\n            model: \"user\",\n            where: [\n              {\n                value: email.toLowerCase(),\n                field: \"email\"\n              }\n            ]\n          });\n          if (user2) {\n            return {\n              user: user2,\n              accounts: [account]\n            };\n          }\n          return null;\n        }\n      } else {\n        const user = await adapter.findOne({\n          model: \"user\",\n          where: [\n            {\n              value: email.toLowerCase(),\n              field: \"email\"\n            }\n          ]\n        });\n        if (user) {\n          const accounts = await adapter.findMany({\n            model: \"account\",\n            where: [\n              {\n                value: user.id,\n                field: \"userId\"\n              }\n            ]\n          });\n          return {\n            user,\n            accounts: accounts || []\n          };\n        } else {\n          return null;\n        }\n      }\n    },\n    findUserByEmail: async (email, options2) => {\n      const user = await adapter.findOne({\n        model: \"user\",\n        where: [\n          {\n            value: email.toLowerCase(),\n            field: \"email\"\n          }\n        ]\n      });\n      if (!user) return null;\n      if (options2?.includeAccounts) {\n        const accounts = await adapter.findMany({\n          model: \"account\",\n          where: [\n            {\n              value: user.id,\n              field: \"userId\"\n            }\n          ]\n        });\n        return {\n          user,\n          accounts\n        };\n      }\n      return {\n        user,\n        accounts: []\n      };\n    },\n    findUserById: async (userId) => {\n      const user = await adapter.findOne({\n        model: \"user\",\n        where: [\n          {\n            field: \"id\",\n            value: userId\n          }\n        ]\n      });\n      return user;\n    },\n    linkAccount: async (account, context) => {\n      const _account = await createWithHooks(\n        {\n          // todo: we should remove auto setting createdAt and updatedAt in the next major release, since the db generators already handle that\n          createdAt: /* @__PURE__ */ new Date(),\n          updatedAt: /* @__PURE__ */ new Date(),\n          ...account\n        },\n        \"account\",\n        void 0,\n        context\n      );\n      return _account;\n    },\n    updateUser: async (userId, data, context) => {\n      const user = await updateWithHooks(\n        data,\n        [\n          {\n            field: \"id\",\n            value: userId\n          }\n        ],\n        \"user\",\n        void 0,\n        context\n      );\n      if (secondaryStorage && user) {\n        const listRaw = await secondaryStorage.get(`active-sessions-${userId}`);\n        if (listRaw) {\n          const now = Date.now();\n          const list = (0,_better_auth_BZZKN1g7_mjs__WEBPACK_IMPORTED_MODULE_3__.s)(listRaw) || [];\n          const validSessions = list.filter((s) => s.expiresAt > now);\n          await Promise.all(\n            validSessions.map(async ({ token }) => {\n              const cached = await secondaryStorage.get(token);\n              if (!cached) return;\n              const parsed = (0,_better_auth_BZZKN1g7_mjs__WEBPACK_IMPORTED_MODULE_3__.s)(cached);\n              if (!parsed) return;\n              const sessionTTL = Math.max(\n                Math.floor(\n                  (new Date(parsed.session.expiresAt).getTime() - now) / 1e3\n                ),\n                0\n              );\n              await secondaryStorage.set(\n                token,\n                JSON.stringify({\n                  session: parsed.session,\n                  user\n                }),\n                sessionTTL\n              );\n            })\n          );\n        }\n      }\n      return user;\n    },\n    updateUserByEmail: async (email, data, context) => {\n      const user = await updateWithHooks(\n        data,\n        [\n          {\n            field: \"email\",\n            value: email.toLowerCase()\n          }\n        ],\n        \"user\",\n        void 0,\n        context\n      );\n      return user;\n    },\n    updatePassword: async (userId, password, context) => {\n      await updateManyWithHooks(\n        {\n          password\n        },\n        [\n          {\n            field: \"userId\",\n            value: userId\n          },\n          {\n            field: \"providerId\",\n            value: \"credential\"\n          }\n        ],\n        \"account\",\n        void 0,\n        context\n      );\n    },\n    findAccounts: async (userId) => {\n      const accounts = await adapter.findMany({\n        model: \"account\",\n        where: [\n          {\n            field: \"userId\",\n            value: userId\n          }\n        ]\n      });\n      return accounts;\n    },\n    findAccount: async (accountId) => {\n      const account = await adapter.findOne({\n        model: \"account\",\n        where: [\n          {\n            field: \"accountId\",\n            value: accountId\n          }\n        ]\n      });\n      return account;\n    },\n    findAccountByProviderId: async (accountId, providerId) => {\n      const account = await adapter.findOne({\n        model: \"account\",\n        where: [\n          {\n            field: \"accountId\",\n            value: accountId\n          },\n          {\n            field: \"providerId\",\n            value: providerId\n          }\n        ]\n      });\n      return account;\n    },\n    findAccountByUserId: async (userId) => {\n      const account = await adapter.findMany({\n        model: \"account\",\n        where: [\n          {\n            field: \"userId\",\n            value: userId\n          }\n        ]\n      });\n      return account;\n    },\n    updateAccount: async (id, data, context) => {\n      const account = await updateWithHooks(\n        data,\n        [{ field: \"id\", value: id }],\n        \"account\",\n        void 0,\n        context\n      );\n      return account;\n    },\n    createVerificationValue: async (data, context) => {\n      const verification = await createWithHooks(\n        {\n          // todo: we should remove auto setting createdAt and updatedAt in the next major release, since the db generators already handle that\n          createdAt: /* @__PURE__ */ new Date(),\n          updatedAt: /* @__PURE__ */ new Date(),\n          ...data\n        },\n        \"verification\",\n        void 0,\n        context\n      );\n      return verification;\n    },\n    findVerificationValue: async (identifier) => {\n      const verification = await adapter.findMany({\n        model: \"verification\",\n        where: [\n          {\n            field: \"identifier\",\n            value: identifier\n          }\n        ],\n        sortBy: {\n          field: \"createdAt\",\n          direction: \"desc\"\n        },\n        limit: 1\n      });\n      if (!options.verification?.disableCleanup) {\n        await adapter.deleteMany({\n          model: \"verification\",\n          where: [\n            {\n              field: \"expiresAt\",\n              value: /* @__PURE__ */ new Date(),\n              operator: \"lt\"\n            }\n          ]\n        });\n      }\n      const lastVerification = verification[0];\n      return lastVerification;\n    },\n    deleteVerificationValue: async (id) => {\n      await adapter.delete({\n        model: \"verification\",\n        where: [\n          {\n            field: \"id\",\n            value: id\n          }\n        ]\n      });\n    },\n    deleteVerificationByIdentifier: async (identifier) => {\n      await adapter.delete({\n        model: \"verification\",\n        where: [\n          {\n            field: \"identifier\",\n            value: identifier\n          }\n        ]\n      });\n    },\n    updateVerificationValue: async (id, data, context) => {\n      const verification = await updateWithHooks(\n        data,\n        [{ field: \"id\", value: id }],\n        \"verification\",\n        void 0,\n        context\n      );\n      return verification;\n    }\n  };\n};\n\nasync function getAdapter(options) {\n  if (!options.database) {\n    const tables = (0,_better_auth_B_PTVODM_mjs__WEBPACK_IMPORTED_MODULE_15__.g)(options);\n    const memoryDB = Object.keys(tables).reduce((acc, key) => {\n      acc[key] = [];\n      return acc;\n    }, {});\n    _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_11__.a.warn(\n      \"No database configuration provided. Using memory adapter in development\"\n    );\n    return (0,_better_auth_C7uhlcDq_mjs__WEBPACK_IMPORTED_MODULE_17__.m)(memoryDB)(options);\n  }\n  if (typeof options.database === \"function\") {\n    return options.database(options);\n  }\n  const { kysely, databaseType } = await (0,_better_auth_B8b3lep0_mjs__WEBPACK_IMPORTED_MODULE_16__.c)(options);\n  if (!kysely) {\n    throw new _better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_14__.B(\"Failed to initialize database adapter\");\n  }\n  return (0,_better_auth_B8b3lep0_mjs__WEBPACK_IMPORTED_MODULE_16__.k)(kysely, {\n    type: databaseType || \"sqlite\",\n    debugLogs: \"debugLogs\" in options.database ? options.database.debugLogs : false\n  })(options);\n}\nfunction convertToDB(fields, values) {\n  let result = values.id ? {\n    id: values.id\n  } : {};\n  for (const key in fields) {\n    const field = fields[key];\n    const value = values[key];\n    if (value === void 0) {\n      continue;\n    }\n    result[field.fieldName || key] = value;\n  }\n  return result;\n}\nfunction convertFromDB(fields, values) {\n  if (!values) {\n    return null;\n  }\n  let result = {\n    id: values.id\n  };\n  for (const [key, value] of Object.entries(fields)) {\n    result[key] = values[value.fieldName || key];\n  }\n  return result;\n}\n\nfunction getSchema(config) {\n  const tables = (0,_better_auth_B_PTVODM_mjs__WEBPACK_IMPORTED_MODULE_15__.g)(config);\n  let schema = {};\n  for (const key in tables) {\n    const table = tables[key];\n    const fields = table.fields;\n    let actualFields = {};\n    Object.entries(fields).forEach(([key2, field]) => {\n      actualFields[field.fieldName || key2] = field;\n      if (field.references) {\n        const refTable = tables[field.references.model];\n        if (refTable) {\n          actualFields[field.fieldName || key2].references = {\n            model: refTable.modelName,\n            field: field.references.field\n          };\n        }\n      }\n    });\n    if (schema[table.modelName]) {\n      schema[table.modelName].fields = {\n        ...schema[table.modelName].fields,\n        ...actualFields\n      };\n      continue;\n    }\n    schema[table.modelName] = {\n      fields: actualFields,\n      order: table.order || Infinity\n    };\n  }\n  return schema;\n}\n\nconst postgresMap = {\n  string: [\"character varying\", \"varchar\", \"text\"],\n  number: [\n    \"int4\",\n    \"integer\",\n    \"bigint\",\n    \"smallint\",\n    \"numeric\",\n    \"real\",\n    \"double precision\"\n  ],\n  boolean: [\"bool\", \"boolean\"],\n  date: [\"timestamp\", \"date\"],\n  json: [\"json\", \"jsonb\"]\n};\nconst mysqlMap = {\n  string: [\"varchar\", \"text\"],\n  number: [\n    \"integer\",\n    \"int\",\n    \"bigint\",\n    \"smallint\",\n    \"decimal\",\n    \"float\",\n    \"double\"\n  ],\n  boolean: [\"boolean\", \"tinyint\"],\n  date: [\"timestamp\", \"datetime\", \"date\"],\n  json: [\"json\"]\n};\nconst sqliteMap = {\n  string: [\"TEXT\"],\n  number: [\"INTEGER\", \"REAL\"],\n  boolean: [\"INTEGER\", \"BOOLEAN\"],\n  // 0 or 1\n  date: [\"DATE\", \"INTEGER\"],\n  json: [\"TEXT\"]\n};\nconst mssqlMap = {\n  string: [\"varchar\", \"nvarchar\"],\n  number: [\"int\", \"bigint\", \"smallint\", \"decimal\", \"float\", \"double\"],\n  boolean: [\"bit\", \"smallint\"],\n  date: [\"datetime\", \"date\"],\n  json: [\"varchar\", \"nvarchar\"]\n};\nconst map = {\n  postgres: postgresMap,\n  mysql: mysqlMap,\n  sqlite: sqliteMap,\n  mssql: mssqlMap\n};\nfunction matchType(columnDataType, fieldType, dbType) {\n  function normalize(type) {\n    return type.toLowerCase().split(\"(\")[0].trim();\n  }\n  if (fieldType === \"string[]\" || fieldType === \"number[]\") {\n    return columnDataType.toLowerCase().includes(\"json\");\n  }\n  const types = map[dbType];\n  const expected = Array.isArray(fieldType) ? types[\"string\"].map((t) => t.toLowerCase()) : types[fieldType].map((t) => t.toLowerCase());\n  return expected.includes(normalize(columnDataType));\n}\nasync function getMigrations(config) {\n  const betterAuthSchema = getSchema(config);\n  const logger = (0,_better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_11__.c)(config.logger);\n  let { kysely: db, databaseType: dbType } = await (0,_better_auth_B8b3lep0_mjs__WEBPACK_IMPORTED_MODULE_16__.c)(config);\n  if (!dbType) {\n    logger.warn(\n      \"Could not determine database type, defaulting to sqlite. Please provide a type in the database options to avoid this.\"\n    );\n    dbType = \"sqlite\";\n  }\n  if (!db) {\n    logger.error(\n      \"Only kysely adapter is supported for migrations. You can use `generate` command to generate the schema, if you're using a different adapter.\"\n    );\n    process.exit(1);\n  }\n  const tableMetadata = await db.introspection.getTables();\n  const toBeCreated = [];\n  const toBeAdded = [];\n  for (const [key, value] of Object.entries(betterAuthSchema)) {\n    const table = tableMetadata.find((t) => t.name === key);\n    if (!table) {\n      const tIndex = toBeCreated.findIndex((t) => t.table === key);\n      const tableData = {\n        table: key,\n        fields: value.fields,\n        order: value.order || Infinity\n      };\n      const insertIndex = toBeCreated.findIndex(\n        (t) => (t.order || Infinity) > tableData.order\n      );\n      if (insertIndex === -1) {\n        if (tIndex === -1) {\n          toBeCreated.push(tableData);\n        } else {\n          toBeCreated[tIndex].fields = {\n            ...toBeCreated[tIndex].fields,\n            ...value.fields\n          };\n        }\n      } else {\n        toBeCreated.splice(insertIndex, 0, tableData);\n      }\n      continue;\n    }\n    let toBeAddedFields = {};\n    for (const [fieldName, field] of Object.entries(value.fields)) {\n      const column = table.columns.find((c) => c.name === fieldName);\n      if (!column) {\n        toBeAddedFields[fieldName] = field;\n        continue;\n      }\n      if (matchType(column.dataType, field.type, dbType)) {\n        continue;\n      } else {\n        logger.warn(\n          `Field ${fieldName} in table ${key} has a different type in the database. Expected ${field.type} but got ${column.dataType}.`\n        );\n      }\n    }\n    if (Object.keys(toBeAddedFields).length > 0) {\n      toBeAdded.push({\n        table: key,\n        fields: toBeAddedFields,\n        order: value.order || Infinity\n      });\n    }\n  }\n  const migrations = [];\n  function getType(field, fieldName) {\n    const type = field.type;\n    const typeMap = {\n      string: {\n        sqlite: \"text\",\n        postgres: \"text\",\n        mysql: field.unique ? \"varchar(255)\" : field.references ? \"varchar(36)\" : \"text\",\n        mssql: field.unique || field.sortable ? \"varchar(255)\" : field.references ? \"varchar(36)\" : (\n          // mssql deprecated `text`, and the alternative is `varchar(max)`.\n          // Kysely type interface doesn't support `text`, so we set this to `varchar(8000)` as\n          // that's the max length for `varchar`\n          \"varchar(8000)\"\n        )\n      },\n      boolean: {\n        sqlite: \"integer\",\n        postgres: \"boolean\",\n        mysql: \"boolean\",\n        mssql: \"smallint\"\n      },\n      number: {\n        sqlite: field.bigint ? \"bigint\" : \"integer\",\n        postgres: field.bigint ? \"bigint\" : \"integer\",\n        mysql: field.bigint ? \"bigint\" : \"integer\",\n        mssql: field.bigint ? \"bigint\" : \"integer\"\n      },\n      date: {\n        sqlite: \"date\",\n        postgres: \"timestamp\",\n        mysql: \"datetime\",\n        mssql: \"datetime\"\n      },\n      json: {\n        sqlite: \"text\",\n        postgres: \"json\",\n        mysql: \"json\",\n        mssql: \"varchar(8000)\"\n      },\n      id: {\n        postgres: config.advanced?.database?.useNumberId ? \"serial\" : \"text\",\n        mysql: config.advanced?.database?.useNumberId ? \"integer\" : \"varchar(36)\",\n        mssql: config.advanced?.database?.useNumberId ? \"integer\" : \"varchar(36)\",\n        sqlite: config.advanced?.database?.useNumberId ? \"integer\" : \"text\"\n      }\n    };\n    if (fieldName === \"id\" || field.references?.field === \"id\") {\n      return typeMap.id[dbType];\n    }\n    if (dbType === \"sqlite\" && (type === \"string[]\" || type === \"number[]\")) {\n      return \"text\";\n    }\n    if (type === \"string[]\" || type === \"number[]\") {\n      return \"jsonb\";\n    }\n    if (Array.isArray(type)) {\n      return \"text\";\n    }\n    return typeMap[type][dbType || \"sqlite\"];\n  }\n  if (toBeAdded.length) {\n    for (const table of toBeAdded) {\n      for (const [fieldName, field] of Object.entries(table.fields)) {\n        const type = getType(field, fieldName);\n        const exec = db.schema.alterTable(table.table).addColumn(fieldName, type, (col) => {\n          col = field.required !== false ? col.notNull() : col;\n          if (field.references) {\n            col = col.references(\n              `${field.references.model}.${field.references.field}`\n            ).onDelete(field.references.onDelete || \"cascade\");\n          }\n          if (field.unique) {\n            col = col.unique();\n          }\n          if (field.type === \"date\" && typeof field.defaultValue === \"function\" && (dbType === \"postgres\" || dbType === \"mysql\" || dbType === \"mssql\")) {\n            col = col.defaultTo((0,kysely__WEBPACK_IMPORTED_MODULE_18__.sql)`CURRENT_TIMESTAMP`);\n          }\n          return col;\n        });\n        migrations.push(exec);\n      }\n    }\n  }\n  if (toBeCreated.length) {\n    for (const table of toBeCreated) {\n      let dbT = db.schema.createTable(table.table).addColumn(\n        \"id\",\n        config.advanced?.database?.useNumberId ? dbType === \"postgres\" ? \"serial\" : \"integer\" : dbType === \"mysql\" || dbType === \"mssql\" ? \"varchar(36)\" : \"text\",\n        (col) => {\n          if (config.advanced?.database?.useNumberId) {\n            if (dbType === \"postgres\") {\n              return col.primaryKey().notNull();\n            }\n            return col.autoIncrement().primaryKey().notNull();\n          }\n          return col.primaryKey().notNull();\n        }\n      );\n      for (const [fieldName, field] of Object.entries(table.fields)) {\n        const type = getType(field, fieldName);\n        dbT = dbT.addColumn(fieldName, type, (col) => {\n          col = field.required !== false ? col.notNull() : col;\n          if (field.references) {\n            col = col.references(`${field.references.model}.${field.references.field}`).onDelete(field.references.onDelete || \"cascade\");\n          }\n          if (field.unique) {\n            col = col.unique();\n          }\n          if (field.type === \"date\" && typeof field.defaultValue === \"function\" && (dbType === \"postgres\" || dbType === \"mysql\" || dbType === \"mssql\")) {\n            col = col.defaultTo((0,kysely__WEBPACK_IMPORTED_MODULE_18__.sql)`CURRENT_TIMESTAMP`);\n          }\n          return col;\n        });\n      }\n      migrations.push(dbT);\n    }\n  }\n  async function runMigrations() {\n    for (const migration of migrations) {\n      await migration.execute();\n    }\n  }\n  async function compileMigrations() {\n    const compiled = migrations.map((m) => m.compile().sql);\n    return compiled.join(\";\\n\\n\") + \";\";\n  }\n  return { toBeCreated, toBeAdded, runMigrations, compileMigrations };\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9zaGFyZWQvYmV0dGVyLWF1dGguQ1NWQ3RiNzcubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUEwRDtBQUNpQztBQUNuQztBQUNRO0FBQ0g7QUFDN0M7QUFDSztBQUNZO0FBQ0Y7QUFDRDtBQUNJO0FBQ0M7QUFDckI7QUFDZ0I7QUFDRjtBQUNJO0FBQ0g7QUFDTztBQUN3QztBQUN4QztBQUNEO0FBQytCO0FBQ0Y7QUFDMEI7QUFDMUI7QUFDbkM7O0FBRTdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHdEQUF3RDtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNFQUFzRSxPQUFPO0FBQzdFO0FBQ0E7QUFDQSx1QkFBdUIsNERBQWE7QUFD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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDREQUFZO0FBQzdCLFFBQVEsbUNBQW1DLFFBQVEsNkRBQW1CO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsbUJBQW1CLFdBQVcsV0FBVyxLQUFLLGlEQUFpRCxZQUFZLFVBQVUsZ0JBQWdCO0FBQ3JJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHVCQUF1QixHQUFHLHVCQUF1QjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsNENBQUc7QUFDbkM7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsdUJBQXVCLEdBQUcsdUJBQXVCO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsNENBQUc7QUFDbkM7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLFdBQVc7QUFDdEM7QUFDQSxXQUFXO0FBQ1g7O0FBRW9LIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFtYWFuXFxPbmVEcml2ZVxcRGVza3RvcFxcS2FuZGlkXzJcXE5ldyBmb2xkZXIgKDIpXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxzaGFyZWRcXGJldHRlci1hdXRoLkNTVkN0Yjc3Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnIGFzIGdldERhdGUgfSBmcm9tICcuL2JldHRlci1hdXRoLkNXNkQ5ZVN4Lm1qcyc7XG5pbXBvcnQgeyBlIGFzIHBhcnNlU2Vzc2lvbk91dHB1dCwgYiBhcyBwYXJzZVVzZXJPdXRwdXQgfSBmcm9tICcuL2JldHRlci1hdXRoLkRjdjhQUzdULm1qcyc7XG5pbXBvcnQgeyBnIGFzIGdldElwIH0gZnJvbSAnLi9iZXR0ZXItYXV0aC5PMlZ0RGtESy5tanMnO1xuaW1wb3J0IHsgcyBhcyBzYWZlSlNPTlBhcnNlIH0gZnJvbSAnLi9iZXR0ZXItYXV0aC5CWlpLTjFnNy5tanMnO1xuaW1wb3J0IHsgZyBhcyBnZW5lcmF0ZUlkIH0gZnJvbSAnLi9iZXR0ZXItYXV0aC5CVVBQUlhmSy5tanMnO1xuaW1wb3J0ICd6b2QvdjQnO1xuaW1wb3J0ICdiZXR0ZXItY2FsbCc7XG5pbXBvcnQgJ0BiZXR0ZXItYXV0aC91dGlscy9oYXNoJztcbmltcG9ydCAnQG5vYmxlL2NpcGhlcnMvY2hhY2hhJztcbmltcG9ydCAnQG5vYmxlL2NpcGhlcnMvdXRpbHMnO1xuaW1wb3J0ICdAbm9ibGUvY2lwaGVycy93ZWJjcnlwdG8nO1xuaW1wb3J0ICdAYmV0dGVyLWF1dGgvdXRpbHMvYmFzZTY0JztcbmltcG9ydCAnam9zZSc7XG5pbXBvcnQgJ0Bub2JsZS9oYXNoZXMvc2NyeXB0JztcbmltcG9ydCAnQGJldHRlci1hdXRoL3V0aWxzJztcbmltcG9ydCAnQGJldHRlci1hdXRoL3V0aWxzL2hleCc7XG5pbXBvcnQgJ0Bub2JsZS9oYXNoZXMvdXRpbHMnO1xuaW1wb3J0ICcuL2JldHRlci1hdXRoLkI0UW94ZGdjLm1qcyc7XG5pbXBvcnQgeyBhIGFzIGxvZ2dlciwgYyBhcyBjcmVhdGVMb2dnZXIgfSBmcm9tICcuL2JldHRlci1hdXRoLkJqQmx5YnYtLm1qcyc7XG5pbXBvcnQgJy4vYmV0dGVyLWF1dGguQ01RM3JBLUkubWpzJztcbmltcG9ydCAnQGJldHRlci1hdXRoL3V0aWxzL3JhbmRvbSc7XG5pbXBvcnQgeyBCIGFzIEJldHRlckF1dGhFcnJvciB9IGZyb20gJy4vYmV0dGVyLWF1dGguRGR6U0pmLW4ubWpzJztcbmltcG9ydCB7IGcgYXMgZ2V0QXV0aFRhYmxlcyB9IGZyb20gJy4vYmV0dGVyLWF1dGguQl9QVFZPRE0ubWpzJztcbmltcG9ydCB7IGMgYXMgY3JlYXRlS3lzZWx5QWRhcHRlciwgayBhcyBreXNlbHlBZGFwdGVyIH0gZnJvbSAnLi9iZXR0ZXItYXV0aC5COGIzbGVwMC5tanMnO1xuaW1wb3J0IHsgbSBhcyBtZW1vcnlBZGFwdGVyIH0gZnJvbSAnLi9iZXR0ZXItYXV0aC5DN3VobGNEcS5tanMnO1xuaW1wb3J0IHsgc3FsIH0gZnJvbSAna3lzZWx5JztcblxuZnVuY3Rpb24gZ2V0V2l0aEhvb2tzKGFkYXB0ZXIsIGN0eCkge1xuICBjb25zdCBob29rcyA9IGN0eC5ob29rcztcbiAgYXN5bmMgZnVuY3Rpb24gY3JlYXRlV2l0aEhvb2tzKGRhdGEsIG1vZGVsLCBjdXN0b21DcmVhdGVGbiwgY29udGV4dCkge1xuICAgIGxldCBhY3R1YWxEYXRhID0gZGF0YTtcbiAgICBmb3IgKGNvbnN0IGhvb2sgb2YgaG9va3MgfHwgW10pIHtcbiAgICAgIGNvbnN0IHRvUnVuID0gaG9va1ttb2RlbF0/LmNyZWF0ZT8uYmVmb3JlO1xuICAgICAgaWYgKHRvUnVuKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRvUnVuKGFjdHVhbERhdGEsIGNvbnRleHQpO1xuICAgICAgICBpZiAocmVzdWx0ID09PSBmYWxzZSkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlzT2JqZWN0ID0gdHlwZW9mIHJlc3VsdCA9PT0gXCJvYmplY3RcIiAmJiBcImRhdGFcIiBpbiByZXN1bHQ7XG4gICAgICAgIGlmIChpc09iamVjdCkge1xuICAgICAgICAgIGFjdHVhbERhdGEgPSB7XG4gICAgICAgICAgICAuLi5hY3R1YWxEYXRhLFxuICAgICAgICAgICAgLi4ucmVzdWx0LmRhdGFcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGN1c3RvbUNyZWF0ZWQgPSBjdXN0b21DcmVhdGVGbiA/IGF3YWl0IGN1c3RvbUNyZWF0ZUZuLmZuKGFjdHVhbERhdGEpIDogbnVsbDtcbiAgICBjb25zdCBjcmVhdGVkID0gIWN1c3RvbUNyZWF0ZUZuIHx8IGN1c3RvbUNyZWF0ZUZuLmV4ZWN1dGVNYWluRm4gPyBhd2FpdCBhZGFwdGVyLmNyZWF0ZSh7XG4gICAgICBtb2RlbCxcbiAgICAgIGRhdGE6IGFjdHVhbERhdGEsXG4gICAgICBmb3JjZUFsbG93SWQ6IHRydWVcbiAgICB9KSA6IGN1c3RvbUNyZWF0ZWQ7XG4gICAgZm9yIChjb25zdCBob29rIG9mIGhvb2tzIHx8IFtdKSB7XG4gICAgICBjb25zdCB0b1J1biA9IGhvb2tbbW9kZWxdPy5jcmVhdGU/LmFmdGVyO1xuICAgICAgaWYgKHRvUnVuKSB7XG4gICAgICAgIGF3YWl0IHRvUnVuKGNyZWF0ZWQsIGNvbnRleHQpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY3JlYXRlZDtcbiAgfVxuICBhc3luYyBmdW5jdGlvbiB1cGRhdGVXaXRoSG9va3MoZGF0YSwgd2hlcmUsIG1vZGVsLCBjdXN0b21VcGRhdGVGbiwgY29udGV4dCkge1xuICAgIGxldCBhY3R1YWxEYXRhID0gZGF0YTtcbiAgICBmb3IgKGNvbnN0IGhvb2sgb2YgaG9va3MgfHwgW10pIHtcbiAgICAgIGNvbnN0IHRvUnVuID0gaG9va1ttb2RlbF0/LnVwZGF0ZT8uYmVmb3JlO1xuICAgICAgaWYgKHRvUnVuKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRvUnVuKGRhdGEsIGNvbnRleHQpO1xuICAgICAgICBpZiAocmVzdWx0ID09PSBmYWxzZSkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlzT2JqZWN0ID0gdHlwZW9mIHJlc3VsdCA9PT0gXCJvYmplY3RcIjtcbiAgICAgICAgYWN0dWFsRGF0YSA9IGlzT2JqZWN0ID8gcmVzdWx0LmRhdGEgOiByZXN1bHQ7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGN1c3RvbVVwZGF0ZWQgPSBjdXN0b21VcGRhdGVGbiA/IGF3YWl0IGN1c3RvbVVwZGF0ZUZuLmZuKGFjdHVhbERhdGEpIDogbnVsbDtcbiAgICBjb25zdCB1cGRhdGVkID0gIWN1c3RvbVVwZGF0ZUZuIHx8IGN1c3RvbVVwZGF0ZUZuLmV4ZWN1dGVNYWluRm4gPyBhd2FpdCBhZGFwdGVyLnVwZGF0ZSh7XG4gICAgICBtb2RlbCxcbiAgICAgIHVwZGF0ZTogYWN0dWFsRGF0YSxcbiAgICAgIHdoZXJlXG4gICAgfSkgOiBjdXN0b21VcGRhdGVkO1xuICAgIGZvciAoY29uc3QgaG9vayBvZiBob29rcyB8fCBbXSkge1xuICAgICAgY29uc3QgdG9SdW4gPSBob29rW21vZGVsXT8udXBkYXRlPy5hZnRlcjtcbiAgICAgIGlmICh0b1J1bikge1xuICAgICAgICBhd2FpdCB0b1J1bih1cGRhdGVkLCBjb250ZXh0KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZWQ7XG4gIH1cbiAgYXN5bmMgZnVuY3Rpb24gdXBkYXRlTWFueVdpdGhIb29rcyhkYXRhLCB3aGVyZSwgbW9kZWwsIGN1c3RvbVVwZGF0ZUZuLCBjb250ZXh0KSB7XG4gICAgbGV0IGFjdHVhbERhdGEgPSBkYXRhO1xuICAgIGZvciAoY29uc3QgaG9vayBvZiBob29rcyB8fCBbXSkge1xuICAgICAgY29uc3QgdG9SdW4gPSBob29rW21vZGVsXT8udXBkYXRlPy5iZWZvcmU7XG4gICAgICBpZiAodG9SdW4pIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdG9SdW4oZGF0YSwgY29udGV4dCk7XG4gICAgICAgIGlmIChyZXN1bHQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXNPYmplY3QgPSB0eXBlb2YgcmVzdWx0ID09PSBcIm9iamVjdFwiO1xuICAgICAgICBhY3R1YWxEYXRhID0gaXNPYmplY3QgPyByZXN1bHQuZGF0YSA6IHJlc3VsdDtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgY3VzdG9tVXBkYXRlZCA9IGN1c3RvbVVwZGF0ZUZuID8gYXdhaXQgY3VzdG9tVXBkYXRlRm4uZm4oYWN0dWFsRGF0YSkgOiBudWxsO1xuICAgIGNvbnN0IHVwZGF0ZWQgPSAhY3VzdG9tVXBkYXRlRm4gfHwgY3VzdG9tVXBkYXRlRm4uZXhlY3V0ZU1haW5GbiA/IGF3YWl0IGFkYXB0ZXIudXBkYXRlTWFueSh7XG4gICAgICBtb2RlbCxcbiAgICAgIHVwZGF0ZTogYWN0dWFsRGF0YSxcbiAgICAgIHdoZXJlXG4gICAgfSkgOiBjdXN0b21VcGRhdGVkO1xuICAgIGZvciAoY29uc3QgaG9vayBvZiBob29rcyB8fCBbXSkge1xuICAgICAgY29uc3QgdG9SdW4gPSBob29rW21vZGVsXT8udXBkYXRlPy5hZnRlcjtcbiAgICAgIGlmICh0b1J1bikge1xuICAgICAgICBhd2FpdCB0b1J1bih1cGRhdGVkLCBjb250ZXh0KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZWQ7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBjcmVhdGVXaXRoSG9va3MsXG4gICAgdXBkYXRlV2l0aEhvb2tzLFxuICAgIHVwZGF0ZU1hbnlXaXRoSG9va3NcbiAgfTtcbn1cblxuY29uc3QgY3JlYXRlSW50ZXJuYWxBZGFwdGVyID0gKGFkYXB0ZXIsIGN0eCkgPT4ge1xuICBjb25zdCBsb2dnZXIgPSBjdHgubG9nZ2VyO1xuICBjb25zdCBvcHRpb25zID0gY3R4Lm9wdGlvbnM7XG4gIGNvbnN0IHNlY29uZGFyeVN0b3JhZ2UgPSBvcHRpb25zLnNlY29uZGFyeVN0b3JhZ2U7XG4gIGNvbnN0IHNlc3Npb25FeHBpcmF0aW9uID0gb3B0aW9ucy5zZXNzaW9uPy5leHBpcmVzSW4gfHwgNjAgKiA2MCAqIDI0ICogNztcbiAgY29uc3QgeyBjcmVhdGVXaXRoSG9va3MsIHVwZGF0ZVdpdGhIb29rcywgdXBkYXRlTWFueVdpdGhIb29rcyB9ID0gZ2V0V2l0aEhvb2tzKGFkYXB0ZXIsIGN0eCk7XG4gIHJldHVybiB7XG4gICAgY3JlYXRlT0F1dGhVc2VyOiBhc3luYyAodXNlciwgYWNjb3VudCwgY29udGV4dCkgPT4ge1xuICAgICAgY29uc3QgY3JlYXRlZFVzZXIgPSBhd2FpdCBjcmVhdGVXaXRoSG9va3MoXG4gICAgICAgIHtcbiAgICAgICAgICAvLyB0b2RvOiB3ZSBzaG91bGQgcmVtb3ZlIGF1dG8gc2V0dGluZyBjcmVhdGVkQXQgYW5kIHVwZGF0ZWRBdCBpbiB0aGUgbmV4dCBtYWpvciByZWxlYXNlLCBzaW5jZSB0aGUgZGIgZ2VuZXJhdG9ycyBhbHJlYWR5IGhhbmRsZSB0aGF0XG4gICAgICAgICAgY3JlYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcbiAgICAgICAgICB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuICAgICAgICAgIC4uLnVzZXJcbiAgICAgICAgfSxcbiAgICAgICAgXCJ1c2VyXCIsXG4gICAgICAgIHZvaWQgMCxcbiAgICAgICAgY29udGV4dFxuICAgICAgKTtcbiAgICAgIGNvbnN0IGNyZWF0ZWRBY2NvdW50ID0gYXdhaXQgY3JlYXRlV2l0aEhvb2tzKFxuICAgICAgICB7XG4gICAgICAgICAgLi4uYWNjb3VudCxcbiAgICAgICAgICB1c2VySWQ6IGNyZWF0ZWRVc2VyLmlkLFxuICAgICAgICAgIC8vIHRvZG86IHdlIHNob3VsZCByZW1vdmUgYXV0byBzZXR0aW5nIGNyZWF0ZWRBdCBhbmQgdXBkYXRlZEF0IGluIHRoZSBuZXh0IG1ham9yIHJlbGVhc2UsIHNpbmNlIHRoZSBkYiBnZW5lcmF0b3JzIGFscmVhZHkgaGFuZGxlIHRoYXRcbiAgICAgICAgICBjcmVhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuICAgICAgICAgIHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcbiAgICAgICAgfSxcbiAgICAgICAgXCJhY2NvdW50XCIsXG4gICAgICAgIHZvaWQgMCxcbiAgICAgICAgY29udGV4dFxuICAgICAgKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHVzZXI6IGNyZWF0ZWRVc2VyLFxuICAgICAgICBhY2NvdW50OiBjcmVhdGVkQWNjb3VudFxuICAgICAgfTtcbiAgICB9LFxuICAgIGNyZWF0ZVVzZXI6IGFzeW5jICh1c2VyLCBjb250ZXh0KSA9PiB7XG4gICAgICBjb25zdCBjcmVhdGVkVXNlciA9IGF3YWl0IGNyZWF0ZVdpdGhIb29rcyhcbiAgICAgICAge1xuICAgICAgICAgIC8vIHRvZG86IHdlIHNob3VsZCByZW1vdmUgYXV0byBzZXR0aW5nIGNyZWF0ZWRBdCBhbmQgdXBkYXRlZEF0IGluIHRoZSBuZXh0IG1ham9yIHJlbGVhc2UsIHNpbmNlIHRoZSBkYiBnZW5lcmF0b3JzIGFscmVhZHkgaGFuZGxlIHRoYXRcbiAgICAgICAgICBjcmVhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuICAgICAgICAgIHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG4gICAgICAgICAgLi4udXNlcixcbiAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbD8udG9Mb3dlckNhc2UoKVxuICAgICAgICB9LFxuICAgICAgICBcInVzZXJcIixcbiAgICAgICAgdm9pZCAwLFxuICAgICAgICBjb250ZXh0XG4gICAgICApO1xuICAgICAgcmV0dXJuIGNyZWF0ZWRVc2VyO1xuICAgIH0sXG4gICAgY3JlYXRlQWNjb3VudDogYXN5bmMgKGFjY291bnQsIGNvbnRleHQpID0+IHtcbiAgICAgIGNvbnN0IGNyZWF0ZWRBY2NvdW50ID0gYXdhaXQgY3JlYXRlV2l0aEhvb2tzKFxuICAgICAgICB7XG4gICAgICAgICAgLy8gdG9kbzogd2Ugc2hvdWxkIHJlbW92ZSBhdXRvIHNldHRpbmcgY3JlYXRlZEF0IGFuZCB1cGRhdGVkQXQgaW4gdGhlIG5leHQgbWFqb3IgcmVsZWFzZSwgc2luY2UgdGhlIGRiIGdlbmVyYXRvcnMgYWxyZWFkeSBoYW5kbGUgdGhhdFxuICAgICAgICAgIGNyZWF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG4gICAgICAgICAgdXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcbiAgICAgICAgICAuLi5hY2NvdW50XG4gICAgICAgIH0sXG4gICAgICAgIFwiYWNjb3VudFwiLFxuICAgICAgICB2b2lkIDAsXG4gICAgICAgIGNvbnRleHRcbiAgICAgICk7XG4gICAgICByZXR1cm4gY3JlYXRlZEFjY291bnQ7XG4gICAgfSxcbiAgICBsaXN0U2Vzc2lvbnM6IGFzeW5jICh1c2VySWQpID0+IHtcbiAgICAgIGlmIChzZWNvbmRhcnlTdG9yYWdlKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRMaXN0ID0gYXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5nZXQoXG4gICAgICAgICAgYGFjdGl2ZS1zZXNzaW9ucy0ke3VzZXJJZH1gXG4gICAgICAgICk7XG4gICAgICAgIGlmICghY3VycmVudExpc3QpIHJldHVybiBbXTtcbiAgICAgICAgY29uc3QgbGlzdCA9IHNhZmVKU09OUGFyc2UoY3VycmVudExpc3QpIHx8IFtdO1xuICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCB2YWxpZFNlc3Npb25zID0gbGlzdC5maWx0ZXIoKHMpID0+IHMuZXhwaXJlc0F0ID4gbm93KTtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbnMyID0gW107XG4gICAgICAgIGZvciAoY29uc3Qgc2Vzc2lvbiBvZiB2YWxpZFNlc3Npb25zKSB7XG4gICAgICAgICAgY29uc3Qgc2Vzc2lvblN0cmluZ2lmaWVkID0gYXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5nZXQoc2Vzc2lvbi50b2tlbik7XG4gICAgICAgICAgaWYgKHNlc3Npb25TdHJpbmdpZmllZCkge1xuICAgICAgICAgICAgY29uc3QgcyA9IHNhZmVKU09OUGFyc2Uoc2Vzc2lvblN0cmluZ2lmaWVkKTtcbiAgICAgICAgICAgIGlmICghcykgcmV0dXJuIFtdO1xuICAgICAgICAgICAgY29uc3QgcGFyc2VkU2Vzc2lvbiA9IHBhcnNlU2Vzc2lvbk91dHB1dChjdHgub3B0aW9ucywge1xuICAgICAgICAgICAgICAuLi5zLnNlc3Npb24sXG4gICAgICAgICAgICAgIGV4cGlyZXNBdDogbmV3IERhdGUocy5zZXNzaW9uLmV4cGlyZXNBdClcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc2Vzc2lvbnMyLnB1c2gocGFyc2VkU2Vzc2lvbik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZXNzaW9uczI7XG4gICAgICB9XG4gICAgICBjb25zdCBzZXNzaW9ucyA9IGF3YWl0IGFkYXB0ZXIuZmluZE1hbnkoe1xuICAgICAgICBtb2RlbDogXCJzZXNzaW9uXCIsXG4gICAgICAgIHdoZXJlOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgZmllbGQ6IFwidXNlcklkXCIsXG4gICAgICAgICAgICB2YWx1ZTogdXNlcklkXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBzZXNzaW9ucztcbiAgICB9LFxuICAgIGxpc3RVc2VyczogYXN5bmMgKGxpbWl0LCBvZmZzZXQsIHNvcnRCeSwgd2hlcmUpID0+IHtcbiAgICAgIGNvbnN0IHVzZXJzID0gYXdhaXQgYWRhcHRlci5maW5kTWFueSh7XG4gICAgICAgIG1vZGVsOiBcInVzZXJcIixcbiAgICAgICAgbGltaXQsXG4gICAgICAgIG9mZnNldCxcbiAgICAgICAgc29ydEJ5LFxuICAgICAgICB3aGVyZVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdXNlcnM7XG4gICAgfSxcbiAgICBjb3VudFRvdGFsVXNlcnM6IGFzeW5jICh3aGVyZSkgPT4ge1xuICAgICAgY29uc3QgdG90YWwgPSBhd2FpdCBhZGFwdGVyLmNvdW50KHtcbiAgICAgICAgbW9kZWw6IFwidXNlclwiLFxuICAgICAgICB3aGVyZVxuICAgICAgfSk7XG4gICAgICBpZiAodHlwZW9mIHRvdGFsID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiBwYXJzZUludCh0b3RhbCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdG90YWw7XG4gICAgfSxcbiAgICBkZWxldGVVc2VyOiBhc3luYyAodXNlcklkKSA9PiB7XG4gICAgICBpZiAoc2Vjb25kYXJ5U3RvcmFnZSkge1xuICAgICAgICBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmRlbGV0ZShgYWN0aXZlLXNlc3Npb25zLSR7dXNlcklkfWApO1xuICAgICAgfVxuICAgICAgaWYgKCFzZWNvbmRhcnlTdG9yYWdlIHx8IG9wdGlvbnMuc2Vzc2lvbj8uc3RvcmVTZXNzaW9uSW5EYXRhYmFzZSkge1xuICAgICAgICBhd2FpdCBhZGFwdGVyLmRlbGV0ZU1hbnkoe1xuICAgICAgICAgIG1vZGVsOiBcInNlc3Npb25cIixcbiAgICAgICAgICB3aGVyZTogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBmaWVsZDogXCJ1c2VySWRcIixcbiAgICAgICAgICAgICAgdmFsdWU6IHVzZXJJZFxuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBhd2FpdCBhZGFwdGVyLmRlbGV0ZU1hbnkoe1xuICAgICAgICBtb2RlbDogXCJhY2NvdW50XCIsXG4gICAgICAgIHdoZXJlOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgZmllbGQ6IFwidXNlcklkXCIsXG4gICAgICAgICAgICB2YWx1ZTogdXNlcklkXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9KTtcbiAgICAgIGF3YWl0IGFkYXB0ZXIuZGVsZXRlKHtcbiAgICAgICAgbW9kZWw6IFwidXNlclwiLFxuICAgICAgICB3aGVyZTogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGZpZWxkOiBcImlkXCIsXG4gICAgICAgICAgICB2YWx1ZTogdXNlcklkXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGNyZWF0ZVNlc3Npb246IGFzeW5jICh1c2VySWQsIGN0eDIsIGRvbnRSZW1lbWJlck1lLCBvdmVycmlkZSwgb3ZlcnJpZGVBbGwpID0+IHtcbiAgICAgIGNvbnN0IGhlYWRlcnMgPSBjdHgyLmhlYWRlcnMgfHwgY3R4Mi5yZXF1ZXN0Py5oZWFkZXJzO1xuICAgICAgY29uc3QgeyBpZDogXywgLi4ucmVzdCB9ID0gb3ZlcnJpZGUgfHwge307XG4gICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICBpcEFkZHJlc3M6IGN0eDIucmVxdWVzdCB8fCBjdHgyLmhlYWRlcnMgPyBnZXRJcChjdHgyLnJlcXVlc3QgfHwgY3R4Mi5oZWFkZXJzLCBjdHgyLmNvbnRleHQub3B0aW9ucykgfHwgXCJcIiA6IFwiXCIsXG4gICAgICAgIHVzZXJBZ2VudDogaGVhZGVycz8uZ2V0KFwidXNlci1hZ2VudFwiKSB8fCBcIlwiLFxuICAgICAgICAuLi5yZXN0LFxuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdGhlIHVzZXIgZG9lc24ndCB3YW50IHRvIGJlIHJlbWVtYmVyZWRcbiAgICAgICAgICogc2V0IHRoZSBzZXNzaW9uIHRvIGV4cGlyZSBpbiAxIGRheS5cbiAgICAgICAgICogVGhlIGNvb2tpZSB3aWxsIGJlIHNldCB0byBleHBpcmUgYXQgdGhlIGVuZCBvZiB0aGUgc2Vzc2lvblxuICAgICAgICAgKi9cbiAgICAgICAgZXhwaXJlc0F0OiBkb250UmVtZW1iZXJNZSA/IGdldERhdGUoNjAgKiA2MCAqIDI0LCBcInNlY1wiKSA6IGdldERhdGUoc2Vzc2lvbkV4cGlyYXRpb24sIFwic2VjXCIpLFxuICAgICAgICB1c2VySWQsXG4gICAgICAgIHRva2VuOiBnZW5lcmF0ZUlkKDMyKSxcbiAgICAgICAgLy8gdG9kbzogd2Ugc2hvdWxkIHJlbW92ZSBhdXRvIHNldHRpbmcgY3JlYXRlZEF0IGFuZCB1cGRhdGVkQXQgaW4gdGhlIG5leHQgbWFqb3IgcmVsZWFzZSwgc2luY2UgdGhlIGRiIGdlbmVyYXRvcnMgYWxyZWFkeSBoYW5kbGUgdGhhdFxuICAgICAgICBjcmVhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuICAgICAgICB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuICAgICAgICAuLi5vdmVycmlkZUFsbCA/IHJlc3QgOiB7fVxuICAgICAgfTtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGNyZWF0ZVdpdGhIb29rcyhcbiAgICAgICAgZGF0YSxcbiAgICAgICAgXCJzZXNzaW9uXCIsXG4gICAgICAgIHNlY29uZGFyeVN0b3JhZ2UgPyB7XG4gICAgICAgICAgZm46IGFzeW5jIChzZXNzaW9uRGF0YSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudExpc3QgPSBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmdldChcbiAgICAgICAgICAgICAgYGFjdGl2ZS1zZXNzaW9ucy0ke3VzZXJJZH1gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbGV0IGxpc3QgPSBbXTtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgICAgICBpZiAoY3VycmVudExpc3QpIHtcbiAgICAgICAgICAgICAgbGlzdCA9IHNhZmVKU09OUGFyc2UoY3VycmVudExpc3QpIHx8IFtdO1xuICAgICAgICAgICAgICBsaXN0ID0gbGlzdC5maWx0ZXIoKHNlc3Npb24pID0+IHNlc3Npb24uZXhwaXJlc0F0ID4gbm93KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxpc3QucHVzaCh7XG4gICAgICAgICAgICAgIHRva2VuOiBkYXRhLnRva2VuLFxuICAgICAgICAgICAgICBleHBpcmVzQXQ6IG5vdyArIHNlc3Npb25FeHBpcmF0aW9uICogMWUzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHNlY29uZGFyeVN0b3JhZ2Uuc2V0KFxuICAgICAgICAgICAgICBgYWN0aXZlLXNlc3Npb25zLSR7dXNlcklkfWAsXG4gICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KGxpc3QpLFxuICAgICAgICAgICAgICBzZXNzaW9uRXhwaXJhdGlvblxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybiBzZXNzaW9uRGF0YTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGV4ZWN1dGVNYWluRm46IG9wdGlvbnMuc2Vzc2lvbj8uc3RvcmVTZXNzaW9uSW5EYXRhYmFzZVxuICAgICAgICB9IDogdm9pZCAwLFxuICAgICAgICBjdHgyXG4gICAgICApO1xuICAgICAgcmV0dXJuIHJlcztcbiAgICB9LFxuICAgIGZpbmRTZXNzaW9uOiBhc3luYyAodG9rZW4pID0+IHtcbiAgICAgIGlmIChzZWNvbmRhcnlTdG9yYWdlKSB7XG4gICAgICAgIGNvbnN0IHNlc3Npb25TdHJpbmdpZmllZCA9IGF3YWl0IHNlY29uZGFyeVN0b3JhZ2UuZ2V0KHRva2VuKTtcbiAgICAgICAgaWYgKCFzZXNzaW9uU3RyaW5naWZpZWQgJiYgIW9wdGlvbnMuc2Vzc2lvbj8uc3RvcmVTZXNzaW9uSW5EYXRhYmFzZSkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZXNzaW9uU3RyaW5naWZpZWQpIHtcbiAgICAgICAgICBjb25zdCBzID0gc2FmZUpTT05QYXJzZShzZXNzaW9uU3RyaW5naWZpZWQpO1xuICAgICAgICAgIGlmICghcykgcmV0dXJuIG51bGw7XG4gICAgICAgICAgY29uc3QgcGFyc2VkU2Vzc2lvbjIgPSBwYXJzZVNlc3Npb25PdXRwdXQoY3R4Lm9wdGlvbnMsIHtcbiAgICAgICAgICAgIC4uLnMuc2Vzc2lvbixcbiAgICAgICAgICAgIGV4cGlyZXNBdDogbmV3IERhdGUocy5zZXNzaW9uLmV4cGlyZXNBdCksXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKHMuc2Vzc2lvbi5jcmVhdGVkQXQpLFxuICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZShzLnNlc3Npb24udXBkYXRlZEF0KVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbnN0IHBhcnNlZFVzZXIyID0gcGFyc2VVc2VyT3V0cHV0KGN0eC5vcHRpb25zLCB7XG4gICAgICAgICAgICAuLi5zLnVzZXIsXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKHMudXNlci5jcmVhdGVkQXQpLFxuICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZShzLnVzZXIudXBkYXRlZEF0KVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzZXNzaW9uOiBwYXJzZWRTZXNzaW9uMixcbiAgICAgICAgICAgIHVzZXI6IHBhcnNlZFVzZXIyXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGFkYXB0ZXIuZmluZE9uZSh7XG4gICAgICAgIG1vZGVsOiBcInNlc3Npb25cIixcbiAgICAgICAgd2hlcmU6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICB2YWx1ZTogdG9rZW4sXG4gICAgICAgICAgICBmaWVsZDogXCJ0b2tlblwiXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9KTtcbiAgICAgIGlmICghc2Vzc2lvbikge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBhZGFwdGVyLmZpbmRPbmUoe1xuICAgICAgICBtb2RlbDogXCJ1c2VyXCIsXG4gICAgICAgIHdoZXJlOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgdmFsdWU6IHNlc3Npb24udXNlcklkLFxuICAgICAgICAgICAgZmllbGQ6IFwiaWRcIlxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfSk7XG4gICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBjb25zdCBwYXJzZWRTZXNzaW9uID0gcGFyc2VTZXNzaW9uT3V0cHV0KGN0eC5vcHRpb25zLCBzZXNzaW9uKTtcbiAgICAgIGNvbnN0IHBhcnNlZFVzZXIgPSBwYXJzZVVzZXJPdXRwdXQoY3R4Lm9wdGlvbnMsIHVzZXIpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc2Vzc2lvbjogcGFyc2VkU2Vzc2lvbixcbiAgICAgICAgdXNlcjogcGFyc2VkVXNlclxuICAgICAgfTtcbiAgICB9LFxuICAgIGZpbmRTZXNzaW9uczogYXN5bmMgKHNlc3Npb25Ub2tlbnMpID0+IHtcbiAgICAgIGlmIChzZWNvbmRhcnlTdG9yYWdlKSB7XG4gICAgICAgIGNvbnN0IHNlc3Npb25zMiA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHNlc3Npb25Ub2tlbiBvZiBzZXNzaW9uVG9rZW5zKSB7XG4gICAgICAgICAgY29uc3Qgc2Vzc2lvblN0cmluZ2lmaWVkID0gYXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5nZXQoc2Vzc2lvblRva2VuKTtcbiAgICAgICAgICBpZiAoc2Vzc2lvblN0cmluZ2lmaWVkKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gc2FmZUpTT05QYXJzZShzZXNzaW9uU3RyaW5naWZpZWQpO1xuICAgICAgICAgICAgaWYgKCFzKSByZXR1cm4gW107XG4gICAgICAgICAgICBjb25zdCBzZXNzaW9uID0ge1xuICAgICAgICAgICAgICBzZXNzaW9uOiB7XG4gICAgICAgICAgICAgICAgLi4ucy5zZXNzaW9uLFxuICAgICAgICAgICAgICAgIGV4cGlyZXNBdDogbmV3IERhdGUocy5zZXNzaW9uLmV4cGlyZXNBdClcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICAgIC4uLnMudXNlcixcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKHMudXNlci5jcmVhdGVkQXQpLFxuICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUocy51c2VyLnVwZGF0ZWRBdClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHNlc3Npb25zMi5wdXNoKHNlc3Npb24pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2Vzc2lvbnMyO1xuICAgICAgfVxuICAgICAgY29uc3Qgc2Vzc2lvbnMgPSBhd2FpdCBhZGFwdGVyLmZpbmRNYW55KHtcbiAgICAgICAgbW9kZWw6IFwic2Vzc2lvblwiLFxuICAgICAgICB3aGVyZTogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGZpZWxkOiBcInRva2VuXCIsXG4gICAgICAgICAgICB2YWx1ZTogc2Vzc2lvblRva2VucyxcbiAgICAgICAgICAgIG9wZXJhdG9yOiBcImluXCJcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH0pO1xuICAgICAgY29uc3QgdXNlcklkcyA9IHNlc3Npb25zLm1hcCgoc2Vzc2lvbikgPT4ge1xuICAgICAgICByZXR1cm4gc2Vzc2lvbi51c2VySWQ7XG4gICAgICB9KTtcbiAgICAgIGlmICghdXNlcklkcy5sZW5ndGgpIHJldHVybiBbXTtcbiAgICAgIGNvbnN0IHVzZXJzID0gYXdhaXQgYWRhcHRlci5maW5kTWFueSh7XG4gICAgICAgIG1vZGVsOiBcInVzZXJcIixcbiAgICAgICAgd2hlcmU6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBmaWVsZDogXCJpZFwiLFxuICAgICAgICAgICAgdmFsdWU6IHVzZXJJZHMsXG4gICAgICAgICAgICBvcGVyYXRvcjogXCJpblwiXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBzZXNzaW9ucy5tYXAoKHNlc3Npb24pID0+IHtcbiAgICAgICAgY29uc3QgdXNlciA9IHVzZXJzLmZpbmQoKHUpID0+IHUuaWQgPT09IHNlc3Npb24udXNlcklkKTtcbiAgICAgICAgaWYgKCF1c2VyKSByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzZXNzaW9uLFxuICAgICAgICAgIHVzZXJcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgdXBkYXRlU2Vzc2lvbjogYXN5bmMgKHNlc3Npb25Ub2tlbiwgc2Vzc2lvbiwgY29udGV4dCkgPT4ge1xuICAgICAgY29uc3QgdXBkYXRlZFNlc3Npb24gPSBhd2FpdCB1cGRhdGVXaXRoSG9va3MoXG4gICAgICAgIHNlc3Npb24sXG4gICAgICAgIFt7IGZpZWxkOiBcInRva2VuXCIsIHZhbHVlOiBzZXNzaW9uVG9rZW4gfV0sXG4gICAgICAgIFwic2Vzc2lvblwiLFxuICAgICAgICBzZWNvbmRhcnlTdG9yYWdlID8ge1xuICAgICAgICAgIGFzeW5jIGZuKGRhdGEpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTZXNzaW9uID0gYXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5nZXQoc2Vzc2lvblRva2VuKTtcbiAgICAgICAgICAgIGxldCB1cGRhdGVkU2Vzc2lvbjIgPSBudWxsO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRTZXNzaW9uKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHBhcnNlZFNlc3Npb24gPSBzYWZlSlNPTlBhcnNlKGN1cnJlbnRTZXNzaW9uKTtcbiAgICAgICAgICAgICAgaWYgKCFwYXJzZWRTZXNzaW9uKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgdXBkYXRlZFNlc3Npb24yID0ge1xuICAgICAgICAgICAgICAgIC4uLnBhcnNlZFNlc3Npb24uc2Vzc2lvbixcbiAgICAgICAgICAgICAgICAuLi5kYXRhXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHJldHVybiB1cGRhdGVkU2Vzc2lvbjI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGV4ZWN1dGVNYWluRm46IG9wdGlvbnMuc2Vzc2lvbj8uc3RvcmVTZXNzaW9uSW5EYXRhYmFzZVxuICAgICAgICB9IDogdm9pZCAwLFxuICAgICAgICBjb250ZXh0XG4gICAgICApO1xuICAgICAgcmV0dXJuIHVwZGF0ZWRTZXNzaW9uO1xuICAgIH0sXG4gICAgZGVsZXRlU2Vzc2lvbjogYXN5bmMgKHRva2VuKSA9PiB7XG4gICAgICBpZiAoc2Vjb25kYXJ5U3RvcmFnZSkge1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5nZXQodG9rZW4pO1xuICAgICAgICBpZiAoZGF0YSkge1xuICAgICAgICAgIGNvbnN0IHsgc2Vzc2lvbiB9ID0gc2FmZUpTT05QYXJzZShkYXRhKSA/PyB7fTtcbiAgICAgICAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIlNlc3Npb24gbm90IGZvdW5kIGluIHNlY29uZGFyeSBzdG9yYWdlXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCB1c2VySWQgPSBzZXNzaW9uLnVzZXJJZDtcbiAgICAgICAgICBjb25zdCBjdXJyZW50TGlzdCA9IGF3YWl0IHNlY29uZGFyeVN0b3JhZ2UuZ2V0KFxuICAgICAgICAgICAgYGFjdGl2ZS1zZXNzaW9ucy0ke3VzZXJJZH1gXG4gICAgICAgICAgKTtcbiAgICAgICAgICBpZiAoY3VycmVudExpc3QpIHtcbiAgICAgICAgICAgIGxldCBsaXN0ID0gc2FmZUpTT05QYXJzZShjdXJyZW50TGlzdCkgfHwgW107XG4gICAgICAgICAgICBsaXN0ID0gbGlzdC5maWx0ZXIoKHMpID0+IHMudG9rZW4gIT09IHRva2VuKTtcbiAgICAgICAgICAgIGlmIChsaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgYXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5zZXQoXG4gICAgICAgICAgICAgICAgYGFjdGl2ZS1zZXNzaW9ucy0ke3VzZXJJZH1gLFxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KGxpc3QpLFxuICAgICAgICAgICAgICAgIHNlc3Npb25FeHBpcmF0aW9uXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmRlbGV0ZShgYWN0aXZlLXNlc3Npb25zLSR7dXNlcklkfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJBY3RpdmUgc2Vzc2lvbnMgbGlzdCBub3QgZm91bmQgaW4gc2Vjb25kYXJ5IHN0b3JhZ2VcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHNlY29uZGFyeVN0b3JhZ2UuZGVsZXRlKHRva2VuKTtcbiAgICAgICAgaWYgKCFvcHRpb25zLnNlc3Npb24/LnN0b3JlU2Vzc2lvbkluRGF0YWJhc2UgfHwgY3R4Lm9wdGlvbnMuc2Vzc2lvbj8ucHJlc2VydmVTZXNzaW9uSW5EYXRhYmFzZSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYXdhaXQgYWRhcHRlci5kZWxldGUoe1xuICAgICAgICBtb2RlbDogXCJzZXNzaW9uXCIsXG4gICAgICAgIHdoZXJlOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgZmllbGQ6IFwidG9rZW5cIixcbiAgICAgICAgICAgIHZhbHVlOiB0b2tlblxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfSk7XG4gICAgfSxcbiAgICBkZWxldGVBY2NvdW50czogYXN5bmMgKHVzZXJJZCkgPT4ge1xuICAgICAgYXdhaXQgYWRhcHRlci5kZWxldGVNYW55KHtcbiAgICAgICAgbW9kZWw6IFwiYWNjb3VudFwiLFxuICAgICAgICB3aGVyZTogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGZpZWxkOiBcInVzZXJJZFwiLFxuICAgICAgICAgICAgdmFsdWU6IHVzZXJJZFxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfSk7XG4gICAgfSxcbiAgICBkZWxldGVBY2NvdW50OiBhc3luYyAoYWNjb3VudElkKSA9PiB7XG4gICAgICBhd2FpdCBhZGFwdGVyLmRlbGV0ZSh7XG4gICAgICAgIG1vZGVsOiBcImFjY291bnRcIixcbiAgICAgICAgd2hlcmU6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBmaWVsZDogXCJpZFwiLFxuICAgICAgICAgICAgdmFsdWU6IGFjY291bnRJZFxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfSk7XG4gICAgfSxcbiAgICBkZWxldGVTZXNzaW9uczogYXN5bmMgKHVzZXJJZE9yU2Vzc2lvblRva2VucykgPT4ge1xuICAgICAgaWYgKHNlY29uZGFyeVN0b3JhZ2UpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB1c2VySWRPclNlc3Npb25Ub2tlbnMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICBjb25zdCBhY3RpdmVTZXNzaW9uID0gYXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5nZXQoXG4gICAgICAgICAgICBgYWN0aXZlLXNlc3Npb25zLSR7dXNlcklkT3JTZXNzaW9uVG9rZW5zfWBcbiAgICAgICAgICApO1xuICAgICAgICAgIGNvbnN0IHNlc3Npb25zID0gYWN0aXZlU2Vzc2lvbiA/IHNhZmVKU09OUGFyc2UoYWN0aXZlU2Vzc2lvbikgOiBbXTtcbiAgICAgICAgICBpZiAoIXNlc3Npb25zKSByZXR1cm47XG4gICAgICAgICAgZm9yIChjb25zdCBzZXNzaW9uIG9mIHNlc3Npb25zKSB7XG4gICAgICAgICAgICBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmRlbGV0ZShzZXNzaW9uLnRva2VuKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZm9yIChjb25zdCBzZXNzaW9uVG9rZW4gb2YgdXNlcklkT3JTZXNzaW9uVG9rZW5zKSB7XG4gICAgICAgICAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5nZXQoc2Vzc2lvblRva2VuKTtcbiAgICAgICAgICAgIGlmIChzZXNzaW9uKSB7XG4gICAgICAgICAgICAgIGF3YWl0IHNlY29uZGFyeVN0b3JhZ2UuZGVsZXRlKHNlc3Npb25Ub2tlbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghb3B0aW9ucy5zZXNzaW9uPy5zdG9yZVNlc3Npb25JbkRhdGFiYXNlIHx8IGN0eC5vcHRpb25zLnNlc3Npb24/LnByZXNlcnZlU2Vzc2lvbkluRGF0YWJhc2UpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGF3YWl0IGFkYXB0ZXIuZGVsZXRlTWFueSh7XG4gICAgICAgIG1vZGVsOiBcInNlc3Npb25cIixcbiAgICAgICAgd2hlcmU6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBmaWVsZDogQXJyYXkuaXNBcnJheSh1c2VySWRPclNlc3Npb25Ub2tlbnMpID8gXCJ0b2tlblwiIDogXCJ1c2VySWRcIixcbiAgICAgICAgICAgIHZhbHVlOiB1c2VySWRPclNlc3Npb25Ub2tlbnMsXG4gICAgICAgICAgICBvcGVyYXRvcjogQXJyYXkuaXNBcnJheSh1c2VySWRPclNlc3Npb25Ub2tlbnMpID8gXCJpblwiIDogdm9pZCAwXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGZpbmRPQXV0aFVzZXI6IGFzeW5jIChlbWFpbCwgYWNjb3VudElkLCBwcm92aWRlcklkKSA9PiB7XG4gICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgYWRhcHRlci5maW5kTWFueSh7XG4gICAgICAgIG1vZGVsOiBcImFjY291bnRcIixcbiAgICAgICAgd2hlcmU6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICB2YWx1ZTogYWNjb3VudElkLFxuICAgICAgICAgICAgZmllbGQ6IFwiYWNjb3VudElkXCJcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH0pLnRoZW4oKGFjY291bnRzKSA9PiB7XG4gICAgICAgIHJldHVybiBhY2NvdW50cy5maW5kKChhKSA9PiBhLnByb3ZpZGVySWQgPT09IHByb3ZpZGVySWQpO1xuICAgICAgfSk7XG4gICAgICBpZiAoYWNjb3VudCkge1xuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgYWRhcHRlci5maW5kT25lKHtcbiAgICAgICAgICBtb2RlbDogXCJ1c2VyXCIsXG4gICAgICAgICAgd2hlcmU6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdmFsdWU6IGFjY291bnQudXNlcklkLFxuICAgICAgICAgICAgICBmaWVsZDogXCJpZFwiXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdXNlcixcbiAgICAgICAgICAgIGFjY291bnRzOiBbYWNjb3VudF1cbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHVzZXIyID0gYXdhaXQgYWRhcHRlci5maW5kT25lKHtcbiAgICAgICAgICAgIG1vZGVsOiBcInVzZXJcIixcbiAgICAgICAgICAgIHdoZXJlOiBbXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogZW1haWwudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICAgICAgICBmaWVsZDogXCJlbWFpbFwiXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAodXNlcjIpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHVzZXI6IHVzZXIyLFxuICAgICAgICAgICAgICBhY2NvdW50czogW2FjY291bnRdXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IGFkYXB0ZXIuZmluZE9uZSh7XG4gICAgICAgICAgbW9kZWw6IFwidXNlclwiLFxuICAgICAgICAgIHdoZXJlOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHZhbHVlOiBlbWFpbC50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgICAgICBmaWVsZDogXCJlbWFpbFwiXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IGFkYXB0ZXIuZmluZE1hbnkoe1xuICAgICAgICAgICAgbW9kZWw6IFwiYWNjb3VudFwiLFxuICAgICAgICAgICAgd2hlcmU6IFtcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB1c2VyLmlkLFxuICAgICAgICAgICAgICAgIGZpZWxkOiBcInVzZXJJZFwiXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdXNlcixcbiAgICAgICAgICAgIGFjY291bnRzOiBhY2NvdW50cyB8fCBbXVxuICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIGZpbmRVc2VyQnlFbWFpbDogYXN5bmMgKGVtYWlsLCBvcHRpb25zMikgPT4ge1xuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IGFkYXB0ZXIuZmluZE9uZSh7XG4gICAgICAgIG1vZGVsOiBcInVzZXJcIixcbiAgICAgICAgd2hlcmU6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICB2YWx1ZTogZW1haWwudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICAgIGZpZWxkOiBcImVtYWlsXCJcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH0pO1xuICAgICAgaWYgKCF1c2VyKSByZXR1cm4gbnVsbDtcbiAgICAgIGlmIChvcHRpb25zMj8uaW5jbHVkZUFjY291bnRzKSB7XG4gICAgICAgIGNvbnN0IGFjY291bnRzID0gYXdhaXQgYWRhcHRlci5maW5kTWFueSh7XG4gICAgICAgICAgbW9kZWw6IFwiYWNjb3VudFwiLFxuICAgICAgICAgIHdoZXJlOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHZhbHVlOiB1c2VyLmlkLFxuICAgICAgICAgICAgICBmaWVsZDogXCJ1c2VySWRcIlxuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdXNlcixcbiAgICAgICAgICBhY2NvdW50c1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdXNlcixcbiAgICAgICAgYWNjb3VudHM6IFtdXG4gICAgICB9O1xuICAgIH0sXG4gICAgZmluZFVzZXJCeUlkOiBhc3luYyAodXNlcklkKSA9PiB7XG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgYWRhcHRlci5maW5kT25lKHtcbiAgICAgICAgbW9kZWw6IFwidXNlclwiLFxuICAgICAgICB3aGVyZTogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGZpZWxkOiBcImlkXCIsXG4gICAgICAgICAgICB2YWx1ZTogdXNlcklkXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9KTtcbiAgICAgIHJldHVybiB1c2VyO1xuICAgIH0sXG4gICAgbGlua0FjY291bnQ6IGFzeW5jIChhY2NvdW50LCBjb250ZXh0KSA9PiB7XG4gICAgICBjb25zdCBfYWNjb3VudCA9IGF3YWl0IGNyZWF0ZVdpdGhIb29rcyhcbiAgICAgICAge1xuICAgICAgICAgIC8vIHRvZG86IHdlIHNob3VsZCByZW1vdmUgYXV0byBzZXR0aW5nIGNyZWF0ZWRBdCBhbmQgdXBkYXRlZEF0IGluIHRoZSBuZXh0IG1ham9yIHJlbGVhc2UsIHNpbmNlIHRoZSBkYiBnZW5lcmF0b3JzIGFscmVhZHkgaGFuZGxlIHRoYXRcbiAgICAgICAgICBjcmVhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuICAgICAgICAgIHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG4gICAgICAgICAgLi4uYWNjb3VudFxuICAgICAgICB9LFxuICAgICAgICBcImFjY291bnRcIixcbiAgICAgICAgdm9pZCAwLFxuICAgICAgICBjb250ZXh0XG4gICAgICApO1xuICAgICAgcmV0dXJuIF9hY2NvdW50O1xuICAgIH0sXG4gICAgdXBkYXRlVXNlcjogYXN5bmMgKHVzZXJJZCwgZGF0YSwgY29udGV4dCkgPT4ge1xuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHVwZGF0ZVdpdGhIb29rcyhcbiAgICAgICAgZGF0YSxcbiAgICAgICAgW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGZpZWxkOiBcImlkXCIsXG4gICAgICAgICAgICB2YWx1ZTogdXNlcklkXG4gICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBcInVzZXJcIixcbiAgICAgICAgdm9pZCAwLFxuICAgICAgICBjb250ZXh0XG4gICAgICApO1xuICAgICAgaWYgKHNlY29uZGFyeVN0b3JhZ2UgJiYgdXNlcikge1xuICAgICAgICBjb25zdCBsaXN0UmF3ID0gYXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5nZXQoYGFjdGl2ZS1zZXNzaW9ucy0ke3VzZXJJZH1gKTtcbiAgICAgICAgaWYgKGxpc3RSYXcpIHtcbiAgICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICAgIGNvbnN0IGxpc3QgPSBzYWZlSlNPTlBhcnNlKGxpc3RSYXcpIHx8IFtdO1xuICAgICAgICAgIGNvbnN0IHZhbGlkU2Vzc2lvbnMgPSBsaXN0LmZpbHRlcigocykgPT4gcy5leHBpcmVzQXQgPiBub3cpO1xuICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICAgICAgdmFsaWRTZXNzaW9ucy5tYXAoYXN5bmMgKHsgdG9rZW4gfSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBjYWNoZWQgPSBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmdldCh0b2tlbik7XG4gICAgICAgICAgICAgIGlmICghY2FjaGVkKSByZXR1cm47XG4gICAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IHNhZmVKU09OUGFyc2UoY2FjaGVkKTtcbiAgICAgICAgICAgICAgaWYgKCFwYXJzZWQpIHJldHVybjtcbiAgICAgICAgICAgICAgY29uc3Qgc2Vzc2lvblRUTCA9IE1hdGgubWF4KFxuICAgICAgICAgICAgICAgIE1hdGguZmxvb3IoXG4gICAgICAgICAgICAgICAgICAobmV3IERhdGUocGFyc2VkLnNlc3Npb24uZXhwaXJlc0F0KS5nZXRUaW1lKCkgLSBub3cpIC8gMWUzXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGF3YWl0IHNlY29uZGFyeVN0b3JhZ2Uuc2V0KFxuICAgICAgICAgICAgICAgIHRva2VuLFxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgIHNlc3Npb246IHBhcnNlZC5zZXNzaW9uLFxuICAgICAgICAgICAgICAgICAgdXNlclxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHNlc3Npb25UVExcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHVzZXI7XG4gICAgfSxcbiAgICB1cGRhdGVVc2VyQnlFbWFpbDogYXN5bmMgKGVtYWlsLCBkYXRhLCBjb250ZXh0KSA9PiB7XG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgdXBkYXRlV2l0aEhvb2tzKFxuICAgICAgICBkYXRhLFxuICAgICAgICBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgZmllbGQ6IFwiZW1haWxcIixcbiAgICAgICAgICAgIHZhbHVlOiBlbWFpbC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBcInVzZXJcIixcbiAgICAgICAgdm9pZCAwLFxuICAgICAgICBjb250ZXh0XG4gICAgICApO1xuICAgICAgcmV0dXJuIHVzZXI7XG4gICAgfSxcbiAgICB1cGRhdGVQYXNzd29yZDogYXN5bmMgKHVzZXJJZCwgcGFzc3dvcmQsIGNvbnRleHQpID0+IHtcbiAgICAgIGF3YWl0IHVwZGF0ZU1hbnlXaXRoSG9va3MoXG4gICAgICAgIHtcbiAgICAgICAgICBwYXNzd29yZFxuICAgICAgICB9LFxuICAgICAgICBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgZmllbGQ6IFwidXNlcklkXCIsXG4gICAgICAgICAgICB2YWx1ZTogdXNlcklkXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBmaWVsZDogXCJwcm92aWRlcklkXCIsXG4gICAgICAgICAgICB2YWx1ZTogXCJjcmVkZW50aWFsXCJcbiAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIFwiYWNjb3VudFwiLFxuICAgICAgICB2b2lkIDAsXG4gICAgICAgIGNvbnRleHRcbiAgICAgICk7XG4gICAgfSxcbiAgICBmaW5kQWNjb3VudHM6IGFzeW5jICh1c2VySWQpID0+IHtcbiAgICAgIGNvbnN0IGFjY291bnRzID0gYXdhaXQgYWRhcHRlci5maW5kTWFueSh7XG4gICAgICAgIG1vZGVsOiBcImFjY291bnRcIixcbiAgICAgICAgd2hlcmU6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBmaWVsZDogXCJ1c2VySWRcIixcbiAgICAgICAgICAgIHZhbHVlOiB1c2VySWRcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGFjY291bnRzO1xuICAgIH0sXG4gICAgZmluZEFjY291bnQ6IGFzeW5jIChhY2NvdW50SWQpID0+IHtcbiAgICAgIGNvbnN0IGFjY291bnQgPSBhd2FpdCBhZGFwdGVyLmZpbmRPbmUoe1xuICAgICAgICBtb2RlbDogXCJhY2NvdW50XCIsXG4gICAgICAgIHdoZXJlOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgZmllbGQ6IFwiYWNjb3VudElkXCIsXG4gICAgICAgICAgICB2YWx1ZTogYWNjb3VudElkXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBhY2NvdW50O1xuICAgIH0sXG4gICAgZmluZEFjY291bnRCeVByb3ZpZGVySWQ6IGFzeW5jIChhY2NvdW50SWQsIHByb3ZpZGVySWQpID0+IHtcbiAgICAgIGNvbnN0IGFjY291bnQgPSBhd2FpdCBhZGFwdGVyLmZpbmRPbmUoe1xuICAgICAgICBtb2RlbDogXCJhY2NvdW50XCIsXG4gICAgICAgIHdoZXJlOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgZmllbGQ6IFwiYWNjb3VudElkXCIsXG4gICAgICAgICAgICB2YWx1ZTogYWNjb3VudElkXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBmaWVsZDogXCJwcm92aWRlcklkXCIsXG4gICAgICAgICAgICB2YWx1ZTogcHJvdmlkZXJJZFxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gYWNjb3VudDtcbiAgICB9LFxuICAgIGZpbmRBY2NvdW50QnlVc2VySWQ6IGFzeW5jICh1c2VySWQpID0+IHtcbiAgICAgIGNvbnN0IGFjY291bnQgPSBhd2FpdCBhZGFwdGVyLmZpbmRNYW55KHtcbiAgICAgICAgbW9kZWw6IFwiYWNjb3VudFwiLFxuICAgICAgICB3aGVyZTogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGZpZWxkOiBcInVzZXJJZFwiLFxuICAgICAgICAgICAgdmFsdWU6IHVzZXJJZFxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gYWNjb3VudDtcbiAgICB9LFxuICAgIHVwZGF0ZUFjY291bnQ6IGFzeW5jIChpZCwgZGF0YSwgY29udGV4dCkgPT4ge1xuICAgICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IHVwZGF0ZVdpdGhIb29rcyhcbiAgICAgICAgZGF0YSxcbiAgICAgICAgW3sgZmllbGQ6IFwiaWRcIiwgdmFsdWU6IGlkIH1dLFxuICAgICAgICBcImFjY291bnRcIixcbiAgICAgICAgdm9pZCAwLFxuICAgICAgICBjb250ZXh0XG4gICAgICApO1xuICAgICAgcmV0dXJuIGFjY291bnQ7XG4gICAgfSxcbiAgICBjcmVhdGVWZXJpZmljYXRpb25WYWx1ZTogYXN5bmMgKGRhdGEsIGNvbnRleHQpID0+IHtcbiAgICAgIGNvbnN0IHZlcmlmaWNhdGlvbiA9IGF3YWl0IGNyZWF0ZVdpdGhIb29rcyhcbiAgICAgICAge1xuICAgICAgICAgIC8vIHRvZG86IHdlIHNob3VsZCByZW1vdmUgYXV0byBzZXR0aW5nIGNyZWF0ZWRBdCBhbmQgdXBkYXRlZEF0IGluIHRoZSBuZXh0IG1ham9yIHJlbGVhc2UsIHNpbmNlIHRoZSBkYiBnZW5lcmF0b3JzIGFscmVhZHkgaGFuZGxlIHRoYXRcbiAgICAgICAgICBjcmVhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuICAgICAgICAgIHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG4gICAgICAgICAgLi4uZGF0YVxuICAgICAgICB9LFxuICAgICAgICBcInZlcmlmaWNhdGlvblwiLFxuICAgICAgICB2b2lkIDAsXG4gICAgICAgIGNvbnRleHRcbiAgICAgICk7XG4gICAgICByZXR1cm4gdmVyaWZpY2F0aW9uO1xuICAgIH0sXG4gICAgZmluZFZlcmlmaWNhdGlvblZhbHVlOiBhc3luYyAoaWRlbnRpZmllcikgPT4ge1xuICAgICAgY29uc3QgdmVyaWZpY2F0aW9uID0gYXdhaXQgYWRhcHRlci5maW5kTWFueSh7XG4gICAgICAgIG1vZGVsOiBcInZlcmlmaWNhdGlvblwiLFxuICAgICAgICB3aGVyZTogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGZpZWxkOiBcImlkZW50aWZpZXJcIixcbiAgICAgICAgICAgIHZhbHVlOiBpZGVudGlmaWVyXG4gICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBzb3J0Qnk6IHtcbiAgICAgICAgICBmaWVsZDogXCJjcmVhdGVkQXRcIixcbiAgICAgICAgICBkaXJlY3Rpb246IFwiZGVzY1wiXG4gICAgICAgIH0sXG4gICAgICAgIGxpbWl0OiAxXG4gICAgICB9KTtcbiAgICAgIGlmICghb3B0aW9ucy52ZXJpZmljYXRpb24/LmRpc2FibGVDbGVhbnVwKSB7XG4gICAgICAgIGF3YWl0IGFkYXB0ZXIuZGVsZXRlTWFueSh7XG4gICAgICAgICAgbW9kZWw6IFwidmVyaWZpY2F0aW9uXCIsXG4gICAgICAgICAgd2hlcmU6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgZmllbGQ6IFwiZXhwaXJlc0F0XCIsXG4gICAgICAgICAgICAgIHZhbHVlOiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgb3BlcmF0b3I6IFwibHRcIlxuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCBsYXN0VmVyaWZpY2F0aW9uID0gdmVyaWZpY2F0aW9uWzBdO1xuICAgICAgcmV0dXJuIGxhc3RWZXJpZmljYXRpb247XG4gICAgfSxcbiAgICBkZWxldGVWZXJpZmljYXRpb25WYWx1ZTogYXN5bmMgKGlkKSA9PiB7XG4gICAgICBhd2FpdCBhZGFwdGVyLmRlbGV0ZSh7XG4gICAgICAgIG1vZGVsOiBcInZlcmlmaWNhdGlvblwiLFxuICAgICAgICB3aGVyZTogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGZpZWxkOiBcImlkXCIsXG4gICAgICAgICAgICB2YWx1ZTogaWRcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVsZXRlVmVyaWZpY2F0aW9uQnlJZGVudGlmaWVyOiBhc3luYyAoaWRlbnRpZmllcikgPT4ge1xuICAgICAgYXdhaXQgYWRhcHRlci5kZWxldGUoe1xuICAgICAgICBtb2RlbDogXCJ2ZXJpZmljYXRpb25cIixcbiAgICAgICAgd2hlcmU6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBmaWVsZDogXCJpZGVudGlmaWVyXCIsXG4gICAgICAgICAgICB2YWx1ZTogaWRlbnRpZmllclxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfSk7XG4gICAgfSxcbiAgICB1cGRhdGVWZXJpZmljYXRpb25WYWx1ZTogYXN5bmMgKGlkLCBkYXRhLCBjb250ZXh0KSA9PiB7XG4gICAgICBjb25zdCB2ZXJpZmljYXRpb24gPSBhd2FpdCB1cGRhdGVXaXRoSG9va3MoXG4gICAgICAgIGRhdGEsXG4gICAgICAgIFt7IGZpZWxkOiBcImlkXCIsIHZhbHVlOiBpZCB9XSxcbiAgICAgICAgXCJ2ZXJpZmljYXRpb25cIixcbiAgICAgICAgdm9pZCAwLFxuICAgICAgICBjb250ZXh0XG4gICAgICApO1xuICAgICAgcmV0dXJuIHZlcmlmaWNhdGlvbjtcbiAgICB9XG4gIH07XG59O1xuXG5hc3luYyBmdW5jdGlvbiBnZXRBZGFwdGVyKG9wdGlvbnMpIHtcbiAgaWYgKCFvcHRpb25zLmRhdGFiYXNlKSB7XG4gICAgY29uc3QgdGFibGVzID0gZ2V0QXV0aFRhYmxlcyhvcHRpb25zKTtcbiAgICBjb25zdCBtZW1vcnlEQiA9IE9iamVjdC5rZXlzKHRhYmxlcykucmVkdWNlKChhY2MsIGtleSkgPT4ge1xuICAgICAgYWNjW2tleV0gPSBbXTtcbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSwge30pO1xuICAgIGxvZ2dlci53YXJuKFxuICAgICAgXCJObyBkYXRhYmFzZSBjb25maWd1cmF0aW9uIHByb3ZpZGVkLiBVc2luZyBtZW1vcnkgYWRhcHRlciBpbiBkZXZlbG9wbWVudFwiXG4gICAgKTtcbiAgICByZXR1cm4gbWVtb3J5QWRhcHRlcihtZW1vcnlEQikob3B0aW9ucyk7XG4gIH1cbiAgaWYgKHR5cGVvZiBvcHRpb25zLmRhdGFiYXNlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICByZXR1cm4gb3B0aW9ucy5kYXRhYmFzZShvcHRpb25zKTtcbiAgfVxuICBjb25zdCB7IGt5c2VseSwgZGF0YWJhc2VUeXBlIH0gPSBhd2FpdCBjcmVhdGVLeXNlbHlBZGFwdGVyKG9wdGlvbnMpO1xuICBpZiAoIWt5c2VseSkge1xuICAgIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJGYWlsZWQgdG8gaW5pdGlhbGl6ZSBkYXRhYmFzZSBhZGFwdGVyXCIpO1xuICB9XG4gIHJldHVybiBreXNlbHlBZGFwdGVyKGt5c2VseSwge1xuICAgIHR5cGU6IGRhdGFiYXNlVHlwZSB8fCBcInNxbGl0ZVwiLFxuICAgIGRlYnVnTG9nczogXCJkZWJ1Z0xvZ3NcIiBpbiBvcHRpb25zLmRhdGFiYXNlID8gb3B0aW9ucy5kYXRhYmFzZS5kZWJ1Z0xvZ3MgOiBmYWxzZVxuICB9KShvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIGNvbnZlcnRUb0RCKGZpZWxkcywgdmFsdWVzKSB7XG4gIGxldCByZXN1bHQgPSB2YWx1ZXMuaWQgPyB7XG4gICAgaWQ6IHZhbHVlcy5pZFxuICB9IDoge307XG4gIGZvciAoY29uc3Qga2V5IGluIGZpZWxkcykge1xuICAgIGNvbnN0IGZpZWxkID0gZmllbGRzW2tleV07XG4gICAgY29uc3QgdmFsdWUgPSB2YWx1ZXNba2V5XTtcbiAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIHJlc3VsdFtmaWVsZC5maWVsZE5hbWUgfHwga2V5XSA9IHZhbHVlO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBjb252ZXJ0RnJvbURCKGZpZWxkcywgdmFsdWVzKSB7XG4gIGlmICghdmFsdWVzKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgbGV0IHJlc3VsdCA9IHtcbiAgICBpZDogdmFsdWVzLmlkXG4gIH07XG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGZpZWxkcykpIHtcbiAgICByZXN1bHRba2V5XSA9IHZhbHVlc1t2YWx1ZS5maWVsZE5hbWUgfHwga2V5XTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBnZXRTY2hlbWEoY29uZmlnKSB7XG4gIGNvbnN0IHRhYmxlcyA9IGdldEF1dGhUYWJsZXMoY29uZmlnKTtcbiAgbGV0IHNjaGVtYSA9IHt9O1xuICBmb3IgKGNvbnN0IGtleSBpbiB0YWJsZXMpIHtcbiAgICBjb25zdCB0YWJsZSA9IHRhYmxlc1trZXldO1xuICAgIGNvbnN0IGZpZWxkcyA9IHRhYmxlLmZpZWxkcztcbiAgICBsZXQgYWN0dWFsRmllbGRzID0ge307XG4gICAgT2JqZWN0LmVudHJpZXMoZmllbGRzKS5mb3JFYWNoKChba2V5MiwgZmllbGRdKSA9PiB7XG4gICAgICBhY3R1YWxGaWVsZHNbZmllbGQuZmllbGROYW1lIHx8IGtleTJdID0gZmllbGQ7XG4gICAgICBpZiAoZmllbGQucmVmZXJlbmNlcykge1xuICAgICAgICBjb25zdCByZWZUYWJsZSA9IHRhYmxlc1tmaWVsZC5yZWZlcmVuY2VzLm1vZGVsXTtcbiAgICAgICAgaWYgKHJlZlRhYmxlKSB7XG4gICAgICAgICAgYWN0dWFsRmllbGRzW2ZpZWxkLmZpZWxkTmFtZSB8fCBrZXkyXS5yZWZlcmVuY2VzID0ge1xuICAgICAgICAgICAgbW9kZWw6IHJlZlRhYmxlLm1vZGVsTmFtZSxcbiAgICAgICAgICAgIGZpZWxkOiBmaWVsZC5yZWZlcmVuY2VzLmZpZWxkXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChzY2hlbWFbdGFibGUubW9kZWxOYW1lXSkge1xuICAgICAgc2NoZW1hW3RhYmxlLm1vZGVsTmFtZV0uZmllbGRzID0ge1xuICAgICAgICAuLi5zY2hlbWFbdGFibGUubW9kZWxOYW1lXS5maWVsZHMsXG4gICAgICAgIC4uLmFjdHVhbEZpZWxkc1xuICAgICAgfTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBzY2hlbWFbdGFibGUubW9kZWxOYW1lXSA9IHtcbiAgICAgIGZpZWxkczogYWN0dWFsRmllbGRzLFxuICAgICAgb3JkZXI6IHRhYmxlLm9yZGVyIHx8IEluZmluaXR5XG4gICAgfTtcbiAgfVxuICByZXR1cm4gc2NoZW1hO1xufVxuXG5jb25zdCBwb3N0Z3Jlc01hcCA9IHtcbiAgc3RyaW5nOiBbXCJjaGFyYWN0ZXIgdmFyeWluZ1wiLCBcInZhcmNoYXJcIiwgXCJ0ZXh0XCJdLFxuICBudW1iZXI6IFtcbiAgICBcImludDRcIixcbiAgICBcImludGVnZXJcIixcbiAgICBcImJpZ2ludFwiLFxuICAgIFwic21hbGxpbnRcIixcbiAgICBcIm51bWVyaWNcIixcbiAgICBcInJlYWxcIixcbiAgICBcImRvdWJsZSBwcmVjaXNpb25cIlxuICBdLFxuICBib29sZWFuOiBbXCJib29sXCIsIFwiYm9vbGVhblwiXSxcbiAgZGF0ZTogW1widGltZXN0YW1wXCIsIFwiZGF0ZVwiXSxcbiAganNvbjogW1wianNvblwiLCBcImpzb25iXCJdXG59O1xuY29uc3QgbXlzcWxNYXAgPSB7XG4gIHN0cmluZzogW1widmFyY2hhclwiLCBcInRleHRcIl0sXG4gIG51bWJlcjogW1xuICAgIFwiaW50ZWdlclwiLFxuICAgIFwiaW50XCIsXG4gICAgXCJiaWdpbnRcIixcbiAgICBcInNtYWxsaW50XCIsXG4gICAgXCJkZWNpbWFsXCIsXG4gICAgXCJmbG9hdFwiLFxuICAgIFwiZG91YmxlXCJcbiAgXSxcbiAgYm9vbGVhbjogW1wiYm9vbGVhblwiLCBcInRpbnlpbnRcIl0sXG4gIGRhdGU6IFtcInRpbWVzdGFtcFwiLCBcImRhdGV0aW1lXCIsIFwiZGF0ZVwiXSxcbiAganNvbjogW1wianNvblwiXVxufTtcbmNvbnN0IHNxbGl0ZU1hcCA9IHtcbiAgc3RyaW5nOiBbXCJURVhUXCJdLFxuICBudW1iZXI6IFtcIklOVEVHRVJcIiwgXCJSRUFMXCJdLFxuICBib29sZWFuOiBbXCJJTlRFR0VSXCIsIFwiQk9PTEVBTlwiXSxcbiAgLy8gMCBvciAxXG4gIGRhdGU6IFtcIkRBVEVcIiwgXCJJTlRFR0VSXCJdLFxuICBqc29uOiBbXCJURVhUXCJdXG59O1xuY29uc3QgbXNzcWxNYXAgPSB7XG4gIHN0cmluZzogW1widmFyY2hhclwiLCBcIm52YXJjaGFyXCJdLFxuICBudW1iZXI6IFtcImludFwiLCBcImJpZ2ludFwiLCBcInNtYWxsaW50XCIsIFwiZGVjaW1hbFwiLCBcImZsb2F0XCIsIFwiZG91YmxlXCJdLFxuICBib29sZWFuOiBbXCJiaXRcIiwgXCJzbWFsbGludFwiXSxcbiAgZGF0ZTogW1wiZGF0ZXRpbWVcIiwgXCJkYXRlXCJdLFxuICBqc29uOiBbXCJ2YXJjaGFyXCIsIFwibnZhcmNoYXJcIl1cbn07XG5jb25zdCBtYXAgPSB7XG4gIHBvc3RncmVzOiBwb3N0Z3Jlc01hcCxcbiAgbXlzcWw6IG15c3FsTWFwLFxuICBzcWxpdGU6IHNxbGl0ZU1hcCxcbiAgbXNzcWw6IG1zc3FsTWFwXG59O1xuZnVuY3Rpb24gbWF0Y2hUeXBlKGNvbHVtbkRhdGFUeXBlLCBmaWVsZFR5cGUsIGRiVHlwZSkge1xuICBmdW5jdGlvbiBub3JtYWxpemUodHlwZSkge1xuICAgIHJldHVybiB0eXBlLnRvTG93ZXJDYXNlKCkuc3BsaXQoXCIoXCIpWzBdLnRyaW0oKTtcbiAgfVxuICBpZiAoZmllbGRUeXBlID09PSBcInN0cmluZ1tdXCIgfHwgZmllbGRUeXBlID09PSBcIm51bWJlcltdXCIpIHtcbiAgICByZXR1cm4gY29sdW1uRGF0YVR5cGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImpzb25cIik7XG4gIH1cbiAgY29uc3QgdHlwZXMgPSBtYXBbZGJUeXBlXTtcbiAgY29uc3QgZXhwZWN0ZWQgPSBBcnJheS5pc0FycmF5KGZpZWxkVHlwZSkgPyB0eXBlc1tcInN0cmluZ1wiXS5tYXAoKHQpID0+IHQudG9Mb3dlckNhc2UoKSkgOiB0eXBlc1tmaWVsZFR5cGVdLm1hcCgodCkgPT4gdC50b0xvd2VyQ2FzZSgpKTtcbiAgcmV0dXJuIGV4cGVjdGVkLmluY2x1ZGVzKG5vcm1hbGl6ZShjb2x1bW5EYXRhVHlwZSkpO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0TWlncmF0aW9ucyhjb25maWcpIHtcbiAgY29uc3QgYmV0dGVyQXV0aFNjaGVtYSA9IGdldFNjaGVtYShjb25maWcpO1xuICBjb25zdCBsb2dnZXIgPSBjcmVhdGVMb2dnZXIoY29uZmlnLmxvZ2dlcik7XG4gIGxldCB7IGt5c2VseTogZGIsIGRhdGFiYXNlVHlwZTogZGJUeXBlIH0gPSBhd2FpdCBjcmVhdGVLeXNlbHlBZGFwdGVyKGNvbmZpZyk7XG4gIGlmICghZGJUeXBlKSB7XG4gICAgbG9nZ2VyLndhcm4oXG4gICAgICBcIkNvdWxkIG5vdCBkZXRlcm1pbmUgZGF0YWJhc2UgdHlwZSwgZGVmYXVsdGluZyB0byBzcWxpdGUuIFBsZWFzZSBwcm92aWRlIGEgdHlwZSBpbiB0aGUgZGF0YWJhc2Ugb3B0aW9ucyB0byBhdm9pZCB0aGlzLlwiXG4gICAgKTtcbiAgICBkYlR5cGUgPSBcInNxbGl0ZVwiO1xuICB9XG4gIGlmICghZGIpIHtcbiAgICBsb2dnZXIuZXJyb3IoXG4gICAgICBcIk9ubHkga3lzZWx5IGFkYXB0ZXIgaXMgc3VwcG9ydGVkIGZvciBtaWdyYXRpb25zLiBZb3UgY2FuIHVzZSBgZ2VuZXJhdGVgIGNvbW1hbmQgdG8gZ2VuZXJhdGUgdGhlIHNjaGVtYSwgaWYgeW91J3JlIHVzaW5nIGEgZGlmZmVyZW50IGFkYXB0ZXIuXCJcbiAgICApO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuICBjb25zdCB0YWJsZU1ldGFkYXRhID0gYXdhaXQgZGIuaW50cm9zcGVjdGlvbi5nZXRUYWJsZXMoKTtcbiAgY29uc3QgdG9CZUNyZWF0ZWQgPSBbXTtcbiAgY29uc3QgdG9CZUFkZGVkID0gW107XG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGJldHRlckF1dGhTY2hlbWEpKSB7XG4gICAgY29uc3QgdGFibGUgPSB0YWJsZU1ldGFkYXRhLmZpbmQoKHQpID0+IHQubmFtZSA9PT0ga2V5KTtcbiAgICBpZiAoIXRhYmxlKSB7XG4gICAgICBjb25zdCB0SW5kZXggPSB0b0JlQ3JlYXRlZC5maW5kSW5kZXgoKHQpID0+IHQudGFibGUgPT09IGtleSk7XG4gICAgICBjb25zdCB0YWJsZURhdGEgPSB7XG4gICAgICAgIHRhYmxlOiBrZXksXG4gICAgICAgIGZpZWxkczogdmFsdWUuZmllbGRzLFxuICAgICAgICBvcmRlcjogdmFsdWUub3JkZXIgfHwgSW5maW5pdHlcbiAgICAgIH07XG4gICAgICBjb25zdCBpbnNlcnRJbmRleCA9IHRvQmVDcmVhdGVkLmZpbmRJbmRleChcbiAgICAgICAgKHQpID0+ICh0Lm9yZGVyIHx8IEluZmluaXR5KSA+IHRhYmxlRGF0YS5vcmRlclxuICAgICAgKTtcbiAgICAgIGlmIChpbnNlcnRJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgaWYgKHRJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICB0b0JlQ3JlYXRlZC5wdXNoKHRhYmxlRGF0YSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdG9CZUNyZWF0ZWRbdEluZGV4XS5maWVsZHMgPSB7XG4gICAgICAgICAgICAuLi50b0JlQ3JlYXRlZFt0SW5kZXhdLmZpZWxkcyxcbiAgICAgICAgICAgIC4uLnZhbHVlLmZpZWxkc1xuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRvQmVDcmVhdGVkLnNwbGljZShpbnNlcnRJbmRleCwgMCwgdGFibGVEYXRhKTtcbiAgICAgIH1cbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBsZXQgdG9CZUFkZGVkRmllbGRzID0ge307XG4gICAgZm9yIChjb25zdCBbZmllbGROYW1lLCBmaWVsZF0gb2YgT2JqZWN0LmVudHJpZXModmFsdWUuZmllbGRzKSkge1xuICAgICAgY29uc3QgY29sdW1uID0gdGFibGUuY29sdW1ucy5maW5kKChjKSA9PiBjLm5hbWUgPT09IGZpZWxkTmFtZSk7XG4gICAgICBpZiAoIWNvbHVtbikge1xuICAgICAgICB0b0JlQWRkZWRGaWVsZHNbZmllbGROYW1lXSA9IGZpZWxkO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChtYXRjaFR5cGUoY29sdW1uLmRhdGFUeXBlLCBmaWVsZC50eXBlLCBkYlR5cGUpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oXG4gICAgICAgICAgYEZpZWxkICR7ZmllbGROYW1lfSBpbiB0YWJsZSAke2tleX0gaGFzIGEgZGlmZmVyZW50IHR5cGUgaW4gdGhlIGRhdGFiYXNlLiBFeHBlY3RlZCAke2ZpZWxkLnR5cGV9IGJ1dCBnb3QgJHtjb2x1bW4uZGF0YVR5cGV9LmBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKE9iamVjdC5rZXlzKHRvQmVBZGRlZEZpZWxkcykubGVuZ3RoID4gMCkge1xuICAgICAgdG9CZUFkZGVkLnB1c2goe1xuICAgICAgICB0YWJsZToga2V5LFxuICAgICAgICBmaWVsZHM6IHRvQmVBZGRlZEZpZWxkcyxcbiAgICAgICAgb3JkZXI6IHZhbHVlLm9yZGVyIHx8IEluZmluaXR5XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgY29uc3QgbWlncmF0aW9ucyA9IFtdO1xuICBmdW5jdGlvbiBnZXRUeXBlKGZpZWxkLCBmaWVsZE5hbWUpIHtcbiAgICBjb25zdCB0eXBlID0gZmllbGQudHlwZTtcbiAgICBjb25zdCB0eXBlTWFwID0ge1xuICAgICAgc3RyaW5nOiB7XG4gICAgICAgIHNxbGl0ZTogXCJ0ZXh0XCIsXG4gICAgICAgIHBvc3RncmVzOiBcInRleHRcIixcbiAgICAgICAgbXlzcWw6IGZpZWxkLnVuaXF1ZSA/IFwidmFyY2hhcigyNTUpXCIgOiBmaWVsZC5yZWZlcmVuY2VzID8gXCJ2YXJjaGFyKDM2KVwiIDogXCJ0ZXh0XCIsXG4gICAgICAgIG1zc3FsOiBmaWVsZC51bmlxdWUgfHwgZmllbGQuc29ydGFibGUgPyBcInZhcmNoYXIoMjU1KVwiIDogZmllbGQucmVmZXJlbmNlcyA/IFwidmFyY2hhcigzNilcIiA6IChcbiAgICAgICAgICAvLyBtc3NxbCBkZXByZWNhdGVkIGB0ZXh0YCwgYW5kIHRoZSBhbHRlcm5hdGl2ZSBpcyBgdmFyY2hhcihtYXgpYC5cbiAgICAgICAgICAvLyBLeXNlbHkgdHlwZSBpbnRlcmZhY2UgZG9lc24ndCBzdXBwb3J0IGB0ZXh0YCwgc28gd2Ugc2V0IHRoaXMgdG8gYHZhcmNoYXIoODAwMClgIGFzXG4gICAgICAgICAgLy8gdGhhdCdzIHRoZSBtYXggbGVuZ3RoIGZvciBgdmFyY2hhcmBcbiAgICAgICAgICBcInZhcmNoYXIoODAwMClcIlxuICAgICAgICApXG4gICAgICB9LFxuICAgICAgYm9vbGVhbjoge1xuICAgICAgICBzcWxpdGU6IFwiaW50ZWdlclwiLFxuICAgICAgICBwb3N0Z3JlczogXCJib29sZWFuXCIsXG4gICAgICAgIG15c3FsOiBcImJvb2xlYW5cIixcbiAgICAgICAgbXNzcWw6IFwic21hbGxpbnRcIlxuICAgICAgfSxcbiAgICAgIG51bWJlcjoge1xuICAgICAgICBzcWxpdGU6IGZpZWxkLmJpZ2ludCA/IFwiYmlnaW50XCIgOiBcImludGVnZXJcIixcbiAgICAgICAgcG9zdGdyZXM6IGZpZWxkLmJpZ2ludCA/IFwiYmlnaW50XCIgOiBcImludGVnZXJcIixcbiAgICAgICAgbXlzcWw6IGZpZWxkLmJpZ2ludCA/IFwiYmlnaW50XCIgOiBcImludGVnZXJcIixcbiAgICAgICAgbXNzcWw6IGZpZWxkLmJpZ2ludCA/IFwiYmlnaW50XCIgOiBcImludGVnZXJcIlxuICAgICAgfSxcbiAgICAgIGRhdGU6IHtcbiAgICAgICAgc3FsaXRlOiBcImRhdGVcIixcbiAgICAgICAgcG9zdGdyZXM6IFwidGltZXN0YW1wXCIsXG4gICAgICAgIG15c3FsOiBcImRhdGV0aW1lXCIsXG4gICAgICAgIG1zc3FsOiBcImRhdGV0aW1lXCJcbiAgICAgIH0sXG4gICAgICBqc29uOiB7XG4gICAgICAgIHNxbGl0ZTogXCJ0ZXh0XCIsXG4gICAgICAgIHBvc3RncmVzOiBcImpzb25cIixcbiAgICAgICAgbXlzcWw6IFwianNvblwiLFxuICAgICAgICBtc3NxbDogXCJ2YXJjaGFyKDgwMDApXCJcbiAgICAgIH0sXG4gICAgICBpZDoge1xuICAgICAgICBwb3N0Z3JlczogY29uZmlnLmFkdmFuY2VkPy5kYXRhYmFzZT8udXNlTnVtYmVySWQgPyBcInNlcmlhbFwiIDogXCJ0ZXh0XCIsXG4gICAgICAgIG15c3FsOiBjb25maWcuYWR2YW5jZWQ/LmRhdGFiYXNlPy51c2VOdW1iZXJJZCA/IFwiaW50ZWdlclwiIDogXCJ2YXJjaGFyKDM2KVwiLFxuICAgICAgICBtc3NxbDogY29uZmlnLmFkdmFuY2VkPy5kYXRhYmFzZT8udXNlTnVtYmVySWQgPyBcImludGVnZXJcIiA6IFwidmFyY2hhcigzNilcIixcbiAgICAgICAgc3FsaXRlOiBjb25maWcuYWR2YW5jZWQ/LmRhdGFiYXNlPy51c2VOdW1iZXJJZCA/IFwiaW50ZWdlclwiIDogXCJ0ZXh0XCJcbiAgICAgIH1cbiAgICB9O1xuICAgIGlmIChmaWVsZE5hbWUgPT09IFwiaWRcIiB8fCBmaWVsZC5yZWZlcmVuY2VzPy5maWVsZCA9PT0gXCJpZFwiKSB7XG4gICAgICByZXR1cm4gdHlwZU1hcC5pZFtkYlR5cGVdO1xuICAgIH1cbiAgICBpZiAoZGJUeXBlID09PSBcInNxbGl0ZVwiICYmICh0eXBlID09PSBcInN0cmluZ1tdXCIgfHwgdHlwZSA9PT0gXCJudW1iZXJbXVwiKSkge1xuICAgICAgcmV0dXJuIFwidGV4dFwiO1xuICAgIH1cbiAgICBpZiAodHlwZSA9PT0gXCJzdHJpbmdbXVwiIHx8IHR5cGUgPT09IFwibnVtYmVyW11cIikge1xuICAgICAgcmV0dXJuIFwianNvbmJcIjtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodHlwZSkpIHtcbiAgICAgIHJldHVybiBcInRleHRcIjtcbiAgICB9XG4gICAgcmV0dXJuIHR5cGVNYXBbdHlwZV1bZGJUeXBlIHx8IFwic3FsaXRlXCJdO1xuICB9XG4gIGlmICh0b0JlQWRkZWQubGVuZ3RoKSB7XG4gICAgZm9yIChjb25zdCB0YWJsZSBvZiB0b0JlQWRkZWQpIHtcbiAgICAgIGZvciAoY29uc3QgW2ZpZWxkTmFtZSwgZmllbGRdIG9mIE9iamVjdC5lbnRyaWVzKHRhYmxlLmZpZWxkcykpIHtcbiAgICAgICAgY29uc3QgdHlwZSA9IGdldFR5cGUoZmllbGQsIGZpZWxkTmFtZSk7XG4gICAgICAgIGNvbnN0IGV4ZWMgPSBkYi5zY2hlbWEuYWx0ZXJUYWJsZSh0YWJsZS50YWJsZSkuYWRkQ29sdW1uKGZpZWxkTmFtZSwgdHlwZSwgKGNvbCkgPT4ge1xuICAgICAgICAgIGNvbCA9IGZpZWxkLnJlcXVpcmVkICE9PSBmYWxzZSA/IGNvbC5ub3ROdWxsKCkgOiBjb2w7XG4gICAgICAgICAgaWYgKGZpZWxkLnJlZmVyZW5jZXMpIHtcbiAgICAgICAgICAgIGNvbCA9IGNvbC5yZWZlcmVuY2VzKFxuICAgICAgICAgICAgICBgJHtmaWVsZC5yZWZlcmVuY2VzLm1vZGVsfS4ke2ZpZWxkLnJlZmVyZW5jZXMuZmllbGR9YFxuICAgICAgICAgICAgKS5vbkRlbGV0ZShmaWVsZC5yZWZlcmVuY2VzLm9uRGVsZXRlIHx8IFwiY2FzY2FkZVwiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGZpZWxkLnVuaXF1ZSkge1xuICAgICAgICAgICAgY29sID0gY29sLnVuaXF1ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZmllbGQudHlwZSA9PT0gXCJkYXRlXCIgJiYgdHlwZW9mIGZpZWxkLmRlZmF1bHRWYWx1ZSA9PT0gXCJmdW5jdGlvblwiICYmIChkYlR5cGUgPT09IFwicG9zdGdyZXNcIiB8fCBkYlR5cGUgPT09IFwibXlzcWxcIiB8fCBkYlR5cGUgPT09IFwibXNzcWxcIikpIHtcbiAgICAgICAgICAgIGNvbCA9IGNvbC5kZWZhdWx0VG8oc3FsYENVUlJFTlRfVElNRVNUQU1QYCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBjb2w7XG4gICAgICAgIH0pO1xuICAgICAgICBtaWdyYXRpb25zLnB1c2goZXhlYyk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmICh0b0JlQ3JlYXRlZC5sZW5ndGgpIHtcbiAgICBmb3IgKGNvbnN0IHRhYmxlIG9mIHRvQmVDcmVhdGVkKSB7XG4gICAgICBsZXQgZGJUID0gZGIuc2NoZW1hLmNyZWF0ZVRhYmxlKHRhYmxlLnRhYmxlKS5hZGRDb2x1bW4oXG4gICAgICAgIFwiaWRcIixcbiAgICAgICAgY29uZmlnLmFkdmFuY2VkPy5kYXRhYmFzZT8udXNlTnVtYmVySWQgPyBkYlR5cGUgPT09IFwicG9zdGdyZXNcIiA/IFwic2VyaWFsXCIgOiBcImludGVnZXJcIiA6IGRiVHlwZSA9PT0gXCJteXNxbFwiIHx8IGRiVHlwZSA9PT0gXCJtc3NxbFwiID8gXCJ2YXJjaGFyKDM2KVwiIDogXCJ0ZXh0XCIsXG4gICAgICAgIChjb2wpID0+IHtcbiAgICAgICAgICBpZiAoY29uZmlnLmFkdmFuY2VkPy5kYXRhYmFzZT8udXNlTnVtYmVySWQpIHtcbiAgICAgICAgICAgIGlmIChkYlR5cGUgPT09IFwicG9zdGdyZXNcIikge1xuICAgICAgICAgICAgICByZXR1cm4gY29sLnByaW1hcnlLZXkoKS5ub3ROdWxsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29sLmF1dG9JbmNyZW1lbnQoKS5wcmltYXJ5S2V5KCkubm90TnVsbCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gY29sLnByaW1hcnlLZXkoKS5ub3ROdWxsKCk7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBmb3IgKGNvbnN0IFtmaWVsZE5hbWUsIGZpZWxkXSBvZiBPYmplY3QuZW50cmllcyh0YWJsZS5maWVsZHMpKSB7XG4gICAgICAgIGNvbnN0IHR5cGUgPSBnZXRUeXBlKGZpZWxkLCBmaWVsZE5hbWUpO1xuICAgICAgICBkYlQgPSBkYlQuYWRkQ29sdW1uKGZpZWxkTmFtZSwgdHlwZSwgKGNvbCkgPT4ge1xuICAgICAgICAgIGNvbCA9IGZpZWxkLnJlcXVpcmVkICE9PSBmYWxzZSA/IGNvbC5ub3ROdWxsKCkgOiBjb2w7XG4gICAgICAgICAgaWYgKGZpZWxkLnJlZmVyZW5jZXMpIHtcbiAgICAgICAgICAgIGNvbCA9IGNvbC5yZWZlcmVuY2VzKGAke2ZpZWxkLnJlZmVyZW5jZXMubW9kZWx9LiR7ZmllbGQucmVmZXJlbmNlcy5maWVsZH1gKS5vbkRlbGV0ZShmaWVsZC5yZWZlcmVuY2VzLm9uRGVsZXRlIHx8IFwiY2FzY2FkZVwiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGZpZWxkLnVuaXF1ZSkge1xuICAgICAgICAgICAgY29sID0gY29sLnVuaXF1ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZmllbGQudHlwZSA9PT0gXCJkYXRlXCIgJiYgdHlwZW9mIGZpZWxkLmRlZmF1bHRWYWx1ZSA9PT0gXCJmdW5jdGlvblwiICYmIChkYlR5cGUgPT09IFwicG9zdGdyZXNcIiB8fCBkYlR5cGUgPT09IFwibXlzcWxcIiB8fCBkYlR5cGUgPT09IFwibXNzcWxcIikpIHtcbiAgICAgICAgICAgIGNvbCA9IGNvbC5kZWZhdWx0VG8oc3FsYENVUlJFTlRfVElNRVNUQU1QYCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBjb2w7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgbWlncmF0aW9ucy5wdXNoKGRiVCk7XG4gICAgfVxuICB9XG4gIGFzeW5jIGZ1bmN0aW9uIHJ1bk1pZ3JhdGlvbnMoKSB7XG4gICAgZm9yIChjb25zdCBtaWdyYXRpb24gb2YgbWlncmF0aW9ucykge1xuICAgICAgYXdhaXQgbWlncmF0aW9uLmV4ZWN1dGUoKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgZnVuY3Rpb24gY29tcGlsZU1pZ3JhdGlvbnMoKSB7XG4gICAgY29uc3QgY29tcGlsZWQgPSBtaWdyYXRpb25zLm1hcCgobSkgPT4gbS5jb21waWxlKCkuc3FsKTtcbiAgICByZXR1cm4gY29tcGlsZWQuam9pbihcIjtcXG5cXG5cIikgKyBcIjtcIjtcbiAgfVxuICByZXR1cm4geyB0b0JlQ3JlYXRlZCwgdG9CZUFkZGVkLCBydW5NaWdyYXRpb25zLCBjb21waWxlTWlncmF0aW9ucyB9O1xufVxuXG5leHBvcnQgeyBnZXRBZGFwdGVyIGFzIGEsIGNvbnZlcnRUb0RCIGFzIGIsIGNyZWF0ZUludGVybmFsQWRhcHRlciBhcyBjLCBjb252ZXJ0RnJvbURCIGFzIGQsIGdldE1pZ3JhdGlvbnMgYXMgZSwgZ2V0U2NoZW1hIGFzIGYsIGdldFdpdGhIb29rcyBhcyBnLCBtYXRjaFR5cGUgYXMgbSB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/shared/better-auth.CSVCtb77.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/shared/better-auth.CW6D9eSx.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/shared/better-auth.CW6D9eSx.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   g: () => (/* binding */ getDate)\n/* harmony export */ });\nconst getDate = (span, unit = \"ms\") => {\n  return new Date(Date.now() + (unit === \"sec\" ? span * 1e3 : span));\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9zaGFyZWQvYmV0dGVyLWF1dGguQ1c2RDllU3gubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7O0FBRXdCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFtYWFuXFxPbmVEcml2ZVxcRGVza3RvcFxcS2FuZGlkXzJcXE5ldyBmb2xkZXIgKDIpXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxzaGFyZWRcXGJldHRlci1hdXRoLkNXNkQ5ZVN4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBnZXREYXRlID0gKHNwYW4sIHVuaXQgPSBcIm1zXCIpID0+IHtcbiAgcmV0dXJuIG5ldyBEYXRlKERhdGUubm93KCkgKyAodW5pdCA9PT0gXCJzZWNcIiA/IHNwYW4gKiAxZTMgOiBzcGFuKSk7XG59O1xuXG5leHBvcnQgeyBnZXREYXRlIGFzIGcgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/shared/better-auth.CW6D9eSx.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/shared/better-auth.CuS_eDdK.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/shared/better-auth.CuS_eDdK.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   a: () => (/* binding */ getBaseURL),\n/* harmony export */   b: () => (/* binding */ getHost),\n/* harmony export */   c: () => (/* binding */ getProtocol),\n/* harmony export */   g: () => (/* binding */ getOrigin)\n/* harmony export */ });\n/* harmony import */ var _better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./better-auth.CMQ3rA-I.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.CMQ3rA-I.mjs\");\n/* harmony import */ var _better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./better-auth.DdzSJf-n.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.DdzSJf-n.mjs\");\n\n\n\nfunction checkHasPath(url) {\n  try {\n    const parsedUrl = new URL(url);\n    return parsedUrl.pathname !== \"/\";\n  } catch (error) {\n    throw new _better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_1__.B(\n      `Invalid base URL: ${url}. Please provide a valid base URL.`\n    );\n  }\n}\nfunction withPath(url, path = \"/api/auth\") {\n  const hasPath = checkHasPath(url);\n  if (hasPath) {\n    return url;\n  }\n  path = path.startsWith(\"/\") ? path : `/${path}`;\n  return `${url.replace(/\\/+$/, \"\")}${path}`;\n}\nfunction getBaseURL(url, path, request) {\n  if (url) {\n    return withPath(url, path);\n  }\n  const fromEnv = _better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_0__.e.BETTER_AUTH_URL || _better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_0__.e.NEXT_PUBLIC_BETTER_AUTH_URL || _better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_0__.e.PUBLIC_BETTER_AUTH_URL || _better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_0__.e.NUXT_PUBLIC_BETTER_AUTH_URL || _better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_0__.e.NUXT_PUBLIC_AUTH_URL || (_better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_0__.e.BASE_URL !== \"/\" ? _better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_0__.e.BASE_URL : void 0);\n  if (fromEnv) {\n    return withPath(fromEnv, path);\n  }\n  const fromRequest = request?.headers.get(\"x-forwarded-host\");\n  const fromRequestProto = request?.headers.get(\"x-forwarded-proto\");\n  if (fromRequest && fromRequestProto) {\n    return withPath(`${fromRequestProto}://${fromRequest}`, path);\n  }\n  if (request) {\n    const url2 = getOrigin(request.url);\n    if (!url2) {\n      throw new _better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_1__.B(\n        \"Could not get origin from request. Please provide a valid base URL.\"\n      );\n    }\n    return withPath(url2, path);\n  }\n  if (typeof window !== \"undefined\" && window.location) {\n    return withPath(window.location.origin, path);\n  }\n  return void 0;\n}\nfunction getOrigin(url) {\n  try {\n    const parsedUrl = new URL(url);\n    return parsedUrl.origin;\n  } catch (error) {\n    return null;\n  }\n}\nfunction getProtocol(url) {\n  try {\n    const parsedUrl = new URL(url);\n    return parsedUrl.protocol;\n  } catch (error) {\n    return null;\n  }\n}\nfunction getHost(url) {\n  try {\n    const parsedUrl = new URL(url);\n    return parsedUrl.host;\n  } catch (error) {\n    return url;\n  }\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9zaGFyZWQvYmV0dGVyLWF1dGguQ3VTX2VEZEsubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFzRDtBQUNZOztBQUVsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixjQUFjLHdEQUFlO0FBQzdCLDJCQUEyQixJQUFJO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsS0FBSztBQUNoRCxZQUFZLHdCQUF3QixFQUFFLEtBQUs7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix3REFBRyxvQkFBb0Isd0RBQUcsZ0NBQWdDLHdEQUFHLDJCQUEyQix3REFBRyxnQ0FBZ0Msd0RBQUcsMEJBQTBCLHdEQUFHLG9CQUFvQix3REFBRztBQUNwTTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsaUJBQWlCLEtBQUssWUFBWTtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix3REFBZTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFMkUiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYW1hYW5cXE9uZURyaXZlXFxEZXNrdG9wXFxLYW5kaWRfMlxcTmV3IGZvbGRlciAoMilcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHNoYXJlZFxcYmV0dGVyLWF1dGguQ3VTX2VEZEsubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGUgYXMgZW52IH0gZnJvbSAnLi9iZXR0ZXItYXV0aC5DTVEzckEtSS5tanMnO1xuaW1wb3J0IHsgQiBhcyBCZXR0ZXJBdXRoRXJyb3IgfSBmcm9tICcuL2JldHRlci1hdXRoLkRkelNKZi1uLm1qcyc7XG5cbmZ1bmN0aW9uIGNoZWNrSGFzUGF0aCh1cmwpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBwYXJzZWRVcmwgPSBuZXcgVVJMKHVybCk7XG4gICAgcmV0dXJuIHBhcnNlZFVybC5wYXRobmFtZSAhPT0gXCIvXCI7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcbiAgICAgIGBJbnZhbGlkIGJhc2UgVVJMOiAke3VybH0uIFBsZWFzZSBwcm92aWRlIGEgdmFsaWQgYmFzZSBVUkwuYFxuICAgICk7XG4gIH1cbn1cbmZ1bmN0aW9uIHdpdGhQYXRoKHVybCwgcGF0aCA9IFwiL2FwaS9hdXRoXCIpIHtcbiAgY29uc3QgaGFzUGF0aCA9IGNoZWNrSGFzUGF0aCh1cmwpO1xuICBpZiAoaGFzUGF0aCkge1xuICAgIHJldHVybiB1cmw7XG4gIH1cbiAgcGF0aCA9IHBhdGguc3RhcnRzV2l0aChcIi9cIikgPyBwYXRoIDogYC8ke3BhdGh9YDtcbiAgcmV0dXJuIGAke3VybC5yZXBsYWNlKC9cXC8rJC8sIFwiXCIpfSR7cGF0aH1gO1xufVxuZnVuY3Rpb24gZ2V0QmFzZVVSTCh1cmwsIHBhdGgsIHJlcXVlc3QpIHtcbiAgaWYgKHVybCkge1xuICAgIHJldHVybiB3aXRoUGF0aCh1cmwsIHBhdGgpO1xuICB9XG4gIGNvbnN0IGZyb21FbnYgPSBlbnYuQkVUVEVSX0FVVEhfVVJMIHx8IGVudi5ORVhUX1BVQkxJQ19CRVRURVJfQVVUSF9VUkwgfHwgZW52LlBVQkxJQ19CRVRURVJfQVVUSF9VUkwgfHwgZW52Lk5VWFRfUFVCTElDX0JFVFRFUl9BVVRIX1VSTCB8fCBlbnYuTlVYVF9QVUJMSUNfQVVUSF9VUkwgfHwgKGVudi5CQVNFX1VSTCAhPT0gXCIvXCIgPyBlbnYuQkFTRV9VUkwgOiB2b2lkIDApO1xuICBpZiAoZnJvbUVudikge1xuICAgIHJldHVybiB3aXRoUGF0aChmcm9tRW52LCBwYXRoKTtcbiAgfVxuICBjb25zdCBmcm9tUmVxdWVzdCA9IHJlcXVlc3Q/LmhlYWRlcnMuZ2V0KFwieC1mb3J3YXJkZWQtaG9zdFwiKTtcbiAgY29uc3QgZnJvbVJlcXVlc3RQcm90byA9IHJlcXVlc3Q/LmhlYWRlcnMuZ2V0KFwieC1mb3J3YXJkZWQtcHJvdG9cIik7XG4gIGlmIChmcm9tUmVxdWVzdCAmJiBmcm9tUmVxdWVzdFByb3RvKSB7XG4gICAgcmV0dXJuIHdpdGhQYXRoKGAke2Zyb21SZXF1ZXN0UHJvdG99Oi8vJHtmcm9tUmVxdWVzdH1gLCBwYXRoKTtcbiAgfVxuICBpZiAocmVxdWVzdCkge1xuICAgIGNvbnN0IHVybDIgPSBnZXRPcmlnaW4ocmVxdWVzdC51cmwpO1xuICAgIGlmICghdXJsMikge1xuICAgICAgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcbiAgICAgICAgXCJDb3VsZCBub3QgZ2V0IG9yaWdpbiBmcm9tIHJlcXVlc3QuIFBsZWFzZSBwcm92aWRlIGEgdmFsaWQgYmFzZSBVUkwuXCJcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiB3aXRoUGF0aCh1cmwyLCBwYXRoKTtcbiAgfVxuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cubG9jYXRpb24pIHtcbiAgICByZXR1cm4gd2l0aFBhdGgod2luZG93LmxvY2F0aW9uLm9yaWdpbiwgcGF0aCk7XG4gIH1cbiAgcmV0dXJuIHZvaWQgMDtcbn1cbmZ1bmN0aW9uIGdldE9yaWdpbih1cmwpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBwYXJzZWRVcmwgPSBuZXcgVVJMKHVybCk7XG4gICAgcmV0dXJuIHBhcnNlZFVybC5vcmlnaW47XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cbmZ1bmN0aW9uIGdldFByb3RvY29sKHVybCkge1xuICB0cnkge1xuICAgIGNvbnN0IHBhcnNlZFVybCA9IG5ldyBVUkwodXJsKTtcbiAgICByZXR1cm4gcGFyc2VkVXJsLnByb3RvY29sO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5mdW5jdGlvbiBnZXRIb3N0KHVybCkge1xuICB0cnkge1xuICAgIGNvbnN0IHBhcnNlZFVybCA9IG5ldyBVUkwodXJsKTtcbiAgICByZXR1cm4gcGFyc2VkVXJsLmhvc3Q7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHVybDtcbiAgfVxufVxuXG5leHBvcnQgeyBnZXRCYXNlVVJMIGFzIGEsIGdldEhvc3QgYXMgYiwgZ2V0UHJvdG9jb2wgYXMgYywgZ2V0T3JpZ2luIGFzIGcgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/shared/better-auth.CuS_eDdK.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/shared/better-auth.D-2CmEwz.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/shared/better-auth.D-2CmEwz.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   c: () => (/* binding */ capitalizeFirstLetter)\n/* harmony export */ });\nfunction capitalizeFirstLetter(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9zaGFyZWQvYmV0dGVyLWF1dGguRC0yQ21Fd3oubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7O0FBRXNDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFtYWFuXFxPbmVEcml2ZVxcRGVza3RvcFxcS2FuZGlkXzJcXE5ldyBmb2xkZXIgKDIpXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxzaGFyZWRcXGJldHRlci1hdXRoLkQtMkNtRXd6Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBjYXBpdGFsaXplRmlyc3RMZXR0ZXIoc3RyKSB7XG4gIHJldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSk7XG59XG5cbmV4cG9ydCB7IGNhcGl0YWxpemVGaXJzdExldHRlciBhcyBjIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/shared/better-auth.D-2CmEwz.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/shared/better-auth.DV5EHeYG.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/shared/better-auth.DV5EHeYG.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   B: () => (/* binding */ BASE_ERROR_CODES),\n/* harmony export */   a: () => (/* binding */ createAuthEndpoint),\n/* harmony export */   b: () => (/* binding */ getSession),\n/* harmony export */   c: () => (/* binding */ createAuthMiddleware),\n/* harmony export */   d: () => (/* binding */ revokeSessions),\n/* harmony export */   e: () => (/* binding */ revokeSession),\n/* harmony export */   f: () => (/* binding */ freshSessionMiddleware),\n/* harmony export */   g: () => (/* binding */ getSessionFromCtx),\n/* harmony export */   h: () => (/* binding */ getSessionQuerySchema),\n/* harmony export */   i: () => (/* binding */ requestOnlySessionMiddleware),\n/* harmony export */   l: () => (/* binding */ listSessions),\n/* harmony export */   o: () => (/* binding */ optionsMiddleware),\n/* harmony export */   r: () => (/* binding */ revokeOtherSessions),\n/* harmony export */   s: () => (/* binding */ sessionMiddleware)\n/* harmony export */ });\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.js\");\n/* harmony import */ var _better_auth_CW6D9eSx_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./better-auth.CW6D9eSx.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.CW6D9eSx.mjs\");\n/* harmony import */ var _better_auth_UfVWArIB_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./better-auth.UfVWArIB.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.UfVWArIB.mjs\");\n/* harmony import */ var zod_v4__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! zod/v4 */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/classic/schemas.js\");\n/* harmony import */ var zod_v4__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! zod/v4 */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/classic/coerce.js\");\n/* harmony import */ var _better_auth_BZZKN1g7_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./better-auth.BZZKN1g7.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.BZZKN1g7.mjs\");\n/* harmony import */ var _better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/utils/hmac */ \"(rsc)/./node_modules/@better-auth/utils/dist/hmac.mjs\");\n/* harmony import */ var _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @better-auth/utils/base64 */ \"(rsc)/./node_modules/@better-auth/utils/dist/base64.mjs\");\n/* harmony import */ var _better_auth_utils_binary__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/utils/binary */ \"(rsc)/./node_modules/@better-auth/utils/dist/binary.mjs\");\n\n\n\n\n\n\n\n\n\nconst optionsMiddleware = (0,better_call__WEBPACK_IMPORTED_MODULE_0__.createMiddleware)(async () => {\n  return {};\n});\nconst createAuthMiddleware = better_call__WEBPACK_IMPORTED_MODULE_0__.createMiddleware.create({\n  use: [\n    optionsMiddleware,\n    /**\n     * Only use for post hooks\n     */\n    (0,better_call__WEBPACK_IMPORTED_MODULE_0__.createMiddleware)(async () => {\n      return {};\n    })\n  ]\n});\nconst createAuthEndpoint = better_call__WEBPACK_IMPORTED_MODULE_0__.createEndpoint.create({\n  use: [optionsMiddleware]\n});\n\nconst BASE_ERROR_CODES = {\n  USER_NOT_FOUND: \"User not found\",\n  FAILED_TO_CREATE_USER: \"Failed to create user\",\n  FAILED_TO_CREATE_SESSION: \"Failed to create session\",\n  FAILED_TO_UPDATE_USER: \"Failed to update user\",\n  FAILED_TO_GET_SESSION: \"Failed to get session\",\n  INVALID_PASSWORD: \"Invalid password\",\n  INVALID_EMAIL: \"Invalid email\",\n  INVALID_EMAIL_OR_PASSWORD: \"Invalid email or password\",\n  SOCIAL_ACCOUNT_ALREADY_LINKED: \"Social account already linked\",\n  PROVIDER_NOT_FOUND: \"Provider not found\",\n  INVALID_TOKEN: \"Invalid token\",\n  ID_TOKEN_NOT_SUPPORTED: \"id_token not supported\",\n  FAILED_TO_GET_USER_INFO: \"Failed to get user info\",\n  USER_EMAIL_NOT_FOUND: \"User email not found\",\n  EMAIL_NOT_VERIFIED: \"Email not verified\",\n  PASSWORD_TOO_SHORT: \"Password too short\",\n  PASSWORD_TOO_LONG: \"Password too long\",\n  USER_ALREADY_EXISTS: \"User already exists. Use another email.\",\n  EMAIL_CAN_NOT_BE_UPDATED: \"Email can not be updated\",\n  CREDENTIAL_ACCOUNT_NOT_FOUND: \"Credential account not found\",\n  SESSION_EXPIRED: \"Session expired. Re-authenticate to perform this action.\",\n  FAILED_TO_UNLINK_LAST_ACCOUNT: \"You can't unlink your last account\",\n  ACCOUNT_NOT_FOUND: \"Account not found\",\n  USER_ALREADY_HAS_PASSWORD: \"User already has a password. Provide that to delete the account.\"\n};\n\nconst getSessionQuerySchema = zod_v4__WEBPACK_IMPORTED_MODULE_7__.optional(\n  zod_v4__WEBPACK_IMPORTED_MODULE_7__.object({\n    /**\n     * If cookie cache is enabled, it will disable the cache\n     * and fetch the session from the database\n     */\n    disableCookieCache: zod_v4__WEBPACK_IMPORTED_MODULE_8__.boolean().meta({\n      description: \"Disable cookie cache and fetch session from database\"\n    }).optional(),\n    disableRefresh: zod_v4__WEBPACK_IMPORTED_MODULE_8__.boolean().meta({\n      description: \"Disable session refresh. Useful for checking session status, without updating the session\"\n    }).optional()\n  })\n);\nconst getSession = () => createAuthEndpoint(\n  \"/get-session\",\n  {\n    method: \"GET\",\n    query: getSessionQuerySchema,\n    requireHeaders: true,\n    metadata: {\n      openapi: {\n        description: \"Get the current session\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    session: {\n                      $ref: \"#/components/schemas/Session\"\n                    },\n                    user: {\n                      $ref: \"#/components/schemas/User\"\n                    }\n                  },\n                  required: [\"session\", \"user\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    try {\n      const sessionCookieToken = await ctx.getSignedCookie(\n        ctx.context.authCookies.sessionToken.name,\n        ctx.context.secret\n      );\n      if (!sessionCookieToken) {\n        return null;\n      }\n      const sessionDataCookie = ctx.getCookie(\n        ctx.context.authCookies.sessionData.name\n      );\n      const sessionDataPayload = sessionDataCookie ? (0,_better_auth_BZZKN1g7_mjs__WEBPACK_IMPORTED_MODULE_3__.s)(_better_auth_utils_binary__WEBPACK_IMPORTED_MODULE_6__.binary.decode(_better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_5__.base64Url.decode(sessionDataCookie))) : null;\n      if (sessionDataPayload) {\n        const isValid = await (0,_better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_4__.createHMAC)(\"SHA-256\", \"base64urlnopad\").verify(\n          ctx.context.secret,\n          JSON.stringify({\n            ...sessionDataPayload.session,\n            expiresAt: sessionDataPayload.expiresAt\n          }),\n          sessionDataPayload.signature\n        );\n        if (!isValid) {\n          const dataCookie = ctx.context.authCookies.sessionData.name;\n          ctx.setCookie(dataCookie, \"\", {\n            maxAge: 0\n          });\n          return ctx.json(null);\n        }\n      }\n      const dontRememberMe = await ctx.getSignedCookie(\n        ctx.context.authCookies.dontRememberToken.name,\n        ctx.context.secret\n      );\n      if (sessionDataPayload?.session && ctx.context.options.session?.cookieCache?.enabled && !ctx.query?.disableCookieCache) {\n        const session2 = sessionDataPayload.session;\n        const hasExpired = sessionDataPayload.expiresAt < Date.now() || session2.session.expiresAt < /* @__PURE__ */ new Date();\n        if (!hasExpired) {\n          ctx.context.session = session2;\n          return ctx.json(\n            session2\n          );\n        } else {\n          const dataCookie = ctx.context.authCookies.sessionData.name;\n          ctx.setCookie(dataCookie, \"\", {\n            maxAge: 0\n          });\n        }\n      }\n      const session = await ctx.context.internalAdapter.findSession(sessionCookieToken);\n      ctx.context.session = session;\n      if (!session || session.session.expiresAt < /* @__PURE__ */ new Date()) {\n        (0,_better_auth_UfVWArIB_mjs__WEBPACK_IMPORTED_MODULE_2__.d)(ctx);\n        if (session) {\n          await ctx.context.internalAdapter.deleteSession(\n            session.session.token\n          );\n        }\n        return ctx.json(null);\n      }\n      if (dontRememberMe || ctx.query?.disableRefresh) {\n        return ctx.json(\n          session\n        );\n      }\n      const expiresIn = ctx.context.sessionConfig.expiresIn;\n      const updateAge = ctx.context.sessionConfig.updateAge;\n      const sessionIsDueToBeUpdatedDate = session.session.expiresAt.valueOf() - expiresIn * 1e3 + updateAge * 1e3;\n      const shouldBeUpdated = sessionIsDueToBeUpdatedDate <= Date.now();\n      if (shouldBeUpdated && (!ctx.query?.disableRefresh || !ctx.context.options.session?.disableSessionRefresh)) {\n        const updatedSession = await ctx.context.internalAdapter.updateSession(\n          session.session.token,\n          {\n            expiresAt: (0,_better_auth_CW6D9eSx_mjs__WEBPACK_IMPORTED_MODULE_1__.g)(ctx.context.sessionConfig.expiresIn, \"sec\"),\n            updatedAt: /* @__PURE__ */ new Date()\n          }\n        );\n        if (!updatedSession) {\n          (0,_better_auth_UfVWArIB_mjs__WEBPACK_IMPORTED_MODULE_2__.d)(ctx);\n          return ctx.json(null, { status: 401 });\n        }\n        const maxAge = (updatedSession.expiresAt.valueOf() - Date.now()) / 1e3;\n        await (0,_better_auth_UfVWArIB_mjs__WEBPACK_IMPORTED_MODULE_2__.s)(\n          ctx,\n          {\n            session: updatedSession,\n            user: session.user\n          },\n          false,\n          {\n            maxAge\n          }\n        );\n        return ctx.json({\n          session: updatedSession,\n          user: session.user\n        });\n      }\n      await (0,_better_auth_UfVWArIB_mjs__WEBPACK_IMPORTED_MODULE_2__.b)(ctx, session);\n      return ctx.json(\n        session\n      );\n    } catch (error) {\n      ctx.context.logger.error(\"INTERNAL_SERVER_ERROR\", error);\n      throw new better_call__WEBPACK_IMPORTED_MODULE_0__.APIError(\"INTERNAL_SERVER_ERROR\", {\n        message: BASE_ERROR_CODES.FAILED_TO_GET_SESSION\n      });\n    }\n  }\n);\nconst getSessionFromCtx = async (ctx, config) => {\n  if (ctx.context.session) {\n    return ctx.context.session;\n  }\n  const session = await getSession()({\n    ...ctx,\n    asResponse: false,\n    headers: ctx.headers,\n    returnHeaders: false,\n    query: {\n      ...config,\n      ...ctx.query\n    }\n  }).catch((e) => {\n    return null;\n  });\n  ctx.context.session = session;\n  return session;\n};\nconst sessionMiddleware = createAuthMiddleware(async (ctx) => {\n  const session = await getSessionFromCtx(ctx);\n  if (!session?.session) {\n    throw new better_call__WEBPACK_IMPORTED_MODULE_0__.APIError(\"UNAUTHORIZED\");\n  }\n  return {\n    session\n  };\n});\nconst requestOnlySessionMiddleware = createAuthMiddleware(\n  async (ctx) => {\n    const session = await getSessionFromCtx(ctx);\n    if (!session?.session && (ctx.request || ctx.headers)) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_0__.APIError(\"UNAUTHORIZED\");\n    }\n    return { session };\n  }\n);\nconst freshSessionMiddleware = createAuthMiddleware(async (ctx) => {\n  const session = await getSessionFromCtx(ctx);\n  if (!session?.session) {\n    throw new better_call__WEBPACK_IMPORTED_MODULE_0__.APIError(\"UNAUTHORIZED\");\n  }\n  if (ctx.context.sessionConfig.freshAge === 0) {\n    return {\n      session\n    };\n  }\n  const freshAge = ctx.context.sessionConfig.freshAge;\n  const lastUpdated = session.session.updatedAt?.valueOf() || session.session.createdAt.valueOf();\n  const now = Date.now();\n  const isFresh = now - lastUpdated < freshAge * 1e3;\n  if (!isFresh) {\n    throw new better_call__WEBPACK_IMPORTED_MODULE_0__.APIError(\"FORBIDDEN\", {\n      message: \"Session is not fresh\"\n    });\n  }\n  return {\n    session\n  };\n});\nconst listSessions = () => createAuthEndpoint(\n  \"/list-sessions\",\n  {\n    method: \"GET\",\n    use: [sessionMiddleware],\n    requireHeaders: true,\n    metadata: {\n      openapi: {\n        description: \"List all active sessions for the user\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"array\",\n                  items: {\n                    $ref: \"#/components/schemas/Session\"\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    try {\n      const sessions = await ctx.context.internalAdapter.listSessions(\n        ctx.context.session.user.id\n      );\n      const activeSessions = sessions.filter((session) => {\n        return session.expiresAt > /* @__PURE__ */ new Date();\n      });\n      return ctx.json(\n        activeSessions\n      );\n    } catch (e) {\n      ctx.context.logger.error(e);\n      throw ctx.error(\"INTERNAL_SERVER_ERROR\");\n    }\n  }\n);\nconst revokeSession = createAuthEndpoint(\n  \"/revoke-session\",\n  {\n    method: \"POST\",\n    body: zod_v4__WEBPACK_IMPORTED_MODULE_7__.object({\n      token: zod_v4__WEBPACK_IMPORTED_MODULE_7__.string().meta({\n        description: \"The token to revoke\"\n      })\n    }),\n    use: [sessionMiddleware],\n    requireHeaders: true,\n    metadata: {\n      openapi: {\n        description: \"Revoke a single session\",\n        requestBody: {\n          content: {\n            \"application/json\": {\n              schema: {\n                type: \"object\",\n                properties: {\n                  token: {\n                    type: \"string\",\n                    description: \"The token to revoke\"\n                  }\n                },\n                required: [\"token\"]\n              }\n            }\n          }\n        },\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    status: {\n                      type: \"boolean\",\n                      description: \"Indicates if the session was revoked successfully\"\n                    }\n                  },\n                  required: [\"status\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const token = ctx.body.token;\n    const findSession = await ctx.context.internalAdapter.findSession(token);\n    if (!findSession) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_0__.APIError(\"BAD_REQUEST\", {\n        message: \"Session not found\"\n      });\n    }\n    if (findSession.session.userId !== ctx.context.session.user.id) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_0__.APIError(\"UNAUTHORIZED\");\n    }\n    try {\n      await ctx.context.internalAdapter.deleteSession(token);\n    } catch (error) {\n      ctx.context.logger.error(\n        error && typeof error === \"object\" && \"name\" in error ? error.name : \"\",\n        error\n      );\n      throw new better_call__WEBPACK_IMPORTED_MODULE_0__.APIError(\"INTERNAL_SERVER_ERROR\");\n    }\n    return ctx.json({\n      status: true\n    });\n  }\n);\nconst revokeSessions = createAuthEndpoint(\n  \"/revoke-sessions\",\n  {\n    method: \"POST\",\n    use: [sessionMiddleware],\n    requireHeaders: true,\n    metadata: {\n      openapi: {\n        description: \"Revoke all sessions for the user\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    status: {\n                      type: \"boolean\",\n                      description: \"Indicates if all sessions were revoked successfully\"\n                    }\n                  },\n                  required: [\"status\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    try {\n      await ctx.context.internalAdapter.deleteSessions(\n        ctx.context.session.user.id\n      );\n    } catch (error) {\n      ctx.context.logger.error(\n        error && typeof error === \"object\" && \"name\" in error ? error.name : \"\",\n        error\n      );\n      throw new better_call__WEBPACK_IMPORTED_MODULE_0__.APIError(\"INTERNAL_SERVER_ERROR\");\n    }\n    return ctx.json({\n      status: true\n    });\n  }\n);\nconst revokeOtherSessions = createAuthEndpoint(\n  \"/revoke-other-sessions\",\n  {\n    method: \"POST\",\n    requireHeaders: true,\n    use: [sessionMiddleware],\n    metadata: {\n      openapi: {\n        description: \"Revoke all other sessions for the user except the current one\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    status: {\n                      type: \"boolean\",\n                      description: \"Indicates if all other sessions were revoked successfully\"\n                    }\n                  },\n                  required: [\"status\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const session = ctx.context.session;\n    if (!session.user) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_0__.APIError(\"UNAUTHORIZED\");\n    }\n    const sessions = await ctx.context.internalAdapter.listSessions(\n      session.user.id\n    );\n    const activeSessions = sessions.filter((session2) => {\n      return session2.expiresAt > /* @__PURE__ */ new Date();\n    });\n    const otherSessions = activeSessions.filter(\n      (session2) => session2.token !== ctx.context.session.session.token\n    );\n    await Promise.all(\n      otherSessions.map(\n        (session2) => ctx.context.internalAdapter.deleteSession(session2.token)\n      )\n    );\n    return ctx.json({\n      status: true\n    });\n  }\n);\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9zaGFyZWQvYmV0dGVyLWF1dGguRFY1RUhlWUcubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXlFO0FBQ2Y7QUFDd0Q7QUFDdEY7QUFDb0M7QUFDWDtBQUNDO0FBQ0g7O0FBRW5ELDBCQUEwQiw2REFBZ0I7QUFDMUM7QUFDQSxDQUFDO0FBQ0QsNkJBQTZCLHlEQUFnQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSw2REFBZ0I7QUFDcEI7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDO0FBQ0QsMkJBQTJCLHVEQUFjO0FBQ3pDO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDhCQUE4Qiw0Q0FBVTtBQUN4QyxFQUFFLDBDQUFRO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsMkNBQWdCO0FBQ3hDO0FBQ0EsS0FBSztBQUNMLG9CQUFvQiwyQ0FBZ0I7QUFDcEM7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFELDREQUFhLENBQUMsNkRBQU0sUUFBUSxnRUFBUztBQUMx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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsaURBQVE7QUFDeEI7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsaURBQVE7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRWdXIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFtYWFuXFxPbmVEcml2ZVxcRGVza3RvcFxcS2FuZGlkXzJcXE5ldyBmb2xkZXIgKDIpXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxzaGFyZWRcXGJldHRlci1hdXRoLkRWNUVIZVlHLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVNaWRkbGV3YXJlLCBjcmVhdGVFbmRwb2ludCwgQVBJRXJyb3IgfSBmcm9tICdiZXR0ZXItY2FsbCc7XG5pbXBvcnQgeyBnIGFzIGdldERhdGUgfSBmcm9tICcuL2JldHRlci1hdXRoLkNXNkQ5ZVN4Lm1qcyc7XG5pbXBvcnQgeyBkIGFzIGRlbGV0ZVNlc3Npb25Db29raWUsIHMgYXMgc2V0U2Vzc2lvbkNvb2tpZSwgYiBhcyBzZXRDb29raWVDYWNoZSB9IGZyb20gJy4vYmV0dGVyLWF1dGguVWZWV0FySUIubWpzJztcbmltcG9ydCAqIGFzIHogZnJvbSAnem9kL3Y0JztcbmltcG9ydCB7IHMgYXMgc2FmZUpTT05QYXJzZSB9IGZyb20gJy4vYmV0dGVyLWF1dGguQlpaS04xZzcubWpzJztcbmltcG9ydCB7IGNyZWF0ZUhNQUMgfSBmcm9tICdAYmV0dGVyLWF1dGgvdXRpbHMvaG1hYyc7XG5pbXBvcnQgeyBiYXNlNjRVcmwgfSBmcm9tICdAYmV0dGVyLWF1dGgvdXRpbHMvYmFzZTY0JztcbmltcG9ydCB7IGJpbmFyeSB9IGZyb20gJ0BiZXR0ZXItYXV0aC91dGlscy9iaW5hcnknO1xuXG5jb25zdCBvcHRpb25zTWlkZGxld2FyZSA9IGNyZWF0ZU1pZGRsZXdhcmUoYXN5bmMgKCkgPT4ge1xuICByZXR1cm4ge307XG59KTtcbmNvbnN0IGNyZWF0ZUF1dGhNaWRkbGV3YXJlID0gY3JlYXRlTWlkZGxld2FyZS5jcmVhdGUoe1xuICB1c2U6IFtcbiAgICBvcHRpb25zTWlkZGxld2FyZSxcbiAgICAvKipcbiAgICAgKiBPbmx5IHVzZSBmb3IgcG9zdCBob29rc1xuICAgICAqL1xuICAgIGNyZWF0ZU1pZGRsZXdhcmUoYXN5bmMgKCkgPT4ge1xuICAgICAgcmV0dXJuIHt9O1xuICAgIH0pXG4gIF1cbn0pO1xuY29uc3QgY3JlYXRlQXV0aEVuZHBvaW50ID0gY3JlYXRlRW5kcG9pbnQuY3JlYXRlKHtcbiAgdXNlOiBbb3B0aW9uc01pZGRsZXdhcmVdXG59KTtcblxuY29uc3QgQkFTRV9FUlJPUl9DT0RFUyA9IHtcbiAgVVNFUl9OT1RfRk9VTkQ6IFwiVXNlciBub3QgZm91bmRcIixcbiAgRkFJTEVEX1RPX0NSRUFURV9VU0VSOiBcIkZhaWxlZCB0byBjcmVhdGUgdXNlclwiLFxuICBGQUlMRURfVE9fQ1JFQVRFX1NFU1NJT046IFwiRmFpbGVkIHRvIGNyZWF0ZSBzZXNzaW9uXCIsXG4gIEZBSUxFRF9UT19VUERBVEVfVVNFUjogXCJGYWlsZWQgdG8gdXBkYXRlIHVzZXJcIixcbiAgRkFJTEVEX1RPX0dFVF9TRVNTSU9OOiBcIkZhaWxlZCB0byBnZXQgc2Vzc2lvblwiLFxuICBJTlZBTElEX1BBU1NXT1JEOiBcIkludmFsaWQgcGFzc3dvcmRcIixcbiAgSU5WQUxJRF9FTUFJTDogXCJJbnZhbGlkIGVtYWlsXCIsXG4gIElOVkFMSURfRU1BSUxfT1JfUEFTU1dPUkQ6IFwiSW52YWxpZCBlbWFpbCBvciBwYXNzd29yZFwiLFxuICBTT0NJQUxfQUNDT1VOVF9BTFJFQURZX0xJTktFRDogXCJTb2NpYWwgYWNjb3VudCBhbHJlYWR5IGxpbmtlZFwiLFxuICBQUk9WSURFUl9OT1RfRk9VTkQ6IFwiUHJvdmlkZXIgbm90IGZvdW5kXCIsXG4gIElOVkFMSURfVE9LRU46IFwiSW52YWxpZCB0b2tlblwiLFxuICBJRF9UT0tFTl9OT1RfU1VQUE9SVEVEOiBcImlkX3Rva2VuIG5vdCBzdXBwb3J0ZWRcIixcbiAgRkFJTEVEX1RPX0dFVF9VU0VSX0lORk86IFwiRmFpbGVkIHRvIGdldCB1c2VyIGluZm9cIixcbiAgVVNFUl9FTUFJTF9OT1RfRk9VTkQ6IFwiVXNlciBlbWFpbCBub3QgZm91bmRcIixcbiAgRU1BSUxfTk9UX1ZFUklGSUVEOiBcIkVtYWlsIG5vdCB2ZXJpZmllZFwiLFxuICBQQVNTV09SRF9UT09fU0hPUlQ6IFwiUGFzc3dvcmQgdG9vIHNob3J0XCIsXG4gIFBBU1NXT1JEX1RPT19MT05HOiBcIlBhc3N3b3JkIHRvbyBsb25nXCIsXG4gIFVTRVJfQUxSRUFEWV9FWElTVFM6IFwiVXNlciBhbHJlYWR5IGV4aXN0cy4gVXNlIGFub3RoZXIgZW1haWwuXCIsXG4gIEVNQUlMX0NBTl9OT1RfQkVfVVBEQVRFRDogXCJFbWFpbCBjYW4gbm90IGJlIHVwZGF0ZWRcIixcbiAgQ1JFREVOVElBTF9BQ0NPVU5UX05PVF9GT1VORDogXCJDcmVkZW50aWFsIGFjY291bnQgbm90IGZvdW5kXCIsXG4gIFNFU1NJT05fRVhQSVJFRDogXCJTZXNzaW9uIGV4cGlyZWQuIFJlLWF1dGhlbnRpY2F0ZSB0byBwZXJmb3JtIHRoaXMgYWN0aW9uLlwiLFxuICBGQUlMRURfVE9fVU5MSU5LX0xBU1RfQUNDT1VOVDogXCJZb3UgY2FuJ3QgdW5saW5rIHlvdXIgbGFzdCBhY2NvdW50XCIsXG4gIEFDQ09VTlRfTk9UX0ZPVU5EOiBcIkFjY291bnQgbm90IGZvdW5kXCIsXG4gIFVTRVJfQUxSRUFEWV9IQVNfUEFTU1dPUkQ6IFwiVXNlciBhbHJlYWR5IGhhcyBhIHBhc3N3b3JkLiBQcm92aWRlIHRoYXQgdG8gZGVsZXRlIHRoZSBhY2NvdW50LlwiXG59O1xuXG5jb25zdCBnZXRTZXNzaW9uUXVlcnlTY2hlbWEgPSB6Lm9wdGlvbmFsKFxuICB6Lm9iamVjdCh7XG4gICAgLyoqXG4gICAgICogSWYgY29va2llIGNhY2hlIGlzIGVuYWJsZWQsIGl0IHdpbGwgZGlzYWJsZSB0aGUgY2FjaGVcbiAgICAgKiBhbmQgZmV0Y2ggdGhlIHNlc3Npb24gZnJvbSB0aGUgZGF0YWJhc2VcbiAgICAgKi9cbiAgICBkaXNhYmxlQ29va2llQ2FjaGU6IHouY29lcmNlLmJvb2xlYW4oKS5tZXRhKHtcbiAgICAgIGRlc2NyaXB0aW9uOiBcIkRpc2FibGUgY29va2llIGNhY2hlIGFuZCBmZXRjaCBzZXNzaW9uIGZyb20gZGF0YWJhc2VcIlxuICAgIH0pLm9wdGlvbmFsKCksXG4gICAgZGlzYWJsZVJlZnJlc2g6IHouY29lcmNlLmJvb2xlYW4oKS5tZXRhKHtcbiAgICAgIGRlc2NyaXB0aW9uOiBcIkRpc2FibGUgc2Vzc2lvbiByZWZyZXNoLiBVc2VmdWwgZm9yIGNoZWNraW5nIHNlc3Npb24gc3RhdHVzLCB3aXRob3V0IHVwZGF0aW5nIHRoZSBzZXNzaW9uXCJcbiAgICB9KS5vcHRpb25hbCgpXG4gIH0pXG4pO1xuY29uc3QgZ2V0U2Vzc2lvbiA9ICgpID0+IGNyZWF0ZUF1dGhFbmRwb2ludChcbiAgXCIvZ2V0LXNlc3Npb25cIixcbiAge1xuICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICBxdWVyeTogZ2V0U2Vzc2lvblF1ZXJ5U2NoZW1hLFxuICAgIHJlcXVpcmVIZWFkZXJzOiB0cnVlLFxuICAgIG1ldGFkYXRhOiB7XG4gICAgICBvcGVuYXBpOiB7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIkdldCB0aGUgY3VycmVudCBzZXNzaW9uXCIsXG4gICAgICAgIHJlc3BvbnNlczoge1xuICAgICAgICAgIFwiMjAwXCI6IHtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcbiAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHtcbiAgICAgICAgICAgICAgICBzY2hlbWE6IHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwib2JqZWN0XCIsXG4gICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAkcmVmOiBcIiMvY29tcG9uZW50cy9zY2hlbWFzL1Nlc3Npb25cIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgJHJlZjogXCIjL2NvbXBvbmVudHMvc2NoZW1hcy9Vc2VyXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBbXCJzZXNzaW9uXCIsIFwidXNlclwiXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgYXN5bmMgKGN0eCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzZXNzaW9uQ29va2llVG9rZW4gPSBhd2FpdCBjdHguZ2V0U2lnbmVkQ29va2llKFxuICAgICAgICBjdHguY29udGV4dC5hdXRoQ29va2llcy5zZXNzaW9uVG9rZW4ubmFtZSxcbiAgICAgICAgY3R4LmNvbnRleHQuc2VjcmV0XG4gICAgICApO1xuICAgICAgaWYgKCFzZXNzaW9uQ29va2llVG9rZW4pIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBjb25zdCBzZXNzaW9uRGF0YUNvb2tpZSA9IGN0eC5nZXRDb29raWUoXG4gICAgICAgIGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25EYXRhLm5hbWVcbiAgICAgICk7XG4gICAgICBjb25zdCBzZXNzaW9uRGF0YVBheWxvYWQgPSBzZXNzaW9uRGF0YUNvb2tpZSA/IHNhZmVKU09OUGFyc2UoYmluYXJ5LmRlY29kZShiYXNlNjRVcmwuZGVjb2RlKHNlc3Npb25EYXRhQ29va2llKSkpIDogbnVsbDtcbiAgICAgIGlmIChzZXNzaW9uRGF0YVBheWxvYWQpIHtcbiAgICAgICAgY29uc3QgaXNWYWxpZCA9IGF3YWl0IGNyZWF0ZUhNQUMoXCJTSEEtMjU2XCIsIFwiYmFzZTY0dXJsbm9wYWRcIikudmVyaWZ5KFxuICAgICAgICAgIGN0eC5jb250ZXh0LnNlY3JldCxcbiAgICAgICAgICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAuLi5zZXNzaW9uRGF0YVBheWxvYWQuc2Vzc2lvbixcbiAgICAgICAgICAgIGV4cGlyZXNBdDogc2Vzc2lvbkRhdGFQYXlsb2FkLmV4cGlyZXNBdFxuICAgICAgICAgIH0pLFxuICAgICAgICAgIHNlc3Npb25EYXRhUGF5bG9hZC5zaWduYXR1cmVcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKCFpc1ZhbGlkKSB7XG4gICAgICAgICAgY29uc3QgZGF0YUNvb2tpZSA9IGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25EYXRhLm5hbWU7XG4gICAgICAgICAgY3R4LnNldENvb2tpZShkYXRhQ29va2llLCBcIlwiLCB7XG4gICAgICAgICAgICBtYXhBZ2U6IDBcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gY3R4Lmpzb24obnVsbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGRvbnRSZW1lbWJlck1lID0gYXdhaXQgY3R4LmdldFNpZ25lZENvb2tpZShcbiAgICAgICAgY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuZG9udFJlbWVtYmVyVG9rZW4ubmFtZSxcbiAgICAgICAgY3R4LmNvbnRleHQuc2VjcmV0XG4gICAgICApO1xuICAgICAgaWYgKHNlc3Npb25EYXRhUGF5bG9hZD8uc2Vzc2lvbiAmJiBjdHguY29udGV4dC5vcHRpb25zLnNlc3Npb24/LmNvb2tpZUNhY2hlPy5lbmFibGVkICYmICFjdHgucXVlcnk/LmRpc2FibGVDb29raWVDYWNoZSkge1xuICAgICAgICBjb25zdCBzZXNzaW9uMiA9IHNlc3Npb25EYXRhUGF5bG9hZC5zZXNzaW9uO1xuICAgICAgICBjb25zdCBoYXNFeHBpcmVkID0gc2Vzc2lvbkRhdGFQYXlsb2FkLmV4cGlyZXNBdCA8IERhdGUubm93KCkgfHwgc2Vzc2lvbjIuc2Vzc2lvbi5leHBpcmVzQXQgPCAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKTtcbiAgICAgICAgaWYgKCFoYXNFeHBpcmVkKSB7XG4gICAgICAgICAgY3R4LmNvbnRleHQuc2Vzc2lvbiA9IHNlc3Npb24yO1xuICAgICAgICAgIHJldHVybiBjdHguanNvbihcbiAgICAgICAgICAgIHNlc3Npb24yXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBkYXRhQ29va2llID0gY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuc2Vzc2lvbkRhdGEubmFtZTtcbiAgICAgICAgICBjdHguc2V0Q29va2llKGRhdGFDb29raWUsIFwiXCIsIHtcbiAgICAgICAgICAgIG1heEFnZTogMFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRTZXNzaW9uKHNlc3Npb25Db29raWVUb2tlbik7XG4gICAgICBjdHguY29udGV4dC5zZXNzaW9uID0gc2Vzc2lvbjtcbiAgICAgIGlmICghc2Vzc2lvbiB8fCBzZXNzaW9uLnNlc3Npb24uZXhwaXJlc0F0IDwgLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpIHtcbiAgICAgICAgZGVsZXRlU2Vzc2lvbkNvb2tpZShjdHgpO1xuICAgICAgICBpZiAoc2Vzc2lvbikge1xuICAgICAgICAgIGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVTZXNzaW9uKFxuICAgICAgICAgICAgc2Vzc2lvbi5zZXNzaW9uLnRva2VuXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY3R4Lmpzb24obnVsbCk7XG4gICAgICB9XG4gICAgICBpZiAoZG9udFJlbWVtYmVyTWUgfHwgY3R4LnF1ZXJ5Py5kaXNhYmxlUmVmcmVzaCkge1xuICAgICAgICByZXR1cm4gY3R4Lmpzb24oXG4gICAgICAgICAgc2Vzc2lvblxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgY29uc3QgZXhwaXJlc0luID0gY3R4LmNvbnRleHQuc2Vzc2lvbkNvbmZpZy5leHBpcmVzSW47XG4gICAgICBjb25zdCB1cGRhdGVBZ2UgPSBjdHguY29udGV4dC5zZXNzaW9uQ29uZmlnLnVwZGF0ZUFnZTtcbiAgICAgIGNvbnN0IHNlc3Npb25Jc0R1ZVRvQmVVcGRhdGVkRGF0ZSA9IHNlc3Npb24uc2Vzc2lvbi5leHBpcmVzQXQudmFsdWVPZigpIC0gZXhwaXJlc0luICogMWUzICsgdXBkYXRlQWdlICogMWUzO1xuICAgICAgY29uc3Qgc2hvdWxkQmVVcGRhdGVkID0gc2Vzc2lvbklzRHVlVG9CZVVwZGF0ZWREYXRlIDw9IERhdGUubm93KCk7XG4gICAgICBpZiAoc2hvdWxkQmVVcGRhdGVkICYmICghY3R4LnF1ZXJ5Py5kaXNhYmxlUmVmcmVzaCB8fCAhY3R4LmNvbnRleHQub3B0aW9ucy5zZXNzaW9uPy5kaXNhYmxlU2Vzc2lvblJlZnJlc2gpKSB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZWRTZXNzaW9uID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZVNlc3Npb24oXG4gICAgICAgICAgc2Vzc2lvbi5zZXNzaW9uLnRva2VuLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGV4cGlyZXNBdDogZ2V0RGF0ZShjdHguY29udGV4dC5zZXNzaW9uQ29uZmlnLmV4cGlyZXNJbiwgXCJzZWNcIiksXG4gICAgICAgICAgICB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICBpZiAoIXVwZGF0ZWRTZXNzaW9uKSB7XG4gICAgICAgICAgZGVsZXRlU2Vzc2lvbkNvb2tpZShjdHgpO1xuICAgICAgICAgIHJldHVybiBjdHguanNvbihudWxsLCB7IHN0YXR1czogNDAxIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1heEFnZSA9ICh1cGRhdGVkU2Vzc2lvbi5leHBpcmVzQXQudmFsdWVPZigpIC0gRGF0ZS5ub3coKSkgLyAxZTM7XG4gICAgICAgIGF3YWl0IHNldFNlc3Npb25Db29raWUoXG4gICAgICAgICAgY3R4LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHNlc3Npb246IHVwZGF0ZWRTZXNzaW9uLFxuICAgICAgICAgICAgdXNlcjogc2Vzc2lvbi51c2VyXG4gICAgICAgICAgfSxcbiAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtYXhBZ2VcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBjdHguanNvbih7XG4gICAgICAgICAgc2Vzc2lvbjogdXBkYXRlZFNlc3Npb24sXG4gICAgICAgICAgdXNlcjogc2Vzc2lvbi51c2VyXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgYXdhaXQgc2V0Q29va2llQ2FjaGUoY3R4LCBzZXNzaW9uKTtcbiAgICAgIHJldHVybiBjdHguanNvbihcbiAgICAgICAgc2Vzc2lvblxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsIGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBBUElFcnJvcihcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLCB7XG4gICAgICAgIG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuRkFJTEVEX1RPX0dFVF9TRVNTSU9OXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbik7XG5jb25zdCBnZXRTZXNzaW9uRnJvbUN0eCA9IGFzeW5jIChjdHgsIGNvbmZpZykgPT4ge1xuICBpZiAoY3R4LmNvbnRleHQuc2Vzc2lvbikge1xuICAgIHJldHVybiBjdHguY29udGV4dC5zZXNzaW9uO1xuICB9XG4gIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uKCkoe1xuICAgIC4uLmN0eCxcbiAgICBhc1Jlc3BvbnNlOiBmYWxzZSxcbiAgICBoZWFkZXJzOiBjdHguaGVhZGVycyxcbiAgICByZXR1cm5IZWFkZXJzOiBmYWxzZSxcbiAgICBxdWVyeToge1xuICAgICAgLi4uY29uZmlnLFxuICAgICAgLi4uY3R4LnF1ZXJ5XG4gICAgfVxuICB9KS5jYXRjaCgoZSkgPT4ge1xuICAgIHJldHVybiBudWxsO1xuICB9KTtcbiAgY3R4LmNvbnRleHQuc2Vzc2lvbiA9IHNlc3Npb247XG4gIHJldHVybiBzZXNzaW9uO1xufTtcbmNvbnN0IHNlc3Npb25NaWRkbGV3YXJlID0gY3JlYXRlQXV0aE1pZGRsZXdhcmUoYXN5bmMgKGN0eCkgPT4ge1xuICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkZyb21DdHgoY3R4KTtcbiAgaWYgKCFzZXNzaW9uPy5zZXNzaW9uKSB7XG4gICAgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIpO1xuICB9XG4gIHJldHVybiB7XG4gICAgc2Vzc2lvblxuICB9O1xufSk7XG5jb25zdCByZXF1ZXN0T25seVNlc3Npb25NaWRkbGV3YXJlID0gY3JlYXRlQXV0aE1pZGRsZXdhcmUoXG4gIGFzeW5jIChjdHgpID0+IHtcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkZyb21DdHgoY3R4KTtcbiAgICBpZiAoIXNlc3Npb24/LnNlc3Npb24gJiYgKGN0eC5yZXF1ZXN0IHx8IGN0eC5oZWFkZXJzKSkge1xuICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIpO1xuICAgIH1cbiAgICByZXR1cm4geyBzZXNzaW9uIH07XG4gIH1cbik7XG5jb25zdCBmcmVzaFNlc3Npb25NaWRkbGV3YXJlID0gY3JlYXRlQXV0aE1pZGRsZXdhcmUoYXN5bmMgKGN0eCkgPT4ge1xuICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkZyb21DdHgoY3R4KTtcbiAgaWYgKCFzZXNzaW9uPy5zZXNzaW9uKSB7XG4gICAgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIpO1xuICB9XG4gIGlmIChjdHguY29udGV4dC5zZXNzaW9uQ29uZmlnLmZyZXNoQWdlID09PSAwKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNlc3Npb25cbiAgICB9O1xuICB9XG4gIGNvbnN0IGZyZXNoQWdlID0gY3R4LmNvbnRleHQuc2Vzc2lvbkNvbmZpZy5mcmVzaEFnZTtcbiAgY29uc3QgbGFzdFVwZGF0ZWQgPSBzZXNzaW9uLnNlc3Npb24udXBkYXRlZEF0Py52YWx1ZU9mKCkgfHwgc2Vzc2lvbi5zZXNzaW9uLmNyZWF0ZWRBdC52YWx1ZU9mKCk7XG4gIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gIGNvbnN0IGlzRnJlc2ggPSBub3cgLSBsYXN0VXBkYXRlZCA8IGZyZXNoQWdlICogMWUzO1xuICBpZiAoIWlzRnJlc2gpIHtcbiAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwge1xuICAgICAgbWVzc2FnZTogXCJTZXNzaW9uIGlzIG5vdCBmcmVzaFwiXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBzZXNzaW9uXG4gIH07XG59KTtcbmNvbnN0IGxpc3RTZXNzaW9ucyA9ICgpID0+IGNyZWF0ZUF1dGhFbmRwb2ludChcbiAgXCIvbGlzdC1zZXNzaW9uc1wiLFxuICB7XG4gICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgIHVzZTogW3Nlc3Npb25NaWRkbGV3YXJlXSxcbiAgICByZXF1aXJlSGVhZGVyczogdHJ1ZSxcbiAgICBtZXRhZGF0YToge1xuICAgICAgb3BlbmFwaToge1xuICAgICAgICBkZXNjcmlwdGlvbjogXCJMaXN0IGFsbCBhY3RpdmUgc2Vzc2lvbnMgZm9yIHRoZSB1c2VyXCIsXG4gICAgICAgIHJlc3BvbnNlczoge1xuICAgICAgICAgIFwiMjAwXCI6IHtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcbiAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHtcbiAgICAgICAgICAgICAgICBzY2hlbWE6IHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgICAgICAgICAgIGl0ZW1zOiB7XG4gICAgICAgICAgICAgICAgICAgICRyZWY6IFwiIy9jb21wb25lbnRzL3NjaGVtYXMvU2Vzc2lvblwiXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LFxuICBhc3luYyAoY3R4KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNlc3Npb25zID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmxpc3RTZXNzaW9ucyhcbiAgICAgICAgY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLmlkXG4gICAgICApO1xuICAgICAgY29uc3QgYWN0aXZlU2Vzc2lvbnMgPSBzZXNzaW9ucy5maWx0ZXIoKHNlc3Npb24pID0+IHtcbiAgICAgICAgcmV0dXJuIHNlc3Npb24uZXhwaXJlc0F0ID4gLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBjdHguanNvbihcbiAgICAgICAgYWN0aXZlU2Vzc2lvbnNcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKGUpO1xuICAgICAgdGhyb3cgY3R4LmVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIpO1xuICAgIH1cbiAgfVxuKTtcbmNvbnN0IHJldm9rZVNlc3Npb24gPSBjcmVhdGVBdXRoRW5kcG9pbnQoXG4gIFwiL3Jldm9rZS1zZXNzaW9uXCIsXG4gIHtcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIGJvZHk6IHoub2JqZWN0KHtcbiAgICAgIHRva2VuOiB6LnN0cmluZygpLm1ldGEoe1xuICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgdG9rZW4gdG8gcmV2b2tlXCJcbiAgICAgIH0pXG4gICAgfSksXG4gICAgdXNlOiBbc2Vzc2lvbk1pZGRsZXdhcmVdLFxuICAgIHJlcXVpcmVIZWFkZXJzOiB0cnVlLFxuICAgIG1ldGFkYXRhOiB7XG4gICAgICBvcGVuYXBpOiB7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIlJldm9rZSBhIHNpbmdsZSBzZXNzaW9uXCIsXG4gICAgICAgIHJlcXVlc3RCb2R5OiB7XG4gICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHtcbiAgICAgICAgICAgICAgc2NoZW1hOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJvYmplY3RcIixcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgICB0b2tlbjoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgdG9rZW4gdG8gcmV2b2tlXCJcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBbXCJ0b2tlblwiXVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICByZXNwb25zZXM6IHtcbiAgICAgICAgICBcIjIwMFwiOiB7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgIFwiYXBwbGljYXRpb24vanNvblwiOiB7XG4gICAgICAgICAgICAgICAgc2NoZW1hOiB7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcIm9iamVjdFwiLFxuICAgICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJvb2xlYW5cIixcbiAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJJbmRpY2F0ZXMgaWYgdGhlIHNlc3Npb24gd2FzIHJldm9rZWQgc3VjY2Vzc2Z1bGx5XCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBbXCJzdGF0dXNcIl1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIGFzeW5jIChjdHgpID0+IHtcbiAgICBjb25zdCB0b2tlbiA9IGN0eC5ib2R5LnRva2VuO1xuICAgIGNvbnN0IGZpbmRTZXNzaW9uID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRTZXNzaW9uKHRva2VuKTtcbiAgICBpZiAoIWZpbmRTZXNzaW9uKSB7XG4gICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG4gICAgICAgIG1lc3NhZ2U6IFwiU2Vzc2lvbiBub3QgZm91bmRcIlxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChmaW5kU2Vzc2lvbi5zZXNzaW9uLnVzZXJJZCAhPT0gY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLmlkKSB7XG4gICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlU2Vzc2lvbih0b2tlbik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcbiAgICAgICAgZXJyb3IgJiYgdHlwZW9mIGVycm9yID09PSBcIm9iamVjdFwiICYmIFwibmFtZVwiIGluIGVycm9yID8gZXJyb3IubmFtZSA6IFwiXCIsXG4gICAgICAgIGVycm9yXG4gICAgICApO1xuICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIpO1xuICAgIH1cbiAgICByZXR1cm4gY3R4Lmpzb24oe1xuICAgICAgc3RhdHVzOiB0cnVlXG4gICAgfSk7XG4gIH1cbik7XG5jb25zdCByZXZva2VTZXNzaW9ucyA9IGNyZWF0ZUF1dGhFbmRwb2ludChcbiAgXCIvcmV2b2tlLXNlc3Npb25zXCIsXG4gIHtcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIHVzZTogW3Nlc3Npb25NaWRkbGV3YXJlXSxcbiAgICByZXF1aXJlSGVhZGVyczogdHJ1ZSxcbiAgICBtZXRhZGF0YToge1xuICAgICAgb3BlbmFwaToge1xuICAgICAgICBkZXNjcmlwdGlvbjogXCJSZXZva2UgYWxsIHNlc3Npb25zIGZvciB0aGUgdXNlclwiLFxuICAgICAgICByZXNwb25zZXM6IHtcbiAgICAgICAgICBcIjIwMFwiOiB7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgIFwiYXBwbGljYXRpb24vanNvblwiOiB7XG4gICAgICAgICAgICAgICAgc2NoZW1hOiB7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcIm9iamVjdFwiLFxuICAgICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJvb2xlYW5cIixcbiAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJJbmRpY2F0ZXMgaWYgYWxsIHNlc3Npb25zIHdlcmUgcmV2b2tlZCBzdWNjZXNzZnVsbHlcIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IFtcInN0YXR1c1wiXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgYXN5bmMgKGN0eCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlU2Vzc2lvbnMoXG4gICAgICAgIGN0eC5jb250ZXh0LnNlc3Npb24udXNlci5pZFxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFxuICAgICAgICBlcnJvciAmJiB0eXBlb2YgZXJyb3IgPT09IFwib2JqZWN0XCIgJiYgXCJuYW1lXCIgaW4gZXJyb3IgPyBlcnJvci5uYW1lIDogXCJcIixcbiAgICAgICAgZXJyb3JcbiAgICAgICk7XG4gICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIik7XG4gICAgfVxuICAgIHJldHVybiBjdHguanNvbih7XG4gICAgICBzdGF0dXM6IHRydWVcbiAgICB9KTtcbiAgfVxuKTtcbmNvbnN0IHJldm9rZU90aGVyU2Vzc2lvbnMgPSBjcmVhdGVBdXRoRW5kcG9pbnQoXG4gIFwiL3Jldm9rZS1vdGhlci1zZXNzaW9uc1wiLFxuICB7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICByZXF1aXJlSGVhZGVyczogdHJ1ZSxcbiAgICB1c2U6IFtzZXNzaW9uTWlkZGxld2FyZV0sXG4gICAgbWV0YWRhdGE6IHtcbiAgICAgIG9wZW5hcGk6IHtcbiAgICAgICAgZGVzY3JpcHRpb246IFwiUmV2b2tlIGFsbCBvdGhlciBzZXNzaW9ucyBmb3IgdGhlIHVzZXIgZXhjZXB0IHRoZSBjdXJyZW50IG9uZVwiLFxuICAgICAgICByZXNwb25zZXM6IHtcbiAgICAgICAgICBcIjIwMFwiOiB7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgIFwiYXBwbGljYXRpb24vanNvblwiOiB7XG4gICAgICAgICAgICAgICAgc2NoZW1hOiB7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcIm9iamVjdFwiLFxuICAgICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJvb2xlYW5cIixcbiAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJJbmRpY2F0ZXMgaWYgYWxsIG90aGVyIHNlc3Npb25zIHdlcmUgcmV2b2tlZCBzdWNjZXNzZnVsbHlcIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IFtcInN0YXR1c1wiXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgYXN5bmMgKGN0eCkgPT4ge1xuICAgIGNvbnN0IHNlc3Npb24gPSBjdHguY29udGV4dC5zZXNzaW9uO1xuICAgIGlmICghc2Vzc2lvbi51c2VyKSB7XG4gICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIik7XG4gICAgfVxuICAgIGNvbnN0IHNlc3Npb25zID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmxpc3RTZXNzaW9ucyhcbiAgICAgIHNlc3Npb24udXNlci5pZFxuICAgICk7XG4gICAgY29uc3QgYWN0aXZlU2Vzc2lvbnMgPSBzZXNzaW9ucy5maWx0ZXIoKHNlc3Npb24yKSA9PiB7XG4gICAgICByZXR1cm4gc2Vzc2lvbjIuZXhwaXJlc0F0ID4gLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCk7XG4gICAgfSk7XG4gICAgY29uc3Qgb3RoZXJTZXNzaW9ucyA9IGFjdGl2ZVNlc3Npb25zLmZpbHRlcihcbiAgICAgIChzZXNzaW9uMikgPT4gc2Vzc2lvbjIudG9rZW4gIT09IGN0eC5jb250ZXh0LnNlc3Npb24uc2Vzc2lvbi50b2tlblxuICAgICk7XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICBvdGhlclNlc3Npb25zLm1hcChcbiAgICAgICAgKHNlc3Npb24yKSA9PiBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlU2Vzc2lvbihzZXNzaW9uMi50b2tlbilcbiAgICAgIClcbiAgICApO1xuICAgIHJldHVybiBjdHguanNvbih7XG4gICAgICBzdGF0dXM6IHRydWVcbiAgICB9KTtcbiAgfVxuKTtcblxuZXhwb3J0IHsgQkFTRV9FUlJPUl9DT0RFUyBhcyBCLCBjcmVhdGVBdXRoRW5kcG9pbnQgYXMgYSwgZ2V0U2Vzc2lvbiBhcyBiLCBjcmVhdGVBdXRoTWlkZGxld2FyZSBhcyBjLCByZXZva2VTZXNzaW9ucyBhcyBkLCByZXZva2VTZXNzaW9uIGFzIGUsIGZyZXNoU2Vzc2lvbk1pZGRsZXdhcmUgYXMgZiwgZ2V0U2Vzc2lvbkZyb21DdHggYXMgZywgZ2V0U2Vzc2lvblF1ZXJ5U2NoZW1hIGFzIGgsIHJlcXVlc3RPbmx5U2Vzc2lvbk1pZGRsZXdhcmUgYXMgaSwgbGlzdFNlc3Npb25zIGFzIGwsIG9wdGlvbnNNaWRkbGV3YXJlIGFzIG8sIHJldm9rZU90aGVyU2Vzc2lvbnMgYXMgciwgc2Vzc2lvbk1pZGRsZXdhcmUgYXMgcyB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/shared/better-auth.DV5EHeYG.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/shared/better-auth.Dcv8PS7T.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/shared/better-auth.Dcv8PS7T.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   a: () => (/* binding */ accountSchema),\n/* harmony export */   b: () => (/* binding */ parseUserOutput),\n/* harmony export */   c: () => (/* binding */ coreSchema),\n/* harmony export */   d: () => (/* binding */ parseAccountOutput),\n/* harmony export */   e: () => (/* binding */ parseSessionOutput),\n/* harmony export */   f: () => (/* binding */ parseInputData),\n/* harmony export */   g: () => (/* binding */ getAllFields),\n/* harmony export */   h: () => (/* binding */ parseUserInput),\n/* harmony export */   i: () => (/* binding */ parseAdditionalUserInput),\n/* harmony export */   j: () => (/* binding */ parseAccountInput),\n/* harmony export */   k: () => (/* binding */ parseSessionInput),\n/* harmony export */   m: () => (/* binding */ mergeSchema),\n/* harmony export */   p: () => (/* binding */ parseOutputData),\n/* harmony export */   s: () => (/* binding */ sessionSchema),\n/* harmony export */   u: () => (/* binding */ userSchema),\n/* harmony export */   v: () => (/* binding */ verificationSchema)\n/* harmony export */ });\n/* harmony import */ var zod_v4__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod/v4 */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/classic/schemas.js\");\n/* harmony import */ var zod_v4__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod/v4 */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/classic/coerce.js\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.js\");\n\n\n\nconst coreSchema = zod_v4__WEBPACK_IMPORTED_MODULE_1__.object({\n  id: zod_v4__WEBPACK_IMPORTED_MODULE_1__.string(),\n  createdAt: zod_v4__WEBPACK_IMPORTED_MODULE_1__.date().default(() => /* @__PURE__ */ new Date()),\n  updatedAt: zod_v4__WEBPACK_IMPORTED_MODULE_1__.date().default(() => /* @__PURE__ */ new Date())\n});\nconst accountSchema = coreSchema.extend({\n  providerId: zod_v4__WEBPACK_IMPORTED_MODULE_1__.string(),\n  accountId: zod_v4__WEBPACK_IMPORTED_MODULE_1__.string(),\n  userId: zod_v4__WEBPACK_IMPORTED_MODULE_2__.string(),\n  accessToken: zod_v4__WEBPACK_IMPORTED_MODULE_1__.string().nullish(),\n  refreshToken: zod_v4__WEBPACK_IMPORTED_MODULE_1__.string().nullish(),\n  idToken: zod_v4__WEBPACK_IMPORTED_MODULE_1__.string().nullish(),\n  /**\n   * Access token expires at\n   */\n  accessTokenExpiresAt: zod_v4__WEBPACK_IMPORTED_MODULE_1__.date().nullish(),\n  /**\n   * Refresh token expires at\n   */\n  refreshTokenExpiresAt: zod_v4__WEBPACK_IMPORTED_MODULE_1__.date().nullish(),\n  /**\n   * The scopes that the user has authorized\n   */\n  scope: zod_v4__WEBPACK_IMPORTED_MODULE_1__.string().nullish(),\n  /**\n   * Password is only stored in the credential provider\n   */\n  password: zod_v4__WEBPACK_IMPORTED_MODULE_1__.string().nullish()\n});\nconst userSchema = coreSchema.extend({\n  email: zod_v4__WEBPACK_IMPORTED_MODULE_1__.string().transform((val) => val.toLowerCase()),\n  emailVerified: zod_v4__WEBPACK_IMPORTED_MODULE_1__.boolean().default(false),\n  name: zod_v4__WEBPACK_IMPORTED_MODULE_1__.string(),\n  image: zod_v4__WEBPACK_IMPORTED_MODULE_1__.string().nullish()\n});\nconst sessionSchema = coreSchema.extend({\n  userId: zod_v4__WEBPACK_IMPORTED_MODULE_2__.string(),\n  expiresAt: zod_v4__WEBPACK_IMPORTED_MODULE_1__.date(),\n  token: zod_v4__WEBPACK_IMPORTED_MODULE_1__.string(),\n  ipAddress: zod_v4__WEBPACK_IMPORTED_MODULE_1__.string().nullish(),\n  userAgent: zod_v4__WEBPACK_IMPORTED_MODULE_1__.string().nullish()\n});\nconst verificationSchema = coreSchema.extend({\n  value: zod_v4__WEBPACK_IMPORTED_MODULE_1__.string(),\n  expiresAt: zod_v4__WEBPACK_IMPORTED_MODULE_1__.date(),\n  identifier: zod_v4__WEBPACK_IMPORTED_MODULE_1__.string()\n});\nfunction parseOutputData(data, schema) {\n  const fields = schema.fields;\n  const parsedData = {};\n  for (const key in data) {\n    const field = fields[key];\n    if (!field) {\n      parsedData[key] = data[key];\n      continue;\n    }\n    if (field.returned === false) {\n      continue;\n    }\n    parsedData[key] = data[key];\n  }\n  return parsedData;\n}\nfunction getAllFields(options, table) {\n  let schema = {\n    ...table === \"user\" ? options.user?.additionalFields : {},\n    ...table === \"session\" ? options.session?.additionalFields : {}\n  };\n  for (const plugin of options.plugins || []) {\n    if (plugin.schema && plugin.schema[table]) {\n      schema = {\n        ...schema,\n        ...plugin.schema[table].fields\n      };\n    }\n  }\n  return schema;\n}\nfunction parseUserOutput(options, user) {\n  const schema = getAllFields(options, \"user\");\n  return parseOutputData(user, { fields: schema });\n}\nfunction parseAccountOutput(options, account) {\n  const schema = getAllFields(options, \"account\");\n  return parseOutputData(account, { fields: schema });\n}\nfunction parseSessionOutput(options, session) {\n  const schema = getAllFields(options, \"session\");\n  return parseOutputData(session, { fields: schema });\n}\nfunction parseInputData(data, schema) {\n  const action = schema.action || \"create\";\n  const fields = schema.fields;\n  const parsedData = {};\n  for (const key in fields) {\n    if (key in data) {\n      if (fields[key].input === false) {\n        if (fields[key].defaultValue) {\n          parsedData[key] = fields[key].defaultValue;\n          continue;\n        }\n        continue;\n      }\n      if (fields[key].validator?.input && data[key] !== void 0) {\n        parsedData[key] = fields[key].validator.input.parse(data[key]);\n        continue;\n      }\n      if (fields[key].transform?.input && data[key] !== void 0) {\n        parsedData[key] = fields[key].transform?.input(data[key]);\n        continue;\n      }\n      parsedData[key] = data[key];\n      continue;\n    }\n    if (fields[key].defaultValue && action === \"create\") {\n      parsedData[key] = fields[key].defaultValue;\n      continue;\n    }\n    if (fields[key].required && action === \"create\") {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_0__.APIError(\"BAD_REQUEST\", {\n        message: `${key} is required`\n      });\n    }\n  }\n  return parsedData;\n}\nfunction parseUserInput(options, user, action) {\n  const schema = getAllFields(options, \"user\");\n  return parseInputData(user || {}, { fields: schema, action });\n}\nfunction parseAdditionalUserInput(options, user) {\n  const schema = getAllFields(options, \"user\");\n  return parseInputData(user || {}, { fields: schema });\n}\nfunction parseAccountInput(options, account) {\n  const schema = getAllFields(options, \"account\");\n  return parseInputData(account, { fields: schema });\n}\nfunction parseSessionInput(options, session) {\n  const schema = getAllFields(options, \"session\");\n  return parseInputData(session, { fields: schema });\n}\nfunction mergeSchema(schema, newSchema) {\n  if (!newSchema) {\n    return schema;\n  }\n  for (const table in newSchema) {\n    const newModelName = newSchema[table]?.modelName;\n    if (newModelName) {\n      schema[table].modelName = newModelName;\n    }\n    for (const field in schema[table].fields) {\n      const newField = newSchema[table]?.fields?.[field];\n      if (!newField) {\n        continue;\n      }\n      schema[table].fields[field].fieldName = newField;\n    }\n  }\n  return schema;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9zaGFyZWQvYmV0dGVyLWF1dGguRGN2OFBTN1QubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBNEI7QUFDVzs7QUFFdkMsbUJBQW1CLDBDQUFRO0FBQzNCLE1BQU0sMENBQVE7QUFDZCxhQUFhLHdDQUFNO0FBQ25CLGFBQWEsd0NBQU07QUFDbkIsQ0FBQztBQUNEO0FBQ0EsY0FBYywwQ0FBUTtBQUN0QixhQUFhLDBDQUFRO0FBQ3JCLFVBQVUsMENBQWU7QUFDekIsZUFBZSwwQ0FBUTtBQUN2QixnQkFBZ0IsMENBQVE7QUFDeEIsV0FBVywwQ0FBUTtBQUNuQjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isd0NBQU07QUFDOUI7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHdDQUFNO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLFNBQVMsMENBQVE7QUFDakI7QUFDQTtBQUNBO0FBQ0EsWUFBWSwwQ0FBUTtBQUNwQixDQUFDO0FBQ0Q7QUFDQSxTQUFTLDBDQUFRO0FBQ2pCLGlCQUFpQiwyQ0FBUztBQUMxQixRQUFRLDBDQUFRO0FBQ2hCLFNBQVMsMENBQVE7QUFDakIsQ0FBQztBQUNEO0FBQ0EsVUFBVSwwQ0FBZTtBQUN6QixhQUFhLHdDQUFNO0FBQ25CLFNBQVMsMENBQVE7QUFDakIsYUFBYSwwQ0FBUTtBQUNyQixhQUFhLDBDQUFRO0FBQ3JCLENBQUM7QUFDRDtBQUNBLFNBQVMsMENBQVE7QUFDakIsYUFBYSx3Q0FBTTtBQUNuQixjQUFjLDBDQUFRO0FBQ3RCLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQ7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxnQkFBZ0I7QUFDakQ7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLGdCQUFnQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsZ0JBQWdCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixpREFBUTtBQUN4QixvQkFBb0IsS0FBSztBQUN6QixPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLElBQUksd0JBQXdCO0FBQzlEO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxJQUFJLGdCQUFnQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsZ0JBQWdCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxnQkFBZ0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFeVciLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYW1hYW5cXE9uZURyaXZlXFxEZXNrdG9wXFxLYW5kaWRfMlxcTmV3IGZvbGRlciAoMilcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHNoYXJlZFxcYmV0dGVyLWF1dGguRGN2OFBTN1QubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHogZnJvbSAnem9kL3Y0JztcbmltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSAnYmV0dGVyLWNhbGwnO1xuXG5jb25zdCBjb3JlU2NoZW1hID0gei5vYmplY3Qoe1xuICBpZDogei5zdHJpbmcoKSxcbiAgY3JlYXRlZEF0OiB6LmRhdGUoKS5kZWZhdWx0KCgpID0+IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKSxcbiAgdXBkYXRlZEF0OiB6LmRhdGUoKS5kZWZhdWx0KCgpID0+IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKVxufSk7XG5jb25zdCBhY2NvdW50U2NoZW1hID0gY29yZVNjaGVtYS5leHRlbmQoe1xuICBwcm92aWRlcklkOiB6LnN0cmluZygpLFxuICBhY2NvdW50SWQ6IHouc3RyaW5nKCksXG4gIHVzZXJJZDogei5jb2VyY2Uuc3RyaW5nKCksXG4gIGFjY2Vzc1Rva2VuOiB6LnN0cmluZygpLm51bGxpc2goKSxcbiAgcmVmcmVzaFRva2VuOiB6LnN0cmluZygpLm51bGxpc2goKSxcbiAgaWRUb2tlbjogei5zdHJpbmcoKS5udWxsaXNoKCksXG4gIC8qKlxuICAgKiBBY2Nlc3MgdG9rZW4gZXhwaXJlcyBhdFxuICAgKi9cbiAgYWNjZXNzVG9rZW5FeHBpcmVzQXQ6IHouZGF0ZSgpLm51bGxpc2goKSxcbiAgLyoqXG4gICAqIFJlZnJlc2ggdG9rZW4gZXhwaXJlcyBhdFxuICAgKi9cbiAgcmVmcmVzaFRva2VuRXhwaXJlc0F0OiB6LmRhdGUoKS5udWxsaXNoKCksXG4gIC8qKlxuICAgKiBUaGUgc2NvcGVzIHRoYXQgdGhlIHVzZXIgaGFzIGF1dGhvcml6ZWRcbiAgICovXG4gIHNjb3BlOiB6LnN0cmluZygpLm51bGxpc2goKSxcbiAgLyoqXG4gICAqIFBhc3N3b3JkIGlzIG9ubHkgc3RvcmVkIGluIHRoZSBjcmVkZW50aWFsIHByb3ZpZGVyXG4gICAqL1xuICBwYXNzd29yZDogei5zdHJpbmcoKS5udWxsaXNoKClcbn0pO1xuY29uc3QgdXNlclNjaGVtYSA9IGNvcmVTY2hlbWEuZXh0ZW5kKHtcbiAgZW1haWw6IHouc3RyaW5nKCkudHJhbnNmb3JtKCh2YWwpID0+IHZhbC50b0xvd2VyQ2FzZSgpKSxcbiAgZW1haWxWZXJpZmllZDogei5ib29sZWFuKCkuZGVmYXVsdChmYWxzZSksXG4gIG5hbWU6IHouc3RyaW5nKCksXG4gIGltYWdlOiB6LnN0cmluZygpLm51bGxpc2goKVxufSk7XG5jb25zdCBzZXNzaW9uU2NoZW1hID0gY29yZVNjaGVtYS5leHRlbmQoe1xuICB1c2VySWQ6IHouY29lcmNlLnN0cmluZygpLFxuICBleHBpcmVzQXQ6IHouZGF0ZSgpLFxuICB0b2tlbjogei5zdHJpbmcoKSxcbiAgaXBBZGRyZXNzOiB6LnN0cmluZygpLm51bGxpc2goKSxcbiAgdXNlckFnZW50OiB6LnN0cmluZygpLm51bGxpc2goKVxufSk7XG5jb25zdCB2ZXJpZmljYXRpb25TY2hlbWEgPSBjb3JlU2NoZW1hLmV4dGVuZCh7XG4gIHZhbHVlOiB6LnN0cmluZygpLFxuICBleHBpcmVzQXQ6IHouZGF0ZSgpLFxuICBpZGVudGlmaWVyOiB6LnN0cmluZygpXG59KTtcbmZ1bmN0aW9uIHBhcnNlT3V0cHV0RGF0YShkYXRhLCBzY2hlbWEpIHtcbiAgY29uc3QgZmllbGRzID0gc2NoZW1hLmZpZWxkcztcbiAgY29uc3QgcGFyc2VkRGF0YSA9IHt9O1xuICBmb3IgKGNvbnN0IGtleSBpbiBkYXRhKSB7XG4gICAgY29uc3QgZmllbGQgPSBmaWVsZHNba2V5XTtcbiAgICBpZiAoIWZpZWxkKSB7XG4gICAgICBwYXJzZWREYXRhW2tleV0gPSBkYXRhW2tleV07XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKGZpZWxkLnJldHVybmVkID09PSBmYWxzZSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIHBhcnNlZERhdGFba2V5XSA9IGRhdGFba2V5XTtcbiAgfVxuICByZXR1cm4gcGFyc2VkRGF0YTtcbn1cbmZ1bmN0aW9uIGdldEFsbEZpZWxkcyhvcHRpb25zLCB0YWJsZSkge1xuICBsZXQgc2NoZW1hID0ge1xuICAgIC4uLnRhYmxlID09PSBcInVzZXJcIiA/IG9wdGlvbnMudXNlcj8uYWRkaXRpb25hbEZpZWxkcyA6IHt9LFxuICAgIC4uLnRhYmxlID09PSBcInNlc3Npb25cIiA/IG9wdGlvbnMuc2Vzc2lvbj8uYWRkaXRpb25hbEZpZWxkcyA6IHt9XG4gIH07XG4gIGZvciAoY29uc3QgcGx1Z2luIG9mIG9wdGlvbnMucGx1Z2lucyB8fCBbXSkge1xuICAgIGlmIChwbHVnaW4uc2NoZW1hICYmIHBsdWdpbi5zY2hlbWFbdGFibGVdKSB7XG4gICAgICBzY2hlbWEgPSB7XG4gICAgICAgIC4uLnNjaGVtYSxcbiAgICAgICAgLi4ucGx1Z2luLnNjaGVtYVt0YWJsZV0uZmllbGRzXG4gICAgICB9O1xuICAgIH1cbiAgfVxuICByZXR1cm4gc2NoZW1hO1xufVxuZnVuY3Rpb24gcGFyc2VVc2VyT3V0cHV0KG9wdGlvbnMsIHVzZXIpIHtcbiAgY29uc3Qgc2NoZW1hID0gZ2V0QWxsRmllbGRzKG9wdGlvbnMsIFwidXNlclwiKTtcbiAgcmV0dXJuIHBhcnNlT3V0cHV0RGF0YSh1c2VyLCB7IGZpZWxkczogc2NoZW1hIH0pO1xufVxuZnVuY3Rpb24gcGFyc2VBY2NvdW50T3V0cHV0KG9wdGlvbnMsIGFjY291bnQpIHtcbiAgY29uc3Qgc2NoZW1hID0gZ2V0QWxsRmllbGRzKG9wdGlvbnMsIFwiYWNjb3VudFwiKTtcbiAgcmV0dXJuIHBhcnNlT3V0cHV0RGF0YShhY2NvdW50LCB7IGZpZWxkczogc2NoZW1hIH0pO1xufVxuZnVuY3Rpb24gcGFyc2VTZXNzaW9uT3V0cHV0KG9wdGlvbnMsIHNlc3Npb24pIHtcbiAgY29uc3Qgc2NoZW1hID0gZ2V0QWxsRmllbGRzKG9wdGlvbnMsIFwic2Vzc2lvblwiKTtcbiAgcmV0dXJuIHBhcnNlT3V0cHV0RGF0YShzZXNzaW9uLCB7IGZpZWxkczogc2NoZW1hIH0pO1xufVxuZnVuY3Rpb24gcGFyc2VJbnB1dERhdGEoZGF0YSwgc2NoZW1hKSB7XG4gIGNvbnN0IGFjdGlvbiA9IHNjaGVtYS5hY3Rpb24gfHwgXCJjcmVhdGVcIjtcbiAgY29uc3QgZmllbGRzID0gc2NoZW1hLmZpZWxkcztcbiAgY29uc3QgcGFyc2VkRGF0YSA9IHt9O1xuICBmb3IgKGNvbnN0IGtleSBpbiBmaWVsZHMpIHtcbiAgICBpZiAoa2V5IGluIGRhdGEpIHtcbiAgICAgIGlmIChmaWVsZHNba2V5XS5pbnB1dCA9PT0gZmFsc2UpIHtcbiAgICAgICAgaWYgKGZpZWxkc1trZXldLmRlZmF1bHRWYWx1ZSkge1xuICAgICAgICAgIHBhcnNlZERhdGFba2V5XSA9IGZpZWxkc1trZXldLmRlZmF1bHRWYWx1ZTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChmaWVsZHNba2V5XS52YWxpZGF0b3I/LmlucHV0ICYmIGRhdGFba2V5XSAhPT0gdm9pZCAwKSB7XG4gICAgICAgIHBhcnNlZERhdGFba2V5XSA9IGZpZWxkc1trZXldLnZhbGlkYXRvci5pbnB1dC5wYXJzZShkYXRhW2tleV0pO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChmaWVsZHNba2V5XS50cmFuc2Zvcm0/LmlucHV0ICYmIGRhdGFba2V5XSAhPT0gdm9pZCAwKSB7XG4gICAgICAgIHBhcnNlZERhdGFba2V5XSA9IGZpZWxkc1trZXldLnRyYW5zZm9ybT8uaW5wdXQoZGF0YVtrZXldKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBwYXJzZWREYXRhW2tleV0gPSBkYXRhW2tleV07XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKGZpZWxkc1trZXldLmRlZmF1bHRWYWx1ZSAmJiBhY3Rpb24gPT09IFwiY3JlYXRlXCIpIHtcbiAgICAgIHBhcnNlZERhdGFba2V5XSA9IGZpZWxkc1trZXldLmRlZmF1bHRWYWx1ZTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAoZmllbGRzW2tleV0ucmVxdWlyZWQgJiYgYWN0aW9uID09PSBcImNyZWF0ZVwiKSB7XG4gICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG4gICAgICAgIG1lc3NhZ2U6IGAke2tleX0gaXMgcmVxdWlyZWRgXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHBhcnNlZERhdGE7XG59XG5mdW5jdGlvbiBwYXJzZVVzZXJJbnB1dChvcHRpb25zLCB1c2VyLCBhY3Rpb24pIHtcbiAgY29uc3Qgc2NoZW1hID0gZ2V0QWxsRmllbGRzKG9wdGlvbnMsIFwidXNlclwiKTtcbiAgcmV0dXJuIHBhcnNlSW5wdXREYXRhKHVzZXIgfHwge30sIHsgZmllbGRzOiBzY2hlbWEsIGFjdGlvbiB9KTtcbn1cbmZ1bmN0aW9uIHBhcnNlQWRkaXRpb25hbFVzZXJJbnB1dChvcHRpb25zLCB1c2VyKSB7XG4gIGNvbnN0IHNjaGVtYSA9IGdldEFsbEZpZWxkcyhvcHRpb25zLCBcInVzZXJcIik7XG4gIHJldHVybiBwYXJzZUlucHV0RGF0YSh1c2VyIHx8IHt9LCB7IGZpZWxkczogc2NoZW1hIH0pO1xufVxuZnVuY3Rpb24gcGFyc2VBY2NvdW50SW5wdXQob3B0aW9ucywgYWNjb3VudCkge1xuICBjb25zdCBzY2hlbWEgPSBnZXRBbGxGaWVsZHMob3B0aW9ucywgXCJhY2NvdW50XCIpO1xuICByZXR1cm4gcGFyc2VJbnB1dERhdGEoYWNjb3VudCwgeyBmaWVsZHM6IHNjaGVtYSB9KTtcbn1cbmZ1bmN0aW9uIHBhcnNlU2Vzc2lvbklucHV0KG9wdGlvbnMsIHNlc3Npb24pIHtcbiAgY29uc3Qgc2NoZW1hID0gZ2V0QWxsRmllbGRzKG9wdGlvbnMsIFwic2Vzc2lvblwiKTtcbiAgcmV0dXJuIHBhcnNlSW5wdXREYXRhKHNlc3Npb24sIHsgZmllbGRzOiBzY2hlbWEgfSk7XG59XG5mdW5jdGlvbiBtZXJnZVNjaGVtYShzY2hlbWEsIG5ld1NjaGVtYSkge1xuICBpZiAoIW5ld1NjaGVtYSkge1xuICAgIHJldHVybiBzY2hlbWE7XG4gIH1cbiAgZm9yIChjb25zdCB0YWJsZSBpbiBuZXdTY2hlbWEpIHtcbiAgICBjb25zdCBuZXdNb2RlbE5hbWUgPSBuZXdTY2hlbWFbdGFibGVdPy5tb2RlbE5hbWU7XG4gICAgaWYgKG5ld01vZGVsTmFtZSkge1xuICAgICAgc2NoZW1hW3RhYmxlXS5tb2RlbE5hbWUgPSBuZXdNb2RlbE5hbWU7XG4gICAgfVxuICAgIGZvciAoY29uc3QgZmllbGQgaW4gc2NoZW1hW3RhYmxlXS5maWVsZHMpIHtcbiAgICAgIGNvbnN0IG5ld0ZpZWxkID0gbmV3U2NoZW1hW3RhYmxlXT8uZmllbGRzPy5bZmllbGRdO1xuICAgICAgaWYgKCFuZXdGaWVsZCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHNjaGVtYVt0YWJsZV0uZmllbGRzW2ZpZWxkXS5maWVsZE5hbWUgPSBuZXdGaWVsZDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHNjaGVtYTtcbn1cblxuZXhwb3J0IHsgYWNjb3VudFNjaGVtYSBhcyBhLCBwYXJzZVVzZXJPdXRwdXQgYXMgYiwgY29yZVNjaGVtYSBhcyBjLCBwYXJzZUFjY291bnRPdXRwdXQgYXMgZCwgcGFyc2VTZXNzaW9uT3V0cHV0IGFzIGUsIHBhcnNlSW5wdXREYXRhIGFzIGYsIGdldEFsbEZpZWxkcyBhcyBnLCBwYXJzZVVzZXJJbnB1dCBhcyBoLCBwYXJzZUFkZGl0aW9uYWxVc2VySW5wdXQgYXMgaSwgcGFyc2VBY2NvdW50SW5wdXQgYXMgaiwgcGFyc2VTZXNzaW9uSW5wdXQgYXMgaywgbWVyZ2VTY2hlbWEgYXMgbSwgcGFyc2VPdXRwdXREYXRhIGFzIHAsIHNlc3Npb25TY2hlbWEgYXMgcywgdXNlclNjaGVtYSBhcyB1LCB2ZXJpZmljYXRpb25TY2hlbWEgYXMgdiB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/shared/better-auth.Dcv8PS7T.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/shared/better-auth.DdzSJf-n.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/shared/better-auth.DdzSJf-n.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   B: () => (/* binding */ BetterAuthError),\n/* harmony export */   M: () => (/* binding */ MissingDependencyError)\n/* harmony export */ });\nclass BetterAuthError extends Error {\n  constructor(message, cause) {\n    super(message);\n    this.name = \"BetterAuthError\";\n    this.message = message;\n    this.cause = cause;\n    this.stack = \"\";\n  }\n}\nclass MissingDependencyError extends BetterAuthError {\n  constructor(pkgName) {\n    super(\n      `The package \"${pkgName}\" is required. Make sure it is installed.`,\n      pkgName\n    );\n  }\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9zaGFyZWQvYmV0dGVyLWF1dGguRGR6U0pmLW4ubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLFFBQVE7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7O0FBRTZEIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFtYWFuXFxPbmVEcml2ZVxcRGVza3RvcFxcS2FuZGlkXzJcXE5ldyBmb2xkZXIgKDIpXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxzaGFyZWRcXGJldHRlci1hdXRoLkRkelNKZi1uLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBCZXR0ZXJBdXRoRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGNhdXNlKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5uYW1lID0gXCJCZXR0ZXJBdXRoRXJyb3JcIjtcbiAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgIHRoaXMuY2F1c2UgPSBjYXVzZTtcbiAgICB0aGlzLnN0YWNrID0gXCJcIjtcbiAgfVxufVxuY2xhc3MgTWlzc2luZ0RlcGVuZGVuY3lFcnJvciBleHRlbmRzIEJldHRlckF1dGhFcnJvciB7XG4gIGNvbnN0cnVjdG9yKHBrZ05hbWUpIHtcbiAgICBzdXBlcihcbiAgICAgIGBUaGUgcGFja2FnZSBcIiR7cGtnTmFtZX1cIiBpcyByZXF1aXJlZC4gTWFrZSBzdXJlIGl0IGlzIGluc3RhbGxlZC5gLFxuICAgICAgcGtnTmFtZVxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IHsgQmV0dGVyQXV0aEVycm9yIGFzIEIsIE1pc3NpbmdEZXBlbmRlbmN5RXJyb3IgYXMgTSB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/shared/better-auth.DdzSJf-n.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/shared/better-auth.DlWzob1-.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/shared/better-auth.DlWzob1-.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   b: () => (/* binding */ betterAuth),\n/* harmony export */   c: () => (/* binding */ createTelemetry),\n/* harmony export */   g: () => (/* binding */ getTelemetryAuthConfig)\n/* harmony export */ });\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var defu__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! defu */ \"(rsc)/./node_modules/defu/dist/defu.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../crypto/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _better_auth_CSVCtb77_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./better-auth.CSVCtb77.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.CSVCtb77.mjs\");\n/* harmony import */ var _better_auth_B_PTVODM_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./better-auth.B_PTVODM.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.B_PTVODM.mjs\");\n/* harmony import */ var _better_auth_Dcv8PS7T_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./better-auth.Dcv8PS7T.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.Dcv8PS7T.mjs\");\n/* harmony import */ var _better_auth_UfVWArIB_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./better-auth.UfVWArIB.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.UfVWArIB.mjs\");\n/* harmony import */ var _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./better-auth.BjBlybv-.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.BjBlybv-.mjs\");\n/* harmony import */ var _better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./better-auth.nqWf7zUe.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.nqWf7zUe.mjs\");\n/* harmony import */ var _better_auth_BUPPRXfK_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./better-auth.BUPPRXfK.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.BUPPRXfK.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.js\");\n/* harmony import */ var _better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @better-auth/utils/hash */ \"(rsc)/./node_modules/@better-auth/utils/dist/hash.mjs\");\n/* harmony import */ var _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @better-auth/utils/base64 */ \"(rsc)/./node_modules/@better-auth/utils/dist/base64.mjs\");\n/* harmony import */ var _better_auth_B4Qoxdgc_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./better-auth.B4Qoxdgc.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.B4Qoxdgc.mjs\");\n/* harmony import */ var _better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./better-auth.CMQ3rA-I.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.CMQ3rA-I.mjs\");\n/* harmony import */ var _better_auth_YwDQhoPc_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./better-auth.YwDQhoPc.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.YwDQhoPc.mjs\");\n/* harmony import */ var _better_auth_CuS_eDdK_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./better-auth.CuS_eDdK.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.CuS_eDdK.mjs\");\n/* harmony import */ var _better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./better-auth.DdzSJf-n.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.DdzSJf-n.mjs\");\n/* harmony import */ var _better_auth_utils__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @better-auth/utils */ \"(rsc)/./node_modules/@better-auth/utils/dist/index.mjs\");\n/* harmony import */ var _better_auth_utils_hex__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @better-auth/utils/hex */ \"(rsc)/./node_modules/@better-auth/utils/dist/hex.mjs\");\n/* harmony import */ var _better_fetch_fetch__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @better-fetch/fetch */ \"(rsc)/./node_modules/@better-fetch/fetch/dist/index.js\");\n/* harmony import */ var _better_auth_utils_random__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @better-auth/utils/random */ \"(rsc)/./node_modules/@better-auth/utils/dist/random.mjs\");\n/* harmony import */ var _better_auth_B8b3lep0_mjs__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./better-auth.B8b3lep0.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.B8b3lep0.mjs\");\n/* harmony import */ var _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./better-auth.DV5EHeYG.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.DV5EHeYG.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst DEFAULT_SECRET = \"better-auth-secret-123456789\";\n\nlet packageJSONCache;\nasync function readRootPackageJson() {\n  if (packageJSONCache) return packageJSONCache;\n  try {\n    const cwd = typeof process !== \"undefined\" && typeof process.cwd === \"function\" ? process.cwd() : \"\";\n    if (!cwd) return void 0;\n    const importRuntime = (m) => Function(\"mm\", \"return import(mm)\")(m);\n    const [{ default: fs }, { default: path }] = await Promise.all([\n      importRuntime(\"fs/promises\"),\n      importRuntime(\"path\")\n    ]);\n    const raw = await fs.readFile(path.join(cwd, \"package.json\"), \"utf-8\");\n    packageJSONCache = JSON.parse(raw);\n    return packageJSONCache;\n  } catch {\n  }\n  return void 0;\n}\nasync function getPackageVersion(pkg) {\n  if (packageJSONCache) {\n    return packageJSONCache.dependencies?.[pkg] || packageJSONCache.devDependencies?.[pkg] || packageJSONCache.peerDependencies?.[pkg];\n  }\n  try {\n    const cwd = typeof process !== \"undefined\" && typeof process.cwd === \"function\" ? process.cwd() : \"\";\n    if (!cwd) throw new Error(\"no-cwd\");\n    const importRuntime = (m) => Function(\"mm\", \"return import(mm)\")(m);\n    const [{ default: fs }, { default: path }] = await Promise.all([\n      importRuntime(\"fs/promises\"),\n      importRuntime(\"path\")\n    ]);\n    const pkgJsonPath = path.join(cwd, \"node_modules\", pkg, \"package.json\");\n    const raw = await fs.readFile(pkgJsonPath, \"utf-8\");\n    const json = JSON.parse(raw);\n    const resolved = json.version || await getVersionFromLocalPackageJson(pkg) || void 0;\n    return resolved;\n  } catch {\n  }\n  const fromRoot = await getVersionFromLocalPackageJson(pkg);\n  return fromRoot;\n}\nasync function getVersionFromLocalPackageJson(pkg) {\n  const json = await readRootPackageJson();\n  if (!json) return void 0;\n  const allDeps = {\n    ...json.dependencies,\n    ...json.devDependencies,\n    ...json.peerDependencies\n  };\n  return allDeps[pkg];\n}\nasync function getNameFromLocalPackageJson() {\n  const json = await readRootPackageJson();\n  return json?.name;\n}\n\nlet projectIdCached = null;\nasync function getProjectId(baseUrl) {\n  if (projectIdCached) return projectIdCached;\n  const projectName = await getNameFromLocalPackageJson();\n  if (projectName) {\n    projectIdCached = await (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_2__.hashToBase64)(\n      baseUrl ? baseUrl + projectName : projectName\n    );\n    return projectIdCached;\n  }\n  if (baseUrl) {\n    projectIdCached = await (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_2__.hashToBase64)(baseUrl);\n    return projectIdCached;\n  }\n  projectIdCached = (0,_better_auth_BUPPRXfK_mjs__WEBPACK_IMPORTED_MODULE_9__.g)(32);\n  return projectIdCached;\n}\n\nconst importRuntime = (m) => {\n  return Function(\"mm\", \"return import(mm)\")(m);\n};\n\nfunction getVendor() {\n  const hasAny = (...keys) => keys.some((k) => Boolean(_better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_14__.e[k]));\n  if (hasAny(\"CF_PAGES\", \"CF_PAGES_URL\", \"CF_ACCOUNT_ID\") || typeof navigator !== \"undefined\" && navigator.userAgent === \"Cloudflare-Workers\") {\n    return \"cloudflare\";\n  }\n  if (hasAny(\"VERCEL\", \"VERCEL_URL\", \"VERCEL_ENV\")) return \"vercel\";\n  if (hasAny(\"NETLIFY\", \"NETLIFY_URL\")) return \"netlify\";\n  if (hasAny(\n    \"RENDER\",\n    \"RENDER_URL\",\n    \"RENDER_INTERNAL_HOSTNAME\",\n    \"RENDER_SERVICE_ID\"\n  )) {\n    return \"render\";\n  }\n  if (hasAny(\"AWS_LAMBDA_FUNCTION_NAME\", \"AWS_EXECUTION_ENV\", \"LAMBDA_TASK_ROOT\")) {\n    return \"aws\";\n  }\n  if (hasAny(\n    \"GOOGLE_CLOUD_FUNCTION_NAME\",\n    \"GOOGLE_CLOUD_PROJECT\",\n    \"GCP_PROJECT\",\n    \"K_SERVICE\"\n  )) {\n    return \"gcp\";\n  }\n  if (hasAny(\n    \"AZURE_FUNCTION_NAME\",\n    \"FUNCTIONS_WORKER_RUNTIME\",\n    \"WEBSITE_INSTANCE_ID\",\n    \"WEBSITE_SITE_NAME\"\n  )) {\n    return \"azure\";\n  }\n  if (hasAny(\"DENO_DEPLOYMENT_ID\", \"DENO_REGION\")) return \"deno-deploy\";\n  if (hasAny(\"FLY_APP_NAME\", \"FLY_REGION\", \"FLY_ALLOC_ID\")) return \"fly-io\";\n  if (hasAny(\"RAILWAY_STATIC_URL\", \"RAILWAY_ENVIRONMENT_NAME\"))\n    return \"railway\";\n  if (hasAny(\"DYNO\", \"HEROKU_APP_NAME\")) return \"heroku\";\n  if (hasAny(\"DO_DEPLOYMENT_ID\", \"DO_APP_NAME\", \"DIGITALOCEAN\"))\n    return \"digitalocean\";\n  if (hasAny(\"KOYEB\", \"KOYEB_DEPLOYMENT_ID\", \"KOYEB_APP_NAME\")) return \"koyeb\";\n  return null;\n}\nasync function detectSystemInfo() {\n  try {\n    if (getVendor() === \"cloudflare\") return \"cloudflare\";\n    const os = await importRuntime(\"os\");\n    const cpus = os.cpus();\n    return {\n      deploymentVendor: getVendor(),\n      systemPlatform: os.platform(),\n      systemRelease: os.release(),\n      systemArchitecture: os.arch(),\n      cpuCount: cpus.length,\n      cpuModel: cpus.length ? cpus[0].model : null,\n      cpuSpeed: cpus.length ? cpus[0].speed : null,\n      memory: os.totalmem(),\n      isWSL: await isWsl(),\n      isDocker: await isDocker(),\n      isTTY: typeof process !== \"undefined\" && process.stdout ? process.stdout.isTTY : null\n    };\n  } catch (e) {\n    return {\n      systemPlatform: null,\n      systemRelease: null,\n      systemArchitecture: null,\n      cpuCount: null,\n      cpuModel: null,\n      cpuSpeed: null,\n      memory: null,\n      isWSL: null,\n      isDocker: null,\n      isTTY: null\n    };\n  }\n}\nlet isDockerCached;\nasync function hasDockerEnv() {\n  if (getVendor() === \"cloudflare\") return false;\n  try {\n    const fs = await importRuntime(\"fs\");\n    fs.statSync(\"/.dockerenv\");\n    return true;\n  } catch {\n    return false;\n  }\n}\nasync function hasDockerCGroup() {\n  if (getVendor() === \"cloudflare\") return false;\n  try {\n    const fs = await importRuntime(\"fs\");\n    return fs.readFileSync(\"/proc/self/cgroup\", \"utf8\").includes(\"docker\");\n  } catch {\n    return false;\n  }\n}\nasync function isDocker() {\n  if (getVendor() === \"cloudflare\") return false;\n  if (isDockerCached === void 0) {\n    isDockerCached = await hasDockerEnv() || await hasDockerCGroup();\n  }\n  return isDockerCached;\n}\nasync function isWsl() {\n  try {\n    if (getVendor() === \"cloudflare\") return false;\n    if (typeof process === \"undefined\" || process.platform !== \"linux\") {\n      return false;\n    }\n    const fs = await importRuntime(\"fs\");\n    const os = await importRuntime(\"os\");\n    if (os.release().toLowerCase().includes(\"microsoft\")) {\n      if (await isInsideContainer()) {\n        return false;\n      }\n      return true;\n    }\n    return fs.readFileSync(\"/proc/version\", \"utf8\").toLowerCase().includes(\"microsoft\") ? !await isInsideContainer() : false;\n  } catch {\n    return false;\n  }\n}\nlet isInsideContainerCached;\nconst hasContainerEnv = async () => {\n  if (getVendor() === \"cloudflare\") return false;\n  try {\n    const fs = await importRuntime(\"fs\");\n    fs.statSync(\"/run/.containerenv\");\n    return true;\n  } catch {\n    return false;\n  }\n};\nasync function isInsideContainer() {\n  if (isInsideContainerCached === void 0) {\n    isInsideContainerCached = await hasContainerEnv() || await isDocker();\n  }\n  return isInsideContainerCached;\n}\nfunction isCI() {\n  return _better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_14__.e.CI !== \"false\" && (\"BUILD_ID\" in _better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_14__.e || // Jenkins, Cloudbees\n  \"BUILD_NUMBER\" in _better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_14__.e || // Jenkins, TeamCity (fixed typo: extra space removed)\n  \"CI\" in _better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_14__.e || // Travis CI, CircleCI, Cirrus CI, Gitlab CI, Appveyor, CodeShip, dsari, Cloudflare\n  \"CI_APP_ID\" in _better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_14__.e || // Appflow\n  \"CI_BUILD_ID\" in _better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_14__.e || // Appflow\n  \"CI_BUILD_NUMBER\" in _better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_14__.e || // Appflow\n  \"CI_NAME\" in _better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_14__.e || // Codeship and others\n  \"CONTINUOUS_INTEGRATION\" in _better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_14__.e || // Travis CI, Cirrus CI\n  \"RUN_ID\" in _better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_14__.e);\n}\n\nfunction detectRuntime() {\n  if (typeof Deno !== \"undefined\") {\n    const denoVersion = Deno?.version?.deno ?? null;\n    return { name: \"deno\", version: denoVersion };\n  }\n  if (typeof Bun !== \"undefined\") {\n    const bunVersion = Bun?.version ?? null;\n    return { name: \"bun\", version: bunVersion };\n  }\n  if (typeof process !== \"undefined\" && process?.versions?.node) {\n    return { name: \"node\", version: process.versions.node ?? null };\n  }\n  return { name: \"edge\", version: null };\n}\nfunction detectEnvironment() {\n  return (0,_better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_14__.g)(\"NODE_ENV\") === \"production\" ? \"production\" : isCI() ? \"ci\" : (0,_better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_14__.i)() ? \"test\" : \"development\";\n}\n\nconst DATABASES = {\n  pg: \"postgresql\",\n  mysql: \"mysql\",\n  mariadb: \"mariadb\",\n  sqlite3: \"sqlite\",\n  \"better-sqlite3\": \"sqlite\",\n  \"@prisma/client\": \"prisma\",\n  mongoose: \"mongodb\",\n  mongodb: \"mongodb\",\n  \"drizzle-orm\": \"drizzle\"\n};\nasync function detectDatabase() {\n  for (const [pkg, name] of Object.entries(DATABASES)) {\n    const version = await getPackageVersion(pkg);\n    if (version) return { name, version };\n  }\n  return void 0;\n}\n\nconst FRAMEWORKS = {\n  next: \"next\",\n  nuxt: \"nuxt\",\n  \"@remix-run/server-runtime\": \"remix\",\n  astro: \"astro\",\n  \"@sveltejs/kit\": \"sveltekit\",\n  \"solid-start\": \"solid-start\",\n  \"tanstack-start\": \"tanstack-start\",\n  hono: \"hono\",\n  express: \"express\",\n  elysia: \"elysia\",\n  expo: \"expo\"\n};\nasync function detectFramework() {\n  for (const [pkg, name] of Object.entries(FRAMEWORKS)) {\n    const version = await getPackageVersion(pkg);\n    if (version) return { name, version };\n  }\n  return void 0;\n}\n\nfunction detectPackageManager() {\n  const userAgent = _better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_14__.e.npm_config_user_agent;\n  if (!userAgent) {\n    return void 0;\n  }\n  const pmSpec = userAgent.split(\" \")[0];\n  const separatorPos = pmSpec.lastIndexOf(\"/\");\n  const name = pmSpec.substring(0, separatorPos);\n  return {\n    name: name === \"npminstall\" ? \"cnpm\" : name,\n    version: pmSpec.substring(separatorPos + 1)\n  };\n}\n\nfunction getTelemetryAuthConfig(options, context) {\n  return {\n    database: context?.database,\n    adapter: context?.adapter,\n    emailVerification: {\n      sendVerificationEmail: !!options.emailVerification?.sendVerificationEmail,\n      sendOnSignUp: !!options.emailVerification?.sendOnSignUp,\n      sendOnSignIn: !!options.emailVerification?.sendOnSignIn,\n      autoSignInAfterVerification: !!options.emailVerification?.autoSignInAfterVerification,\n      expiresIn: options.emailVerification?.expiresIn,\n      onEmailVerification: !!options.emailVerification?.onEmailVerification,\n      afterEmailVerification: !!options.emailVerification?.afterEmailVerification\n    },\n    emailAndPassword: {\n      enabled: !!options.emailAndPassword?.enabled,\n      disableSignUp: !!options.emailAndPassword?.disableSignUp,\n      requireEmailVerification: !!options.emailAndPassword?.requireEmailVerification,\n      maxPasswordLength: options.emailAndPassword?.maxPasswordLength,\n      minPasswordLength: options.emailAndPassword?.minPasswordLength,\n      sendResetPassword: !!options.emailAndPassword?.sendResetPassword,\n      resetPasswordTokenExpiresIn: options.emailAndPassword?.resetPasswordTokenExpiresIn,\n      onPasswordReset: !!options.emailAndPassword?.onPasswordReset,\n      password: {\n        hash: !!options.emailAndPassword?.password?.hash,\n        verify: !!options.emailAndPassword?.password?.verify\n      },\n      autoSignIn: !!options.emailAndPassword?.autoSignIn,\n      revokeSessionsOnPasswordReset: !!options.emailAndPassword?.revokeSessionsOnPasswordReset\n    },\n    socialProviders: Object.keys(options.socialProviders || {}).map((p) => {\n      const provider = options.socialProviders?.[p];\n      if (!provider) return {};\n      return {\n        id: p,\n        mapProfileToUser: !!provider.mapProfileToUser,\n        disableDefaultScope: !!provider.disableDefaultScope,\n        disableIdTokenSignIn: !!provider.disableIdTokenSignIn,\n        disableImplicitSignUp: provider.disableImplicitSignUp,\n        disableSignUp: provider.disableSignUp,\n        getUserInfo: !!provider.getUserInfo,\n        overrideUserInfoOnSignIn: !!provider.overrideUserInfoOnSignIn,\n        prompt: provider.prompt,\n        verifyIdToken: !!provider.verifyIdToken,\n        scope: provider.scope,\n        refreshAccessToken: !!provider.refreshAccessToken\n      };\n    }),\n    plugins: options.plugins?.map((p) => p.id.toString()),\n    user: {\n      modelName: options.user?.modelName,\n      fields: options.user?.fields,\n      additionalFields: options.user?.additionalFields,\n      changeEmail: {\n        enabled: options.user?.changeEmail?.enabled,\n        sendChangeEmailVerification: !!options.user?.changeEmail?.sendChangeEmailVerification\n      }\n    },\n    verification: {\n      modelName: options.verification?.modelName,\n      disableCleanup: options.verification?.disableCleanup,\n      fields: options.verification?.fields\n    },\n    session: {\n      modelName: options.session?.modelName,\n      additionalFields: options.session?.additionalFields,\n      cookieCache: {\n        enabled: options.session?.cookieCache?.enabled,\n        maxAge: options.session?.cookieCache?.maxAge\n      },\n      disableSessionRefresh: options.session?.disableSessionRefresh,\n      expiresIn: options.session?.expiresIn,\n      fields: options.session?.fields,\n      freshAge: options.session?.freshAge,\n      preserveSessionInDatabase: options.session?.preserveSessionInDatabase,\n      storeSessionInDatabase: options.session?.storeSessionInDatabase,\n      updateAge: options.session?.updateAge\n    },\n    account: {\n      modelName: options.account?.modelName,\n      fields: options.account?.fields,\n      encryptOAuthTokens: options.account?.encryptOAuthTokens,\n      updateAccountOnSignIn: options.account?.updateAccountOnSignIn,\n      accountLinking: {\n        enabled: options.account?.accountLinking?.enabled,\n        trustedProviders: options.account?.accountLinking?.trustedProviders,\n        updateUserInfoOnLink: options.account?.accountLinking?.updateUserInfoOnLink,\n        allowUnlinkingAll: options.account?.accountLinking?.allowUnlinkingAll\n      }\n    },\n    hooks: {\n      after: !!options.hooks?.after,\n      before: !!options.hooks?.before\n    },\n    secondaryStorage: !!options.secondaryStorage,\n    advanced: {\n      cookiePrefix: !!options.advanced?.cookiePrefix,\n      //this shouldn't be tracked\n      cookies: !!options.advanced?.cookies,\n      crossSubDomainCookies: {\n        domain: !!options.advanced?.crossSubDomainCookies?.domain,\n        enabled: options.advanced?.crossSubDomainCookies?.enabled,\n        additionalCookies: options.advanced?.crossSubDomainCookies?.additionalCookies\n      },\n      database: {\n        useNumberId: !!options.advanced?.database?.useNumberId,\n        generateId: options.advanced?.database?.generateId,\n        defaultFindManyLimit: options.advanced?.database?.defaultFindManyLimit\n      },\n      useSecureCookies: options.advanced?.useSecureCookies,\n      ipAddress: {\n        disableIpTracking: options.advanced?.ipAddress?.disableIpTracking,\n        ipAddressHeaders: options.advanced?.ipAddress?.ipAddressHeaders\n      },\n      disableCSRFCheck: options.advanced?.disableCSRFCheck,\n      cookieAttributes: {\n        expires: options.advanced?.defaultCookieAttributes?.expires,\n        secure: options.advanced?.defaultCookieAttributes?.secure,\n        sameSite: options.advanced?.defaultCookieAttributes?.sameSite,\n        domain: !!options.advanced?.defaultCookieAttributes?.domain,\n        path: options.advanced?.defaultCookieAttributes?.path,\n        httpOnly: options.advanced?.defaultCookieAttributes?.httpOnly\n      }\n    },\n    trustedOrigins: options.trustedOrigins?.length,\n    rateLimit: {\n      storage: options.rateLimit?.storage,\n      modelName: options.rateLimit?.modelName,\n      window: options.rateLimit?.window,\n      customStorage: !!options.rateLimit?.customStorage,\n      enabled: options.rateLimit?.enabled,\n      max: options.rateLimit?.max\n    },\n    onAPIError: {\n      errorURL: options.onAPIError?.errorURL,\n      onError: !!options.onAPIError?.onError,\n      throw: options.onAPIError?.throw\n    },\n    logger: {\n      disabled: options.logger?.disabled,\n      level: options.logger?.level,\n      log: !!options.logger?.log\n    },\n    databaseHooks: {\n      user: {\n        create: {\n          after: !!options.databaseHooks?.user?.create?.after,\n          before: !!options.databaseHooks?.user?.create?.before\n        },\n        update: {\n          after: !!options.databaseHooks?.user?.update?.after,\n          before: !!options.databaseHooks?.user?.update?.before\n        }\n      },\n      session: {\n        create: {\n          after: !!options.databaseHooks?.session?.create?.after,\n          before: !!options.databaseHooks?.session?.create?.before\n        },\n        update: {\n          after: !!options.databaseHooks?.session?.update?.after,\n          before: !!options.databaseHooks?.session?.update?.before\n        }\n      },\n      account: {\n        create: {\n          after: !!options.databaseHooks?.account?.create?.after,\n          before: !!options.databaseHooks?.account?.create?.before\n        },\n        update: {\n          after: !!options.databaseHooks?.account?.update?.after,\n          before: !!options.databaseHooks?.account?.update?.before\n        }\n      },\n      verification: {\n        create: {\n          after: !!options.databaseHooks?.verification?.create?.after,\n          before: !!options.databaseHooks?.verification?.create?.before\n        },\n        update: {\n          after: !!options.databaseHooks?.verification?.update?.after,\n          before: !!options.databaseHooks?.verification?.update?.before\n        }\n      }\n    }\n  };\n}\n\nasync function createTelemetry(options, context) {\n  const debugEnabled = options.telemetry?.debug || (0,_better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_14__.c)(\"BETTER_AUTH_TELEMETRY_DEBUG\", false);\n  const TELEMETRY_ENDPOINT = _better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_14__.E.BETTER_AUTH_TELEMETRY_ENDPOINT;\n  const track = async (event) => {\n    try {\n      if (context?.customTrack) {\n        await context.customTrack(event);\n      } else {\n        if (debugEnabled) {\n          await Promise.resolve(\n            _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_7__.a.info(\"telemetry event\", JSON.stringify(event, null, 2))\n          );\n        } else {\n          await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_20__.betterFetch)(TELEMETRY_ENDPOINT, {\n            method: \"POST\",\n            body: event\n          });\n        }\n      }\n    } catch {\n    }\n  };\n  const isEnabled = async () => {\n    const telemetryEnabled = options.telemetry?.enabled !== void 0 ? options.telemetry.enabled : false;\n    const envEnabled = (0,_better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_14__.c)(\"BETTER_AUTH_TELEMETRY\", false);\n    return (envEnabled || telemetryEnabled) && (context?.skipTestCheck || !(0,_better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_14__.i)());\n  };\n  const enabled = await isEnabled();\n  let anonymousId;\n  if (enabled) {\n    anonymousId = await getProjectId(options.baseURL);\n    const payload = {\n      config: getTelemetryAuthConfig(options),\n      runtime: detectRuntime(),\n      database: await detectDatabase(),\n      framework: await detectFramework(),\n      environment: detectEnvironment(),\n      systemInfo: await detectSystemInfo(),\n      packageManager: detectPackageManager()\n    };\n    void track({ type: \"init\", payload, anonymousId });\n  }\n  return {\n    publish: async (event) => {\n      if (!enabled) return;\n      if (!anonymousId) {\n        anonymousId = await getProjectId(options.baseURL);\n      }\n      await track({\n        type: event.type,\n        payload: event.payload,\n        anonymousId\n      });\n    }\n  };\n}\n\nconst init = async (options) => {\n  const adapter = await (0,_better_auth_CSVCtb77_mjs__WEBPACK_IMPORTED_MODULE_3__.a)(options);\n  const plugins = options.plugins || [];\n  const internalPlugins = getInternalPlugins(options);\n  const logger = (0,_better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_7__.c)(options.logger);\n  const baseURL = (0,_better_auth_CuS_eDdK_mjs__WEBPACK_IMPORTED_MODULE_16__.a)(options.baseURL, options.basePath);\n  const secret = options.secret || _better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_14__.e.BETTER_AUTH_SECRET || _better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_14__.e.AUTH_SECRET || DEFAULT_SECRET;\n  if (secret === DEFAULT_SECRET) {\n    if (_better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_14__.a) {\n      logger.error(\n        \"You are using the default secret. Please set `BETTER_AUTH_SECRET` in your environment variables or pass `secret` in your auth config.\"\n      );\n    }\n  }\n  options = {\n    ...options,\n    secret,\n    baseURL: baseURL ? new URL(baseURL).origin : \"\",\n    basePath: options.basePath || \"/api/auth\",\n    plugins: plugins.concat(internalPlugins)\n  };\n  (0,_api_index_mjs__WEBPACK_IMPORTED_MODULE_0__.checkEndpointConflicts)(options, logger);\n  const cookies = (0,_better_auth_UfVWArIB_mjs__WEBPACK_IMPORTED_MODULE_6__.g)(options);\n  const tables = (0,_better_auth_B_PTVODM_mjs__WEBPACK_IMPORTED_MODULE_4__.g)(options);\n  const providers = Object.entries(\n    options.socialProviders || {}\n  ).map(([key, config]) => {\n    if (config == null) {\n      return null;\n    }\n    if (config.enabled === false) {\n      return null;\n    }\n    if (!config.clientId) {\n      logger.warn(\n        `Social provider ${key} is missing clientId or clientSecret`\n      );\n    }\n    const provider = _better_auth_nqWf7zUe_mjs__WEBPACK_IMPORTED_MODULE_8__.U[key](config);\n    provider.disableImplicitSignUp = config.disableImplicitSignUp;\n    return provider;\n  }).filter((x) => x !== null);\n  const generateIdFunc = ({ model, size }) => {\n    if (typeof options.advanced?.generateId === \"function\") {\n      return options.advanced.generateId({ model, size });\n    }\n    if (typeof options?.advanced?.database?.generateId === \"function\") {\n      return options.advanced.database.generateId({ model, size });\n    }\n    return (0,_better_auth_BUPPRXfK_mjs__WEBPACK_IMPORTED_MODULE_9__.g)(size);\n  };\n  const { publish } = await createTelemetry(options, {\n    adapter: adapter.id,\n    database: typeof options.database === \"function\" ? \"adapter\" : (0,_better_auth_B8b3lep0_mjs__WEBPACK_IMPORTED_MODULE_22__.g)(options.database) || \"unknown\"\n  });\n  let ctx = {\n    appName: options.appName || \"Better Auth\",\n    socialProviders: providers,\n    options,\n    tables,\n    trustedOrigins: getTrustedOrigins(options),\n    baseURL: baseURL || \"\",\n    sessionConfig: {\n      updateAge: options.session?.updateAge !== void 0 ? options.session.updateAge : 24 * 60 * 60,\n      // 24 hours\n      expiresIn: options.session?.expiresIn || 60 * 60 * 24 * 7,\n      // 7 days\n      freshAge: options.session?.freshAge === void 0 ? 60 * 60 * 24 : options.session.freshAge\n    },\n    secret,\n    rateLimit: {\n      ...options.rateLimit,\n      enabled: options.rateLimit?.enabled ?? _better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_14__.a,\n      window: options.rateLimit?.window || 10,\n      max: options.rateLimit?.max || 100,\n      storage: options.rateLimit?.storage || (options.secondaryStorage ? \"secondary-storage\" : \"memory\")\n    },\n    authCookies: cookies,\n    logger,\n    generateId: generateIdFunc,\n    session: null,\n    secondaryStorage: options.secondaryStorage,\n    password: {\n      hash: options.emailAndPassword?.password?.hash || _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_2__.hashPassword,\n      verify: options.emailAndPassword?.password?.verify || _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_2__.verifyPassword,\n      config: {\n        minPasswordLength: options.emailAndPassword?.minPasswordLength || 8,\n        maxPasswordLength: options.emailAndPassword?.maxPasswordLength || 128\n      },\n      checkPassword: _better_auth_YwDQhoPc_mjs__WEBPACK_IMPORTED_MODULE_15__.c\n    },\n    setNewSession(session) {\n      this.newSession = session;\n    },\n    newSession: null,\n    adapter,\n    internalAdapter: (0,_better_auth_CSVCtb77_mjs__WEBPACK_IMPORTED_MODULE_3__.c)(adapter, {\n      options,\n      logger,\n      hooks: options.databaseHooks ? [options.databaseHooks] : []}),\n    createAuthCookie: (0,_better_auth_UfVWArIB_mjs__WEBPACK_IMPORTED_MODULE_6__.c)(options),\n    async runMigrations() {\n      if (!options.database || \"updateMany\" in options.database) {\n        throw new _better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_17__.B(\n          \"Database is not provided or it's an adapter. Migrations are only supported with a database instance.\"\n        );\n      }\n      const { runMigrations } = await (0,_better_auth_CSVCtb77_mjs__WEBPACK_IMPORTED_MODULE_3__.e)(options);\n      await runMigrations();\n    },\n    publishTelemetry: publish\n  };\n  let { context } = runPluginInit(ctx);\n  return context;\n};\nfunction runPluginInit(ctx) {\n  let options = ctx.options;\n  const plugins = options.plugins || [];\n  let context = ctx;\n  const dbHooks = [];\n  for (const plugin of plugins) {\n    if (plugin.init) {\n      const result = plugin.init(context);\n      if (typeof result === \"object\") {\n        if (result.options) {\n          const { databaseHooks, ...restOpts } = result.options;\n          if (databaseHooks) {\n            dbHooks.push(databaseHooks);\n          }\n          options = (0,defu__WEBPACK_IMPORTED_MODULE_1__.defu)(options, restOpts);\n        }\n        if (result.context) {\n          context = {\n            ...context,\n            ...result.context\n          };\n        }\n      }\n    }\n  }\n  dbHooks.push(options.databaseHooks);\n  context.internalAdapter = (0,_better_auth_CSVCtb77_mjs__WEBPACK_IMPORTED_MODULE_3__.c)(ctx.adapter, {\n    options,\n    logger: ctx.logger,\n    hooks: dbHooks.filter((u) => u !== void 0),\n    generateId: ctx.generateId\n  });\n  context.options = options;\n  return { context };\n}\nfunction getInternalPlugins(options) {\n  const plugins = [];\n  if (options.advanced?.crossSubDomainCookies?.enabled) ;\n  return plugins;\n}\nfunction getTrustedOrigins(options) {\n  const baseURL = (0,_better_auth_CuS_eDdK_mjs__WEBPACK_IMPORTED_MODULE_16__.a)(options.baseURL, options.basePath);\n  if (!baseURL) {\n    return [];\n  }\n  const trustedOrigins = [new URL(baseURL).origin];\n  if (options.trustedOrigins && Array.isArray(options.trustedOrigins)) {\n    trustedOrigins.push(...options.trustedOrigins);\n  }\n  const envTrustedOrigins = _better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_14__.e.BETTER_AUTH_TRUSTED_ORIGINS;\n  if (envTrustedOrigins) {\n    trustedOrigins.push(...envTrustedOrigins.split(\",\"));\n  }\n  if (trustedOrigins.filter((x) => !x).length) {\n    throw new _better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_17__.B(\n      \"A provided trusted origin is invalid, make sure your trusted origins list is properly defined.\"\n    );\n  }\n  return trustedOrigins;\n}\n\nconst betterAuth = (options) => {\n  const authContext = init(options);\n  const { api } = (0,_api_index_mjs__WEBPACK_IMPORTED_MODULE_0__.getEndpoints)(authContext, options);\n  const errorCodes = options.plugins?.reduce((acc, plugin) => {\n    if (plugin.$ERROR_CODES) {\n      return {\n        ...acc,\n        ...plugin.$ERROR_CODES\n      };\n    }\n    return acc;\n  }, {});\n  return {\n    handler: async (request) => {\n      const ctx = await authContext;\n      const basePath = ctx.options.basePath || \"/api/auth\";\n      if (!ctx.options.baseURL) {\n        const baseURL = (0,_better_auth_CuS_eDdK_mjs__WEBPACK_IMPORTED_MODULE_16__.a)(void 0, basePath, request);\n        if (baseURL) {\n          ctx.baseURL = baseURL;\n          ctx.options.baseURL = (0,_better_auth_CuS_eDdK_mjs__WEBPACK_IMPORTED_MODULE_16__.g)(ctx.baseURL) || void 0;\n        } else {\n          throw new _better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_17__.B(\n            \"Could not get base URL from request. Please provide a valid base URL.\"\n          );\n        }\n      }\n      ctx.trustedOrigins = [\n        ...options.trustedOrigins ? Array.isArray(options.trustedOrigins) ? options.trustedOrigins : await options.trustedOrigins(request) : [],\n        ctx.options.baseURL\n      ];\n      const { handler } = (0,_api_index_mjs__WEBPACK_IMPORTED_MODULE_0__.router)(ctx, options);\n      return handler(request);\n    },\n    api,\n    options,\n    $context: authContext,\n    $Infer: {},\n    $ERROR_CODES: {\n      ...errorCodes,\n      ..._better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_23__.B\n    }\n  };\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9zaGFyZWQvYmV0dGVyLWF1dGguRGxXem9iMS0ubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFnRjtBQUNwRDtBQUNxRDtBQUM0QjtBQUM3QztBQUNoRDtBQUNvQjtBQUNrRDtBQUNWO0FBQ1Y7QUFDTDtBQUN4QztBQUNZO0FBQ0Y7QUFDRDtBQUNJO0FBQ0M7QUFDckI7QUFDc0I7QUFDbUc7QUFDdkU7QUFDYTtBQUNYO0FBQ3BDO0FBQ0Y7QUFDSTtBQUNIO0FBQ3FCO0FBQ2Y7QUFDcUM7QUFDTDs7QUFFbkU7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGFBQWEsSUFBSSxlQUFlO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxhQUFhLElBQUksZUFBZTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLCtEQUFZO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsK0RBQVk7QUFDeEM7QUFDQTtBQUNBLG9CQUFvQiw0REFBVTtBQUM5QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHVEQUF1RCx5REFBRztBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLHlEQUFHLG9CQUFvQix1RUFBaUI7QUFDakQsRUFBRSwyRUFBcUI7QUFDdkIsRUFBRSxpRUFBVztBQUNiLEVBQUUsd0VBQWtCO0FBQ3BCLEVBQUUsMEVBQW9CO0FBQ3RCLEVBQUUsOEVBQXdCO0FBQzFCLEVBQUUsc0VBQWdCO0FBQ2xCLEVBQUUscUZBQStCO0FBQ2pDLEVBQUUscUVBQWU7QUFDakI7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxTQUFTLDZEQUFTLCtEQUErRCw2REFBTTtBQUN2Rjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxvQkFBb0IseURBQUc7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsOERBQThEO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztB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UUFBUSw0REFBYTtBQUNuRDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsUUFBUSxVQUFVO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiw2QkFBNkI7QUFDL0M7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDBDQUFJO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsNERBQXFCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDZEQUFVO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHlEQUFHO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyx5REFBZTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVLE1BQU0sRUFBRSw0REFBWTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxJQUFJO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qiw2REFBVTtBQUNsQztBQUNBO0FBQ0EsZ0NBQWdDLDZEQUFTO0FBQ3pDLFVBQVU7QUFDVixvQkFBb0IseURBQWU7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsVUFBVSxFQUFFLHNEQUFNO0FBQ2hDO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0EsU0FBUyx5REFBZ0I7QUFDekI7QUFDQTtBQUNBOztBQUU4RSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhbWFhblxcT25lRHJpdmVcXERlc2t0b3BcXEthbmRpZF8yXFxOZXcgZm9sZGVyICgyKVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcc2hhcmVkXFxiZXR0ZXItYXV0aC5EbFd6b2IxLS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY2hlY2tFbmRwb2ludENvbmZsaWN0cywgZ2V0RW5kcG9pbnRzLCByb3V0ZXIgfSBmcm9tICcuLi9hcGkvaW5kZXgubWpzJztcbmltcG9ydCB7IGRlZnUgfSBmcm9tICdkZWZ1JztcbmltcG9ydCB7IGhhc2hUb0Jhc2U2NCwgdmVyaWZ5UGFzc3dvcmQsIGhhc2hQYXNzd29yZCB9IGZyb20gJy4uL2NyeXB0by9pbmRleC5tanMnO1xuaW1wb3J0IHsgYSBhcyBnZXRBZGFwdGVyLCBjIGFzIGNyZWF0ZUludGVybmFsQWRhcHRlciwgZSBhcyBnZXRNaWdyYXRpb25zIH0gZnJvbSAnLi9iZXR0ZXItYXV0aC5DU1ZDdGI3Ny5tanMnO1xuaW1wb3J0IHsgZyBhcyBnZXRBdXRoVGFibGVzIH0gZnJvbSAnLi9iZXR0ZXItYXV0aC5CX1BUVk9ETS5tanMnO1xuaW1wb3J0ICd6b2QvdjQnO1xuaW1wb3J0ICcuL2JldHRlci1hdXRoLkRjdjhQUzdULm1qcyc7XG5pbXBvcnQgeyBnIGFzIGdldENvb2tpZXMsIGMgYXMgY3JlYXRlQ29va2llR2V0dGVyIH0gZnJvbSAnLi9iZXR0ZXItYXV0aC5VZlZXQXJJQi5tanMnO1xuaW1wb3J0IHsgYSBhcyBsb2dnZXIsIGMgYXMgY3JlYXRlTG9nZ2VyIH0gZnJvbSAnLi9iZXR0ZXItYXV0aC5CakJseWJ2LS5tanMnO1xuaW1wb3J0IHsgVSBhcyBzb2NpYWxQcm92aWRlcnMgfSBmcm9tICcuL2JldHRlci1hdXRoLm5xV2Y3elVlLm1qcyc7XG5pbXBvcnQgeyBnIGFzIGdlbmVyYXRlSWQgfSBmcm9tICcuL2JldHRlci1hdXRoLkJVUFBSWGZLLm1qcyc7XG5pbXBvcnQgJ2JldHRlci1jYWxsJztcbmltcG9ydCAnQGJldHRlci1hdXRoL3V0aWxzL2hhc2gnO1xuaW1wb3J0ICdAbm9ibGUvY2lwaGVycy9jaGFjaGEnO1xuaW1wb3J0ICdAbm9ibGUvY2lwaGVycy91dGlscyc7XG5pbXBvcnQgJ0Bub2JsZS9jaXBoZXJzL3dlYmNyeXB0byc7XG5pbXBvcnQgJ0BiZXR0ZXItYXV0aC91dGlscy9iYXNlNjQnO1xuaW1wb3J0ICdqb3NlJztcbmltcG9ydCAnLi9iZXR0ZXItYXV0aC5CNFFveGRnYy5tanMnO1xuaW1wb3J0IHsgZSBhcyBlbnYsIGcgYXMgZ2V0RW52VmFyLCBpIGFzIGlzVGVzdCwgYyBhcyBnZXRCb29sZWFuRW52VmFyLCBFIGFzIEVOViwgYSBhcyBpc1Byb2R1Y3Rpb24gfSBmcm9tICcuL2JldHRlci1hdXRoLkNNUTNyQS1JLm1qcyc7XG5pbXBvcnQgeyBjIGFzIGNoZWNrUGFzc3dvcmQgfSBmcm9tICcuL2JldHRlci1hdXRoLll3RFFob1BjLm1qcyc7XG5pbXBvcnQgeyBhIGFzIGdldEJhc2VVUkwsIGcgYXMgZ2V0T3JpZ2luIH0gZnJvbSAnLi9iZXR0ZXItYXV0aC5DdVNfZURkSy5tanMnO1xuaW1wb3J0IHsgQiBhcyBCZXR0ZXJBdXRoRXJyb3IgfSBmcm9tICcuL2JldHRlci1hdXRoLkRkelNKZi1uLm1qcyc7XG5pbXBvcnQgJ0Bub2JsZS9oYXNoZXMvc2NyeXB0JztcbmltcG9ydCAnQGJldHRlci1hdXRoL3V0aWxzJztcbmltcG9ydCAnQGJldHRlci1hdXRoL3V0aWxzL2hleCc7XG5pbXBvcnQgJ0Bub2JsZS9oYXNoZXMvdXRpbHMnO1xuaW1wb3J0IHsgYmV0dGVyRmV0Y2ggfSBmcm9tICdAYmV0dGVyLWZldGNoL2ZldGNoJztcbmltcG9ydCAnQGJldHRlci1hdXRoL3V0aWxzL3JhbmRvbSc7XG5pbXBvcnQgeyBnIGFzIGdldEt5c2VseURhdGFiYXNlVHlwZSB9IGZyb20gJy4vYmV0dGVyLWF1dGguQjhiM2xlcDAubWpzJztcbmltcG9ydCB7IEIgYXMgQkFTRV9FUlJPUl9DT0RFUyB9IGZyb20gJy4vYmV0dGVyLWF1dGguRFY1RUhlWUcubWpzJztcblxuY29uc3QgREVGQVVMVF9TRUNSRVQgPSBcImJldHRlci1hdXRoLXNlY3JldC0xMjM0NTY3ODlcIjtcblxubGV0IHBhY2thZ2VKU09OQ2FjaGU7XG5hc3luYyBmdW5jdGlvbiByZWFkUm9vdFBhY2thZ2VKc29uKCkge1xuICBpZiAocGFja2FnZUpTT05DYWNoZSkgcmV0dXJuIHBhY2thZ2VKU09OQ2FjaGU7XG4gIHRyeSB7XG4gICAgY29uc3QgY3dkID0gdHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIHByb2Nlc3MuY3dkID09PSBcImZ1bmN0aW9uXCIgPyBwcm9jZXNzLmN3ZCgpIDogXCJcIjtcbiAgICBpZiAoIWN3ZCkgcmV0dXJuIHZvaWQgMDtcbiAgICBjb25zdCBpbXBvcnRSdW50aW1lID0gKG0pID0+IEZ1bmN0aW9uKFwibW1cIiwgXCJyZXR1cm4gaW1wb3J0KG1tKVwiKShtKTtcbiAgICBjb25zdCBbeyBkZWZhdWx0OiBmcyB9LCB7IGRlZmF1bHQ6IHBhdGggfV0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICBpbXBvcnRSdW50aW1lKFwiZnMvcHJvbWlzZXNcIiksXG4gICAgICBpbXBvcnRSdW50aW1lKFwicGF0aFwiKVxuICAgIF0pO1xuICAgIGNvbnN0IHJhdyA9IGF3YWl0IGZzLnJlYWRGaWxlKHBhdGguam9pbihjd2QsIFwicGFja2FnZS5qc29uXCIpLCBcInV0Zi04XCIpO1xuICAgIHBhY2thZ2VKU09OQ2FjaGUgPSBKU09OLnBhcnNlKHJhdyk7XG4gICAgcmV0dXJuIHBhY2thZ2VKU09OQ2FjaGU7XG4gIH0gY2F0Y2gge1xuICB9XG4gIHJldHVybiB2b2lkIDA7XG59XG5hc3luYyBmdW5jdGlvbiBnZXRQYWNrYWdlVmVyc2lvbihwa2cpIHtcbiAgaWYgKHBhY2thZ2VKU09OQ2FjaGUpIHtcbiAgICByZXR1cm4gcGFja2FnZUpTT05DYWNoZS5kZXBlbmRlbmNpZXM/Lltwa2ddIHx8IHBhY2thZ2VKU09OQ2FjaGUuZGV2RGVwZW5kZW5jaWVzPy5bcGtnXSB8fCBwYWNrYWdlSlNPTkNhY2hlLnBlZXJEZXBlbmRlbmNpZXM/Lltwa2ddO1xuICB9XG4gIHRyeSB7XG4gICAgY29uc3QgY3dkID0gdHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIHByb2Nlc3MuY3dkID09PSBcImZ1bmN0aW9uXCIgPyBwcm9jZXNzLmN3ZCgpIDogXCJcIjtcbiAgICBpZiAoIWN3ZCkgdGhyb3cgbmV3IEVycm9yKFwibm8tY3dkXCIpO1xuICAgIGNvbnN0IGltcG9ydFJ1bnRpbWUgPSAobSkgPT4gRnVuY3Rpb24oXCJtbVwiLCBcInJldHVybiBpbXBvcnQobW0pXCIpKG0pO1xuICAgIGNvbnN0IFt7IGRlZmF1bHQ6IGZzIH0sIHsgZGVmYXVsdDogcGF0aCB9XSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIGltcG9ydFJ1bnRpbWUoXCJmcy9wcm9taXNlc1wiKSxcbiAgICAgIGltcG9ydFJ1bnRpbWUoXCJwYXRoXCIpXG4gICAgXSk7XG4gICAgY29uc3QgcGtnSnNvblBhdGggPSBwYXRoLmpvaW4oY3dkLCBcIm5vZGVfbW9kdWxlc1wiLCBwa2csIFwicGFja2FnZS5qc29uXCIpO1xuICAgIGNvbnN0IHJhdyA9IGF3YWl0IGZzLnJlYWRGaWxlKHBrZ0pzb25QYXRoLCBcInV0Zi04XCIpO1xuICAgIGNvbnN0IGpzb24gPSBKU09OLnBhcnNlKHJhdyk7XG4gICAgY29uc3QgcmVzb2x2ZWQgPSBqc29uLnZlcnNpb24gfHwgYXdhaXQgZ2V0VmVyc2lvbkZyb21Mb2NhbFBhY2thZ2VKc29uKHBrZykgfHwgdm9pZCAwO1xuICAgIHJldHVybiByZXNvbHZlZDtcbiAgfSBjYXRjaCB7XG4gIH1cbiAgY29uc3QgZnJvbVJvb3QgPSBhd2FpdCBnZXRWZXJzaW9uRnJvbUxvY2FsUGFja2FnZUpzb24ocGtnKTtcbiAgcmV0dXJuIGZyb21Sb290O1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0VmVyc2lvbkZyb21Mb2NhbFBhY2thZ2VKc29uKHBrZykge1xuICBjb25zdCBqc29uID0gYXdhaXQgcmVhZFJvb3RQYWNrYWdlSnNvbigpO1xuICBpZiAoIWpzb24pIHJldHVybiB2b2lkIDA7XG4gIGNvbnN0IGFsbERlcHMgPSB7XG4gICAgLi4uanNvbi5kZXBlbmRlbmNpZXMsXG4gICAgLi4uanNvbi5kZXZEZXBlbmRlbmNpZXMsXG4gICAgLi4uanNvbi5wZWVyRGVwZW5kZW5jaWVzXG4gIH07XG4gIHJldHVybiBhbGxEZXBzW3BrZ107XG59XG5hc3luYyBmdW5jdGlvbiBnZXROYW1lRnJvbUxvY2FsUGFja2FnZUpzb24oKSB7XG4gIGNvbnN0IGpzb24gPSBhd2FpdCByZWFkUm9vdFBhY2thZ2VKc29uKCk7XG4gIHJldHVybiBqc29uPy5uYW1lO1xufVxuXG5sZXQgcHJvamVjdElkQ2FjaGVkID0gbnVsbDtcbmFzeW5jIGZ1bmN0aW9uIGdldFByb2plY3RJZChiYXNlVXJsKSB7XG4gIGlmIChwcm9qZWN0SWRDYWNoZWQpIHJldHVybiBwcm9qZWN0SWRDYWNoZWQ7XG4gIGNvbnN0IHByb2plY3ROYW1lID0gYXdhaXQgZ2V0TmFtZUZyb21Mb2NhbFBhY2thZ2VKc29uKCk7XG4gIGlmIChwcm9qZWN0TmFtZSkge1xuICAgIHByb2plY3RJZENhY2hlZCA9IGF3YWl0IGhhc2hUb0Jhc2U2NChcbiAgICAgIGJhc2VVcmwgPyBiYXNlVXJsICsgcHJvamVjdE5hbWUgOiBwcm9qZWN0TmFtZVxuICAgICk7XG4gICAgcmV0dXJuIHByb2plY3RJZENhY2hlZDtcbiAgfVxuICBpZiAoYmFzZVVybCkge1xuICAgIHByb2plY3RJZENhY2hlZCA9IGF3YWl0IGhhc2hUb0Jhc2U2NChiYXNlVXJsKTtcbiAgICByZXR1cm4gcHJvamVjdElkQ2FjaGVkO1xuICB9XG4gIHByb2plY3RJZENhY2hlZCA9IGdlbmVyYXRlSWQoMzIpO1xuICByZXR1cm4gcHJvamVjdElkQ2FjaGVkO1xufVxuXG5jb25zdCBpbXBvcnRSdW50aW1lID0gKG0pID0+IHtcbiAgcmV0dXJuIEZ1bmN0aW9uKFwibW1cIiwgXCJyZXR1cm4gaW1wb3J0KG1tKVwiKShtKTtcbn07XG5cbmZ1bmN0aW9uIGdldFZlbmRvcigpIHtcbiAgY29uc3QgaGFzQW55ID0gKC4uLmtleXMpID0+IGtleXMuc29tZSgoaykgPT4gQm9vbGVhbihlbnZba10pKTtcbiAgaWYgKGhhc0FueShcIkNGX1BBR0VTXCIsIFwiQ0ZfUEFHRVNfVVJMXCIsIFwiQ0ZfQUNDT1VOVF9JRFwiKSB8fCB0eXBlb2YgbmF2aWdhdG9yICE9PSBcInVuZGVmaW5lZFwiICYmIG5hdmlnYXRvci51c2VyQWdlbnQgPT09IFwiQ2xvdWRmbGFyZS1Xb3JrZXJzXCIpIHtcbiAgICByZXR1cm4gXCJjbG91ZGZsYXJlXCI7XG4gIH1cbiAgaWYgKGhhc0FueShcIlZFUkNFTFwiLCBcIlZFUkNFTF9VUkxcIiwgXCJWRVJDRUxfRU5WXCIpKSByZXR1cm4gXCJ2ZXJjZWxcIjtcbiAgaWYgKGhhc0FueShcIk5FVExJRllcIiwgXCJORVRMSUZZX1VSTFwiKSkgcmV0dXJuIFwibmV0bGlmeVwiO1xuICBpZiAoaGFzQW55KFxuICAgIFwiUkVOREVSXCIsXG4gICAgXCJSRU5ERVJfVVJMXCIsXG4gICAgXCJSRU5ERVJfSU5URVJOQUxfSE9TVE5BTUVcIixcbiAgICBcIlJFTkRFUl9TRVJWSUNFX0lEXCJcbiAgKSkge1xuICAgIHJldHVybiBcInJlbmRlclwiO1xuICB9XG4gIGlmIChoYXNBbnkoXCJBV1NfTEFNQkRBX0ZVTkNUSU9OX05BTUVcIiwgXCJBV1NfRVhFQ1VUSU9OX0VOVlwiLCBcIkxBTUJEQV9UQVNLX1JPT1RcIikpIHtcbiAgICByZXR1cm4gXCJhd3NcIjtcbiAgfVxuICBpZiAoaGFzQW55KFxuICAgIFwiR09PR0xFX0NMT1VEX0ZVTkNUSU9OX05BTUVcIixcbiAgICBcIkdPT0dMRV9DTE9VRF9QUk9KRUNUXCIsXG4gICAgXCJHQ1BfUFJPSkVDVFwiLFxuICAgIFwiS19TRVJWSUNFXCJcbiAgKSkge1xuICAgIHJldHVybiBcImdjcFwiO1xuICB9XG4gIGlmIChoYXNBbnkoXG4gICAgXCJBWlVSRV9GVU5DVElPTl9OQU1FXCIsXG4gICAgXCJGVU5DVElPTlNfV09SS0VSX1JVTlRJTUVcIixcbiAgICBcIldFQlNJVEVfSU5TVEFOQ0VfSURcIixcbiAgICBcIldFQlNJVEVfU0lURV9OQU1FXCJcbiAgKSkge1xuICAgIHJldHVybiBcImF6dXJlXCI7XG4gIH1cbiAgaWYgKGhhc0FueShcIkRFTk9fREVQTE9ZTUVOVF9JRFwiLCBcIkRFTk9fUkVHSU9OXCIpKSByZXR1cm4gXCJkZW5vLWRlcGxveVwiO1xuICBpZiAoaGFzQW55KFwiRkxZX0FQUF9OQU1FXCIsIFwiRkxZX1JFR0lPTlwiLCBcIkZMWV9BTExPQ19JRFwiKSkgcmV0dXJuIFwiZmx5LWlvXCI7XG4gIGlmIChoYXNBbnkoXCJSQUlMV0FZX1NUQVRJQ19VUkxcIiwgXCJSQUlMV0FZX0VOVklST05NRU5UX05BTUVcIikpXG4gICAgcmV0dXJuIFwicmFpbHdheVwiO1xuICBpZiAoaGFzQW55KFwiRFlOT1wiLCBcIkhFUk9LVV9BUFBfTkFNRVwiKSkgcmV0dXJuIFwiaGVyb2t1XCI7XG4gIGlmIChoYXNBbnkoXCJET19ERVBMT1lNRU5UX0lEXCIsIFwiRE9fQVBQX05BTUVcIiwgXCJESUdJVEFMT0NFQU5cIikpXG4gICAgcmV0dXJuIFwiZGlnaXRhbG9jZWFuXCI7XG4gIGlmIChoYXNBbnkoXCJLT1lFQlwiLCBcIktPWUVCX0RFUExPWU1FTlRfSURcIiwgXCJLT1lFQl9BUFBfTkFNRVwiKSkgcmV0dXJuIFwia295ZWJcIjtcbiAgcmV0dXJuIG51bGw7XG59XG5hc3luYyBmdW5jdGlvbiBkZXRlY3RTeXN0ZW1JbmZvKCkge1xuICB0cnkge1xuICAgIGlmIChnZXRWZW5kb3IoKSA9PT0gXCJjbG91ZGZsYXJlXCIpIHJldHVybiBcImNsb3VkZmxhcmVcIjtcbiAgICBjb25zdCBvcyA9IGF3YWl0IGltcG9ydFJ1bnRpbWUoXCJvc1wiKTtcbiAgICBjb25zdCBjcHVzID0gb3MuY3B1cygpO1xuICAgIHJldHVybiB7XG4gICAgICBkZXBsb3ltZW50VmVuZG9yOiBnZXRWZW5kb3IoKSxcbiAgICAgIHN5c3RlbVBsYXRmb3JtOiBvcy5wbGF0Zm9ybSgpLFxuICAgICAgc3lzdGVtUmVsZWFzZTogb3MucmVsZWFzZSgpLFxuICAgICAgc3lzdGVtQXJjaGl0ZWN0dXJlOiBvcy5hcmNoKCksXG4gICAgICBjcHVDb3VudDogY3B1cy5sZW5ndGgsXG4gICAgICBjcHVNb2RlbDogY3B1cy5sZW5ndGggPyBjcHVzWzBdLm1vZGVsIDogbnVsbCxcbiAgICAgIGNwdVNwZWVkOiBjcHVzLmxlbmd0aCA/IGNwdXNbMF0uc3BlZWQgOiBudWxsLFxuICAgICAgbWVtb3J5OiBvcy50b3RhbG1lbSgpLFxuICAgICAgaXNXU0w6IGF3YWl0IGlzV3NsKCksXG4gICAgICBpc0RvY2tlcjogYXdhaXQgaXNEb2NrZXIoKSxcbiAgICAgIGlzVFRZOiB0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwcm9jZXNzLnN0ZG91dCA/IHByb2Nlc3Muc3Rkb3V0LmlzVFRZIDogbnVsbFxuICAgIH07XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3lzdGVtUGxhdGZvcm06IG51bGwsXG4gICAgICBzeXN0ZW1SZWxlYXNlOiBudWxsLFxuICAgICAgc3lzdGVtQXJjaGl0ZWN0dXJlOiBudWxsLFxuICAgICAgY3B1Q291bnQ6IG51bGwsXG4gICAgICBjcHVNb2RlbDogbnVsbCxcbiAgICAgIGNwdVNwZWVkOiBudWxsLFxuICAgICAgbWVtb3J5OiBudWxsLFxuICAgICAgaXNXU0w6IG51bGwsXG4gICAgICBpc0RvY2tlcjogbnVsbCxcbiAgICAgIGlzVFRZOiBudWxsXG4gICAgfTtcbiAgfVxufVxubGV0IGlzRG9ja2VyQ2FjaGVkO1xuYXN5bmMgZnVuY3Rpb24gaGFzRG9ja2VyRW52KCkge1xuICBpZiAoZ2V0VmVuZG9yKCkgPT09IFwiY2xvdWRmbGFyZVwiKSByZXR1cm4gZmFsc2U7XG4gIHRyeSB7XG4gICAgY29uc3QgZnMgPSBhd2FpdCBpbXBvcnRSdW50aW1lKFwiZnNcIik7XG4gICAgZnMuc3RhdFN5bmMoXCIvLmRvY2tlcmVudlwiKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5hc3luYyBmdW5jdGlvbiBoYXNEb2NrZXJDR3JvdXAoKSB7XG4gIGlmIChnZXRWZW5kb3IoKSA9PT0gXCJjbG91ZGZsYXJlXCIpIHJldHVybiBmYWxzZTtcbiAgdHJ5IHtcbiAgICBjb25zdCBmcyA9IGF3YWl0IGltcG9ydFJ1bnRpbWUoXCJmc1wiKTtcbiAgICByZXR1cm4gZnMucmVhZEZpbGVTeW5jKFwiL3Byb2Mvc2VsZi9jZ3JvdXBcIiwgXCJ1dGY4XCIpLmluY2x1ZGVzKFwiZG9ja2VyXCIpO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cbmFzeW5jIGZ1bmN0aW9uIGlzRG9ja2VyKCkge1xuICBpZiAoZ2V0VmVuZG9yKCkgPT09IFwiY2xvdWRmbGFyZVwiKSByZXR1cm4gZmFsc2U7XG4gIGlmIChpc0RvY2tlckNhY2hlZCA9PT0gdm9pZCAwKSB7XG4gICAgaXNEb2NrZXJDYWNoZWQgPSBhd2FpdCBoYXNEb2NrZXJFbnYoKSB8fCBhd2FpdCBoYXNEb2NrZXJDR3JvdXAoKTtcbiAgfVxuICByZXR1cm4gaXNEb2NrZXJDYWNoZWQ7XG59XG5hc3luYyBmdW5jdGlvbiBpc1dzbCgpIHtcbiAgdHJ5IHtcbiAgICBpZiAoZ2V0VmVuZG9yKCkgPT09IFwiY2xvdWRmbGFyZVwiKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKHR5cGVvZiBwcm9jZXNzID09PSBcInVuZGVmaW5lZFwiIHx8IHByb2Nlc3MucGxhdGZvcm0gIT09IFwibGludXhcIikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCBmcyA9IGF3YWl0IGltcG9ydFJ1bnRpbWUoXCJmc1wiKTtcbiAgICBjb25zdCBvcyA9IGF3YWl0IGltcG9ydFJ1bnRpbWUoXCJvc1wiKTtcbiAgICBpZiAob3MucmVsZWFzZSgpLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJtaWNyb3NvZnRcIikpIHtcbiAgICAgIGlmIChhd2FpdCBpc0luc2lkZUNvbnRhaW5lcigpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZnMucmVhZEZpbGVTeW5jKFwiL3Byb2MvdmVyc2lvblwiLCBcInV0ZjhcIikudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcIm1pY3Jvc29mdFwiKSA/ICFhd2FpdCBpc0luc2lkZUNvbnRhaW5lcigpIDogZmFsc2U7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxubGV0IGlzSW5zaWRlQ29udGFpbmVyQ2FjaGVkO1xuY29uc3QgaGFzQ29udGFpbmVyRW52ID0gYXN5bmMgKCkgPT4ge1xuICBpZiAoZ2V0VmVuZG9yKCkgPT09IFwiY2xvdWRmbGFyZVwiKSByZXR1cm4gZmFsc2U7XG4gIHRyeSB7XG4gICAgY29uc3QgZnMgPSBhd2FpdCBpbXBvcnRSdW50aW1lKFwiZnNcIik7XG4gICAgZnMuc3RhdFN5bmMoXCIvcnVuLy5jb250YWluZXJlbnZcIik7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufTtcbmFzeW5jIGZ1bmN0aW9uIGlzSW5zaWRlQ29udGFpbmVyKCkge1xuICBpZiAoaXNJbnNpZGVDb250YWluZXJDYWNoZWQgPT09IHZvaWQgMCkge1xuICAgIGlzSW5zaWRlQ29udGFpbmVyQ2FjaGVkID0gYXdhaXQgaGFzQ29udGFpbmVyRW52KCkgfHwgYXdhaXQgaXNEb2NrZXIoKTtcbiAgfVxuICByZXR1cm4gaXNJbnNpZGVDb250YWluZXJDYWNoZWQ7XG59XG5mdW5jdGlvbiBpc0NJKCkge1xuICByZXR1cm4gZW52LkNJICE9PSBcImZhbHNlXCIgJiYgKFwiQlVJTERfSURcIiBpbiBlbnYgfHwgLy8gSmVua2lucywgQ2xvdWRiZWVzXG4gIFwiQlVJTERfTlVNQkVSXCIgaW4gZW52IHx8IC8vIEplbmtpbnMsIFRlYW1DaXR5IChmaXhlZCB0eXBvOiBleHRyYSBzcGFjZSByZW1vdmVkKVxuICBcIkNJXCIgaW4gZW52IHx8IC8vIFRyYXZpcyBDSSwgQ2lyY2xlQ0ksIENpcnJ1cyBDSSwgR2l0bGFiIENJLCBBcHB2ZXlvciwgQ29kZVNoaXAsIGRzYXJpLCBDbG91ZGZsYXJlXG4gIFwiQ0lfQVBQX0lEXCIgaW4gZW52IHx8IC8vIEFwcGZsb3dcbiAgXCJDSV9CVUlMRF9JRFwiIGluIGVudiB8fCAvLyBBcHBmbG93XG4gIFwiQ0lfQlVJTERfTlVNQkVSXCIgaW4gZW52IHx8IC8vIEFwcGZsb3dcbiAgXCJDSV9OQU1FXCIgaW4gZW52IHx8IC8vIENvZGVzaGlwIGFuZCBvdGhlcnNcbiAgXCJDT05USU5VT1VTX0lOVEVHUkFUSU9OXCIgaW4gZW52IHx8IC8vIFRyYXZpcyBDSSwgQ2lycnVzIENJXG4gIFwiUlVOX0lEXCIgaW4gZW52KTtcbn1cblxuZnVuY3Rpb24gZGV0ZWN0UnVudGltZSgpIHtcbiAgaWYgKHR5cGVvZiBEZW5vICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgY29uc3QgZGVub1ZlcnNpb24gPSBEZW5vPy52ZXJzaW9uPy5kZW5vID8/IG51bGw7XG4gICAgcmV0dXJuIHsgbmFtZTogXCJkZW5vXCIsIHZlcnNpb246IGRlbm9WZXJzaW9uIH07XG4gIH1cbiAgaWYgKHR5cGVvZiBCdW4gIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBjb25zdCBidW5WZXJzaW9uID0gQnVuPy52ZXJzaW9uID8/IG51bGw7XG4gICAgcmV0dXJuIHsgbmFtZTogXCJidW5cIiwgdmVyc2lvbjogYnVuVmVyc2lvbiB9O1xuICB9XG4gIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwcm9jZXNzPy52ZXJzaW9ucz8ubm9kZSkge1xuICAgIHJldHVybiB7IG5hbWU6IFwibm9kZVwiLCB2ZXJzaW9uOiBwcm9jZXNzLnZlcnNpb25zLm5vZGUgPz8gbnVsbCB9O1xuICB9XG4gIHJldHVybiB7IG5hbWU6IFwiZWRnZVwiLCB2ZXJzaW9uOiBudWxsIH07XG59XG5mdW5jdGlvbiBkZXRlY3RFbnZpcm9ubWVudCgpIHtcbiAgcmV0dXJuIGdldEVudlZhcihcIk5PREVfRU5WXCIpID09PSBcInByb2R1Y3Rpb25cIiA/IFwicHJvZHVjdGlvblwiIDogaXNDSSgpID8gXCJjaVwiIDogaXNUZXN0KCkgPyBcInRlc3RcIiA6IFwiZGV2ZWxvcG1lbnRcIjtcbn1cblxuY29uc3QgREFUQUJBU0VTID0ge1xuICBwZzogXCJwb3N0Z3Jlc3FsXCIsXG4gIG15c3FsOiBcIm15c3FsXCIsXG4gIG1hcmlhZGI6IFwibWFyaWFkYlwiLFxuICBzcWxpdGUzOiBcInNxbGl0ZVwiLFxuICBcImJldHRlci1zcWxpdGUzXCI6IFwic3FsaXRlXCIsXG4gIFwiQHByaXNtYS9jbGllbnRcIjogXCJwcmlzbWFcIixcbiAgbW9uZ29vc2U6IFwibW9uZ29kYlwiLFxuICBtb25nb2RiOiBcIm1vbmdvZGJcIixcbiAgXCJkcml6emxlLW9ybVwiOiBcImRyaXp6bGVcIlxufTtcbmFzeW5jIGZ1bmN0aW9uIGRldGVjdERhdGFiYXNlKCkge1xuICBmb3IgKGNvbnN0IFtwa2csIG5hbWVdIG9mIE9iamVjdC5lbnRyaWVzKERBVEFCQVNFUykpIHtcbiAgICBjb25zdCB2ZXJzaW9uID0gYXdhaXQgZ2V0UGFja2FnZVZlcnNpb24ocGtnKTtcbiAgICBpZiAodmVyc2lvbikgcmV0dXJuIHsgbmFtZSwgdmVyc2lvbiB9O1xuICB9XG4gIHJldHVybiB2b2lkIDA7XG59XG5cbmNvbnN0IEZSQU1FV09SS1MgPSB7XG4gIG5leHQ6IFwibmV4dFwiLFxuICBudXh0OiBcIm51eHRcIixcbiAgXCJAcmVtaXgtcnVuL3NlcnZlci1ydW50aW1lXCI6IFwicmVtaXhcIixcbiAgYXN0cm86IFwiYXN0cm9cIixcbiAgXCJAc3ZlbHRlanMva2l0XCI6IFwic3ZlbHRla2l0XCIsXG4gIFwic29saWQtc3RhcnRcIjogXCJzb2xpZC1zdGFydFwiLFxuICBcInRhbnN0YWNrLXN0YXJ0XCI6IFwidGFuc3RhY2stc3RhcnRcIixcbiAgaG9ubzogXCJob25vXCIsXG4gIGV4cHJlc3M6IFwiZXhwcmVzc1wiLFxuICBlbHlzaWE6IFwiZWx5c2lhXCIsXG4gIGV4cG86IFwiZXhwb1wiXG59O1xuYXN5bmMgZnVuY3Rpb24gZGV0ZWN0RnJhbWV3b3JrKCkge1xuICBmb3IgKGNvbnN0IFtwa2csIG5hbWVdIG9mIE9iamVjdC5lbnRyaWVzKEZSQU1FV09SS1MpKSB7XG4gICAgY29uc3QgdmVyc2lvbiA9IGF3YWl0IGdldFBhY2thZ2VWZXJzaW9uKHBrZyk7XG4gICAgaWYgKHZlcnNpb24pIHJldHVybiB7IG5hbWUsIHZlcnNpb24gfTtcbiAgfVxuICByZXR1cm4gdm9pZCAwO1xufVxuXG5mdW5jdGlvbiBkZXRlY3RQYWNrYWdlTWFuYWdlcigpIHtcbiAgY29uc3QgdXNlckFnZW50ID0gZW52Lm5wbV9jb25maWdfdXNlcl9hZ2VudDtcbiAgaWYgKCF1c2VyQWdlbnQpIHtcbiAgICByZXR1cm4gdm9pZCAwO1xuICB9XG4gIGNvbnN0IHBtU3BlYyA9IHVzZXJBZ2VudC5zcGxpdChcIiBcIilbMF07XG4gIGNvbnN0IHNlcGFyYXRvclBvcyA9IHBtU3BlYy5sYXN0SW5kZXhPZihcIi9cIik7XG4gIGNvbnN0IG5hbWUgPSBwbVNwZWMuc3Vic3RyaW5nKDAsIHNlcGFyYXRvclBvcyk7XG4gIHJldHVybiB7XG4gICAgbmFtZTogbmFtZSA9PT0gXCJucG1pbnN0YWxsXCIgPyBcImNucG1cIiA6IG5hbWUsXG4gICAgdmVyc2lvbjogcG1TcGVjLnN1YnN0cmluZyhzZXBhcmF0b3JQb3MgKyAxKVxuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRUZWxlbWV0cnlBdXRoQ29uZmlnKG9wdGlvbnMsIGNvbnRleHQpIHtcbiAgcmV0dXJuIHtcbiAgICBkYXRhYmFzZTogY29udGV4dD8uZGF0YWJhc2UsXG4gICAgYWRhcHRlcjogY29udGV4dD8uYWRhcHRlcixcbiAgICBlbWFpbFZlcmlmaWNhdGlvbjoge1xuICAgICAgc2VuZFZlcmlmaWNhdGlvbkVtYWlsOiAhIW9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LnNlbmRWZXJpZmljYXRpb25FbWFpbCxcbiAgICAgIHNlbmRPblNpZ25VcDogISFvcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5zZW5kT25TaWduVXAsXG4gICAgICBzZW5kT25TaWduSW46ICEhb3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uc2VuZE9uU2lnbkluLFxuICAgICAgYXV0b1NpZ25JbkFmdGVyVmVyaWZpY2F0aW9uOiAhIW9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LmF1dG9TaWduSW5BZnRlclZlcmlmaWNhdGlvbixcbiAgICAgIGV4cGlyZXNJbjogb3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uZXhwaXJlc0luLFxuICAgICAgb25FbWFpbFZlcmlmaWNhdGlvbjogISFvcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5vbkVtYWlsVmVyaWZpY2F0aW9uLFxuICAgICAgYWZ0ZXJFbWFpbFZlcmlmaWNhdGlvbjogISFvcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5hZnRlckVtYWlsVmVyaWZpY2F0aW9uXG4gICAgfSxcbiAgICBlbWFpbEFuZFBhc3N3b3JkOiB7XG4gICAgICBlbmFibGVkOiAhIW9wdGlvbnMuZW1haWxBbmRQYXNzd29yZD8uZW5hYmxlZCxcbiAgICAgIGRpc2FibGVTaWduVXA6ICEhb3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkPy5kaXNhYmxlU2lnblVwLFxuICAgICAgcmVxdWlyZUVtYWlsVmVyaWZpY2F0aW9uOiAhIW9wdGlvbnMuZW1haWxBbmRQYXNzd29yZD8ucmVxdWlyZUVtYWlsVmVyaWZpY2F0aW9uLFxuICAgICAgbWF4UGFzc3dvcmRMZW5ndGg6IG9wdGlvbnMuZW1haWxBbmRQYXNzd29yZD8ubWF4UGFzc3dvcmRMZW5ndGgsXG4gICAgICBtaW5QYXNzd29yZExlbmd0aDogb3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkPy5taW5QYXNzd29yZExlbmd0aCxcbiAgICAgIHNlbmRSZXNldFBhc3N3b3JkOiAhIW9wdGlvbnMuZW1haWxBbmRQYXNzd29yZD8uc2VuZFJlc2V0UGFzc3dvcmQsXG4gICAgICByZXNldFBhc3N3b3JkVG9rZW5FeHBpcmVzSW46IG9wdGlvbnMuZW1haWxBbmRQYXNzd29yZD8ucmVzZXRQYXNzd29yZFRva2VuRXhwaXJlc0luLFxuICAgICAgb25QYXNzd29yZFJlc2V0OiAhIW9wdGlvbnMuZW1haWxBbmRQYXNzd29yZD8ub25QYXNzd29yZFJlc2V0LFxuICAgICAgcGFzc3dvcmQ6IHtcbiAgICAgICAgaGFzaDogISFvcHRpb25zLmVtYWlsQW5kUGFzc3dvcmQ/LnBhc3N3b3JkPy5oYXNoLFxuICAgICAgICB2ZXJpZnk6ICEhb3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkPy5wYXNzd29yZD8udmVyaWZ5XG4gICAgICB9LFxuICAgICAgYXV0b1NpZ25JbjogISFvcHRpb25zLmVtYWlsQW5kUGFzc3dvcmQ/LmF1dG9TaWduSW4sXG4gICAgICByZXZva2VTZXNzaW9uc09uUGFzc3dvcmRSZXNldDogISFvcHRpb25zLmVtYWlsQW5kUGFzc3dvcmQ/LnJldm9rZVNlc3Npb25zT25QYXNzd29yZFJlc2V0XG4gICAgfSxcbiAgICBzb2NpYWxQcm92aWRlcnM6IE9iamVjdC5rZXlzKG9wdGlvbnMuc29jaWFsUHJvdmlkZXJzIHx8IHt9KS5tYXAoKHApID0+IHtcbiAgICAgIGNvbnN0IHByb3ZpZGVyID0gb3B0aW9ucy5zb2NpYWxQcm92aWRlcnM/LltwXTtcbiAgICAgIGlmICghcHJvdmlkZXIpIHJldHVybiB7fTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiBwLFxuICAgICAgICBtYXBQcm9maWxlVG9Vc2VyOiAhIXByb3ZpZGVyLm1hcFByb2ZpbGVUb1VzZXIsXG4gICAgICAgIGRpc2FibGVEZWZhdWx0U2NvcGU6ICEhcHJvdmlkZXIuZGlzYWJsZURlZmF1bHRTY29wZSxcbiAgICAgICAgZGlzYWJsZUlkVG9rZW5TaWduSW46ICEhcHJvdmlkZXIuZGlzYWJsZUlkVG9rZW5TaWduSW4sXG4gICAgICAgIGRpc2FibGVJbXBsaWNpdFNpZ25VcDogcHJvdmlkZXIuZGlzYWJsZUltcGxpY2l0U2lnblVwLFxuICAgICAgICBkaXNhYmxlU2lnblVwOiBwcm92aWRlci5kaXNhYmxlU2lnblVwLFxuICAgICAgICBnZXRVc2VySW5mbzogISFwcm92aWRlci5nZXRVc2VySW5mbyxcbiAgICAgICAgb3ZlcnJpZGVVc2VySW5mb09uU2lnbkluOiAhIXByb3ZpZGVyLm92ZXJyaWRlVXNlckluZm9PblNpZ25JbixcbiAgICAgICAgcHJvbXB0OiBwcm92aWRlci5wcm9tcHQsXG4gICAgICAgIHZlcmlmeUlkVG9rZW46ICEhcHJvdmlkZXIudmVyaWZ5SWRUb2tlbixcbiAgICAgICAgc2NvcGU6IHByb3ZpZGVyLnNjb3BlLFxuICAgICAgICByZWZyZXNoQWNjZXNzVG9rZW46ICEhcHJvdmlkZXIucmVmcmVzaEFjY2Vzc1Rva2VuXG4gICAgICB9O1xuICAgIH0pLFxuICAgIHBsdWdpbnM6IG9wdGlvbnMucGx1Z2lucz8ubWFwKChwKSA9PiBwLmlkLnRvU3RyaW5nKCkpLFxuICAgIHVzZXI6IHtcbiAgICAgIG1vZGVsTmFtZTogb3B0aW9ucy51c2VyPy5tb2RlbE5hbWUsXG4gICAgICBmaWVsZHM6IG9wdGlvbnMudXNlcj8uZmllbGRzLFxuICAgICAgYWRkaXRpb25hbEZpZWxkczogb3B0aW9ucy51c2VyPy5hZGRpdGlvbmFsRmllbGRzLFxuICAgICAgY2hhbmdlRW1haWw6IHtcbiAgICAgICAgZW5hYmxlZDogb3B0aW9ucy51c2VyPy5jaGFuZ2VFbWFpbD8uZW5hYmxlZCxcbiAgICAgICAgc2VuZENoYW5nZUVtYWlsVmVyaWZpY2F0aW9uOiAhIW9wdGlvbnMudXNlcj8uY2hhbmdlRW1haWw/LnNlbmRDaGFuZ2VFbWFpbFZlcmlmaWNhdGlvblxuICAgICAgfVxuICAgIH0sXG4gICAgdmVyaWZpY2F0aW9uOiB7XG4gICAgICBtb2RlbE5hbWU6IG9wdGlvbnMudmVyaWZpY2F0aW9uPy5tb2RlbE5hbWUsXG4gICAgICBkaXNhYmxlQ2xlYW51cDogb3B0aW9ucy52ZXJpZmljYXRpb24/LmRpc2FibGVDbGVhbnVwLFxuICAgICAgZmllbGRzOiBvcHRpb25zLnZlcmlmaWNhdGlvbj8uZmllbGRzXG4gICAgfSxcbiAgICBzZXNzaW9uOiB7XG4gICAgICBtb2RlbE5hbWU6IG9wdGlvbnMuc2Vzc2lvbj8ubW9kZWxOYW1lLFxuICAgICAgYWRkaXRpb25hbEZpZWxkczogb3B0aW9ucy5zZXNzaW9uPy5hZGRpdGlvbmFsRmllbGRzLFxuICAgICAgY29va2llQ2FjaGU6IHtcbiAgICAgICAgZW5hYmxlZDogb3B0aW9ucy5zZXNzaW9uPy5jb29raWVDYWNoZT8uZW5hYmxlZCxcbiAgICAgICAgbWF4QWdlOiBvcHRpb25zLnNlc3Npb24/LmNvb2tpZUNhY2hlPy5tYXhBZ2VcbiAgICAgIH0sXG4gICAgICBkaXNhYmxlU2Vzc2lvblJlZnJlc2g6IG9wdGlvbnMuc2Vzc2lvbj8uZGlzYWJsZVNlc3Npb25SZWZyZXNoLFxuICAgICAgZXhwaXJlc0luOiBvcHRpb25zLnNlc3Npb24/LmV4cGlyZXNJbixcbiAgICAgIGZpZWxkczogb3B0aW9ucy5zZXNzaW9uPy5maWVsZHMsXG4gICAgICBmcmVzaEFnZTogb3B0aW9ucy5zZXNzaW9uPy5mcmVzaEFnZSxcbiAgICAgIHByZXNlcnZlU2Vzc2lvbkluRGF0YWJhc2U6IG9wdGlvbnMuc2Vzc2lvbj8ucHJlc2VydmVTZXNzaW9uSW5EYXRhYmFzZSxcbiAgICAgIHN0b3JlU2Vzc2lvbkluRGF0YWJhc2U6IG9wdGlvbnMuc2Vzc2lvbj8uc3RvcmVTZXNzaW9uSW5EYXRhYmFzZSxcbiAgICAgIHVwZGF0ZUFnZTogb3B0aW9ucy5zZXNzaW9uPy51cGRhdGVBZ2VcbiAgICB9LFxuICAgIGFjY291bnQ6IHtcbiAgICAgIG1vZGVsTmFtZTogb3B0aW9ucy5hY2NvdW50Py5tb2RlbE5hbWUsXG4gICAgICBmaWVsZHM6IG9wdGlvbnMuYWNjb3VudD8uZmllbGRzLFxuICAgICAgZW5jcnlwdE9BdXRoVG9rZW5zOiBvcHRpb25zLmFjY291bnQ/LmVuY3J5cHRPQXV0aFRva2VucyxcbiAgICAgIHVwZGF0ZUFjY291bnRPblNpZ25Jbjogb3B0aW9ucy5hY2NvdW50Py51cGRhdGVBY2NvdW50T25TaWduSW4sXG4gICAgICBhY2NvdW50TGlua2luZzoge1xuICAgICAgICBlbmFibGVkOiBvcHRpb25zLmFjY291bnQ/LmFjY291bnRMaW5raW5nPy5lbmFibGVkLFxuICAgICAgICB0cnVzdGVkUHJvdmlkZXJzOiBvcHRpb25zLmFjY291bnQ/LmFjY291bnRMaW5raW5nPy50cnVzdGVkUHJvdmlkZXJzLFxuICAgICAgICB1cGRhdGVVc2VySW5mb09uTGluazogb3B0aW9ucy5hY2NvdW50Py5hY2NvdW50TGlua2luZz8udXBkYXRlVXNlckluZm9PbkxpbmssXG4gICAgICAgIGFsbG93VW5saW5raW5nQWxsOiBvcHRpb25zLmFjY291bnQ/LmFjY291bnRMaW5raW5nPy5hbGxvd1VubGlua2luZ0FsbFxuICAgICAgfVxuICAgIH0sXG4gICAgaG9va3M6IHtcbiAgICAgIGFmdGVyOiAhIW9wdGlvbnMuaG9va3M/LmFmdGVyLFxuICAgICAgYmVmb3JlOiAhIW9wdGlvbnMuaG9va3M/LmJlZm9yZVxuICAgIH0sXG4gICAgc2Vjb25kYXJ5U3RvcmFnZTogISFvcHRpb25zLnNlY29uZGFyeVN0b3JhZ2UsXG4gICAgYWR2YW5jZWQ6IHtcbiAgICAgIGNvb2tpZVByZWZpeDogISFvcHRpb25zLmFkdmFuY2VkPy5jb29raWVQcmVmaXgsXG4gICAgICAvL3RoaXMgc2hvdWxkbid0IGJlIHRyYWNrZWRcbiAgICAgIGNvb2tpZXM6ICEhb3B0aW9ucy5hZHZhbmNlZD8uY29va2llcyxcbiAgICAgIGNyb3NzU3ViRG9tYWluQ29va2llczoge1xuICAgICAgICBkb21haW46ICEhb3B0aW9ucy5hZHZhbmNlZD8uY3Jvc3NTdWJEb21haW5Db29raWVzPy5kb21haW4sXG4gICAgICAgIGVuYWJsZWQ6IG9wdGlvbnMuYWR2YW5jZWQ/LmNyb3NzU3ViRG9tYWluQ29va2llcz8uZW5hYmxlZCxcbiAgICAgICAgYWRkaXRpb25hbENvb2tpZXM6IG9wdGlvbnMuYWR2YW5jZWQ/LmNyb3NzU3ViRG9tYWluQ29va2llcz8uYWRkaXRpb25hbENvb2tpZXNcbiAgICAgIH0sXG4gICAgICBkYXRhYmFzZToge1xuICAgICAgICB1c2VOdW1iZXJJZDogISFvcHRpb25zLmFkdmFuY2VkPy5kYXRhYmFzZT8udXNlTnVtYmVySWQsXG4gICAgICAgIGdlbmVyYXRlSWQ6IG9wdGlvbnMuYWR2YW5jZWQ/LmRhdGFiYXNlPy5nZW5lcmF0ZUlkLFxuICAgICAgICBkZWZhdWx0RmluZE1hbnlMaW1pdDogb3B0aW9ucy5hZHZhbmNlZD8uZGF0YWJhc2U/LmRlZmF1bHRGaW5kTWFueUxpbWl0XG4gICAgICB9LFxuICAgICAgdXNlU2VjdXJlQ29va2llczogb3B0aW9ucy5hZHZhbmNlZD8udXNlU2VjdXJlQ29va2llcyxcbiAgICAgIGlwQWRkcmVzczoge1xuICAgICAgICBkaXNhYmxlSXBUcmFja2luZzogb3B0aW9ucy5hZHZhbmNlZD8uaXBBZGRyZXNzPy5kaXNhYmxlSXBUcmFja2luZyxcbiAgICAgICAgaXBBZGRyZXNzSGVhZGVyczogb3B0aW9ucy5hZHZhbmNlZD8uaXBBZGRyZXNzPy5pcEFkZHJlc3NIZWFkZXJzXG4gICAgICB9LFxuICAgICAgZGlzYWJsZUNTUkZDaGVjazogb3B0aW9ucy5hZHZhbmNlZD8uZGlzYWJsZUNTUkZDaGVjayxcbiAgICAgIGNvb2tpZUF0dHJpYnV0ZXM6IHtcbiAgICAgICAgZXhwaXJlczogb3B0aW9ucy5hZHZhbmNlZD8uZGVmYXVsdENvb2tpZUF0dHJpYnV0ZXM/LmV4cGlyZXMsXG4gICAgICAgIHNlY3VyZTogb3B0aW9ucy5hZHZhbmNlZD8uZGVmYXVsdENvb2tpZUF0dHJpYnV0ZXM/LnNlY3VyZSxcbiAgICAgICAgc2FtZVNpdGU6IG9wdGlvbnMuYWR2YW5jZWQ/LmRlZmF1bHRDb29raWVBdHRyaWJ1dGVzPy5zYW1lU2l0ZSxcbiAgICAgICAgZG9tYWluOiAhIW9wdGlvbnMuYWR2YW5jZWQ/LmRlZmF1bHRDb29raWVBdHRyaWJ1dGVzPy5kb21haW4sXG4gICAgICAgIHBhdGg6IG9wdGlvbnMuYWR2YW5jZWQ/LmRlZmF1bHRDb29raWVBdHRyaWJ1dGVzPy5wYXRoLFxuICAgICAgICBodHRwT25seTogb3B0aW9ucy5hZHZhbmNlZD8uZGVmYXVsdENvb2tpZUF0dHJpYnV0ZXM/Lmh0dHBPbmx5XG4gICAgICB9XG4gICAgfSxcbiAgICB0cnVzdGVkT3JpZ2luczogb3B0aW9ucy50cnVzdGVkT3JpZ2lucz8ubGVuZ3RoLFxuICAgIHJhdGVMaW1pdDoge1xuICAgICAgc3RvcmFnZTogb3B0aW9ucy5yYXRlTGltaXQ/LnN0b3JhZ2UsXG4gICAgICBtb2RlbE5hbWU6IG9wdGlvbnMucmF0ZUxpbWl0Py5tb2RlbE5hbWUsXG4gICAgICB3aW5kb3c6IG9wdGlvbnMucmF0ZUxpbWl0Py53aW5kb3csXG4gICAgICBjdXN0b21TdG9yYWdlOiAhIW9wdGlvbnMucmF0ZUxpbWl0Py5jdXN0b21TdG9yYWdlLFxuICAgICAgZW5hYmxlZDogb3B0aW9ucy5yYXRlTGltaXQ/LmVuYWJsZWQsXG4gICAgICBtYXg6IG9wdGlvbnMucmF0ZUxpbWl0Py5tYXhcbiAgICB9LFxuICAgIG9uQVBJRXJyb3I6IHtcbiAgICAgIGVycm9yVVJMOiBvcHRpb25zLm9uQVBJRXJyb3I/LmVycm9yVVJMLFxuICAgICAgb25FcnJvcjogISFvcHRpb25zLm9uQVBJRXJyb3I/Lm9uRXJyb3IsXG4gICAgICB0aHJvdzogb3B0aW9ucy5vbkFQSUVycm9yPy50aHJvd1xuICAgIH0sXG4gICAgbG9nZ2VyOiB7XG4gICAgICBkaXNhYmxlZDogb3B0aW9ucy5sb2dnZXI/LmRpc2FibGVkLFxuICAgICAgbGV2ZWw6IG9wdGlvbnMubG9nZ2VyPy5sZXZlbCxcbiAgICAgIGxvZzogISFvcHRpb25zLmxvZ2dlcj8ubG9nXG4gICAgfSxcbiAgICBkYXRhYmFzZUhvb2tzOiB7XG4gICAgICB1c2VyOiB7XG4gICAgICAgIGNyZWF0ZToge1xuICAgICAgICAgIGFmdGVyOiAhIW9wdGlvbnMuZGF0YWJhc2VIb29rcz8udXNlcj8uY3JlYXRlPy5hZnRlcixcbiAgICAgICAgICBiZWZvcmU6ICEhb3B0aW9ucy5kYXRhYmFzZUhvb2tzPy51c2VyPy5jcmVhdGU/LmJlZm9yZVxuICAgICAgICB9LFxuICAgICAgICB1cGRhdGU6IHtcbiAgICAgICAgICBhZnRlcjogISFvcHRpb25zLmRhdGFiYXNlSG9va3M/LnVzZXI/LnVwZGF0ZT8uYWZ0ZXIsXG4gICAgICAgICAgYmVmb3JlOiAhIW9wdGlvbnMuZGF0YWJhc2VIb29rcz8udXNlcj8udXBkYXRlPy5iZWZvcmVcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNlc3Npb246IHtcbiAgICAgICAgY3JlYXRlOiB7XG4gICAgICAgICAgYWZ0ZXI6ICEhb3B0aW9ucy5kYXRhYmFzZUhvb2tzPy5zZXNzaW9uPy5jcmVhdGU/LmFmdGVyLFxuICAgICAgICAgIGJlZm9yZTogISFvcHRpb25zLmRhdGFiYXNlSG9va3M/LnNlc3Npb24/LmNyZWF0ZT8uYmVmb3JlXG4gICAgICAgIH0sXG4gICAgICAgIHVwZGF0ZToge1xuICAgICAgICAgIGFmdGVyOiAhIW9wdGlvbnMuZGF0YWJhc2VIb29rcz8uc2Vzc2lvbj8udXBkYXRlPy5hZnRlcixcbiAgICAgICAgICBiZWZvcmU6ICEhb3B0aW9ucy5kYXRhYmFzZUhvb2tzPy5zZXNzaW9uPy51cGRhdGU/LmJlZm9yZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgYWNjb3VudDoge1xuICAgICAgICBjcmVhdGU6IHtcbiAgICAgICAgICBhZnRlcjogISFvcHRpb25zLmRhdGFiYXNlSG9va3M/LmFjY291bnQ/LmNyZWF0ZT8uYWZ0ZXIsXG4gICAgICAgICAgYmVmb3JlOiAhIW9wdGlvbnMuZGF0YWJhc2VIb29rcz8uYWNjb3VudD8uY3JlYXRlPy5iZWZvcmVcbiAgICAgICAgfSxcbiAgICAgICAgdXBkYXRlOiB7XG4gICAgICAgICAgYWZ0ZXI6ICEhb3B0aW9ucy5kYXRhYmFzZUhvb2tzPy5hY2NvdW50Py51cGRhdGU/LmFmdGVyLFxuICAgICAgICAgIGJlZm9yZTogISFvcHRpb25zLmRhdGFiYXNlSG9va3M/LmFjY291bnQ/LnVwZGF0ZT8uYmVmb3JlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB2ZXJpZmljYXRpb246IHtcbiAgICAgICAgY3JlYXRlOiB7XG4gICAgICAgICAgYWZ0ZXI6ICEhb3B0aW9ucy5kYXRhYmFzZUhvb2tzPy52ZXJpZmljYXRpb24/LmNyZWF0ZT8uYWZ0ZXIsXG4gICAgICAgICAgYmVmb3JlOiAhIW9wdGlvbnMuZGF0YWJhc2VIb29rcz8udmVyaWZpY2F0aW9uPy5jcmVhdGU/LmJlZm9yZVxuICAgICAgICB9LFxuICAgICAgICB1cGRhdGU6IHtcbiAgICAgICAgICBhZnRlcjogISFvcHRpb25zLmRhdGFiYXNlSG9va3M/LnZlcmlmaWNhdGlvbj8udXBkYXRlPy5hZnRlcixcbiAgICAgICAgICBiZWZvcmU6ICEhb3B0aW9ucy5kYXRhYmFzZUhvb2tzPy52ZXJpZmljYXRpb24/LnVwZGF0ZT8uYmVmb3JlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVRlbGVtZXRyeShvcHRpb25zLCBjb250ZXh0KSB7XG4gIGNvbnN0IGRlYnVnRW5hYmxlZCA9IG9wdGlvbnMudGVsZW1ldHJ5Py5kZWJ1ZyB8fCBnZXRCb29sZWFuRW52VmFyKFwiQkVUVEVSX0FVVEhfVEVMRU1FVFJZX0RFQlVHXCIsIGZhbHNlKTtcbiAgY29uc3QgVEVMRU1FVFJZX0VORFBPSU5UID0gRU5WLkJFVFRFUl9BVVRIX1RFTEVNRVRSWV9FTkRQT0lOVDtcbiAgY29uc3QgdHJhY2sgPSBhc3luYyAoZXZlbnQpID0+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKGNvbnRleHQ/LmN1c3RvbVRyYWNrKSB7XG4gICAgICAgIGF3YWl0IGNvbnRleHQuY3VzdG9tVHJhY2soZXZlbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGRlYnVnRW5hYmxlZCkge1xuICAgICAgICAgIGF3YWl0IFByb21pc2UucmVzb2x2ZShcbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKFwidGVsZW1ldHJ5IGV2ZW50XCIsIEpTT04uc3RyaW5naWZ5KGV2ZW50LCBudWxsLCAyKSlcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGF3YWl0IGJldHRlckZldGNoKFRFTEVNRVRSWV9FTkRQT0lOVCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGJvZHk6IGV2ZW50XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIHtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGlzRW5hYmxlZCA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB0ZWxlbWV0cnlFbmFibGVkID0gb3B0aW9ucy50ZWxlbWV0cnk/LmVuYWJsZWQgIT09IHZvaWQgMCA/IG9wdGlvbnMudGVsZW1ldHJ5LmVuYWJsZWQgOiBmYWxzZTtcbiAgICBjb25zdCBlbnZFbmFibGVkID0gZ2V0Qm9vbGVhbkVudlZhcihcIkJFVFRFUl9BVVRIX1RFTEVNRVRSWVwiLCBmYWxzZSk7XG4gICAgcmV0dXJuIChlbnZFbmFibGVkIHx8IHRlbGVtZXRyeUVuYWJsZWQpICYmIChjb250ZXh0Py5za2lwVGVzdENoZWNrIHx8ICFpc1Rlc3QoKSk7XG4gIH07XG4gIGNvbnN0IGVuYWJsZWQgPSBhd2FpdCBpc0VuYWJsZWQoKTtcbiAgbGV0IGFub255bW91c0lkO1xuICBpZiAoZW5hYmxlZCkge1xuICAgIGFub255bW91c0lkID0gYXdhaXQgZ2V0UHJvamVjdElkKG9wdGlvbnMuYmFzZVVSTCk7XG4gICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgIGNvbmZpZzogZ2V0VGVsZW1ldHJ5QXV0aENvbmZpZyhvcHRpb25zKSxcbiAgICAgIHJ1bnRpbWU6IGRldGVjdFJ1bnRpbWUoKSxcbiAgICAgIGRhdGFiYXNlOiBhd2FpdCBkZXRlY3REYXRhYmFzZSgpLFxuICAgICAgZnJhbWV3b3JrOiBhd2FpdCBkZXRlY3RGcmFtZXdvcmsoKSxcbiAgICAgIGVudmlyb25tZW50OiBkZXRlY3RFbnZpcm9ubWVudCgpLFxuICAgICAgc3lzdGVtSW5mbzogYXdhaXQgZGV0ZWN0U3lzdGVtSW5mbygpLFxuICAgICAgcGFja2FnZU1hbmFnZXI6IGRldGVjdFBhY2thZ2VNYW5hZ2VyKClcbiAgICB9O1xuICAgIHZvaWQgdHJhY2soeyB0eXBlOiBcImluaXRcIiwgcGF5bG9hZCwgYW5vbnltb3VzSWQgfSk7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBwdWJsaXNoOiBhc3luYyAoZXZlbnQpID0+IHtcbiAgICAgIGlmICghZW5hYmxlZCkgcmV0dXJuO1xuICAgICAgaWYgKCFhbm9ueW1vdXNJZCkge1xuICAgICAgICBhbm9ueW1vdXNJZCA9IGF3YWl0IGdldFByb2plY3RJZChvcHRpb25zLmJhc2VVUkwpO1xuICAgICAgfVxuICAgICAgYXdhaXQgdHJhY2soe1xuICAgICAgICB0eXBlOiBldmVudC50eXBlLFxuICAgICAgICBwYXlsb2FkOiBldmVudC5wYXlsb2FkLFxuICAgICAgICBhbm9ueW1vdXNJZFxuICAgICAgfSk7XG4gICAgfVxuICB9O1xufVxuXG5jb25zdCBpbml0ID0gYXN5bmMgKG9wdGlvbnMpID0+IHtcbiAgY29uc3QgYWRhcHRlciA9IGF3YWl0IGdldEFkYXB0ZXIob3B0aW9ucyk7XG4gIGNvbnN0IHBsdWdpbnMgPSBvcHRpb25zLnBsdWdpbnMgfHwgW107XG4gIGNvbnN0IGludGVybmFsUGx1Z2lucyA9IGdldEludGVybmFsUGx1Z2lucyhvcHRpb25zKTtcbiAgY29uc3QgbG9nZ2VyID0gY3JlYXRlTG9nZ2VyKG9wdGlvbnMubG9nZ2VyKTtcbiAgY29uc3QgYmFzZVVSTCA9IGdldEJhc2VVUkwob3B0aW9ucy5iYXNlVVJMLCBvcHRpb25zLmJhc2VQYXRoKTtcbiAgY29uc3Qgc2VjcmV0ID0gb3B0aW9ucy5zZWNyZXQgfHwgZW52LkJFVFRFUl9BVVRIX1NFQ1JFVCB8fCBlbnYuQVVUSF9TRUNSRVQgfHwgREVGQVVMVF9TRUNSRVQ7XG4gIGlmIChzZWNyZXQgPT09IERFRkFVTFRfU0VDUkVUKSB7XG4gICAgaWYgKGlzUHJvZHVjdGlvbikge1xuICAgICAgbG9nZ2VyLmVycm9yKFxuICAgICAgICBcIllvdSBhcmUgdXNpbmcgdGhlIGRlZmF1bHQgc2VjcmV0LiBQbGVhc2Ugc2V0IGBCRVRURVJfQVVUSF9TRUNSRVRgIGluIHlvdXIgZW52aXJvbm1lbnQgdmFyaWFibGVzIG9yIHBhc3MgYHNlY3JldGAgaW4geW91ciBhdXRoIGNvbmZpZy5cIlxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgb3B0aW9ucyA9IHtcbiAgICAuLi5vcHRpb25zLFxuICAgIHNlY3JldCxcbiAgICBiYXNlVVJMOiBiYXNlVVJMID8gbmV3IFVSTChiYXNlVVJMKS5vcmlnaW4gOiBcIlwiLFxuICAgIGJhc2VQYXRoOiBvcHRpb25zLmJhc2VQYXRoIHx8IFwiL2FwaS9hdXRoXCIsXG4gICAgcGx1Z2luczogcGx1Z2lucy5jb25jYXQoaW50ZXJuYWxQbHVnaW5zKVxuICB9O1xuICBjaGVja0VuZHBvaW50Q29uZmxpY3RzKG9wdGlvbnMsIGxvZ2dlcik7XG4gIGNvbnN0IGNvb2tpZXMgPSBnZXRDb29raWVzKG9wdGlvbnMpO1xuICBjb25zdCB0YWJsZXMgPSBnZXRBdXRoVGFibGVzKG9wdGlvbnMpO1xuICBjb25zdCBwcm92aWRlcnMgPSBPYmplY3QuZW50cmllcyhcbiAgICBvcHRpb25zLnNvY2lhbFByb3ZpZGVycyB8fCB7fVxuICApLm1hcCgoW2tleSwgY29uZmlnXSkgPT4ge1xuICAgIGlmIChjb25maWcgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmIChjb25maWcuZW5hYmxlZCA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoIWNvbmZpZy5jbGllbnRJZCkge1xuICAgICAgbG9nZ2VyLndhcm4oXG4gICAgICAgIGBTb2NpYWwgcHJvdmlkZXIgJHtrZXl9IGlzIG1pc3NpbmcgY2xpZW50SWQgb3IgY2xpZW50U2VjcmV0YFxuICAgICAgKTtcbiAgICB9XG4gICAgY29uc3QgcHJvdmlkZXIgPSBzb2NpYWxQcm92aWRlcnNba2V5XShjb25maWcpO1xuICAgIHByb3ZpZGVyLmRpc2FibGVJbXBsaWNpdFNpZ25VcCA9IGNvbmZpZy5kaXNhYmxlSW1wbGljaXRTaWduVXA7XG4gICAgcmV0dXJuIHByb3ZpZGVyO1xuICB9KS5maWx0ZXIoKHgpID0+IHggIT09IG51bGwpO1xuICBjb25zdCBnZW5lcmF0ZUlkRnVuYyA9ICh7IG1vZGVsLCBzaXplIH0pID0+IHtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuYWR2YW5jZWQ/LmdlbmVyYXRlSWQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgcmV0dXJuIG9wdGlvbnMuYWR2YW5jZWQuZ2VuZXJhdGVJZCh7IG1vZGVsLCBzaXplIH0pO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG9wdGlvbnM/LmFkdmFuY2VkPy5kYXRhYmFzZT8uZ2VuZXJhdGVJZCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICByZXR1cm4gb3B0aW9ucy5hZHZhbmNlZC5kYXRhYmFzZS5nZW5lcmF0ZUlkKHsgbW9kZWwsIHNpemUgfSk7XG4gICAgfVxuICAgIHJldHVybiBnZW5lcmF0ZUlkKHNpemUpO1xuICB9O1xuICBjb25zdCB7IHB1Ymxpc2ggfSA9IGF3YWl0IGNyZWF0ZVRlbGVtZXRyeShvcHRpb25zLCB7XG4gICAgYWRhcHRlcjogYWRhcHRlci5pZCxcbiAgICBkYXRhYmFzZTogdHlwZW9mIG9wdGlvbnMuZGF0YWJhc2UgPT09IFwiZnVuY3Rpb25cIiA/IFwiYWRhcHRlclwiIDogZ2V0S3lzZWx5RGF0YWJhc2VUeXBlKG9wdGlvbnMuZGF0YWJhc2UpIHx8IFwidW5rbm93blwiXG4gIH0pO1xuICBsZXQgY3R4ID0ge1xuICAgIGFwcE5hbWU6IG9wdGlvbnMuYXBwTmFtZSB8fCBcIkJldHRlciBBdXRoXCIsXG4gICAgc29jaWFsUHJvdmlkZXJzOiBwcm92aWRlcnMsXG4gICAgb3B0aW9ucyxcbiAgICB0YWJsZXMsXG4gICAgdHJ1c3RlZE9yaWdpbnM6IGdldFRydXN0ZWRPcmlnaW5zKG9wdGlvbnMpLFxuICAgIGJhc2VVUkw6IGJhc2VVUkwgfHwgXCJcIixcbiAgICBzZXNzaW9uQ29uZmlnOiB7XG4gICAgICB1cGRhdGVBZ2U6IG9wdGlvbnMuc2Vzc2lvbj8udXBkYXRlQWdlICE9PSB2b2lkIDAgPyBvcHRpb25zLnNlc3Npb24udXBkYXRlQWdlIDogMjQgKiA2MCAqIDYwLFxuICAgICAgLy8gMjQgaG91cnNcbiAgICAgIGV4cGlyZXNJbjogb3B0aW9ucy5zZXNzaW9uPy5leHBpcmVzSW4gfHwgNjAgKiA2MCAqIDI0ICogNyxcbiAgICAgIC8vIDcgZGF5c1xuICAgICAgZnJlc2hBZ2U6IG9wdGlvbnMuc2Vzc2lvbj8uZnJlc2hBZ2UgPT09IHZvaWQgMCA/IDYwICogNjAgKiAyNCA6IG9wdGlvbnMuc2Vzc2lvbi5mcmVzaEFnZVxuICAgIH0sXG4gICAgc2VjcmV0LFxuICAgIHJhdGVMaW1pdDoge1xuICAgICAgLi4ub3B0aW9ucy5yYXRlTGltaXQsXG4gICAgICBlbmFibGVkOiBvcHRpb25zLnJhdGVMaW1pdD8uZW5hYmxlZCA/PyBpc1Byb2R1Y3Rpb24sXG4gICAgICB3aW5kb3c6IG9wdGlvbnMucmF0ZUxpbWl0Py53aW5kb3cgfHwgMTAsXG4gICAgICBtYXg6IG9wdGlvbnMucmF0ZUxpbWl0Py5tYXggfHwgMTAwLFxuICAgICAgc3RvcmFnZTogb3B0aW9ucy5yYXRlTGltaXQ/LnN0b3JhZ2UgfHwgKG9wdGlvbnMuc2Vjb25kYXJ5U3RvcmFnZSA/IFwic2Vjb25kYXJ5LXN0b3JhZ2VcIiA6IFwibWVtb3J5XCIpXG4gICAgfSxcbiAgICBhdXRoQ29va2llczogY29va2llcyxcbiAgICBsb2dnZXIsXG4gICAgZ2VuZXJhdGVJZDogZ2VuZXJhdGVJZEZ1bmMsXG4gICAgc2Vzc2lvbjogbnVsbCxcbiAgICBzZWNvbmRhcnlTdG9yYWdlOiBvcHRpb25zLnNlY29uZGFyeVN0b3JhZ2UsXG4gICAgcGFzc3dvcmQ6IHtcbiAgICAgIGhhc2g6IG9wdGlvbnMuZW1haWxBbmRQYXNzd29yZD8ucGFzc3dvcmQ/Lmhhc2ggfHwgaGFzaFBhc3N3b3JkLFxuICAgICAgdmVyaWZ5OiBvcHRpb25zLmVtYWlsQW5kUGFzc3dvcmQ/LnBhc3N3b3JkPy52ZXJpZnkgfHwgdmVyaWZ5UGFzc3dvcmQsXG4gICAgICBjb25maWc6IHtcbiAgICAgICAgbWluUGFzc3dvcmRMZW5ndGg6IG9wdGlvbnMuZW1haWxBbmRQYXNzd29yZD8ubWluUGFzc3dvcmRMZW5ndGggfHwgOCxcbiAgICAgICAgbWF4UGFzc3dvcmRMZW5ndGg6IG9wdGlvbnMuZW1haWxBbmRQYXNzd29yZD8ubWF4UGFzc3dvcmRMZW5ndGggfHwgMTI4XG4gICAgICB9LFxuICAgICAgY2hlY2tQYXNzd29yZFxuICAgIH0sXG4gICAgc2V0TmV3U2Vzc2lvbihzZXNzaW9uKSB7XG4gICAgICB0aGlzLm5ld1Nlc3Npb24gPSBzZXNzaW9uO1xuICAgIH0sXG4gICAgbmV3U2Vzc2lvbjogbnVsbCxcbiAgICBhZGFwdGVyLFxuICAgIGludGVybmFsQWRhcHRlcjogY3JlYXRlSW50ZXJuYWxBZGFwdGVyKGFkYXB0ZXIsIHtcbiAgICAgIG9wdGlvbnMsXG4gICAgICBsb2dnZXIsXG4gICAgICBob29rczogb3B0aW9ucy5kYXRhYmFzZUhvb2tzID8gW29wdGlvbnMuZGF0YWJhc2VIb29rc10gOiBbXX0pLFxuICAgIGNyZWF0ZUF1dGhDb29raWU6IGNyZWF0ZUNvb2tpZUdldHRlcihvcHRpb25zKSxcbiAgICBhc3luYyBydW5NaWdyYXRpb25zKCkge1xuICAgICAgaWYgKCFvcHRpb25zLmRhdGFiYXNlIHx8IFwidXBkYXRlTWFueVwiIGluIG9wdGlvbnMuZGF0YWJhc2UpIHtcbiAgICAgICAgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcbiAgICAgICAgICBcIkRhdGFiYXNlIGlzIG5vdCBwcm92aWRlZCBvciBpdCdzIGFuIGFkYXB0ZXIuIE1pZ3JhdGlvbnMgYXJlIG9ubHkgc3VwcG9ydGVkIHdpdGggYSBkYXRhYmFzZSBpbnN0YW5jZS5cIlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgY29uc3QgeyBydW5NaWdyYXRpb25zIH0gPSBhd2FpdCBnZXRNaWdyYXRpb25zKG9wdGlvbnMpO1xuICAgICAgYXdhaXQgcnVuTWlncmF0aW9ucygpO1xuICAgIH0sXG4gICAgcHVibGlzaFRlbGVtZXRyeTogcHVibGlzaFxuICB9O1xuICBsZXQgeyBjb250ZXh0IH0gPSBydW5QbHVnaW5Jbml0KGN0eCk7XG4gIHJldHVybiBjb250ZXh0O1xufTtcbmZ1bmN0aW9uIHJ1blBsdWdpbkluaXQoY3R4KSB7XG4gIGxldCBvcHRpb25zID0gY3R4Lm9wdGlvbnM7XG4gIGNvbnN0IHBsdWdpbnMgPSBvcHRpb25zLnBsdWdpbnMgfHwgW107XG4gIGxldCBjb250ZXh0ID0gY3R4O1xuICBjb25zdCBkYkhvb2tzID0gW107XG4gIGZvciAoY29uc3QgcGx1Z2luIG9mIHBsdWdpbnMpIHtcbiAgICBpZiAocGx1Z2luLmluaXQpIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHBsdWdpbi5pbml0KGNvbnRleHQpO1xuICAgICAgaWYgKHR5cGVvZiByZXN1bHQgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgaWYgKHJlc3VsdC5vcHRpb25zKSB7XG4gICAgICAgICAgY29uc3QgeyBkYXRhYmFzZUhvb2tzLCAuLi5yZXN0T3B0cyB9ID0gcmVzdWx0Lm9wdGlvbnM7XG4gICAgICAgICAgaWYgKGRhdGFiYXNlSG9va3MpIHtcbiAgICAgICAgICAgIGRiSG9va3MucHVzaChkYXRhYmFzZUhvb2tzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgb3B0aW9ucyA9IGRlZnUob3B0aW9ucywgcmVzdE9wdHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXN1bHQuY29udGV4dCkge1xuICAgICAgICAgIGNvbnRleHQgPSB7XG4gICAgICAgICAgICAuLi5jb250ZXh0LFxuICAgICAgICAgICAgLi4ucmVzdWx0LmNvbnRleHRcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGRiSG9va3MucHVzaChvcHRpb25zLmRhdGFiYXNlSG9va3MpO1xuICBjb250ZXh0LmludGVybmFsQWRhcHRlciA9IGNyZWF0ZUludGVybmFsQWRhcHRlcihjdHguYWRhcHRlciwge1xuICAgIG9wdGlvbnMsXG4gICAgbG9nZ2VyOiBjdHgubG9nZ2VyLFxuICAgIGhvb2tzOiBkYkhvb2tzLmZpbHRlcigodSkgPT4gdSAhPT0gdm9pZCAwKSxcbiAgICBnZW5lcmF0ZUlkOiBjdHguZ2VuZXJhdGVJZFxuICB9KTtcbiAgY29udGV4dC5vcHRpb25zID0gb3B0aW9ucztcbiAgcmV0dXJuIHsgY29udGV4dCB9O1xufVxuZnVuY3Rpb24gZ2V0SW50ZXJuYWxQbHVnaW5zKG9wdGlvbnMpIHtcbiAgY29uc3QgcGx1Z2lucyA9IFtdO1xuICBpZiAob3B0aW9ucy5hZHZhbmNlZD8uY3Jvc3NTdWJEb21haW5Db29raWVzPy5lbmFibGVkKSA7XG4gIHJldHVybiBwbHVnaW5zO1xufVxuZnVuY3Rpb24gZ2V0VHJ1c3RlZE9yaWdpbnMob3B0aW9ucykge1xuICBjb25zdCBiYXNlVVJMID0gZ2V0QmFzZVVSTChvcHRpb25zLmJhc2VVUkwsIG9wdGlvbnMuYmFzZVBhdGgpO1xuICBpZiAoIWJhc2VVUkwpIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgY29uc3QgdHJ1c3RlZE9yaWdpbnMgPSBbbmV3IFVSTChiYXNlVVJMKS5vcmlnaW5dO1xuICBpZiAob3B0aW9ucy50cnVzdGVkT3JpZ2lucyAmJiBBcnJheS5pc0FycmF5KG9wdGlvbnMudHJ1c3RlZE9yaWdpbnMpKSB7XG4gICAgdHJ1c3RlZE9yaWdpbnMucHVzaCguLi5vcHRpb25zLnRydXN0ZWRPcmlnaW5zKTtcbiAgfVxuICBjb25zdCBlbnZUcnVzdGVkT3JpZ2lucyA9IGVudi5CRVRURVJfQVVUSF9UUlVTVEVEX09SSUdJTlM7XG4gIGlmIChlbnZUcnVzdGVkT3JpZ2lucykge1xuICAgIHRydXN0ZWRPcmlnaW5zLnB1c2goLi4uZW52VHJ1c3RlZE9yaWdpbnMuc3BsaXQoXCIsXCIpKTtcbiAgfVxuICBpZiAodHJ1c3RlZE9yaWdpbnMuZmlsdGVyKCh4KSA9PiAheCkubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcbiAgICAgIFwiQSBwcm92aWRlZCB0cnVzdGVkIG9yaWdpbiBpcyBpbnZhbGlkLCBtYWtlIHN1cmUgeW91ciB0cnVzdGVkIG9yaWdpbnMgbGlzdCBpcyBwcm9wZXJseSBkZWZpbmVkLlwiXG4gICAgKTtcbiAgfVxuICByZXR1cm4gdHJ1c3RlZE9yaWdpbnM7XG59XG5cbmNvbnN0IGJldHRlckF1dGggPSAob3B0aW9ucykgPT4ge1xuICBjb25zdCBhdXRoQ29udGV4dCA9IGluaXQob3B0aW9ucyk7XG4gIGNvbnN0IHsgYXBpIH0gPSBnZXRFbmRwb2ludHMoYXV0aENvbnRleHQsIG9wdGlvbnMpO1xuICBjb25zdCBlcnJvckNvZGVzID0gb3B0aW9ucy5wbHVnaW5zPy5yZWR1Y2UoKGFjYywgcGx1Z2luKSA9PiB7XG4gICAgaWYgKHBsdWdpbi4kRVJST1JfQ09ERVMpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLmFjYyxcbiAgICAgICAgLi4ucGx1Z2luLiRFUlJPUl9DT0RFU1xuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGFjYztcbiAgfSwge30pO1xuICByZXR1cm4ge1xuICAgIGhhbmRsZXI6IGFzeW5jIChyZXF1ZXN0KSA9PiB7XG4gICAgICBjb25zdCBjdHggPSBhd2FpdCBhdXRoQ29udGV4dDtcbiAgICAgIGNvbnN0IGJhc2VQYXRoID0gY3R4Lm9wdGlvbnMuYmFzZVBhdGggfHwgXCIvYXBpL2F1dGhcIjtcbiAgICAgIGlmICghY3R4Lm9wdGlvbnMuYmFzZVVSTCkge1xuICAgICAgICBjb25zdCBiYXNlVVJMID0gZ2V0QmFzZVVSTCh2b2lkIDAsIGJhc2VQYXRoLCByZXF1ZXN0KTtcbiAgICAgICAgaWYgKGJhc2VVUkwpIHtcbiAgICAgICAgICBjdHguYmFzZVVSTCA9IGJhc2VVUkw7XG4gICAgICAgICAgY3R4Lm9wdGlvbnMuYmFzZVVSTCA9IGdldE9yaWdpbihjdHguYmFzZVVSTCkgfHwgdm9pZCAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXG4gICAgICAgICAgICBcIkNvdWxkIG5vdCBnZXQgYmFzZSBVUkwgZnJvbSByZXF1ZXN0LiBQbGVhc2UgcHJvdmlkZSBhIHZhbGlkIGJhc2UgVVJMLlwiXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY3R4LnRydXN0ZWRPcmlnaW5zID0gW1xuICAgICAgICAuLi5vcHRpb25zLnRydXN0ZWRPcmlnaW5zID8gQXJyYXkuaXNBcnJheShvcHRpb25zLnRydXN0ZWRPcmlnaW5zKSA/IG9wdGlvbnMudHJ1c3RlZE9yaWdpbnMgOiBhd2FpdCBvcHRpb25zLnRydXN0ZWRPcmlnaW5zKHJlcXVlc3QpIDogW10sXG4gICAgICAgIGN0eC5vcHRpb25zLmJhc2VVUkxcbiAgICAgIF07XG4gICAgICBjb25zdCB7IGhhbmRsZXIgfSA9IHJvdXRlcihjdHgsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIGhhbmRsZXIocmVxdWVzdCk7XG4gICAgfSxcbiAgICBhcGksXG4gICAgb3B0aW9ucyxcbiAgICAkY29udGV4dDogYXV0aENvbnRleHQsXG4gICAgJEluZmVyOiB7fSxcbiAgICAkRVJST1JfQ09ERVM6IHtcbiAgICAgIC4uLmVycm9yQ29kZXMsXG4gICAgICAuLi5CQVNFX0VSUk9SX0NPREVTXG4gICAgfVxuICB9O1xufTtcblxuZXhwb3J0IHsgYmV0dGVyQXV0aCBhcyBiLCBjcmVhdGVUZWxlbWV0cnkgYXMgYywgZ2V0VGVsZW1ldHJ5QXV0aENvbmZpZyBhcyBnIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/shared/better-auth.DlWzob1-.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/shared/better-auth.O2VtDkDK.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/shared/better-auth.O2VtDkDK.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   g: () => (/* binding */ getIp)\n/* harmony export */ });\n/* harmony import */ var _better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./better-auth.CMQ3rA-I.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.CMQ3rA-I.mjs\");\n\n\nfunction getIp(req, options) {\n  if (options.advanced?.ipAddress?.disableIpTracking) {\n    return null;\n  }\n  if ((0,_better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_0__.i)()) {\n    return \"127.0.0.1\";\n  }\n  const headers = \"headers\" in req ? req.headers : req;\n  const defaultHeaders = [\"x-forwarded-for\"];\n  const ipHeaders = options.advanced?.ipAddress?.ipAddressHeaders || defaultHeaders;\n  for (const key of ipHeaders) {\n    const value = \"get\" in headers ? headers.get(key) : headers[key];\n    if (typeof value === \"string\") {\n      const ip = value.split(\",\")[0].trim();\n      if (isValidIP(ip)) {\n        return ip;\n      }\n    }\n  }\n  return null;\n}\nfunction isValidIP(ip) {\n  const ipv4Regex = /^(\\d{1,3}\\.){3}\\d{1,3}$/;\n  if (ipv4Regex.test(ip)) {\n    const parts = ip.split(\".\").map(Number);\n    return parts.every((part) => part >= 0 && part <= 255);\n  }\n  const ipv6Regex = /^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$/;\n  return ipv6Regex.test(ip);\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9zaGFyZWQvYmV0dGVyLWF1dGguTzJWdERrREsubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXlEOztBQUV6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sNERBQU07QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLElBQUksSUFBSSxFQUFFLEdBQUcsSUFBSTtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxJQUFJLEdBQUcsRUFBRSxZQUFZLElBQUk7QUFDNUQ7QUFDQTs7QUFFc0IiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYW1hYW5cXE9uZURyaXZlXFxEZXNrdG9wXFxLYW5kaWRfMlxcTmV3IGZvbGRlciAoMilcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHNoYXJlZFxcYmV0dGVyLWF1dGguTzJWdERrREsubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGkgYXMgaXNUZXN0IH0gZnJvbSAnLi9iZXR0ZXItYXV0aC5DTVEzckEtSS5tanMnO1xuXG5mdW5jdGlvbiBnZXRJcChyZXEsIG9wdGlvbnMpIHtcbiAgaWYgKG9wdGlvbnMuYWR2YW5jZWQ/LmlwQWRkcmVzcz8uZGlzYWJsZUlwVHJhY2tpbmcpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBpZiAoaXNUZXN0KCkpIHtcbiAgICByZXR1cm4gXCIxMjcuMC4wLjFcIjtcbiAgfVxuICBjb25zdCBoZWFkZXJzID0gXCJoZWFkZXJzXCIgaW4gcmVxID8gcmVxLmhlYWRlcnMgOiByZXE7XG4gIGNvbnN0IGRlZmF1bHRIZWFkZXJzID0gW1wieC1mb3J3YXJkZWQtZm9yXCJdO1xuICBjb25zdCBpcEhlYWRlcnMgPSBvcHRpb25zLmFkdmFuY2VkPy5pcEFkZHJlc3M/LmlwQWRkcmVzc0hlYWRlcnMgfHwgZGVmYXVsdEhlYWRlcnM7XG4gIGZvciAoY29uc3Qga2V5IG9mIGlwSGVhZGVycykge1xuICAgIGNvbnN0IHZhbHVlID0gXCJnZXRcIiBpbiBoZWFkZXJzID8gaGVhZGVycy5nZXQoa2V5KSA6IGhlYWRlcnNba2V5XTtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBjb25zdCBpcCA9IHZhbHVlLnNwbGl0KFwiLFwiKVswXS50cmltKCk7XG4gICAgICBpZiAoaXNWYWxpZElQKGlwKSkge1xuICAgICAgICByZXR1cm4gaXA7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gaXNWYWxpZElQKGlwKSB7XG4gIGNvbnN0IGlwdjRSZWdleCA9IC9eKFxcZHsxLDN9XFwuKXszfVxcZHsxLDN9JC87XG4gIGlmIChpcHY0UmVnZXgudGVzdChpcCkpIHtcbiAgICBjb25zdCBwYXJ0cyA9IGlwLnNwbGl0KFwiLlwiKS5tYXAoTnVtYmVyKTtcbiAgICByZXR1cm4gcGFydHMuZXZlcnkoKHBhcnQpID0+IHBhcnQgPj0gMCAmJiBwYXJ0IDw9IDI1NSk7XG4gIH1cbiAgY29uc3QgaXB2NlJlZ2V4ID0gL14oWzAtOWEtZkEtRl17MSw0fTopezd9WzAtOWEtZkEtRl17MSw0fSQvO1xuICByZXR1cm4gaXB2NlJlZ2V4LnRlc3QoaXApO1xufVxuXG5leHBvcnQgeyBnZXRJcCBhcyBnIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/shared/better-auth.O2VtDkDK.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/shared/better-auth.UfVWArIB.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/shared/better-auth.UfVWArIB.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   a: () => (/* binding */ parseCookies),\n/* harmony export */   b: () => (/* binding */ setCookieCache),\n/* harmony export */   c: () => (/* binding */ createCookieGetter),\n/* harmony export */   d: () => (/* binding */ deleteSessionCookie),\n/* harmony export */   e: () => (/* binding */ setCookieToHeader),\n/* harmony export */   f: () => (/* binding */ getSessionCookie),\n/* harmony export */   g: () => (/* binding */ getCookies),\n/* harmony export */   h: () => (/* binding */ getCookieCache),\n/* harmony export */   m: () => (/* binding */ ms),\n/* harmony export */   p: () => (/* binding */ parseSetCookieHeader),\n/* harmony export */   s: () => (/* binding */ setSessionCookie)\n/* harmony export */ });\n/* harmony import */ var _better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./better-auth.DdzSJf-n.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.DdzSJf-n.mjs\");\n/* harmony import */ var _better_auth_CW6D9eSx_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./better-auth.CW6D9eSx.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.CW6D9eSx.mjs\");\n/* harmony import */ var _better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./better-auth.CMQ3rA-I.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.CMQ3rA-I.mjs\");\n/* harmony import */ var _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @better-auth/utils/base64 */ \"(rsc)/./node_modules/@better-auth/utils/dist/base64.mjs\");\n/* harmony import */ var _better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/utils/hmac */ \"(rsc)/./node_modules/@better-auth/utils/dist/hmac.mjs\");\n/* harmony import */ var _better_auth_BZZKN1g7_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./better-auth.BZZKN1g7.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.BZZKN1g7.mjs\");\n/* harmony import */ var _better_auth_CuS_eDdK_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./better-auth.CuS_eDdK.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.CuS_eDdK.mjs\");\n/* harmony import */ var _better_auth_utils_binary__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/utils/binary */ \"(rsc)/./node_modules/@better-auth/utils/dist/binary.mjs\");\n\n\n\n\n\n\n\n\n\n//#region src/index.ts\nconst s = 1e3;\nconst m = s * 60;\nconst h = m * 60;\nconst d = h * 24;\nconst w = d * 7;\nconst y = d * 365.25;\nconst mo = y / 12;\nfunction ms(value, options) {\n\tif (typeof value === \"string\") return parse(value);\n\telse if (typeof value === \"number\") return format(value);\n\tthrow new Error(`Value provided to ms() must be a string or number. value=${JSON.stringify(value)}`);\n}\n/**\n* Parse the given string and return milliseconds.\n*\n* @param str - A string to parse to milliseconds\n* @returns The parsed value in milliseconds, or `NaN` if the string can't be\n* parsed\n*/\nfunction parse(str) {\n\tif (typeof str !== \"string\" || str.length === 0 || str.length > 100) throw new Error(`Value provided to ms.parse() must be a string with length between 1 and 99. value=${JSON.stringify(str)}`);\n\tconst match = /^(?<value>-?\\d*\\.?\\d+) *(?<unit>milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|months?|mo|years?|yrs?|y)?$/i.exec(str);\n\tif (!match?.groups) return NaN;\n\tconst { value, unit = \"ms\" } = match.groups;\n\tconst n = parseFloat(value);\n\tconst matchUnit = unit.toLowerCase();\n\t/* istanbul ignore next - istanbul doesn't understand, but thankfully the TypeScript the exhaustiveness check in the default case keeps us type safe here */\n\tswitch (matchUnit) {\n\t\tcase \"years\":\n\t\tcase \"year\":\n\t\tcase \"yrs\":\n\t\tcase \"yr\":\n\t\tcase \"y\": return n * y;\n\t\tcase \"months\":\n\t\tcase \"month\":\n\t\tcase \"mo\": return n * mo;\n\t\tcase \"weeks\":\n\t\tcase \"week\":\n\t\tcase \"w\": return n * w;\n\t\tcase \"days\":\n\t\tcase \"day\":\n\t\tcase \"d\": return n * d;\n\t\tcase \"hours\":\n\t\tcase \"hour\":\n\t\tcase \"hrs\":\n\t\tcase \"hr\":\n\t\tcase \"h\": return n * h;\n\t\tcase \"minutes\":\n\t\tcase \"minute\":\n\t\tcase \"mins\":\n\t\tcase \"min\":\n\t\tcase \"m\": return n * m;\n\t\tcase \"seconds\":\n\t\tcase \"second\":\n\t\tcase \"secs\":\n\t\tcase \"sec\":\n\t\tcase \"s\": return n * s;\n\t\tcase \"milliseconds\":\n\t\tcase \"millisecond\":\n\t\tcase \"msecs\":\n\t\tcase \"msec\":\n\t\tcase \"ms\": return n;\n\t\tdefault: throw new Error(`Unknown unit \"${matchUnit}\" provided to ms.parse(). value=${JSON.stringify(str)}`);\n\t}\n}\n/**\n* Short format for `ms`.\n*/\nfunction fmtShort(ms$1) {\n\tconst msAbs = Math.abs(ms$1);\n\tif (msAbs >= y) return `${Math.round(ms$1 / y)}y`;\n\tif (msAbs >= mo) return `${Math.round(ms$1 / mo)}mo`;\n\tif (msAbs >= w) return `${Math.round(ms$1 / w)}w`;\n\tif (msAbs >= d) return `${Math.round(ms$1 / d)}d`;\n\tif (msAbs >= h) return `${Math.round(ms$1 / h)}h`;\n\tif (msAbs >= m) return `${Math.round(ms$1 / m)}m`;\n\tif (msAbs >= s) return `${Math.round(ms$1 / s)}s`;\n\treturn `${ms$1}ms`;\n}\n/**\n* Format the given integer as a string.\n*\n* @param ms - milliseconds\n* @param options - Options for the conversion\n* @returns The formatted string\n*/\nfunction format(ms$1, options) {\n\tif (typeof ms$1 !== \"number\" || !Number.isFinite(ms$1)) throw new Error(\"Value provided to ms.format() must be of type number.\");\n\treturn fmtShort(ms$1);\n}\n\nfunction parseSetCookieHeader(setCookie) {\n  const cookies = /* @__PURE__ */ new Map();\n  const cookieArray = setCookie.split(\", \");\n  cookieArray.forEach((cookieString) => {\n    const parts = cookieString.split(\";\").map((part) => part.trim());\n    const [nameValue, ...attributes] = parts;\n    const [name, ...valueParts] = nameValue.split(\"=\");\n    const value = valueParts.join(\"=\");\n    if (!name || value === void 0) {\n      return;\n    }\n    const attrObj = { value };\n    attributes.forEach((attribute) => {\n      const [attrName, ...attrValueParts] = attribute.split(\"=\");\n      const attrValue = attrValueParts.join(\"=\");\n      const normalizedAttrName = attrName.trim().toLowerCase();\n      switch (normalizedAttrName) {\n        case \"max-age\":\n          attrObj[\"max-age\"] = attrValue ? parseInt(attrValue.trim(), 10) : void 0;\n          break;\n        case \"expires\":\n          attrObj.expires = attrValue ? new Date(attrValue.trim()) : void 0;\n          break;\n        case \"domain\":\n          attrObj.domain = attrValue ? attrValue.trim() : void 0;\n          break;\n        case \"path\":\n          attrObj.path = attrValue ? attrValue.trim() : void 0;\n          break;\n        case \"secure\":\n          attrObj.secure = true;\n          break;\n        case \"httponly\":\n          attrObj.httponly = true;\n          break;\n        case \"samesite\":\n          attrObj.samesite = attrValue ? attrValue.trim().toLowerCase() : void 0;\n          break;\n        default:\n          attrObj[normalizedAttrName] = attrValue ? attrValue.trim() : true;\n          break;\n      }\n    });\n    cookies.set(name, attrObj);\n  });\n  return cookies;\n}\nfunction setCookieToHeader(headers) {\n  return (context) => {\n    const setCookieHeader = context.response.headers.get(\"set-cookie\");\n    if (!setCookieHeader) {\n      return;\n    }\n    const cookieMap = /* @__PURE__ */ new Map();\n    const existingCookiesHeader = headers.get(\"cookie\") || \"\";\n    existingCookiesHeader.split(\";\").forEach((cookie) => {\n      const [name, ...rest] = cookie.trim().split(\"=\");\n      if (name && rest.length > 0) {\n        cookieMap.set(name, rest.join(\"=\"));\n      }\n    });\n    const setCookieHeaders = setCookieHeader.split(\",\");\n    setCookieHeaders.forEach((header) => {\n      const cookies = parseSetCookieHeader(header);\n      cookies.forEach((value, name) => {\n        cookieMap.set(name, value.value);\n      });\n    });\n    const updatedCookies = Array.from(cookieMap.entries()).map(([name, value]) => `${name}=${value}`).join(\"; \");\n    headers.set(\"cookie\", updatedCookies);\n  };\n}\n\nfunction createCookieGetter(options) {\n  const secure = options.advanced?.useSecureCookies !== void 0 ? options.advanced?.useSecureCookies : options.baseURL !== void 0 ? options.baseURL.startsWith(\"https://\") ? true : false : _better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_2__.a;\n  const secureCookiePrefix = secure ? \"__Secure-\" : \"\";\n  const crossSubdomainEnabled = !!options.advanced?.crossSubDomainCookies?.enabled;\n  const domain = crossSubdomainEnabled ? options.advanced?.crossSubDomainCookies?.domain || (options.baseURL ? new URL(options.baseURL).hostname : void 0) : void 0;\n  if (crossSubdomainEnabled && !domain) {\n    throw new _better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_0__.B(\n      \"baseURL is required when crossSubdomainCookies are enabled\"\n    );\n  }\n  function createCookie(cookieName, overrideAttributes = {}) {\n    const prefix = options.advanced?.cookiePrefix || \"better-auth\";\n    const name = options.advanced?.cookies?.[cookieName]?.name || `${prefix}.${cookieName}`;\n    const attributes = options.advanced?.cookies?.[cookieName]?.attributes;\n    return {\n      name: `${secureCookiePrefix}${name}`,\n      attributes: {\n        secure: !!secureCookiePrefix,\n        sameSite: \"lax\",\n        path: \"/\",\n        httpOnly: true,\n        ...crossSubdomainEnabled ? { domain } : {},\n        ...options.advanced?.defaultCookieAttributes,\n        ...overrideAttributes,\n        ...attributes\n      }\n    };\n  }\n  return createCookie;\n}\nfunction getCookies(options) {\n  const createCookie = createCookieGetter(options);\n  const sessionMaxAge = options.session?.expiresIn || ms(\"7d\") / 1e3;\n  const sessionToken = createCookie(\"session_token\", {\n    maxAge: sessionMaxAge\n  });\n  const sessionData = createCookie(\"session_data\", {\n    maxAge: options.session?.cookieCache?.maxAge || 60 * 5\n  });\n  const dontRememberToken = createCookie(\"dont_remember\");\n  return {\n    sessionToken: {\n      name: sessionToken.name,\n      options: sessionToken.attributes\n    },\n    /**\n     * This cookie is used to store the session data in the cookie\n     * This is useful for when you want to cache the session in the cookie\n     */\n    sessionData: {\n      name: sessionData.name,\n      options: sessionData.attributes\n    },\n    dontRememberToken: {\n      name: dontRememberToken.name,\n      options: dontRememberToken.attributes\n    }\n  };\n}\nasync function setCookieCache(ctx, session) {\n  const shouldStoreSessionDataInCookie = ctx.context.options.session?.cookieCache?.enabled;\n  if (shouldStoreSessionDataInCookie) {\n    const filteredSession = Object.entries(session.session).reduce(\n      (acc, [key, value]) => {\n        const fieldConfig = ctx.context.options.session?.additionalFields?.[key];\n        if (!fieldConfig || fieldConfig.returned !== false) {\n          acc[key] = value;\n        }\n        return acc;\n      },\n      {}\n    );\n    const sessionData = { session: filteredSession, user: session.user };\n    const expiresAtDate = (0,_better_auth_CW6D9eSx_mjs__WEBPACK_IMPORTED_MODULE_1__.g)(\n      ctx.context.authCookies.sessionData.options.maxAge || 60,\n      \"sec\"\n    ).getTime();\n    const data = _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_3__.base64Url.encode(\n      JSON.stringify({\n        session: sessionData,\n        expiresAt: expiresAtDate,\n        signature: await (0,_better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_4__.createHMAC)(\"SHA-256\", \"base64urlnopad\").sign(\n          ctx.context.secret,\n          JSON.stringify({\n            ...sessionData,\n            expiresAt: expiresAtDate\n          })\n        )\n      }),\n      {\n        padding: false\n      }\n    );\n    if (data.length > 4093) {\n      throw new _better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_0__.B(\n        \"Session data is too large to store in the cookie. Please disable session cookie caching or reduce the size of the session data\"\n      );\n    }\n    ctx.setCookie(\n      ctx.context.authCookies.sessionData.name,\n      data,\n      ctx.context.authCookies.sessionData.options\n    );\n  }\n}\nasync function setSessionCookie(ctx, session, dontRememberMe, overrides) {\n  const dontRememberMeCookie = await ctx.getSignedCookie(\n    ctx.context.authCookies.dontRememberToken.name,\n    ctx.context.secret\n  );\n  dontRememberMe = dontRememberMe !== void 0 ? dontRememberMe : !!dontRememberMeCookie;\n  const options = ctx.context.authCookies.sessionToken.options;\n  const maxAge = dontRememberMe ? void 0 : ctx.context.sessionConfig.expiresIn;\n  await ctx.setSignedCookie(\n    ctx.context.authCookies.sessionToken.name,\n    session.session.token,\n    ctx.context.secret,\n    {\n      ...options,\n      maxAge,\n      ...overrides\n    }\n  );\n  if (dontRememberMe) {\n    await ctx.setSignedCookie(\n      ctx.context.authCookies.dontRememberToken.name,\n      \"true\",\n      ctx.context.secret,\n      ctx.context.authCookies.dontRememberToken.options\n    );\n  }\n  await setCookieCache(ctx, session);\n  ctx.context.setNewSession(session);\n  if (ctx.context.options.secondaryStorage) {\n    await ctx.context.secondaryStorage?.set(\n      session.session.token,\n      JSON.stringify({\n        user: session.user,\n        session: session.session\n      }),\n      Math.floor(\n        (new Date(session.session.expiresAt).getTime() - Date.now()) / 1e3\n      )\n    );\n  }\n}\nfunction deleteSessionCookie(ctx, skipDontRememberMe) {\n  ctx.setCookie(ctx.context.authCookies.sessionToken.name, \"\", {\n    ...ctx.context.authCookies.sessionToken.options,\n    maxAge: 0\n  });\n  ctx.setCookie(ctx.context.authCookies.sessionData.name, \"\", {\n    ...ctx.context.authCookies.sessionData.options,\n    maxAge: 0\n  });\n  if (!skipDontRememberMe) {\n    ctx.setCookie(ctx.context.authCookies.dontRememberToken.name, \"\", {\n      ...ctx.context.authCookies.dontRememberToken.options,\n      maxAge: 0\n    });\n  }\n}\nfunction parseCookies(cookieHeader) {\n  const cookies = cookieHeader.split(\"; \");\n  const cookieMap = /* @__PURE__ */ new Map();\n  cookies.forEach((cookie) => {\n    const [name, value] = cookie.split(\"=\");\n    cookieMap.set(name, value);\n  });\n  return cookieMap;\n}\nconst getSessionCookie = (request, config) => {\n  if (config?.cookiePrefix) {\n    if (config.cookieName) {\n      config.cookiePrefix = `${config.cookiePrefix}-`;\n    } else {\n      config.cookiePrefix = `${config.cookiePrefix}.`;\n    }\n  }\n  const headers = \"headers\" in request ? request.headers : request;\n  const req = request instanceof Request ? request : void 0;\n  (0,_better_auth_CuS_eDdK_mjs__WEBPACK_IMPORTED_MODULE_6__.a)(req?.url, config?.path, req);\n  const cookies = headers.get(\"cookie\");\n  if (!cookies) {\n    return null;\n  }\n  const { cookieName = \"session_token\", cookiePrefix = \"better-auth.\" } = config || {};\n  const name = `${cookiePrefix}${cookieName}`;\n  const secureCookieName = `__Secure-${name}`;\n  const parsedCookie = parseCookies(cookies);\n  const sessionToken = parsedCookie.get(name) || parsedCookie.get(secureCookieName);\n  if (sessionToken) {\n    return sessionToken;\n  }\n  return null;\n};\nconst getCookieCache = async (request, config) => {\n  const headers = request instanceof Headers ? request : request.headers;\n  const cookies = headers.get(\"cookie\");\n  if (!cookies) {\n    return null;\n  }\n  const { cookieName = \"session_data\", cookiePrefix = \"better-auth\" } = config || {};\n  const name = config?.isSecure !== void 0 ? config.isSecure ? `__Secure-${cookiePrefix}.${cookieName}` : `${cookiePrefix}.${cookieName}` : _better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_2__.a ? `__Secure-${cookiePrefix}.${cookieName}` : `${cookiePrefix}.${cookieName}`;\n  const parsedCookie = parseCookies(cookies);\n  const sessionData = parsedCookie.get(name);\n  if (sessionData) {\n    const sessionDataPayload = (0,_better_auth_BZZKN1g7_mjs__WEBPACK_IMPORTED_MODULE_5__.s)(_better_auth_utils_binary__WEBPACK_IMPORTED_MODULE_7__.binary.decode(_better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_3__.base64Url.decode(sessionData)));\n    if (!sessionDataPayload) {\n      return null;\n    }\n    const secret = config?.secret || _better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_2__.e.BETTER_AUTH_SECRET;\n    if (!secret) {\n      throw new _better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_0__.B(\n        \"getCookieCache requires a secret to be provided. Either pass it as an option or set the BETTER_AUTH_SECRET environment variable\"\n      );\n    }\n    const isValid = await (0,_better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_4__.createHMAC)(\"SHA-256\", \"base64urlnopad\").verify(\n      secret,\n      JSON.stringify({\n        ...sessionDataPayload.session,\n        expiresAt: sessionDataPayload.expiresAt\n      }),\n      sessionDataPayload.signature\n    );\n    if (!isValid) {\n      return null;\n    }\n    return sessionDataPayload.session;\n  }\n  return null;\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9zaGFyZWQvYmV0dGVyLWF1dGguVWZWV0FySUIubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBa0U7QUFDUjtBQUNlO0FBQ25CO0FBQ0Q7QUFDVztBQUNIO0FBQ1Y7O0FBRW5EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2RUFBNkUsc0JBQXNCO0FBQ25HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJLQUEySyxvQkFBb0I7QUFDL0w7QUFDQTtBQUNBLFNBQVMscUJBQXFCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsVUFBVSxrQ0FBa0Msb0JBQW9CO0FBQzVHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHFCQUFxQjtBQUNoRCw0QkFBNEIsc0JBQXNCO0FBQ2xELDJCQUEyQixxQkFBcUI7QUFDaEQsMkJBQTJCLHFCQUFxQjtBQUNoRCwyQkFBMkIscUJBQXFCO0FBQ2hELDJCQUEyQixxQkFBcUI7QUFDaEQsMkJBQTJCLHFCQUFxQjtBQUNoRCxXQUFXLEtBQUs7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FB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O0FBQ3BPO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiw0REFBYSxDQUFDLDZEQUFNLFFBQVEsZ0VBQVM7QUFDcEU7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLHdEQUFHO0FBQ3hDO0FBQ0EsZ0JBQWdCLHdEQUFlO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixtRUFBVTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRXFQIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFtYWFuXFxPbmVEcml2ZVxcRGVza3RvcFxcS2FuZGlkXzJcXE5ldyBmb2xkZXIgKDIpXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxzaGFyZWRcXGJldHRlci1hdXRoLlVmVldBcklCLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCIGFzIEJldHRlckF1dGhFcnJvciB9IGZyb20gJy4vYmV0dGVyLWF1dGguRGR6U0pmLW4ubWpzJztcbmltcG9ydCB7IGcgYXMgZ2V0RGF0ZSB9IGZyb20gJy4vYmV0dGVyLWF1dGguQ1c2RDllU3gubWpzJztcbmltcG9ydCB7IGEgYXMgaXNQcm9kdWN0aW9uLCBlIGFzIGVudiB9IGZyb20gJy4vYmV0dGVyLWF1dGguQ01RM3JBLUkubWpzJztcbmltcG9ydCB7IGJhc2U2NFVybCB9IGZyb20gJ0BiZXR0ZXItYXV0aC91dGlscy9iYXNlNjQnO1xuaW1wb3J0IHsgY3JlYXRlSE1BQyB9IGZyb20gJ0BiZXR0ZXItYXV0aC91dGlscy9obWFjJztcbmltcG9ydCB7IHMgYXMgc2FmZUpTT05QYXJzZSB9IGZyb20gJy4vYmV0dGVyLWF1dGguQlpaS04xZzcubWpzJztcbmltcG9ydCB7IGEgYXMgZ2V0QmFzZVVSTCB9IGZyb20gJy4vYmV0dGVyLWF1dGguQ3VTX2VEZEsubWpzJztcbmltcG9ydCB7IGJpbmFyeSB9IGZyb20gJ0BiZXR0ZXItYXV0aC91dGlscy9iaW5hcnknO1xuXG4vLyNyZWdpb24gc3JjL2luZGV4LnRzXG5jb25zdCBzID0gMWUzO1xuY29uc3QgbSA9IHMgKiA2MDtcbmNvbnN0IGggPSBtICogNjA7XG5jb25zdCBkID0gaCAqIDI0O1xuY29uc3QgdyA9IGQgKiA3O1xuY29uc3QgeSA9IGQgKiAzNjUuMjU7XG5jb25zdCBtbyA9IHkgLyAxMjtcbmZ1bmN0aW9uIG1zKHZhbHVlLCBvcHRpb25zKSB7XG5cdGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHJldHVybiBwYXJzZSh2YWx1ZSk7XG5cdGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIikgcmV0dXJuIGZvcm1hdCh2YWx1ZSk7XG5cdHRocm93IG5ldyBFcnJvcihgVmFsdWUgcHJvdmlkZWQgdG8gbXMoKSBtdXN0IGJlIGEgc3RyaW5nIG9yIG51bWJlci4gdmFsdWU9JHtKU09OLnN0cmluZ2lmeSh2YWx1ZSl9YCk7XG59XG4vKipcbiogUGFyc2UgdGhlIGdpdmVuIHN0cmluZyBhbmQgcmV0dXJuIG1pbGxpc2Vjb25kcy5cbipcbiogQHBhcmFtIHN0ciAtIEEgc3RyaW5nIHRvIHBhcnNlIHRvIG1pbGxpc2Vjb25kc1xuKiBAcmV0dXJucyBUaGUgcGFyc2VkIHZhbHVlIGluIG1pbGxpc2Vjb25kcywgb3IgYE5hTmAgaWYgdGhlIHN0cmluZyBjYW4ndCBiZVxuKiBwYXJzZWRcbiovXG5mdW5jdGlvbiBwYXJzZShzdHIpIHtcblx0aWYgKHR5cGVvZiBzdHIgIT09IFwic3RyaW5nXCIgfHwgc3RyLmxlbmd0aCA9PT0gMCB8fCBzdHIubGVuZ3RoID4gMTAwKSB0aHJvdyBuZXcgRXJyb3IoYFZhbHVlIHByb3ZpZGVkIHRvIG1zLnBhcnNlKCkgbXVzdCBiZSBhIHN0cmluZyB3aXRoIGxlbmd0aCBiZXR3ZWVuIDEgYW5kIDk5LiB2YWx1ZT0ke0pTT04uc3RyaW5naWZ5KHN0cil9YCk7XG5cdGNvbnN0IG1hdGNoID0gL14oPzx2YWx1ZT4tP1xcZCpcXC4/XFxkKykgKig/PHVuaXQ+bWlsbGlzZWNvbmRzP3xtc2Vjcz98bXN8c2Vjb25kcz98c2Vjcz98c3xtaW51dGVzP3xtaW5zP3xtfGhvdXJzP3xocnM/fGh8ZGF5cz98ZHx3ZWVrcz98d3xtb250aHM/fG1vfHllYXJzP3x5cnM/fHkpPyQvaS5leGVjKHN0cik7XG5cdGlmICghbWF0Y2g/Lmdyb3VwcykgcmV0dXJuIE5hTjtcblx0Y29uc3QgeyB2YWx1ZSwgdW5pdCA9IFwibXNcIiB9ID0gbWF0Y2guZ3JvdXBzO1xuXHRjb25zdCBuID0gcGFyc2VGbG9hdCh2YWx1ZSk7XG5cdGNvbnN0IG1hdGNoVW5pdCA9IHVuaXQudG9Mb3dlckNhc2UoKTtcblx0LyogaXN0YW5idWwgaWdub3JlIG5leHQgLSBpc3RhbmJ1bCBkb2Vzbid0IHVuZGVyc3RhbmQsIGJ1dCB0aGFua2Z1bGx5IHRoZSBUeXBlU2NyaXB0IHRoZSBleGhhdXN0aXZlbmVzcyBjaGVjayBpbiB0aGUgZGVmYXVsdCBjYXNlIGtlZXBzIHVzIHR5cGUgc2FmZSBoZXJlICovXG5cdHN3aXRjaCAobWF0Y2hVbml0KSB7XG5cdFx0Y2FzZSBcInllYXJzXCI6XG5cdFx0Y2FzZSBcInllYXJcIjpcblx0XHRjYXNlIFwieXJzXCI6XG5cdFx0Y2FzZSBcInlyXCI6XG5cdFx0Y2FzZSBcInlcIjogcmV0dXJuIG4gKiB5O1xuXHRcdGNhc2UgXCJtb250aHNcIjpcblx0XHRjYXNlIFwibW9udGhcIjpcblx0XHRjYXNlIFwibW9cIjogcmV0dXJuIG4gKiBtbztcblx0XHRjYXNlIFwid2Vla3NcIjpcblx0XHRjYXNlIFwid2Vla1wiOlxuXHRcdGNhc2UgXCJ3XCI6IHJldHVybiBuICogdztcblx0XHRjYXNlIFwiZGF5c1wiOlxuXHRcdGNhc2UgXCJkYXlcIjpcblx0XHRjYXNlIFwiZFwiOiByZXR1cm4gbiAqIGQ7XG5cdFx0Y2FzZSBcImhvdXJzXCI6XG5cdFx0Y2FzZSBcImhvdXJcIjpcblx0XHRjYXNlIFwiaHJzXCI6XG5cdFx0Y2FzZSBcImhyXCI6XG5cdFx0Y2FzZSBcImhcIjogcmV0dXJuIG4gKiBoO1xuXHRcdGNhc2UgXCJtaW51dGVzXCI6XG5cdFx0Y2FzZSBcIm1pbnV0ZVwiOlxuXHRcdGNhc2UgXCJtaW5zXCI6XG5cdFx0Y2FzZSBcIm1pblwiOlxuXHRcdGNhc2UgXCJtXCI6IHJldHVybiBuICogbTtcblx0XHRjYXNlIFwic2Vjb25kc1wiOlxuXHRcdGNhc2UgXCJzZWNvbmRcIjpcblx0XHRjYXNlIFwic2Vjc1wiOlxuXHRcdGNhc2UgXCJzZWNcIjpcblx0XHRjYXNlIFwic1wiOiByZXR1cm4gbiAqIHM7XG5cdFx0Y2FzZSBcIm1pbGxpc2Vjb25kc1wiOlxuXHRcdGNhc2UgXCJtaWxsaXNlY29uZFwiOlxuXHRcdGNhc2UgXCJtc2Vjc1wiOlxuXHRcdGNhc2UgXCJtc2VjXCI6XG5cdFx0Y2FzZSBcIm1zXCI6IHJldHVybiBuO1xuXHRcdGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcihgVW5rbm93biB1bml0IFwiJHttYXRjaFVuaXR9XCIgcHJvdmlkZWQgdG8gbXMucGFyc2UoKS4gdmFsdWU9JHtKU09OLnN0cmluZ2lmeShzdHIpfWApO1xuXHR9XG59XG4vKipcbiogU2hvcnQgZm9ybWF0IGZvciBgbXNgLlxuKi9cbmZ1bmN0aW9uIGZtdFNob3J0KG1zJDEpIHtcblx0Y29uc3QgbXNBYnMgPSBNYXRoLmFicyhtcyQxKTtcblx0aWYgKG1zQWJzID49IHkpIHJldHVybiBgJHtNYXRoLnJvdW5kKG1zJDEgLyB5KX15YDtcblx0aWYgKG1zQWJzID49IG1vKSByZXR1cm4gYCR7TWF0aC5yb3VuZChtcyQxIC8gbW8pfW1vYDtcblx0aWYgKG1zQWJzID49IHcpIHJldHVybiBgJHtNYXRoLnJvdW5kKG1zJDEgLyB3KX13YDtcblx0aWYgKG1zQWJzID49IGQpIHJldHVybiBgJHtNYXRoLnJvdW5kKG1zJDEgLyBkKX1kYDtcblx0aWYgKG1zQWJzID49IGgpIHJldHVybiBgJHtNYXRoLnJvdW5kKG1zJDEgLyBoKX1oYDtcblx0aWYgKG1zQWJzID49IG0pIHJldHVybiBgJHtNYXRoLnJvdW5kKG1zJDEgLyBtKX1tYDtcblx0aWYgKG1zQWJzID49IHMpIHJldHVybiBgJHtNYXRoLnJvdW5kKG1zJDEgLyBzKX1zYDtcblx0cmV0dXJuIGAke21zJDF9bXNgO1xufVxuLyoqXG4qIEZvcm1hdCB0aGUgZ2l2ZW4gaW50ZWdlciBhcyBhIHN0cmluZy5cbipcbiogQHBhcmFtIG1zIC0gbWlsbGlzZWNvbmRzXG4qIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBmb3IgdGhlIGNvbnZlcnNpb25cbiogQHJldHVybnMgVGhlIGZvcm1hdHRlZCBzdHJpbmdcbiovXG5mdW5jdGlvbiBmb3JtYXQobXMkMSwgb3B0aW9ucykge1xuXHRpZiAodHlwZW9mIG1zJDEgIT09IFwibnVtYmVyXCIgfHwgIU51bWJlci5pc0Zpbml0ZShtcyQxKSkgdGhyb3cgbmV3IEVycm9yKFwiVmFsdWUgcHJvdmlkZWQgdG8gbXMuZm9ybWF0KCkgbXVzdCBiZSBvZiB0eXBlIG51bWJlci5cIik7XG5cdHJldHVybiBmbXRTaG9ydChtcyQxKTtcbn1cblxuZnVuY3Rpb24gcGFyc2VTZXRDb29raWVIZWFkZXIoc2V0Q29va2llKSB7XG4gIGNvbnN0IGNvb2tpZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICBjb25zdCBjb29raWVBcnJheSA9IHNldENvb2tpZS5zcGxpdChcIiwgXCIpO1xuICBjb29raWVBcnJheS5mb3JFYWNoKChjb29raWVTdHJpbmcpID0+IHtcbiAgICBjb25zdCBwYXJ0cyA9IGNvb2tpZVN0cmluZy5zcGxpdChcIjtcIikubWFwKChwYXJ0KSA9PiBwYXJ0LnRyaW0oKSk7XG4gICAgY29uc3QgW25hbWVWYWx1ZSwgLi4uYXR0cmlidXRlc10gPSBwYXJ0cztcbiAgICBjb25zdCBbbmFtZSwgLi4udmFsdWVQYXJ0c10gPSBuYW1lVmFsdWUuc3BsaXQoXCI9XCIpO1xuICAgIGNvbnN0IHZhbHVlID0gdmFsdWVQYXJ0cy5qb2luKFwiPVwiKTtcbiAgICBpZiAoIW5hbWUgfHwgdmFsdWUgPT09IHZvaWQgMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBhdHRyT2JqID0geyB2YWx1ZSB9O1xuICAgIGF0dHJpYnV0ZXMuZm9yRWFjaCgoYXR0cmlidXRlKSA9PiB7XG4gICAgICBjb25zdCBbYXR0ck5hbWUsIC4uLmF0dHJWYWx1ZVBhcnRzXSA9IGF0dHJpYnV0ZS5zcGxpdChcIj1cIik7XG4gICAgICBjb25zdCBhdHRyVmFsdWUgPSBhdHRyVmFsdWVQYXJ0cy5qb2luKFwiPVwiKTtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWRBdHRyTmFtZSA9IGF0dHJOYW1lLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgc3dpdGNoIChub3JtYWxpemVkQXR0ck5hbWUpIHtcbiAgICAgICAgY2FzZSBcIm1heC1hZ2VcIjpcbiAgICAgICAgICBhdHRyT2JqW1wibWF4LWFnZVwiXSA9IGF0dHJWYWx1ZSA/IHBhcnNlSW50KGF0dHJWYWx1ZS50cmltKCksIDEwKSA6IHZvaWQgMDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImV4cGlyZXNcIjpcbiAgICAgICAgICBhdHRyT2JqLmV4cGlyZXMgPSBhdHRyVmFsdWUgPyBuZXcgRGF0ZShhdHRyVmFsdWUudHJpbSgpKSA6IHZvaWQgMDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImRvbWFpblwiOlxuICAgICAgICAgIGF0dHJPYmouZG9tYWluID0gYXR0clZhbHVlID8gYXR0clZhbHVlLnRyaW0oKSA6IHZvaWQgMDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInBhdGhcIjpcbiAgICAgICAgICBhdHRyT2JqLnBhdGggPSBhdHRyVmFsdWUgPyBhdHRyVmFsdWUudHJpbSgpIDogdm9pZCAwO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwic2VjdXJlXCI6XG4gICAgICAgICAgYXR0ck9iai5zZWN1cmUgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiaHR0cG9ubHlcIjpcbiAgICAgICAgICBhdHRyT2JqLmh0dHBvbmx5ID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInNhbWVzaXRlXCI6XG4gICAgICAgICAgYXR0ck9iai5zYW1lc2l0ZSA9IGF0dHJWYWx1ZSA/IGF0dHJWYWx1ZS50cmltKCkudG9Mb3dlckNhc2UoKSA6IHZvaWQgMDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBhdHRyT2JqW25vcm1hbGl6ZWRBdHRyTmFtZV0gPSBhdHRyVmFsdWUgPyBhdHRyVmFsdWUudHJpbSgpIDogdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb29raWVzLnNldChuYW1lLCBhdHRyT2JqKTtcbiAgfSk7XG4gIHJldHVybiBjb29raWVzO1xufVxuZnVuY3Rpb24gc2V0Q29va2llVG9IZWFkZXIoaGVhZGVycykge1xuICByZXR1cm4gKGNvbnRleHQpID0+IHtcbiAgICBjb25zdCBzZXRDb29raWVIZWFkZXIgPSBjb250ZXh0LnJlc3BvbnNlLmhlYWRlcnMuZ2V0KFwic2V0LWNvb2tpZVwiKTtcbiAgICBpZiAoIXNldENvb2tpZUhlYWRlcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjb29raWVNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgIGNvbnN0IGV4aXN0aW5nQ29va2llc0hlYWRlciA9IGhlYWRlcnMuZ2V0KFwiY29va2llXCIpIHx8IFwiXCI7XG4gICAgZXhpc3RpbmdDb29raWVzSGVhZGVyLnNwbGl0KFwiO1wiKS5mb3JFYWNoKChjb29raWUpID0+IHtcbiAgICAgIGNvbnN0IFtuYW1lLCAuLi5yZXN0XSA9IGNvb2tpZS50cmltKCkuc3BsaXQoXCI9XCIpO1xuICAgICAgaWYgKG5hbWUgJiYgcmVzdC5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvb2tpZU1hcC5zZXQobmFtZSwgcmVzdC5qb2luKFwiPVwiKSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3Qgc2V0Q29va2llSGVhZGVycyA9IHNldENvb2tpZUhlYWRlci5zcGxpdChcIixcIik7XG4gICAgc2V0Q29va2llSGVhZGVycy5mb3JFYWNoKChoZWFkZXIpID0+IHtcbiAgICAgIGNvbnN0IGNvb2tpZXMgPSBwYXJzZVNldENvb2tpZUhlYWRlcihoZWFkZXIpO1xuICAgICAgY29va2llcy5mb3JFYWNoKCh2YWx1ZSwgbmFtZSkgPT4ge1xuICAgICAgICBjb29raWVNYXAuc2V0KG5hbWUsIHZhbHVlLnZhbHVlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGNvbnN0IHVwZGF0ZWRDb29raWVzID0gQXJyYXkuZnJvbShjb29raWVNYXAuZW50cmllcygpKS5tYXAoKFtuYW1lLCB2YWx1ZV0pID0+IGAke25hbWV9PSR7dmFsdWV9YCkuam9pbihcIjsgXCIpO1xuICAgIGhlYWRlcnMuc2V0KFwiY29va2llXCIsIHVwZGF0ZWRDb29raWVzKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQ29va2llR2V0dGVyKG9wdGlvbnMpIHtcbiAgY29uc3Qgc2VjdXJlID0gb3B0aW9ucy5hZHZhbmNlZD8udXNlU2VjdXJlQ29va2llcyAhPT0gdm9pZCAwID8gb3B0aW9ucy5hZHZhbmNlZD8udXNlU2VjdXJlQ29va2llcyA6IG9wdGlvbnMuYmFzZVVSTCAhPT0gdm9pZCAwID8gb3B0aW9ucy5iYXNlVVJMLnN0YXJ0c1dpdGgoXCJodHRwczovL1wiKSA/IHRydWUgOiBmYWxzZSA6IGlzUHJvZHVjdGlvbjtcbiAgY29uc3Qgc2VjdXJlQ29va2llUHJlZml4ID0gc2VjdXJlID8gXCJfX1NlY3VyZS1cIiA6IFwiXCI7XG4gIGNvbnN0IGNyb3NzU3ViZG9tYWluRW5hYmxlZCA9ICEhb3B0aW9ucy5hZHZhbmNlZD8uY3Jvc3NTdWJEb21haW5Db29raWVzPy5lbmFibGVkO1xuICBjb25zdCBkb21haW4gPSBjcm9zc1N1YmRvbWFpbkVuYWJsZWQgPyBvcHRpb25zLmFkdmFuY2VkPy5jcm9zc1N1YkRvbWFpbkNvb2tpZXM/LmRvbWFpbiB8fCAob3B0aW9ucy5iYXNlVVJMID8gbmV3IFVSTChvcHRpb25zLmJhc2VVUkwpLmhvc3RuYW1lIDogdm9pZCAwKSA6IHZvaWQgMDtcbiAgaWYgKGNyb3NzU3ViZG9tYWluRW5hYmxlZCAmJiAhZG9tYWluKSB7XG4gICAgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcbiAgICAgIFwiYmFzZVVSTCBpcyByZXF1aXJlZCB3aGVuIGNyb3NzU3ViZG9tYWluQ29va2llcyBhcmUgZW5hYmxlZFwiXG4gICAgKTtcbiAgfVxuICBmdW5jdGlvbiBjcmVhdGVDb29raWUoY29va2llTmFtZSwgb3ZlcnJpZGVBdHRyaWJ1dGVzID0ge30pIHtcbiAgICBjb25zdCBwcmVmaXggPSBvcHRpb25zLmFkdmFuY2VkPy5jb29raWVQcmVmaXggfHwgXCJiZXR0ZXItYXV0aFwiO1xuICAgIGNvbnN0IG5hbWUgPSBvcHRpb25zLmFkdmFuY2VkPy5jb29raWVzPy5bY29va2llTmFtZV0/Lm5hbWUgfHwgYCR7cHJlZml4fS4ke2Nvb2tpZU5hbWV9YDtcbiAgICBjb25zdCBhdHRyaWJ1dGVzID0gb3B0aW9ucy5hZHZhbmNlZD8uY29va2llcz8uW2Nvb2tpZU5hbWVdPy5hdHRyaWJ1dGVzO1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiBgJHtzZWN1cmVDb29raWVQcmVmaXh9JHtuYW1lfWAsXG4gICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgIHNlY3VyZTogISFzZWN1cmVDb29raWVQcmVmaXgsXG4gICAgICAgIHNhbWVTaXRlOiBcImxheFwiLFxuICAgICAgICBwYXRoOiBcIi9cIixcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsXG4gICAgICAgIC4uLmNyb3NzU3ViZG9tYWluRW5hYmxlZCA/IHsgZG9tYWluIH0gOiB7fSxcbiAgICAgICAgLi4ub3B0aW9ucy5hZHZhbmNlZD8uZGVmYXVsdENvb2tpZUF0dHJpYnV0ZXMsXG4gICAgICAgIC4uLm92ZXJyaWRlQXR0cmlidXRlcyxcbiAgICAgICAgLi4uYXR0cmlidXRlc1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUNvb2tpZTtcbn1cbmZ1bmN0aW9uIGdldENvb2tpZXMob3B0aW9ucykge1xuICBjb25zdCBjcmVhdGVDb29raWUgPSBjcmVhdGVDb29raWVHZXR0ZXIob3B0aW9ucyk7XG4gIGNvbnN0IHNlc3Npb25NYXhBZ2UgPSBvcHRpb25zLnNlc3Npb24/LmV4cGlyZXNJbiB8fCBtcyhcIjdkXCIpIC8gMWUzO1xuICBjb25zdCBzZXNzaW9uVG9rZW4gPSBjcmVhdGVDb29raWUoXCJzZXNzaW9uX3Rva2VuXCIsIHtcbiAgICBtYXhBZ2U6IHNlc3Npb25NYXhBZ2VcbiAgfSk7XG4gIGNvbnN0IHNlc3Npb25EYXRhID0gY3JlYXRlQ29va2llKFwic2Vzc2lvbl9kYXRhXCIsIHtcbiAgICBtYXhBZ2U6IG9wdGlvbnMuc2Vzc2lvbj8uY29va2llQ2FjaGU/Lm1heEFnZSB8fCA2MCAqIDVcbiAgfSk7XG4gIGNvbnN0IGRvbnRSZW1lbWJlclRva2VuID0gY3JlYXRlQ29va2llKFwiZG9udF9yZW1lbWJlclwiKTtcbiAgcmV0dXJuIHtcbiAgICBzZXNzaW9uVG9rZW46IHtcbiAgICAgIG5hbWU6IHNlc3Npb25Ub2tlbi5uYW1lLFxuICAgICAgb3B0aW9uczogc2Vzc2lvblRva2VuLmF0dHJpYnV0ZXNcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFRoaXMgY29va2llIGlzIHVzZWQgdG8gc3RvcmUgdGhlIHNlc3Npb24gZGF0YSBpbiB0aGUgY29va2llXG4gICAgICogVGhpcyBpcyB1c2VmdWwgZm9yIHdoZW4geW91IHdhbnQgdG8gY2FjaGUgdGhlIHNlc3Npb24gaW4gdGhlIGNvb2tpZVxuICAgICAqL1xuICAgIHNlc3Npb25EYXRhOiB7XG4gICAgICBuYW1lOiBzZXNzaW9uRGF0YS5uYW1lLFxuICAgICAgb3B0aW9uczogc2Vzc2lvbkRhdGEuYXR0cmlidXRlc1xuICAgIH0sXG4gICAgZG9udFJlbWVtYmVyVG9rZW46IHtcbiAgICAgIG5hbWU6IGRvbnRSZW1lbWJlclRva2VuLm5hbWUsXG4gICAgICBvcHRpb25zOiBkb250UmVtZW1iZXJUb2tlbi5hdHRyaWJ1dGVzXG4gICAgfVxuICB9O1xufVxuYXN5bmMgZnVuY3Rpb24gc2V0Q29va2llQ2FjaGUoY3R4LCBzZXNzaW9uKSB7XG4gIGNvbnN0IHNob3VsZFN0b3JlU2Vzc2lvbkRhdGFJbkNvb2tpZSA9IGN0eC5jb250ZXh0Lm9wdGlvbnMuc2Vzc2lvbj8uY29va2llQ2FjaGU/LmVuYWJsZWQ7XG4gIGlmIChzaG91bGRTdG9yZVNlc3Npb25EYXRhSW5Db29raWUpIHtcbiAgICBjb25zdCBmaWx0ZXJlZFNlc3Npb24gPSBPYmplY3QuZW50cmllcyhzZXNzaW9uLnNlc3Npb24pLnJlZHVjZShcbiAgICAgIChhY2MsIFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICBjb25zdCBmaWVsZENvbmZpZyA9IGN0eC5jb250ZXh0Lm9wdGlvbnMuc2Vzc2lvbj8uYWRkaXRpb25hbEZpZWxkcz8uW2tleV07XG4gICAgICAgIGlmICghZmllbGRDb25maWcgfHwgZmllbGRDb25maWcucmV0dXJuZWQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgYWNjW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgfSxcbiAgICAgIHt9XG4gICAgKTtcbiAgICBjb25zdCBzZXNzaW9uRGF0YSA9IHsgc2Vzc2lvbjogZmlsdGVyZWRTZXNzaW9uLCB1c2VyOiBzZXNzaW9uLnVzZXIgfTtcbiAgICBjb25zdCBleHBpcmVzQXREYXRlID0gZ2V0RGF0ZShcbiAgICAgIGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25EYXRhLm9wdGlvbnMubWF4QWdlIHx8IDYwLFxuICAgICAgXCJzZWNcIlxuICAgICkuZ2V0VGltZSgpO1xuICAgIGNvbnN0IGRhdGEgPSBiYXNlNjRVcmwuZW5jb2RlKFxuICAgICAgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzZXNzaW9uOiBzZXNzaW9uRGF0YSxcbiAgICAgICAgZXhwaXJlc0F0OiBleHBpcmVzQXREYXRlLFxuICAgICAgICBzaWduYXR1cmU6IGF3YWl0IGNyZWF0ZUhNQUMoXCJTSEEtMjU2XCIsIFwiYmFzZTY0dXJsbm9wYWRcIikuc2lnbihcbiAgICAgICAgICBjdHguY29udGV4dC5zZWNyZXQsXG4gICAgICAgICAgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgLi4uc2Vzc2lvbkRhdGEsXG4gICAgICAgICAgICBleHBpcmVzQXQ6IGV4cGlyZXNBdERhdGVcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICB9KSxcbiAgICAgIHtcbiAgICAgICAgcGFkZGluZzogZmFsc2VcbiAgICAgIH1cbiAgICApO1xuICAgIGlmIChkYXRhLmxlbmd0aCA+IDQwOTMpIHtcbiAgICAgIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXG4gICAgICAgIFwiU2Vzc2lvbiBkYXRhIGlzIHRvbyBsYXJnZSB0byBzdG9yZSBpbiB0aGUgY29va2llLiBQbGVhc2UgZGlzYWJsZSBzZXNzaW9uIGNvb2tpZSBjYWNoaW5nIG9yIHJlZHVjZSB0aGUgc2l6ZSBvZiB0aGUgc2Vzc2lvbiBkYXRhXCJcbiAgICAgICk7XG4gICAgfVxuICAgIGN0eC5zZXRDb29raWUoXG4gICAgICBjdHguY29udGV4dC5hdXRoQ29va2llcy5zZXNzaW9uRGF0YS5uYW1lLFxuICAgICAgZGF0YSxcbiAgICAgIGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25EYXRhLm9wdGlvbnNcbiAgICApO1xuICB9XG59XG5hc3luYyBmdW5jdGlvbiBzZXRTZXNzaW9uQ29va2llKGN0eCwgc2Vzc2lvbiwgZG9udFJlbWVtYmVyTWUsIG92ZXJyaWRlcykge1xuICBjb25zdCBkb250UmVtZW1iZXJNZUNvb2tpZSA9IGF3YWl0IGN0eC5nZXRTaWduZWRDb29raWUoXG4gICAgY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuZG9udFJlbWVtYmVyVG9rZW4ubmFtZSxcbiAgICBjdHguY29udGV4dC5zZWNyZXRcbiAgKTtcbiAgZG9udFJlbWVtYmVyTWUgPSBkb250UmVtZW1iZXJNZSAhPT0gdm9pZCAwID8gZG9udFJlbWVtYmVyTWUgOiAhIWRvbnRSZW1lbWJlck1lQ29va2llO1xuICBjb25zdCBvcHRpb25zID0gY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuc2Vzc2lvblRva2VuLm9wdGlvbnM7XG4gIGNvbnN0IG1heEFnZSA9IGRvbnRSZW1lbWJlck1lID8gdm9pZCAwIDogY3R4LmNvbnRleHQuc2Vzc2lvbkNvbmZpZy5leHBpcmVzSW47XG4gIGF3YWl0IGN0eC5zZXRTaWduZWRDb29raWUoXG4gICAgY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuc2Vzc2lvblRva2VuLm5hbWUsXG4gICAgc2Vzc2lvbi5zZXNzaW9uLnRva2VuLFxuICAgIGN0eC5jb250ZXh0LnNlY3JldCxcbiAgICB7XG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgbWF4QWdlLFxuICAgICAgLi4ub3ZlcnJpZGVzXG4gICAgfVxuICApO1xuICBpZiAoZG9udFJlbWVtYmVyTWUpIHtcbiAgICBhd2FpdCBjdHguc2V0U2lnbmVkQ29va2llKFxuICAgICAgY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuZG9udFJlbWVtYmVyVG9rZW4ubmFtZSxcbiAgICAgIFwidHJ1ZVwiLFxuICAgICAgY3R4LmNvbnRleHQuc2VjcmV0LFxuICAgICAgY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuZG9udFJlbWVtYmVyVG9rZW4ub3B0aW9uc1xuICAgICk7XG4gIH1cbiAgYXdhaXQgc2V0Q29va2llQ2FjaGUoY3R4LCBzZXNzaW9uKTtcbiAgY3R4LmNvbnRleHQuc2V0TmV3U2Vzc2lvbihzZXNzaW9uKTtcbiAgaWYgKGN0eC5jb250ZXh0Lm9wdGlvbnMuc2Vjb25kYXJ5U3RvcmFnZSkge1xuICAgIGF3YWl0IGN0eC5jb250ZXh0LnNlY29uZGFyeVN0b3JhZ2U/LnNldChcbiAgICAgIHNlc3Npb24uc2Vzc2lvbi50b2tlbixcbiAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgdXNlcjogc2Vzc2lvbi51c2VyLFxuICAgICAgICBzZXNzaW9uOiBzZXNzaW9uLnNlc3Npb25cbiAgICAgIH0pLFxuICAgICAgTWF0aC5mbG9vcihcbiAgICAgICAgKG5ldyBEYXRlKHNlc3Npb24uc2Vzc2lvbi5leHBpcmVzQXQpLmdldFRpbWUoKSAtIERhdGUubm93KCkpIC8gMWUzXG4gICAgICApXG4gICAgKTtcbiAgfVxufVxuZnVuY3Rpb24gZGVsZXRlU2Vzc2lvbkNvb2tpZShjdHgsIHNraXBEb250UmVtZW1iZXJNZSkge1xuICBjdHguc2V0Q29va2llKGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25Ub2tlbi5uYW1lLCBcIlwiLCB7XG4gICAgLi4uY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuc2Vzc2lvblRva2VuLm9wdGlvbnMsXG4gICAgbWF4QWdlOiAwXG4gIH0pO1xuICBjdHguc2V0Q29va2llKGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25EYXRhLm5hbWUsIFwiXCIsIHtcbiAgICAuLi5jdHguY29udGV4dC5hdXRoQ29va2llcy5zZXNzaW9uRGF0YS5vcHRpb25zLFxuICAgIG1heEFnZTogMFxuICB9KTtcbiAgaWYgKCFza2lwRG9udFJlbWVtYmVyTWUpIHtcbiAgICBjdHguc2V0Q29va2llKGN0eC5jb250ZXh0LmF1dGhDb29raWVzLmRvbnRSZW1lbWJlclRva2VuLm5hbWUsIFwiXCIsIHtcbiAgICAgIC4uLmN0eC5jb250ZXh0LmF1dGhDb29raWVzLmRvbnRSZW1lbWJlclRva2VuLm9wdGlvbnMsXG4gICAgICBtYXhBZ2U6IDBcbiAgICB9KTtcbiAgfVxufVxuZnVuY3Rpb24gcGFyc2VDb29raWVzKGNvb2tpZUhlYWRlcikge1xuICBjb25zdCBjb29raWVzID0gY29va2llSGVhZGVyLnNwbGl0KFwiOyBcIik7XG4gIGNvbnN0IGNvb2tpZU1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIGNvb2tpZXMuZm9yRWFjaCgoY29va2llKSA9PiB7XG4gICAgY29uc3QgW25hbWUsIHZhbHVlXSA9IGNvb2tpZS5zcGxpdChcIj1cIik7XG4gICAgY29va2llTWFwLnNldChuYW1lLCB2YWx1ZSk7XG4gIH0pO1xuICByZXR1cm4gY29va2llTWFwO1xufVxuY29uc3QgZ2V0U2Vzc2lvbkNvb2tpZSA9IChyZXF1ZXN0LCBjb25maWcpID0+IHtcbiAgaWYgKGNvbmZpZz8uY29va2llUHJlZml4KSB7XG4gICAgaWYgKGNvbmZpZy5jb29raWVOYW1lKSB7XG4gICAgICBjb25maWcuY29va2llUHJlZml4ID0gYCR7Y29uZmlnLmNvb2tpZVByZWZpeH0tYDtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uZmlnLmNvb2tpZVByZWZpeCA9IGAke2NvbmZpZy5jb29raWVQcmVmaXh9LmA7XG4gICAgfVxuICB9XG4gIGNvbnN0IGhlYWRlcnMgPSBcImhlYWRlcnNcIiBpbiByZXF1ZXN0ID8gcmVxdWVzdC5oZWFkZXJzIDogcmVxdWVzdDtcbiAgY29uc3QgcmVxID0gcmVxdWVzdCBpbnN0YW5jZW9mIFJlcXVlc3QgPyByZXF1ZXN0IDogdm9pZCAwO1xuICBnZXRCYXNlVVJMKHJlcT8udXJsLCBjb25maWc/LnBhdGgsIHJlcSk7XG4gIGNvbnN0IGNvb2tpZXMgPSBoZWFkZXJzLmdldChcImNvb2tpZVwiKTtcbiAgaWYgKCFjb29raWVzKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgeyBjb29raWVOYW1lID0gXCJzZXNzaW9uX3Rva2VuXCIsIGNvb2tpZVByZWZpeCA9IFwiYmV0dGVyLWF1dGguXCIgfSA9IGNvbmZpZyB8fCB7fTtcbiAgY29uc3QgbmFtZSA9IGAke2Nvb2tpZVByZWZpeH0ke2Nvb2tpZU5hbWV9YDtcbiAgY29uc3Qgc2VjdXJlQ29va2llTmFtZSA9IGBfX1NlY3VyZS0ke25hbWV9YDtcbiAgY29uc3QgcGFyc2VkQ29va2llID0gcGFyc2VDb29raWVzKGNvb2tpZXMpO1xuICBjb25zdCBzZXNzaW9uVG9rZW4gPSBwYXJzZWRDb29raWUuZ2V0KG5hbWUpIHx8IHBhcnNlZENvb2tpZS5nZXQoc2VjdXJlQ29va2llTmFtZSk7XG4gIGlmIChzZXNzaW9uVG9rZW4pIHtcbiAgICByZXR1cm4gc2Vzc2lvblRva2VuO1xuICB9XG4gIHJldHVybiBudWxsO1xufTtcbmNvbnN0IGdldENvb2tpZUNhY2hlID0gYXN5bmMgKHJlcXVlc3QsIGNvbmZpZykgPT4ge1xuICBjb25zdCBoZWFkZXJzID0gcmVxdWVzdCBpbnN0YW5jZW9mIEhlYWRlcnMgPyByZXF1ZXN0IDogcmVxdWVzdC5oZWFkZXJzO1xuICBjb25zdCBjb29raWVzID0gaGVhZGVycy5nZXQoXCJjb29raWVcIik7XG4gIGlmICghY29va2llcykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IHsgY29va2llTmFtZSA9IFwic2Vzc2lvbl9kYXRhXCIsIGNvb2tpZVByZWZpeCA9IFwiYmV0dGVyLWF1dGhcIiB9ID0gY29uZmlnIHx8IHt9O1xuICBjb25zdCBuYW1lID0gY29uZmlnPy5pc1NlY3VyZSAhPT0gdm9pZCAwID8gY29uZmlnLmlzU2VjdXJlID8gYF9fU2VjdXJlLSR7Y29va2llUHJlZml4fS4ke2Nvb2tpZU5hbWV9YCA6IGAke2Nvb2tpZVByZWZpeH0uJHtjb29raWVOYW1lfWAgOiBpc1Byb2R1Y3Rpb24gPyBgX19TZWN1cmUtJHtjb29raWVQcmVmaXh9LiR7Y29va2llTmFtZX1gIDogYCR7Y29va2llUHJlZml4fS4ke2Nvb2tpZU5hbWV9YDtcbiAgY29uc3QgcGFyc2VkQ29va2llID0gcGFyc2VDb29raWVzKGNvb2tpZXMpO1xuICBjb25zdCBzZXNzaW9uRGF0YSA9IHBhcnNlZENvb2tpZS5nZXQobmFtZSk7XG4gIGlmIChzZXNzaW9uRGF0YSkge1xuICAgIGNvbnN0IHNlc3Npb25EYXRhUGF5bG9hZCA9IHNhZmVKU09OUGFyc2UoYmluYXJ5LmRlY29kZShiYXNlNjRVcmwuZGVjb2RlKHNlc3Npb25EYXRhKSkpO1xuICAgIGlmICghc2Vzc2lvbkRhdGFQYXlsb2FkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3Qgc2VjcmV0ID0gY29uZmlnPy5zZWNyZXQgfHwgZW52LkJFVFRFUl9BVVRIX1NFQ1JFVDtcbiAgICBpZiAoIXNlY3JldCkge1xuICAgICAgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcbiAgICAgICAgXCJnZXRDb29raWVDYWNoZSByZXF1aXJlcyBhIHNlY3JldCB0byBiZSBwcm92aWRlZC4gRWl0aGVyIHBhc3MgaXQgYXMgYW4gb3B0aW9uIG9yIHNldCB0aGUgQkVUVEVSX0FVVEhfU0VDUkVUIGVudmlyb25tZW50IHZhcmlhYmxlXCJcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IGlzVmFsaWQgPSBhd2FpdCBjcmVhdGVITUFDKFwiU0hBLTI1NlwiLCBcImJhc2U2NHVybG5vcGFkXCIpLnZlcmlmeShcbiAgICAgIHNlY3JldCxcbiAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgLi4uc2Vzc2lvbkRhdGFQYXlsb2FkLnNlc3Npb24sXG4gICAgICAgIGV4cGlyZXNBdDogc2Vzc2lvbkRhdGFQYXlsb2FkLmV4cGlyZXNBdFxuICAgICAgfSksXG4gICAgICBzZXNzaW9uRGF0YVBheWxvYWQuc2lnbmF0dXJlXG4gICAgKTtcbiAgICBpZiAoIWlzVmFsaWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gc2Vzc2lvbkRhdGFQYXlsb2FkLnNlc3Npb247XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59O1xuXG5leHBvcnQgeyBwYXJzZUNvb2tpZXMgYXMgYSwgc2V0Q29va2llQ2FjaGUgYXMgYiwgY3JlYXRlQ29va2llR2V0dGVyIGFzIGMsIGRlbGV0ZVNlc3Npb25Db29raWUgYXMgZCwgc2V0Q29va2llVG9IZWFkZXIgYXMgZSwgZ2V0U2Vzc2lvbkNvb2tpZSBhcyBmLCBnZXRDb29raWVzIGFzIGcsIGdldENvb2tpZUNhY2hlIGFzIGgsIG1zIGFzIG0sIHBhcnNlU2V0Q29va2llSGVhZGVyIGFzIHAsIHNldFNlc3Npb25Db29raWUgYXMgcyB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/shared/better-auth.UfVWArIB.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/shared/better-auth.YwDQhoPc.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/shared/better-auth.YwDQhoPc.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   c: () => (/* binding */ checkPassword),\n/* harmony export */   v: () => (/* binding */ validatePassword)\n/* harmony export */ });\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.js\");\n\n\nasync function validatePassword(ctx, data) {\n  const accounts = await ctx.context.internalAdapter.findAccounts(data.userId);\n  const credentialAccount = accounts?.find(\n    (account) => account.providerId === \"credential\"\n  );\n  const currentPassword = credentialAccount?.password;\n  if (!credentialAccount || !currentPassword) {\n    return false;\n  }\n  const compare = await ctx.context.password.verify({\n    hash: currentPassword,\n    password: data.password\n  });\n  return compare;\n}\nasync function checkPassword(userId, c) {\n  const accounts = await c.context.internalAdapter.findAccounts(userId);\n  const credentialAccount = accounts?.find(\n    (account) => account.providerId === \"credential\"\n  );\n  const currentPassword = credentialAccount?.password;\n  if (!credentialAccount || !currentPassword || !c.body.password) {\n    throw new better_call__WEBPACK_IMPORTED_MODULE_0__.APIError(\"BAD_REQUEST\", {\n      message: \"No password credential found\"\n    });\n  }\n  const compare = await c.context.password.verify({\n    hash: currentPassword,\n    password: c.body.password\n  });\n  if (!compare) {\n    throw new better_call__WEBPACK_IMPORTED_MODULE_0__.APIError(\"BAD_REQUEST\", {\n      message: \"Invalid password\"\n    });\n  }\n  return true;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9zaGFyZWQvYmV0dGVyLWF1dGguWXdEUWhvUGMubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF1Qzs7QUFFdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsaURBQVE7QUFDdEI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxjQUFjLGlEQUFRO0FBQ3RCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFcUQiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYW1hYW5cXE9uZURyaXZlXFxEZXNrdG9wXFxLYW5kaWRfMlxcTmV3IGZvbGRlciAoMilcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHNoYXJlZFxcYmV0dGVyLWF1dGguWXdEUWhvUGMubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSAnYmV0dGVyLWNhbGwnO1xuXG5hc3luYyBmdW5jdGlvbiB2YWxpZGF0ZVBhc3N3b3JkKGN0eCwgZGF0YSkge1xuICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kQWNjb3VudHMoZGF0YS51c2VySWQpO1xuICBjb25zdCBjcmVkZW50aWFsQWNjb3VudCA9IGFjY291bnRzPy5maW5kKFxuICAgIChhY2NvdW50KSA9PiBhY2NvdW50LnByb3ZpZGVySWQgPT09IFwiY3JlZGVudGlhbFwiXG4gICk7XG4gIGNvbnN0IGN1cnJlbnRQYXNzd29yZCA9IGNyZWRlbnRpYWxBY2NvdW50Py5wYXNzd29yZDtcbiAgaWYgKCFjcmVkZW50aWFsQWNjb3VudCB8fCAhY3VycmVudFBhc3N3b3JkKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IGNvbXBhcmUgPSBhd2FpdCBjdHguY29udGV4dC5wYXNzd29yZC52ZXJpZnkoe1xuICAgIGhhc2g6IGN1cnJlbnRQYXNzd29yZCxcbiAgICBwYXNzd29yZDogZGF0YS5wYXNzd29yZFxuICB9KTtcbiAgcmV0dXJuIGNvbXBhcmU7XG59XG5hc3luYyBmdW5jdGlvbiBjaGVja1Bhc3N3b3JkKHVzZXJJZCwgYykge1xuICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IGMuY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZEFjY291bnRzKHVzZXJJZCk7XG4gIGNvbnN0IGNyZWRlbnRpYWxBY2NvdW50ID0gYWNjb3VudHM/LmZpbmQoXG4gICAgKGFjY291bnQpID0+IGFjY291bnQucHJvdmlkZXJJZCA9PT0gXCJjcmVkZW50aWFsXCJcbiAgKTtcbiAgY29uc3QgY3VycmVudFBhc3N3b3JkID0gY3JlZGVudGlhbEFjY291bnQ/LnBhc3N3b3JkO1xuICBpZiAoIWNyZWRlbnRpYWxBY2NvdW50IHx8ICFjdXJyZW50UGFzc3dvcmQgfHwgIWMuYm9keS5wYXNzd29yZCkge1xuICAgIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcbiAgICAgIG1lc3NhZ2U6IFwiTm8gcGFzc3dvcmQgY3JlZGVudGlhbCBmb3VuZFwiXG4gICAgfSk7XG4gIH1cbiAgY29uc3QgY29tcGFyZSA9IGF3YWl0IGMuY29udGV4dC5wYXNzd29yZC52ZXJpZnkoe1xuICAgIGhhc2g6IGN1cnJlbnRQYXNzd29yZCxcbiAgICBwYXNzd29yZDogYy5ib2R5LnBhc3N3b3JkXG4gIH0pO1xuICBpZiAoIWNvbXBhcmUpIHtcbiAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG4gICAgICBtZXNzYWdlOiBcIkludmFsaWQgcGFzc3dvcmRcIlxuICAgIH0pO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5leHBvcnQgeyBjaGVja1Bhc3N3b3JkIGFzIGMsIHZhbGlkYXRlUGFzc3dvcmQgYXMgdiB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/shared/better-auth.YwDQhoPc.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/shared/better-auth.nqWf7zUe.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/shared/better-auth.nqWf7zUe.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $: () => (/* binding */ getCognitoPublicKey),\n/* harmony export */   A: () => (/* binding */ deleteUserCallback),\n/* harmony export */   B: () => (/* binding */ listUserAccounts),\n/* harmony export */   C: () => (/* binding */ linkSocialAccount),\n/* harmony export */   D: () => (/* binding */ requestPasswordResetCallback),\n/* harmony export */   E: () => (/* binding */ requestPasswordReset),\n/* harmony export */   F: () => (/* binding */ forgetPasswordCallback),\n/* harmony export */   G: () => (/* binding */ deleteUser),\n/* harmony export */   H: () => (/* binding */ HIDE_METADATA),\n/* harmony export */   I: () => (/* binding */ setPassword),\n/* harmony export */   J: () => (/* binding */ changePassword),\n/* harmony export */   K: () => (/* binding */ changeEmail),\n/* harmony export */   L: () => (/* binding */ sendVerificationEmail),\n/* harmony export */   M: () => (/* binding */ verifyEmail),\n/* harmony export */   N: () => (/* binding */ resetPassword),\n/* harmony export */   O: () => (/* binding */ forgetPassword),\n/* harmony export */   P: () => (/* binding */ signInEmail),\n/* harmony export */   Q: () => (/* binding */ signOut),\n/* harmony export */   R: () => (/* binding */ callbackOAuth),\n/* harmony export */   S: () => (/* binding */ signInSocial),\n/* harmony export */   T: () => (/* binding */ sendVerificationEmailFn),\n/* harmony export */   U: () => (/* binding */ socialProviders),\n/* harmony export */   V: () => (/* binding */ socialProviderList),\n/* harmony export */   W: () => (/* binding */ SocialProviderListEnum),\n/* harmony export */   X: () => (/* binding */ apple),\n/* harmony export */   Y: () => (/* binding */ getApplePublicKey),\n/* harmony export */   Z: () => (/* binding */ atlassian),\n/* harmony export */   _: () => (/* binding */ cognito),\n/* harmony export */   a: () => (/* binding */ createAuthorizationCodeRequest),\n/* harmony export */   a0: () => (/* binding */ discord),\n/* harmony export */   a1: () => (/* binding */ dropbox),\n/* harmony export */   a2: () => (/* binding */ facebook),\n/* harmony export */   a3: () => (/* binding */ figma),\n/* harmony export */   a4: () => (/* binding */ github),\n/* harmony export */   a5: () => (/* binding */ linear),\n/* harmony export */   a6: () => (/* binding */ linkedin),\n/* harmony export */   a7: () => (/* binding */ gitlab),\n/* harmony export */   a8: () => (/* binding */ google),\n/* harmony export */   a9: () => (/* binding */ kick),\n/* harmony export */   aa: () => (/* binding */ microsoft),\n/* harmony export */   ab: () => (/* binding */ notion),\n/* harmony export */   ac: () => (/* binding */ reddit),\n/* harmony export */   ad: () => (/* binding */ roblox),\n/* harmony export */   ae: () => (/* binding */ salesforce),\n/* harmony export */   af: () => (/* binding */ spotify),\n/* harmony export */   ag: () => (/* binding */ tiktok),\n/* harmony export */   ah: () => (/* binding */ twitch),\n/* harmony export */   ai: () => (/* binding */ twitter),\n/* harmony export */   aj: () => (/* binding */ vk),\n/* harmony export */   ak: () => (/* binding */ zoom),\n/* harmony export */   al: () => (/* binding */ huggingface),\n/* harmony export */   am: () => (/* binding */ slack),\n/* harmony export */   an: () => (/* binding */ kakao),\n/* harmony export */   ao: () => (/* binding */ naver),\n/* harmony export */   ap: () => (/* binding */ line),\n/* harmony export */   aq: () => (/* binding */ paypal),\n/* harmony export */   b: () => (/* binding */ validateToken),\n/* harmony export */   c: () => (/* binding */ createAuthorizationURL),\n/* harmony export */   d: () => (/* binding */ createRefreshAccessTokenRequest),\n/* harmony export */   e: () => (/* binding */ generateCodeChallenge),\n/* harmony export */   f: () => (/* binding */ getOAuth2Tokens),\n/* harmony export */   g: () => (/* binding */ generateState),\n/* harmony export */   h: () => (/* binding */ encodeOAuthParameter),\n/* harmony export */   i: () => (/* binding */ decryptOAuthToken),\n/* harmony export */   j: () => (/* binding */ handleOAuthUserInfo),\n/* harmony export */   k: () => (/* binding */ createEmailVerificationToken),\n/* harmony export */   l: () => (/* binding */ originCheckMiddleware),\n/* harmony export */   m: () => (/* binding */ error),\n/* harmony export */   n: () => (/* binding */ ok),\n/* harmony export */   o: () => (/* binding */ originCheck),\n/* harmony export */   p: () => (/* binding */ parseState),\n/* harmony export */   q: () => (/* binding */ accountInfo),\n/* harmony export */   r: () => (/* binding */ refreshAccessToken),\n/* harmony export */   s: () => (/* binding */ setTokenUtil),\n/* harmony export */   t: () => (/* binding */ toAuthEndpoints),\n/* harmony export */   u: () => (/* binding */ updateUser),\n/* harmony export */   v: () => (/* binding */ validateAuthorizationCode),\n/* harmony export */   w: () => (/* binding */ wildcardMatch),\n/* harmony export */   x: () => (/* binding */ getAccessToken),\n/* harmony export */   y: () => (/* binding */ refreshToken),\n/* harmony export */   z: () => (/* binding */ unlinkAccount)\n/* harmony export */ });\n/* harmony import */ var zod_v4__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! zod/v4 */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/classic/schemas.js\");\n/* harmony import */ var zod_v4__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! zod/v4 */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/classic/coerce.js\");\n/* harmony import */ var _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./better-auth.DV5EHeYG.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.DV5EHeYG.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.js\");\n/* harmony import */ var _better_auth_CW6D9eSx_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./better-auth.CW6D9eSx.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.CW6D9eSx.mjs\");\n/* harmony import */ var _better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @better-auth/utils/hash */ \"(rsc)/./node_modules/@better-auth/utils/dist/hash.mjs\");\n/* harmony import */ var _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/utils/base64 */ \"(rsc)/./node_modules/@better-auth/utils/dist/base64.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../crypto/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-fetch/fetch */ \"(rsc)/./node_modules/@better-fetch/fetch/dist/index.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/node/esm/jwt/verify.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/node/esm/util/decode_protected_header.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/node/esm/util/decode_jwt.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/node/esm/key/import.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/node/esm/jwks/remote.js\");\n/* harmony import */ var _better_auth_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/utils */ \"(rsc)/./node_modules/@better-auth/utils/dist/index.mjs\");\n/* harmony import */ var _better_auth_utils_hex__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/utils/hex */ \"(rsc)/./node_modules/@better-auth/utils/dist/hex.mjs\");\n/* harmony import */ var _better_auth_B4Qoxdgc_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./better-auth.B4Qoxdgc.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.B4Qoxdgc.mjs\");\n/* harmony import */ var _better_auth_CuS_eDdK_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./better-auth.CuS_eDdK.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.CuS_eDdK.mjs\");\n/* harmony import */ var _better_auth_UfVWArIB_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./better-auth.UfVWArIB.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.UfVWArIB.mjs\");\n/* harmony import */ var jose_errors__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! jose/errors */ \"(rsc)/./node_modules/jose/dist/node/esm/util/errors.js\");\n/* harmony import */ var _better_auth_utils_random__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @better-auth/utils/random */ \"(rsc)/./node_modules/@better-auth/utils/dist/random.mjs\");\n/* harmony import */ var _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./better-auth.BjBlybv-.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.BjBlybv-.mjs\");\n/* harmony import */ var _better_auth_BZZKN1g7_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./better-auth.BZZKN1g7.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.BZZKN1g7.mjs\");\n/* harmony import */ var _better_auth_BUPPRXfK_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./better-auth.BUPPRXfK.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.BUPPRXfK.mjs\");\n/* harmony import */ var _better_auth_Dcv8PS7T_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./better-auth.Dcv8PS7T.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.Dcv8PS7T.mjs\");\n/* harmony import */ var _better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./better-auth.CMQ3rA-I.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.CMQ3rA-I.mjs\");\n/* harmony import */ var _better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @better-auth/utils/hmac */ \"(rsc)/./node_modules/@better-auth/utils/dist/hmac.mjs\");\n/* harmony import */ var _better_auth_utils_binary__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @better-auth/utils/binary */ \"(rsc)/./node_modules/@better-auth/utils/dist/binary.mjs\");\n/* harmony import */ var defu__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! defu */ \"(rsc)/./node_modules/defu/dist/defu.mjs\");\n/* harmony import */ var _better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./better-auth.DdzSJf-n.mjs */ \"(rsc)/./node_modules/better-auth/dist/shared/better-auth.DdzSJf-n.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction escapeRegExpChar(char) {\n  if (char === \"-\" || char === \"^\" || char === \"$\" || char === \"+\" || char === \".\" || char === \"(\" || char === \")\" || char === \"|\" || char === \"[\" || char === \"]\" || char === \"{\" || char === \"}\" || char === \"*\" || char === \"?\" || char === \"\\\\\") {\n    return `\\\\${char}`;\n  } else {\n    return char;\n  }\n}\nfunction escapeRegExpString(str) {\n  let result = \"\";\n  for (let i = 0; i < str.length; i++) {\n    result += escapeRegExpChar(str[i]);\n  }\n  return result;\n}\nfunction transform(pattern, separator = true) {\n  if (Array.isArray(pattern)) {\n    let regExpPatterns = pattern.map((p) => `^${transform(p, separator)}$`);\n    return `(?:${regExpPatterns.join(\"|\")})`;\n  }\n  let separatorSplitter = \"\";\n  let separatorMatcher = \"\";\n  let wildcard = \".\";\n  if (separator === true) {\n    separatorSplitter = \"/\";\n    separatorMatcher = \"[/\\\\\\\\]\";\n    wildcard = \"[^/\\\\\\\\]\";\n  } else if (separator) {\n    separatorSplitter = separator;\n    separatorMatcher = escapeRegExpString(separatorSplitter);\n    if (separatorMatcher.length > 1) {\n      separatorMatcher = `(?:${separatorMatcher})`;\n      wildcard = `((?!${separatorMatcher}).)`;\n    } else {\n      wildcard = `[^${separatorMatcher}]`;\n    }\n  }\n  let requiredSeparator = separator ? `${separatorMatcher}+?` : \"\";\n  let optionalSeparator = separator ? `${separatorMatcher}*?` : \"\";\n  let segments = separator ? pattern.split(separatorSplitter) : [pattern];\n  let result = \"\";\n  for (let s = 0; s < segments.length; s++) {\n    let segment = segments[s];\n    let nextSegment = segments[s + 1];\n    let currentSeparator = \"\";\n    if (!segment && s > 0) {\n      continue;\n    }\n    if (separator) {\n      if (s === segments.length - 1) {\n        currentSeparator = optionalSeparator;\n      } else if (nextSegment !== \"**\") {\n        currentSeparator = requiredSeparator;\n      } else {\n        currentSeparator = \"\";\n      }\n    }\n    if (separator && segment === \"**\") {\n      if (currentSeparator) {\n        result += s === 0 ? \"\" : currentSeparator;\n        result += `(?:${wildcard}*?${currentSeparator})*?`;\n      }\n      continue;\n    }\n    for (let c = 0; c < segment.length; c++) {\n      let char = segment[c];\n      if (char === \"\\\\\") {\n        if (c < segment.length - 1) {\n          result += escapeRegExpChar(segment[c + 1]);\n          c++;\n        }\n      } else if (char === \"?\") {\n        result += wildcard;\n      } else if (char === \"*\") {\n        result += `${wildcard}*?`;\n      } else {\n        result += escapeRegExpChar(char);\n      }\n    }\n    result += currentSeparator;\n  }\n  return result;\n}\nfunction isMatch(regexp, sample) {\n  if (typeof sample !== \"string\") {\n    throw new TypeError(`Sample must be a string, but ${typeof sample} given`);\n  }\n  return regexp.test(sample);\n}\nfunction wildcardMatch(pattern, options) {\n  if (typeof pattern !== \"string\" && !Array.isArray(pattern)) {\n    throw new TypeError(\n      `The first argument must be a single pattern string or an array of patterns, but ${typeof pattern} given`\n    );\n  }\n  if (typeof options === \"string\" || typeof options === \"boolean\") {\n    options = { separator: options };\n  }\n  if (arguments.length === 2 && !(typeof options === \"undefined\" || typeof options === \"object\" && options !== null && !Array.isArray(options))) {\n    throw new TypeError(\n      `The second argument must be an options object or a string/boolean separator, but ${typeof options} given`\n    );\n  }\n  options = options || {};\n  if (options.separator === \"\\\\\") {\n    throw new Error(\n      \"\\\\ is not a valid separator because it is used for escaping. Try setting the separator to `true` instead\"\n    );\n  }\n  let regexpPattern = transform(pattern, options.separator);\n  let regexp = new RegExp(`^${regexpPattern}$`, options.flags);\n  let fn = isMatch.bind(null, regexp);\n  fn.options = options;\n  fn.pattern = pattern;\n  fn.regexp = regexp;\n  return fn;\n}\n\nconst originCheckMiddleware = (0,_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.c)(async (ctx) => {\n  if (ctx.request?.method !== \"POST\" || !ctx.request) {\n    return;\n  }\n  const { body, query, context } = ctx;\n  const originHeader = ctx.headers?.get(\"origin\") || ctx.headers?.get(\"referer\") || \"\";\n  const callbackURL = body?.callbackURL || query?.callbackURL;\n  const redirectURL = body?.redirectTo;\n  const errorCallbackURL = body?.errorCallbackURL;\n  const newUserCallbackURL = body?.newUserCallbackURL;\n  const trustedOrigins = Array.isArray(context.options.trustedOrigins) ? context.trustedOrigins : [\n    ...context.trustedOrigins,\n    ...await context.options.trustedOrigins?.(ctx.request) || []\n  ];\n  const usesCookies = ctx.headers?.has(\"cookie\");\n  const matchesPattern = (url, pattern) => {\n    if (url.startsWith(\"/\")) {\n      return false;\n    }\n    if (pattern.includes(\"*\")) {\n      if (pattern.includes(\"://\")) {\n        return wildcardMatch(pattern)((0,_better_auth_CuS_eDdK_mjs__WEBPACK_IMPORTED_MODULE_10__.g)(url) || url);\n      }\n      return wildcardMatch(pattern)((0,_better_auth_CuS_eDdK_mjs__WEBPACK_IMPORTED_MODULE_10__.b)(url));\n    }\n    const protocol = (0,_better_auth_CuS_eDdK_mjs__WEBPACK_IMPORTED_MODULE_10__.c)(url);\n    return protocol === \"http:\" || protocol === \"https:\" || !protocol ? pattern === (0,_better_auth_CuS_eDdK_mjs__WEBPACK_IMPORTED_MODULE_10__.g)(url) : url.startsWith(pattern);\n  };\n  const validateURL = (url, label) => {\n    if (!url) {\n      return;\n    }\n    const isTrustedOrigin = trustedOrigins.some(\n      (origin) => matchesPattern(url, origin) || url?.startsWith(\"/\") && label !== \"origin\" && /^\\/(?!\\/|\\\\|%2f|%5c)[\\w\\-.\\+/@]*(?:\\?[\\w\\-.\\+/=&%@]*)?$/.test(url)\n    );\n    if (!isTrustedOrigin) {\n      ctx.context.logger.error(`Invalid ${label}: ${url}`);\n      ctx.context.logger.info(\n        `If it's a valid URL, please add ${url} to trustedOrigins in your auth config\n`,\n        `Current list of trustedOrigins: ${trustedOrigins}`\n      );\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"FORBIDDEN\", { message: `Invalid ${label}` });\n    }\n  };\n  if (usesCookies && !ctx.context.options.advanced?.disableCSRFCheck) {\n    validateURL(originHeader, \"origin\");\n  }\n  callbackURL && validateURL(callbackURL, \"callbackURL\");\n  redirectURL && validateURL(redirectURL, \"redirectURL\");\n  errorCallbackURL && validateURL(errorCallbackURL, \"errorCallbackURL\");\n  newUserCallbackURL && validateURL(newUserCallbackURL, \"newUserCallbackURL\");\n});\nconst originCheck = (getValue) => (0,_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.c)(async (ctx) => {\n  if (!ctx.request) {\n    return;\n  }\n  const { context } = ctx;\n  const callbackURL = getValue(ctx);\n  const trustedOrigins = Array.isArray(\n    context.options.trustedOrigins\n  ) ? context.trustedOrigins : [\n    ...context.trustedOrigins,\n    ...await context.options.trustedOrigins?.(ctx.request) || []\n  ];\n  const matchesPattern = (url, pattern) => {\n    if (url.startsWith(\"/\")) {\n      return false;\n    }\n    if (pattern.includes(\"*\")) {\n      if (pattern.includes(\"://\")) {\n        return wildcardMatch(pattern)((0,_better_auth_CuS_eDdK_mjs__WEBPACK_IMPORTED_MODULE_10__.g)(url) || url);\n      }\n      return wildcardMatch(pattern)((0,_better_auth_CuS_eDdK_mjs__WEBPACK_IMPORTED_MODULE_10__.b)(url));\n    }\n    const protocol = (0,_better_auth_CuS_eDdK_mjs__WEBPACK_IMPORTED_MODULE_10__.c)(url);\n    return protocol === \"http:\" || protocol === \"https:\" || !protocol ? pattern === (0,_better_auth_CuS_eDdK_mjs__WEBPACK_IMPORTED_MODULE_10__.g)(url) : url.startsWith(pattern);\n  };\n  const validateURL = (url, label) => {\n    if (!url) {\n      return;\n    }\n    const isTrustedOrigin = trustedOrigins.some(\n      (origin) => matchesPattern(url, origin) || url?.startsWith(\"/\") && label !== \"origin\" && /^\\/(?!\\/|\\\\|%2f|%5c)[\\w\\-.\\+/@]*(?:\\?[\\w\\-.\\+/=&%@]*)?$/.test(\n        url\n      )\n    );\n    if (!isTrustedOrigin) {\n      ctx.context.logger.error(`Invalid ${label}: ${url}`);\n      ctx.context.logger.info(\n        `If it's a valid URL, please add ${url} to trustedOrigins in your auth config\n`,\n        `Current list of trustedOrigins: ${trustedOrigins}`\n      );\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"FORBIDDEN\", { message: `Invalid ${label}` });\n    }\n  };\n  const callbacks = Array.isArray(callbackURL) ? callbackURL : [callbackURL];\n  for (const url of callbacks) {\n    validateURL(url, \"callbackURL\");\n  }\n});\n\nasync function createEmailVerificationToken(secret, email, updateTo, expiresIn = 3600) {\n  const token = await (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_5__.signJWT)(\n    {\n      email: email.toLowerCase(),\n      updateTo\n    },\n    secret,\n    expiresIn\n  );\n  return token;\n}\nasync function sendVerificationEmailFn(ctx, user) {\n  if (!ctx.context.options.emailVerification?.sendVerificationEmail) {\n    ctx.context.logger.error(\"Verification email isn't enabled.\");\n    throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n      message: \"Verification email isn't enabled\"\n    });\n  }\n  const token = await createEmailVerificationToken(\n    ctx.context.secret,\n    user.email,\n    void 0,\n    ctx.context.options.emailVerification?.expiresIn\n  );\n  const url = `${ctx.context.baseURL}/verify-email?token=${token}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n  await ctx.context.options.emailVerification.sendVerificationEmail(\n    {\n      user,\n      url,\n      token\n    },\n    ctx.request\n  );\n}\nconst sendVerificationEmail = (0,_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.a)(\n  \"/send-verification-email\",\n  {\n    method: \"POST\",\n    body: zod_v4__WEBPACK_IMPORTED_MODULE_22__.object({\n      email: zod_v4__WEBPACK_IMPORTED_MODULE_22__.email().meta({\n        description: \"The email to send the verification email to\"\n      }),\n      callbackURL: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n        description: \"The URL to use for email verification callback\"\n      }).optional()\n    }),\n    metadata: {\n      openapi: {\n        description: \"Send a verification email to the user\",\n        requestBody: {\n          content: {\n            \"application/json\": {\n              schema: {\n                type: \"object\",\n                properties: {\n                  email: {\n                    type: \"string\",\n                    description: \"The email to send the verification email to\",\n                    example: \"user@example.com\"\n                  },\n                  callbackURL: {\n                    type: \"string\",\n                    description: \"The URL to use for email verification callback\",\n                    example: \"https://example.com/callback\",\n                    nullable: true\n                  }\n                },\n                required: [\"email\"]\n              }\n            }\n          }\n        },\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    status: {\n                      type: \"boolean\",\n                      description: \"Indicates if the email was sent successfully\",\n                      example: true\n                    }\n                  }\n                }\n              }\n            }\n          },\n          \"400\": {\n            description: \"Bad Request\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    message: {\n                      type: \"string\",\n                      description: \"Error message\",\n                      example: \"Verification email isn't enabled\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    if (!ctx.context.options.emailVerification?.sendVerificationEmail) {\n      ctx.context.logger.error(\"Verification email isn't enabled.\");\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: \"Verification email isn't enabled\"\n      });\n    }\n    const { email } = ctx.body;\n    const session = await (0,_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.g)(ctx);\n    if (!session) {\n      const user = await ctx.context.internalAdapter.findUserByEmail(email);\n      if (!user) {\n        return ctx.json({\n          status: true\n        });\n      }\n      await sendVerificationEmailFn(ctx, user.user);\n      return ctx.json({\n        status: true\n      });\n    }\n    if (session?.user.emailVerified) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: \"You can only send a verification email to an unverified email\"\n      });\n    }\n    if (session?.user.email !== email) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: \"You can only send a verification email to your own email\"\n      });\n    }\n    await sendVerificationEmailFn(ctx, session.user);\n    return ctx.json({\n      status: true\n    });\n  }\n);\nconst verifyEmail = (0,_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.a)(\n  \"/verify-email\",\n  {\n    method: \"GET\",\n    query: zod_v4__WEBPACK_IMPORTED_MODULE_22__.object({\n      token: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n        description: \"The token to verify the email\"\n      }),\n      callbackURL: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n        description: \"The URL to redirect to after email verification\"\n      }).optional()\n    }),\n    use: [originCheck((ctx) => ctx.query.callbackURL)],\n    metadata: {\n      openapi: {\n        description: \"Verify the email of the user\",\n        parameters: [\n          {\n            name: \"token\",\n            in: \"query\",\n            description: \"The token to verify the email\",\n            required: true,\n            schema: {\n              type: \"string\"\n            }\n          },\n          {\n            name: \"callbackURL\",\n            in: \"query\",\n            description: \"The URL to redirect to after email verification\",\n            required: false,\n            schema: {\n              type: \"string\"\n            }\n          }\n        ],\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    user: {\n                      type: \"object\",\n                      properties: {\n                        id: {\n                          type: \"string\",\n                          description: \"User ID\"\n                        },\n                        email: {\n                          type: \"string\",\n                          description: \"User email\"\n                        },\n                        name: {\n                          type: \"string\",\n                          description: \"User name\"\n                        },\n                        image: {\n                          type: \"string\",\n                          description: \"User image URL\"\n                        },\n                        emailVerified: {\n                          type: \"boolean\",\n                          description: \"Indicates if the user email is verified\"\n                        },\n                        createdAt: {\n                          type: \"string\",\n                          description: \"User creation date\"\n                        },\n                        updatedAt: {\n                          type: \"string\",\n                          description: \"User update date\"\n                        }\n                      },\n                      required: [\n                        \"id\",\n                        \"email\",\n                        \"name\",\n                        \"image\",\n                        \"emailVerified\",\n                        \"createdAt\",\n                        \"updatedAt\"\n                      ]\n                    },\n                    status: {\n                      type: \"boolean\",\n                      description: \"Indicates if the email was verified successfully\"\n                    }\n                  },\n                  required: [\"user\", \"status\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    function redirectOnError(error) {\n      if (ctx.query.callbackURL) {\n        if (ctx.query.callbackURL.includes(\"?\")) {\n          throw ctx.redirect(`${ctx.query.callbackURL}&error=${error}`);\n        }\n        throw ctx.redirect(`${ctx.query.callbackURL}?error=${error}`);\n      }\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"UNAUTHORIZED\", {\n        message: error\n      });\n    }\n    const { token } = ctx.query;\n    let jwt;\n    try {\n      jwt = await (0,jose__WEBPACK_IMPORTED_MODULE_23__.jwtVerify)(\n        token,\n        new TextEncoder().encode(ctx.context.secret),\n        {\n          algorithms: [\"HS256\"]\n        }\n      );\n    } catch (e) {\n      if (e instanceof jose_errors__WEBPACK_IMPORTED_MODULE_24__.JWTExpired) {\n        return redirectOnError(\"token_expired\");\n      }\n      return redirectOnError(\"invalid_token\");\n    }\n    const schema = zod_v4__WEBPACK_IMPORTED_MODULE_22__.object({\n      email: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().email(),\n      updateTo: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().optional()\n    });\n    const parsed = schema.parse(jwt.payload);\n    const user = await ctx.context.internalAdapter.findUserByEmail(\n      parsed.email\n    );\n    if (!user) {\n      return redirectOnError(\"user_not_found\");\n    }\n    if (parsed.updateTo) {\n      const session = await (0,_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.g)(ctx);\n      if (!session) {\n        if (ctx.query.callbackURL) {\n          throw ctx.redirect(`${ctx.query.callbackURL}?error=unauthorized`);\n        }\n        return redirectOnError(\"unauthorized\");\n      }\n      if (session.user.email !== parsed.email) {\n        if (ctx.query.callbackURL) {\n          throw ctx.redirect(`${ctx.query.callbackURL}?error=unauthorized`);\n        }\n        return redirectOnError(\"unauthorized\");\n      }\n      const updatedUser2 = await ctx.context.internalAdapter.updateUserByEmail(\n        parsed.email,\n        {\n          email: parsed.updateTo,\n          emailVerified: false\n        },\n        ctx\n      );\n      const newToken = await createEmailVerificationToken(\n        ctx.context.secret,\n        parsed.updateTo\n      );\n      await ctx.context.options.emailVerification?.sendVerificationEmail?.(\n        {\n          user: updatedUser2,\n          url: `${ctx.context.baseURL}/verify-email?token=${newToken}&callbackURL=${ctx.query.callbackURL || \"/\"}`,\n          token: newToken\n        },\n        ctx.request\n      );\n      await (0,_better_auth_UfVWArIB_mjs__WEBPACK_IMPORTED_MODULE_11__.s)(ctx, {\n        session: session.session,\n        user: {\n          ...session.user,\n          email: parsed.updateTo,\n          emailVerified: false\n        }\n      });\n      if (ctx.query.callbackURL) {\n        throw ctx.redirect(ctx.query.callbackURL);\n      }\n      return ctx.json({\n        status: true,\n        user: {\n          id: updatedUser2.id,\n          email: updatedUser2.email,\n          name: updatedUser2.name,\n          image: updatedUser2.image,\n          emailVerified: updatedUser2.emailVerified,\n          createdAt: updatedUser2.createdAt,\n          updatedAt: updatedUser2.updatedAt\n        }\n      });\n    }\n    if (ctx.context.options.emailVerification?.onEmailVerification) {\n      await ctx.context.options.emailVerification.onEmailVerification(\n        user.user,\n        ctx.request\n      );\n    }\n    const updatedUser = await ctx.context.internalAdapter.updateUserByEmail(\n      parsed.email,\n      {\n        emailVerified: true\n      },\n      ctx\n    );\n    if (ctx.context.options.emailVerification?.afterEmailVerification) {\n      await ctx.context.options.emailVerification.afterEmailVerification(\n        updatedUser,\n        ctx.request\n      );\n    }\n    if (ctx.context.options.emailVerification?.autoSignInAfterVerification) {\n      const currentSession = await (0,_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.g)(ctx);\n      if (!currentSession || currentSession.user.email !== parsed.email) {\n        const session = await ctx.context.internalAdapter.createSession(\n          user.user.id,\n          ctx\n        );\n        if (!session) {\n          throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"INTERNAL_SERVER_ERROR\", {\n            message: \"Failed to create session\"\n          });\n        }\n        await (0,_better_auth_UfVWArIB_mjs__WEBPACK_IMPORTED_MODULE_11__.s)(ctx, {\n          session,\n          user: {\n            ...user.user,\n            emailVerified: true\n          }\n        });\n      } else {\n        await (0,_better_auth_UfVWArIB_mjs__WEBPACK_IMPORTED_MODULE_11__.s)(ctx, {\n          session: currentSession.session,\n          user: {\n            ...currentSession.user,\n            emailVerified: true\n          }\n        });\n      }\n    }\n    if (ctx.query.callbackURL) {\n      throw ctx.redirect(ctx.query.callbackURL);\n    }\n    return ctx.json({\n      status: true,\n      user: null\n    });\n  }\n);\n\nconst HIDE_METADATA = {\n  isAction: false\n};\n\nasync function generateState(c, link) {\n  const callbackURL = c.body?.callbackURL || c.context.options.baseURL;\n  if (!callbackURL) {\n    throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n      message: \"callbackURL is required\"\n    });\n  }\n  const codeVerifier = (0,_better_auth_B4Qoxdgc_mjs__WEBPACK_IMPORTED_MODULE_9__.g)(128);\n  const state = (0,_better_auth_B4Qoxdgc_mjs__WEBPACK_IMPORTED_MODULE_9__.g)(32);\n  const data = JSON.stringify({\n    callbackURL,\n    codeVerifier,\n    errorURL: c.body?.errorCallbackURL,\n    newUserURL: c.body?.newUserCallbackURL,\n    link,\n    /**\n     * This is the actual expiry time of the state\n     */\n    expiresAt: Date.now() + 10 * 60 * 1e3,\n    requestSignUp: c.body?.requestSignUp\n  });\n  const expiresAt = /* @__PURE__ */ new Date();\n  expiresAt.setMinutes(expiresAt.getMinutes() + 10);\n  const verification = await c.context.internalAdapter.createVerificationValue(\n    {\n      value: data,\n      identifier: state,\n      expiresAt\n    },\n    c\n  );\n  if (!verification) {\n    c.context.logger.error(\n      \"Unable to create verification. Make sure the database adapter is properly working and there is a verification table in the database\"\n    );\n    throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"INTERNAL_SERVER_ERROR\", {\n      message: \"Unable to create verification\"\n    });\n  }\n  return {\n    state: verification.identifier,\n    codeVerifier\n  };\n}\nasync function parseState(c) {\n  const state = c.query.state || c.body.state;\n  const data = await c.context.internalAdapter.findVerificationValue(state);\n  if (!data) {\n    c.context.logger.error(\"State Mismatch. Verification not found\", {\n      state\n    });\n    const errorURL = c.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n    throw c.redirect(`${errorURL}?error=please_restart_the_process`);\n  }\n  const parsedData = zod_v4__WEBPACK_IMPORTED_MODULE_22__.object({\n    callbackURL: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string(),\n    codeVerifier: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string(),\n    errorURL: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().optional(),\n    newUserURL: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().optional(),\n    expiresAt: zod_v4__WEBPACK_IMPORTED_MODULE_22__.number(),\n    link: zod_v4__WEBPACK_IMPORTED_MODULE_22__.object({\n      email: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string(),\n      userId: zod_v4__WEBPACK_IMPORTED_MODULE_25__.string()\n    }).optional(),\n    requestSignUp: zod_v4__WEBPACK_IMPORTED_MODULE_22__.boolean().optional()\n  }).parse(JSON.parse(data.value));\n  if (!parsedData.errorURL) {\n    parsedData.errorURL = `${c.context.baseURL}/error`;\n  }\n  if (parsedData.expiresAt < Date.now()) {\n    await c.context.internalAdapter.deleteVerificationValue(data.id);\n    const errorURL = c.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n    throw c.redirect(`${errorURL}?error=please_restart_the_process`);\n  }\n  await c.context.internalAdapter.deleteVerificationValue(data.id);\n  return parsedData;\n}\n\nasync function generateCodeChallenge(codeVerifier) {\n  const codeChallengeBytes = await (0,_better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_3__.createHash)(\"SHA-256\").digest(codeVerifier);\n  return _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_4__.base64Url.encode(new Uint8Array(codeChallengeBytes), {\n    padding: false\n  });\n}\nfunction getOAuth2Tokens(data) {\n  return {\n    tokenType: data.token_type,\n    accessToken: data.access_token,\n    refreshToken: data.refresh_token,\n    accessTokenExpiresAt: data.expires_in ? (0,_better_auth_CW6D9eSx_mjs__WEBPACK_IMPORTED_MODULE_2__.g)(data.expires_in, \"sec\") : void 0,\n    refreshTokenExpiresAt: data.refresh_token_expires_in ? (0,_better_auth_CW6D9eSx_mjs__WEBPACK_IMPORTED_MODULE_2__.g)(data.refresh_token_expires_in, \"sec\") : void 0,\n    scopes: data?.scope ? typeof data.scope === \"string\" ? data.scope.split(\" \") : data.scope : [],\n    idToken: data.id_token\n  };\n}\nconst encodeOAuthParameter = (value) => encodeURIComponent(value).replace(/%20/g, \"+\");\nfunction decryptOAuthToken(token, ctx) {\n  if (!token) return token;\n  if (ctx.options.account?.encryptOAuthTokens) {\n    return (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_5__.symmetricDecrypt)({\n      key: ctx.secret,\n      data: token\n    });\n  }\n  return token;\n}\nfunction setTokenUtil(token, ctx) {\n  if (ctx.options.account?.encryptOAuthTokens && token) {\n    return (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_5__.symmetricEncrypt)({\n      key: ctx.secret,\n      data: token\n    });\n  }\n  return token;\n}\n\nasync function handleOAuthUserInfo(c, {\n  userInfo,\n  account,\n  callbackURL,\n  disableSignUp,\n  overrideUserInfo\n}) {\n  const dbUser = await c.context.internalAdapter.findOAuthUser(\n    userInfo.email.toLowerCase(),\n    account.accountId,\n    account.providerId\n  ).catch((e) => {\n    _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_13__.a.error(\n      \"Better auth was unable to query your database.\\nError: \",\n      e\n    );\n    const errorURL = c.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n    throw c.redirect(`${errorURL}?error=internal_server_error`);\n  });\n  let user = dbUser?.user;\n  let isRegister = !user;\n  if (dbUser) {\n    const hasBeenLinked = dbUser.accounts.find(\n      (a) => a.providerId === account.providerId && a.accountId === account.accountId\n    );\n    if (!hasBeenLinked) {\n      const trustedProviders = c.context.options.account?.accountLinking?.trustedProviders;\n      const isTrustedProvider = trustedProviders?.includes(\n        account.providerId\n      );\n      if (!isTrustedProvider && !userInfo.emailVerified || c.context.options.account?.accountLinking?.enabled === false) {\n        if (_better_auth_CMQ3rA_I_mjs__WEBPACK_IMPORTED_MODULE_17__.b) {\n          _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_13__.a.warn(\n            `User already exist but account isn't linked to ${account.providerId}. To read more about how account linking works in Better Auth see https://www.better-auth.com/docs/concepts/users-accounts#account-linking.`\n          );\n        }\n        return {\n          error: \"account not linked\",\n          data: null\n        };\n      }\n      try {\n        await c.context.internalAdapter.linkAccount(\n          {\n            providerId: account.providerId,\n            accountId: userInfo.id.toString(),\n            userId: dbUser.user.id,\n            accessToken: await setTokenUtil(account.accessToken, c.context),\n            refreshToken: await setTokenUtil(account.refreshToken, c.context),\n            idToken: account.idToken,\n            accessTokenExpiresAt: account.accessTokenExpiresAt,\n            refreshTokenExpiresAt: account.refreshTokenExpiresAt,\n            scope: account.scope\n          },\n          c\n        );\n      } catch (e) {\n        _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_13__.a.error(\"Unable to link account\", e);\n        return {\n          error: \"unable to link account\",\n          data: null\n        };\n      }\n    } else {\n      if (c.context.options.account?.updateAccountOnSignIn !== false) {\n        const updateData = Object.fromEntries(\n          Object.entries({\n            idToken: account.idToken,\n            accessToken: await setTokenUtil(account.accessToken, c.context),\n            refreshToken: await setTokenUtil(account.refreshToken, c.context),\n            accessTokenExpiresAt: account.accessTokenExpiresAt,\n            refreshTokenExpiresAt: account.refreshTokenExpiresAt,\n            scope: account.scope\n          }).filter(([_, value]) => value !== void 0)\n        );\n        if (Object.keys(updateData).length > 0) {\n          await c.context.internalAdapter.updateAccount(\n            hasBeenLinked.id,\n            updateData,\n            c\n          );\n        }\n      }\n    }\n    if (overrideUserInfo) {\n      const { id: _, ...restUserInfo } = userInfo;\n      await c.context.internalAdapter.updateUser(dbUser.user.id, {\n        ...restUserInfo,\n        email: userInfo.email.toLowerCase(),\n        emailVerified: userInfo.email.toLowerCase() === dbUser.user.email ? dbUser.user.emailVerified || userInfo.emailVerified : userInfo.emailVerified\n      });\n    }\n  } else {\n    if (disableSignUp) {\n      return {\n        error: \"signup disabled\",\n        data: null,\n        isRegister: false\n      };\n    }\n    try {\n      const { id: _, ...restUserInfo } = userInfo;\n      user = await c.context.internalAdapter.createOAuthUser(\n        {\n          ...restUserInfo,\n          email: userInfo.email.toLowerCase()\n        },\n        {\n          accessToken: await setTokenUtil(account.accessToken, c.context),\n          refreshToken: await setTokenUtil(account.refreshToken, c.context),\n          idToken: account.idToken,\n          accessTokenExpiresAt: account.accessTokenExpiresAt,\n          refreshTokenExpiresAt: account.refreshTokenExpiresAt,\n          scope: account.scope,\n          providerId: account.providerId,\n          accountId: userInfo.id.toString()\n        },\n        c\n      ).then((res) => res?.user);\n      if (!userInfo.emailVerified && user && c.context.options.emailVerification?.sendOnSignUp) {\n        const token = await createEmailVerificationToken(\n          c.context.secret,\n          user.email,\n          void 0,\n          c.context.options.emailVerification?.expiresIn\n        );\n        const url = `${c.context.baseURL}/verify-email?token=${token}&callbackURL=${callbackURL}`;\n        await c.context.options.emailVerification?.sendVerificationEmail?.(\n          {\n            user,\n            url,\n            token\n          },\n          c.request\n        );\n      }\n    } catch (e) {\n      _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_13__.a.error(e);\n      if (e instanceof better_call__WEBPACK_IMPORTED_MODULE_1__.APIError) {\n        return {\n          error: e.message,\n          data: null,\n          isRegister: false\n        };\n      }\n      return {\n        error: \"unable to create user\",\n        data: null,\n        isRegister: false\n      };\n    }\n  }\n  if (!user) {\n    return {\n      error: \"unable to create user\",\n      data: null,\n      isRegister: false\n    };\n  }\n  const session = await c.context.internalAdapter.createSession(user.id, c);\n  if (!session) {\n    return {\n      error: \"unable to create session\",\n      data: null,\n      isRegister: false\n    };\n  }\n  return {\n    data: {\n      session,\n      user\n    },\n    error: null,\n    isRegister\n  };\n}\n\nasync function createAuthorizationURL({\n  id,\n  options,\n  authorizationEndpoint,\n  state,\n  codeVerifier,\n  scopes,\n  claims,\n  redirectURI,\n  duration,\n  prompt,\n  accessType,\n  responseType,\n  display,\n  loginHint,\n  hd,\n  responseMode,\n  additionalParams,\n  scopeJoiner\n}) {\n  const url = new URL(authorizationEndpoint);\n  url.searchParams.set(\"response_type\", responseType || \"code\");\n  url.searchParams.set(\"client_id\", options.clientId);\n  url.searchParams.set(\"state\", state);\n  url.searchParams.set(\"scope\", scopes.join(scopeJoiner || \" \"));\n  url.searchParams.set(\"redirect_uri\", options.redirectURI || redirectURI);\n  duration && url.searchParams.set(\"duration\", duration);\n  display && url.searchParams.set(\"display\", display);\n  loginHint && url.searchParams.set(\"login_hint\", loginHint);\n  prompt && url.searchParams.set(\"prompt\", prompt);\n  hd && url.searchParams.set(\"hd\", hd);\n  accessType && url.searchParams.set(\"access_type\", accessType);\n  responseMode && url.searchParams.set(\"response_mode\", responseMode);\n  if (codeVerifier) {\n    const codeChallenge = await generateCodeChallenge(codeVerifier);\n    url.searchParams.set(\"code_challenge_method\", \"S256\");\n    url.searchParams.set(\"code_challenge\", codeChallenge);\n  }\n  if (claims) {\n    const claimsObj = claims.reduce(\n      (acc, claim) => {\n        acc[claim] = null;\n        return acc;\n      },\n      {}\n    );\n    url.searchParams.set(\n      \"claims\",\n      JSON.stringify({\n        id_token: { email: null, email_verified: null, ...claimsObj }\n      })\n    );\n  }\n  if (additionalParams) {\n    Object.entries(additionalParams).forEach(([key, value]) => {\n      url.searchParams.set(key, value);\n    });\n  }\n  return url;\n}\n\nfunction createAuthorizationCodeRequest({\n  code,\n  codeVerifier,\n  redirectURI,\n  options,\n  authentication,\n  deviceId,\n  headers,\n  additionalParams = {},\n  resource\n}) {\n  const body = new URLSearchParams();\n  const requestHeaders = {\n    \"content-type\": \"application/x-www-form-urlencoded\",\n    accept: \"application/json\",\n    \"user-agent\": \"better-auth\",\n    ...headers\n  };\n  body.set(\"grant_type\", \"authorization_code\");\n  body.set(\"code\", code);\n  codeVerifier && body.set(\"code_verifier\", codeVerifier);\n  options.clientKey && body.set(\"client_key\", options.clientKey);\n  deviceId && body.set(\"device_id\", deviceId);\n  body.set(\"redirect_uri\", options.redirectURI || redirectURI);\n  if (resource) {\n    if (typeof resource === \"string\") {\n      body.append(\"resource\", resource);\n    } else {\n      for (const _resource of resource) {\n        body.append(\"resource\", _resource);\n      }\n    }\n  }\n  if (authentication === \"basic\") {\n    const encodedCredentials = _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_4__.base64.encode(\n      `${options.clientId}:${options.clientSecret ?? \"\"}`\n    );\n    requestHeaders[\"authorization\"] = `Basic ${encodedCredentials}`;\n  } else {\n    options.clientId && body.set(\"client_id\", options.clientId);\n    if (options.clientSecret) {\n      body.set(\"client_secret\", options.clientSecret);\n    }\n  }\n  for (const [key, value] of Object.entries(additionalParams)) {\n    if (!body.has(key)) body.append(key, value);\n  }\n  return {\n    body,\n    headers: requestHeaders\n  };\n}\nasync function validateAuthorizationCode({\n  code,\n  codeVerifier,\n  redirectURI,\n  options,\n  tokenEndpoint,\n  authentication,\n  deviceId,\n  headers,\n  additionalParams = {},\n  resource\n}) {\n  const { body, headers: requestHeaders } = createAuthorizationCodeRequest({\n    code,\n    codeVerifier,\n    redirectURI,\n    options,\n    authentication,\n    deviceId,\n    headers,\n    additionalParams,\n    resource\n  });\n  const { data, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(tokenEndpoint, {\n    method: \"POST\",\n    body,\n    headers: requestHeaders\n  });\n  if (error) {\n    throw error;\n  }\n  const tokens = getOAuth2Tokens(data);\n  return tokens;\n}\nasync function validateToken(token, jwksEndpoint) {\n  const { data, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(jwksEndpoint, {\n    method: \"GET\",\n    headers: {\n      accept: \"application/json\",\n      \"user-agent\": \"better-auth\"\n    }\n  });\n  if (error) {\n    throw error;\n  }\n  const keys = data[\"keys\"];\n  const header = JSON.parse(atob(token.split(\".\")[0]));\n  const key = keys.find((key2) => key2.kid === header.kid);\n  if (!key) {\n    throw new Error(\"Key not found\");\n  }\n  const verified = await (0,jose__WEBPACK_IMPORTED_MODULE_23__.jwtVerify)(token, key);\n  return verified;\n}\n\nfunction createRefreshAccessTokenRequest({\n  refreshToken,\n  options,\n  authentication,\n  extraParams,\n  resource\n}) {\n  const body = new URLSearchParams();\n  const headers = {\n    \"content-type\": \"application/x-www-form-urlencoded\",\n    accept: \"application/json\"\n  };\n  body.set(\"grant_type\", \"refresh_token\");\n  body.set(\"refresh_token\", refreshToken);\n  if (authentication === \"basic\") {\n    if (options.clientId) {\n      headers[\"authorization\"] = \"Basic \" + _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_4__.base64.encode(`${options.clientId}:${options.clientSecret ?? \"\"}`);\n    } else {\n      headers[\"authorization\"] = \"Basic \" + _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_4__.base64.encode(`:${options.clientSecret ?? \"\"}`);\n    }\n  } else {\n    options.clientId && body.set(\"client_id\", options.clientId);\n    if (options.clientSecret) {\n      body.set(\"client_secret\", options.clientSecret);\n    }\n  }\n  if (resource) {\n    if (typeof resource === \"string\") {\n      body.append(\"resource\", resource);\n    } else {\n      for (const _resource of resource) {\n        body.append(\"resource\", _resource);\n      }\n    }\n  }\n  if (extraParams) {\n    for (const [key, value] of Object.entries(extraParams)) {\n      body.set(key, value);\n    }\n  }\n  return {\n    body,\n    headers\n  };\n}\nasync function refreshAccessToken({\n  refreshToken,\n  options,\n  tokenEndpoint,\n  authentication,\n  extraParams\n}) {\n  const { body, headers } = createRefreshAccessTokenRequest({\n    refreshToken,\n    options,\n    authentication,\n    extraParams\n  });\n  const { data, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(tokenEndpoint, {\n    method: \"POST\",\n    body,\n    headers\n  });\n  if (error) {\n    throw error;\n  }\n  const tokens = {\n    accessToken: data.access_token,\n    refreshToken: data.refresh_token,\n    tokenType: data.token_type,\n    scopes: data.scope?.split(\" \"),\n    idToken: data.id_token\n  };\n  if (data.expires_in) {\n    const now = /* @__PURE__ */ new Date();\n    tokens.accessTokenExpiresAt = new Date(\n      now.getTime() + data.expires_in * 1e3\n    );\n  }\n  return tokens;\n}\n\nconst apple = (options) => {\n  const tokenEndpoint = \"https://appleid.apple.com/auth/token\";\n  return {\n    id: \"apple\",\n    name: \"Apple\",\n    async createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scope = options.disableDefaultScope ? [] : [\"email\", \"name\"];\n      options.scope && _scope.push(...options.scope);\n      scopes && _scope.push(...scopes);\n      const url = await createAuthorizationURL({\n        id: \"apple\",\n        options,\n        authorizationEndpoint: \"https://appleid.apple.com/auth/authorize\",\n        scopes: _scope,\n        state,\n        redirectURI,\n        responseMode: \"form_post\",\n        responseType: \"code id_token\"\n      });\n      return url;\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    async verifyIdToken(token, nonce) {\n      if (options.disableIdTokenSignIn) {\n        return false;\n      }\n      if (options.verifyIdToken) {\n        return options.verifyIdToken(token, nonce);\n      }\n      const decodedHeader = (0,jose__WEBPACK_IMPORTED_MODULE_26__.decodeProtectedHeader)(token);\n      const { kid, alg: jwtAlg } = decodedHeader;\n      if (!kid || !jwtAlg) return false;\n      const publicKey = await getApplePublicKey(kid);\n      const { payload: jwtClaims } = await (0,jose__WEBPACK_IMPORTED_MODULE_23__.jwtVerify)(token, publicKey, {\n        algorithms: [jwtAlg],\n        issuer: \"https://appleid.apple.com\",\n        audience: options.audience && options.audience.length ? options.audience : options.appBundleIdentifier ? options.appBundleIdentifier : options.clientId,\n        maxTokenAge: \"1h\"\n      });\n      [\"email_verified\", \"is_private_email\"].forEach((field) => {\n        if (jwtClaims[field] !== void 0) {\n          jwtClaims[field] = Boolean(jwtClaims[field]);\n        }\n      });\n      if (nonce && jwtClaims.nonce !== nonce) {\n        return false;\n      }\n      return !!jwtClaims;\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://appleid.apple.com/auth/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      if (!token.idToken) {\n        return null;\n      }\n      const profile = (0,jose__WEBPACK_IMPORTED_MODULE_27__.decodeJwt)(token.idToken);\n      if (!profile) {\n        return null;\n      }\n      const name = token.user ? `${token.user.name?.firstName} ${token.user.name?.lastName}` : profile.name || profile.email;\n      const emailVerified = typeof profile.email_verified === \"boolean\" ? profile.email_verified : profile.email_verified === \"true\";\n      const enrichedProfile = {\n        ...profile,\n        name\n      };\n      const userMap = await options.mapProfileToUser?.(enrichedProfile);\n      return {\n        user: {\n          id: profile.sub,\n          name: enrichedProfile.name,\n          emailVerified,\n          email: profile.email,\n          ...userMap\n        },\n        data: enrichedProfile\n      };\n    },\n    options\n  };\n};\nconst getApplePublicKey = async (kid) => {\n  const APPLE_BASE_URL = \"https://appleid.apple.com\";\n  const JWKS_APPLE_URI = \"/auth/keys\";\n  const { data } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(`${APPLE_BASE_URL}${JWKS_APPLE_URI}`);\n  if (!data?.keys) {\n    throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n      message: \"Keys not found\"\n    });\n  }\n  const jwk = data.keys.find((key) => key.kid === kid);\n  if (!jwk) {\n    throw new Error(`JWK with kid ${kid} not found`);\n  }\n  return await (0,jose__WEBPACK_IMPORTED_MODULE_28__.importJWK)(jwk, jwk.alg);\n};\n\nconst atlassian = (options) => {\n  return {\n    id: \"atlassian\",\n    name: \"Atlassian\",\n    async createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n      if (!options.clientId || !options.clientSecret) {\n        _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_13__.a.error(\"Client Id and Secret are required for Atlassian\");\n        throw new _better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_21__.B(\"CLIENT_ID_AND_SECRET_REQUIRED\");\n      }\n      if (!codeVerifier) {\n        throw new _better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_21__.B(\"codeVerifier is required for Atlassian\");\n      }\n      const _scopes = options.disableDefaultScope ? [] : [\"read:jira-user\", \"offline_access\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"atlassian\",\n        options,\n        authorizationEndpoint: \"https://auth.atlassian.com/authorize\",\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI,\n        additionalParams: {\n          audience: \"api.atlassian.com\"\n        },\n        prompt: options.prompt\n      });\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://auth.atlassian.com/oauth/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://auth.atlassian.com/oauth/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      if (!token.accessToken) {\n        return null;\n      }\n      try {\n        const { data: profile } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(\"https://api.atlassian.com/me\", {\n          headers: { Authorization: `Bearer ${token.accessToken}` }\n        });\n        if (!profile) return null;\n        const userMap = await options.mapProfileToUser?.(profile);\n        return {\n          user: {\n            id: profile.account_id,\n            name: profile.name,\n            email: profile.email,\n            image: profile.picture,\n            emailVerified: false,\n            ...userMap\n          },\n          data: profile\n        };\n      } catch (error) {\n        _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_13__.a.error(\"Failed to fetch user info from Figma:\", error);\n        return null;\n      }\n    },\n    options\n  };\n};\n\nconst cognito = (options) => {\n  if (!options.domain || !options.region || !options.userPoolId) {\n    _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_13__.a.error(\n      \"Domain, region and userPoolId are required for Amazon Cognito. Make sure to provide them in the options.\"\n    );\n    throw new _better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_21__.B(\"DOMAIN_AND_REGION_REQUIRED\");\n  }\n  const cleanDomain = options.domain.replace(/^https?:\\/\\//, \"\");\n  const authorizationEndpoint = `https://${cleanDomain}/oauth2/authorize`;\n  const tokenEndpoint = `https://${cleanDomain}/oauth2/token`;\n  const userInfoEndpoint = `https://${cleanDomain}/oauth2/userinfo`;\n  return {\n    id: \"cognito\",\n    name: \"Cognito\",\n    async createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n      if (!options.clientId) {\n        _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_13__.a.error(\n          \"ClientId is required for Amazon Cognito. Make sure to provide them in the options.\"\n        );\n        throw new _better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_21__.B(\"CLIENT_ID_AND_SECRET_REQUIRED\");\n      }\n      if (options.requireClientSecret && !options.clientSecret) {\n        _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_13__.a.error(\n          \"Client Secret is required when requireClientSecret is true. Make sure to provide it in the options.\"\n        );\n        throw new _better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_21__.B(\"CLIENT_SECRET_REQUIRED\");\n      }\n      const _scopes = options.disableDefaultScope ? [] : [\"openid\", \"profile\", \"email\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      const url = await createAuthorizationURL({\n        id: \"cognito\",\n        options: {\n          ...options\n        },\n        authorizationEndpoint,\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI,\n        prompt: options.prompt\n      });\n      return url;\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint\n      });\n    },\n    async verifyIdToken(token, nonce) {\n      if (options.disableIdTokenSignIn) {\n        return false;\n      }\n      if (options.verifyIdToken) {\n        return options.verifyIdToken(token, nonce);\n      }\n      try {\n        const decodedHeader = (0,jose__WEBPACK_IMPORTED_MODULE_26__.decodeProtectedHeader)(token);\n        const { kid, alg: jwtAlg } = decodedHeader;\n        if (!kid || !jwtAlg) return false;\n        const publicKey = await getCognitoPublicKey(\n          kid,\n          options.region,\n          options.userPoolId\n        );\n        const expectedIssuer = `https://cognito-idp.${options.region}.amazonaws.com/${options.userPoolId}`;\n        const { payload: jwtClaims } = await (0,jose__WEBPACK_IMPORTED_MODULE_23__.jwtVerify)(token, publicKey, {\n          algorithms: [jwtAlg],\n          issuer: expectedIssuer,\n          audience: options.clientId,\n          maxTokenAge: \"1h\"\n        });\n        if (nonce && jwtClaims.nonce !== nonce) {\n          return false;\n        }\n        return true;\n      } catch (error) {\n        _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_13__.a.error(\"Failed to verify ID token:\", error);\n        return false;\n      }\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      if (token.idToken) {\n        try {\n          const profile = (0,jose__WEBPACK_IMPORTED_MODULE_27__.decodeJwt)(token.idToken);\n          if (!profile) {\n            return null;\n          }\n          const name = profile.name || profile.given_name || profile.username || profile.email;\n          const enrichedProfile = {\n            ...profile,\n            name\n          };\n          const userMap = await options.mapProfileToUser?.(enrichedProfile);\n          return {\n            user: {\n              id: profile.sub,\n              name: enrichedProfile.name,\n              email: profile.email,\n              image: profile.picture,\n              emailVerified: profile.email_verified,\n              ...userMap\n            },\n            data: enrichedProfile\n          };\n        } catch (error) {\n          _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_13__.a.error(\"Failed to decode ID token:\", error);\n        }\n      }\n      if (token.accessToken) {\n        try {\n          const { data: userInfo } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(\n            userInfoEndpoint,\n            {\n              headers: {\n                Authorization: `Bearer ${token.accessToken}`\n              }\n            }\n          );\n          if (userInfo) {\n            const userMap = await options.mapProfileToUser?.(userInfo);\n            return {\n              user: {\n                id: userInfo.sub,\n                name: userInfo.name || userInfo.given_name || userInfo.username,\n                email: userInfo.email,\n                image: userInfo.picture,\n                emailVerified: userInfo.email_verified,\n                ...userMap\n              },\n              data: userInfo\n            };\n          }\n        } catch (error) {\n          _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_13__.a.error(\"Failed to fetch user info from Cognito:\", error);\n        }\n      }\n      return null;\n    },\n    options\n  };\n};\nconst getCognitoPublicKey = async (kid, region, userPoolId) => {\n  const COGNITO_JWKS_URI = `https://cognito-idp.${region}.amazonaws.com/${userPoolId}/.well-known/jwks.json`;\n  try {\n    const { data } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(COGNITO_JWKS_URI);\n    if (!data?.keys) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: \"Keys not found\"\n      });\n    }\n    const jwk = data.keys.find((key) => key.kid === kid);\n    if (!jwk) {\n      throw new Error(`JWK with kid ${kid} not found`);\n    }\n    return await (0,jose__WEBPACK_IMPORTED_MODULE_28__.importJWK)(jwk, jwk.alg);\n  } catch (error) {\n    _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_13__.a.error(\"Failed to fetch Cognito public key:\", error);\n    throw error;\n  }\n};\n\nconst discord = (options) => {\n  return {\n    id: \"discord\",\n    name: \"Discord\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"identify\", \"email\"];\n      scopes && _scopes.push(...scopes);\n      options.scope && _scopes.push(...options.scope);\n      return new URL(\n        `https://discord.com/api/oauth2/authorize?scope=${_scopes.join(\n          \"+\"\n        )}&response_type=code&client_id=${options.clientId}&redirect_uri=${encodeURIComponent(\n          options.redirectURI || redirectURI\n        )}&state=${state}&prompt=${options.prompt || \"none\"}`\n      );\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://discord.com/api/oauth2/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://discord.com/api/oauth2/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(\n        \"https://discord.com/api/users/@me\",\n        {\n          headers: {\n            authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      if (profile.avatar === null) {\n        const defaultAvatarNumber = profile.discriminator === \"0\" ? Number(BigInt(profile.id) >> BigInt(22)) % 6 : parseInt(profile.discriminator) % 5;\n        profile.image_url = `https://cdn.discordapp.com/embed/avatars/${defaultAvatarNumber}.png`;\n      } else {\n        const format = profile.avatar.startsWith(\"a_\") ? \"gif\" : \"png\";\n        profile.image_url = `https://cdn.discordapp.com/avatars/${profile.id}/${profile.avatar}.${format}`;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.id,\n          name: profile.global_name || profile.username || \"\",\n          email: profile.email,\n          emailVerified: profile.verified,\n          image: profile.image_url,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst facebook = (options) => {\n  return {\n    id: \"facebook\",\n    name: \"Facebook\",\n    async createAuthorizationURL({ state, scopes, redirectURI, loginHint }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"email\", \"public_profile\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return await createAuthorizationURL({\n        id: \"facebook\",\n        options,\n        authorizationEndpoint: \"https://www.facebook.com/v21.0/dialog/oauth\",\n        scopes: _scopes,\n        state,\n        redirectURI,\n        loginHint,\n        additionalParams: options.configId ? {\n          config_id: options.configId\n        } : {}\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://graph.facebook.com/oauth/access_token\"\n      });\n    },\n    async verifyIdToken(token, nonce) {\n      if (options.disableIdTokenSignIn) {\n        return false;\n      }\n      if (options.verifyIdToken) {\n        return options.verifyIdToken(token, nonce);\n      }\n      if (token.split(\".\").length === 3) {\n        try {\n          const { payload: jwtClaims } = await (0,jose__WEBPACK_IMPORTED_MODULE_23__.jwtVerify)(\n            token,\n            (0,jose__WEBPACK_IMPORTED_MODULE_29__.createRemoteJWKSet)(\n              // https://developers.facebook.com/docs/facebook-login/limited-login/token/#jwks\n              new URL(\n                \"https://limited.facebook.com/.well-known/oauth/openid/jwks/\"\n              )\n            ),\n            {\n              algorithms: [\"RS256\"],\n              audience: options.clientId,\n              issuer: \"https://www.facebook.com\"\n            }\n          );\n          if (nonce && jwtClaims.nonce !== nonce) {\n            return false;\n          }\n          return !!jwtClaims;\n        } catch (error) {\n          return false;\n        }\n      }\n      return true;\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://graph.facebook.com/v18.0/oauth/access_token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      if (token.idToken && token.idToken.split(\".\").length === 3) {\n        const profile2 = (0,jose__WEBPACK_IMPORTED_MODULE_27__.decodeJwt)(token.idToken);\n        const user = {\n          id: profile2.sub,\n          name: profile2.name,\n          email: profile2.email,\n          picture: {\n            data: {\n              url: profile2.picture,\n              height: 100,\n              width: 100,\n              is_silhouette: false\n            }\n          }\n        };\n        const userMap2 = await options.mapProfileToUser?.({\n          ...user,\n          email_verified: true\n        });\n        return {\n          user: {\n            ...user,\n            emailVerified: true,\n            ...userMap2\n          },\n          data: profile2\n        };\n      }\n      const fields = [\n        \"id\",\n        \"name\",\n        \"email\",\n        \"picture\",\n        ...options?.fields || []\n      ];\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(\n        \"https://graph.facebook.com/me?fields=\" + fields.join(\",\"),\n        {\n          auth: {\n            type: \"Bearer\",\n            token: token.accessToken\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.id,\n          name: profile.name,\n          email: profile.email,\n          image: profile.picture.data.url,\n          emailVerified: profile.email_verified,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst figma = (options) => {\n  return {\n    id: \"figma\",\n    name: \"Figma\",\n    async createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n      if (!options.clientId || !options.clientSecret) {\n        _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_13__.a.error(\n          \"Client Id and Client Secret are required for Figma. Make sure to provide them in the options.\"\n        );\n        throw new _better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_21__.B(\"CLIENT_ID_AND_SECRET_REQUIRED\");\n      }\n      if (!codeVerifier) {\n        throw new _better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_21__.B(\"codeVerifier is required for Figma\");\n      }\n      const _scopes = options.disableDefaultScope ? [] : [\"file_read\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      const url = await createAuthorizationURL({\n        id: \"figma\",\n        options,\n        authorizationEndpoint: \"https://www.figma.com/oauth\",\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI\n      });\n      return url;\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://www.figma.com/api/oauth/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://www.figma.com/api/oauth/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      try {\n        const { data: profile } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(\n          \"https://api.figma.com/v1/me\",\n          {\n            headers: {\n              Authorization: `Bearer ${token.accessToken}`\n            }\n          }\n        );\n        if (!profile) {\n          _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_13__.a.error(\"Failed to fetch user from Figma\");\n          return null;\n        }\n        const userMap = await options.mapProfileToUser?.(profile);\n        return {\n          user: {\n            id: profile.id,\n            name: profile.handle,\n            email: profile.email,\n            image: profile.img_url,\n            emailVerified: !!profile.email,\n            ...userMap\n          },\n          data: profile\n        };\n      } catch (error) {\n        _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_13__.a.error(\"Failed to fetch user info from Figma:\", error);\n        return null;\n      }\n    },\n    options\n  };\n};\n\nconst github = (options) => {\n  const tokenEndpoint = \"https://github.com/login/oauth/access_token\";\n  return {\n    id: \"github\",\n    name: \"GitHub\",\n    createAuthorizationURL({ state, scopes, loginHint, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"read:user\", \"user:email\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"github\",\n        options,\n        authorizationEndpoint: \"https://github.com/login/oauth/authorize\",\n        scopes: _scopes,\n        state,\n        redirectURI,\n        loginHint,\n        prompt: options.prompt\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://github.com/login/oauth/access_token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(\n        \"https://api.github.com/user\",\n        {\n          headers: {\n            \"User-Agent\": \"better-auth\",\n            authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const { data: emails } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(\"https://api.github.com/user/emails\", {\n        headers: {\n          Authorization: `Bearer ${token.accessToken}`,\n          \"User-Agent\": \"better-auth\"\n        }\n      });\n      if (!profile.email && emails) {\n        profile.email = (emails.find((e) => e.primary) ?? emails[0])?.email;\n      }\n      const emailVerified = emails?.find((e) => e.email === profile.email)?.verified ?? false;\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.id,\n          name: profile.name || profile.login,\n          email: profile.email,\n          image: profile.avatar_url,\n          emailVerified,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst google = (options) => {\n  return {\n    id: \"google\",\n    name: \"Google\",\n    async createAuthorizationURL({\n      state,\n      scopes,\n      codeVerifier,\n      redirectURI,\n      loginHint,\n      display\n    }) {\n      if (!options.clientId || !options.clientSecret) {\n        _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_13__.a.error(\n          \"Client Id and Client Secret is required for Google. Make sure to provide them in the options.\"\n        );\n        throw new _better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_21__.B(\"CLIENT_ID_AND_SECRET_REQUIRED\");\n      }\n      if (!codeVerifier) {\n        throw new _better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_21__.B(\"codeVerifier is required for Google\");\n      }\n      const _scopes = options.disableDefaultScope ? [] : [\"email\", \"profile\", \"openid\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      const url = await createAuthorizationURL({\n        id: \"google\",\n        options,\n        authorizationEndpoint: \"https://accounts.google.com/o/oauth2/auth\",\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI,\n        prompt: options.prompt,\n        accessType: options.accessType,\n        display: display || options.display,\n        loginHint,\n        hd: options.hd,\n        additionalParams: {\n          include_granted_scopes: \"true\"\n        }\n      });\n      return url;\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://oauth2.googleapis.com/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://www.googleapis.com/oauth2/v4/token\"\n      });\n    },\n    async verifyIdToken(token, nonce) {\n      if (options.disableIdTokenSignIn) {\n        return false;\n      }\n      if (options.verifyIdToken) {\n        return options.verifyIdToken(token, nonce);\n      }\n      const googlePublicKeyUrl = `https://www.googleapis.com/oauth2/v3/tokeninfo?id_token=${token}`;\n      const { data: tokenInfo } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(googlePublicKeyUrl);\n      if (!tokenInfo) {\n        return false;\n      }\n      const isValid = tokenInfo.aud === options.clientId && (tokenInfo.iss === \"https://accounts.google.com\" || tokenInfo.iss === \"accounts.google.com\");\n      return isValid;\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      if (!token.idToken) {\n        return null;\n      }\n      const user = (0,jose__WEBPACK_IMPORTED_MODULE_27__.decodeJwt)(token.idToken);\n      const userMap = await options.mapProfileToUser?.(user);\n      return {\n        user: {\n          id: user.sub,\n          name: user.name,\n          email: user.email,\n          image: user.picture,\n          emailVerified: user.email_verified,\n          ...userMap\n        },\n        data: user\n      };\n    },\n    options\n  };\n};\n\nconst kick = (options) => {\n  return {\n    id: \"kick\",\n    name: \"Kick\",\n    createAuthorizationURL({ state, scopes, redirectURI, codeVerifier }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"user:read\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"kick\",\n        redirectURI,\n        options,\n        authorizationEndpoint: \"https://id.kick.com/oauth/authorize\",\n        scopes: _scopes,\n        codeVerifier,\n        state\n      });\n    },\n    async validateAuthorizationCode({ code, redirectURI, codeVerifier }) {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://id.kick.com/oauth/token\",\n        codeVerifier\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(\"https://api.kick.com/public/v1/users\", {\n        method: \"GET\",\n        headers: {\n          Authorization: `Bearer ${token.accessToken}`\n        }\n      });\n      if (error) {\n        return null;\n      }\n      const profile = data.data[0];\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.user_id,\n          name: profile.name,\n          email: profile.email,\n          image: profile.profile_picture,\n          emailVerified: true,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst huggingface = (options) => {\n  return {\n    id: \"huggingface\",\n    name: \"Hugging Face\",\n    createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"openid\", \"profile\", \"email\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"huggingface\",\n        options,\n        authorizationEndpoint: \"https://huggingface.co/oauth/authorize\",\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI\n      });\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://huggingface.co/oauth/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://huggingface.co/oauth/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(\n        \"https://huggingface.co/oauth/userinfo\",\n        {\n          method: \"GET\",\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.sub,\n          name: profile.name || profile.preferred_username,\n          email: profile.email,\n          image: profile.picture,\n          emailVerified: profile.email_verified ?? false,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst microsoft = (options) => {\n  const tenant = options.tenantId || \"common\";\n  const authority = options.authority || \"https://login.microsoftonline.com\";\n  const authorizationEndpoint = `${authority}/${tenant}/oauth2/v2.0/authorize`;\n  const tokenEndpoint = `${authority}/${tenant}/oauth2/v2.0/token`;\n  return {\n    id: \"microsoft\",\n    name: \"Microsoft EntraID\",\n    createAuthorizationURL(data) {\n      const scopes = options.disableDefaultScope ? [] : [\"openid\", \"profile\", \"email\", \"User.Read\", \"offline_access\"];\n      options.scope && scopes.push(...options.scope);\n      data.scopes && scopes.push(...data.scopes);\n      return createAuthorizationURL({\n        id: \"microsoft\",\n        options,\n        authorizationEndpoint,\n        state: data.state,\n        codeVerifier: data.codeVerifier,\n        scopes,\n        redirectURI: data.redirectURI,\n        prompt: options.prompt,\n        loginHint: data.loginHint\n      });\n    },\n    validateAuthorizationCode({ code, codeVerifier, redirectURI }) {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      if (!token.idToken) {\n        return null;\n      }\n      const user = (0,jose__WEBPACK_IMPORTED_MODULE_27__.decodeJwt)(token.idToken);\n      const profilePhotoSize = options.profilePhotoSize || 48;\n      await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(\n        `https://graph.microsoft.com/v1.0/me/photos/${profilePhotoSize}x${profilePhotoSize}/$value`,\n        {\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          },\n          async onResponse(context) {\n            if (options.disableProfilePhoto || !context.response.ok) {\n              return;\n            }\n            try {\n              const response = context.response.clone();\n              const pictureBuffer = await response.arrayBuffer();\n              const pictureBase64 = _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_4__.base64.encode(pictureBuffer);\n              user.picture = `data:image/jpeg;base64, ${pictureBase64}`;\n            } catch (e) {\n              _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_13__.a.error(\n                e && typeof e === \"object\" && \"name\" in e ? e.name : \"\",\n                e\n              );\n            }\n          }\n        }\n      );\n      const userMap = await options.mapProfileToUser?.(user);\n      return {\n        user: {\n          id: user.sub,\n          name: user.name,\n          email: user.email,\n          image: user.picture,\n          emailVerified: true,\n          ...userMap\n        },\n        data: user\n      };\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      const scopes = options.disableDefaultScope ? [] : [\"openid\", \"profile\", \"email\", \"User.Read\", \"offline_access\"];\n      options.scope && scopes.push(...options.scope);\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientSecret: options.clientSecret\n        },\n        extraParams: {\n          scope: scopes.join(\" \")\n          // Include the scopes in request to microsoft\n        },\n        tokenEndpoint\n      });\n    },\n    options\n  };\n};\n\nconst slack = (options) => {\n  return {\n    id: \"slack\",\n    name: \"Slack\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"openid\", \"profile\", \"email\"];\n      scopes && _scopes.push(...scopes);\n      options.scope && _scopes.push(...options.scope);\n      const url = new URL(\"https://slack.com/openid/connect/authorize\");\n      url.searchParams.set(\"scope\", _scopes.join(\" \"));\n      url.searchParams.set(\"response_type\", \"code\");\n      url.searchParams.set(\"client_id\", options.clientId);\n      url.searchParams.set(\"redirect_uri\", options.redirectURI || redirectURI);\n      url.searchParams.set(\"state\", state);\n      return url;\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://slack.com/api/openid.connect.token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://slack.com/api/openid.connect.token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(\n        \"https://slack.com/api/openid.connect.userInfo\",\n        {\n          headers: {\n            authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile[\"https://slack.com/user_id\"],\n          name: profile.name || \"\",\n          email: profile.email,\n          emailVerified: profile.email_verified,\n          image: profile.picture || profile[\"https://slack.com/user_image_512\"],\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst notion = (options) => {\n  const tokenEndpoint = \"https://api.notion.com/v1/oauth/token\";\n  return {\n    id: \"notion\",\n    name: \"Notion\",\n    createAuthorizationURL({ state, scopes, loginHint, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"notion\",\n        options,\n        authorizationEndpoint: \"https://api.notion.com/v1/oauth/authorize\",\n        scopes: _scopes,\n        state,\n        redirectURI,\n        loginHint,\n        additionalParams: {\n          owner: \"user\"\n        }\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint,\n        authentication: \"basic\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(\"https://api.notion.com/v1/users/me\", {\n        headers: {\n          Authorization: `Bearer ${token.accessToken}`,\n          \"Notion-Version\": \"2022-06-28\"\n        }\n      });\n      if (error || !profile) {\n        return null;\n      }\n      const userProfile = profile.bot?.owner?.user;\n      if (!userProfile) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(userProfile);\n      return {\n        user: {\n          id: userProfile.id,\n          name: userProfile.name || \"Notion User\",\n          email: userProfile.person?.email || null,\n          image: userProfile.avatar_url,\n          emailVerified: !!userProfile.person?.email,\n          ...userMap\n        },\n        data: userProfile\n      };\n    },\n    options\n  };\n};\n\nconst spotify = (options) => {\n  return {\n    id: \"spotify\",\n    name: \"Spotify\",\n    createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"user-read-email\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"spotify\",\n        options,\n        authorizationEndpoint: \"https://accounts.spotify.com/authorize\",\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI\n      });\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://accounts.spotify.com/api/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://accounts.spotify.com/api/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(\n        \"https://api.spotify.com/v1/me\",\n        {\n          method: \"GET\",\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.id,\n          name: profile.display_name,\n          email: profile.email,\n          image: profile.images[0]?.url,\n          emailVerified: false,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst twitch = (options) => {\n  return {\n    id: \"twitch\",\n    name: \"Twitch\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"user:read:email\", \"openid\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"twitch\",\n        redirectURI,\n        options,\n        authorizationEndpoint: \"https://id.twitch.tv/oauth2/authorize\",\n        scopes: _scopes,\n        state,\n        claims: options.claims || [\n          \"email\",\n          \"email_verified\",\n          \"preferred_username\",\n          \"picture\"\n        ]\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://id.twitch.tv/oauth2/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://id.twitch.tv/oauth2/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const idToken = token.idToken;\n      if (!idToken) {\n        _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_13__.a.error(\"No idToken found in token\");\n        return null;\n      }\n      const profile = (0,jose__WEBPACK_IMPORTED_MODULE_27__.decodeJwt)(idToken);\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.sub,\n          name: profile.preferred_username,\n          email: profile.email,\n          image: profile.picture,\n          emailVerified: profile.email_verified,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst twitter = (options) => {\n  return {\n    id: \"twitter\",\n    name: \"Twitter\",\n    createAuthorizationURL(data) {\n      const _scopes = options.disableDefaultScope ? [] : [\"users.read\", \"tweet.read\", \"offline.access\", \"users.email\"];\n      options.scope && _scopes.push(...options.scope);\n      data.scopes && _scopes.push(...data.scopes);\n      return createAuthorizationURL({\n        id: \"twitter\",\n        options,\n        authorizationEndpoint: \"https://x.com/i/oauth2/authorize\",\n        scopes: _scopes,\n        state: data.state,\n        codeVerifier: data.codeVerifier,\n        redirectURI: data.redirectURI\n      });\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        authentication: \"basic\",\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://api.x.com/2/oauth2/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        authentication: \"basic\",\n        tokenEndpoint: \"https://api.x.com/2/oauth2/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error: profileError } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(\n        \"https://api.x.com/2/users/me?user.fields=profile_image_url\",\n        {\n          method: \"GET\",\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (profileError) {\n        return null;\n      }\n      const { data: emailData, error: emailError } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(\"https://api.x.com/2/users/me?user.fields=confirmed_email\", {\n        method: \"GET\",\n        headers: {\n          Authorization: `Bearer ${token.accessToken}`\n        }\n      });\n      let emailVerified = false;\n      if (!emailError && emailData?.data?.confirmed_email) {\n        profile.data.email = emailData.data.confirmed_email;\n        emailVerified = true;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.data.id,\n          name: profile.data.name,\n          email: profile.data.email || profile.data.username || null,\n          image: profile.data.profile_image_url,\n          emailVerified,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst dropbox = (options) => {\n  const tokenEndpoint = \"https://api.dropboxapi.com/oauth2/token\";\n  return {\n    id: \"dropbox\",\n    name: \"Dropbox\",\n    createAuthorizationURL: async ({\n      state,\n      scopes,\n      codeVerifier,\n      redirectURI\n    }) => {\n      const _scopes = options.disableDefaultScope ? [] : [\"account_info.read\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      const additionalParams = {};\n      if (options.accessType) {\n        additionalParams.token_access_type = options.accessType;\n      }\n      return await createAuthorizationURL({\n        id: \"dropbox\",\n        options,\n        authorizationEndpoint: \"https://www.dropbox.com/oauth2/authorize\",\n        scopes: _scopes,\n        state,\n        redirectURI,\n        codeVerifier,\n        additionalParams\n      });\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return await validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://api.dropbox.com/oauth2/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(\n        \"https://api.dropboxapi.com/2/users/get_current_account\",\n        {\n          method: \"POST\",\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.account_id,\n          name: profile.name?.display_name,\n          email: profile.email,\n          emailVerified: profile.email_verified || false,\n          image: profile.profile_photo_url,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst linear = (options) => {\n  const tokenEndpoint = \"https://api.linear.app/oauth/token\";\n  return {\n    id: \"linear\",\n    name: \"Linear\",\n    createAuthorizationURL({ state, scopes, loginHint, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"read\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"linear\",\n        options,\n        authorizationEndpoint: \"https://linear.app/oauth/authorize\",\n        scopes: _scopes,\n        state,\n        redirectURI,\n        loginHint\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(\n        \"https://api.linear.app/graphql\",\n        {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token.accessToken}`\n          },\n          body: JSON.stringify({\n            query: `\n\t\t\t\t\t\t\tquery {\n\t\t\t\t\t\t\t\tviewer {\n\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\temail\n\t\t\t\t\t\t\t\t\tavatarUrl\n\t\t\t\t\t\t\t\t\tactive\n\t\t\t\t\t\t\t\t\tcreatedAt\n\t\t\t\t\t\t\t\t\tupdatedAt\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t`\n          })\n        }\n      );\n      if (error || !profile?.data?.viewer) {\n        return null;\n      }\n      const userData = profile.data.viewer;\n      const userMap = await options.mapProfileToUser?.(userData);\n      return {\n        user: {\n          id: profile.data.viewer.id,\n          name: profile.data.viewer.name,\n          email: profile.data.viewer.email,\n          image: profile.data.viewer.avatarUrl,\n          emailVerified: true,\n          ...userMap\n        },\n        data: userData\n      };\n    },\n    options\n  };\n};\n\nconst linkedin = (options) => {\n  const authorizationEndpoint = \"https://www.linkedin.com/oauth/v2/authorization\";\n  const tokenEndpoint = \"https://www.linkedin.com/oauth/v2/accessToken\";\n  return {\n    id: \"linkedin\",\n    name: \"Linkedin\",\n    createAuthorizationURL: async ({\n      state,\n      scopes,\n      redirectURI,\n      loginHint\n    }) => {\n      const _scopes = options.disableDefaultScope ? [] : [\"profile\", \"email\", \"openid\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return await createAuthorizationURL({\n        id: \"linkedin\",\n        options,\n        authorizationEndpoint,\n        scopes: _scopes,\n        state,\n        loginHint,\n        redirectURI\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return await validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(\n        \"https://api.linkedin.com/v2/userinfo\",\n        {\n          method: \"GET\",\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.sub,\n          name: profile.name,\n          email: profile.email,\n          emailVerified: profile.email_verified || false,\n          image: profile.picture,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst cleanDoubleSlashes = (input = \"\") => {\n  return input.split(\"://\").map((str) => str.replace(/\\/{2,}/g, \"/\")).join(\"://\");\n};\nconst issuerToEndpoints = (issuer) => {\n  let baseUrl = issuer || \"https://gitlab.com\";\n  return {\n    authorizationEndpoint: cleanDoubleSlashes(`${baseUrl}/oauth/authorize`),\n    tokenEndpoint: cleanDoubleSlashes(`${baseUrl}/oauth/token`),\n    userinfoEndpoint: cleanDoubleSlashes(`${baseUrl}/api/v4/user`)\n  };\n};\nconst gitlab = (options) => {\n  const { authorizationEndpoint, tokenEndpoint, userinfoEndpoint } = issuerToEndpoints(options.issuer);\n  const issuerId = \"gitlab\";\n  const issuerName = \"Gitlab\";\n  return {\n    id: issuerId,\n    name: issuerName,\n    createAuthorizationURL: async ({\n      state,\n      scopes,\n      codeVerifier,\n      loginHint,\n      redirectURI\n    }) => {\n      const _scopes = options.disableDefaultScope ? [] : [\"read_user\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return await createAuthorizationURL({\n        id: issuerId,\n        options,\n        authorizationEndpoint,\n        scopes: _scopes,\n        state,\n        redirectURI,\n        codeVerifier,\n        loginHint\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI, codeVerifier }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        codeVerifier,\n        tokenEndpoint\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://gitlab.com/oauth/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(\n        userinfoEndpoint,\n        { headers: { authorization: `Bearer ${token.accessToken}` } }\n      );\n      if (error || profile.state !== \"active\" || profile.locked) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.id,\n          name: profile.name ?? profile.username,\n          email: profile.email,\n          image: profile.avatar_url,\n          emailVerified: true,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst tiktok = (options) => {\n  return {\n    id: \"tiktok\",\n    name: \"TikTok\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"user.info.profile\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return new URL(\n        `https://www.tiktok.com/v2/auth/authorize?scope=${_scopes.join(\n          \",\"\n        )}&response_type=code&client_key=${options.clientKey}&client_secret=${options.clientSecret}&redirect_uri=${encodeURIComponent(\n          options.redirectURI || redirectURI\n        )}&state=${state}`\n      );\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI: options.redirectURI || redirectURI,\n        options: {\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://open.tiktokapis.com/v2/oauth/token/\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://open.tiktokapis.com/v2/oauth/token/\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const fields = [\n        \"open_id\",\n        \"avatar_large_url\",\n        \"display_name\",\n        \"username\"\n      ];\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(\n        `https://open.tiktokapis.com/v2/user/info/?fields=${fields.join(\",\")}`,\n        {\n          headers: {\n            authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      return {\n        user: {\n          email: profile.data.user.email || profile.data.user.username,\n          id: profile.data.user.open_id,\n          name: profile.data.user.display_name || profile.data.user.username,\n          image: profile.data.user.avatar_large_url,\n          /** @note Tiktok does not provide emailVerified or even email*/\n          emailVerified: profile.data.user.email ? true : false\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst reddit = (options) => {\n  return {\n    id: \"reddit\",\n    name: \"Reddit\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"identity\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"reddit\",\n        options,\n        authorizationEndpoint: \"https://www.reddit.com/api/v1/authorize\",\n        scopes: _scopes,\n        state,\n        redirectURI,\n        duration: options.duration\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      const body = new URLSearchParams({\n        grant_type: \"authorization_code\",\n        code,\n        redirect_uri: options.redirectURI || redirectURI\n      });\n      const headers = {\n        \"content-type\": \"application/x-www-form-urlencoded\",\n        accept: \"text/plain\",\n        \"user-agent\": \"better-auth\",\n        Authorization: `Basic ${_better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_4__.base64.encode(\n          `${options.clientId}:${options.clientSecret}`\n        )}`\n      };\n      const { data, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(\n        \"https://www.reddit.com/api/v1/access_token\",\n        {\n          method: \"POST\",\n          headers,\n          body: body.toString()\n        }\n      );\n      if (error) {\n        throw error;\n      }\n      return getOAuth2Tokens(data);\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        authentication: \"basic\",\n        tokenEndpoint: \"https://www.reddit.com/api/v1/access_token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(\n        \"https://oauth.reddit.com/api/v1/me\",\n        {\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`,\n            \"User-Agent\": \"better-auth\"\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.id,\n          name: profile.name,\n          email: profile.oauth_client_id,\n          emailVerified: profile.has_verified_email,\n          image: profile.icon_img?.split(\"?\")[0],\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst roblox = (options) => {\n  return {\n    id: \"roblox\",\n    name: \"Roblox\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"openid\", \"profile\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return new URL(\n        `https://apis.roblox.com/oauth/v1/authorize?scope=${_scopes.join(\n          \"+\"\n        )}&response_type=code&client_id=${options.clientId}&redirect_uri=${encodeURIComponent(\n          options.redirectURI || redirectURI\n        )}&state=${state}&prompt=${options.prompt || \"select_account consent\"}`\n      );\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI: options.redirectURI || redirectURI,\n        options,\n        tokenEndpoint: \"https://apis.roblox.com/oauth/v1/token\",\n        authentication: \"post\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://apis.roblox.com/oauth/v1/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(\n        \"https://apis.roblox.com/oauth/v1/userinfo\",\n        {\n          headers: {\n            authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.sub,\n          name: profile.nickname || profile.preferred_username || \"\",\n          image: profile.picture,\n          email: profile.preferred_username || null,\n          // Roblox does not provide email\n          emailVerified: true,\n          ...userMap\n        },\n        data: {\n          ...profile\n        }\n      };\n    },\n    options\n  };\n};\n\nconst salesforce = (options) => {\n  const environment = options.environment ?? \"production\";\n  const isSandbox = environment === \"sandbox\";\n  const authorizationEndpoint = options.loginUrl ? `https://${options.loginUrl}/services/oauth2/authorize` : isSandbox ? \"https://test.salesforce.com/services/oauth2/authorize\" : \"https://login.salesforce.com/services/oauth2/authorize\";\n  const tokenEndpoint = options.loginUrl ? `https://${options.loginUrl}/services/oauth2/token` : isSandbox ? \"https://test.salesforce.com/services/oauth2/token\" : \"https://login.salesforce.com/services/oauth2/token\";\n  const userInfoEndpoint = options.loginUrl ? `https://${options.loginUrl}/services/oauth2/userinfo` : isSandbox ? \"https://test.salesforce.com/services/oauth2/userinfo\" : \"https://login.salesforce.com/services/oauth2/userinfo\";\n  return {\n    id: \"salesforce\",\n    name: \"Salesforce\",\n    async createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n      if (!options.clientId || !options.clientSecret) {\n        _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_13__.a.error(\n          \"Client Id and Client Secret are required for Salesforce. Make sure to provide them in the options.\"\n        );\n        throw new _better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_21__.B(\"CLIENT_ID_AND_SECRET_REQUIRED\");\n      }\n      if (!codeVerifier) {\n        throw new _better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_21__.B(\"codeVerifier is required for Salesforce\");\n      }\n      const _scopes = options.disableDefaultScope ? [] : [\"openid\", \"email\", \"profile\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"salesforce\",\n        options,\n        authorizationEndpoint,\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI: options.redirectURI || redirectURI\n      });\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI: options.redirectURI || redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      try {\n        const { data: user } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(\n          userInfoEndpoint,\n          {\n            headers: {\n              Authorization: `Bearer ${token.accessToken}`\n            }\n          }\n        );\n        if (!user) {\n          _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_13__.a.error(\"Failed to fetch user info from Salesforce\");\n          return null;\n        }\n        const userMap = await options.mapProfileToUser?.(user);\n        return {\n          user: {\n            id: user.user_id,\n            name: user.name,\n            email: user.email,\n            image: user.photos?.picture || user.photos?.thumbnail,\n            emailVerified: user.email_verified ?? false,\n            ...userMap\n          },\n          data: user\n        };\n      } catch (error) {\n        _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_13__.a.error(\"Failed to fetch user info from Salesforce:\", error);\n        return null;\n      }\n    },\n    options\n  };\n};\n\nconst vk = (options) => {\n  return {\n    id: \"vk\",\n    name: \"VK\",\n    async createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"email\", \"phone\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      const authorizationEndpoint = \"https://id.vk.com/authorize\";\n      return createAuthorizationURL({\n        id: \"vk\",\n        options,\n        authorizationEndpoint,\n        scopes: _scopes,\n        state,\n        redirectURI,\n        codeVerifier\n      });\n    },\n    validateAuthorizationCode: async ({\n      code,\n      codeVerifier,\n      redirectURI,\n      deviceId\n    }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI: options.redirectURI || redirectURI,\n        options,\n        deviceId,\n        tokenEndpoint: \"https://id.vk.com/oauth2/auth\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://id.vk.com/oauth2/auth\"\n      });\n    },\n    async getUserInfo(data) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(data);\n      }\n      if (!data.accessToken) {\n        return null;\n      }\n      const formBody = new URLSearchParams({\n        access_token: data.accessToken,\n        client_id: options.clientId\n      }).toString();\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(\n        \"https://id.vk.com/oauth2/user_info\",\n        {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/x-www-form-urlencoded\"\n          },\n          body: formBody\n        }\n      );\n      if (error) {\n        return null;\n      }\n      if (!profile.user.email) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.user.user_id,\n          first_name: profile.user.first_name,\n          last_name: profile.user.last_name,\n          email: profile.user.email,\n          image: profile.user.avatar,\n          /** @note VK does not provide emailVerified*/\n          emailVerified: !!profile.user.email,\n          birthday: profile.user.birthday,\n          sex: profile.user.sex,\n          name: `${profile.user.first_name} ${profile.user.last_name}`,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst zoom = (userOptions) => {\n  const options = {\n    pkce: true,\n    ...userOptions\n  };\n  return {\n    id: \"zoom\",\n    name: \"Zoom\",\n    createAuthorizationURL: async ({ state, redirectURI, codeVerifier }) => {\n      const params = new URLSearchParams({\n        response_type: \"code\",\n        redirect_uri: options.redirectURI ? options.redirectURI : redirectURI,\n        client_id: options.clientId,\n        state\n      });\n      if (options.pkce) {\n        const codeChallenge = await generateCodeChallenge(codeVerifier);\n        params.set(\"code_challenge_method\", \"S256\");\n        params.set(\"code_challenge\", codeChallenge);\n      }\n      const url = new URL(\"https://zoom.us/oauth/authorize\");\n      url.search = params.toString();\n      return url;\n    },\n    validateAuthorizationCode: async ({ code, redirectURI, codeVerifier }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI: options.redirectURI || redirectURI,\n        codeVerifier,\n        options,\n        tokenEndpoint: \"https://zoom.us/oauth/token\",\n        authentication: \"post\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(\n        \"https://api.zoom.us/v2/users/me\",\n        {\n          headers: {\n            authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.id,\n          name: profile.display_name,\n          image: profile.pic_url,\n          email: profile.email,\n          emailVerified: Boolean(profile.verified),\n          ...userMap\n        },\n        data: {\n          ...profile\n        }\n      };\n    }\n  };\n};\n\nconst kakao = (options) => {\n  return {\n    id: \"kakao\",\n    name: \"Kakao\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"account_email\", \"profile_image\", \"profile_nickname\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"kakao\",\n        options,\n        authorizationEndpoint: \"https://kauth.kakao.com/oauth/authorize\",\n        scopes: _scopes,\n        state,\n        redirectURI\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://kauth.kakao.com/oauth/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://kauth.kakao.com/oauth/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(\n        \"https://kapi.kakao.com/v2/user/me\",\n        {\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error || !profile) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      const account = profile.kakao_account || {};\n      const kakaoProfile = account.profile || {};\n      const user = {\n        id: String(profile.id),\n        name: kakaoProfile.nickname || account.name || void 0,\n        email: account.email,\n        image: kakaoProfile.profile_image_url || kakaoProfile.thumbnail_image_url,\n        emailVerified: !!account.is_email_valid && !!account.is_email_verified,\n        ...userMap\n      };\n      return {\n        user,\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst naver = (options) => {\n  return {\n    id: \"naver\",\n    name: \"Naver\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"profile\", \"email\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"naver\",\n        options,\n        authorizationEndpoint: \"https://nid.naver.com/oauth2.0/authorize\",\n        scopes: _scopes,\n        state,\n        redirectURI\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://nid.naver.com/oauth2.0/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://nid.naver.com/oauth2.0/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(\n        \"https://openapi.naver.com/v1/nid/me\",\n        {\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error || !profile || profile.resultcode !== \"00\") {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      const res = profile.response || {};\n      const user = {\n        id: res.id,\n        name: res.name || res.nickname,\n        email: res.email,\n        image: res.profile_image,\n        emailVerified: false,\n        ...userMap\n      };\n      return {\n        user,\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst line = (options) => {\n  const authorizationEndpoint = \"https://access.line.me/oauth2/v2.1/authorize\";\n  const tokenEndpoint = \"https://api.line.me/oauth2/v2.1/token\";\n  const userInfoEndpoint = \"https://api.line.me/oauth2/v2.1/userinfo\";\n  const verifyIdTokenEndpoint = \"https://api.line.me/oauth2/v2.1/verify\";\n  return {\n    id: \"line\",\n    name: \"LINE\",\n    async createAuthorizationURL({\n      state,\n      scopes,\n      codeVerifier,\n      redirectURI,\n      loginHint\n    }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"openid\", \"profile\", \"email\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return await createAuthorizationURL({\n        id: \"line\",\n        options,\n        authorizationEndpoint,\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI,\n        loginHint\n      });\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint\n      });\n    },\n    async verifyIdToken(token, nonce) {\n      if (options.disableIdTokenSignIn) {\n        return false;\n      }\n      if (options.verifyIdToken) {\n        return options.verifyIdToken(token, nonce);\n      }\n      const body = new URLSearchParams();\n      body.set(\"id_token\", token);\n      body.set(\"client_id\", options.clientId);\n      if (nonce) body.set(\"nonce\", nonce);\n      const { data, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(\n        verifyIdTokenEndpoint,\n        {\n          method: \"POST\",\n          headers: {\n            \"content-type\": \"application/x-www-form-urlencoded\"\n          },\n          body\n        }\n      );\n      if (error || !data) {\n        return false;\n      }\n      if (data.aud !== options.clientId) return false;\n      if (nonce && data.nonce && data.nonce !== nonce) return false;\n      return true;\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      let profile = null;\n      if (token.idToken) {\n        try {\n          profile = (0,jose__WEBPACK_IMPORTED_MODULE_27__.decodeJwt)(token.idToken);\n        } catch {\n        }\n      }\n      if (!profile) {\n        const { data } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(userInfoEndpoint, {\n          headers: {\n            authorization: `Bearer ${token.accessToken}`\n          }\n        });\n        profile = data || null;\n      }\n      if (!profile) return null;\n      const userMap = await options.mapProfileToUser?.(profile);\n      const id = profile.sub || profile.userId;\n      const name = profile.name || profile.displayName;\n      const image = profile.picture || profile.pictureUrl || void 0;\n      const email = profile.email;\n      return {\n        user: {\n          id,\n          name,\n          email,\n          image,\n          // LINE does not expose email verification status in ID token/userinfo\n          emailVerified: false,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst paypal = (options) => {\n  const environment = options.environment || \"sandbox\";\n  const isSandbox = environment === \"sandbox\";\n  const authorizationEndpoint = isSandbox ? \"https://www.sandbox.paypal.com/signin/authorize\" : \"https://www.paypal.com/signin/authorize\";\n  const tokenEndpoint = isSandbox ? \"https://api-m.sandbox.paypal.com/v1/oauth2/token\" : \"https://api-m.paypal.com/v1/oauth2/token\";\n  const userInfoEndpoint = isSandbox ? \"https://api-m.sandbox.paypal.com/v1/identity/oauth2/userinfo\" : \"https://api-m.paypal.com/v1/identity/oauth2/userinfo\";\n  return {\n    id: \"paypal\",\n    name: \"PayPal\",\n    async createAuthorizationURL({ state, codeVerifier, redirectURI }) {\n      if (!options.clientId || !options.clientSecret) {\n        _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_13__.a.error(\n          \"Client Id and Client Secret is required for PayPal. Make sure to provide them in the options.\"\n        );\n        throw new _better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_21__.B(\"CLIENT_ID_AND_SECRET_REQUIRED\");\n      }\n      const _scopes = [];\n      const url = await createAuthorizationURL({\n        id: \"paypal\",\n        options,\n        authorizationEndpoint,\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI,\n        prompt: options.prompt\n      });\n      return url;\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      const credentials = Buffer.from(\n        `${options.clientId}:${options.clientSecret}`\n      ).toString(\"base64\");\n      try {\n        const response = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(tokenEndpoint, {\n          method: \"POST\",\n          headers: {\n            Authorization: `Basic ${credentials}`,\n            Accept: \"application/json\",\n            \"Accept-Language\": \"en_US\",\n            \"Content-Type\": \"application/x-www-form-urlencoded\"\n          },\n          body: new URLSearchParams({\n            grant_type: \"authorization_code\",\n            code,\n            redirect_uri: redirectURI\n          }).toString()\n        });\n        if (!response.data) {\n          throw new _better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_21__.B(\"FAILED_TO_GET_ACCESS_TOKEN\");\n        }\n        const data = response.data;\n        const result = {\n          accessToken: data.access_token,\n          refreshToken: data.refresh_token,\n          accessTokenExpiresAt: data.expires_in ? new Date(Date.now() + data.expires_in * 1e3) : void 0,\n          idToken: data.id_token\n        };\n        return result;\n      } catch (error) {\n        _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_13__.a.error(\"PayPal token exchange failed:\", error);\n        throw new _better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_21__.B(\"FAILED_TO_GET_ACCESS_TOKEN\");\n      }\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      const credentials = Buffer.from(\n        `${options.clientId}:${options.clientSecret}`\n      ).toString(\"base64\");\n      try {\n        const response = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(tokenEndpoint, {\n          method: \"POST\",\n          headers: {\n            Authorization: `Basic ${credentials}`,\n            Accept: \"application/json\",\n            \"Accept-Language\": \"en_US\",\n            \"Content-Type\": \"application/x-www-form-urlencoded\"\n          },\n          body: new URLSearchParams({\n            grant_type: \"refresh_token\",\n            refresh_token: refreshToken\n          }).toString()\n        });\n        if (!response.data) {\n          throw new _better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_21__.B(\"FAILED_TO_REFRESH_ACCESS_TOKEN\");\n        }\n        const data = response.data;\n        return {\n          accessToken: data.access_token,\n          refreshToken: data.refresh_token,\n          accessTokenExpiresAt: data.expires_in ? new Date(Date.now() + data.expires_in * 1e3) : void 0\n        };\n      } catch (error) {\n        _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_13__.a.error(\"PayPal token refresh failed:\", error);\n        throw new _better_auth_DdzSJf_n_mjs__WEBPACK_IMPORTED_MODULE_21__.B(\"FAILED_TO_REFRESH_ACCESS_TOKEN\");\n      }\n    },\n    async verifyIdToken(token, nonce) {\n      if (options.disableIdTokenSignIn) {\n        return false;\n      }\n      if (options.verifyIdToken) {\n        return options.verifyIdToken(token, nonce);\n      }\n      try {\n        const payload = (0,jose__WEBPACK_IMPORTED_MODULE_27__.decodeJwt)(token);\n        return !!payload.sub;\n      } catch (error) {\n        _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_13__.a.error(\"Failed to verify PayPal ID token:\", error);\n        return false;\n      }\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      if (!token.accessToken) {\n        _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_13__.a.error(\"Access token is required to fetch PayPal user info\");\n        return null;\n      }\n      try {\n        const response = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_6__.betterFetch)(\n          `${userInfoEndpoint}?schema=paypalv1.1`,\n          {\n            headers: {\n              Authorization: `Bearer ${token.accessToken}`,\n              Accept: \"application/json\"\n            }\n          }\n        );\n        if (!response.data) {\n          _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_13__.a.error(\"Failed to fetch user info from PayPal\");\n          return null;\n        }\n        const userInfo = response.data;\n        const userMap = await options.mapProfileToUser?.(userInfo);\n        const result = {\n          user: {\n            id: userInfo.user_id,\n            name: userInfo.name,\n            email: userInfo.email,\n            image: userInfo.picture,\n            emailVerified: userInfo.email_verified,\n            ...userMap\n          },\n          data: userInfo\n        };\n        return result;\n      } catch (error) {\n        _better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_13__.a.error(\"Failed to fetch user info from PayPal:\", error);\n        return null;\n      }\n    },\n    options\n  };\n};\n\nconst socialProviders = {\n  apple,\n  atlassian,\n  cognito,\n  discord,\n  facebook,\n  figma,\n  github,\n  microsoft,\n  google,\n  huggingface,\n  slack,\n  spotify,\n  twitch,\n  twitter,\n  dropbox,\n  kick,\n  linear,\n  linkedin,\n  gitlab,\n  tiktok,\n  reddit,\n  roblox,\n  salesforce,\n  vk,\n  zoom,\n  notion,\n  kakao,\n  naver,\n  line,\n  paypal\n};\nconst socialProviderList = Object.keys(socialProviders);\nconst SocialProviderListEnum = zod_v4__WEBPACK_IMPORTED_MODULE_22__[\"enum\"](socialProviderList).or(zod_v4__WEBPACK_IMPORTED_MODULE_22__.string());\n\nconst signInSocial = (0,_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.a)(\n  \"/sign-in/social\",\n  {\n    method: \"POST\",\n    body: zod_v4__WEBPACK_IMPORTED_MODULE_22__.object({\n      /**\n       * Callback URL to redirect to after the user\n       * has signed in.\n       */\n      callbackURL: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n        description: \"Callback URL to redirect to after the user has signed in\"\n      }).optional(),\n      /**\n       * callback url to redirect if the user is newly registered.\n       *\n       * useful if you have different routes for existing users and new users\n       */\n      newUserCallbackURL: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().optional(),\n      /**\n       * Callback url to redirect to if an error happens\n       *\n       * If it's initiated from the client sdk this defaults to\n       * the current url.\n       */\n      errorCallbackURL: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n        description: \"Callback URL to redirect to if an error happens\"\n      }).optional(),\n      /**\n       * OAuth2 provider to use`\n       */\n      provider: SocialProviderListEnum,\n      /**\n       * Disable automatic redirection to the provider\n       *\n       * This is useful if you want to handle the redirection\n       * yourself like in a popup or a different tab.\n       */\n      disableRedirect: zod_v4__WEBPACK_IMPORTED_MODULE_22__.boolean().meta({\n        description: \"Disable automatic redirection to the provider. Useful for handling the redirection yourself\"\n      }).optional(),\n      /**\n       * ID token from the provider\n       *\n       * This is used to sign in the user\n       * if the user is already signed in with the\n       * provider in the frontend.\n       *\n       * Only applicable if the provider supports\n       * it. Currently only `apple` and `google` is\n       * supported out of the box.\n       */\n      idToken: zod_v4__WEBPACK_IMPORTED_MODULE_22__.optional(\n        zod_v4__WEBPACK_IMPORTED_MODULE_22__.object({\n          /**\n           * ID token from the provider\n           */\n          token: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n            description: \"ID token from the provider\"\n          }),\n          /**\n           * The nonce used to generate the token\n           */\n          nonce: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n            description: \"Nonce used to generate the token\"\n          }).optional(),\n          /**\n           * Access token from the provider\n           */\n          accessToken: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n            description: \"Access token from the provider\"\n          }).optional(),\n          /**\n           * Refresh token from the provider\n           */\n          refreshToken: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n            description: \"Refresh token from the provider\"\n          }).optional(),\n          /**\n           * Expiry date of the token\n           */\n          expiresAt: zod_v4__WEBPACK_IMPORTED_MODULE_22__.number().meta({\n            description: \"Expiry date of the token\"\n          }).optional()\n        })\n      ),\n      scopes: zod_v4__WEBPACK_IMPORTED_MODULE_22__.array(zod_v4__WEBPACK_IMPORTED_MODULE_22__.string()).meta({\n        description: \"Array of scopes to request from the provider. This will override the default scopes passed.\"\n      }).optional(),\n      /**\n       * Explicitly request sign-up\n       *\n       * Should be used to allow sign up when\n       * disableImplicitSignUp for this provider is\n       * true\n       */\n      requestSignUp: zod_v4__WEBPACK_IMPORTED_MODULE_22__.boolean().meta({\n        description: \"Explicitly request sign-up. Useful when disableImplicitSignUp is true for this provider\"\n      }).optional(),\n      /**\n       * The login hint to use for the authorization code request\n       */\n      loginHint: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n        description: \"The login hint to use for the authorization code request\"\n      }).optional()\n    }),\n    metadata: {\n      openapi: {\n        description: \"Sign in with a social provider\",\n        operationId: \"socialSignIn\",\n        responses: {\n          \"200\": {\n            description: \"Success - Returns either session details or redirect URL\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  // todo: we need support for multiple schema\n                  type: \"object\",\n                  description: \"Session response when idToken is provided\",\n                  properties: {\n                    redirect: {\n                      type: \"boolean\",\n                      enum: [false]\n                    },\n                    token: {\n                      type: \"string\",\n                      description: \"Session token\",\n                      url: {\n                        type: \"null\",\n                        nullable: true\n                      },\n                      user: {\n                        type: \"object\",\n                        properties: {\n                          id: { type: \"string\" },\n                          email: { type: \"string\" },\n                          name: {\n                            type: \"string\",\n                            nullable: true\n                          },\n                          image: {\n                            type: \"string\",\n                            nullable: true\n                          },\n                          emailVerified: {\n                            type: \"boolean\"\n                          },\n                          createdAt: {\n                            type: \"string\",\n                            format: \"date-time\"\n                          },\n                          updatedAt: {\n                            type: \"string\",\n                            format: \"date-time\"\n                          }\n                        },\n                        required: [\n                          \"id\",\n                          \"email\",\n                          \"emailVerified\",\n                          \"createdAt\",\n                          \"updatedAt\"\n                        ]\n                      }\n                    }\n                  },\n                  required: [\"redirect\", \"token\", \"user\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (c) => {\n    const provider = c.context.socialProviders.find(\n      (p) => p.id === c.body.provider\n    );\n    if (!provider) {\n      c.context.logger.error(\n        \"Provider not found. Make sure to add the provider in your auth config\",\n        {\n          provider: c.body.provider\n        }\n      );\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"NOT_FOUND\", {\n        message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.PROVIDER_NOT_FOUND\n      });\n    }\n    if (c.body.idToken) {\n      if (!provider.verifyIdToken) {\n        c.context.logger.error(\n          \"Provider does not support id token verification\",\n          {\n            provider: c.body.provider\n          }\n        );\n        throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"NOT_FOUND\", {\n          message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.ID_TOKEN_NOT_SUPPORTED\n        });\n      }\n      const { token, nonce } = c.body.idToken;\n      const valid = await provider.verifyIdToken(token, nonce);\n      if (!valid) {\n        c.context.logger.error(\"Invalid id token\", {\n          provider: c.body.provider\n        });\n        throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"UNAUTHORIZED\", {\n          message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.INVALID_TOKEN\n        });\n      }\n      const userInfo = await provider.getUserInfo({\n        idToken: token,\n        accessToken: c.body.idToken.accessToken,\n        refreshToken: c.body.idToken.refreshToken\n      });\n      if (!userInfo || !userInfo?.user) {\n        c.context.logger.error(\"Failed to get user info\", {\n          provider: c.body.provider\n        });\n        throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"UNAUTHORIZED\", {\n          message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.FAILED_TO_GET_USER_INFO\n        });\n      }\n      if (!userInfo.user.email) {\n        c.context.logger.error(\"User email not found\", {\n          provider: c.body.provider\n        });\n        throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"UNAUTHORIZED\", {\n          message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.USER_EMAIL_NOT_FOUND\n        });\n      }\n      const data = await handleOAuthUserInfo(c, {\n        userInfo: {\n          ...userInfo.user,\n          email: userInfo.user.email,\n          id: String(userInfo.user.id),\n          name: userInfo.user.name || \"\",\n          image: userInfo.user.image,\n          emailVerified: userInfo.user.emailVerified || false\n        },\n        account: {\n          providerId: provider.id,\n          accountId: String(userInfo.user.id),\n          accessToken: c.body.idToken.accessToken\n        },\n        callbackURL: c.body.callbackURL,\n        disableSignUp: provider.disableImplicitSignUp && !c.body.requestSignUp || provider.disableSignUp\n      });\n      if (data.error) {\n        throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"UNAUTHORIZED\", {\n          message: data.error\n        });\n      }\n      await (0,_better_auth_UfVWArIB_mjs__WEBPACK_IMPORTED_MODULE_11__.s)(c, data.data);\n      return c.json({\n        redirect: false,\n        token: data.data.session.token,\n        url: void 0,\n        user: {\n          id: data.data.user.id,\n          email: data.data.user.email,\n          name: data.data.user.name,\n          image: data.data.user.image,\n          emailVerified: data.data.user.emailVerified,\n          createdAt: data.data.user.createdAt,\n          updatedAt: data.data.user.updatedAt\n        }\n      });\n    }\n    const { codeVerifier, state } = await generateState(c);\n    const url = await provider.createAuthorizationURL({\n      state,\n      codeVerifier,\n      redirectURI: `${c.context.baseURL}/callback/${provider.id}`,\n      scopes: c.body.scopes,\n      loginHint: c.body.loginHint\n    });\n    return c.json({\n      url: url.toString(),\n      redirect: !c.body.disableRedirect\n    });\n  }\n);\nconst signInEmail = (0,_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.a)(\n  \"/sign-in/email\",\n  {\n    method: \"POST\",\n    body: zod_v4__WEBPACK_IMPORTED_MODULE_22__.object({\n      /**\n       * Email of the user\n       */\n      email: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n        description: \"Email of the user\"\n      }),\n      /**\n       * Password of the user\n       */\n      password: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n        description: \"Password of the user\"\n      }),\n      /**\n       * Callback URL to use as a redirect for email\n       * verification and for possible redirects\n       */\n      callbackURL: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n        description: \"Callback URL to use as a redirect for email verification\"\n      }).optional(),\n      /**\n       * If this is false, the session will not be remembered\n       * @default true\n       */\n      rememberMe: zod_v4__WEBPACK_IMPORTED_MODULE_22__.boolean().meta({\n        description: \"If this is false, the session will not be remembered. Default is `true`.\"\n      }).default(true).optional()\n    }),\n    metadata: {\n      openapi: {\n        description: \"Sign in with email and password\",\n        responses: {\n          \"200\": {\n            description: \"Success - Returns either session details or redirect URL\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  // todo: we need support for multiple schema\n                  type: \"object\",\n                  description: \"Session response when idToken is provided\",\n                  properties: {\n                    redirect: {\n                      type: \"boolean\",\n                      enum: [false]\n                    },\n                    token: {\n                      type: \"string\",\n                      description: \"Session token\"\n                    },\n                    url: {\n                      type: \"null\",\n                      nullable: true\n                    },\n                    user: {\n                      type: \"object\",\n                      properties: {\n                        id: { type: \"string\" },\n                        email: { type: \"string\" },\n                        name: {\n                          type: \"string\",\n                          nullable: true\n                        },\n                        image: {\n                          type: \"string\",\n                          nullable: true\n                        },\n                        emailVerified: {\n                          type: \"boolean\"\n                        },\n                        createdAt: {\n                          type: \"string\",\n                          format: \"date-time\"\n                        },\n                        updatedAt: {\n                          type: \"string\",\n                          format: \"date-time\"\n                        }\n                      },\n                      required: [\n                        \"id\",\n                        \"email\",\n                        \"emailVerified\",\n                        \"createdAt\",\n                        \"updatedAt\"\n                      ]\n                    }\n                  },\n                  required: [\"redirect\", \"token\", \"user\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    if (!ctx.context.options?.emailAndPassword?.enabled) {\n      ctx.context.logger.error(\n        \"Email and password is not enabled. Make sure to enable it in the options on you `auth.ts` file. Check `https://better-auth.com/docs/authentication/email-password` for more!\"\n      );\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: \"Email and password is not enabled\"\n      });\n    }\n    const { email, password } = ctx.body;\n    const isValidEmail = zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().email().safeParse(email);\n    if (!isValidEmail.success) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.INVALID_EMAIL\n      });\n    }\n    const user = await ctx.context.internalAdapter.findUserByEmail(email, {\n      includeAccounts: true\n    });\n    if (!user) {\n      await ctx.context.password.hash(password);\n      ctx.context.logger.error(\"User not found\", { email });\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"UNAUTHORIZED\", {\n        message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.INVALID_EMAIL_OR_PASSWORD\n      });\n    }\n    const credentialAccount = user.accounts.find(\n      (a) => a.providerId === \"credential\"\n    );\n    if (!credentialAccount) {\n      ctx.context.logger.error(\"Credential account not found\", { email });\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"UNAUTHORIZED\", {\n        message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.INVALID_EMAIL_OR_PASSWORD\n      });\n    }\n    const currentPassword = credentialAccount?.password;\n    if (!currentPassword) {\n      ctx.context.logger.error(\"Password not found\", { email });\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"UNAUTHORIZED\", {\n        message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.INVALID_EMAIL_OR_PASSWORD\n      });\n    }\n    const validPassword = await ctx.context.password.verify({\n      hash: currentPassword,\n      password\n    });\n    if (!validPassword) {\n      ctx.context.logger.error(\"Invalid password\");\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"UNAUTHORIZED\", {\n        message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.INVALID_EMAIL_OR_PASSWORD\n      });\n    }\n    if (ctx.context.options?.emailAndPassword?.requireEmailVerification && !user.user.emailVerified) {\n      if (!ctx.context.options?.emailVerification?.sendVerificationEmail) {\n        throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"FORBIDDEN\", {\n          message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.EMAIL_NOT_VERIFIED\n        });\n      }\n      if (ctx.context.options?.emailVerification?.sendOnSignIn) {\n        const token = await createEmailVerificationToken(\n          ctx.context.secret,\n          user.user.email,\n          void 0,\n          ctx.context.options.emailVerification?.expiresIn\n        );\n        const url = `${ctx.context.baseURL}/verify-email?token=${token}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n        await ctx.context.options.emailVerification.sendVerificationEmail(\n          {\n            user: user.user,\n            url,\n            token\n          },\n          ctx.request\n        );\n      }\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"FORBIDDEN\", {\n        message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.EMAIL_NOT_VERIFIED\n      });\n    }\n    const session = await ctx.context.internalAdapter.createSession(\n      user.user.id,\n      ctx,\n      ctx.body.rememberMe === false\n    );\n    if (!session) {\n      ctx.context.logger.error(\"Failed to create session\");\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"UNAUTHORIZED\", {\n        message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.FAILED_TO_CREATE_SESSION\n      });\n    }\n    await (0,_better_auth_UfVWArIB_mjs__WEBPACK_IMPORTED_MODULE_11__.s)(\n      ctx,\n      {\n        session,\n        user: user.user\n      },\n      ctx.body.rememberMe === false\n    );\n    return ctx.json({\n      redirect: !!ctx.body.callbackURL,\n      token: session.token,\n      url: ctx.body.callbackURL,\n      user: {\n        id: user.user.id,\n        email: user.user.email,\n        name: user.user.name,\n        image: user.user.image,\n        emailVerified: user.user.emailVerified,\n        createdAt: user.user.createdAt,\n        updatedAt: user.user.updatedAt\n      }\n    });\n  }\n);\n\nconst schema = zod_v4__WEBPACK_IMPORTED_MODULE_22__.object({\n  code: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().optional(),\n  error: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().optional(),\n  device_id: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().optional(),\n  error_description: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().optional(),\n  state: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().optional(),\n  user: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().optional()\n});\nconst callbackOAuth = (0,_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.a)(\n  \"/callback/:id\",\n  {\n    method: [\"GET\", \"POST\"],\n    body: schema.optional(),\n    query: schema.optional(),\n    metadata: HIDE_METADATA\n  },\n  async (c) => {\n    let queryOrBody;\n    const defaultErrorURL = c.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n    try {\n      if (c.method === \"GET\") {\n        queryOrBody = schema.parse(c.query);\n      } else if (c.method === \"POST\") {\n        queryOrBody = schema.parse(c.body);\n      } else {\n        throw new Error(\"Unsupported method\");\n      }\n    } catch (e) {\n      c.context.logger.error(\"INVALID_CALLBACK_REQUEST\", e);\n      throw c.redirect(`${defaultErrorURL}?error=invalid_callback_request`);\n    }\n    const { code, error, state, error_description, device_id } = queryOrBody;\n    if (error) {\n      throw c.redirect(\n        `${defaultErrorURL}?error=${error}&error_description=${error_description}`\n      );\n    }\n    if (!state) {\n      c.context.logger.error(\"State not found\", error);\n      throw c.redirect(`${defaultErrorURL}?error=state_not_found`);\n    }\n    const {\n      codeVerifier,\n      callbackURL,\n      link,\n      errorURL,\n      newUserURL,\n      requestSignUp\n    } = await parseState(c);\n    function redirectOnError(error2) {\n      let url = errorURL || defaultErrorURL;\n      if (url.includes(\"?\")) {\n        url = `${url}&error=${error2}`;\n      } else {\n        url = `${url}?error=${error2}`;\n      }\n      throw c.redirect(url);\n    }\n    if (!code) {\n      c.context.logger.error(\"Code not found\");\n      throw redirectOnError(\"no_code\");\n    }\n    const provider = c.context.socialProviders.find(\n      (p) => p.id === c.params.id\n    );\n    if (!provider) {\n      c.context.logger.error(\n        \"Oauth provider with id\",\n        c.params.id,\n        \"not found\"\n      );\n      throw redirectOnError(\"oauth_provider_not_found\");\n    }\n    let tokens;\n    try {\n      tokens = await provider.validateAuthorizationCode({\n        code,\n        codeVerifier,\n        deviceId: device_id,\n        redirectURI: `${c.context.baseURL}/callback/${provider.id}`\n      });\n    } catch (e) {\n      c.context.logger.error(\"\", e);\n      throw redirectOnError(\"invalid_code\");\n    }\n    const userInfo = await provider.getUserInfo({\n      ...tokens,\n      user: c.body?.user ? (0,_better_auth_BZZKN1g7_mjs__WEBPACK_IMPORTED_MODULE_14__.s)(c.body.user) : void 0\n    }).then((res) => res?.user);\n    if (!userInfo) {\n      c.context.logger.error(\"Unable to get user info\");\n      return redirectOnError(\"unable_to_get_user_info\");\n    }\n    if (!callbackURL) {\n      c.context.logger.error(\"No callback URL found\");\n      throw redirectOnError(\"no_callback_url\");\n    }\n    if (link) {\n      const trustedProviders = c.context.options.account?.accountLinking?.trustedProviders;\n      const isTrustedProvider = trustedProviders?.includes(\n        provider.id\n      );\n      if (!isTrustedProvider && !userInfo.emailVerified || c.context.options.account?.accountLinking?.enabled === false) {\n        c.context.logger.error(\"Unable to link account - untrusted provider\");\n        return redirectOnError(\"unable_to_link_account\");\n      }\n      const existingAccount = await c.context.internalAdapter.findAccount(\n        String(userInfo.id)\n      );\n      if (existingAccount) {\n        if (existingAccount.userId.toString() !== link.userId.toString()) {\n          return redirectOnError(\"account_already_linked_to_different_user\");\n        }\n        const updateData = Object.fromEntries(\n          Object.entries({\n            accessToken: await setTokenUtil(tokens.accessToken, c.context),\n            refreshToken: await setTokenUtil(tokens.refreshToken, c.context),\n            idToken: tokens.idToken,\n            accessTokenExpiresAt: tokens.accessTokenExpiresAt,\n            refreshTokenExpiresAt: tokens.refreshTokenExpiresAt,\n            scope: tokens.scopes?.join(\",\")\n          }).filter(([_, value]) => value !== void 0)\n        );\n        await c.context.internalAdapter.updateAccount(\n          existingAccount.id,\n          updateData\n        );\n      } else {\n        const newAccount = await c.context.internalAdapter.createAccount(\n          {\n            userId: link.userId,\n            providerId: provider.id,\n            accountId: String(userInfo.id),\n            ...tokens,\n            accessToken: await setTokenUtil(tokens.accessToken, c.context),\n            refreshToken: await setTokenUtil(tokens.refreshToken, c.context),\n            scope: tokens.scopes?.join(\",\")\n          },\n          c\n        );\n        if (!newAccount) {\n          return redirectOnError(\"unable_to_link_account\");\n        }\n      }\n      let toRedirectTo2;\n      try {\n        const url = callbackURL;\n        toRedirectTo2 = url.toString();\n      } catch {\n        toRedirectTo2 = callbackURL;\n      }\n      throw c.redirect(toRedirectTo2);\n    }\n    if (!userInfo.email) {\n      c.context.logger.error(\n        \"Provider did not return email. This could be due to misconfiguration in the provider settings.\"\n      );\n      return redirectOnError(\"email_not_found\");\n    }\n    const result = await handleOAuthUserInfo(c, {\n      userInfo: {\n        ...userInfo,\n        id: String(userInfo.id),\n        email: userInfo.email,\n        name: userInfo.name || userInfo.email\n      },\n      account: {\n        providerId: provider.id,\n        accountId: String(userInfo.id),\n        ...tokens,\n        scope: tokens.scopes?.join(\",\")\n      },\n      callbackURL,\n      disableSignUp: provider.disableImplicitSignUp && !requestSignUp || provider.options?.disableSignUp,\n      overrideUserInfo: provider.options?.overrideUserInfoOnSignIn\n    });\n    if (result.error) {\n      c.context.logger.error(result.error.split(\" \").join(\"_\"));\n      return redirectOnError(result.error.split(\" \").join(\"_\"));\n    }\n    const { session, user } = result.data;\n    await (0,_better_auth_UfVWArIB_mjs__WEBPACK_IMPORTED_MODULE_11__.s)(c, {\n      session,\n      user\n    });\n    let toRedirectTo;\n    try {\n      const url = result.isRegister ? newUserURL || callbackURL : callbackURL;\n      toRedirectTo = url.toString();\n    } catch {\n      toRedirectTo = result.isRegister ? newUserURL || callbackURL : callbackURL;\n    }\n    throw c.redirect(toRedirectTo);\n  }\n);\n\nconst signOut = (0,_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.a)(\n  \"/sign-out\",\n  {\n    method: \"POST\",\n    requireHeaders: true,\n    metadata: {\n      openapi: {\n        description: \"Sign out the current user\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    success: {\n                      type: \"boolean\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const sessionCookieToken = await ctx.getSignedCookie(\n      ctx.context.authCookies.sessionToken.name,\n      ctx.context.secret\n    );\n    if (!sessionCookieToken) {\n      (0,_better_auth_UfVWArIB_mjs__WEBPACK_IMPORTED_MODULE_11__.d)(ctx);\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.FAILED_TO_GET_SESSION\n      });\n    }\n    await ctx.context.internalAdapter.deleteSession(sessionCookieToken);\n    (0,_better_auth_UfVWArIB_mjs__WEBPACK_IMPORTED_MODULE_11__.d)(ctx);\n    return ctx.json({\n      success: true\n    });\n  }\n);\n\nfunction redirectError(ctx, callbackURL, query) {\n  const url = callbackURL ? new URL(callbackURL, ctx.baseURL) : new URL(`${ctx.baseURL}/error`);\n  if (query)\n    Object.entries(query).forEach(([k, v]) => url.searchParams.set(k, v));\n  return url.href;\n}\nfunction redirectCallback(ctx, callbackURL, query) {\n  const url = new URL(callbackURL, ctx.baseURL);\n  if (query)\n    Object.entries(query).forEach(([k, v]) => url.searchParams.set(k, v));\n  return url.href;\n}\nconst requestPasswordReset = (0,_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.a)(\n  \"/request-password-reset\",\n  {\n    method: \"POST\",\n    body: zod_v4__WEBPACK_IMPORTED_MODULE_22__.object({\n      /**\n       * The email address of the user to send a password reset email to.\n       */\n      email: zod_v4__WEBPACK_IMPORTED_MODULE_22__.email().meta({\n        description: \"The email address of the user to send a password reset email to\"\n      }),\n      /**\n       * The URL to redirect the user to reset their password.\n       * If the token isn't valid or expired, it'll be redirected with a query parameter `?\n       * error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?\n       * token=VALID_TOKEN\n       */\n      redirectTo: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n        description: \"The URL to redirect the user to reset their password. If the token isn't valid or expired, it'll be redirected with a query parameter `?error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?token=VALID_TOKEN\"\n      }).optional()\n    }),\n    metadata: {\n      openapi: {\n        description: \"Send a password reset email to the user\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    status: {\n                      type: \"boolean\"\n                    },\n                    message: {\n                      type: \"string\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    if (!ctx.context.options.emailAndPassword?.sendResetPassword) {\n      ctx.context.logger.error(\n        \"Reset password isn't enabled.Please pass an emailAndPassword.sendResetPassword function in your auth config!\"\n      );\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: \"Reset password isn't enabled\"\n      });\n    }\n    const { email, redirectTo } = ctx.body;\n    const user = await ctx.context.internalAdapter.findUserByEmail(email, {\n      includeAccounts: true\n    });\n    if (!user) {\n      ctx.context.logger.error(\"Reset Password: User not found\", { email });\n      return ctx.json({\n        status: true,\n        message: \"If this email exists in our system, check your email for the reset link\"\n      });\n    }\n    const defaultExpiresIn = 60 * 60 * 1;\n    const expiresAt = (0,_better_auth_CW6D9eSx_mjs__WEBPACK_IMPORTED_MODULE_2__.g)(\n      ctx.context.options.emailAndPassword.resetPasswordTokenExpiresIn || defaultExpiresIn,\n      \"sec\"\n    );\n    const verificationToken = (0,_better_auth_BUPPRXfK_mjs__WEBPACK_IMPORTED_MODULE_15__.g)(24);\n    await ctx.context.internalAdapter.createVerificationValue(\n      {\n        value: user.user.id,\n        identifier: `reset-password:${verificationToken}`,\n        expiresAt\n      },\n      ctx\n    );\n    const callbackURL = redirectTo ? encodeURIComponent(redirectTo) : \"\";\n    const url = `${ctx.context.baseURL}/reset-password/${verificationToken}?callbackURL=${callbackURL}`;\n    await ctx.context.options.emailAndPassword.sendResetPassword(\n      {\n        user: user.user,\n        url,\n        token: verificationToken\n      },\n      ctx.request\n    );\n    return ctx.json({\n      status: true\n    });\n  }\n);\nconst forgetPassword = (0,_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.a)(\n  \"/forget-password\",\n  {\n    method: \"POST\",\n    body: zod_v4__WEBPACK_IMPORTED_MODULE_22__.object({\n      /**\n       * The email address of the user to send a password reset email to.\n       */\n      email: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().email().meta({\n        description: \"The email address of the user to send a password reset email to\"\n      }),\n      /**\n       * The URL to redirect the user to reset their password.\n       * If the token isn't valid or expired, it'll be redirected with a query parameter `?\n       * error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?\n       * token=VALID_TOKEN\n       */\n      redirectTo: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n        description: \"The URL to redirect the user to reset their password. If the token isn't valid or expired, it'll be redirected with a query parameter `?error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?token=VALID_TOKEN\"\n      }).optional()\n    }),\n    metadata: {\n      openapi: {\n        description: \"Send a password reset email to the user\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    status: {\n                      type: \"boolean\"\n                    },\n                    message: {\n                      type: \"string\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    if (!ctx.context.options.emailAndPassword?.sendResetPassword) {\n      ctx.context.logger.error(\n        \"Reset password isn't enabled.Please pass an emailAndPassword.sendResetPassword function in your auth config!\"\n      );\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: \"Reset password isn't enabled\"\n      });\n    }\n    const { email, redirectTo } = ctx.body;\n    const user = await ctx.context.internalAdapter.findUserByEmail(email, {\n      includeAccounts: true\n    });\n    if (!user) {\n      ctx.context.logger.error(\"Reset Password: User not found\", { email });\n      return ctx.json({\n        status: true,\n        message: \"If this email exists in our system, check your email for the reset link\"\n      });\n    }\n    const defaultExpiresIn = 60 * 60 * 1;\n    const expiresAt = (0,_better_auth_CW6D9eSx_mjs__WEBPACK_IMPORTED_MODULE_2__.g)(\n      ctx.context.options.emailAndPassword.resetPasswordTokenExpiresIn || defaultExpiresIn,\n      \"sec\"\n    );\n    const verificationToken = (0,_better_auth_BUPPRXfK_mjs__WEBPACK_IMPORTED_MODULE_15__.g)(24);\n    await ctx.context.internalAdapter.createVerificationValue(\n      {\n        value: user.user.id,\n        identifier: `reset-password:${verificationToken}`,\n        expiresAt\n      },\n      ctx\n    );\n    const callbackURL = redirectTo ? encodeURIComponent(redirectTo) : \"\";\n    const url = `${ctx.context.baseURL}/reset-password/${verificationToken}?callbackURL=${callbackURL}`;\n    await ctx.context.options.emailAndPassword.sendResetPassword(\n      {\n        user: user.user,\n        url,\n        token: verificationToken\n      },\n      ctx.request\n    );\n    return ctx.json({\n      status: true\n    });\n  }\n);\nconst requestPasswordResetCallback = (0,_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.a)(\n  \"/reset-password/:token\",\n  {\n    method: \"GET\",\n    query: zod_v4__WEBPACK_IMPORTED_MODULE_22__.object({\n      callbackURL: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n        description: \"The URL to redirect the user to reset their password\"\n      })\n    }),\n    use: [originCheck((ctx) => ctx.query.callbackURL)],\n    metadata: {\n      openapi: {\n        description: \"Redirects the user to the callback URL with the token\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    token: {\n                      type: \"string\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const { token } = ctx.params;\n    const { callbackURL } = ctx.query;\n    if (!token || !callbackURL) {\n      throw ctx.redirect(\n        redirectError(ctx.context, callbackURL, { error: \"INVALID_TOKEN\" })\n      );\n    }\n    const verification = await ctx.context.internalAdapter.findVerificationValue(\n      `reset-password:${token}`\n    );\n    if (!verification || verification.expiresAt < /* @__PURE__ */ new Date()) {\n      throw ctx.redirect(\n        redirectError(ctx.context, callbackURL, { error: \"INVALID_TOKEN\" })\n      );\n    }\n    throw ctx.redirect(redirectCallback(ctx.context, callbackURL, { token }));\n  }\n);\nconst forgetPasswordCallback = requestPasswordResetCallback;\nconst resetPassword = (0,_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.a)(\n  \"/reset-password\",\n  {\n    method: \"POST\",\n    query: zod_v4__WEBPACK_IMPORTED_MODULE_22__.object({\n      token: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().optional()\n    }).optional(),\n    body: zod_v4__WEBPACK_IMPORTED_MODULE_22__.object({\n      newPassword: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n        description: \"The new password to set\"\n      }),\n      token: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n        description: \"The token to reset the password\"\n      }).optional()\n    }),\n    metadata: {\n      openapi: {\n        description: \"Reset the password for a user\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    status: {\n                      type: \"boolean\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const token = ctx.body.token || ctx.query?.token;\n    if (!token) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.INVALID_TOKEN\n      });\n    }\n    const { newPassword } = ctx.body;\n    const minLength = ctx.context.password?.config.minPasswordLength;\n    const maxLength = ctx.context.password?.config.maxPasswordLength;\n    if (newPassword.length < minLength) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.PASSWORD_TOO_SHORT\n      });\n    }\n    if (newPassword.length > maxLength) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.PASSWORD_TOO_LONG\n      });\n    }\n    const id = `reset-password:${token}`;\n    const verification = await ctx.context.internalAdapter.findVerificationValue(id);\n    if (!verification || verification.expiresAt < /* @__PURE__ */ new Date()) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.INVALID_TOKEN\n      });\n    }\n    const userId = verification.value;\n    const hashedPassword = await ctx.context.password.hash(newPassword);\n    const accounts = await ctx.context.internalAdapter.findAccounts(userId);\n    const account = accounts.find((ac) => ac.providerId === \"credential\");\n    if (!account) {\n      await ctx.context.internalAdapter.createAccount(\n        {\n          userId,\n          providerId: \"credential\",\n          password: hashedPassword,\n          accountId: userId\n        },\n        ctx\n      );\n    } else {\n      await ctx.context.internalAdapter.updatePassword(\n        userId,\n        hashedPassword,\n        ctx\n      );\n    }\n    await ctx.context.internalAdapter.deleteVerificationValue(verification.id);\n    if (ctx.context.options.emailAndPassword?.onPasswordReset) {\n      const user = await ctx.context.internalAdapter.findUserById(userId);\n      if (user) {\n        await ctx.context.options.emailAndPassword.onPasswordReset(\n          {\n            user\n          },\n          ctx.request\n        );\n      }\n    }\n    if (ctx.context.options.emailAndPassword?.revokeSessionsOnPasswordReset) {\n      await ctx.context.internalAdapter.deleteSessions(userId);\n    }\n    return ctx.json({\n      status: true\n    });\n  }\n);\n\nconst updateUser = () => (0,_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.a)(\n  \"/update-user\",\n  {\n    method: \"POST\",\n    body: zod_v4__WEBPACK_IMPORTED_MODULE_22__.record(\n      zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n        description: \"Field name must be a string\"\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_22__.any()\n    ),\n    use: [_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.s],\n    metadata: {\n      $Infer: {\n        body: {}\n      },\n      openapi: {\n        description: \"Update the current user\",\n        requestBody: {\n          content: {\n            \"application/json\": {\n              schema: {\n                type: \"object\",\n                properties: {\n                  name: {\n                    type: \"string\",\n                    description: \"The name of the user\"\n                  },\n                  image: {\n                    type: \"string\",\n                    description: \"The image of the user\"\n                  }\n                }\n              }\n            }\n          }\n        },\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    status: {\n                      type: \"boolean\",\n                      description: \"Indicates if the update was successful\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const body = ctx.body;\n    if (body.email) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.EMAIL_CAN_NOT_BE_UPDATED\n      });\n    }\n    const { name, image, ...rest } = body;\n    const session = ctx.context.session;\n    if (image === void 0 && name === void 0 && Object.keys(rest).length === 0) {\n      return ctx.json({\n        status: true\n      });\n    }\n    const additionalFields = (0,_better_auth_Dcv8PS7T_mjs__WEBPACK_IMPORTED_MODULE_16__.h)(\n      ctx.context.options,\n      rest,\n      \"update\"\n    );\n    const user = await ctx.context.internalAdapter.updateUser(\n      session.user.id,\n      {\n        name,\n        image,\n        ...additionalFields\n      },\n      ctx\n    );\n    await (0,_better_auth_UfVWArIB_mjs__WEBPACK_IMPORTED_MODULE_11__.s)(ctx, {\n      session: session.session,\n      user\n    });\n    return ctx.json({\n      status: true\n    });\n  }\n);\nconst changePassword = (0,_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.a)(\n  \"/change-password\",\n  {\n    method: \"POST\",\n    body: zod_v4__WEBPACK_IMPORTED_MODULE_22__.object({\n      /**\n       * The new password to set\n       */\n      newPassword: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n        description: \"The new password to set\"\n      }),\n      /**\n       * The current password of the user\n       */\n      currentPassword: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n        description: \"The current password is required\"\n      }),\n      /**\n       * revoke all sessions that are not the\n       * current one logged in by the user\n       */\n      revokeOtherSessions: zod_v4__WEBPACK_IMPORTED_MODULE_22__.boolean().meta({\n        description: \"Must be a boolean value\"\n      }).optional()\n    }),\n    use: [_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.s],\n    metadata: {\n      openapi: {\n        description: \"Change the password of the user\",\n        responses: {\n          \"200\": {\n            description: \"Password successfully changed\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    token: {\n                      type: \"string\",\n                      nullable: true,\n                      // Only present if revokeOtherSessions is true\n                      description: \"New session token if other sessions were revoked\"\n                    },\n                    user: {\n                      type: \"object\",\n                      properties: {\n                        id: {\n                          type: \"string\",\n                          description: \"The unique identifier of the user\"\n                        },\n                        email: {\n                          type: \"string\",\n                          format: \"email\",\n                          description: \"The email address of the user\"\n                        },\n                        name: {\n                          type: \"string\",\n                          description: \"The name of the user\"\n                        },\n                        image: {\n                          type: \"string\",\n                          format: \"uri\",\n                          nullable: true,\n                          description: \"The profile image URL of the user\"\n                        },\n                        emailVerified: {\n                          type: \"boolean\",\n                          description: \"Whether the email has been verified\"\n                        },\n                        createdAt: {\n                          type: \"string\",\n                          format: \"date-time\",\n                          description: \"When the user was created\"\n                        },\n                        updatedAt: {\n                          type: \"string\",\n                          format: \"date-time\",\n                          description: \"When the user was last updated\"\n                        }\n                      },\n                      required: [\n                        \"id\",\n                        \"email\",\n                        \"name\",\n                        \"emailVerified\",\n                        \"createdAt\",\n                        \"updatedAt\"\n                      ]\n                    }\n                  },\n                  required: [\"user\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const { newPassword, currentPassword, revokeOtherSessions } = ctx.body;\n    const session = ctx.context.session;\n    const minPasswordLength = ctx.context.password.config.minPasswordLength;\n    if (newPassword.length < minPasswordLength) {\n      ctx.context.logger.error(\"Password is too short\");\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.PASSWORD_TOO_SHORT\n      });\n    }\n    const maxPasswordLength = ctx.context.password.config.maxPasswordLength;\n    if (newPassword.length > maxPasswordLength) {\n      ctx.context.logger.error(\"Password is too long\");\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.PASSWORD_TOO_LONG\n      });\n    }\n    const accounts = await ctx.context.internalAdapter.findAccounts(\n      session.user.id\n    );\n    const account = accounts.find(\n      (account2) => account2.providerId === \"credential\" && account2.password\n    );\n    if (!account || !account.password) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.CREDENTIAL_ACCOUNT_NOT_FOUND\n      });\n    }\n    const passwordHash = await ctx.context.password.hash(newPassword);\n    const verify = await ctx.context.password.verify({\n      hash: account.password,\n      password: currentPassword\n    });\n    if (!verify) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.INVALID_PASSWORD\n      });\n    }\n    await ctx.context.internalAdapter.updateAccount(account.id, {\n      password: passwordHash\n    });\n    let token = null;\n    if (revokeOtherSessions) {\n      await ctx.context.internalAdapter.deleteSessions(session.user.id);\n      const newSession = await ctx.context.internalAdapter.createSession(\n        session.user.id,\n        ctx\n      );\n      if (!newSession) {\n        throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"INTERNAL_SERVER_ERROR\", {\n          message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.FAILED_TO_GET_SESSION\n        });\n      }\n      await (0,_better_auth_UfVWArIB_mjs__WEBPACK_IMPORTED_MODULE_11__.s)(ctx, {\n        session: newSession,\n        user: session.user\n      });\n      token = newSession.token;\n    }\n    return ctx.json({\n      token,\n      user: {\n        id: session.user.id,\n        email: session.user.email,\n        name: session.user.name,\n        image: session.user.image,\n        emailVerified: session.user.emailVerified,\n        createdAt: session.user.createdAt,\n        updatedAt: session.user.updatedAt\n      }\n    });\n  }\n);\nconst setPassword = (0,_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.a)(\n  \"/set-password\",\n  {\n    method: \"POST\",\n    body: zod_v4__WEBPACK_IMPORTED_MODULE_22__.object({\n      /**\n       * The new password to set\n       */\n      newPassword: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n        description: \"The new password to set is required\"\n      })\n    }),\n    metadata: {\n      SERVER_ONLY: true\n    },\n    use: [_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.s]\n  },\n  async (ctx) => {\n    const { newPassword } = ctx.body;\n    const session = ctx.context.session;\n    const minPasswordLength = ctx.context.password.config.minPasswordLength;\n    if (newPassword.length < minPasswordLength) {\n      ctx.context.logger.error(\"Password is too short\");\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.PASSWORD_TOO_SHORT\n      });\n    }\n    const maxPasswordLength = ctx.context.password.config.maxPasswordLength;\n    if (newPassword.length > maxPasswordLength) {\n      ctx.context.logger.error(\"Password is too long\");\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.PASSWORD_TOO_LONG\n      });\n    }\n    const accounts = await ctx.context.internalAdapter.findAccounts(\n      session.user.id\n    );\n    const account = accounts.find(\n      (account2) => account2.providerId === \"credential\" && account2.password\n    );\n    const passwordHash = await ctx.context.password.hash(newPassword);\n    if (!account) {\n      await ctx.context.internalAdapter.linkAccount(\n        {\n          userId: session.user.id,\n          providerId: \"credential\",\n          accountId: session.user.id,\n          password: passwordHash\n        },\n        ctx\n      );\n      return ctx.json({\n        status: true\n      });\n    }\n    throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n      message: \"user already has a password\"\n    });\n  }\n);\nconst deleteUser = (0,_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.a)(\n  \"/delete-user\",\n  {\n    method: \"POST\",\n    use: [_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.s],\n    body: zod_v4__WEBPACK_IMPORTED_MODULE_22__.object({\n      /**\n       * The callback URL to redirect to after the user is deleted\n       * this is only used on delete user callback\n       */\n      callbackURL: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n        description: \"The callback URL to redirect to after the user is deleted\"\n      }).optional(),\n      /**\n       * The password of the user. If the password isn't provided, session freshness\n       * will be checked.\n       */\n      password: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n        description: \"The password of the user is required to delete the user\"\n      }).optional(),\n      /**\n       * The token to delete the user. If the token is provided, the user will be deleted\n       */\n      token: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n        description: \"The token to delete the user is required\"\n      }).optional()\n    }),\n    metadata: {\n      openapi: {\n        description: \"Delete the user\",\n        responses: {\n          \"200\": {\n            description: \"User deletion processed successfully\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    success: {\n                      type: \"boolean\",\n                      description: \"Indicates if the operation was successful\"\n                    },\n                    message: {\n                      type: \"string\",\n                      enum: [\"User deleted\", \"Verification email sent\"],\n                      description: \"Status message of the deletion process\"\n                    }\n                  },\n                  required: [\"success\", \"message\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    if (!ctx.context.options.user?.deleteUser?.enabled) {\n      ctx.context.logger.error(\n        \"Delete user is disabled. Enable it in the options\",\n        {\n          session: ctx.context.session\n        }\n      );\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"NOT_FOUND\");\n    }\n    const session = ctx.context.session;\n    if (ctx.body.password) {\n      const accounts = await ctx.context.internalAdapter.findAccounts(\n        session.user.id\n      );\n      const account = accounts.find(\n        (account2) => account2.providerId === \"credential\" && account2.password\n      );\n      if (!account || !account.password) {\n        throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n          message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.CREDENTIAL_ACCOUNT_NOT_FOUND\n        });\n      }\n      const verify = await ctx.context.password.verify({\n        hash: account.password,\n        password: ctx.body.password\n      });\n      if (!verify) {\n        throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n          message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.INVALID_PASSWORD\n        });\n      }\n    }\n    if (ctx.body.token) {\n      await deleteUserCallback({\n        ...ctx,\n        query: {\n          token: ctx.body.token\n        }\n      });\n      return ctx.json({\n        success: true,\n        message: \"User deleted\"\n      });\n    }\n    if (ctx.context.options.user.deleteUser?.sendDeleteAccountVerification) {\n      const token = (0,_better_auth_B4Qoxdgc_mjs__WEBPACK_IMPORTED_MODULE_9__.g)(32, \"0-9\", \"a-z\");\n      await ctx.context.internalAdapter.createVerificationValue(\n        {\n          value: session.user.id,\n          identifier: `delete-account-${token}`,\n          expiresAt: new Date(\n            Date.now() + (ctx.context.options.user.deleteUser?.deleteTokenExpiresIn || 60 * 60 * 24) * 1e3\n          )\n        },\n        ctx\n      );\n      const url = `${ctx.context.baseURL}/delete-user/callback?token=${token}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n      await ctx.context.options.user.deleteUser.sendDeleteAccountVerification(\n        {\n          user: session.user,\n          url,\n          token\n        },\n        ctx.request\n      );\n      return ctx.json({\n        success: true,\n        message: \"Verification email sent\"\n      });\n    }\n    if (!ctx.body.password && ctx.context.sessionConfig.freshAge !== 0) {\n      const currentAge = new Date(session.session.createdAt).getTime();\n      const freshAge = ctx.context.sessionConfig.freshAge * 1e3;\n      const now = Date.now();\n      if (now - currentAge > freshAge * 1e3) {\n        throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n          message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.SESSION_EXPIRED\n        });\n      }\n    }\n    const beforeDelete = ctx.context.options.user.deleteUser?.beforeDelete;\n    if (beforeDelete) {\n      await beforeDelete(session.user, ctx.request);\n    }\n    await ctx.context.internalAdapter.deleteUser(session.user.id);\n    await ctx.context.internalAdapter.deleteSessions(session.user.id);\n    await ctx.context.internalAdapter.deleteAccounts(session.user.id);\n    (0,_better_auth_UfVWArIB_mjs__WEBPACK_IMPORTED_MODULE_11__.d)(ctx);\n    const afterDelete = ctx.context.options.user.deleteUser?.afterDelete;\n    if (afterDelete) {\n      await afterDelete(session.user, ctx.request);\n    }\n    return ctx.json({\n      success: true,\n      message: \"User deleted\"\n    });\n  }\n);\nconst deleteUserCallback = (0,_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.a)(\n  \"/delete-user/callback\",\n  {\n    method: \"GET\",\n    query: zod_v4__WEBPACK_IMPORTED_MODULE_22__.object({\n      token: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n        description: \"The token to verify the deletion request\"\n      }),\n      callbackURL: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n        description: \"The URL to redirect to after deletion\"\n      }).optional()\n    }),\n    use: [originCheck((ctx) => ctx.query.callbackURL)],\n    metadata: {\n      openapi: {\n        description: \"Callback to complete user deletion with verification token\",\n        responses: {\n          \"200\": {\n            description: \"User successfully deleted\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    success: {\n                      type: \"boolean\",\n                      description: \"Indicates if the deletion was successful\"\n                    },\n                    message: {\n                      type: \"string\",\n                      enum: [\"User deleted\"],\n                      description: \"Confirmation message\"\n                    }\n                  },\n                  required: [\"success\", \"message\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    if (!ctx.context.options.user?.deleteUser?.enabled) {\n      ctx.context.logger.error(\n        \"Delete user is disabled. Enable it in the options\"\n      );\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"NOT_FOUND\");\n    }\n    const session = await (0,_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.g)(ctx);\n    if (!session) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"NOT_FOUND\", {\n        message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.FAILED_TO_GET_USER_INFO\n      });\n    }\n    const token = await ctx.context.internalAdapter.findVerificationValue(\n      `delete-account-${ctx.query.token}`\n    );\n    if (!token || token.expiresAt < /* @__PURE__ */ new Date()) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"NOT_FOUND\", {\n        message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.INVALID_TOKEN\n      });\n    }\n    if (token.value !== session.user.id) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"NOT_FOUND\", {\n        message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.INVALID_TOKEN\n      });\n    }\n    const beforeDelete = ctx.context.options.user.deleteUser?.beforeDelete;\n    if (beforeDelete) {\n      await beforeDelete(session.user, ctx.request);\n    }\n    await ctx.context.internalAdapter.deleteUser(session.user.id);\n    await ctx.context.internalAdapter.deleteSessions(session.user.id);\n    await ctx.context.internalAdapter.deleteAccounts(session.user.id);\n    await ctx.context.internalAdapter.deleteVerificationValue(token.id);\n    (0,_better_auth_UfVWArIB_mjs__WEBPACK_IMPORTED_MODULE_11__.d)(ctx);\n    const afterDelete = ctx.context.options.user.deleteUser?.afterDelete;\n    if (afterDelete) {\n      await afterDelete(session.user, ctx.request);\n    }\n    if (ctx.query.callbackURL) {\n      throw ctx.redirect(ctx.query.callbackURL || \"/\");\n    }\n    return ctx.json({\n      success: true,\n      message: \"User deleted\"\n    });\n  }\n);\nconst changeEmail = (0,_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.a)(\n  \"/change-email\",\n  {\n    method: \"POST\",\n    body: zod_v4__WEBPACK_IMPORTED_MODULE_22__.object({\n      newEmail: zod_v4__WEBPACK_IMPORTED_MODULE_22__.email().meta({\n        description: \"The new email address to set must be a valid email address\"\n      }),\n      callbackURL: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n        description: \"The URL to redirect to after email verification\"\n      }).optional()\n    }),\n    use: [_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.s],\n    metadata: {\n      openapi: {\n        responses: {\n          \"200\": {\n            description: \"Email change request processed successfully\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    status: {\n                      type: \"boolean\",\n                      description: \"Indicates if the request was successful\"\n                    },\n                    message: {\n                      type: \"string\",\n                      enum: [\"Email updated\", \"Verification email sent\"],\n                      description: \"Status message of the email change process\",\n                      nullable: true\n                    }\n                  },\n                  required: [\"status\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    if (!ctx.context.options.user?.changeEmail?.enabled) {\n      ctx.context.logger.error(\"Change email is disabled.\");\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: \"Change email is disabled\"\n      });\n    }\n    const newEmail = ctx.body.newEmail.toLowerCase();\n    if (newEmail === ctx.context.session.user.email) {\n      ctx.context.logger.error(\"Email is the same\");\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: \"Email is the same\"\n      });\n    }\n    const existingUser = await ctx.context.internalAdapter.findUserByEmail(newEmail);\n    if (existingUser) {\n      ctx.context.logger.error(\"Email already exists\");\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: \"Couldn't update your email\"\n      });\n    }\n    if (ctx.context.session.user.emailVerified !== true) {\n      const existing = await ctx.context.internalAdapter.findUserByEmail(newEmail);\n      if (existing) {\n        throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"UNPROCESSABLE_ENTITY\", {\n          message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.USER_ALREADY_EXISTS\n        });\n      }\n      await ctx.context.internalAdapter.updateUserByEmail(\n        ctx.context.session.user.email,\n        {\n          email: newEmail\n        },\n        ctx\n      );\n      await (0,_better_auth_UfVWArIB_mjs__WEBPACK_IMPORTED_MODULE_11__.s)(ctx, {\n        session: ctx.context.session.session,\n        user: {\n          ...ctx.context.session.user,\n          email: newEmail\n        }\n      });\n      if (ctx.context.options.emailVerification?.sendVerificationEmail) {\n        const token2 = await createEmailVerificationToken(\n          ctx.context.secret,\n          newEmail,\n          void 0,\n          ctx.context.options.emailVerification?.expiresIn\n        );\n        const url2 = `${ctx.context.baseURL}/verify-email?token=${token2}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n        await ctx.context.options.emailVerification.sendVerificationEmail(\n          {\n            user: {\n              ...ctx.context.session.user,\n              email: newEmail\n            },\n            url: url2,\n            token: token2\n          },\n          ctx.request\n        );\n      }\n      return ctx.json({\n        status: true\n      });\n    }\n    if (!ctx.context.options.user.changeEmail.sendChangeEmailVerification) {\n      ctx.context.logger.error(\"Verification email isn't enabled.\");\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: \"Verification email isn't enabled\"\n      });\n    }\n    const token = await createEmailVerificationToken(\n      ctx.context.secret,\n      ctx.context.session.user.email,\n      newEmail,\n      ctx.context.options.emailVerification?.expiresIn\n    );\n    const url = `${ctx.context.baseURL}/verify-email?token=${token}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n    await ctx.context.options.user.changeEmail.sendChangeEmailVerification(\n      {\n        user: ctx.context.session.user,\n        newEmail,\n        url,\n        token\n      },\n      ctx.request\n    );\n    return ctx.json({\n      status: true\n    });\n  }\n);\n\nfunction sanitize(input) {\n  return input.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&#39;\");\n}\nconst html = (errorCode = \"Unknown\") => `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Authentication Error</title>\n    <style>\n        :root {\n            --bg-color: #f8f9fa;\n            --text-color: #212529;\n            --accent-color: #000000;\n            --error-color: #dc3545;\n            --border-color: #e9ecef;\n        }\n        body {\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n            background-color: var(--bg-color);\n            color: var(--text-color);\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            height: 100vh;\n            margin: 0;\n            line-height: 1.5;\n        }\n        .error-container {\n            background-color: #ffffff;\n            border-radius: 12px;\n            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);\n            padding: 2.5rem;\n            text-align: center;\n            max-width: 90%;\n            width: 400px;\n        }\n        h1 {\n            color: var(--error-color);\n            font-size: 1.75rem;\n            margin-bottom: 1rem;\n            font-weight: 600;\n        }\n        p {\n            margin-bottom: 1.5rem;\n            color: #495057;\n        }\n        .btn {\n            background-color: var(--accent-color);\n            color: #ffffff;\n            text-decoration: none;\n            padding: 0.75rem 1.5rem;\n            border-radius: 6px;\n            transition: all 0.3s ease;\n            display: inline-block;\n            font-weight: 500;\n            border: 2px solid var(--accent-color);\n        }\n        .btn:hover {\n            background-color: #131721;\n        }\n        .error-code {\n            font-size: 0.875rem;\n            color: #6c757d;\n            margin-top: 1.5rem;\n            padding-top: 1.5rem;\n            border-top: 1px solid var(--border-color);\n        }\n        .icon {\n            font-size: 3rem;\n            margin-bottom: 1rem;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"error-container\">\n        <div class=\"icon\">\\u26A0\\uFE0F</div>\n        <h1>Better Auth Error</h1>\n        <p>We encountered an issue while processing your request. Please try again or contact the application owner if the problem persists.</p>\n        <a href=\"/\" id=\"returnLink\" class=\"btn\">Return to Application</a>\n        <div class=\"error-code\">Error Code: <span id=\"errorCode\">${sanitize(\n  errorCode\n)}</span></div>\n    </div>\n</body>\n</html>`;\nconst error = (0,_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.a)(\n  \"/error\",\n  {\n    method: \"GET\",\n    metadata: {\n      ...HIDE_METADATA,\n      openapi: {\n        description: \"Displays an error page\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"text/html\": {\n                schema: {\n                  type: \"string\",\n                  description: \"The HTML content of the error page\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (c) => {\n    const query = new URL(c.request?.url || \"\").searchParams.get(\"error\") || \"Unknown\";\n    return new Response(html(query), {\n      headers: {\n        \"Content-Type\": \"text/html\"\n      }\n    });\n  }\n);\n\nconst ok = (0,_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.a)(\n  \"/ok\",\n  {\n    method: \"GET\",\n    metadata: {\n      ...HIDE_METADATA,\n      openapi: {\n        description: \"Check if the API is working\",\n        responses: {\n          \"200\": {\n            description: \"API is working\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    ok: {\n                      type: \"boolean\",\n                      description: \"Indicates if the API is working\"\n                    }\n                  },\n                  required: [\"ok\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    return ctx.json({\n      ok: true\n    });\n  }\n);\n\nconst listUserAccounts = (0,_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.a)(\n  \"/list-accounts\",\n  {\n    method: \"GET\",\n    use: [_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.s],\n    metadata: {\n      openapi: {\n        description: \"List all accounts linked to the user\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"array\",\n                  items: {\n                    type: \"object\",\n                    properties: {\n                      id: {\n                        type: \"string\"\n                      },\n                      providerId: {\n                        type: \"string\"\n                      },\n                      createdAt: {\n                        type: \"string\",\n                        format: \"date-time\"\n                      },\n                      updatedAt: {\n                        type: \"string\",\n                        format: \"date-time\"\n                      },\n                      accountId: {\n                        type: \"string\"\n                      },\n                      scopes: {\n                        type: \"array\",\n                        items: {\n                          type: \"string\"\n                        }\n                      }\n                    },\n                    required: [\n                      \"id\",\n                      \"providerId\",\n                      \"createdAt\",\n                      \"updatedAt\",\n                      \"accountId\",\n                      \"scopes\"\n                    ]\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (c) => {\n    const session = c.context.session;\n    const accounts = await c.context.internalAdapter.findAccounts(\n      session.user.id\n    );\n    return c.json(\n      accounts.map((a) => ({\n        id: a.id,\n        providerId: a.providerId,\n        createdAt: a.createdAt,\n        updatedAt: a.updatedAt,\n        accountId: a.accountId,\n        scopes: a.scope?.split(\",\") || []\n      }))\n    );\n  }\n);\nconst linkSocialAccount = (0,_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.a)(\n  \"/link-social\",\n  {\n    method: \"POST\",\n    requireHeaders: true,\n    body: zod_v4__WEBPACK_IMPORTED_MODULE_22__.object({\n      /**\n       * Callback URL to redirect to after the user has signed in.\n       */\n      callbackURL: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n        description: \"The URL to redirect to after the user has signed in\"\n      }).optional(),\n      /**\n       * OAuth2 provider to use\n       */\n      provider: SocialProviderListEnum,\n      /**\n       * ID Token for direct authentication without redirect\n       */\n      idToken: zod_v4__WEBPACK_IMPORTED_MODULE_22__.object({\n        token: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string(),\n        nonce: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().optional(),\n        accessToken: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().optional(),\n        refreshToken: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().optional(),\n        scopes: zod_v4__WEBPACK_IMPORTED_MODULE_22__.array(zod_v4__WEBPACK_IMPORTED_MODULE_22__.string()).optional()\n      }).optional(),\n      /**\n       * Whether to allow sign up for new users\n       */\n      requestSignUp: zod_v4__WEBPACK_IMPORTED_MODULE_22__.boolean().optional(),\n      /**\n       * Additional scopes to request when linking the account.\n       * This is useful for requesting additional permissions when\n       * linking a social account compared to the initial authentication.\n       */\n      scopes: zod_v4__WEBPACK_IMPORTED_MODULE_22__.array(zod_v4__WEBPACK_IMPORTED_MODULE_22__.string()).meta({\n        description: \"Additional scopes to request from the provider\"\n      }).optional(),\n      /**\n       * The URL to redirect to if there is an error during the link process.\n       */\n      errorCallbackURL: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n        description: \"The URL to redirect to if there is an error during the link process\"\n      }).optional(),\n      /**\n       * Disable automatic redirection to the provider\n       *\n       * This is useful if you want to handle the redirection\n       * yourself like in a popup or a different tab.\n       */\n      disableRedirect: zod_v4__WEBPACK_IMPORTED_MODULE_22__.boolean().meta({\n        description: \"Disable automatic redirection to the provider. Useful for handling the redirection yourself\"\n      }).optional()\n    }),\n    use: [_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.s],\n    metadata: {\n      openapi: {\n        description: \"Link a social account to the user\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    url: {\n                      type: \"string\",\n                      description: \"The authorization URL to redirect the user to\"\n                    },\n                    redirect: {\n                      type: \"boolean\",\n                      description: \"Indicates if the user should be redirected to the authorization URL\"\n                    },\n                    status: {\n                      type: \"boolean\"\n                    }\n                  },\n                  required: [\"redirect\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (c) => {\n    const session = c.context.session;\n    const provider = c.context.socialProviders.find(\n      (p) => p.id === c.body.provider\n    );\n    if (!provider) {\n      c.context.logger.error(\n        \"Provider not found. Make sure to add the provider in your auth config\",\n        {\n          provider: c.body.provider\n        }\n      );\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"NOT_FOUND\", {\n        message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.PROVIDER_NOT_FOUND\n      });\n    }\n    if (c.body.idToken) {\n      if (!provider.verifyIdToken) {\n        c.context.logger.error(\n          \"Provider does not support id token verification\",\n          {\n            provider: c.body.provider\n          }\n        );\n        throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"NOT_FOUND\", {\n          message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.ID_TOKEN_NOT_SUPPORTED\n        });\n      }\n      const { token, nonce } = c.body.idToken;\n      const valid = await provider.verifyIdToken(token, nonce);\n      if (!valid) {\n        c.context.logger.error(\"Invalid id token\", {\n          provider: c.body.provider\n        });\n        throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"UNAUTHORIZED\", {\n          message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.INVALID_TOKEN\n        });\n      }\n      const linkingUserInfo = await provider.getUserInfo({\n        idToken: token,\n        accessToken: c.body.idToken.accessToken,\n        refreshToken: c.body.idToken.refreshToken\n      });\n      if (!linkingUserInfo || !linkingUserInfo?.user) {\n        c.context.logger.error(\"Failed to get user info\", {\n          provider: c.body.provider\n        });\n        throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"UNAUTHORIZED\", {\n          message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.FAILED_TO_GET_USER_INFO\n        });\n      }\n      const linkingUserId = String(linkingUserInfo.user.id);\n      if (!linkingUserInfo.user.email) {\n        c.context.logger.error(\"User email not found\", {\n          provider: c.body.provider\n        });\n        throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"UNAUTHORIZED\", {\n          message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.USER_EMAIL_NOT_FOUND\n        });\n      }\n      const existingAccounts = await c.context.internalAdapter.findAccounts(\n        session.user.id\n      );\n      const hasBeenLinked = existingAccounts.find(\n        (a) => a.providerId === provider.id && a.accountId === linkingUserId\n      );\n      if (hasBeenLinked) {\n        return c.json({\n          url: \"\",\n          // this is for type inference\n          status: true,\n          redirect: false\n        });\n      }\n      const trustedProviders = c.context.options.account?.accountLinking?.trustedProviders;\n      const isTrustedProvider = trustedProviders?.includes(provider.id);\n      if (!isTrustedProvider && !linkingUserInfo.user.emailVerified || c.context.options.account?.accountLinking?.enabled === false) {\n        throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"UNAUTHORIZED\", {\n          message: \"Account not linked - linking not allowed\"\n        });\n      }\n      if (linkingUserInfo.user.email !== session.user.email && c.context.options.account?.accountLinking?.allowDifferentEmails !== true) {\n        throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"UNAUTHORIZED\", {\n          message: \"Account not linked - different emails not allowed\"\n        });\n      }\n      try {\n        await c.context.internalAdapter.createAccount(\n          {\n            userId: session.user.id,\n            providerId: provider.id,\n            accountId: linkingUserId,\n            accessToken: c.body.idToken.accessToken,\n            idToken: token,\n            refreshToken: c.body.idToken.refreshToken,\n            scope: c.body.idToken.scopes?.join(\",\")\n          },\n          c\n        );\n      } catch (e) {\n        throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"EXPECTATION_FAILED\", {\n          message: \"Account not linked - unable to create account\"\n        });\n      }\n      if (c.context.options.account?.accountLinking?.updateUserInfoOnLink === true) {\n        try {\n          await c.context.internalAdapter.updateUser(session.user.id, {\n            name: linkingUserInfo.user?.name,\n            image: linkingUserInfo.user?.image\n          });\n        } catch (e) {\n          console.warn(\"Could not update user - \" + e.toString());\n        }\n      }\n      return c.json({\n        url: \"\",\n        // this is for type inference\n        status: true,\n        redirect: false\n      });\n    }\n    const state = await generateState(c, {\n      userId: session.user.id,\n      email: session.user.email\n    });\n    const url = await provider.createAuthorizationURL({\n      state: state.state,\n      codeVerifier: state.codeVerifier,\n      redirectURI: `${c.context.baseURL}/callback/${provider.id}`,\n      scopes: c.body.scopes\n    });\n    return c.json({\n      url: url.toString(),\n      redirect: !c.body.disableRedirect\n    });\n  }\n);\nconst unlinkAccount = (0,_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.a)(\n  \"/unlink-account\",\n  {\n    method: \"POST\",\n    body: zod_v4__WEBPACK_IMPORTED_MODULE_22__.object({\n      providerId: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string(),\n      accountId: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().optional()\n    }),\n    use: [_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.f],\n    metadata: {\n      openapi: {\n        description: \"Unlink an account\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    status: {\n                      type: \"boolean\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const { providerId, accountId } = ctx.body;\n    const accounts = await ctx.context.internalAdapter.findAccounts(\n      ctx.context.session.user.id\n    );\n    if (accounts.length === 1 && !ctx.context.options.account?.accountLinking?.allowUnlinkingAll) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.FAILED_TO_UNLINK_LAST_ACCOUNT\n      });\n    }\n    const accountExist = accounts.find(\n      (account) => accountId ? account.accountId === accountId && account.providerId === providerId : account.providerId === providerId\n    );\n    if (!accountExist) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: _better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.B.ACCOUNT_NOT_FOUND\n      });\n    }\n    await ctx.context.internalAdapter.deleteAccount(accountExist.id);\n    return ctx.json({\n      status: true\n    });\n  }\n);\nconst getAccessToken = (0,_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.a)(\n  \"/get-access-token\",\n  {\n    method: \"POST\",\n    body: zod_v4__WEBPACK_IMPORTED_MODULE_22__.object({\n      providerId: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n        description: \"The provider ID for the OAuth provider\"\n      }),\n      accountId: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n        description: \"The account ID associated with the refresh token\"\n      }).optional(),\n      userId: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n        description: \"The user ID associated with the account\"\n      }).optional()\n    }),\n    metadata: {\n      openapi: {\n        description: \"Get a valid access token, doing a refresh if needed\",\n        responses: {\n          200: {\n            description: \"A Valid access token\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    tokenType: {\n                      type: \"string\"\n                    },\n                    idToken: {\n                      type: \"string\"\n                    },\n                    accessToken: {\n                      type: \"string\"\n                    },\n                    refreshToken: {\n                      type: \"string\"\n                    },\n                    accessTokenExpiresAt: {\n                      type: \"string\",\n                      format: \"date-time\"\n                    },\n                    refreshTokenExpiresAt: {\n                      type: \"string\",\n                      format: \"date-time\"\n                    }\n                  }\n                }\n              }\n            }\n          },\n          400: {\n            description: \"Invalid refresh token or provider configuration\"\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const { providerId, accountId, userId } = ctx.body;\n    const req = ctx.request;\n    const session = await (0,_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.g)(ctx);\n    if (req && !session) {\n      throw ctx.error(\"UNAUTHORIZED\");\n    }\n    let resolvedUserId = session?.user?.id || userId;\n    if (!resolvedUserId) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: `Either userId or session is required`\n      });\n    }\n    if (!ctx.context.socialProviders.find((p) => p.id === providerId)) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: `Provider ${providerId} is not supported.`\n      });\n    }\n    const accounts = await ctx.context.internalAdapter.findAccounts(resolvedUserId);\n    const account = accounts.find(\n      (acc) => accountId ? acc.id === accountId && acc.providerId === providerId : acc.providerId === providerId\n    );\n    if (!account) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: \"Account not found\"\n      });\n    }\n    const provider = ctx.context.socialProviders.find(\n      (p) => p.id === providerId\n    );\n    if (!provider) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: `Provider ${providerId} not found.`\n      });\n    }\n    try {\n      let newTokens = null;\n      const accessTokenExpired = account.accessTokenExpiresAt && new Date(account.accessTokenExpiresAt).getTime() - Date.now() < 5e3;\n      if (account.refreshToken && accessTokenExpired && provider.refreshAccessToken) {\n        newTokens = await provider.refreshAccessToken(\n          account.refreshToken\n        );\n        await ctx.context.internalAdapter.updateAccount(account.id, {\n          accessToken: await setTokenUtil(newTokens.accessToken, ctx.context),\n          accessTokenExpiresAt: newTokens.accessTokenExpiresAt,\n          refreshToken: await setTokenUtil(newTokens.refreshToken, ctx.context),\n          refreshTokenExpiresAt: newTokens.refreshTokenExpiresAt\n        });\n      }\n      const tokens = {\n        accessToken: await decryptOAuthToken(\n          newTokens?.accessToken ?? account.accessToken ?? \"\",\n          ctx.context\n        ),\n        accessTokenExpiresAt: newTokens?.accessTokenExpiresAt ?? account.accessTokenExpiresAt ?? void 0,\n        scopes: account.scope?.split(\",\") ?? [],\n        idToken: newTokens?.idToken ?? account.idToken ?? void 0\n      };\n      return ctx.json(tokens);\n    } catch (error) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: \"Failed to get a valid access token\",\n        cause: error\n      });\n    }\n  }\n);\nconst refreshToken = (0,_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.a)(\n  \"/refresh-token\",\n  {\n    method: \"POST\",\n    body: zod_v4__WEBPACK_IMPORTED_MODULE_22__.object({\n      providerId: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n        description: \"The provider ID for the OAuth provider\"\n      }),\n      accountId: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n        description: \"The account ID associated with the refresh token\"\n      }).optional(),\n      userId: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n        description: \"The user ID associated with the account\"\n      }).optional()\n    }),\n    metadata: {\n      openapi: {\n        description: \"Refresh the access token using a refresh token\",\n        responses: {\n          200: {\n            description: \"Access token refreshed successfully\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    tokenType: {\n                      type: \"string\"\n                    },\n                    idToken: {\n                      type: \"string\"\n                    },\n                    accessToken: {\n                      type: \"string\"\n                    },\n                    refreshToken: {\n                      type: \"string\"\n                    },\n                    accessTokenExpiresAt: {\n                      type: \"string\",\n                      format: \"date-time\"\n                    },\n                    refreshTokenExpiresAt: {\n                      type: \"string\",\n                      format: \"date-time\"\n                    }\n                  }\n                }\n              }\n            }\n          },\n          400: {\n            description: \"Invalid refresh token or provider configuration\"\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const { providerId, accountId, userId } = ctx.body;\n    const req = ctx.request;\n    const session = await (0,_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.g)(ctx);\n    if (req && !session) {\n      throw ctx.error(\"UNAUTHORIZED\");\n    }\n    let resolvedUserId = session?.user?.id || userId;\n    if (!resolvedUserId) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: `Either userId or session is required`\n      });\n    }\n    const accounts = await ctx.context.internalAdapter.findAccounts(resolvedUserId);\n    const account = accounts.find(\n      (acc) => accountId ? acc.id === accountId && acc.providerId === providerId : acc.providerId === providerId\n    );\n    if (!account) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: \"Account not found\"\n      });\n    }\n    const provider = ctx.context.socialProviders.find(\n      (p) => p.id === providerId\n    );\n    if (!provider) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: `Provider ${providerId} not found.`\n      });\n    }\n    if (!provider.refreshAccessToken) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: `Provider ${providerId} does not support token refreshing.`\n      });\n    }\n    try {\n      const tokens = await provider.refreshAccessToken(\n        account.refreshToken\n      );\n      await ctx.context.internalAdapter.updateAccount(account.id, {\n        accessToken: await setTokenUtil(tokens.accessToken, ctx.context),\n        refreshToken: await setTokenUtil(tokens.refreshToken, ctx.context),\n        accessTokenExpiresAt: tokens.accessTokenExpiresAt,\n        refreshTokenExpiresAt: tokens.refreshTokenExpiresAt\n      });\n      return ctx.json(tokens);\n    } catch (error) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: \"Failed to refresh access token\",\n        cause: error\n      });\n    }\n  }\n);\nconst accountInfo = (0,_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.a)(\n  \"/account-info\",\n  {\n    method: \"POST\",\n    use: [_better_auth_DV5EHeYG_mjs__WEBPACK_IMPORTED_MODULE_0__.s],\n    metadata: {\n      openapi: {\n        description: \"Get the account info provided by the provider\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    user: {\n                      type: \"object\",\n                      properties: {\n                        id: {\n                          type: \"string\"\n                        },\n                        name: {\n                          type: \"string\"\n                        },\n                        email: {\n                          type: \"string\"\n                        },\n                        image: {\n                          type: \"string\"\n                        },\n                        emailVerified: {\n                          type: \"boolean\"\n                        }\n                      },\n                      required: [\"id\", \"emailVerified\"]\n                    },\n                    data: {\n                      type: \"object\",\n                      properties: {},\n                      additionalProperties: true\n                    }\n                  },\n                  required: [\"user\", \"data\"],\n                  additionalProperties: false\n                }\n              }\n            }\n          }\n        }\n      }\n    },\n    body: zod_v4__WEBPACK_IMPORTED_MODULE_22__.object({\n      accountId: zod_v4__WEBPACK_IMPORTED_MODULE_22__.string().meta({\n        description: \"The provider given account id for which to get the account info\"\n      })\n    })\n  },\n  async (ctx) => {\n    const account = await ctx.context.internalAdapter.findAccount(\n      ctx.body.accountId\n    );\n    if (!account || account.userId !== ctx.context.session.user.id) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: \"Account not found\"\n      });\n    }\n    const provider = ctx.context.socialProviders.find(\n      (p) => p.id === account.providerId\n    );\n    if (!provider) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"INTERNAL_SERVER_ERROR\", {\n        message: `Provider account provider is ${account.providerId} but it is not configured`\n      });\n    }\n    const tokens = await getAccessToken({\n      ...ctx,\n      body: {\n        accountId: account.id,\n        providerId: account.providerId\n      },\n      returnHeaders: false\n    });\n    if (!tokens.accessToken) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: \"Access token not found\"\n      });\n    }\n    const info = await provider.getUserInfo({\n      ...tokens,\n      accessToken: tokens.accessToken\n    });\n    return ctx.json(info);\n  }\n);\n\nconst defuReplaceArrays = (0,defu__WEBPACK_IMPORTED_MODULE_20__.createDefu)((obj, key, value) => {\n  if (Array.isArray(obj[key]) && Array.isArray(value)) {\n    obj[key] = value;\n    return true;\n  }\n});\nfunction toAuthEndpoints(endpoints, ctx) {\n  const api = {};\n  for (const [key, endpoint] of Object.entries(endpoints)) {\n    api[key] = async (context) => {\n      const authContext = await ctx;\n      let internalContext = {\n        ...context,\n        context: {\n          ...authContext,\n          returned: void 0,\n          responseHeaders: void 0,\n          session: null\n        },\n        path: endpoint.path,\n        headers: context?.headers ? new Headers(context?.headers) : void 0\n      };\n      const { beforeHooks, afterHooks } = getHooks(authContext);\n      const before = await runBeforeHooks(internalContext, beforeHooks);\n      if (\"context\" in before && before.context && typeof before.context === \"object\") {\n        const { headers, ...rest } = before.context;\n        if (headers) {\n          headers.forEach((value, key2) => {\n            internalContext.headers.set(key2, value);\n          });\n        }\n        internalContext = defuReplaceArrays(rest, internalContext);\n      } else if (before) {\n        return before;\n      }\n      internalContext.asResponse = false;\n      internalContext.returnHeaders = true;\n      const result = await endpoint(internalContext).catch((e) => {\n        if (e instanceof better_call__WEBPACK_IMPORTED_MODULE_1__.APIError) {\n          return {\n            response: e,\n            headers: e.headers ? new Headers(e.headers) : null\n          };\n        }\n        throw e;\n      });\n      if (result && result instanceof Response) {\n        return result;\n      }\n      internalContext.context.returned = result.response;\n      internalContext.context.responseHeaders = result.headers;\n      const after = await runAfterHooks(internalContext, afterHooks);\n      if (after.response) {\n        result.response = after.response;\n      }\n      if (result.response instanceof better_call__WEBPACK_IMPORTED_MODULE_1__.APIError && (0,_better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_13__.s)(authContext.logger.level, \"debug\")) {\n        result.response.stack = result.response.errorStack;\n      }\n      if (result.response instanceof better_call__WEBPACK_IMPORTED_MODULE_1__.APIError && !context?.asResponse) {\n        throw result.response;\n      }\n      const response = context?.asResponse ? (0,better_call__WEBPACK_IMPORTED_MODULE_1__.toResponse)(result.response, {\n        headers: result.headers\n      }) : context?.returnHeaders ? {\n        headers: result.headers,\n        response: result.response\n      } : result.response;\n      return response;\n    };\n    api[key].path = endpoint.path;\n    api[key].options = endpoint.options;\n  }\n  return api;\n}\nasync function runBeforeHooks(context, hooks) {\n  let modifiedContext = {};\n  for (const hook of hooks) {\n    if (hook.matcher(context)) {\n      const result = await hook.handler({\n        ...context,\n        returnHeaders: false\n      }).catch((e) => {\n        if (e instanceof better_call__WEBPACK_IMPORTED_MODULE_1__.APIError && (0,_better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_13__.s)(context.context.logger.level, \"debug\")) {\n          e.stack = e.errorStack;\n        }\n        throw e;\n      });\n      if (result && typeof result === \"object\") {\n        if (\"context\" in result && typeof result.context === \"object\") {\n          const { headers, ...rest } = result.context;\n          if (headers instanceof Headers) {\n            if (modifiedContext.headers) {\n              headers.forEach((value, key) => {\n                modifiedContext.headers?.set(key, value);\n              });\n            } else {\n              modifiedContext.headers = headers;\n            }\n          }\n          modifiedContext = defuReplaceArrays(rest, modifiedContext);\n          continue;\n        }\n        return result;\n      }\n    }\n  }\n  return { context: modifiedContext };\n}\nasync function runAfterHooks(context, hooks) {\n  for (const hook of hooks) {\n    if (hook.matcher(context)) {\n      const result = await hook.handler(context).catch((e) => {\n        if (e instanceof better_call__WEBPACK_IMPORTED_MODULE_1__.APIError) {\n          if ((0,_better_auth_BjBlybv_mjs__WEBPACK_IMPORTED_MODULE_13__.s)(context.context.logger.level, \"debug\")) {\n            e.stack = e.errorStack;\n          }\n          return {\n            response: e,\n            headers: e.headers ? new Headers(e.headers) : null\n          };\n        }\n        throw e;\n      });\n      if (result.headers) {\n        result.headers.forEach((value, key) => {\n          if (!context.context.responseHeaders) {\n            context.context.responseHeaders = new Headers({\n              [key]: value\n            });\n          } else {\n            if (key.toLowerCase() === \"set-cookie\") {\n              context.context.responseHeaders.append(key, value);\n            } else {\n              context.context.responseHeaders.set(key, value);\n            }\n          }\n        });\n      }\n      if (result.response) {\n        context.context.returned = result.response;\n      }\n    }\n  }\n  return {\n    response: context.context.returned,\n    headers: context.context.responseHeaders\n  };\n}\nfunction getHooks(authContext) {\n  const plugins = authContext.options.plugins || [];\n  const beforeHooks = [];\n  const afterHooks = [];\n  if (authContext.options.hooks?.before) {\n    beforeHooks.push({\n      matcher: () => true,\n      handler: authContext.options.hooks.before\n    });\n  }\n  if (authContext.options.hooks?.after) {\n    afterHooks.push({\n      matcher: () => true,\n      handler: authContext.options.hooks.after\n    });\n  }\n  const pluginBeforeHooks = plugins.map((plugin) => {\n    if (plugin.hooks?.before) {\n      return plugin.hooks.before;\n    }\n  }).filter((plugin) => plugin !== void 0).flat();\n  const pluginAfterHooks = plugins.map((plugin) => {\n    if (plugin.hooks?.after) {\n      return plugin.hooks.after;\n    }\n  }).filter((plugin) => plugin !== void 0).flat();\n  pluginBeforeHooks.length && beforeHooks.push(...pluginBeforeHooks);\n  pluginAfterHooks.length && afterHooks.push(...pluginAfterHooks);\n  return {\n    beforeHooks,\n    afterHooks\n  };\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9zaGFyZWQvYmV0dGVyLWF1dGgubnFXZjd6VWUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE0QjtBQUN3SztBQUNqSjtBQUNPO0FBQ0w7QUFDUztBQUNvQjtBQUNoQztBQUNnRDtBQUNuRTtBQUNEO0FBQ0k7QUFDSjtBQUNGO0FBQ0k7QUFDSDtBQUMwQztBQUNxQjtBQUNDO0FBQ3BEO0FBQ047QUFDNkM7QUFDaEI7QUFDSDtBQUNJO0FBQ0Q7QUFDL0I7QUFDRTtBQUNEO0FBQ2dDOztBQUVsRTtBQUNBLGlMQUFpTCxnQkFBZ0I7QUFDak0sZ0JBQWdCLEtBQUs7QUFDckIsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsZ0JBQWdCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCx3QkFBd0I7QUFDeEUsaUJBQWlCLHlCQUF5QjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixpQkFBaUI7QUFDaEQsd0JBQXdCLGlCQUFpQjtBQUN6QyxNQUFNO0FBQ04sc0JBQXNCLGlCQUFpQjtBQUN2QztBQUNBO0FBQ0EseUNBQXlDLGlCQUFpQjtBQUMxRCx5Q0FBeUMsaUJBQWlCO0FBQzFEO0FBQ0E7QUFDQSxrQkFBa0IscUJBQXFCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsU0FBUyxJQUFJLGlCQUFpQjtBQUN0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QUNBO0FBQ0EsYUFBYTtBQUNiLFlBQVk7QUFDWjtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRTBrRCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhbWFhblxcT25lRHJpdmVcXERlc2t0b3BcXEthbmRpZF8yXFxOZXcgZm9sZGVyICgyKVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcc2hhcmVkXFxiZXR0ZXItYXV0aC5ucVdmN3pVZS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgeiBmcm9tICd6b2QvdjQnO1xuaW1wb3J0IHsgYyBhcyBjcmVhdGVBdXRoTWlkZGxld2FyZSwgYSBhcyBjcmVhdGVBdXRoRW5kcG9pbnQsIGcgYXMgZ2V0U2Vzc2lvbkZyb21DdHgsIEIgYXMgQkFTRV9FUlJPUl9DT0RFUywgcyBhcyBzZXNzaW9uTWlkZGxld2FyZSwgZiBhcyBmcmVzaFNlc3Npb25NaWRkbGV3YXJlIH0gZnJvbSAnLi9iZXR0ZXItYXV0aC5EVjVFSGVZRy5tanMnO1xuaW1wb3J0IHsgQVBJRXJyb3IsIHRvUmVzcG9uc2UgfSBmcm9tICdiZXR0ZXItY2FsbCc7XG5pbXBvcnQgeyBnIGFzIGdldERhdGUgfSBmcm9tICcuL2JldHRlci1hdXRoLkNXNkQ5ZVN4Lm1qcyc7XG5pbXBvcnQgeyBjcmVhdGVIYXNoIH0gZnJvbSAnQGJldHRlci1hdXRoL3V0aWxzL2hhc2gnO1xuaW1wb3J0IHsgYmFzZTY0VXJsLCBiYXNlNjQgfSBmcm9tICdAYmV0dGVyLWF1dGgvdXRpbHMvYmFzZTY0JztcbmltcG9ydCB7IHNpZ25KV1QsIHN5bW1ldHJpY0VuY3J5cHQsIHN5bW1ldHJpY0RlY3J5cHQgfSBmcm9tICcuLi9jcnlwdG8vaW5kZXgubWpzJztcbmltcG9ydCB7IGJldHRlckZldGNoIH0gZnJvbSAnQGJldHRlci1mZXRjaC9mZXRjaCc7XG5pbXBvcnQgeyBqd3RWZXJpZnksIGRlY29kZUp3dCwgZGVjb2RlUHJvdGVjdGVkSGVhZGVyLCBpbXBvcnRKV0ssIGNyZWF0ZVJlbW90ZUpXS1NldCB9IGZyb20gJ2pvc2UnO1xuaW1wb3J0ICdAbm9ibGUvY2lwaGVycy9jaGFjaGEnO1xuaW1wb3J0ICdAbm9ibGUvY2lwaGVycy91dGlscyc7XG5pbXBvcnQgJ0Bub2JsZS9jaXBoZXJzL3dlYmNyeXB0byc7XG5pbXBvcnQgJ0Bub2JsZS9oYXNoZXMvc2NyeXB0JztcbmltcG9ydCAnQGJldHRlci1hdXRoL3V0aWxzJztcbmltcG9ydCAnQGJldHRlci1hdXRoL3V0aWxzL2hleCc7XG5pbXBvcnQgJ0Bub2JsZS9oYXNoZXMvdXRpbHMnO1xuaW1wb3J0IHsgZyBhcyBnZW5lcmF0ZVJhbmRvbVN0cmluZyB9IGZyb20gJy4vYmV0dGVyLWF1dGguQjRRb3hkZ2MubWpzJztcbmltcG9ydCB7IGcgYXMgZ2V0T3JpZ2luLCBiIGFzIGdldEhvc3QsIGMgYXMgZ2V0UHJvdG9jb2wgfSBmcm9tICcuL2JldHRlci1hdXRoLkN1U19lRGRLLm1qcyc7XG5pbXBvcnQgeyBzIGFzIHNldFNlc3Npb25Db29raWUsIGQgYXMgZGVsZXRlU2Vzc2lvbkNvb2tpZSB9IGZyb20gJy4vYmV0dGVyLWF1dGguVWZWV0FySUIubWpzJztcbmltcG9ydCB7IEpXVEV4cGlyZWQgfSBmcm9tICdqb3NlL2Vycm9ycyc7XG5pbXBvcnQgJ0BiZXR0ZXItYXV0aC91dGlscy9yYW5kb20nO1xuaW1wb3J0IHsgYSBhcyBsb2dnZXIsIHMgYXMgc2hvdWxkUHVibGlzaExvZyB9IGZyb20gJy4vYmV0dGVyLWF1dGguQmpCbHlidi0ubWpzJztcbmltcG9ydCB7IHMgYXMgc2FmZUpTT05QYXJzZSB9IGZyb20gJy4vYmV0dGVyLWF1dGguQlpaS04xZzcubWpzJztcbmltcG9ydCB7IGcgYXMgZ2VuZXJhdGVJZCB9IGZyb20gJy4vYmV0dGVyLWF1dGguQlVQUFJYZksubWpzJztcbmltcG9ydCB7IGggYXMgcGFyc2VVc2VySW5wdXQgfSBmcm9tICcuL2JldHRlci1hdXRoLkRjdjhQUzdULm1qcyc7XG5pbXBvcnQgeyBiIGFzIGlzRGV2ZWxvcG1lbnQgfSBmcm9tICcuL2JldHRlci1hdXRoLkNNUTNyQS1JLm1qcyc7XG5pbXBvcnQgJ0BiZXR0ZXItYXV0aC91dGlscy9obWFjJztcbmltcG9ydCAnQGJldHRlci1hdXRoL3V0aWxzL2JpbmFyeSc7XG5pbXBvcnQgeyBjcmVhdGVEZWZ1IH0gZnJvbSAnZGVmdSc7XG5pbXBvcnQgeyBCIGFzIEJldHRlckF1dGhFcnJvciB9IGZyb20gJy4vYmV0dGVyLWF1dGguRGR6U0pmLW4ubWpzJztcblxuZnVuY3Rpb24gZXNjYXBlUmVnRXhwQ2hhcihjaGFyKSB7XG4gIGlmIChjaGFyID09PSBcIi1cIiB8fCBjaGFyID09PSBcIl5cIiB8fCBjaGFyID09PSBcIiRcIiB8fCBjaGFyID09PSBcIitcIiB8fCBjaGFyID09PSBcIi5cIiB8fCBjaGFyID09PSBcIihcIiB8fCBjaGFyID09PSBcIilcIiB8fCBjaGFyID09PSBcInxcIiB8fCBjaGFyID09PSBcIltcIiB8fCBjaGFyID09PSBcIl1cIiB8fCBjaGFyID09PSBcIntcIiB8fCBjaGFyID09PSBcIn1cIiB8fCBjaGFyID09PSBcIipcIiB8fCBjaGFyID09PSBcIj9cIiB8fCBjaGFyID09PSBcIlxcXFxcIikge1xuICAgIHJldHVybiBgXFxcXCR7Y2hhcn1gO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBjaGFyO1xuICB9XG59XG5mdW5jdGlvbiBlc2NhcGVSZWdFeHBTdHJpbmcoc3RyKSB7XG4gIGxldCByZXN1bHQgPSBcIlwiO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgIHJlc3VsdCArPSBlc2NhcGVSZWdFeHBDaGFyKHN0cltpXSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIHRyYW5zZm9ybShwYXR0ZXJuLCBzZXBhcmF0b3IgPSB0cnVlKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KHBhdHRlcm4pKSB7XG4gICAgbGV0IHJlZ0V4cFBhdHRlcm5zID0gcGF0dGVybi5tYXAoKHApID0+IGBeJHt0cmFuc2Zvcm0ocCwgc2VwYXJhdG9yKX0kYCk7XG4gICAgcmV0dXJuIGAoPzoke3JlZ0V4cFBhdHRlcm5zLmpvaW4oXCJ8XCIpfSlgO1xuICB9XG4gIGxldCBzZXBhcmF0b3JTcGxpdHRlciA9IFwiXCI7XG4gIGxldCBzZXBhcmF0b3JNYXRjaGVyID0gXCJcIjtcbiAgbGV0IHdpbGRjYXJkID0gXCIuXCI7XG4gIGlmIChzZXBhcmF0b3IgPT09IHRydWUpIHtcbiAgICBzZXBhcmF0b3JTcGxpdHRlciA9IFwiL1wiO1xuICAgIHNlcGFyYXRvck1hdGNoZXIgPSBcIlsvXFxcXFxcXFxdXCI7XG4gICAgd2lsZGNhcmQgPSBcIlteL1xcXFxcXFxcXVwiO1xuICB9IGVsc2UgaWYgKHNlcGFyYXRvcikge1xuICAgIHNlcGFyYXRvclNwbGl0dGVyID0gc2VwYXJhdG9yO1xuICAgIHNlcGFyYXRvck1hdGNoZXIgPSBlc2NhcGVSZWdFeHBTdHJpbmcoc2VwYXJhdG9yU3BsaXR0ZXIpO1xuICAgIGlmIChzZXBhcmF0b3JNYXRjaGVyLmxlbmd0aCA+IDEpIHtcbiAgICAgIHNlcGFyYXRvck1hdGNoZXIgPSBgKD86JHtzZXBhcmF0b3JNYXRjaGVyfSlgO1xuICAgICAgd2lsZGNhcmQgPSBgKCg/ISR7c2VwYXJhdG9yTWF0Y2hlcn0pLilgO1xuICAgIH0gZWxzZSB7XG4gICAgICB3aWxkY2FyZCA9IGBbXiR7c2VwYXJhdG9yTWF0Y2hlcn1dYDtcbiAgICB9XG4gIH1cbiAgbGV0IHJlcXVpcmVkU2VwYXJhdG9yID0gc2VwYXJhdG9yID8gYCR7c2VwYXJhdG9yTWF0Y2hlcn0rP2AgOiBcIlwiO1xuICBsZXQgb3B0aW9uYWxTZXBhcmF0b3IgPSBzZXBhcmF0b3IgPyBgJHtzZXBhcmF0b3JNYXRjaGVyfSo/YCA6IFwiXCI7XG4gIGxldCBzZWdtZW50cyA9IHNlcGFyYXRvciA/IHBhdHRlcm4uc3BsaXQoc2VwYXJhdG9yU3BsaXR0ZXIpIDogW3BhdHRlcm5dO1xuICBsZXQgcmVzdWx0ID0gXCJcIjtcbiAgZm9yIChsZXQgcyA9IDA7IHMgPCBzZWdtZW50cy5sZW5ndGg7IHMrKykge1xuICAgIGxldCBzZWdtZW50ID0gc2VnbWVudHNbc107XG4gICAgbGV0IG5leHRTZWdtZW50ID0gc2VnbWVudHNbcyArIDFdO1xuICAgIGxldCBjdXJyZW50U2VwYXJhdG9yID0gXCJcIjtcbiAgICBpZiAoIXNlZ21lbnQgJiYgcyA+IDApIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAoc2VwYXJhdG9yKSB7XG4gICAgICBpZiAocyA9PT0gc2VnbWVudHMubGVuZ3RoIC0gMSkge1xuICAgICAgICBjdXJyZW50U2VwYXJhdG9yID0gb3B0aW9uYWxTZXBhcmF0b3I7XG4gICAgICB9IGVsc2UgaWYgKG5leHRTZWdtZW50ICE9PSBcIioqXCIpIHtcbiAgICAgICAgY3VycmVudFNlcGFyYXRvciA9IHJlcXVpcmVkU2VwYXJhdG9yO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudFNlcGFyYXRvciA9IFwiXCI7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChzZXBhcmF0b3IgJiYgc2VnbWVudCA9PT0gXCIqKlwiKSB7XG4gICAgICBpZiAoY3VycmVudFNlcGFyYXRvcikge1xuICAgICAgICByZXN1bHQgKz0gcyA9PT0gMCA/IFwiXCIgOiBjdXJyZW50U2VwYXJhdG9yO1xuICAgICAgICByZXN1bHQgKz0gYCg/OiR7d2lsZGNhcmR9Kj8ke2N1cnJlbnRTZXBhcmF0b3J9KSo/YDtcbiAgICAgIH1cbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBmb3IgKGxldCBjID0gMDsgYyA8IHNlZ21lbnQubGVuZ3RoOyBjKyspIHtcbiAgICAgIGxldCBjaGFyID0gc2VnbWVudFtjXTtcbiAgICAgIGlmIChjaGFyID09PSBcIlxcXFxcIikge1xuICAgICAgICBpZiAoYyA8IHNlZ21lbnQubGVuZ3RoIC0gMSkge1xuICAgICAgICAgIHJlc3VsdCArPSBlc2NhcGVSZWdFeHBDaGFyKHNlZ21lbnRbYyArIDFdKTtcbiAgICAgICAgICBjKys7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoY2hhciA9PT0gXCI/XCIpIHtcbiAgICAgICAgcmVzdWx0ICs9IHdpbGRjYXJkO1xuICAgICAgfSBlbHNlIGlmIChjaGFyID09PSBcIipcIikge1xuICAgICAgICByZXN1bHQgKz0gYCR7d2lsZGNhcmR9Kj9gO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0ICs9IGVzY2FwZVJlZ0V4cENoYXIoY2hhcik7XG4gICAgICB9XG4gICAgfVxuICAgIHJlc3VsdCArPSBjdXJyZW50U2VwYXJhdG9yO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBpc01hdGNoKHJlZ2V4cCwgc2FtcGxlKSB7XG4gIGlmICh0eXBlb2Ygc2FtcGxlICE9PSBcInN0cmluZ1wiKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgU2FtcGxlIG11c3QgYmUgYSBzdHJpbmcsIGJ1dCAke3R5cGVvZiBzYW1wbGV9IGdpdmVuYCk7XG4gIH1cbiAgcmV0dXJuIHJlZ2V4cC50ZXN0KHNhbXBsZSk7XG59XG5mdW5jdGlvbiB3aWxkY2FyZE1hdGNoKHBhdHRlcm4sIG9wdGlvbnMpIHtcbiAgaWYgKHR5cGVvZiBwYXR0ZXJuICE9PSBcInN0cmluZ1wiICYmICFBcnJheS5pc0FycmF5KHBhdHRlcm4pKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgIGBUaGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHNpbmdsZSBwYXR0ZXJuIHN0cmluZyBvciBhbiBhcnJheSBvZiBwYXR0ZXJucywgYnV0ICR7dHlwZW9mIHBhdHRlcm59IGdpdmVuYFxuICAgICk7XG4gIH1cbiAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiBvcHRpb25zID09PSBcImJvb2xlYW5cIikge1xuICAgIG9wdGlvbnMgPSB7IHNlcGFyYXRvcjogb3B0aW9ucyB9O1xuICB9XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyICYmICEodHlwZW9mIG9wdGlvbnMgPT09IFwidW5kZWZpbmVkXCIgfHwgdHlwZW9mIG9wdGlvbnMgPT09IFwib2JqZWN0XCIgJiYgb3B0aW9ucyAhPT0gbnVsbCAmJiAhQXJyYXkuaXNBcnJheShvcHRpb25zKSkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgYFRoZSBzZWNvbmQgYXJndW1lbnQgbXVzdCBiZSBhbiBvcHRpb25zIG9iamVjdCBvciBhIHN0cmluZy9ib29sZWFuIHNlcGFyYXRvciwgYnV0ICR7dHlwZW9mIG9wdGlvbnN9IGdpdmVuYFxuICAgICk7XG4gIH1cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIGlmIChvcHRpb25zLnNlcGFyYXRvciA9PT0gXCJcXFxcXCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBcIlxcXFwgaXMgbm90IGEgdmFsaWQgc2VwYXJhdG9yIGJlY2F1c2UgaXQgaXMgdXNlZCBmb3IgZXNjYXBpbmcuIFRyeSBzZXR0aW5nIHRoZSBzZXBhcmF0b3IgdG8gYHRydWVgIGluc3RlYWRcIlxuICAgICk7XG4gIH1cbiAgbGV0IHJlZ2V4cFBhdHRlcm4gPSB0cmFuc2Zvcm0ocGF0dGVybiwgb3B0aW9ucy5zZXBhcmF0b3IpO1xuICBsZXQgcmVnZXhwID0gbmV3IFJlZ0V4cChgXiR7cmVnZXhwUGF0dGVybn0kYCwgb3B0aW9ucy5mbGFncyk7XG4gIGxldCBmbiA9IGlzTWF0Y2guYmluZChudWxsLCByZWdleHApO1xuICBmbi5vcHRpb25zID0gb3B0aW9ucztcbiAgZm4ucGF0dGVybiA9IHBhdHRlcm47XG4gIGZuLnJlZ2V4cCA9IHJlZ2V4cDtcbiAgcmV0dXJuIGZuO1xufVxuXG5jb25zdCBvcmlnaW5DaGVja01pZGRsZXdhcmUgPSBjcmVhdGVBdXRoTWlkZGxld2FyZShhc3luYyAoY3R4KSA9PiB7XG4gIGlmIChjdHgucmVxdWVzdD8ubWV0aG9kICE9PSBcIlBPU1RcIiB8fCAhY3R4LnJlcXVlc3QpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgeyBib2R5LCBxdWVyeSwgY29udGV4dCB9ID0gY3R4O1xuICBjb25zdCBvcmlnaW5IZWFkZXIgPSBjdHguaGVhZGVycz8uZ2V0KFwib3JpZ2luXCIpIHx8IGN0eC5oZWFkZXJzPy5nZXQoXCJyZWZlcmVyXCIpIHx8IFwiXCI7XG4gIGNvbnN0IGNhbGxiYWNrVVJMID0gYm9keT8uY2FsbGJhY2tVUkwgfHwgcXVlcnk/LmNhbGxiYWNrVVJMO1xuICBjb25zdCByZWRpcmVjdFVSTCA9IGJvZHk/LnJlZGlyZWN0VG87XG4gIGNvbnN0IGVycm9yQ2FsbGJhY2tVUkwgPSBib2R5Py5lcnJvckNhbGxiYWNrVVJMO1xuICBjb25zdCBuZXdVc2VyQ2FsbGJhY2tVUkwgPSBib2R5Py5uZXdVc2VyQ2FsbGJhY2tVUkw7XG4gIGNvbnN0IHRydXN0ZWRPcmlnaW5zID0gQXJyYXkuaXNBcnJheShjb250ZXh0Lm9wdGlvbnMudHJ1c3RlZE9yaWdpbnMpID8gY29udGV4dC50cnVzdGVkT3JpZ2lucyA6IFtcbiAgICAuLi5jb250ZXh0LnRydXN0ZWRPcmlnaW5zLFxuICAgIC4uLmF3YWl0IGNvbnRleHQub3B0aW9ucy50cnVzdGVkT3JpZ2lucz8uKGN0eC5yZXF1ZXN0KSB8fCBbXVxuICBdO1xuICBjb25zdCB1c2VzQ29va2llcyA9IGN0eC5oZWFkZXJzPy5oYXMoXCJjb29raWVcIik7XG4gIGNvbnN0IG1hdGNoZXNQYXR0ZXJuID0gKHVybCwgcGF0dGVybikgPT4ge1xuICAgIGlmICh1cmwuc3RhcnRzV2l0aChcIi9cIikpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHBhdHRlcm4uaW5jbHVkZXMoXCIqXCIpKSB7XG4gICAgICBpZiAocGF0dGVybi5pbmNsdWRlcyhcIjovL1wiKSkge1xuICAgICAgICByZXR1cm4gd2lsZGNhcmRNYXRjaChwYXR0ZXJuKShnZXRPcmlnaW4odXJsKSB8fCB1cmwpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHdpbGRjYXJkTWF0Y2gocGF0dGVybikoZ2V0SG9zdCh1cmwpKTtcbiAgICB9XG4gICAgY29uc3QgcHJvdG9jb2wgPSBnZXRQcm90b2NvbCh1cmwpO1xuICAgIHJldHVybiBwcm90b2NvbCA9PT0gXCJodHRwOlwiIHx8IHByb3RvY29sID09PSBcImh0dHBzOlwiIHx8ICFwcm90b2NvbCA/IHBhdHRlcm4gPT09IGdldE9yaWdpbih1cmwpIDogdXJsLnN0YXJ0c1dpdGgocGF0dGVybik7XG4gIH07XG4gIGNvbnN0IHZhbGlkYXRlVVJMID0gKHVybCwgbGFiZWwpID0+IHtcbiAgICBpZiAoIXVybCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBpc1RydXN0ZWRPcmlnaW4gPSB0cnVzdGVkT3JpZ2lucy5zb21lKFxuICAgICAgKG9yaWdpbikgPT4gbWF0Y2hlc1BhdHRlcm4odXJsLCBvcmlnaW4pIHx8IHVybD8uc3RhcnRzV2l0aChcIi9cIikgJiYgbGFiZWwgIT09IFwib3JpZ2luXCIgJiYgL15cXC8oPyFcXC98XFxcXHwlMmZ8JTVjKVtcXHdcXC0uXFwrL0BdKig/OlxcP1tcXHdcXC0uXFwrLz0mJUBdKik/JC8udGVzdCh1cmwpXG4gICAgKTtcbiAgICBpZiAoIWlzVHJ1c3RlZE9yaWdpbikge1xuICAgICAgY3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKGBJbnZhbGlkICR7bGFiZWx9OiAke3VybH1gKTtcbiAgICAgIGN0eC5jb250ZXh0LmxvZ2dlci5pbmZvKFxuICAgICAgICBgSWYgaXQncyBhIHZhbGlkIFVSTCwgcGxlYXNlIGFkZCAke3VybH0gdG8gdHJ1c3RlZE9yaWdpbnMgaW4geW91ciBhdXRoIGNvbmZpZ1xuYCxcbiAgICAgICAgYEN1cnJlbnQgbGlzdCBvZiB0cnVzdGVkT3JpZ2luczogJHt0cnVzdGVkT3JpZ2luc31gXG4gICAgICApO1xuICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKFwiRk9SQklEREVOXCIsIHsgbWVzc2FnZTogYEludmFsaWQgJHtsYWJlbH1gIH0pO1xuICAgIH1cbiAgfTtcbiAgaWYgKHVzZXNDb29raWVzICYmICFjdHguY29udGV4dC5vcHRpb25zLmFkdmFuY2VkPy5kaXNhYmxlQ1NSRkNoZWNrKSB7XG4gICAgdmFsaWRhdGVVUkwob3JpZ2luSGVhZGVyLCBcIm9yaWdpblwiKTtcbiAgfVxuICBjYWxsYmFja1VSTCAmJiB2YWxpZGF0ZVVSTChjYWxsYmFja1VSTCwgXCJjYWxsYmFja1VSTFwiKTtcbiAgcmVkaXJlY3RVUkwgJiYgdmFsaWRhdGVVUkwocmVkaXJlY3RVUkwsIFwicmVkaXJlY3RVUkxcIik7XG4gIGVycm9yQ2FsbGJhY2tVUkwgJiYgdmFsaWRhdGVVUkwoZXJyb3JDYWxsYmFja1VSTCwgXCJlcnJvckNhbGxiYWNrVVJMXCIpO1xuICBuZXdVc2VyQ2FsbGJhY2tVUkwgJiYgdmFsaWRhdGVVUkwobmV3VXNlckNhbGxiYWNrVVJMLCBcIm5ld1VzZXJDYWxsYmFja1VSTFwiKTtcbn0pO1xuY29uc3Qgb3JpZ2luQ2hlY2sgPSAoZ2V0VmFsdWUpID0+IGNyZWF0ZUF1dGhNaWRkbGV3YXJlKGFzeW5jIChjdHgpID0+IHtcbiAgaWYgKCFjdHgucmVxdWVzdCkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCB7IGNvbnRleHQgfSA9IGN0eDtcbiAgY29uc3QgY2FsbGJhY2tVUkwgPSBnZXRWYWx1ZShjdHgpO1xuICBjb25zdCB0cnVzdGVkT3JpZ2lucyA9IEFycmF5LmlzQXJyYXkoXG4gICAgY29udGV4dC5vcHRpb25zLnRydXN0ZWRPcmlnaW5zXG4gICkgPyBjb250ZXh0LnRydXN0ZWRPcmlnaW5zIDogW1xuICAgIC4uLmNvbnRleHQudHJ1c3RlZE9yaWdpbnMsXG4gICAgLi4uYXdhaXQgY29udGV4dC5vcHRpb25zLnRydXN0ZWRPcmlnaW5zPy4oY3R4LnJlcXVlc3QpIHx8IFtdXG4gIF07XG4gIGNvbnN0IG1hdGNoZXNQYXR0ZXJuID0gKHVybCwgcGF0dGVybikgPT4ge1xuICAgIGlmICh1cmwuc3RhcnRzV2l0aChcIi9cIikpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHBhdHRlcm4uaW5jbHVkZXMoXCIqXCIpKSB7XG4gICAgICBpZiAocGF0dGVybi5pbmNsdWRlcyhcIjovL1wiKSkge1xuICAgICAgICByZXR1cm4gd2lsZGNhcmRNYXRjaChwYXR0ZXJuKShnZXRPcmlnaW4odXJsKSB8fCB1cmwpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHdpbGRjYXJkTWF0Y2gocGF0dGVybikoZ2V0SG9zdCh1cmwpKTtcbiAgICB9XG4gICAgY29uc3QgcHJvdG9jb2wgPSBnZXRQcm90b2NvbCh1cmwpO1xuICAgIHJldHVybiBwcm90b2NvbCA9PT0gXCJodHRwOlwiIHx8IHByb3RvY29sID09PSBcImh0dHBzOlwiIHx8ICFwcm90b2NvbCA/IHBhdHRlcm4gPT09IGdldE9yaWdpbih1cmwpIDogdXJsLnN0YXJ0c1dpdGgocGF0dGVybik7XG4gIH07XG4gIGNvbnN0IHZhbGlkYXRlVVJMID0gKHVybCwgbGFiZWwpID0+IHtcbiAgICBpZiAoIXVybCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBpc1RydXN0ZWRPcmlnaW4gPSB0cnVzdGVkT3JpZ2lucy5zb21lKFxuICAgICAgKG9yaWdpbikgPT4gbWF0Y2hlc1BhdHRlcm4odXJsLCBvcmlnaW4pIHx8IHVybD8uc3RhcnRzV2l0aChcIi9cIikgJiYgbGFiZWwgIT09IFwib3JpZ2luXCIgJiYgL15cXC8oPyFcXC98XFxcXHwlMmZ8JTVjKVtcXHdcXC0uXFwrL0BdKig/OlxcP1tcXHdcXC0uXFwrLz0mJUBdKik/JC8udGVzdChcbiAgICAgICAgdXJsXG4gICAgICApXG4gICAgKTtcbiAgICBpZiAoIWlzVHJ1c3RlZE9yaWdpbikge1xuICAgICAgY3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKGBJbnZhbGlkICR7bGFiZWx9OiAke3VybH1gKTtcbiAgICAgIGN0eC5jb250ZXh0LmxvZ2dlci5pbmZvKFxuICAgICAgICBgSWYgaXQncyBhIHZhbGlkIFVSTCwgcGxlYXNlIGFkZCAke3VybH0gdG8gdHJ1c3RlZE9yaWdpbnMgaW4geW91ciBhdXRoIGNvbmZpZ1xuYCxcbiAgICAgICAgYEN1cnJlbnQgbGlzdCBvZiB0cnVzdGVkT3JpZ2luczogJHt0cnVzdGVkT3JpZ2luc31gXG4gICAgICApO1xuICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKFwiRk9SQklEREVOXCIsIHsgbWVzc2FnZTogYEludmFsaWQgJHtsYWJlbH1gIH0pO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgY2FsbGJhY2tzID0gQXJyYXkuaXNBcnJheShjYWxsYmFja1VSTCkgPyBjYWxsYmFja1VSTCA6IFtjYWxsYmFja1VSTF07XG4gIGZvciAoY29uc3QgdXJsIG9mIGNhbGxiYWNrcykge1xuICAgIHZhbGlkYXRlVVJMKHVybCwgXCJjYWxsYmFja1VSTFwiKTtcbiAgfVxufSk7XG5cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUVtYWlsVmVyaWZpY2F0aW9uVG9rZW4oc2VjcmV0LCBlbWFpbCwgdXBkYXRlVG8sIGV4cGlyZXNJbiA9IDM2MDApIHtcbiAgY29uc3QgdG9rZW4gPSBhd2FpdCBzaWduSldUKFxuICAgIHtcbiAgICAgIGVtYWlsOiBlbWFpbC50b0xvd2VyQ2FzZSgpLFxuICAgICAgdXBkYXRlVG9cbiAgICB9LFxuICAgIHNlY3JldCxcbiAgICBleHBpcmVzSW5cbiAgKTtcbiAgcmV0dXJuIHRva2VuO1xufVxuYXN5bmMgZnVuY3Rpb24gc2VuZFZlcmlmaWNhdGlvbkVtYWlsRm4oY3R4LCB1c2VyKSB7XG4gIGlmICghY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uc2VuZFZlcmlmaWNhdGlvbkVtYWlsKSB7XG4gICAgY3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiVmVyaWZpY2F0aW9uIGVtYWlsIGlzbid0IGVuYWJsZWQuXCIpO1xuICAgIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcbiAgICAgIG1lc3NhZ2U6IFwiVmVyaWZpY2F0aW9uIGVtYWlsIGlzbid0IGVuYWJsZWRcIlxuICAgIH0pO1xuICB9XG4gIGNvbnN0IHRva2VuID0gYXdhaXQgY3JlYXRlRW1haWxWZXJpZmljYXRpb25Ub2tlbihcbiAgICBjdHguY29udGV4dC5zZWNyZXQsXG4gICAgdXNlci5lbWFpbCxcbiAgICB2b2lkIDAsXG4gICAgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uZXhwaXJlc0luXG4gICk7XG4gIGNvbnN0IHVybCA9IGAke2N0eC5jb250ZXh0LmJhc2VVUkx9L3ZlcmlmeS1lbWFpbD90b2tlbj0ke3Rva2VufSZjYWxsYmFja1VSTD0ke2N0eC5ib2R5LmNhbGxiYWNrVVJMIHx8IFwiL1wifWA7XG4gIGF3YWl0IGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24uc2VuZFZlcmlmaWNhdGlvbkVtYWlsKFxuICAgIHtcbiAgICAgIHVzZXIsXG4gICAgICB1cmwsXG4gICAgICB0b2tlblxuICAgIH0sXG4gICAgY3R4LnJlcXVlc3RcbiAgKTtcbn1cbmNvbnN0IHNlbmRWZXJpZmljYXRpb25FbWFpbCA9IGNyZWF0ZUF1dGhFbmRwb2ludChcbiAgXCIvc2VuZC12ZXJpZmljYXRpb24tZW1haWxcIixcbiAge1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgYm9keTogei5vYmplY3Qoe1xuICAgICAgZW1haWw6IHouZW1haWwoKS5tZXRhKHtcbiAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIGVtYWlsIHRvIHNlbmQgdGhlIHZlcmlmaWNhdGlvbiBlbWFpbCB0b1wiXG4gICAgICB9KSxcbiAgICAgIGNhbGxiYWNrVVJMOiB6LnN0cmluZygpLm1ldGEoe1xuICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgVVJMIHRvIHVzZSBmb3IgZW1haWwgdmVyaWZpY2F0aW9uIGNhbGxiYWNrXCJcbiAgICAgIH0pLm9wdGlvbmFsKClcbiAgICB9KSxcbiAgICBtZXRhZGF0YToge1xuICAgICAgb3BlbmFwaToge1xuICAgICAgICBkZXNjcmlwdGlvbjogXCJTZW5kIGEgdmVyaWZpY2F0aW9uIGVtYWlsIHRvIHRoZSB1c2VyXCIsXG4gICAgICAgIHJlcXVlc3RCb2R5OiB7XG4gICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHtcbiAgICAgICAgICAgICAgc2NoZW1hOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJvYmplY3RcIixcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgICBlbWFpbDoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgZW1haWwgdG8gc2VuZCB0aGUgdmVyaWZpY2F0aW9uIGVtYWlsIHRvXCIsXG4gICAgICAgICAgICAgICAgICAgIGV4YW1wbGU6IFwidXNlckBleGFtcGxlLmNvbVwiXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgY2FsbGJhY2tVUkw6IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIFVSTCB0byB1c2UgZm9yIGVtYWlsIHZlcmlmaWNhdGlvbiBjYWxsYmFja1wiLFxuICAgICAgICAgICAgICAgICAgICBleGFtcGxlOiBcImh0dHBzOi8vZXhhbXBsZS5jb20vY2FsbGJhY2tcIixcbiAgICAgICAgICAgICAgICAgICAgbnVsbGFibGU6IHRydWVcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBbXCJlbWFpbFwiXVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICByZXNwb25zZXM6IHtcbiAgICAgICAgICBcIjIwMFwiOiB7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgIFwiYXBwbGljYXRpb24vanNvblwiOiB7XG4gICAgICAgICAgICAgICAgc2NoZW1hOiB7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcIm9iamVjdFwiLFxuICAgICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJvb2xlYW5cIixcbiAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJJbmRpY2F0ZXMgaWYgdGhlIGVtYWlsIHdhcyBzZW50IHN1Y2Nlc3NmdWxseVwiLFxuICAgICAgICAgICAgICAgICAgICAgIGV4YW1wbGU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCI0MDBcIjoge1xuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiQmFkIFJlcXVlc3RcIixcbiAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHtcbiAgICAgICAgICAgICAgICBzY2hlbWE6IHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwib2JqZWN0XCIsXG4gICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkVycm9yIG1lc3NhZ2VcIixcbiAgICAgICAgICAgICAgICAgICAgICBleGFtcGxlOiBcIlZlcmlmaWNhdGlvbiBlbWFpbCBpc24ndCBlbmFibGVkXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgYXN5bmMgKGN0eCkgPT4ge1xuICAgIGlmICghY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uc2VuZFZlcmlmaWNhdGlvbkVtYWlsKSB7XG4gICAgICBjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJWZXJpZmljYXRpb24gZW1haWwgaXNuJ3QgZW5hYmxlZC5cIik7XG4gICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG4gICAgICAgIG1lc3NhZ2U6IFwiVmVyaWZpY2F0aW9uIGVtYWlsIGlzbid0IGVuYWJsZWRcIlxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHsgZW1haWwgfSA9IGN0eC5ib2R5O1xuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uRnJvbUN0eChjdHgpO1xuICAgIGlmICghc2Vzc2lvbikge1xuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVXNlckJ5RW1haWwoZW1haWwpO1xuICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgIHJldHVybiBjdHguanNvbih7XG4gICAgICAgICAgc3RhdHVzOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgYXdhaXQgc2VuZFZlcmlmaWNhdGlvbkVtYWlsRm4oY3R4LCB1c2VyLnVzZXIpO1xuICAgICAgcmV0dXJuIGN0eC5qc29uKHtcbiAgICAgICAgc3RhdHVzOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHNlc3Npb24/LnVzZXIuZW1haWxWZXJpZmllZCkge1xuICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwge1xuICAgICAgICBtZXNzYWdlOiBcIllvdSBjYW4gb25seSBzZW5kIGEgdmVyaWZpY2F0aW9uIGVtYWlsIHRvIGFuIHVudmVyaWZpZWQgZW1haWxcIlxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChzZXNzaW9uPy51c2VyLmVtYWlsICE9PSBlbWFpbCkge1xuICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwge1xuICAgICAgICBtZXNzYWdlOiBcIllvdSBjYW4gb25seSBzZW5kIGEgdmVyaWZpY2F0aW9uIGVtYWlsIHRvIHlvdXIgb3duIGVtYWlsXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICBhd2FpdCBzZW5kVmVyaWZpY2F0aW9uRW1haWxGbihjdHgsIHNlc3Npb24udXNlcik7XG4gICAgcmV0dXJuIGN0eC5qc29uKHtcbiAgICAgIHN0YXR1czogdHJ1ZVxuICAgIH0pO1xuICB9XG4pO1xuY29uc3QgdmVyaWZ5RW1haWwgPSBjcmVhdGVBdXRoRW5kcG9pbnQoXG4gIFwiL3ZlcmlmeS1lbWFpbFwiLFxuICB7XG4gICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgIHF1ZXJ5OiB6Lm9iamVjdCh7XG4gICAgICB0b2tlbjogei5zdHJpbmcoKS5tZXRhKHtcbiAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIHRva2VuIHRvIHZlcmlmeSB0aGUgZW1haWxcIlxuICAgICAgfSksXG4gICAgICBjYWxsYmFja1VSTDogei5zdHJpbmcoKS5tZXRhKHtcbiAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIFVSTCB0byByZWRpcmVjdCB0byBhZnRlciBlbWFpbCB2ZXJpZmljYXRpb25cIlxuICAgICAgfSkub3B0aW9uYWwoKVxuICAgIH0pLFxuICAgIHVzZTogW29yaWdpbkNoZWNrKChjdHgpID0+IGN0eC5xdWVyeS5jYWxsYmFja1VSTCldLFxuICAgIG1ldGFkYXRhOiB7XG4gICAgICBvcGVuYXBpOiB7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIlZlcmlmeSB0aGUgZW1haWwgb2YgdGhlIHVzZXJcIixcbiAgICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6IFwidG9rZW5cIixcbiAgICAgICAgICAgIGluOiBcInF1ZXJ5XCIsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgdG9rZW4gdG8gdmVyaWZ5IHRoZSBlbWFpbFwiLFxuICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICBzY2hlbWE6IHtcbiAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIlxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogXCJjYWxsYmFja1VSTFwiLFxuICAgICAgICAgICAgaW46IFwicXVlcnlcIixcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlRoZSBVUkwgdG8gcmVkaXJlY3QgdG8gYWZ0ZXIgZW1haWwgdmVyaWZpY2F0aW9uXCIsXG4gICAgICAgICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgICAgICAgICBzY2hlbWE6IHtcbiAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIlxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgcmVzcG9uc2VzOiB7XG4gICAgICAgICAgXCIyMDBcIjoge1xuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICBcImFwcGxpY2F0aW9uL2pzb25cIjoge1xuICAgICAgICAgICAgICAgIHNjaGVtYToge1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJvYmplY3RcIixcbiAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwib2JqZWN0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiVXNlciBJRFwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiVXNlciBlbWFpbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJVc2VyIG5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlVzZXIgaW1hZ2UgVVJMXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBlbWFpbFZlcmlmaWVkOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYm9vbGVhblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJJbmRpY2F0ZXMgaWYgdGhlIHVzZXIgZW1haWwgaXMgdmVyaWZpZWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJVc2VyIGNyZWF0aW9uIGRhdGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJVc2VyIHVwZGF0ZSBkYXRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBcImlkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImVtYWlsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaW1hZ2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZW1haWxWZXJpZmllZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjcmVhdGVkQXRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidXBkYXRlZEF0XCJcbiAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czoge1xuICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYm9vbGVhblwiLFxuICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkluZGljYXRlcyBpZiB0aGUgZW1haWwgd2FzIHZlcmlmaWVkIHN1Y2Nlc3NmdWxseVwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICByZXF1aXJlZDogW1widXNlclwiLCBcInN0YXR1c1wiXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgYXN5bmMgKGN0eCkgPT4ge1xuICAgIGZ1bmN0aW9uIHJlZGlyZWN0T25FcnJvcihlcnJvcikge1xuICAgICAgaWYgKGN0eC5xdWVyeS5jYWxsYmFja1VSTCkge1xuICAgICAgICBpZiAoY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMLmluY2x1ZGVzKFwiP1wiKSkge1xuICAgICAgICAgIHRocm93IGN0eC5yZWRpcmVjdChgJHtjdHgucXVlcnkuY2FsbGJhY2tVUkx9JmVycm9yPSR7ZXJyb3J9YCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgY3R4LnJlZGlyZWN0KGAke2N0eC5xdWVyeS5jYWxsYmFja1VSTH0/ZXJyb3I9JHtlcnJvcn1gKTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7XG4gICAgICAgIG1lc3NhZ2U6IGVycm9yXG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgeyB0b2tlbiB9ID0gY3R4LnF1ZXJ5O1xuICAgIGxldCBqd3Q7XG4gICAgdHJ5IHtcbiAgICAgIGp3dCA9IGF3YWl0IGp3dFZlcmlmeShcbiAgICAgICAgdG9rZW4sXG4gICAgICAgIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShjdHguY29udGV4dC5zZWNyZXQpLFxuICAgICAgICB7XG4gICAgICAgICAgYWxnb3JpdGhtczogW1wiSFMyNTZcIl1cbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAoZSBpbnN0YW5jZW9mIEpXVEV4cGlyZWQpIHtcbiAgICAgICAgcmV0dXJuIHJlZGlyZWN0T25FcnJvcihcInRva2VuX2V4cGlyZWRcIik7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVkaXJlY3RPbkVycm9yKFwiaW52YWxpZF90b2tlblwiKTtcbiAgICB9XG4gICAgY29uc3Qgc2NoZW1hID0gei5vYmplY3Qoe1xuICAgICAgZW1haWw6IHouc3RyaW5nKCkuZW1haWwoKSxcbiAgICAgIHVwZGF0ZVRvOiB6LnN0cmluZygpLm9wdGlvbmFsKClcbiAgICB9KTtcbiAgICBjb25zdCBwYXJzZWQgPSBzY2hlbWEucGFyc2Uoand0LnBheWxvYWQpO1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFVzZXJCeUVtYWlsKFxuICAgICAgcGFyc2VkLmVtYWlsXG4gICAgKTtcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHJldHVybiByZWRpcmVjdE9uRXJyb3IoXCJ1c2VyX25vdF9mb3VuZFwiKTtcbiAgICB9XG4gICAgaWYgKHBhcnNlZC51cGRhdGVUbykge1xuICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb25Gcm9tQ3R4KGN0eCk7XG4gICAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgICAgaWYgKGN0eC5xdWVyeS5jYWxsYmFja1VSTCkge1xuICAgICAgICAgIHRocm93IGN0eC5yZWRpcmVjdChgJHtjdHgucXVlcnkuY2FsbGJhY2tVUkx9P2Vycm9yPXVuYXV0aG9yaXplZGApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWRpcmVjdE9uRXJyb3IoXCJ1bmF1dGhvcml6ZWRcIik7XG4gICAgICB9XG4gICAgICBpZiAoc2Vzc2lvbi51c2VyLmVtYWlsICE9PSBwYXJzZWQuZW1haWwpIHtcbiAgICAgICAgaWYgKGN0eC5xdWVyeS5jYWxsYmFja1VSTCkge1xuICAgICAgICAgIHRocm93IGN0eC5yZWRpcmVjdChgJHtjdHgucXVlcnkuY2FsbGJhY2tVUkx9P2Vycm9yPXVuYXV0aG9yaXplZGApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWRpcmVjdE9uRXJyb3IoXCJ1bmF1dGhvcml6ZWRcIik7XG4gICAgICB9XG4gICAgICBjb25zdCB1cGRhdGVkVXNlcjIgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlVXNlckJ5RW1haWwoXG4gICAgICAgIHBhcnNlZC5lbWFpbCxcbiAgICAgICAge1xuICAgICAgICAgIGVtYWlsOiBwYXJzZWQudXBkYXRlVG8sXG4gICAgICAgICAgZW1haWxWZXJpZmllZDogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgY3R4XG4gICAgICApO1xuICAgICAgY29uc3QgbmV3VG9rZW4gPSBhd2FpdCBjcmVhdGVFbWFpbFZlcmlmaWNhdGlvblRva2VuKFxuICAgICAgICBjdHguY29udGV4dC5zZWNyZXQsXG4gICAgICAgIHBhcnNlZC51cGRhdGVUb1xuICAgICAgKTtcbiAgICAgIGF3YWl0IGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LnNlbmRWZXJpZmljYXRpb25FbWFpbD8uKFxuICAgICAgICB7XG4gICAgICAgICAgdXNlcjogdXBkYXRlZFVzZXIyLFxuICAgICAgICAgIHVybDogYCR7Y3R4LmNvbnRleHQuYmFzZVVSTH0vdmVyaWZ5LWVtYWlsP3Rva2VuPSR7bmV3VG9rZW59JmNhbGxiYWNrVVJMPSR7Y3R4LnF1ZXJ5LmNhbGxiYWNrVVJMIHx8IFwiL1wifWAsXG4gICAgICAgICAgdG9rZW46IG5ld1Rva2VuXG4gICAgICAgIH0sXG4gICAgICAgIGN0eC5yZXF1ZXN0XG4gICAgICApO1xuICAgICAgYXdhaXQgc2V0U2Vzc2lvbkNvb2tpZShjdHgsIHtcbiAgICAgICAgc2Vzc2lvbjogc2Vzc2lvbi5zZXNzaW9uLFxuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgLi4uc2Vzc2lvbi51c2VyLFxuICAgICAgICAgIGVtYWlsOiBwYXJzZWQudXBkYXRlVG8sXG4gICAgICAgICAgZW1haWxWZXJpZmllZDogZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZiAoY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMKSB7XG4gICAgICAgIHRocm93IGN0eC5yZWRpcmVjdChjdHgucXVlcnkuY2FsbGJhY2tVUkwpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGN0eC5qc29uKHtcbiAgICAgICAgc3RhdHVzOiB0cnVlLFxuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgaWQ6IHVwZGF0ZWRVc2VyMi5pZCxcbiAgICAgICAgICBlbWFpbDogdXBkYXRlZFVzZXIyLmVtYWlsLFxuICAgICAgICAgIG5hbWU6IHVwZGF0ZWRVc2VyMi5uYW1lLFxuICAgICAgICAgIGltYWdlOiB1cGRhdGVkVXNlcjIuaW1hZ2UsXG4gICAgICAgICAgZW1haWxWZXJpZmllZDogdXBkYXRlZFVzZXIyLmVtYWlsVmVyaWZpZWQsXG4gICAgICAgICAgY3JlYXRlZEF0OiB1cGRhdGVkVXNlcjIuY3JlYXRlZEF0LFxuICAgICAgICAgIHVwZGF0ZWRBdDogdXBkYXRlZFVzZXIyLnVwZGF0ZWRBdFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/Lm9uRW1haWxWZXJpZmljYXRpb24pIHtcbiAgICAgIGF3YWl0IGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24ub25FbWFpbFZlcmlmaWNhdGlvbihcbiAgICAgICAgdXNlci51c2VyLFxuICAgICAgICBjdHgucmVxdWVzdFxuICAgICAgKTtcbiAgICB9XG4gICAgY29uc3QgdXBkYXRlZFVzZXIgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlVXNlckJ5RW1haWwoXG4gICAgICBwYXJzZWQuZW1haWwsXG4gICAgICB7XG4gICAgICAgIGVtYWlsVmVyaWZpZWQ6IHRydWVcbiAgICAgIH0sXG4gICAgICBjdHhcbiAgICApO1xuICAgIGlmIChjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5hZnRlckVtYWlsVmVyaWZpY2F0aW9uKSB7XG4gICAgICBhd2FpdCBjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uLmFmdGVyRW1haWxWZXJpZmljYXRpb24oXG4gICAgICAgIHVwZGF0ZWRVc2VyLFxuICAgICAgICBjdHgucmVxdWVzdFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LmF1dG9TaWduSW5BZnRlclZlcmlmaWNhdGlvbikge1xuICAgICAgY29uc3QgY3VycmVudFNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uRnJvbUN0eChjdHgpO1xuICAgICAgaWYgKCFjdXJyZW50U2Vzc2lvbiB8fCBjdXJyZW50U2Vzc2lvbi51c2VyLmVtYWlsICE9PSBwYXJzZWQuZW1haWwpIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVTZXNzaW9uKFxuICAgICAgICAgIHVzZXIudXNlci5pZCxcbiAgICAgICAgICBjdHhcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKCFzZXNzaW9uKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsIHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGNyZWF0ZSBzZXNzaW9uXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBzZXRTZXNzaW9uQ29va2llKGN0eCwge1xuICAgICAgICAgIHNlc3Npb24sXG4gICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgLi4udXNlci51c2VyLFxuICAgICAgICAgICAgZW1haWxWZXJpZmllZDogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCBzZXRTZXNzaW9uQ29va2llKGN0eCwge1xuICAgICAgICAgIHNlc3Npb246IGN1cnJlbnRTZXNzaW9uLnNlc3Npb24sXG4gICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgLi4uY3VycmVudFNlc3Npb24udXNlcixcbiAgICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMKSB7XG4gICAgICB0aHJvdyBjdHgucmVkaXJlY3QoY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMKTtcbiAgICB9XG4gICAgcmV0dXJuIGN0eC5qc29uKHtcbiAgICAgIHN0YXR1czogdHJ1ZSxcbiAgICAgIHVzZXI6IG51bGxcbiAgICB9KTtcbiAgfVxuKTtcblxuY29uc3QgSElERV9NRVRBREFUQSA9IHtcbiAgaXNBY3Rpb246IGZhbHNlXG59O1xuXG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZVN0YXRlKGMsIGxpbmspIHtcbiAgY29uc3QgY2FsbGJhY2tVUkwgPSBjLmJvZHk/LmNhbGxiYWNrVVJMIHx8IGMuY29udGV4dC5vcHRpb25zLmJhc2VVUkw7XG4gIGlmICghY2FsbGJhY2tVUkwpIHtcbiAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG4gICAgICBtZXNzYWdlOiBcImNhbGxiYWNrVVJMIGlzIHJlcXVpcmVkXCJcbiAgICB9KTtcbiAgfVxuICBjb25zdCBjb2RlVmVyaWZpZXIgPSBnZW5lcmF0ZVJhbmRvbVN0cmluZygxMjgpO1xuICBjb25zdCBzdGF0ZSA9IGdlbmVyYXRlUmFuZG9tU3RyaW5nKDMyKTtcbiAgY29uc3QgZGF0YSA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICBjYWxsYmFja1VSTCxcbiAgICBjb2RlVmVyaWZpZXIsXG4gICAgZXJyb3JVUkw6IGMuYm9keT8uZXJyb3JDYWxsYmFja1VSTCxcbiAgICBuZXdVc2VyVVJMOiBjLmJvZHk/Lm5ld1VzZXJDYWxsYmFja1VSTCxcbiAgICBsaW5rLFxuICAgIC8qKlxuICAgICAqIFRoaXMgaXMgdGhlIGFjdHVhbCBleHBpcnkgdGltZSBvZiB0aGUgc3RhdGVcbiAgICAgKi9cbiAgICBleHBpcmVzQXQ6IERhdGUubm93KCkgKyAxMCAqIDYwICogMWUzLFxuICAgIHJlcXVlc3RTaWduVXA6IGMuYm9keT8ucmVxdWVzdFNpZ25VcFxuICB9KTtcbiAgY29uc3QgZXhwaXJlc0F0ID0gLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCk7XG4gIGV4cGlyZXNBdC5zZXRNaW51dGVzKGV4cGlyZXNBdC5nZXRNaW51dGVzKCkgKyAxMCk7XG4gIGNvbnN0IHZlcmlmaWNhdGlvbiA9IGF3YWl0IGMuY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlVmVyaWZpY2F0aW9uVmFsdWUoXG4gICAge1xuICAgICAgdmFsdWU6IGRhdGEsXG4gICAgICBpZGVudGlmaWVyOiBzdGF0ZSxcbiAgICAgIGV4cGlyZXNBdFxuICAgIH0sXG4gICAgY1xuICApO1xuICBpZiAoIXZlcmlmaWNhdGlvbikge1xuICAgIGMuY29udGV4dC5sb2dnZXIuZXJyb3IoXG4gICAgICBcIlVuYWJsZSB0byBjcmVhdGUgdmVyaWZpY2F0aW9uLiBNYWtlIHN1cmUgdGhlIGRhdGFiYXNlIGFkYXB0ZXIgaXMgcHJvcGVybHkgd29ya2luZyBhbmQgdGhlcmUgaXMgYSB2ZXJpZmljYXRpb24gdGFibGUgaW4gdGhlIGRhdGFiYXNlXCJcbiAgICApO1xuICAgIHRocm93IG5ldyBBUElFcnJvcihcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLCB7XG4gICAgICBtZXNzYWdlOiBcIlVuYWJsZSB0byBjcmVhdGUgdmVyaWZpY2F0aW9uXCJcbiAgICB9KTtcbiAgfVxuICByZXR1cm4ge1xuICAgIHN0YXRlOiB2ZXJpZmljYXRpb24uaWRlbnRpZmllcixcbiAgICBjb2RlVmVyaWZpZXJcbiAgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHBhcnNlU3RhdGUoYykge1xuICBjb25zdCBzdGF0ZSA9IGMucXVlcnkuc3RhdGUgfHwgYy5ib2R5LnN0YXRlO1xuICBjb25zdCBkYXRhID0gYXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVmVyaWZpY2F0aW9uVmFsdWUoc3RhdGUpO1xuICBpZiAoIWRhdGEpIHtcbiAgICBjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiU3RhdGUgTWlzbWF0Y2guIFZlcmlmaWNhdGlvbiBub3QgZm91bmRcIiwge1xuICAgICAgc3RhdGVcbiAgICB9KTtcbiAgICBjb25zdCBlcnJvclVSTCA9IGMuY29udGV4dC5vcHRpb25zLm9uQVBJRXJyb3I/LmVycm9yVVJMIHx8IGAke2MuY29udGV4dC5iYXNlVVJMfS9lcnJvcmA7XG4gICAgdGhyb3cgYy5yZWRpcmVjdChgJHtlcnJvclVSTH0/ZXJyb3I9cGxlYXNlX3Jlc3RhcnRfdGhlX3Byb2Nlc3NgKTtcbiAgfVxuICBjb25zdCBwYXJzZWREYXRhID0gei5vYmplY3Qoe1xuICAgIGNhbGxiYWNrVVJMOiB6LnN0cmluZygpLFxuICAgIGNvZGVWZXJpZmllcjogei5zdHJpbmcoKSxcbiAgICBlcnJvclVSTDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIG5ld1VzZXJVUkw6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBleHBpcmVzQXQ6IHoubnVtYmVyKCksXG4gICAgbGluazogei5vYmplY3Qoe1xuICAgICAgZW1haWw6IHouc3RyaW5nKCksXG4gICAgICB1c2VySWQ6IHouY29lcmNlLnN0cmluZygpXG4gICAgfSkub3B0aW9uYWwoKSxcbiAgICByZXF1ZXN0U2lnblVwOiB6LmJvb2xlYW4oKS5vcHRpb25hbCgpXG4gIH0pLnBhcnNlKEpTT04ucGFyc2UoZGF0YS52YWx1ZSkpO1xuICBpZiAoIXBhcnNlZERhdGEuZXJyb3JVUkwpIHtcbiAgICBwYXJzZWREYXRhLmVycm9yVVJMID0gYCR7Yy5jb250ZXh0LmJhc2VVUkx9L2Vycm9yYDtcbiAgfVxuICBpZiAocGFyc2VkRGF0YS5leHBpcmVzQXQgPCBEYXRlLm5vdygpKSB7XG4gICAgYXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVWZXJpZmljYXRpb25WYWx1ZShkYXRhLmlkKTtcbiAgICBjb25zdCBlcnJvclVSTCA9IGMuY29udGV4dC5vcHRpb25zLm9uQVBJRXJyb3I/LmVycm9yVVJMIHx8IGAke2MuY29udGV4dC5iYXNlVVJMfS9lcnJvcmA7XG4gICAgdGhyb3cgYy5yZWRpcmVjdChgJHtlcnJvclVSTH0/ZXJyb3I9cGxlYXNlX3Jlc3RhcnRfdGhlX3Byb2Nlc3NgKTtcbiAgfVxuICBhd2FpdCBjLmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVZlcmlmaWNhdGlvblZhbHVlKGRhdGEuaWQpO1xuICByZXR1cm4gcGFyc2VkRGF0YTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVDb2RlQ2hhbGxlbmdlKGNvZGVWZXJpZmllcikge1xuICBjb25zdCBjb2RlQ2hhbGxlbmdlQnl0ZXMgPSBhd2FpdCBjcmVhdGVIYXNoKFwiU0hBLTI1NlwiKS5kaWdlc3QoY29kZVZlcmlmaWVyKTtcbiAgcmV0dXJuIGJhc2U2NFVybC5lbmNvZGUobmV3IFVpbnQ4QXJyYXkoY29kZUNoYWxsZW5nZUJ5dGVzKSwge1xuICAgIHBhZGRpbmc6IGZhbHNlXG4gIH0pO1xufVxuZnVuY3Rpb24gZ2V0T0F1dGgyVG9rZW5zKGRhdGEpIHtcbiAgcmV0dXJuIHtcbiAgICB0b2tlblR5cGU6IGRhdGEudG9rZW5fdHlwZSxcbiAgICBhY2Nlc3NUb2tlbjogZGF0YS5hY2Nlc3NfdG9rZW4sXG4gICAgcmVmcmVzaFRva2VuOiBkYXRhLnJlZnJlc2hfdG9rZW4sXG4gICAgYWNjZXNzVG9rZW5FeHBpcmVzQXQ6IGRhdGEuZXhwaXJlc19pbiA/IGdldERhdGUoZGF0YS5leHBpcmVzX2luLCBcInNlY1wiKSA6IHZvaWQgMCxcbiAgICByZWZyZXNoVG9rZW5FeHBpcmVzQXQ6IGRhdGEucmVmcmVzaF90b2tlbl9leHBpcmVzX2luID8gZ2V0RGF0ZShkYXRhLnJlZnJlc2hfdG9rZW5fZXhwaXJlc19pbiwgXCJzZWNcIikgOiB2b2lkIDAsXG4gICAgc2NvcGVzOiBkYXRhPy5zY29wZSA/IHR5cGVvZiBkYXRhLnNjb3BlID09PSBcInN0cmluZ1wiID8gZGF0YS5zY29wZS5zcGxpdChcIiBcIikgOiBkYXRhLnNjb3BlIDogW10sXG4gICAgaWRUb2tlbjogZGF0YS5pZF90b2tlblxuICB9O1xufVxuY29uc3QgZW5jb2RlT0F1dGhQYXJhbWV0ZXIgPSAodmFsdWUpID0+IGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkucmVwbGFjZSgvJTIwL2csIFwiK1wiKTtcbmZ1bmN0aW9uIGRlY3J5cHRPQXV0aFRva2VuKHRva2VuLCBjdHgpIHtcbiAgaWYgKCF0b2tlbikgcmV0dXJuIHRva2VuO1xuICBpZiAoY3R4Lm9wdGlvbnMuYWNjb3VudD8uZW5jcnlwdE9BdXRoVG9rZW5zKSB7XG4gICAgcmV0dXJuIHN5bW1ldHJpY0RlY3J5cHQoe1xuICAgICAga2V5OiBjdHguc2VjcmV0LFxuICAgICAgZGF0YTogdG9rZW5cbiAgICB9KTtcbiAgfVxuICByZXR1cm4gdG9rZW47XG59XG5mdW5jdGlvbiBzZXRUb2tlblV0aWwodG9rZW4sIGN0eCkge1xuICBpZiAoY3R4Lm9wdGlvbnMuYWNjb3VudD8uZW5jcnlwdE9BdXRoVG9rZW5zICYmIHRva2VuKSB7XG4gICAgcmV0dXJuIHN5bW1ldHJpY0VuY3J5cHQoe1xuICAgICAga2V5OiBjdHguc2VjcmV0LFxuICAgICAgZGF0YTogdG9rZW5cbiAgICB9KTtcbiAgfVxuICByZXR1cm4gdG9rZW47XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZU9BdXRoVXNlckluZm8oYywge1xuICB1c2VySW5mbyxcbiAgYWNjb3VudCxcbiAgY2FsbGJhY2tVUkwsXG4gIGRpc2FibGVTaWduVXAsXG4gIG92ZXJyaWRlVXNlckluZm9cbn0pIHtcbiAgY29uc3QgZGJVc2VyID0gYXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kT0F1dGhVc2VyKFxuICAgIHVzZXJJbmZvLmVtYWlsLnRvTG93ZXJDYXNlKCksXG4gICAgYWNjb3VudC5hY2NvdW50SWQsXG4gICAgYWNjb3VudC5wcm92aWRlcklkXG4gICkuY2F0Y2goKGUpID0+IHtcbiAgICBsb2dnZXIuZXJyb3IoXG4gICAgICBcIkJldHRlciBhdXRoIHdhcyB1bmFibGUgdG8gcXVlcnkgeW91ciBkYXRhYmFzZS5cXG5FcnJvcjogXCIsXG4gICAgICBlXG4gICAgKTtcbiAgICBjb25zdCBlcnJvclVSTCA9IGMuY29udGV4dC5vcHRpb25zLm9uQVBJRXJyb3I/LmVycm9yVVJMIHx8IGAke2MuY29udGV4dC5iYXNlVVJMfS9lcnJvcmA7XG4gICAgdGhyb3cgYy5yZWRpcmVjdChgJHtlcnJvclVSTH0/ZXJyb3I9aW50ZXJuYWxfc2VydmVyX2Vycm9yYCk7XG4gIH0pO1xuICBsZXQgdXNlciA9IGRiVXNlcj8udXNlcjtcbiAgbGV0IGlzUmVnaXN0ZXIgPSAhdXNlcjtcbiAgaWYgKGRiVXNlcikge1xuICAgIGNvbnN0IGhhc0JlZW5MaW5rZWQgPSBkYlVzZXIuYWNjb3VudHMuZmluZChcbiAgICAgIChhKSA9PiBhLnByb3ZpZGVySWQgPT09IGFjY291bnQucHJvdmlkZXJJZCAmJiBhLmFjY291bnRJZCA9PT0gYWNjb3VudC5hY2NvdW50SWRcbiAgICApO1xuICAgIGlmICghaGFzQmVlbkxpbmtlZCkge1xuICAgICAgY29uc3QgdHJ1c3RlZFByb3ZpZGVycyA9IGMuY29udGV4dC5vcHRpb25zLmFjY291bnQ/LmFjY291bnRMaW5raW5nPy50cnVzdGVkUHJvdmlkZXJzO1xuICAgICAgY29uc3QgaXNUcnVzdGVkUHJvdmlkZXIgPSB0cnVzdGVkUHJvdmlkZXJzPy5pbmNsdWRlcyhcbiAgICAgICAgYWNjb3VudC5wcm92aWRlcklkXG4gICAgICApO1xuICAgICAgaWYgKCFpc1RydXN0ZWRQcm92aWRlciAmJiAhdXNlckluZm8uZW1haWxWZXJpZmllZCB8fCBjLmNvbnRleHQub3B0aW9ucy5hY2NvdW50Py5hY2NvdW50TGlua2luZz8uZW5hYmxlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgaWYgKGlzRGV2ZWxvcG1lbnQpIHtcbiAgICAgICAgICBsb2dnZXIud2FybihcbiAgICAgICAgICAgIGBVc2VyIGFscmVhZHkgZXhpc3QgYnV0IGFjY291bnQgaXNuJ3QgbGlua2VkIHRvICR7YWNjb3VudC5wcm92aWRlcklkfS4gVG8gcmVhZCBtb3JlIGFib3V0IGhvdyBhY2NvdW50IGxpbmtpbmcgd29ya3MgaW4gQmV0dGVyIEF1dGggc2VlIGh0dHBzOi8vd3d3LmJldHRlci1hdXRoLmNvbS9kb2NzL2NvbmNlcHRzL3VzZXJzLWFjY291bnRzI2FjY291bnQtbGlua2luZy5gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGVycm9yOiBcImFjY291bnQgbm90IGxpbmtlZFwiLFxuICAgICAgICAgIGRhdGE6IG51bGxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGMuY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIubGlua0FjY291bnQoXG4gICAgICAgICAge1xuICAgICAgICAgICAgcHJvdmlkZXJJZDogYWNjb3VudC5wcm92aWRlcklkLFxuICAgICAgICAgICAgYWNjb3VudElkOiB1c2VySW5mby5pZC50b1N0cmluZygpLFxuICAgICAgICAgICAgdXNlcklkOiBkYlVzZXIudXNlci5pZCxcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwoYWNjb3VudC5hY2Nlc3NUb2tlbiwgYy5jb250ZXh0KSxcbiAgICAgICAgICAgIHJlZnJlc2hUb2tlbjogYXdhaXQgc2V0VG9rZW5VdGlsKGFjY291bnQucmVmcmVzaFRva2VuLCBjLmNvbnRleHQpLFxuICAgICAgICAgICAgaWRUb2tlbjogYWNjb3VudC5pZFRva2VuLFxuICAgICAgICAgICAgYWNjZXNzVG9rZW5FeHBpcmVzQXQ6IGFjY291bnQuYWNjZXNzVG9rZW5FeHBpcmVzQXQsXG4gICAgICAgICAgICByZWZyZXNoVG9rZW5FeHBpcmVzQXQ6IGFjY291bnQucmVmcmVzaFRva2VuRXhwaXJlc0F0LFxuICAgICAgICAgICAgc2NvcGU6IGFjY291bnQuc2NvcGVcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNcbiAgICAgICAgKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFwiVW5hYmxlIHRvIGxpbmsgYWNjb3VudFwiLCBlKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBlcnJvcjogXCJ1bmFibGUgdG8gbGluayBhY2NvdW50XCIsXG4gICAgICAgICAgZGF0YTogbnVsbFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoYy5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8udXBkYXRlQWNjb3VudE9uU2lnbkluICE9PSBmYWxzZSkge1xuICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0gT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgICAgIE9iamVjdC5lbnRyaWVzKHtcbiAgICAgICAgICAgIGlkVG9rZW46IGFjY291bnQuaWRUb2tlbixcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwoYWNjb3VudC5hY2Nlc3NUb2tlbiwgYy5jb250ZXh0KSxcbiAgICAgICAgICAgIHJlZnJlc2hUb2tlbjogYXdhaXQgc2V0VG9rZW5VdGlsKGFjY291bnQucmVmcmVzaFRva2VuLCBjLmNvbnRleHQpLFxuICAgICAgICAgICAgYWNjZXNzVG9rZW5FeHBpcmVzQXQ6IGFjY291bnQuYWNjZXNzVG9rZW5FeHBpcmVzQXQsXG4gICAgICAgICAgICByZWZyZXNoVG9rZW5FeHBpcmVzQXQ6IGFjY291bnQucmVmcmVzaFRva2VuRXhwaXJlc0F0LFxuICAgICAgICAgICAgc2NvcGU6IGFjY291bnQuc2NvcGVcbiAgICAgICAgICB9KS5maWx0ZXIoKFtfLCB2YWx1ZV0pID0+IHZhbHVlICE9PSB2b2lkIDApXG4gICAgICAgICk7XG4gICAgICAgIGlmIChPYmplY3Qua2V5cyh1cGRhdGVEYXRhKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgYXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci51cGRhdGVBY2NvdW50KFxuICAgICAgICAgICAgaGFzQmVlbkxpbmtlZC5pZCxcbiAgICAgICAgICAgIHVwZGF0ZURhdGEsXG4gICAgICAgICAgICBjXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAob3ZlcnJpZGVVc2VySW5mbykge1xuICAgICAgY29uc3QgeyBpZDogXywgLi4ucmVzdFVzZXJJbmZvIH0gPSB1c2VySW5mbztcbiAgICAgIGF3YWl0IGMuY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlVXNlcihkYlVzZXIudXNlci5pZCwge1xuICAgICAgICAuLi5yZXN0VXNlckluZm8sXG4gICAgICAgIGVtYWlsOiB1c2VySW5mby5lbWFpbC50b0xvd2VyQ2FzZSgpLFxuICAgICAgICBlbWFpbFZlcmlmaWVkOiB1c2VySW5mby5lbWFpbC50b0xvd2VyQ2FzZSgpID09PSBkYlVzZXIudXNlci5lbWFpbCA/IGRiVXNlci51c2VyLmVtYWlsVmVyaWZpZWQgfHwgdXNlckluZm8uZW1haWxWZXJpZmllZCA6IHVzZXJJbmZvLmVtYWlsVmVyaWZpZWRcbiAgICAgIH0pO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoZGlzYWJsZVNpZ25VcCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZXJyb3I6IFwic2lnbnVwIGRpc2FibGVkXCIsXG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIGlzUmVnaXN0ZXI6IGZhbHNlXG4gICAgICB9O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBpZDogXywgLi4ucmVzdFVzZXJJbmZvIH0gPSB1c2VySW5mbztcbiAgICAgIHVzZXIgPSBhd2FpdCBjLmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZU9BdXRoVXNlcihcbiAgICAgICAge1xuICAgICAgICAgIC4uLnJlc3RVc2VySW5mbyxcbiAgICAgICAgICBlbWFpbDogdXNlckluZm8uZW1haWwudG9Mb3dlckNhc2UoKVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgYWNjZXNzVG9rZW46IGF3YWl0IHNldFRva2VuVXRpbChhY2NvdW50LmFjY2Vzc1Rva2VuLCBjLmNvbnRleHQpLFxuICAgICAgICAgIHJlZnJlc2hUb2tlbjogYXdhaXQgc2V0VG9rZW5VdGlsKGFjY291bnQucmVmcmVzaFRva2VuLCBjLmNvbnRleHQpLFxuICAgICAgICAgIGlkVG9rZW46IGFjY291bnQuaWRUb2tlbixcbiAgICAgICAgICBhY2Nlc3NUb2tlbkV4cGlyZXNBdDogYWNjb3VudC5hY2Nlc3NUb2tlbkV4cGlyZXNBdCxcbiAgICAgICAgICByZWZyZXNoVG9rZW5FeHBpcmVzQXQ6IGFjY291bnQucmVmcmVzaFRva2VuRXhwaXJlc0F0LFxuICAgICAgICAgIHNjb3BlOiBhY2NvdW50LnNjb3BlLFxuICAgICAgICAgIHByb3ZpZGVySWQ6IGFjY291bnQucHJvdmlkZXJJZCxcbiAgICAgICAgICBhY2NvdW50SWQ6IHVzZXJJbmZvLmlkLnRvU3RyaW5nKClcbiAgICAgICAgfSxcbiAgICAgICAgY1xuICAgICAgKS50aGVuKChyZXMpID0+IHJlcz8udXNlcik7XG4gICAgICBpZiAoIXVzZXJJbmZvLmVtYWlsVmVyaWZpZWQgJiYgdXNlciAmJiBjLmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uc2VuZE9uU2lnblVwKSB7XG4gICAgICAgIGNvbnN0IHRva2VuID0gYXdhaXQgY3JlYXRlRW1haWxWZXJpZmljYXRpb25Ub2tlbihcbiAgICAgICAgICBjLmNvbnRleHQuc2VjcmV0LFxuICAgICAgICAgIHVzZXIuZW1haWwsXG4gICAgICAgICAgdm9pZCAwLFxuICAgICAgICAgIGMuY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5leHBpcmVzSW5cbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgdXJsID0gYCR7Yy5jb250ZXh0LmJhc2VVUkx9L3ZlcmlmeS1lbWFpbD90b2tlbj0ke3Rva2VufSZjYWxsYmFja1VSTD0ke2NhbGxiYWNrVVJMfWA7XG4gICAgICAgIGF3YWl0IGMuY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5zZW5kVmVyaWZpY2F0aW9uRW1haWw/LihcbiAgICAgICAgICB7XG4gICAgICAgICAgICB1c2VyLFxuICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgdG9rZW5cbiAgICAgICAgICB9LFxuICAgICAgICAgIGMucmVxdWVzdFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihlKTtcbiAgICAgIGlmIChlIGluc3RhbmNlb2YgQVBJRXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBlcnJvcjogZS5tZXNzYWdlLFxuICAgICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgICAgaXNSZWdpc3RlcjogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGVycm9yOiBcInVuYWJsZSB0byBjcmVhdGUgdXNlclwiLFxuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBpc1JlZ2lzdGVyOiBmYWxzZVxuICAgICAgfTtcbiAgICB9XG4gIH1cbiAgaWYgKCF1c2VyKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiBcInVuYWJsZSB0byBjcmVhdGUgdXNlclwiLFxuICAgICAgZGF0YTogbnVsbCxcbiAgICAgIGlzUmVnaXN0ZXI6IGZhbHNlXG4gICAgfTtcbiAgfVxuICBjb25zdCBzZXNzaW9uID0gYXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVTZXNzaW9uKHVzZXIuaWQsIGMpO1xuICBpZiAoIXNlc3Npb24pIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6IFwidW5hYmxlIHRvIGNyZWF0ZSBzZXNzaW9uXCIsXG4gICAgICBkYXRhOiBudWxsLFxuICAgICAgaXNSZWdpc3RlcjogZmFsc2VcbiAgICB9O1xuICB9XG4gIHJldHVybiB7XG4gICAgZGF0YToge1xuICAgICAgc2Vzc2lvbixcbiAgICAgIHVzZXJcbiAgICB9LFxuICAgIGVycm9yOiBudWxsLFxuICAgIGlzUmVnaXN0ZXJcbiAgfTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG4gIGlkLFxuICBvcHRpb25zLFxuICBhdXRob3JpemF0aW9uRW5kcG9pbnQsXG4gIHN0YXRlLFxuICBjb2RlVmVyaWZpZXIsXG4gIHNjb3BlcyxcbiAgY2xhaW1zLFxuICByZWRpcmVjdFVSSSxcbiAgZHVyYXRpb24sXG4gIHByb21wdCxcbiAgYWNjZXNzVHlwZSxcbiAgcmVzcG9uc2VUeXBlLFxuICBkaXNwbGF5LFxuICBsb2dpbkhpbnQsXG4gIGhkLFxuICByZXNwb25zZU1vZGUsXG4gIGFkZGl0aW9uYWxQYXJhbXMsXG4gIHNjb3BlSm9pbmVyXG59KSB7XG4gIGNvbnN0IHVybCA9IG5ldyBVUkwoYXV0aG9yaXphdGlvbkVuZHBvaW50KTtcbiAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJyZXNwb25zZV90eXBlXCIsIHJlc3BvbnNlVHlwZSB8fCBcImNvZGVcIik7XG4gIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwiY2xpZW50X2lkXCIsIG9wdGlvbnMuY2xpZW50SWQpO1xuICB1cmwuc2VhcmNoUGFyYW1zLnNldChcInN0YXRlXCIsIHN0YXRlKTtcbiAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJzY29wZVwiLCBzY29wZXMuam9pbihzY29wZUpvaW5lciB8fCBcIiBcIikpO1xuICB1cmwuc2VhcmNoUGFyYW1zLnNldChcInJlZGlyZWN0X3VyaVwiLCBvcHRpb25zLnJlZGlyZWN0VVJJIHx8IHJlZGlyZWN0VVJJKTtcbiAgZHVyYXRpb24gJiYgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJkdXJhdGlvblwiLCBkdXJhdGlvbik7XG4gIGRpc3BsYXkgJiYgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJkaXNwbGF5XCIsIGRpc3BsYXkpO1xuICBsb2dpbkhpbnQgJiYgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJsb2dpbl9oaW50XCIsIGxvZ2luSGludCk7XG4gIHByb21wdCAmJiB1cmwuc2VhcmNoUGFyYW1zLnNldChcInByb21wdFwiLCBwcm9tcHQpO1xuICBoZCAmJiB1cmwuc2VhcmNoUGFyYW1zLnNldChcImhkXCIsIGhkKTtcbiAgYWNjZXNzVHlwZSAmJiB1cmwuc2VhcmNoUGFyYW1zLnNldChcImFjY2Vzc190eXBlXCIsIGFjY2Vzc1R5cGUpO1xuICByZXNwb25zZU1vZGUgJiYgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJyZXNwb25zZV9tb2RlXCIsIHJlc3BvbnNlTW9kZSk7XG4gIGlmIChjb2RlVmVyaWZpZXIpIHtcbiAgICBjb25zdCBjb2RlQ2hhbGxlbmdlID0gYXdhaXQgZ2VuZXJhdGVDb2RlQ2hhbGxlbmdlKGNvZGVWZXJpZmllcik7XG4gICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJjb2RlX2NoYWxsZW5nZV9tZXRob2RcIiwgXCJTMjU2XCIpO1xuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwiY29kZV9jaGFsbGVuZ2VcIiwgY29kZUNoYWxsZW5nZSk7XG4gIH1cbiAgaWYgKGNsYWltcykge1xuICAgIGNvbnN0IGNsYWltc09iaiA9IGNsYWltcy5yZWR1Y2UoXG4gICAgICAoYWNjLCBjbGFpbSkgPT4ge1xuICAgICAgICBhY2NbY2xhaW1dID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgIH0sXG4gICAgICB7fVxuICAgICk7XG4gICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXG4gICAgICBcImNsYWltc1wiLFxuICAgICAgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBpZF90b2tlbjogeyBlbWFpbDogbnVsbCwgZW1haWxfdmVyaWZpZWQ6IG51bGwsIC4uLmNsYWltc09iaiB9XG4gICAgICB9KVxuICAgICk7XG4gIH1cbiAgaWYgKGFkZGl0aW9uYWxQYXJhbXMpIHtcbiAgICBPYmplY3QuZW50cmllcyhhZGRpdGlvbmFsUGFyYW1zKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KGtleSwgdmFsdWUpO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiB1cmw7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUF1dGhvcml6YXRpb25Db2RlUmVxdWVzdCh7XG4gIGNvZGUsXG4gIGNvZGVWZXJpZmllcixcbiAgcmVkaXJlY3RVUkksXG4gIG9wdGlvbnMsXG4gIGF1dGhlbnRpY2F0aW9uLFxuICBkZXZpY2VJZCxcbiAgaGVhZGVycyxcbiAgYWRkaXRpb25hbFBhcmFtcyA9IHt9LFxuICByZXNvdXJjZVxufSkge1xuICBjb25zdCBib2R5ID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuICBjb25zdCByZXF1ZXN0SGVhZGVycyA9IHtcbiAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLFxuICAgIGFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgXCJ1c2VyLWFnZW50XCI6IFwiYmV0dGVyLWF1dGhcIixcbiAgICAuLi5oZWFkZXJzXG4gIH07XG4gIGJvZHkuc2V0KFwiZ3JhbnRfdHlwZVwiLCBcImF1dGhvcml6YXRpb25fY29kZVwiKTtcbiAgYm9keS5zZXQoXCJjb2RlXCIsIGNvZGUpO1xuICBjb2RlVmVyaWZpZXIgJiYgYm9keS5zZXQoXCJjb2RlX3ZlcmlmaWVyXCIsIGNvZGVWZXJpZmllcik7XG4gIG9wdGlvbnMuY2xpZW50S2V5ICYmIGJvZHkuc2V0KFwiY2xpZW50X2tleVwiLCBvcHRpb25zLmNsaWVudEtleSk7XG4gIGRldmljZUlkICYmIGJvZHkuc2V0KFwiZGV2aWNlX2lkXCIsIGRldmljZUlkKTtcbiAgYm9keS5zZXQoXCJyZWRpcmVjdF91cmlcIiwgb3B0aW9ucy5yZWRpcmVjdFVSSSB8fCByZWRpcmVjdFVSSSk7XG4gIGlmIChyZXNvdXJjZSkge1xuICAgIGlmICh0eXBlb2YgcmVzb3VyY2UgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGJvZHkuYXBwZW5kKFwicmVzb3VyY2VcIiwgcmVzb3VyY2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGNvbnN0IF9yZXNvdXJjZSBvZiByZXNvdXJjZSkge1xuICAgICAgICBib2R5LmFwcGVuZChcInJlc291cmNlXCIsIF9yZXNvdXJjZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmIChhdXRoZW50aWNhdGlvbiA9PT0gXCJiYXNpY1wiKSB7XG4gICAgY29uc3QgZW5jb2RlZENyZWRlbnRpYWxzID0gYmFzZTY0LmVuY29kZShcbiAgICAgIGAke29wdGlvbnMuY2xpZW50SWR9OiR7b3B0aW9ucy5jbGllbnRTZWNyZXQgPz8gXCJcIn1gXG4gICAgKTtcbiAgICByZXF1ZXN0SGVhZGVyc1tcImF1dGhvcml6YXRpb25cIl0gPSBgQmFzaWMgJHtlbmNvZGVkQ3JlZGVudGlhbHN9YDtcbiAgfSBlbHNlIHtcbiAgICBvcHRpb25zLmNsaWVudElkICYmIGJvZHkuc2V0KFwiY2xpZW50X2lkXCIsIG9wdGlvbnMuY2xpZW50SWQpO1xuICAgIGlmIChvcHRpb25zLmNsaWVudFNlY3JldCkge1xuICAgICAgYm9keS5zZXQoXCJjbGllbnRfc2VjcmV0XCIsIG9wdGlvbnMuY2xpZW50U2VjcmV0KTtcbiAgICB9XG4gIH1cbiAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoYWRkaXRpb25hbFBhcmFtcykpIHtcbiAgICBpZiAoIWJvZHkuaGFzKGtleSkpIGJvZHkuYXBwZW5kKGtleSwgdmFsdWUpO1xuICB9XG4gIHJldHVybiB7XG4gICAgYm9keSxcbiAgICBoZWFkZXJzOiByZXF1ZXN0SGVhZGVyc1xuICB9O1xufVxuYXN5bmMgZnVuY3Rpb24gdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG4gIGNvZGUsXG4gIGNvZGVWZXJpZmllcixcbiAgcmVkaXJlY3RVUkksXG4gIG9wdGlvbnMsXG4gIHRva2VuRW5kcG9pbnQsXG4gIGF1dGhlbnRpY2F0aW9uLFxuICBkZXZpY2VJZCxcbiAgaGVhZGVycyxcbiAgYWRkaXRpb25hbFBhcmFtcyA9IHt9LFxuICByZXNvdXJjZVxufSkge1xuICBjb25zdCB7IGJvZHksIGhlYWRlcnM6IHJlcXVlc3RIZWFkZXJzIH0gPSBjcmVhdGVBdXRob3JpemF0aW9uQ29kZVJlcXVlc3Qoe1xuICAgIGNvZGUsXG4gICAgY29kZVZlcmlmaWVyLFxuICAgIHJlZGlyZWN0VVJJLFxuICAgIG9wdGlvbnMsXG4gICAgYXV0aGVudGljYXRpb24sXG4gICAgZGV2aWNlSWQsXG4gICAgaGVhZGVycyxcbiAgICBhZGRpdGlvbmFsUGFyYW1zLFxuICAgIHJlc291cmNlXG4gIH0pO1xuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaCh0b2tlbkVuZHBvaW50LCB7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICBib2R5LFxuICAgIGhlYWRlcnM6IHJlcXVlc3RIZWFkZXJzXG4gIH0pO1xuICBpZiAoZXJyb3IpIHtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxuICBjb25zdCB0b2tlbnMgPSBnZXRPQXV0aDJUb2tlbnMoZGF0YSk7XG4gIHJldHVybiB0b2tlbnM7XG59XG5hc3luYyBmdW5jdGlvbiB2YWxpZGF0ZVRva2VuKHRva2VuLCBqd2tzRW5kcG9pbnQpIHtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgYmV0dGVyRmV0Y2goandrc0VuZHBvaW50LCB7XG4gICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgIGFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICBcInVzZXItYWdlbnRcIjogXCJiZXR0ZXItYXV0aFwiXG4gICAgfVxuICB9KTtcbiAgaWYgKGVycm9yKSB7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbiAgY29uc3Qga2V5cyA9IGRhdGFbXCJrZXlzXCJdO1xuICBjb25zdCBoZWFkZXIgPSBKU09OLnBhcnNlKGF0b2IodG9rZW4uc3BsaXQoXCIuXCIpWzBdKSk7XG4gIGNvbnN0IGtleSA9IGtleXMuZmluZCgoa2V5MikgPT4ga2V5Mi5raWQgPT09IGhlYWRlci5raWQpO1xuICBpZiAoIWtleSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIktleSBub3QgZm91bmRcIik7XG4gIH1cbiAgY29uc3QgdmVyaWZpZWQgPSBhd2FpdCBqd3RWZXJpZnkodG9rZW4sIGtleSk7XG4gIHJldHVybiB2ZXJpZmllZDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlUmVmcmVzaEFjY2Vzc1Rva2VuUmVxdWVzdCh7XG4gIHJlZnJlc2hUb2tlbixcbiAgb3B0aW9ucyxcbiAgYXV0aGVudGljYXRpb24sXG4gIGV4dHJhUGFyYW1zLFxuICByZXNvdXJjZVxufSkge1xuICBjb25zdCBib2R5ID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuICBjb25zdCBoZWFkZXJzID0ge1xuICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIsXG4gICAgYWNjZXB0OiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICB9O1xuICBib2R5LnNldChcImdyYW50X3R5cGVcIiwgXCJyZWZyZXNoX3Rva2VuXCIpO1xuICBib2R5LnNldChcInJlZnJlc2hfdG9rZW5cIiwgcmVmcmVzaFRva2VuKTtcbiAgaWYgKGF1dGhlbnRpY2F0aW9uID09PSBcImJhc2ljXCIpIHtcbiAgICBpZiAob3B0aW9ucy5jbGllbnRJZCkge1xuICAgICAgaGVhZGVyc1tcImF1dGhvcml6YXRpb25cIl0gPSBcIkJhc2ljIFwiICsgYmFzZTY0LmVuY29kZShgJHtvcHRpb25zLmNsaWVudElkfToke29wdGlvbnMuY2xpZW50U2VjcmV0ID8/IFwiXCJ9YCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhlYWRlcnNbXCJhdXRob3JpemF0aW9uXCJdID0gXCJCYXNpYyBcIiArIGJhc2U2NC5lbmNvZGUoYDoke29wdGlvbnMuY2xpZW50U2VjcmV0ID8/IFwiXCJ9YCk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIG9wdGlvbnMuY2xpZW50SWQgJiYgYm9keS5zZXQoXCJjbGllbnRfaWRcIiwgb3B0aW9ucy5jbGllbnRJZCk7XG4gICAgaWYgKG9wdGlvbnMuY2xpZW50U2VjcmV0KSB7XG4gICAgICBib2R5LnNldChcImNsaWVudF9zZWNyZXRcIiwgb3B0aW9ucy5jbGllbnRTZWNyZXQpO1xuICAgIH1cbiAgfVxuICBpZiAocmVzb3VyY2UpIHtcbiAgICBpZiAodHlwZW9mIHJlc291cmNlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBib2R5LmFwcGVuZChcInJlc291cmNlXCIsIHJlc291cmNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChjb25zdCBfcmVzb3VyY2Ugb2YgcmVzb3VyY2UpIHtcbiAgICAgICAgYm9keS5hcHBlbmQoXCJyZXNvdXJjZVwiLCBfcmVzb3VyY2UpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAoZXh0cmFQYXJhbXMpIHtcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhleHRyYVBhcmFtcykpIHtcbiAgICAgIGJvZHkuc2V0KGtleSwgdmFsdWUpO1xuICAgIH1cbiAgfVxuICByZXR1cm4ge1xuICAgIGJvZHksXG4gICAgaGVhZGVyc1xuICB9O1xufVxuYXN5bmMgZnVuY3Rpb24gcmVmcmVzaEFjY2Vzc1Rva2VuKHtcbiAgcmVmcmVzaFRva2VuLFxuICBvcHRpb25zLFxuICB0b2tlbkVuZHBvaW50LFxuICBhdXRoZW50aWNhdGlvbixcbiAgZXh0cmFQYXJhbXNcbn0pIHtcbiAgY29uc3QgeyBib2R5LCBoZWFkZXJzIH0gPSBjcmVhdGVSZWZyZXNoQWNjZXNzVG9rZW5SZXF1ZXN0KHtcbiAgICByZWZyZXNoVG9rZW4sXG4gICAgb3B0aW9ucyxcbiAgICBhdXRoZW50aWNhdGlvbixcbiAgICBleHRyYVBhcmFtc1xuICB9KTtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgYmV0dGVyRmV0Y2godG9rZW5FbmRwb2ludCwge1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgYm9keSxcbiAgICBoZWFkZXJzXG4gIH0pO1xuICBpZiAoZXJyb3IpIHtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxuICBjb25zdCB0b2tlbnMgPSB7XG4gICAgYWNjZXNzVG9rZW46IGRhdGEuYWNjZXNzX3Rva2VuLFxuICAgIHJlZnJlc2hUb2tlbjogZGF0YS5yZWZyZXNoX3Rva2VuLFxuICAgIHRva2VuVHlwZTogZGF0YS50b2tlbl90eXBlLFxuICAgIHNjb3BlczogZGF0YS5zY29wZT8uc3BsaXQoXCIgXCIpLFxuICAgIGlkVG9rZW46IGRhdGEuaWRfdG9rZW5cbiAgfTtcbiAgaWYgKGRhdGEuZXhwaXJlc19pbikge1xuICAgIGNvbnN0IG5vdyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpO1xuICAgIHRva2Vucy5hY2Nlc3NUb2tlbkV4cGlyZXNBdCA9IG5ldyBEYXRlKFxuICAgICAgbm93LmdldFRpbWUoKSArIGRhdGEuZXhwaXJlc19pbiAqIDFlM1xuICAgICk7XG4gIH1cbiAgcmV0dXJuIHRva2Vucztcbn1cblxuY29uc3QgYXBwbGUgPSAob3B0aW9ucykgPT4ge1xuICBjb25zdCB0b2tlbkVuZHBvaW50ID0gXCJodHRwczovL2FwcGxlaWQuYXBwbGUuY29tL2F1dGgvdG9rZW5cIjtcbiAgcmV0dXJuIHtcbiAgICBpZDogXCJhcHBsZVwiLFxuICAgIG5hbWU6IFwiQXBwbGVcIixcbiAgICBhc3luYyBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHsgc3RhdGUsIHNjb3BlcywgcmVkaXJlY3RVUkkgfSkge1xuICAgICAgY29uc3QgX3Njb3BlID0gb3B0aW9ucy5kaXNhYmxlRGVmYXVsdFNjb3BlID8gW10gOiBbXCJlbWFpbFwiLCBcIm5hbWVcIl07XG4gICAgICBvcHRpb25zLnNjb3BlICYmIF9zY29wZS5wdXNoKC4uLm9wdGlvbnMuc2NvcGUpO1xuICAgICAgc2NvcGVzICYmIF9zY29wZS5wdXNoKC4uLnNjb3Blcyk7XG4gICAgICBjb25zdCB1cmwgPSBhd2FpdCBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHtcbiAgICAgICAgaWQ6IFwiYXBwbGVcIixcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgYXV0aG9yaXphdGlvbkVuZHBvaW50OiBcImh0dHBzOi8vYXBwbGVpZC5hcHBsZS5jb20vYXV0aC9hdXRob3JpemVcIixcbiAgICAgICAgc2NvcGVzOiBfc2NvcGUsXG4gICAgICAgIHN0YXRlLFxuICAgICAgICByZWRpcmVjdFVSSSxcbiAgICAgICAgcmVzcG9uc2VNb2RlOiBcImZvcm1fcG9zdFwiLFxuICAgICAgICByZXNwb25zZVR5cGU6IFwiY29kZSBpZF90b2tlblwiXG4gICAgICB9KTtcbiAgICAgIHJldHVybiB1cmw7XG4gICAgfSxcbiAgICB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlOiBhc3luYyAoeyBjb2RlLCBjb2RlVmVyaWZpZXIsIHJlZGlyZWN0VVJJIH0pID0+IHtcbiAgICAgIHJldHVybiB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlKHtcbiAgICAgICAgY29kZSxcbiAgICAgICAgY29kZVZlcmlmaWVyLFxuICAgICAgICByZWRpcmVjdFVSSSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgdG9rZW5FbmRwb2ludFxuICAgICAgfSk7XG4gICAgfSxcbiAgICBhc3luYyB2ZXJpZnlJZFRva2VuKHRva2VuLCBub25jZSkge1xuICAgICAgaWYgKG9wdGlvbnMuZGlzYWJsZUlkVG9rZW5TaWduSW4pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMudmVyaWZ5SWRUb2tlbikge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy52ZXJpZnlJZFRva2VuKHRva2VuLCBub25jZSk7XG4gICAgICB9XG4gICAgICBjb25zdCBkZWNvZGVkSGVhZGVyID0gZGVjb2RlUHJvdGVjdGVkSGVhZGVyKHRva2VuKTtcbiAgICAgIGNvbnN0IHsga2lkLCBhbGc6IGp3dEFsZyB9ID0gZGVjb2RlZEhlYWRlcjtcbiAgICAgIGlmICgha2lkIHx8ICFqd3RBbGcpIHJldHVybiBmYWxzZTtcbiAgICAgIGNvbnN0IHB1YmxpY0tleSA9IGF3YWl0IGdldEFwcGxlUHVibGljS2V5KGtpZCk7XG4gICAgICBjb25zdCB7IHBheWxvYWQ6IGp3dENsYWltcyB9ID0gYXdhaXQgand0VmVyaWZ5KHRva2VuLCBwdWJsaWNLZXksIHtcbiAgICAgICAgYWxnb3JpdGhtczogW2p3dEFsZ10sXG4gICAgICAgIGlzc3VlcjogXCJodHRwczovL2FwcGxlaWQuYXBwbGUuY29tXCIsXG4gICAgICAgIGF1ZGllbmNlOiBvcHRpb25zLmF1ZGllbmNlICYmIG9wdGlvbnMuYXVkaWVuY2UubGVuZ3RoID8gb3B0aW9ucy5hdWRpZW5jZSA6IG9wdGlvbnMuYXBwQnVuZGxlSWRlbnRpZmllciA/IG9wdGlvbnMuYXBwQnVuZGxlSWRlbnRpZmllciA6IG9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgIG1heFRva2VuQWdlOiBcIjFoXCJcbiAgICAgIH0pO1xuICAgICAgW1wiZW1haWxfdmVyaWZpZWRcIiwgXCJpc19wcml2YXRlX2VtYWlsXCJdLmZvckVhY2goKGZpZWxkKSA9PiB7XG4gICAgICAgIGlmIChqd3RDbGFpbXNbZmllbGRdICE9PSB2b2lkIDApIHtcbiAgICAgICAgICBqd3RDbGFpbXNbZmllbGRdID0gQm9vbGVhbihqd3RDbGFpbXNbZmllbGRdKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZiAobm9uY2UgJiYgand0Q2xhaW1zLm5vbmNlICE9PSBub25jZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gISFqd3RDbGFpbXM7XG4gICAgfSxcbiAgICByZWZyZXNoQWNjZXNzVG9rZW46IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuID8gb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gOiBhc3luYyAocmVmcmVzaFRva2VuKSA9PiB7XG4gICAgICByZXR1cm4gcmVmcmVzaEFjY2Vzc1Rva2VuKHtcbiAgICAgICAgcmVmcmVzaFRva2VuLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgY2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgY2xpZW50S2V5OiBvcHRpb25zLmNsaWVudEtleSxcbiAgICAgICAgICBjbGllbnRTZWNyZXQ6IG9wdGlvbnMuY2xpZW50U2VjcmV0XG4gICAgICAgIH0sXG4gICAgICAgIHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9hcHBsZWlkLmFwcGxlLmNvbS9hdXRoL3Rva2VuXCJcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgYXN5bmMgZ2V0VXNlckluZm8odG9rZW4pIHtcbiAgICAgIGlmIChvcHRpb25zLmdldFVzZXJJbmZvKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLmdldFVzZXJJbmZvKHRva2VuKTtcbiAgICAgIH1cbiAgICAgIGlmICghdG9rZW4uaWRUb2tlbikge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHByb2ZpbGUgPSBkZWNvZGVKd3QodG9rZW4uaWRUb2tlbik7XG4gICAgICBpZiAoIXByb2ZpbGUpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBjb25zdCBuYW1lID0gdG9rZW4udXNlciA/IGAke3Rva2VuLnVzZXIubmFtZT8uZmlyc3ROYW1lfSAke3Rva2VuLnVzZXIubmFtZT8ubGFzdE5hbWV9YCA6IHByb2ZpbGUubmFtZSB8fCBwcm9maWxlLmVtYWlsO1xuICAgICAgY29uc3QgZW1haWxWZXJpZmllZCA9IHR5cGVvZiBwcm9maWxlLmVtYWlsX3ZlcmlmaWVkID09PSBcImJvb2xlYW5cIiA/IHByb2ZpbGUuZW1haWxfdmVyaWZpZWQgOiBwcm9maWxlLmVtYWlsX3ZlcmlmaWVkID09PSBcInRydWVcIjtcbiAgICAgIGNvbnN0IGVucmljaGVkUHJvZmlsZSA9IHtcbiAgICAgICAgLi4ucHJvZmlsZSxcbiAgICAgICAgbmFtZVxuICAgICAgfTtcbiAgICAgIGNvbnN0IHVzZXJNYXAgPSBhd2FpdCBvcHRpb25zLm1hcFByb2ZpbGVUb1VzZXI/LihlbnJpY2hlZFByb2ZpbGUpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdXNlcjoge1xuICAgICAgICAgIGlkOiBwcm9maWxlLnN1YixcbiAgICAgICAgICBuYW1lOiBlbnJpY2hlZFByb2ZpbGUubmFtZSxcbiAgICAgICAgICBlbWFpbFZlcmlmaWVkLFxuICAgICAgICAgIGVtYWlsOiBwcm9maWxlLmVtYWlsLFxuICAgICAgICAgIC4uLnVzZXJNYXBcbiAgICAgICAgfSxcbiAgICAgICAgZGF0YTogZW5yaWNoZWRQcm9maWxlXG4gICAgICB9O1xuICAgIH0sXG4gICAgb3B0aW9uc1xuICB9O1xufTtcbmNvbnN0IGdldEFwcGxlUHVibGljS2V5ID0gYXN5bmMgKGtpZCkgPT4ge1xuICBjb25zdCBBUFBMRV9CQVNFX1VSTCA9IFwiaHR0cHM6Ly9hcHBsZWlkLmFwcGxlLmNvbVwiO1xuICBjb25zdCBKV0tTX0FQUExFX1VSSSA9IFwiL2F1dGgva2V5c1wiO1xuICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGJldHRlckZldGNoKGAke0FQUExFX0JBU0VfVVJMfSR7SldLU19BUFBMRV9VUkl9YCk7XG4gIGlmICghZGF0YT8ua2V5cykge1xuICAgIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcbiAgICAgIG1lc3NhZ2U6IFwiS2V5cyBub3QgZm91bmRcIlxuICAgIH0pO1xuICB9XG4gIGNvbnN0IGp3ayA9IGRhdGEua2V5cy5maW5kKChrZXkpID0+IGtleS5raWQgPT09IGtpZCk7XG4gIGlmICghandrKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBKV0sgd2l0aCBraWQgJHtraWR9IG5vdCBmb3VuZGApO1xuICB9XG4gIHJldHVybiBhd2FpdCBpbXBvcnRKV0soandrLCBqd2suYWxnKTtcbn07XG5cbmNvbnN0IGF0bGFzc2lhbiA9IChvcHRpb25zKSA9PiB7XG4gIHJldHVybiB7XG4gICAgaWQ6IFwiYXRsYXNzaWFuXCIsXG4gICAgbmFtZTogXCJBdGxhc3NpYW5cIixcbiAgICBhc3luYyBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHsgc3RhdGUsIHNjb3BlcywgY29kZVZlcmlmaWVyLCByZWRpcmVjdFVSSSB9KSB7XG4gICAgICBpZiAoIW9wdGlvbnMuY2xpZW50SWQgfHwgIW9wdGlvbnMuY2xpZW50U2VjcmV0KSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcIkNsaWVudCBJZCBhbmQgU2VjcmV0IGFyZSByZXF1aXJlZCBmb3IgQXRsYXNzaWFuXCIpO1xuICAgICAgICB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKFwiQ0xJRU5UX0lEX0FORF9TRUNSRVRfUkVRVUlSRURcIik7XG4gICAgICB9XG4gICAgICBpZiAoIWNvZGVWZXJpZmllcikge1xuICAgICAgICB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKFwiY29kZVZlcmlmaWVyIGlzIHJlcXVpcmVkIGZvciBBdGxhc3NpYW5cIik7XG4gICAgICB9XG4gICAgICBjb25zdCBfc2NvcGVzID0gb3B0aW9ucy5kaXNhYmxlRGVmYXVsdFNjb3BlID8gW10gOiBbXCJyZWFkOmppcmEtdXNlclwiLCBcIm9mZmxpbmVfYWNjZXNzXCJdO1xuICAgICAgb3B0aW9ucy5zY29wZSAmJiBfc2NvcGVzLnB1c2goLi4ub3B0aW9ucy5zY29wZSk7XG4gICAgICBzY29wZXMgJiYgX3Njb3Blcy5wdXNoKC4uLnNjb3Blcyk7XG4gICAgICByZXR1cm4gY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG4gICAgICAgIGlkOiBcImF0bGFzc2lhblwiLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICBhdXRob3JpemF0aW9uRW5kcG9pbnQ6IFwiaHR0cHM6Ly9hdXRoLmF0bGFzc2lhbi5jb20vYXV0aG9yaXplXCIsXG4gICAgICAgIHNjb3BlczogX3Njb3BlcyxcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIGNvZGVWZXJpZmllcixcbiAgICAgICAgcmVkaXJlY3RVUkksXG4gICAgICAgIGFkZGl0aW9uYWxQYXJhbXM6IHtcbiAgICAgICAgICBhdWRpZW5jZTogXCJhcGkuYXRsYXNzaWFuLmNvbVwiXG4gICAgICAgIH0sXG4gICAgICAgIHByb21wdDogb3B0aW9ucy5wcm9tcHRcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgY29kZVZlcmlmaWVyLCByZWRpcmVjdFVSSSB9KSA9PiB7XG4gICAgICByZXR1cm4gdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG4gICAgICAgIGNvZGUsXG4gICAgICAgIGNvZGVWZXJpZmllcixcbiAgICAgICAgcmVkaXJlY3RVUkksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9hdXRoLmF0bGFzc2lhbi5jb20vb2F1dGgvdG9rZW5cIlxuICAgICAgfSk7XG4gICAgfSxcbiAgICByZWZyZXNoQWNjZXNzVG9rZW46IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuID8gb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gOiBhc3luYyAocmVmcmVzaFRva2VuKSA9PiB7XG4gICAgICByZXR1cm4gcmVmcmVzaEFjY2Vzc1Rva2VuKHtcbiAgICAgICAgcmVmcmVzaFRva2VuLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgY2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgY2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldFxuICAgICAgICB9LFxuICAgICAgICB0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vYXV0aC5hdGxhc3NpYW4uY29tL29hdXRoL3Rva2VuXCJcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgYXN5bmMgZ2V0VXNlckluZm8odG9rZW4pIHtcbiAgICAgIGlmIChvcHRpb25zLmdldFVzZXJJbmZvKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLmdldFVzZXJJbmZvKHRva2VuKTtcbiAgICAgIH1cbiAgICAgIGlmICghdG9rZW4uYWNjZXNzVG9rZW4pIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB7IGRhdGE6IHByb2ZpbGUgfSA9IGF3YWl0IGJldHRlckZldGNoKFwiaHR0cHM6Ly9hcGkuYXRsYXNzaWFuLmNvbS9tZVwiLCB7XG4gICAgICAgICAgaGVhZGVyczogeyBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW4uYWNjZXNzVG9rZW59YCB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXByb2ZpbGUpIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4ocHJvZmlsZSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgaWQ6IHByb2ZpbGUuYWNjb3VudF9pZCxcbiAgICAgICAgICAgIG5hbWU6IHByb2ZpbGUubmFtZSxcbiAgICAgICAgICAgIGVtYWlsOiBwcm9maWxlLmVtYWlsLFxuICAgICAgICAgICAgaW1hZ2U6IHByb2ZpbGUucGljdHVyZSxcbiAgICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6IGZhbHNlLFxuICAgICAgICAgICAgLi4udXNlck1hcFxuICAgICAgICAgIH0sXG4gICAgICAgICAgZGF0YTogcHJvZmlsZVxuICAgICAgICB9O1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIGZldGNoIHVzZXIgaW5mbyBmcm9tIEZpZ21hOlwiLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH0sXG4gICAgb3B0aW9uc1xuICB9O1xufTtcblxuY29uc3QgY29nbml0byA9IChvcHRpb25zKSA9PiB7XG4gIGlmICghb3B0aW9ucy5kb21haW4gfHwgIW9wdGlvbnMucmVnaW9uIHx8ICFvcHRpb25zLnVzZXJQb29sSWQpIHtcbiAgICBsb2dnZXIuZXJyb3IoXG4gICAgICBcIkRvbWFpbiwgcmVnaW9uIGFuZCB1c2VyUG9vbElkIGFyZSByZXF1aXJlZCBmb3IgQW1hem9uIENvZ25pdG8uIE1ha2Ugc3VyZSB0byBwcm92aWRlIHRoZW0gaW4gdGhlIG9wdGlvbnMuXCJcbiAgICApO1xuICAgIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJET01BSU5fQU5EX1JFR0lPTl9SRVFVSVJFRFwiKTtcbiAgfVxuICBjb25zdCBjbGVhbkRvbWFpbiA9IG9wdGlvbnMuZG9tYWluLnJlcGxhY2UoL15odHRwcz86XFwvXFwvLywgXCJcIik7XG4gIGNvbnN0IGF1dGhvcml6YXRpb25FbmRwb2ludCA9IGBodHRwczovLyR7Y2xlYW5Eb21haW59L29hdXRoMi9hdXRob3JpemVgO1xuICBjb25zdCB0b2tlbkVuZHBvaW50ID0gYGh0dHBzOi8vJHtjbGVhbkRvbWFpbn0vb2F1dGgyL3Rva2VuYDtcbiAgY29uc3QgdXNlckluZm9FbmRwb2ludCA9IGBodHRwczovLyR7Y2xlYW5Eb21haW59L29hdXRoMi91c2VyaW5mb2A7XG4gIHJldHVybiB7XG4gICAgaWQ6IFwiY29nbml0b1wiLFxuICAgIG5hbWU6IFwiQ29nbml0b1wiLFxuICAgIGFzeW5jIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoeyBzdGF0ZSwgc2NvcGVzLCBjb2RlVmVyaWZpZXIsIHJlZGlyZWN0VVJJIH0pIHtcbiAgICAgIGlmICghb3B0aW9ucy5jbGllbnRJZCkge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXG4gICAgICAgICAgXCJDbGllbnRJZCBpcyByZXF1aXJlZCBmb3IgQW1hem9uIENvZ25pdG8uIE1ha2Ugc3VyZSB0byBwcm92aWRlIHRoZW0gaW4gdGhlIG9wdGlvbnMuXCJcbiAgICAgICAgKTtcbiAgICAgICAgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcIkNMSUVOVF9JRF9BTkRfU0VDUkVUX1JFUVVJUkVEXCIpO1xuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMucmVxdWlyZUNsaWVudFNlY3JldCAmJiAhb3B0aW9ucy5jbGllbnRTZWNyZXQpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFxuICAgICAgICAgIFwiQ2xpZW50IFNlY3JldCBpcyByZXF1aXJlZCB3aGVuIHJlcXVpcmVDbGllbnRTZWNyZXQgaXMgdHJ1ZS4gTWFrZSBzdXJlIHRvIHByb3ZpZGUgaXQgaW4gdGhlIG9wdGlvbnMuXCJcbiAgICAgICAgKTtcbiAgICAgICAgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcIkNMSUVOVF9TRUNSRVRfUkVRVUlSRURcIik7XG4gICAgICB9XG4gICAgICBjb25zdCBfc2NvcGVzID0gb3B0aW9ucy5kaXNhYmxlRGVmYXVsdFNjb3BlID8gW10gOiBbXCJvcGVuaWRcIiwgXCJwcm9maWxlXCIsIFwiZW1haWxcIl07XG4gICAgICBvcHRpb25zLnNjb3BlICYmIF9zY29wZXMucHVzaCguLi5vcHRpb25zLnNjb3BlKTtcbiAgICAgIHNjb3BlcyAmJiBfc2NvcGVzLnB1c2goLi4uc2NvcGVzKTtcbiAgICAgIGNvbnN0IHVybCA9IGF3YWl0IGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoe1xuICAgICAgICBpZDogXCJjb2duaXRvXCIsXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAuLi5vcHRpb25zXG4gICAgICAgIH0sXG4gICAgICAgIGF1dGhvcml6YXRpb25FbmRwb2ludCxcbiAgICAgICAgc2NvcGVzOiBfc2NvcGVzLFxuICAgICAgICBzdGF0ZSxcbiAgICAgICAgY29kZVZlcmlmaWVyLFxuICAgICAgICByZWRpcmVjdFVSSSxcbiAgICAgICAgcHJvbXB0OiBvcHRpb25zLnByb21wdFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdXJsO1xuICAgIH0sXG4gICAgdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgY29kZVZlcmlmaWVyLCByZWRpcmVjdFVSSSB9KSA9PiB7XG4gICAgICByZXR1cm4gdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG4gICAgICAgIGNvZGUsXG4gICAgICAgIGNvZGVWZXJpZmllcixcbiAgICAgICAgcmVkaXJlY3RVUkksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIHRva2VuRW5kcG9pbnRcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgcmVmcmVzaEFjY2Vzc1Rva2VuOiBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA/IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuIDogYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuICAgICAgcmV0dXJuIHJlZnJlc2hBY2Nlc3NUb2tlbih7XG4gICAgICAgIHJlZnJlc2hUb2tlbixcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgIGNsaWVudEtleTogb3B0aW9ucy5jbGllbnRLZXksXG4gICAgICAgICAgY2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldFxuICAgICAgICB9LFxuICAgICAgICB0b2tlbkVuZHBvaW50XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGFzeW5jIHZlcmlmeUlkVG9rZW4odG9rZW4sIG5vbmNlKSB7XG4gICAgICBpZiAob3B0aW9ucy5kaXNhYmxlSWRUb2tlblNpZ25Jbikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAob3B0aW9ucy52ZXJpZnlJZFRva2VuKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLnZlcmlmeUlkVG9rZW4odG9rZW4sIG5vbmNlKTtcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGRlY29kZWRIZWFkZXIgPSBkZWNvZGVQcm90ZWN0ZWRIZWFkZXIodG9rZW4pO1xuICAgICAgICBjb25zdCB7IGtpZCwgYWxnOiBqd3RBbGcgfSA9IGRlY29kZWRIZWFkZXI7XG4gICAgICAgIGlmICgha2lkIHx8ICFqd3RBbGcpIHJldHVybiBmYWxzZTtcbiAgICAgICAgY29uc3QgcHVibGljS2V5ID0gYXdhaXQgZ2V0Q29nbml0b1B1YmxpY0tleShcbiAgICAgICAgICBraWQsXG4gICAgICAgICAgb3B0aW9ucy5yZWdpb24sXG4gICAgICAgICAgb3B0aW9ucy51c2VyUG9vbElkXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGV4cGVjdGVkSXNzdWVyID0gYGh0dHBzOi8vY29nbml0by1pZHAuJHtvcHRpb25zLnJlZ2lvbn0uYW1hem9uYXdzLmNvbS8ke29wdGlvbnMudXNlclBvb2xJZH1gO1xuICAgICAgICBjb25zdCB7IHBheWxvYWQ6IGp3dENsYWltcyB9ID0gYXdhaXQgand0VmVyaWZ5KHRva2VuLCBwdWJsaWNLZXksIHtcbiAgICAgICAgICBhbGdvcml0aG1zOiBband0QWxnXSxcbiAgICAgICAgICBpc3N1ZXI6IGV4cGVjdGVkSXNzdWVyLFxuICAgICAgICAgIGF1ZGllbmNlOiBvcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgIG1heFRva2VuQWdlOiBcIjFoXCJcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChub25jZSAmJiBqd3RDbGFpbXMubm9uY2UgIT09IG5vbmNlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIHZlcmlmeSBJRCB0b2tlbjpcIiwgZXJyb3IpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSxcbiAgICBhc3luYyBnZXRVc2VySW5mbyh0b2tlbikge1xuICAgICAgaWYgKG9wdGlvbnMuZ2V0VXNlckluZm8pIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuZ2V0VXNlckluZm8odG9rZW4pO1xuICAgICAgfVxuICAgICAgaWYgKHRva2VuLmlkVG9rZW4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBwcm9maWxlID0gZGVjb2RlSnd0KHRva2VuLmlkVG9rZW4pO1xuICAgICAgICAgIGlmICghcHJvZmlsZSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IG5hbWUgPSBwcm9maWxlLm5hbWUgfHwgcHJvZmlsZS5naXZlbl9uYW1lIHx8IHByb2ZpbGUudXNlcm5hbWUgfHwgcHJvZmlsZS5lbWFpbDtcbiAgICAgICAgICBjb25zdCBlbnJpY2hlZFByb2ZpbGUgPSB7XG4gICAgICAgICAgICAuLi5wcm9maWxlLFxuICAgICAgICAgICAgbmFtZVxuICAgICAgICAgIH07XG4gICAgICAgICAgY29uc3QgdXNlck1hcCA9IGF3YWl0IG9wdGlvbnMubWFwUHJvZmlsZVRvVXNlcj8uKGVucmljaGVkUHJvZmlsZSk7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgICAgaWQ6IHByb2ZpbGUuc3ViLFxuICAgICAgICAgICAgICBuYW1lOiBlbnJpY2hlZFByb2ZpbGUubmFtZSxcbiAgICAgICAgICAgICAgZW1haWw6IHByb2ZpbGUuZW1haWwsXG4gICAgICAgICAgICAgIGltYWdlOiBwcm9maWxlLnBpY3R1cmUsXG4gICAgICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6IHByb2ZpbGUuZW1haWxfdmVyaWZpZWQsXG4gICAgICAgICAgICAgIC4uLnVzZXJNYXBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkYXRhOiBlbnJpY2hlZFByb2ZpbGVcbiAgICAgICAgICB9O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBkZWNvZGUgSUQgdG9rZW46XCIsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRva2VuLmFjY2Vzc1Rva2VuKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgeyBkYXRhOiB1c2VySW5mbyB9ID0gYXdhaXQgYmV0dGVyRmV0Y2goXG4gICAgICAgICAgICB1c2VySW5mb0VuZHBvaW50LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VuLmFjY2Vzc1Rva2VufWBcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKHVzZXJJbmZvKSB7XG4gICAgICAgICAgICBjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4odXNlckluZm8pO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICAgIGlkOiB1c2VySW5mby5zdWIsXG4gICAgICAgICAgICAgICAgbmFtZTogdXNlckluZm8ubmFtZSB8fCB1c2VySW5mby5naXZlbl9uYW1lIHx8IHVzZXJJbmZvLnVzZXJuYW1lLFxuICAgICAgICAgICAgICAgIGVtYWlsOiB1c2VySW5mby5lbWFpbCxcbiAgICAgICAgICAgICAgICBpbWFnZTogdXNlckluZm8ucGljdHVyZSxcbiAgICAgICAgICAgICAgICBlbWFpbFZlcmlmaWVkOiB1c2VySW5mby5lbWFpbF92ZXJpZmllZCxcbiAgICAgICAgICAgICAgICAuLi51c2VyTWFwXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGRhdGE6IHVzZXJJbmZvXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggdXNlciBpbmZvIGZyb20gQ29nbml0bzpcIiwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIG9wdGlvbnNcbiAgfTtcbn07XG5jb25zdCBnZXRDb2duaXRvUHVibGljS2V5ID0gYXN5bmMgKGtpZCwgcmVnaW9uLCB1c2VyUG9vbElkKSA9PiB7XG4gIGNvbnN0IENPR05JVE9fSldLU19VUkkgPSBgaHR0cHM6Ly9jb2duaXRvLWlkcC4ke3JlZ2lvbn0uYW1hem9uYXdzLmNvbS8ke3VzZXJQb29sSWR9Ly53ZWxsLWtub3duL2p3a3MuanNvbmA7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaChDT0dOSVRPX0pXS1NfVVJJKTtcbiAgICBpZiAoIWRhdGE/LmtleXMpIHtcbiAgICAgIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcbiAgICAgICAgbWVzc2FnZTogXCJLZXlzIG5vdCBmb3VuZFwiXG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgandrID0gZGF0YS5rZXlzLmZpbmQoKGtleSkgPT4ga2V5LmtpZCA9PT0ga2lkKTtcbiAgICBpZiAoIWp3aykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBKV0sgd2l0aCBraWQgJHtraWR9IG5vdCBmb3VuZGApO1xuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgaW1wb3J0SldLKGp3aywgandrLmFsZyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIGZldGNoIENvZ25pdG8gcHVibGljIGtleTpcIiwgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59O1xuXG5jb25zdCBkaXNjb3JkID0gKG9wdGlvbnMpID0+IHtcbiAgcmV0dXJuIHtcbiAgICBpZDogXCJkaXNjb3JkXCIsXG4gICAgbmFtZTogXCJEaXNjb3JkXCIsXG4gICAgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7IHN0YXRlLCBzY29wZXMsIHJlZGlyZWN0VVJJIH0pIHtcbiAgICAgIGNvbnN0IF9zY29wZXMgPSBvcHRpb25zLmRpc2FibGVEZWZhdWx0U2NvcGUgPyBbXSA6IFtcImlkZW50aWZ5XCIsIFwiZW1haWxcIl07XG4gICAgICBzY29wZXMgJiYgX3Njb3Blcy5wdXNoKC4uLnNjb3Blcyk7XG4gICAgICBvcHRpb25zLnNjb3BlICYmIF9zY29wZXMucHVzaCguLi5vcHRpb25zLnNjb3BlKTtcbiAgICAgIHJldHVybiBuZXcgVVJMKFxuICAgICAgICBgaHR0cHM6Ly9kaXNjb3JkLmNvbS9hcGkvb2F1dGgyL2F1dGhvcml6ZT9zY29wZT0ke19zY29wZXMuam9pbihcbiAgICAgICAgICBcIitcIlxuICAgICAgICApfSZyZXNwb25zZV90eXBlPWNvZGUmY2xpZW50X2lkPSR7b3B0aW9ucy5jbGllbnRJZH0mcmVkaXJlY3RfdXJpPSR7ZW5jb2RlVVJJQ29tcG9uZW50KFxuICAgICAgICAgIG9wdGlvbnMucmVkaXJlY3RVUkkgfHwgcmVkaXJlY3RVUklcbiAgICAgICAgKX0mc3RhdGU9JHtzdGF0ZX0mcHJvbXB0PSR7b3B0aW9ucy5wcm9tcHQgfHwgXCJub25lXCJ9YFxuICAgICAgKTtcbiAgICB9LFxuICAgIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGU6IGFzeW5jICh7IGNvZGUsIHJlZGlyZWN0VVJJIH0pID0+IHtcbiAgICAgIHJldHVybiB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlKHtcbiAgICAgICAgY29kZSxcbiAgICAgICAgcmVkaXJlY3RVUkksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9kaXNjb3JkLmNvbS9hcGkvb2F1dGgyL3Rva2VuXCJcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgcmVmcmVzaEFjY2Vzc1Rva2VuOiBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA/IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuIDogYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuICAgICAgcmV0dXJuIHJlZnJlc2hBY2Nlc3NUb2tlbih7XG4gICAgICAgIHJlZnJlc2hUb2tlbixcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgIGNsaWVudEtleTogb3B0aW9ucy5jbGllbnRLZXksXG4gICAgICAgICAgY2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldFxuICAgICAgICB9LFxuICAgICAgICB0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vZGlzY29yZC5jb20vYXBpL29hdXRoMi90b2tlblwiXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGFzeW5jIGdldFVzZXJJbmZvKHRva2VuKSB7XG4gICAgICBpZiAob3B0aW9ucy5nZXRVc2VySW5mbykge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5nZXRVc2VySW5mbyh0b2tlbik7XG4gICAgICB9XG4gICAgICBjb25zdCB7IGRhdGE6IHByb2ZpbGUsIGVycm9yIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaChcbiAgICAgICAgXCJodHRwczovL2Rpc2NvcmQuY29tL2FwaS91c2Vycy9AbWVcIixcbiAgICAgICAge1xuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIGF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbi5hY2Nlc3NUb2tlbn1gXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApO1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKHByb2ZpbGUuYXZhdGFyID09PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRBdmF0YXJOdW1iZXIgPSBwcm9maWxlLmRpc2NyaW1pbmF0b3IgPT09IFwiMFwiID8gTnVtYmVyKEJpZ0ludChwcm9maWxlLmlkKSA+PiBCaWdJbnQoMjIpKSAlIDYgOiBwYXJzZUludChwcm9maWxlLmRpc2NyaW1pbmF0b3IpICUgNTtcbiAgICAgICAgcHJvZmlsZS5pbWFnZV91cmwgPSBgaHR0cHM6Ly9jZG4uZGlzY29yZGFwcC5jb20vZW1iZWQvYXZhdGFycy8ke2RlZmF1bHRBdmF0YXJOdW1iZXJ9LnBuZ2A7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBmb3JtYXQgPSBwcm9maWxlLmF2YXRhci5zdGFydHNXaXRoKFwiYV9cIikgPyBcImdpZlwiIDogXCJwbmdcIjtcbiAgICAgICAgcHJvZmlsZS5pbWFnZV91cmwgPSBgaHR0cHM6Ly9jZG4uZGlzY29yZGFwcC5jb20vYXZhdGFycy8ke3Byb2ZpbGUuaWR9LyR7cHJvZmlsZS5hdmF0YXJ9LiR7Zm9ybWF0fWA7XG4gICAgICB9XG4gICAgICBjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4ocHJvZmlsZSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgaWQ6IHByb2ZpbGUuaWQsXG4gICAgICAgICAgbmFtZTogcHJvZmlsZS5nbG9iYWxfbmFtZSB8fCBwcm9maWxlLnVzZXJuYW1lIHx8IFwiXCIsXG4gICAgICAgICAgZW1haWw6IHByb2ZpbGUuZW1haWwsXG4gICAgICAgICAgZW1haWxWZXJpZmllZDogcHJvZmlsZS52ZXJpZmllZCxcbiAgICAgICAgICBpbWFnZTogcHJvZmlsZS5pbWFnZV91cmwsXG4gICAgICAgICAgLi4udXNlck1hcFxuICAgICAgICB9LFxuICAgICAgICBkYXRhOiBwcm9maWxlXG4gICAgICB9O1xuICAgIH0sXG4gICAgb3B0aW9uc1xuICB9O1xufTtcblxuY29uc3QgZmFjZWJvb2sgPSAob3B0aW9ucykgPT4ge1xuICByZXR1cm4ge1xuICAgIGlkOiBcImZhY2Vib29rXCIsXG4gICAgbmFtZTogXCJGYWNlYm9va1wiLFxuICAgIGFzeW5jIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoeyBzdGF0ZSwgc2NvcGVzLCByZWRpcmVjdFVSSSwgbG9naW5IaW50IH0pIHtcbiAgICAgIGNvbnN0IF9zY29wZXMgPSBvcHRpb25zLmRpc2FibGVEZWZhdWx0U2NvcGUgPyBbXSA6IFtcImVtYWlsXCIsIFwicHVibGljX3Byb2ZpbGVcIl07XG4gICAgICBvcHRpb25zLnNjb3BlICYmIF9zY29wZXMucHVzaCguLi5vcHRpb25zLnNjb3BlKTtcbiAgICAgIHNjb3BlcyAmJiBfc2NvcGVzLnB1c2goLi4uc2NvcGVzKTtcbiAgICAgIHJldHVybiBhd2FpdCBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHtcbiAgICAgICAgaWQ6IFwiZmFjZWJvb2tcIixcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgYXV0aG9yaXphdGlvbkVuZHBvaW50OiBcImh0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS92MjEuMC9kaWFsb2cvb2F1dGhcIixcbiAgICAgICAgc2NvcGVzOiBfc2NvcGVzLFxuICAgICAgICBzdGF0ZSxcbiAgICAgICAgcmVkaXJlY3RVUkksXG4gICAgICAgIGxvZ2luSGludCxcbiAgICAgICAgYWRkaXRpb25hbFBhcmFtczogb3B0aW9ucy5jb25maWdJZCA/IHtcbiAgICAgICAgICBjb25maWdfaWQ6IG9wdGlvbnMuY29uZmlnSWRcbiAgICAgICAgfSA6IHt9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGU6IGFzeW5jICh7IGNvZGUsIHJlZGlyZWN0VVJJIH0pID0+IHtcbiAgICAgIHJldHVybiB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlKHtcbiAgICAgICAgY29kZSxcbiAgICAgICAgcmVkaXJlY3RVUkksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vb2F1dGgvYWNjZXNzX3Rva2VuXCJcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgYXN5bmMgdmVyaWZ5SWRUb2tlbih0b2tlbiwgbm9uY2UpIHtcbiAgICAgIGlmIChvcHRpb25zLmRpc2FibGVJZFRva2VuU2lnbkluKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zLnZlcmlmeUlkVG9rZW4pIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMudmVyaWZ5SWRUb2tlbih0b2tlbiwgbm9uY2UpO1xuICAgICAgfVxuICAgICAgaWYgKHRva2VuLnNwbGl0KFwiLlwiKS5sZW5ndGggPT09IDMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCB7IHBheWxvYWQ6IGp3dENsYWltcyB9ID0gYXdhaXQgand0VmVyaWZ5KFxuICAgICAgICAgICAgdG9rZW4sXG4gICAgICAgICAgICBjcmVhdGVSZW1vdGVKV0tTZXQoXG4gICAgICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVycy5mYWNlYm9vay5jb20vZG9jcy9mYWNlYm9vay1sb2dpbi9saW1pdGVkLWxvZ2luL3Rva2VuLyNqd2tzXG4gICAgICAgICAgICAgIG5ldyBVUkwoXG4gICAgICAgICAgICAgICAgXCJodHRwczovL2xpbWl0ZWQuZmFjZWJvb2suY29tLy53ZWxsLWtub3duL29hdXRoL29wZW5pZC9qd2tzL1wiXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGFsZ29yaXRobXM6IFtcIlJTMjU2XCJdLFxuICAgICAgICAgICAgICBhdWRpZW5jZTogb3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICAgICAgaXNzdWVyOiBcImh0dHBzOi8vd3d3LmZhY2Vib29rLmNvbVwiXG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgICBpZiAobm9uY2UgJiYgand0Q2xhaW1zLm5vbmNlICE9PSBub25jZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gISFqd3RDbGFpbXM7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIHJlZnJlc2hBY2Nlc3NUb2tlbjogb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gPyBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA6IGFzeW5jIChyZWZyZXNoVG9rZW4pID0+IHtcbiAgICAgIHJldHVybiByZWZyZXNoQWNjZXNzVG9rZW4oe1xuICAgICAgICByZWZyZXNoVG9rZW4sXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICBjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICBjbGllbnRLZXk6IG9wdGlvbnMuY2xpZW50S2V5LFxuICAgICAgICAgIGNsaWVudFNlY3JldDogb3B0aW9ucy5jbGllbnRTZWNyZXRcbiAgICAgICAgfSxcbiAgICAgICAgdG9rZW5FbmRwb2ludDogXCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS92MTguMC9vYXV0aC9hY2Nlc3NfdG9rZW5cIlxuICAgICAgfSk7XG4gICAgfSxcbiAgICBhc3luYyBnZXRVc2VySW5mbyh0b2tlbikge1xuICAgICAgaWYgKG9wdGlvbnMuZ2V0VXNlckluZm8pIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuZ2V0VXNlckluZm8odG9rZW4pO1xuICAgICAgfVxuICAgICAgaWYgKHRva2VuLmlkVG9rZW4gJiYgdG9rZW4uaWRUb2tlbi5zcGxpdChcIi5cIikubGVuZ3RoID09PSAzKSB7XG4gICAgICAgIGNvbnN0IHByb2ZpbGUyID0gZGVjb2RlSnd0KHRva2VuLmlkVG9rZW4pO1xuICAgICAgICBjb25zdCB1c2VyID0ge1xuICAgICAgICAgIGlkOiBwcm9maWxlMi5zdWIsXG4gICAgICAgICAgbmFtZTogcHJvZmlsZTIubmFtZSxcbiAgICAgICAgICBlbWFpbDogcHJvZmlsZTIuZW1haWwsXG4gICAgICAgICAgcGljdHVyZToge1xuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICB1cmw6IHByb2ZpbGUyLnBpY3R1cmUsXG4gICAgICAgICAgICAgIGhlaWdodDogMTAwLFxuICAgICAgICAgICAgICB3aWR0aDogMTAwLFxuICAgICAgICAgICAgICBpc19zaWxob3VldHRlOiBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgdXNlck1hcDIgPSBhd2FpdCBvcHRpb25zLm1hcFByb2ZpbGVUb1VzZXI/Lih7XG4gICAgICAgICAgLi4udXNlcixcbiAgICAgICAgICBlbWFpbF92ZXJpZmllZDogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICAuLi51c2VyLFxuICAgICAgICAgICAgZW1haWxWZXJpZmllZDogdHJ1ZSxcbiAgICAgICAgICAgIC4uLnVzZXJNYXAyXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkYXRhOiBwcm9maWxlMlxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgY29uc3QgZmllbGRzID0gW1xuICAgICAgICBcImlkXCIsXG4gICAgICAgIFwibmFtZVwiLFxuICAgICAgICBcImVtYWlsXCIsXG4gICAgICAgIFwicGljdHVyZVwiLFxuICAgICAgICAuLi5vcHRpb25zPy5maWVsZHMgfHwgW11cbiAgICAgIF07XG4gICAgICBjb25zdCB7IGRhdGE6IHByb2ZpbGUsIGVycm9yIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaChcbiAgICAgICAgXCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZT9maWVsZHM9XCIgKyBmaWVsZHMuam9pbihcIixcIiksXG4gICAgICAgIHtcbiAgICAgICAgICBhdXRoOiB7XG4gICAgICAgICAgICB0eXBlOiBcIkJlYXJlclwiLFxuICAgICAgICAgICAgdG9rZW46IHRva2VuLmFjY2Vzc1Rva2VuXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApO1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgY29uc3QgdXNlck1hcCA9IGF3YWl0IG9wdGlvbnMubWFwUHJvZmlsZVRvVXNlcj8uKHByb2ZpbGUpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdXNlcjoge1xuICAgICAgICAgIGlkOiBwcm9maWxlLmlkLFxuICAgICAgICAgIG5hbWU6IHByb2ZpbGUubmFtZSxcbiAgICAgICAgICBlbWFpbDogcHJvZmlsZS5lbWFpbCxcbiAgICAgICAgICBpbWFnZTogcHJvZmlsZS5waWN0dXJlLmRhdGEudXJsLFxuICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6IHByb2ZpbGUuZW1haWxfdmVyaWZpZWQsXG4gICAgICAgICAgLi4udXNlck1hcFxuICAgICAgICB9LFxuICAgICAgICBkYXRhOiBwcm9maWxlXG4gICAgICB9O1xuICAgIH0sXG4gICAgb3B0aW9uc1xuICB9O1xufTtcblxuY29uc3QgZmlnbWEgPSAob3B0aW9ucykgPT4ge1xuICByZXR1cm4ge1xuICAgIGlkOiBcImZpZ21hXCIsXG4gICAgbmFtZTogXCJGaWdtYVwiLFxuICAgIGFzeW5jIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoeyBzdGF0ZSwgc2NvcGVzLCBjb2RlVmVyaWZpZXIsIHJlZGlyZWN0VVJJIH0pIHtcbiAgICAgIGlmICghb3B0aW9ucy5jbGllbnRJZCB8fCAhb3B0aW9ucy5jbGllbnRTZWNyZXQpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFxuICAgICAgICAgIFwiQ2xpZW50IElkIGFuZCBDbGllbnQgU2VjcmV0IGFyZSByZXF1aXJlZCBmb3IgRmlnbWEuIE1ha2Ugc3VyZSB0byBwcm92aWRlIHRoZW0gaW4gdGhlIG9wdGlvbnMuXCJcbiAgICAgICAgKTtcbiAgICAgICAgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcIkNMSUVOVF9JRF9BTkRfU0VDUkVUX1JFUVVJUkVEXCIpO1xuICAgICAgfVxuICAgICAgaWYgKCFjb2RlVmVyaWZpZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcImNvZGVWZXJpZmllciBpcyByZXF1aXJlZCBmb3IgRmlnbWFcIik7XG4gICAgICB9XG4gICAgICBjb25zdCBfc2NvcGVzID0gb3B0aW9ucy5kaXNhYmxlRGVmYXVsdFNjb3BlID8gW10gOiBbXCJmaWxlX3JlYWRcIl07XG4gICAgICBvcHRpb25zLnNjb3BlICYmIF9zY29wZXMucHVzaCguLi5vcHRpb25zLnNjb3BlKTtcbiAgICAgIHNjb3BlcyAmJiBfc2NvcGVzLnB1c2goLi4uc2NvcGVzKTtcbiAgICAgIGNvbnN0IHVybCA9IGF3YWl0IGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoe1xuICAgICAgICBpZDogXCJmaWdtYVwiLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICBhdXRob3JpemF0aW9uRW5kcG9pbnQ6IFwiaHR0cHM6Ly93d3cuZmlnbWEuY29tL29hdXRoXCIsXG4gICAgICAgIHNjb3BlczogX3Njb3BlcyxcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIGNvZGVWZXJpZmllcixcbiAgICAgICAgcmVkaXJlY3RVUklcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHVybDtcbiAgICB9LFxuICAgIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGU6IGFzeW5jICh7IGNvZGUsIGNvZGVWZXJpZmllciwgcmVkaXJlY3RVUkkgfSkgPT4ge1xuICAgICAgcmV0dXJuIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoe1xuICAgICAgICBjb2RlLFxuICAgICAgICBjb2RlVmVyaWZpZXIsXG4gICAgICAgIHJlZGlyZWN0VVJJLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICB0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vd3d3LmZpZ21hLmNvbS9hcGkvb2F1dGgvdG9rZW5cIlxuICAgICAgfSk7XG4gICAgfSxcbiAgICByZWZyZXNoQWNjZXNzVG9rZW46IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuID8gb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gOiBhc3luYyAocmVmcmVzaFRva2VuKSA9PiB7XG4gICAgICByZXR1cm4gcmVmcmVzaEFjY2Vzc1Rva2VuKHtcbiAgICAgICAgcmVmcmVzaFRva2VuLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgY2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgY2xpZW50S2V5OiBvcHRpb25zLmNsaWVudEtleSxcbiAgICAgICAgICBjbGllbnRTZWNyZXQ6IG9wdGlvbnMuY2xpZW50U2VjcmV0XG4gICAgICAgIH0sXG4gICAgICAgIHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly93d3cuZmlnbWEuY29tL2FwaS9vYXV0aC90b2tlblwiXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGFzeW5jIGdldFVzZXJJbmZvKHRva2VuKSB7XG4gICAgICBpZiAob3B0aW9ucy5nZXRVc2VySW5mbykge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5nZXRVc2VySW5mbyh0b2tlbik7XG4gICAgICB9XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB7IGRhdGE6IHByb2ZpbGUgfSA9IGF3YWl0IGJldHRlckZldGNoKFxuICAgICAgICAgIFwiaHR0cHM6Ly9hcGkuZmlnbWEuY29tL3YxL21lXCIsXG4gICAgICAgICAge1xuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW4uYWNjZXNzVG9rZW59YFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgaWYgKCFwcm9maWxlKSB7XG4gICAgICAgICAgbG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIGZldGNoIHVzZXIgZnJvbSBGaWdtYVwiKTtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4ocHJvZmlsZSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgaWQ6IHByb2ZpbGUuaWQsXG4gICAgICAgICAgICBuYW1lOiBwcm9maWxlLmhhbmRsZSxcbiAgICAgICAgICAgIGVtYWlsOiBwcm9maWxlLmVtYWlsLFxuICAgICAgICAgICAgaW1hZ2U6IHByb2ZpbGUuaW1nX3VybCxcbiAgICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6ICEhcHJvZmlsZS5lbWFpbCxcbiAgICAgICAgICAgIC4uLnVzZXJNYXBcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRhdGE6IHByb2ZpbGVcbiAgICAgICAgfTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBmZXRjaCB1c2VyIGluZm8gZnJvbSBGaWdtYTpcIiwgZXJyb3IpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9LFxuICAgIG9wdGlvbnNcbiAgfTtcbn07XG5cbmNvbnN0IGdpdGh1YiA9IChvcHRpb25zKSA9PiB7XG4gIGNvbnN0IHRva2VuRW5kcG9pbnQgPSBcImh0dHBzOi8vZ2l0aHViLmNvbS9sb2dpbi9vYXV0aC9hY2Nlc3NfdG9rZW5cIjtcbiAgcmV0dXJuIHtcbiAgICBpZDogXCJnaXRodWJcIixcbiAgICBuYW1lOiBcIkdpdEh1YlwiLFxuICAgIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoeyBzdGF0ZSwgc2NvcGVzLCBsb2dpbkhpbnQsIHJlZGlyZWN0VVJJIH0pIHtcbiAgICAgIGNvbnN0IF9zY29wZXMgPSBvcHRpb25zLmRpc2FibGVEZWZhdWx0U2NvcGUgPyBbXSA6IFtcInJlYWQ6dXNlclwiLCBcInVzZXI6ZW1haWxcIl07XG4gICAgICBvcHRpb25zLnNjb3BlICYmIF9zY29wZXMucHVzaCguLi5vcHRpb25zLnNjb3BlKTtcbiAgICAgIHNjb3BlcyAmJiBfc2NvcGVzLnB1c2goLi4uc2NvcGVzKTtcbiAgICAgIHJldHVybiBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHtcbiAgICAgICAgaWQ6IFwiZ2l0aHViXCIsXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIGF1dGhvcml6YXRpb25FbmRwb2ludDogXCJodHRwczovL2dpdGh1Yi5jb20vbG9naW4vb2F1dGgvYXV0aG9yaXplXCIsXG4gICAgICAgIHNjb3BlczogX3Njb3BlcyxcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIHJlZGlyZWN0VVJJLFxuICAgICAgICBsb2dpbkhpbnQsXG4gICAgICAgIHByb21wdDogb3B0aW9ucy5wcm9tcHRcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgcmVkaXJlY3RVUkkgfSkgPT4ge1xuICAgICAgcmV0dXJuIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoe1xuICAgICAgICBjb2RlLFxuICAgICAgICByZWRpcmVjdFVSSSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgdG9rZW5FbmRwb2ludFxuICAgICAgfSk7XG4gICAgfSxcbiAgICByZWZyZXNoQWNjZXNzVG9rZW46IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuID8gb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gOiBhc3luYyAocmVmcmVzaFRva2VuKSA9PiB7XG4gICAgICByZXR1cm4gcmVmcmVzaEFjY2Vzc1Rva2VuKHtcbiAgICAgICAgcmVmcmVzaFRva2VuLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgY2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgY2xpZW50S2V5OiBvcHRpb25zLmNsaWVudEtleSxcbiAgICAgICAgICBjbGllbnRTZWNyZXQ6IG9wdGlvbnMuY2xpZW50U2VjcmV0XG4gICAgICAgIH0sXG4gICAgICAgIHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9naXRodWIuY29tL2xvZ2luL29hdXRoL2FjY2Vzc190b2tlblwiXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGFzeW5jIGdldFVzZXJJbmZvKHRva2VuKSB7XG4gICAgICBpZiAob3B0aW9ucy5nZXRVc2VySW5mbykge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5nZXRVc2VySW5mbyh0b2tlbik7XG4gICAgICB9XG4gICAgICBjb25zdCB7IGRhdGE6IHByb2ZpbGUsIGVycm9yIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaChcbiAgICAgICAgXCJodHRwczovL2FwaS5naXRodWIuY29tL3VzZXJcIixcbiAgICAgICAge1xuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwiVXNlci1BZ2VudFwiOiBcImJldHRlci1hdXRoXCIsXG4gICAgICAgICAgICBhdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW4uYWNjZXNzVG9rZW59YFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgZGF0YTogZW1haWxzIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaChcImh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vdXNlci9lbWFpbHNcIiwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VuLmFjY2Vzc1Rva2VufWAsXG4gICAgICAgICAgXCJVc2VyLUFnZW50XCI6IFwiYmV0dGVyLWF1dGhcIlxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmICghcHJvZmlsZS5lbWFpbCAmJiBlbWFpbHMpIHtcbiAgICAgICAgcHJvZmlsZS5lbWFpbCA9IChlbWFpbHMuZmluZCgoZSkgPT4gZS5wcmltYXJ5KSA/PyBlbWFpbHNbMF0pPy5lbWFpbDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGVtYWlsVmVyaWZpZWQgPSBlbWFpbHM/LmZpbmQoKGUpID0+IGUuZW1haWwgPT09IHByb2ZpbGUuZW1haWwpPy52ZXJpZmllZCA/PyBmYWxzZTtcbiAgICAgIGNvbnN0IHVzZXJNYXAgPSBhd2FpdCBvcHRpb25zLm1hcFByb2ZpbGVUb1VzZXI/Lihwcm9maWxlKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHVzZXI6IHtcbiAgICAgICAgICBpZDogcHJvZmlsZS5pZCxcbiAgICAgICAgICBuYW1lOiBwcm9maWxlLm5hbWUgfHwgcHJvZmlsZS5sb2dpbixcbiAgICAgICAgICBlbWFpbDogcHJvZmlsZS5lbWFpbCxcbiAgICAgICAgICBpbWFnZTogcHJvZmlsZS5hdmF0YXJfdXJsLFxuICAgICAgICAgIGVtYWlsVmVyaWZpZWQsXG4gICAgICAgICAgLi4udXNlck1hcFxuICAgICAgICB9LFxuICAgICAgICBkYXRhOiBwcm9maWxlXG4gICAgICB9O1xuICAgIH0sXG4gICAgb3B0aW9uc1xuICB9O1xufTtcblxuY29uc3QgZ29vZ2xlID0gKG9wdGlvbnMpID0+IHtcbiAgcmV0dXJuIHtcbiAgICBpZDogXCJnb29nbGVcIixcbiAgICBuYW1lOiBcIkdvb2dsZVwiLFxuICAgIGFzeW5jIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoe1xuICAgICAgc3RhdGUsXG4gICAgICBzY29wZXMsXG4gICAgICBjb2RlVmVyaWZpZXIsXG4gICAgICByZWRpcmVjdFVSSSxcbiAgICAgIGxvZ2luSGludCxcbiAgICAgIGRpc3BsYXlcbiAgICB9KSB7XG4gICAgICBpZiAoIW9wdGlvbnMuY2xpZW50SWQgfHwgIW9wdGlvbnMuY2xpZW50U2VjcmV0KSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcbiAgICAgICAgICBcIkNsaWVudCBJZCBhbmQgQ2xpZW50IFNlY3JldCBpcyByZXF1aXJlZCBmb3IgR29vZ2xlLiBNYWtlIHN1cmUgdG8gcHJvdmlkZSB0aGVtIGluIHRoZSBvcHRpb25zLlwiXG4gICAgICAgICk7XG4gICAgICAgIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJDTElFTlRfSURfQU5EX1NFQ1JFVF9SRVFVSVJFRFwiKTtcbiAgICAgIH1cbiAgICAgIGlmICghY29kZVZlcmlmaWVyKSB7XG4gICAgICAgIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJjb2RlVmVyaWZpZXIgaXMgcmVxdWlyZWQgZm9yIEdvb2dsZVwiKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IF9zY29wZXMgPSBvcHRpb25zLmRpc2FibGVEZWZhdWx0U2NvcGUgPyBbXSA6IFtcImVtYWlsXCIsIFwicHJvZmlsZVwiLCBcIm9wZW5pZFwiXTtcbiAgICAgIG9wdGlvbnMuc2NvcGUgJiYgX3Njb3Blcy5wdXNoKC4uLm9wdGlvbnMuc2NvcGUpO1xuICAgICAgc2NvcGVzICYmIF9zY29wZXMucHVzaCguLi5zY29wZXMpO1xuICAgICAgY29uc3QgdXJsID0gYXdhaXQgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG4gICAgICAgIGlkOiBcImdvb2dsZVwiLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICBhdXRob3JpemF0aW9uRW5kcG9pbnQ6IFwiaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tL28vb2F1dGgyL2F1dGhcIixcbiAgICAgICAgc2NvcGVzOiBfc2NvcGVzLFxuICAgICAgICBzdGF0ZSxcbiAgICAgICAgY29kZVZlcmlmaWVyLFxuICAgICAgICByZWRpcmVjdFVSSSxcbiAgICAgICAgcHJvbXB0OiBvcHRpb25zLnByb21wdCxcbiAgICAgICAgYWNjZXNzVHlwZTogb3B0aW9ucy5hY2Nlc3NUeXBlLFxuICAgICAgICBkaXNwbGF5OiBkaXNwbGF5IHx8IG9wdGlvbnMuZGlzcGxheSxcbiAgICAgICAgbG9naW5IaW50LFxuICAgICAgICBoZDogb3B0aW9ucy5oZCxcbiAgICAgICAgYWRkaXRpb25hbFBhcmFtczoge1xuICAgICAgICAgIGluY2x1ZGVfZ3JhbnRlZF9zY29wZXM6IFwidHJ1ZVwiXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHVybDtcbiAgICB9LFxuICAgIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGU6IGFzeW5jICh7IGNvZGUsIGNvZGVWZXJpZmllciwgcmVkaXJlY3RVUkkgfSkgPT4ge1xuICAgICAgcmV0dXJuIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoe1xuICAgICAgICBjb2RlLFxuICAgICAgICBjb2RlVmVyaWZpZXIsXG4gICAgICAgIHJlZGlyZWN0VVJJLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICB0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vb2F1dGgyLmdvb2dsZWFwaXMuY29tL3Rva2VuXCJcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgcmVmcmVzaEFjY2Vzc1Rva2VuOiBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA/IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuIDogYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuICAgICAgcmV0dXJuIHJlZnJlc2hBY2Nlc3NUb2tlbih7XG4gICAgICAgIHJlZnJlc2hUb2tlbixcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgIGNsaWVudEtleTogb3B0aW9ucy5jbGllbnRLZXksXG4gICAgICAgICAgY2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldFxuICAgICAgICB9LFxuICAgICAgICB0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL29hdXRoMi92NC90b2tlblwiXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGFzeW5jIHZlcmlmeUlkVG9rZW4odG9rZW4sIG5vbmNlKSB7XG4gICAgICBpZiAob3B0aW9ucy5kaXNhYmxlSWRUb2tlblNpZ25Jbikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAob3B0aW9ucy52ZXJpZnlJZFRva2VuKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLnZlcmlmeUlkVG9rZW4odG9rZW4sIG5vbmNlKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGdvb2dsZVB1YmxpY0tleVVybCA9IGBodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9vYXV0aDIvdjMvdG9rZW5pbmZvP2lkX3Rva2VuPSR7dG9rZW59YDtcbiAgICAgIGNvbnN0IHsgZGF0YTogdG9rZW5JbmZvIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaChnb29nbGVQdWJsaWNLZXlVcmwpO1xuICAgICAgaWYgKCF0b2tlbkluZm8pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgY29uc3QgaXNWYWxpZCA9IHRva2VuSW5mby5hdWQgPT09IG9wdGlvbnMuY2xpZW50SWQgJiYgKHRva2VuSW5mby5pc3MgPT09IFwiaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tXCIgfHwgdG9rZW5JbmZvLmlzcyA9PT0gXCJhY2NvdW50cy5nb29nbGUuY29tXCIpO1xuICAgICAgcmV0dXJuIGlzVmFsaWQ7XG4gICAgfSxcbiAgICBhc3luYyBnZXRVc2VySW5mbyh0b2tlbikge1xuICAgICAgaWYgKG9wdGlvbnMuZ2V0VXNlckluZm8pIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuZ2V0VXNlckluZm8odG9rZW4pO1xuICAgICAgfVxuICAgICAgaWYgKCF0b2tlbi5pZFRva2VuKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgY29uc3QgdXNlciA9IGRlY29kZUp3dCh0b2tlbi5pZFRva2VuKTtcbiAgICAgIGNvbnN0IHVzZXJNYXAgPSBhd2FpdCBvcHRpb25zLm1hcFByb2ZpbGVUb1VzZXI/Lih1c2VyKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHVzZXI6IHtcbiAgICAgICAgICBpZDogdXNlci5zdWIsXG4gICAgICAgICAgbmFtZTogdXNlci5uYW1lLFxuICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgIGltYWdlOiB1c2VyLnBpY3R1cmUsXG4gICAgICAgICAgZW1haWxWZXJpZmllZDogdXNlci5lbWFpbF92ZXJpZmllZCxcbiAgICAgICAgICAuLi51c2VyTWFwXG4gICAgICAgIH0sXG4gICAgICAgIGRhdGE6IHVzZXJcbiAgICAgIH07XG4gICAgfSxcbiAgICBvcHRpb25zXG4gIH07XG59O1xuXG5jb25zdCBraWNrID0gKG9wdGlvbnMpID0+IHtcbiAgcmV0dXJuIHtcbiAgICBpZDogXCJraWNrXCIsXG4gICAgbmFtZTogXCJLaWNrXCIsXG4gICAgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7IHN0YXRlLCBzY29wZXMsIHJlZGlyZWN0VVJJLCBjb2RlVmVyaWZpZXIgfSkge1xuICAgICAgY29uc3QgX3Njb3BlcyA9IG9wdGlvbnMuZGlzYWJsZURlZmF1bHRTY29wZSA/IFtdIDogW1widXNlcjpyZWFkXCJdO1xuICAgICAgb3B0aW9ucy5zY29wZSAmJiBfc2NvcGVzLnB1c2goLi4ub3B0aW9ucy5zY29wZSk7XG4gICAgICBzY29wZXMgJiYgX3Njb3Blcy5wdXNoKC4uLnNjb3Blcyk7XG4gICAgICByZXR1cm4gY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG4gICAgICAgIGlkOiBcImtpY2tcIixcbiAgICAgICAgcmVkaXJlY3RVUkksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIGF1dGhvcml6YXRpb25FbmRwb2ludDogXCJodHRwczovL2lkLmtpY2suY29tL29hdXRoL2F1dGhvcml6ZVwiLFxuICAgICAgICBzY29wZXM6IF9zY29wZXMsXG4gICAgICAgIGNvZGVWZXJpZmllcixcbiAgICAgICAgc3RhdGVcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgYXN5bmMgdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7IGNvZGUsIHJlZGlyZWN0VVJJLCBjb2RlVmVyaWZpZXIgfSkge1xuICAgICAgcmV0dXJuIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoe1xuICAgICAgICBjb2RlLFxuICAgICAgICByZWRpcmVjdFVSSSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgdG9rZW5FbmRwb2ludDogXCJodHRwczovL2lkLmtpY2suY29tL29hdXRoL3Rva2VuXCIsXG4gICAgICAgIGNvZGVWZXJpZmllclxuICAgICAgfSk7XG4gICAgfSxcbiAgICBhc3luYyBnZXRVc2VySW5mbyh0b2tlbikge1xuICAgICAgaWYgKG9wdGlvbnMuZ2V0VXNlckluZm8pIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuZ2V0VXNlckluZm8odG9rZW4pO1xuICAgICAgfVxuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgYmV0dGVyRmV0Y2goXCJodHRwczovL2FwaS5raWNrLmNvbS9wdWJsaWMvdjEvdXNlcnNcIiwge1xuICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW4uYWNjZXNzVG9rZW59YFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHByb2ZpbGUgPSBkYXRhLmRhdGFbMF07XG4gICAgICBjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4ocHJvZmlsZSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgaWQ6IHByb2ZpbGUudXNlcl9pZCxcbiAgICAgICAgICBuYW1lOiBwcm9maWxlLm5hbWUsXG4gICAgICAgICAgZW1haWw6IHByb2ZpbGUuZW1haWwsXG4gICAgICAgICAgaW1hZ2U6IHByb2ZpbGUucHJvZmlsZV9waWN0dXJlLFxuICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6IHRydWUsXG4gICAgICAgICAgLi4udXNlck1hcFxuICAgICAgICB9LFxuICAgICAgICBkYXRhOiBwcm9maWxlXG4gICAgICB9O1xuICAgIH0sXG4gICAgb3B0aW9uc1xuICB9O1xufTtcblxuY29uc3QgaHVnZ2luZ2ZhY2UgPSAob3B0aW9ucykgPT4ge1xuICByZXR1cm4ge1xuICAgIGlkOiBcImh1Z2dpbmdmYWNlXCIsXG4gICAgbmFtZTogXCJIdWdnaW5nIEZhY2VcIixcbiAgICBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHsgc3RhdGUsIHNjb3BlcywgY29kZVZlcmlmaWVyLCByZWRpcmVjdFVSSSB9KSB7XG4gICAgICBjb25zdCBfc2NvcGVzID0gb3B0aW9ucy5kaXNhYmxlRGVmYXVsdFNjb3BlID8gW10gOiBbXCJvcGVuaWRcIiwgXCJwcm9maWxlXCIsIFwiZW1haWxcIl07XG4gICAgICBvcHRpb25zLnNjb3BlICYmIF9zY29wZXMucHVzaCguLi5vcHRpb25zLnNjb3BlKTtcbiAgICAgIHNjb3BlcyAmJiBfc2NvcGVzLnB1c2goLi4uc2NvcGVzKTtcbiAgICAgIHJldHVybiBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHtcbiAgICAgICAgaWQ6IFwiaHVnZ2luZ2ZhY2VcIixcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgYXV0aG9yaXphdGlvbkVuZHBvaW50OiBcImh0dHBzOi8vaHVnZ2luZ2ZhY2UuY28vb2F1dGgvYXV0aG9yaXplXCIsXG4gICAgICAgIHNjb3BlczogX3Njb3BlcyxcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIGNvZGVWZXJpZmllcixcbiAgICAgICAgcmVkaXJlY3RVUklcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgY29kZVZlcmlmaWVyLCByZWRpcmVjdFVSSSB9KSA9PiB7XG4gICAgICByZXR1cm4gdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG4gICAgICAgIGNvZGUsXG4gICAgICAgIGNvZGVWZXJpZmllcixcbiAgICAgICAgcmVkaXJlY3RVUkksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9odWdnaW5nZmFjZS5jby9vYXV0aC90b2tlblwiXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHJlZnJlc2hBY2Nlc3NUb2tlbjogb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gPyBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA6IGFzeW5jIChyZWZyZXNoVG9rZW4pID0+IHtcbiAgICAgIHJldHVybiByZWZyZXNoQWNjZXNzVG9rZW4oe1xuICAgICAgICByZWZyZXNoVG9rZW4sXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICBjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICBjbGllbnRLZXk6IG9wdGlvbnMuY2xpZW50S2V5LFxuICAgICAgICAgIGNsaWVudFNlY3JldDogb3B0aW9ucy5jbGllbnRTZWNyZXRcbiAgICAgICAgfSxcbiAgICAgICAgdG9rZW5FbmRwb2ludDogXCJodHRwczovL2h1Z2dpbmdmYWNlLmNvL29hdXRoL3Rva2VuXCJcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgYXN5bmMgZ2V0VXNlckluZm8odG9rZW4pIHtcbiAgICAgIGlmIChvcHRpb25zLmdldFVzZXJJbmZvKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLmdldFVzZXJJbmZvKHRva2VuKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgZGF0YTogcHJvZmlsZSwgZXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKFxuICAgICAgICBcImh0dHBzOi8vaHVnZ2luZ2ZhY2UuY28vb2F1dGgvdXNlcmluZm9cIixcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW4uYWNjZXNzVG9rZW59YFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHVzZXJNYXAgPSBhd2FpdCBvcHRpb25zLm1hcFByb2ZpbGVUb1VzZXI/Lihwcm9maWxlKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHVzZXI6IHtcbiAgICAgICAgICBpZDogcHJvZmlsZS5zdWIsXG4gICAgICAgICAgbmFtZTogcHJvZmlsZS5uYW1lIHx8IHByb2ZpbGUucHJlZmVycmVkX3VzZXJuYW1lLFxuICAgICAgICAgIGVtYWlsOiBwcm9maWxlLmVtYWlsLFxuICAgICAgICAgIGltYWdlOiBwcm9maWxlLnBpY3R1cmUsXG4gICAgICAgICAgZW1haWxWZXJpZmllZDogcHJvZmlsZS5lbWFpbF92ZXJpZmllZCA/PyBmYWxzZSxcbiAgICAgICAgICAuLi51c2VyTWFwXG4gICAgICAgIH0sXG4gICAgICAgIGRhdGE6IHByb2ZpbGVcbiAgICAgIH07XG4gICAgfSxcbiAgICBvcHRpb25zXG4gIH07XG59O1xuXG5jb25zdCBtaWNyb3NvZnQgPSAob3B0aW9ucykgPT4ge1xuICBjb25zdCB0ZW5hbnQgPSBvcHRpb25zLnRlbmFudElkIHx8IFwiY29tbW9uXCI7XG4gIGNvbnN0IGF1dGhvcml0eSA9IG9wdGlvbnMuYXV0aG9yaXR5IHx8IFwiaHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tXCI7XG4gIGNvbnN0IGF1dGhvcml6YXRpb25FbmRwb2ludCA9IGAke2F1dGhvcml0eX0vJHt0ZW5hbnR9L29hdXRoMi92Mi4wL2F1dGhvcml6ZWA7XG4gIGNvbnN0IHRva2VuRW5kcG9pbnQgPSBgJHthdXRob3JpdHl9LyR7dGVuYW50fS9vYXV0aDIvdjIuMC90b2tlbmA7XG4gIHJldHVybiB7XG4gICAgaWQ6IFwibWljcm9zb2Z0XCIsXG4gICAgbmFtZTogXCJNaWNyb3NvZnQgRW50cmFJRFwiLFxuICAgIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoZGF0YSkge1xuICAgICAgY29uc3Qgc2NvcGVzID0gb3B0aW9ucy5kaXNhYmxlRGVmYXVsdFNjb3BlID8gW10gOiBbXCJvcGVuaWRcIiwgXCJwcm9maWxlXCIsIFwiZW1haWxcIiwgXCJVc2VyLlJlYWRcIiwgXCJvZmZsaW5lX2FjY2Vzc1wiXTtcbiAgICAgIG9wdGlvbnMuc2NvcGUgJiYgc2NvcGVzLnB1c2goLi4ub3B0aW9ucy5zY29wZSk7XG4gICAgICBkYXRhLnNjb3BlcyAmJiBzY29wZXMucHVzaCguLi5kYXRhLnNjb3Blcyk7XG4gICAgICByZXR1cm4gY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG4gICAgICAgIGlkOiBcIm1pY3Jvc29mdFwiLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICBhdXRob3JpemF0aW9uRW5kcG9pbnQsXG4gICAgICAgIHN0YXRlOiBkYXRhLnN0YXRlLFxuICAgICAgICBjb2RlVmVyaWZpZXI6IGRhdGEuY29kZVZlcmlmaWVyLFxuICAgICAgICBzY29wZXMsXG4gICAgICAgIHJlZGlyZWN0VVJJOiBkYXRhLnJlZGlyZWN0VVJJLFxuICAgICAgICBwcm9tcHQ6IG9wdGlvbnMucHJvbXB0LFxuICAgICAgICBsb2dpbkhpbnQ6IGRhdGEubG9naW5IaW50XG4gICAgICB9KTtcbiAgICB9LFxuICAgIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoeyBjb2RlLCBjb2RlVmVyaWZpZXIsIHJlZGlyZWN0VVJJIH0pIHtcbiAgICAgIHJldHVybiB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlKHtcbiAgICAgICAgY29kZSxcbiAgICAgICAgY29kZVZlcmlmaWVyLFxuICAgICAgICByZWRpcmVjdFVSSSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgdG9rZW5FbmRwb2ludFxuICAgICAgfSk7XG4gICAgfSxcbiAgICBhc3luYyBnZXRVc2VySW5mbyh0b2tlbikge1xuICAgICAgaWYgKG9wdGlvbnMuZ2V0VXNlckluZm8pIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuZ2V0VXNlckluZm8odG9rZW4pO1xuICAgICAgfVxuICAgICAgaWYgKCF0b2tlbi5pZFRva2VuKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgY29uc3QgdXNlciA9IGRlY29kZUp3dCh0b2tlbi5pZFRva2VuKTtcbiAgICAgIGNvbnN0IHByb2ZpbGVQaG90b1NpemUgPSBvcHRpb25zLnByb2ZpbGVQaG90b1NpemUgfHwgNDg7XG4gICAgICBhd2FpdCBiZXR0ZXJGZXRjaChcbiAgICAgICAgYGh0dHBzOi8vZ3JhcGgubWljcm9zb2Z0LmNvbS92MS4wL21lL3Bob3Rvcy8ke3Byb2ZpbGVQaG90b1NpemV9eCR7cHJvZmlsZVBob3RvU2l6ZX0vJHZhbHVlYCxcbiAgICAgICAge1xuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbi5hY2Nlc3NUb2tlbn1gXG4gICAgICAgICAgfSxcbiAgICAgICAgICBhc3luYyBvblJlc3BvbnNlKGNvbnRleHQpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmRpc2FibGVQcm9maWxlUGhvdG8gfHwgIWNvbnRleHQucmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBjb250ZXh0LnJlc3BvbnNlLmNsb25lKCk7XG4gICAgICAgICAgICAgIGNvbnN0IHBpY3R1cmVCdWZmZXIgPSBhd2FpdCByZXNwb25zZS5hcnJheUJ1ZmZlcigpO1xuICAgICAgICAgICAgICBjb25zdCBwaWN0dXJlQmFzZTY0ID0gYmFzZTY0LmVuY29kZShwaWN0dXJlQnVmZmVyKTtcbiAgICAgICAgICAgICAgdXNlci5waWN0dXJlID0gYGRhdGE6aW1hZ2UvanBlZztiYXNlNjQsICR7cGljdHVyZUJhc2U2NH1gO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXG4gICAgICAgICAgICAgICAgZSAmJiB0eXBlb2YgZSA9PT0gXCJvYmplY3RcIiAmJiBcIm5hbWVcIiBpbiBlID8gZS5uYW1lIDogXCJcIixcbiAgICAgICAgICAgICAgICBlXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApO1xuICAgICAgY29uc3QgdXNlck1hcCA9IGF3YWl0IG9wdGlvbnMubWFwUHJvZmlsZVRvVXNlcj8uKHVzZXIpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdXNlcjoge1xuICAgICAgICAgIGlkOiB1c2VyLnN1YixcbiAgICAgICAgICBuYW1lOiB1c2VyLm5hbWUsXG4gICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgICAgaW1hZ2U6IHVzZXIucGljdHVyZSxcbiAgICAgICAgICBlbWFpbFZlcmlmaWVkOiB0cnVlLFxuICAgICAgICAgIC4uLnVzZXJNYXBcbiAgICAgICAgfSxcbiAgICAgICAgZGF0YTogdXNlclxuICAgICAgfTtcbiAgICB9LFxuICAgIHJlZnJlc2hBY2Nlc3NUb2tlbjogb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gPyBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA6IGFzeW5jIChyZWZyZXNoVG9rZW4pID0+IHtcbiAgICAgIGNvbnN0IHNjb3BlcyA9IG9wdGlvbnMuZGlzYWJsZURlZmF1bHRTY29wZSA/IFtdIDogW1wib3BlbmlkXCIsIFwicHJvZmlsZVwiLCBcImVtYWlsXCIsIFwiVXNlci5SZWFkXCIsIFwib2ZmbGluZV9hY2Nlc3NcIl07XG4gICAgICBvcHRpb25zLnNjb3BlICYmIHNjb3Blcy5wdXNoKC4uLm9wdGlvbnMuc2NvcGUpO1xuICAgICAgcmV0dXJuIHJlZnJlc2hBY2Nlc3NUb2tlbih7XG4gICAgICAgIHJlZnJlc2hUb2tlbixcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgIGNsaWVudFNlY3JldDogb3B0aW9ucy5jbGllbnRTZWNyZXRcbiAgICAgICAgfSxcbiAgICAgICAgZXh0cmFQYXJhbXM6IHtcbiAgICAgICAgICBzY29wZTogc2NvcGVzLmpvaW4oXCIgXCIpXG4gICAgICAgICAgLy8gSW5jbHVkZSB0aGUgc2NvcGVzIGluIHJlcXVlc3QgdG8gbWljcm9zb2Z0XG4gICAgICAgIH0sXG4gICAgICAgIHRva2VuRW5kcG9pbnRcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgb3B0aW9uc1xuICB9O1xufTtcblxuY29uc3Qgc2xhY2sgPSAob3B0aW9ucykgPT4ge1xuICByZXR1cm4ge1xuICAgIGlkOiBcInNsYWNrXCIsXG4gICAgbmFtZTogXCJTbGFja1wiLFxuICAgIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoeyBzdGF0ZSwgc2NvcGVzLCByZWRpcmVjdFVSSSB9KSB7XG4gICAgICBjb25zdCBfc2NvcGVzID0gb3B0aW9ucy5kaXNhYmxlRGVmYXVsdFNjb3BlID8gW10gOiBbXCJvcGVuaWRcIiwgXCJwcm9maWxlXCIsIFwiZW1haWxcIl07XG4gICAgICBzY29wZXMgJiYgX3Njb3Blcy5wdXNoKC4uLnNjb3Blcyk7XG4gICAgICBvcHRpb25zLnNjb3BlICYmIF9zY29wZXMucHVzaCguLi5vcHRpb25zLnNjb3BlKTtcbiAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoXCJodHRwczovL3NsYWNrLmNvbS9vcGVuaWQvY29ubmVjdC9hdXRob3JpemVcIik7XG4gICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcInNjb3BlXCIsIF9zY29wZXMuam9pbihcIiBcIikpO1xuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJyZXNwb25zZV90eXBlXCIsIFwiY29kZVwiKTtcbiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwiY2xpZW50X2lkXCIsIG9wdGlvbnMuY2xpZW50SWQpO1xuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJyZWRpcmVjdF91cmlcIiwgb3B0aW9ucy5yZWRpcmVjdFVSSSB8fCByZWRpcmVjdFVSSSk7XG4gICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcInN0YXRlXCIsIHN0YXRlKTtcbiAgICAgIHJldHVybiB1cmw7XG4gICAgfSxcbiAgICB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlOiBhc3luYyAoeyBjb2RlLCByZWRpcmVjdFVSSSB9KSA9PiB7XG4gICAgICByZXR1cm4gdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG4gICAgICAgIGNvZGUsXG4gICAgICAgIHJlZGlyZWN0VVJJLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICB0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vc2xhY2suY29tL2FwaS9vcGVuaWQuY29ubmVjdC50b2tlblwiXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHJlZnJlc2hBY2Nlc3NUb2tlbjogb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gPyBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA6IGFzeW5jIChyZWZyZXNoVG9rZW4pID0+IHtcbiAgICAgIHJldHVybiByZWZyZXNoQWNjZXNzVG9rZW4oe1xuICAgICAgICByZWZyZXNoVG9rZW4sXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICBjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICBjbGllbnRLZXk6IG9wdGlvbnMuY2xpZW50S2V5LFxuICAgICAgICAgIGNsaWVudFNlY3JldDogb3B0aW9ucy5jbGllbnRTZWNyZXRcbiAgICAgICAgfSxcbiAgICAgICAgdG9rZW5FbmRwb2ludDogXCJodHRwczovL3NsYWNrLmNvbS9hcGkvb3BlbmlkLmNvbm5lY3QudG9rZW5cIlxuICAgICAgfSk7XG4gICAgfSxcbiAgICBhc3luYyBnZXRVc2VySW5mbyh0b2tlbikge1xuICAgICAgaWYgKG9wdGlvbnMuZ2V0VXNlckluZm8pIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuZ2V0VXNlckluZm8odG9rZW4pO1xuICAgICAgfVxuICAgICAgY29uc3QgeyBkYXRhOiBwcm9maWxlLCBlcnJvciB9ID0gYXdhaXQgYmV0dGVyRmV0Y2goXG4gICAgICAgIFwiaHR0cHM6Ly9zbGFjay5jb20vYXBpL29wZW5pZC5jb25uZWN0LnVzZXJJbmZvXCIsXG4gICAgICAgIHtcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBhdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW4uYWNjZXNzVG9rZW59YFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHVzZXJNYXAgPSBhd2FpdCBvcHRpb25zLm1hcFByb2ZpbGVUb1VzZXI/Lihwcm9maWxlKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHVzZXI6IHtcbiAgICAgICAgICBpZDogcHJvZmlsZVtcImh0dHBzOi8vc2xhY2suY29tL3VzZXJfaWRcIl0sXG4gICAgICAgICAgbmFtZTogcHJvZmlsZS5uYW1lIHx8IFwiXCIsXG4gICAgICAgICAgZW1haWw6IHByb2ZpbGUuZW1haWwsXG4gICAgICAgICAgZW1haWxWZXJpZmllZDogcHJvZmlsZS5lbWFpbF92ZXJpZmllZCxcbiAgICAgICAgICBpbWFnZTogcHJvZmlsZS5waWN0dXJlIHx8IHByb2ZpbGVbXCJodHRwczovL3NsYWNrLmNvbS91c2VyX2ltYWdlXzUxMlwiXSxcbiAgICAgICAgICAuLi51c2VyTWFwXG4gICAgICAgIH0sXG4gICAgICAgIGRhdGE6IHByb2ZpbGVcbiAgICAgIH07XG4gICAgfSxcbiAgICBvcHRpb25zXG4gIH07XG59O1xuXG5jb25zdCBub3Rpb24gPSAob3B0aW9ucykgPT4ge1xuICBjb25zdCB0b2tlbkVuZHBvaW50ID0gXCJodHRwczovL2FwaS5ub3Rpb24uY29tL3YxL29hdXRoL3Rva2VuXCI7XG4gIHJldHVybiB7XG4gICAgaWQ6IFwibm90aW9uXCIsXG4gICAgbmFtZTogXCJOb3Rpb25cIixcbiAgICBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHsgc3RhdGUsIHNjb3BlcywgbG9naW5IaW50LCByZWRpcmVjdFVSSSB9KSB7XG4gICAgICBjb25zdCBfc2NvcGVzID0gb3B0aW9ucy5kaXNhYmxlRGVmYXVsdFNjb3BlID8gW10gOiBbXTtcbiAgICAgIG9wdGlvbnMuc2NvcGUgJiYgX3Njb3Blcy5wdXNoKC4uLm9wdGlvbnMuc2NvcGUpO1xuICAgICAgc2NvcGVzICYmIF9zY29wZXMucHVzaCguLi5zY29wZXMpO1xuICAgICAgcmV0dXJuIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoe1xuICAgICAgICBpZDogXCJub3Rpb25cIixcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgYXV0aG9yaXphdGlvbkVuZHBvaW50OiBcImh0dHBzOi8vYXBpLm5vdGlvbi5jb20vdjEvb2F1dGgvYXV0aG9yaXplXCIsXG4gICAgICAgIHNjb3BlczogX3Njb3BlcyxcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIHJlZGlyZWN0VVJJLFxuICAgICAgICBsb2dpbkhpbnQsXG4gICAgICAgIGFkZGl0aW9uYWxQYXJhbXM6IHtcbiAgICAgICAgICBvd25lcjogXCJ1c2VyXCJcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlOiBhc3luYyAoeyBjb2RlLCByZWRpcmVjdFVSSSB9KSA9PiB7XG4gICAgICByZXR1cm4gdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG4gICAgICAgIGNvZGUsXG4gICAgICAgIHJlZGlyZWN0VVJJLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICB0b2tlbkVuZHBvaW50LFxuICAgICAgICBhdXRoZW50aWNhdGlvbjogXCJiYXNpY1wiXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHJlZnJlc2hBY2Nlc3NUb2tlbjogb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gPyBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA6IGFzeW5jIChyZWZyZXNoVG9rZW4pID0+IHtcbiAgICAgIHJldHVybiByZWZyZXNoQWNjZXNzVG9rZW4oe1xuICAgICAgICByZWZyZXNoVG9rZW4sXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICBjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICBjbGllbnRLZXk6IG9wdGlvbnMuY2xpZW50S2V5LFxuICAgICAgICAgIGNsaWVudFNlY3JldDogb3B0aW9ucy5jbGllbnRTZWNyZXRcbiAgICAgICAgfSxcbiAgICAgICAgdG9rZW5FbmRwb2ludFxuICAgICAgfSk7XG4gICAgfSxcbiAgICBhc3luYyBnZXRVc2VySW5mbyh0b2tlbikge1xuICAgICAgaWYgKG9wdGlvbnMuZ2V0VXNlckluZm8pIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuZ2V0VXNlckluZm8odG9rZW4pO1xuICAgICAgfVxuICAgICAgY29uc3QgeyBkYXRhOiBwcm9maWxlLCBlcnJvciB9ID0gYXdhaXQgYmV0dGVyRmV0Y2goXCJodHRwczovL2FwaS5ub3Rpb24uY29tL3YxL3VzZXJzL21lXCIsIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbi5hY2Nlc3NUb2tlbn1gLFxuICAgICAgICAgIFwiTm90aW9uLVZlcnNpb25cIjogXCIyMDIyLTA2LTI4XCJcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZiAoZXJyb3IgfHwgIXByb2ZpbGUpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBjb25zdCB1c2VyUHJvZmlsZSA9IHByb2ZpbGUuYm90Py5vd25lcj8udXNlcjtcbiAgICAgIGlmICghdXNlclByb2ZpbGUpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4odXNlclByb2ZpbGUpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdXNlcjoge1xuICAgICAgICAgIGlkOiB1c2VyUHJvZmlsZS5pZCxcbiAgICAgICAgICBuYW1lOiB1c2VyUHJvZmlsZS5uYW1lIHx8IFwiTm90aW9uIFVzZXJcIixcbiAgICAgICAgICBlbWFpbDogdXNlclByb2ZpbGUucGVyc29uPy5lbWFpbCB8fCBudWxsLFxuICAgICAgICAgIGltYWdlOiB1c2VyUHJvZmlsZS5hdmF0YXJfdXJsLFxuICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6ICEhdXNlclByb2ZpbGUucGVyc29uPy5lbWFpbCxcbiAgICAgICAgICAuLi51c2VyTWFwXG4gICAgICAgIH0sXG4gICAgICAgIGRhdGE6IHVzZXJQcm9maWxlXG4gICAgICB9O1xuICAgIH0sXG4gICAgb3B0aW9uc1xuICB9O1xufTtcblxuY29uc3Qgc3BvdGlmeSA9IChvcHRpb25zKSA9PiB7XG4gIHJldHVybiB7XG4gICAgaWQ6IFwic3BvdGlmeVwiLFxuICAgIG5hbWU6IFwiU3BvdGlmeVwiLFxuICAgIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoeyBzdGF0ZSwgc2NvcGVzLCBjb2RlVmVyaWZpZXIsIHJlZGlyZWN0VVJJIH0pIHtcbiAgICAgIGNvbnN0IF9zY29wZXMgPSBvcHRpb25zLmRpc2FibGVEZWZhdWx0U2NvcGUgPyBbXSA6IFtcInVzZXItcmVhZC1lbWFpbFwiXTtcbiAgICAgIG9wdGlvbnMuc2NvcGUgJiYgX3Njb3Blcy5wdXNoKC4uLm9wdGlvbnMuc2NvcGUpO1xuICAgICAgc2NvcGVzICYmIF9zY29wZXMucHVzaCguLi5zY29wZXMpO1xuICAgICAgcmV0dXJuIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoe1xuICAgICAgICBpZDogXCJzcG90aWZ5XCIsXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIGF1dGhvcml6YXRpb25FbmRwb2ludDogXCJodHRwczovL2FjY291bnRzLnNwb3RpZnkuY29tL2F1dGhvcml6ZVwiLFxuICAgICAgICBzY29wZXM6IF9zY29wZXMsXG4gICAgICAgIHN0YXRlLFxuICAgICAgICBjb2RlVmVyaWZpZXIsXG4gICAgICAgIHJlZGlyZWN0VVJJXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGU6IGFzeW5jICh7IGNvZGUsIGNvZGVWZXJpZmllciwgcmVkaXJlY3RVUkkgfSkgPT4ge1xuICAgICAgcmV0dXJuIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoe1xuICAgICAgICBjb2RlLFxuICAgICAgICBjb2RlVmVyaWZpZXIsXG4gICAgICAgIHJlZGlyZWN0VVJJLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICB0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vYWNjb3VudHMuc3BvdGlmeS5jb20vYXBpL3Rva2VuXCJcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgcmVmcmVzaEFjY2Vzc1Rva2VuOiBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA/IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuIDogYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuICAgICAgcmV0dXJuIHJlZnJlc2hBY2Nlc3NUb2tlbih7XG4gICAgICAgIHJlZnJlc2hUb2tlbixcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgIGNsaWVudEtleTogb3B0aW9ucy5jbGllbnRLZXksXG4gICAgICAgICAgY2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldFxuICAgICAgICB9LFxuICAgICAgICB0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vYWNjb3VudHMuc3BvdGlmeS5jb20vYXBpL3Rva2VuXCJcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgYXN5bmMgZ2V0VXNlckluZm8odG9rZW4pIHtcbiAgICAgIGlmIChvcHRpb25zLmdldFVzZXJJbmZvKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLmdldFVzZXJJbmZvKHRva2VuKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgZGF0YTogcHJvZmlsZSwgZXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKFxuICAgICAgICBcImh0dHBzOi8vYXBpLnNwb3RpZnkuY29tL3YxL21lXCIsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VuLmFjY2Vzc1Rva2VufWBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4ocHJvZmlsZSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgaWQ6IHByb2ZpbGUuaWQsXG4gICAgICAgICAgbmFtZTogcHJvZmlsZS5kaXNwbGF5X25hbWUsXG4gICAgICAgICAgZW1haWw6IHByb2ZpbGUuZW1haWwsXG4gICAgICAgICAgaW1hZ2U6IHByb2ZpbGUuaW1hZ2VzWzBdPy51cmwsXG4gICAgICAgICAgZW1haWxWZXJpZmllZDogZmFsc2UsXG4gICAgICAgICAgLi4udXNlck1hcFxuICAgICAgICB9LFxuICAgICAgICBkYXRhOiBwcm9maWxlXG4gICAgICB9O1xuICAgIH0sXG4gICAgb3B0aW9uc1xuICB9O1xufTtcblxuY29uc3QgdHdpdGNoID0gKG9wdGlvbnMpID0+IHtcbiAgcmV0dXJuIHtcbiAgICBpZDogXCJ0d2l0Y2hcIixcbiAgICBuYW1lOiBcIlR3aXRjaFwiLFxuICAgIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoeyBzdGF0ZSwgc2NvcGVzLCByZWRpcmVjdFVSSSB9KSB7XG4gICAgICBjb25zdCBfc2NvcGVzID0gb3B0aW9ucy5kaXNhYmxlRGVmYXVsdFNjb3BlID8gW10gOiBbXCJ1c2VyOnJlYWQ6ZW1haWxcIiwgXCJvcGVuaWRcIl07XG4gICAgICBvcHRpb25zLnNjb3BlICYmIF9zY29wZXMucHVzaCguLi5vcHRpb25zLnNjb3BlKTtcbiAgICAgIHNjb3BlcyAmJiBfc2NvcGVzLnB1c2goLi4uc2NvcGVzKTtcbiAgICAgIHJldHVybiBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHtcbiAgICAgICAgaWQ6IFwidHdpdGNoXCIsXG4gICAgICAgIHJlZGlyZWN0VVJJLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICBhdXRob3JpemF0aW9uRW5kcG9pbnQ6IFwiaHR0cHM6Ly9pZC50d2l0Y2gudHYvb2F1dGgyL2F1dGhvcml6ZVwiLFxuICAgICAgICBzY29wZXM6IF9zY29wZXMsXG4gICAgICAgIHN0YXRlLFxuICAgICAgICBjbGFpbXM6IG9wdGlvbnMuY2xhaW1zIHx8IFtcbiAgICAgICAgICBcImVtYWlsXCIsXG4gICAgICAgICAgXCJlbWFpbF92ZXJpZmllZFwiLFxuICAgICAgICAgIFwicHJlZmVycmVkX3VzZXJuYW1lXCIsXG4gICAgICAgICAgXCJwaWN0dXJlXCJcbiAgICAgICAgXVxuICAgICAgfSk7XG4gICAgfSxcbiAgICB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlOiBhc3luYyAoeyBjb2RlLCByZWRpcmVjdFVSSSB9KSA9PiB7XG4gICAgICByZXR1cm4gdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG4gICAgICAgIGNvZGUsXG4gICAgICAgIHJlZGlyZWN0VVJJLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICB0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vaWQudHdpdGNoLnR2L29hdXRoMi90b2tlblwiXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHJlZnJlc2hBY2Nlc3NUb2tlbjogb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gPyBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA6IGFzeW5jIChyZWZyZXNoVG9rZW4pID0+IHtcbiAgICAgIHJldHVybiByZWZyZXNoQWNjZXNzVG9rZW4oe1xuICAgICAgICByZWZyZXNoVG9rZW4sXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICBjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICBjbGllbnRLZXk6IG9wdGlvbnMuY2xpZW50S2V5LFxuICAgICAgICAgIGNsaWVudFNlY3JldDogb3B0aW9ucy5jbGllbnRTZWNyZXRcbiAgICAgICAgfSxcbiAgICAgICAgdG9rZW5FbmRwb2ludDogXCJodHRwczovL2lkLnR3aXRjaC50di9vYXV0aDIvdG9rZW5cIlxuICAgICAgfSk7XG4gICAgfSxcbiAgICBhc3luYyBnZXRVc2VySW5mbyh0b2tlbikge1xuICAgICAgaWYgKG9wdGlvbnMuZ2V0VXNlckluZm8pIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuZ2V0VXNlckluZm8odG9rZW4pO1xuICAgICAgfVxuICAgICAgY29uc3QgaWRUb2tlbiA9IHRva2VuLmlkVG9rZW47XG4gICAgICBpZiAoIWlkVG9rZW4pIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFwiTm8gaWRUb2tlbiBmb3VuZCBpbiB0b2tlblwiKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBjb25zdCBwcm9maWxlID0gZGVjb2RlSnd0KGlkVG9rZW4pO1xuICAgICAgY29uc3QgdXNlck1hcCA9IGF3YWl0IG9wdGlvbnMubWFwUHJvZmlsZVRvVXNlcj8uKHByb2ZpbGUpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdXNlcjoge1xuICAgICAgICAgIGlkOiBwcm9maWxlLnN1YixcbiAgICAgICAgICBuYW1lOiBwcm9maWxlLnByZWZlcnJlZF91c2VybmFtZSxcbiAgICAgICAgICBlbWFpbDogcHJvZmlsZS5lbWFpbCxcbiAgICAgICAgICBpbWFnZTogcHJvZmlsZS5waWN0dXJlLFxuICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6IHByb2ZpbGUuZW1haWxfdmVyaWZpZWQsXG4gICAgICAgICAgLi4udXNlck1hcFxuICAgICAgICB9LFxuICAgICAgICBkYXRhOiBwcm9maWxlXG4gICAgICB9O1xuICAgIH0sXG4gICAgb3B0aW9uc1xuICB9O1xufTtcblxuY29uc3QgdHdpdHRlciA9IChvcHRpb25zKSA9PiB7XG4gIHJldHVybiB7XG4gICAgaWQ6IFwidHdpdHRlclwiLFxuICAgIG5hbWU6IFwiVHdpdHRlclwiLFxuICAgIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoZGF0YSkge1xuICAgICAgY29uc3QgX3Njb3BlcyA9IG9wdGlvbnMuZGlzYWJsZURlZmF1bHRTY29wZSA/IFtdIDogW1widXNlcnMucmVhZFwiLCBcInR3ZWV0LnJlYWRcIiwgXCJvZmZsaW5lLmFjY2Vzc1wiLCBcInVzZXJzLmVtYWlsXCJdO1xuICAgICAgb3B0aW9ucy5zY29wZSAmJiBfc2NvcGVzLnB1c2goLi4ub3B0aW9ucy5zY29wZSk7XG4gICAgICBkYXRhLnNjb3BlcyAmJiBfc2NvcGVzLnB1c2goLi4uZGF0YS5zY29wZXMpO1xuICAgICAgcmV0dXJuIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoe1xuICAgICAgICBpZDogXCJ0d2l0dGVyXCIsXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIGF1dGhvcml6YXRpb25FbmRwb2ludDogXCJodHRwczovL3guY29tL2kvb2F1dGgyL2F1dGhvcml6ZVwiLFxuICAgICAgICBzY29wZXM6IF9zY29wZXMsXG4gICAgICAgIHN0YXRlOiBkYXRhLnN0YXRlLFxuICAgICAgICBjb2RlVmVyaWZpZXI6IGRhdGEuY29kZVZlcmlmaWVyLFxuICAgICAgICByZWRpcmVjdFVSSTogZGF0YS5yZWRpcmVjdFVSSVxuICAgICAgfSk7XG4gICAgfSxcbiAgICB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlOiBhc3luYyAoeyBjb2RlLCBjb2RlVmVyaWZpZXIsIHJlZGlyZWN0VVJJIH0pID0+IHtcbiAgICAgIHJldHVybiB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlKHtcbiAgICAgICAgY29kZSxcbiAgICAgICAgY29kZVZlcmlmaWVyLFxuICAgICAgICBhdXRoZW50aWNhdGlvbjogXCJiYXNpY1wiLFxuICAgICAgICByZWRpcmVjdFVSSSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgdG9rZW5FbmRwb2ludDogXCJodHRwczovL2FwaS54LmNvbS8yL29hdXRoMi90b2tlblwiXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHJlZnJlc2hBY2Nlc3NUb2tlbjogb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gPyBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA6IGFzeW5jIChyZWZyZXNoVG9rZW4pID0+IHtcbiAgICAgIHJldHVybiByZWZyZXNoQWNjZXNzVG9rZW4oe1xuICAgICAgICByZWZyZXNoVG9rZW4sXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICBjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICBjbGllbnRLZXk6IG9wdGlvbnMuY2xpZW50S2V5LFxuICAgICAgICAgIGNsaWVudFNlY3JldDogb3B0aW9ucy5jbGllbnRTZWNyZXRcbiAgICAgICAgfSxcbiAgICAgICAgYXV0aGVudGljYXRpb246IFwiYmFzaWNcIixcbiAgICAgICAgdG9rZW5FbmRwb2ludDogXCJodHRwczovL2FwaS54LmNvbS8yL29hdXRoMi90b2tlblwiXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGFzeW5jIGdldFVzZXJJbmZvKHRva2VuKSB7XG4gICAgICBpZiAob3B0aW9ucy5nZXRVc2VySW5mbykge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5nZXRVc2VySW5mbyh0b2tlbik7XG4gICAgICB9XG4gICAgICBjb25zdCB7IGRhdGE6IHByb2ZpbGUsIGVycm9yOiBwcm9maWxlRXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKFxuICAgICAgICBcImh0dHBzOi8vYXBpLnguY29tLzIvdXNlcnMvbWU/dXNlci5maWVsZHM9cHJvZmlsZV9pbWFnZV91cmxcIixcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW4uYWNjZXNzVG9rZW59YFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIGlmIChwcm9maWxlRXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBjb25zdCB7IGRhdGE6IGVtYWlsRGF0YSwgZXJyb3I6IGVtYWlsRXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKFwiaHR0cHM6Ly9hcGkueC5jb20vMi91c2Vycy9tZT91c2VyLmZpZWxkcz1jb25maXJtZWRfZW1haWxcIiwge1xuICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW4uYWNjZXNzVG9rZW59YFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGxldCBlbWFpbFZlcmlmaWVkID0gZmFsc2U7XG4gICAgICBpZiAoIWVtYWlsRXJyb3IgJiYgZW1haWxEYXRhPy5kYXRhPy5jb25maXJtZWRfZW1haWwpIHtcbiAgICAgICAgcHJvZmlsZS5kYXRhLmVtYWlsID0gZW1haWxEYXRhLmRhdGEuY29uZmlybWVkX2VtYWlsO1xuICAgICAgICBlbWFpbFZlcmlmaWVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHVzZXJNYXAgPSBhd2FpdCBvcHRpb25zLm1hcFByb2ZpbGVUb1VzZXI/Lihwcm9maWxlKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHVzZXI6IHtcbiAgICAgICAgICBpZDogcHJvZmlsZS5kYXRhLmlkLFxuICAgICAgICAgIG5hbWU6IHByb2ZpbGUuZGF0YS5uYW1lLFxuICAgICAgICAgIGVtYWlsOiBwcm9maWxlLmRhdGEuZW1haWwgfHwgcHJvZmlsZS5kYXRhLnVzZXJuYW1lIHx8IG51bGwsXG4gICAgICAgICAgaW1hZ2U6IHByb2ZpbGUuZGF0YS5wcm9maWxlX2ltYWdlX3VybCxcbiAgICAgICAgICBlbWFpbFZlcmlmaWVkLFxuICAgICAgICAgIC4uLnVzZXJNYXBcbiAgICAgICAgfSxcbiAgICAgICAgZGF0YTogcHJvZmlsZVxuICAgICAgfTtcbiAgICB9LFxuICAgIG9wdGlvbnNcbiAgfTtcbn07XG5cbmNvbnN0IGRyb3Bib3ggPSAob3B0aW9ucykgPT4ge1xuICBjb25zdCB0b2tlbkVuZHBvaW50ID0gXCJodHRwczovL2FwaS5kcm9wYm94YXBpLmNvbS9vYXV0aDIvdG9rZW5cIjtcbiAgcmV0dXJuIHtcbiAgICBpZDogXCJkcm9wYm94XCIsXG4gICAgbmFtZTogXCJEcm9wYm94XCIsXG4gICAgY3JlYXRlQXV0aG9yaXphdGlvblVSTDogYXN5bmMgKHtcbiAgICAgIHN0YXRlLFxuICAgICAgc2NvcGVzLFxuICAgICAgY29kZVZlcmlmaWVyLFxuICAgICAgcmVkaXJlY3RVUklcbiAgICB9KSA9PiB7XG4gICAgICBjb25zdCBfc2NvcGVzID0gb3B0aW9ucy5kaXNhYmxlRGVmYXVsdFNjb3BlID8gW10gOiBbXCJhY2NvdW50X2luZm8ucmVhZFwiXTtcbiAgICAgIG9wdGlvbnMuc2NvcGUgJiYgX3Njb3Blcy5wdXNoKC4uLm9wdGlvbnMuc2NvcGUpO1xuICAgICAgc2NvcGVzICYmIF9zY29wZXMucHVzaCguLi5zY29wZXMpO1xuICAgICAgY29uc3QgYWRkaXRpb25hbFBhcmFtcyA9IHt9O1xuICAgICAgaWYgKG9wdGlvbnMuYWNjZXNzVHlwZSkge1xuICAgICAgICBhZGRpdGlvbmFsUGFyYW1zLnRva2VuX2FjY2Vzc190eXBlID0gb3B0aW9ucy5hY2Nlc3NUeXBlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGF3YWl0IGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoe1xuICAgICAgICBpZDogXCJkcm9wYm94XCIsXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIGF1dGhvcml6YXRpb25FbmRwb2ludDogXCJodHRwczovL3d3dy5kcm9wYm94LmNvbS9vYXV0aDIvYXV0aG9yaXplXCIsXG4gICAgICAgIHNjb3BlczogX3Njb3BlcyxcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIHJlZGlyZWN0VVJJLFxuICAgICAgICBjb2RlVmVyaWZpZXIsXG4gICAgICAgIGFkZGl0aW9uYWxQYXJhbXNcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgY29kZVZlcmlmaWVyLCByZWRpcmVjdFVSSSB9KSA9PiB7XG4gICAgICByZXR1cm4gYXdhaXQgdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG4gICAgICAgIGNvZGUsXG4gICAgICAgIGNvZGVWZXJpZmllcixcbiAgICAgICAgcmVkaXJlY3RVUkksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIHRva2VuRW5kcG9pbnRcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgcmVmcmVzaEFjY2Vzc1Rva2VuOiBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA/IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuIDogYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuICAgICAgcmV0dXJuIHJlZnJlc2hBY2Nlc3NUb2tlbih7XG4gICAgICAgIHJlZnJlc2hUb2tlbixcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgIGNsaWVudEtleTogb3B0aW9ucy5jbGllbnRLZXksXG4gICAgICAgICAgY2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldFxuICAgICAgICB9LFxuICAgICAgICB0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vYXBpLmRyb3Bib3guY29tL29hdXRoMi90b2tlblwiXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGFzeW5jIGdldFVzZXJJbmZvKHRva2VuKSB7XG4gICAgICBpZiAob3B0aW9ucy5nZXRVc2VySW5mbykge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5nZXRVc2VySW5mbyh0b2tlbik7XG4gICAgICB9XG4gICAgICBjb25zdCB7IGRhdGE6IHByb2ZpbGUsIGVycm9yIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaChcbiAgICAgICAgXCJodHRwczovL2FwaS5kcm9wYm94YXBpLmNvbS8yL3VzZXJzL2dldF9jdXJyZW50X2FjY291bnRcIixcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VuLmFjY2Vzc1Rva2VufWBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4ocHJvZmlsZSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgaWQ6IHByb2ZpbGUuYWNjb3VudF9pZCxcbiAgICAgICAgICBuYW1lOiBwcm9maWxlLm5hbWU/LmRpc3BsYXlfbmFtZSxcbiAgICAgICAgICBlbWFpbDogcHJvZmlsZS5lbWFpbCxcbiAgICAgICAgICBlbWFpbFZlcmlmaWVkOiBwcm9maWxlLmVtYWlsX3ZlcmlmaWVkIHx8IGZhbHNlLFxuICAgICAgICAgIGltYWdlOiBwcm9maWxlLnByb2ZpbGVfcGhvdG9fdXJsLFxuICAgICAgICAgIC4uLnVzZXJNYXBcbiAgICAgICAgfSxcbiAgICAgICAgZGF0YTogcHJvZmlsZVxuICAgICAgfTtcbiAgICB9LFxuICAgIG9wdGlvbnNcbiAgfTtcbn07XG5cbmNvbnN0IGxpbmVhciA9IChvcHRpb25zKSA9PiB7XG4gIGNvbnN0IHRva2VuRW5kcG9pbnQgPSBcImh0dHBzOi8vYXBpLmxpbmVhci5hcHAvb2F1dGgvdG9rZW5cIjtcbiAgcmV0dXJuIHtcbiAgICBpZDogXCJsaW5lYXJcIixcbiAgICBuYW1lOiBcIkxpbmVhclwiLFxuICAgIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoeyBzdGF0ZSwgc2NvcGVzLCBsb2dpbkhpbnQsIHJlZGlyZWN0VVJJIH0pIHtcbiAgICAgIGNvbnN0IF9zY29wZXMgPSBvcHRpb25zLmRpc2FibGVEZWZhdWx0U2NvcGUgPyBbXSA6IFtcInJlYWRcIl07XG4gICAgICBvcHRpb25zLnNjb3BlICYmIF9zY29wZXMucHVzaCguLi5vcHRpb25zLnNjb3BlKTtcbiAgICAgIHNjb3BlcyAmJiBfc2NvcGVzLnB1c2goLi4uc2NvcGVzKTtcbiAgICAgIHJldHVybiBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHtcbiAgICAgICAgaWQ6IFwibGluZWFyXCIsXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIGF1dGhvcml6YXRpb25FbmRwb2ludDogXCJodHRwczovL2xpbmVhci5hcHAvb2F1dGgvYXV0aG9yaXplXCIsXG4gICAgICAgIHNjb3BlczogX3Njb3BlcyxcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIHJlZGlyZWN0VVJJLFxuICAgICAgICBsb2dpbkhpbnRcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgcmVkaXJlY3RVUkkgfSkgPT4ge1xuICAgICAgcmV0dXJuIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoe1xuICAgICAgICBjb2RlLFxuICAgICAgICByZWRpcmVjdFVSSSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgdG9rZW5FbmRwb2ludFxuICAgICAgfSk7XG4gICAgfSxcbiAgICByZWZyZXNoQWNjZXNzVG9rZW46IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuID8gb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gOiBhc3luYyAocmVmcmVzaFRva2VuKSA9PiB7XG4gICAgICByZXR1cm4gcmVmcmVzaEFjY2Vzc1Rva2VuKHtcbiAgICAgICAgcmVmcmVzaFRva2VuLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgY2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgY2xpZW50S2V5OiBvcHRpb25zLmNsaWVudEtleSxcbiAgICAgICAgICBjbGllbnRTZWNyZXQ6IG9wdGlvbnMuY2xpZW50U2VjcmV0XG4gICAgICAgIH0sXG4gICAgICAgIHRva2VuRW5kcG9pbnRcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgYXN5bmMgZ2V0VXNlckluZm8odG9rZW4pIHtcbiAgICAgIGlmIChvcHRpb25zLmdldFVzZXJJbmZvKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLmdldFVzZXJJbmZvKHRva2VuKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgZGF0YTogcHJvZmlsZSwgZXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKFxuICAgICAgICBcImh0dHBzOi8vYXBpLmxpbmVhci5hcHAvZ3JhcGhxbFwiLFxuICAgICAgICB7XG4gICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbi5hY2Nlc3NUb2tlbn1gXG4gICAgICAgICAgfSxcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBxdWVyeTogYFxuXHRcdFx0XHRcdFx0XHRxdWVyeSB7XG5cdFx0XHRcdFx0XHRcdFx0dmlld2VyIHtcblx0XHRcdFx0XHRcdFx0XHRcdGlkXG5cdFx0XHRcdFx0XHRcdFx0XHRuYW1lXG5cdFx0XHRcdFx0XHRcdFx0XHRlbWFpbFxuXHRcdFx0XHRcdFx0XHRcdFx0YXZhdGFyVXJsXG5cdFx0XHRcdFx0XHRcdFx0XHRhY3RpdmVcblx0XHRcdFx0XHRcdFx0XHRcdGNyZWF0ZWRBdFxuXHRcdFx0XHRcdFx0XHRcdFx0dXBkYXRlZEF0XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRgXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIGlmIChlcnJvciB8fCAhcHJvZmlsZT8uZGF0YT8udmlld2VyKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgY29uc3QgdXNlckRhdGEgPSBwcm9maWxlLmRhdGEudmlld2VyO1xuICAgICAgY29uc3QgdXNlck1hcCA9IGF3YWl0IG9wdGlvbnMubWFwUHJvZmlsZVRvVXNlcj8uKHVzZXJEYXRhKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHVzZXI6IHtcbiAgICAgICAgICBpZDogcHJvZmlsZS5kYXRhLnZpZXdlci5pZCxcbiAgICAgICAgICBuYW1lOiBwcm9maWxlLmRhdGEudmlld2VyLm5hbWUsXG4gICAgICAgICAgZW1haWw6IHByb2ZpbGUuZGF0YS52aWV3ZXIuZW1haWwsXG4gICAgICAgICAgaW1hZ2U6IHByb2ZpbGUuZGF0YS52aWV3ZXIuYXZhdGFyVXJsLFxuICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6IHRydWUsXG4gICAgICAgICAgLi4udXNlck1hcFxuICAgICAgICB9LFxuICAgICAgICBkYXRhOiB1c2VyRGF0YVxuICAgICAgfTtcbiAgICB9LFxuICAgIG9wdGlvbnNcbiAgfTtcbn07XG5cbmNvbnN0IGxpbmtlZGluID0gKG9wdGlvbnMpID0+IHtcbiAgY29uc3QgYXV0aG9yaXphdGlvbkVuZHBvaW50ID0gXCJodHRwczovL3d3dy5saW5rZWRpbi5jb20vb2F1dGgvdjIvYXV0aG9yaXphdGlvblwiO1xuICBjb25zdCB0b2tlbkVuZHBvaW50ID0gXCJodHRwczovL3d3dy5saW5rZWRpbi5jb20vb2F1dGgvdjIvYWNjZXNzVG9rZW5cIjtcbiAgcmV0dXJuIHtcbiAgICBpZDogXCJsaW5rZWRpblwiLFxuICAgIG5hbWU6IFwiTGlua2VkaW5cIixcbiAgICBjcmVhdGVBdXRob3JpemF0aW9uVVJMOiBhc3luYyAoe1xuICAgICAgc3RhdGUsXG4gICAgICBzY29wZXMsXG4gICAgICByZWRpcmVjdFVSSSxcbiAgICAgIGxvZ2luSGludFxuICAgIH0pID0+IHtcbiAgICAgIGNvbnN0IF9zY29wZXMgPSBvcHRpb25zLmRpc2FibGVEZWZhdWx0U2NvcGUgPyBbXSA6IFtcInByb2ZpbGVcIiwgXCJlbWFpbFwiLCBcIm9wZW5pZFwiXTtcbiAgICAgIG9wdGlvbnMuc2NvcGUgJiYgX3Njb3Blcy5wdXNoKC4uLm9wdGlvbnMuc2NvcGUpO1xuICAgICAgc2NvcGVzICYmIF9zY29wZXMucHVzaCguLi5zY29wZXMpO1xuICAgICAgcmV0dXJuIGF3YWl0IGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoe1xuICAgICAgICBpZDogXCJsaW5rZWRpblwiLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICBhdXRob3JpemF0aW9uRW5kcG9pbnQsXG4gICAgICAgIHNjb3BlczogX3Njb3BlcyxcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIGxvZ2luSGludCxcbiAgICAgICAgcmVkaXJlY3RVUklcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgcmVkaXJlY3RVUkkgfSkgPT4ge1xuICAgICAgcmV0dXJuIGF3YWl0IHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoe1xuICAgICAgICBjb2RlLFxuICAgICAgICByZWRpcmVjdFVSSSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgdG9rZW5FbmRwb2ludFxuICAgICAgfSk7XG4gICAgfSxcbiAgICByZWZyZXNoQWNjZXNzVG9rZW46IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuID8gb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gOiBhc3luYyAocmVmcmVzaFRva2VuKSA9PiB7XG4gICAgICByZXR1cm4gcmVmcmVzaEFjY2Vzc1Rva2VuKHtcbiAgICAgICAgcmVmcmVzaFRva2VuLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgY2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgY2xpZW50S2V5OiBvcHRpb25zLmNsaWVudEtleSxcbiAgICAgICAgICBjbGllbnRTZWNyZXQ6IG9wdGlvbnMuY2xpZW50U2VjcmV0XG4gICAgICAgIH0sXG4gICAgICAgIHRva2VuRW5kcG9pbnRcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgYXN5bmMgZ2V0VXNlckluZm8odG9rZW4pIHtcbiAgICAgIGlmIChvcHRpb25zLmdldFVzZXJJbmZvKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLmdldFVzZXJJbmZvKHRva2VuKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgZGF0YTogcHJvZmlsZSwgZXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKFxuICAgICAgICBcImh0dHBzOi8vYXBpLmxpbmtlZGluLmNvbS92Mi91c2VyaW5mb1wiLFxuICAgICAgICB7XG4gICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbi5hY2Nlc3NUb2tlbn1gXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApO1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgY29uc3QgdXNlck1hcCA9IGF3YWl0IG9wdGlvbnMubWFwUHJvZmlsZVRvVXNlcj8uKHByb2ZpbGUpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdXNlcjoge1xuICAgICAgICAgIGlkOiBwcm9maWxlLnN1YixcbiAgICAgICAgICBuYW1lOiBwcm9maWxlLm5hbWUsXG4gICAgICAgICAgZW1haWw6IHByb2ZpbGUuZW1haWwsXG4gICAgICAgICAgZW1haWxWZXJpZmllZDogcHJvZmlsZS5lbWFpbF92ZXJpZmllZCB8fCBmYWxzZSxcbiAgICAgICAgICBpbWFnZTogcHJvZmlsZS5waWN0dXJlLFxuICAgICAgICAgIC4uLnVzZXJNYXBcbiAgICAgICAgfSxcbiAgICAgICAgZGF0YTogcHJvZmlsZVxuICAgICAgfTtcbiAgICB9LFxuICAgIG9wdGlvbnNcbiAgfTtcbn07XG5cbmNvbnN0IGNsZWFuRG91YmxlU2xhc2hlcyA9IChpbnB1dCA9IFwiXCIpID0+IHtcbiAgcmV0dXJuIGlucHV0LnNwbGl0KFwiOi8vXCIpLm1hcCgoc3RyKSA9PiBzdHIucmVwbGFjZSgvXFwvezIsfS9nLCBcIi9cIikpLmpvaW4oXCI6Ly9cIik7XG59O1xuY29uc3QgaXNzdWVyVG9FbmRwb2ludHMgPSAoaXNzdWVyKSA9PiB7XG4gIGxldCBiYXNlVXJsID0gaXNzdWVyIHx8IFwiaHR0cHM6Ly9naXRsYWIuY29tXCI7XG4gIHJldHVybiB7XG4gICAgYXV0aG9yaXphdGlvbkVuZHBvaW50OiBjbGVhbkRvdWJsZVNsYXNoZXMoYCR7YmFzZVVybH0vb2F1dGgvYXV0aG9yaXplYCksXG4gICAgdG9rZW5FbmRwb2ludDogY2xlYW5Eb3VibGVTbGFzaGVzKGAke2Jhc2VVcmx9L29hdXRoL3Rva2VuYCksXG4gICAgdXNlcmluZm9FbmRwb2ludDogY2xlYW5Eb3VibGVTbGFzaGVzKGAke2Jhc2VVcmx9L2FwaS92NC91c2VyYClcbiAgfTtcbn07XG5jb25zdCBnaXRsYWIgPSAob3B0aW9ucykgPT4ge1xuICBjb25zdCB7IGF1dGhvcml6YXRpb25FbmRwb2ludCwgdG9rZW5FbmRwb2ludCwgdXNlcmluZm9FbmRwb2ludCB9ID0gaXNzdWVyVG9FbmRwb2ludHMob3B0aW9ucy5pc3N1ZXIpO1xuICBjb25zdCBpc3N1ZXJJZCA9IFwiZ2l0bGFiXCI7XG4gIGNvbnN0IGlzc3Vlck5hbWUgPSBcIkdpdGxhYlwiO1xuICByZXR1cm4ge1xuICAgIGlkOiBpc3N1ZXJJZCxcbiAgICBuYW1lOiBpc3N1ZXJOYW1lLFxuICAgIGNyZWF0ZUF1dGhvcml6YXRpb25VUkw6IGFzeW5jICh7XG4gICAgICBzdGF0ZSxcbiAgICAgIHNjb3BlcyxcbiAgICAgIGNvZGVWZXJpZmllcixcbiAgICAgIGxvZ2luSGludCxcbiAgICAgIHJlZGlyZWN0VVJJXG4gICAgfSkgPT4ge1xuICAgICAgY29uc3QgX3Njb3BlcyA9IG9wdGlvbnMuZGlzYWJsZURlZmF1bHRTY29wZSA/IFtdIDogW1wicmVhZF91c2VyXCJdO1xuICAgICAgb3B0aW9ucy5zY29wZSAmJiBfc2NvcGVzLnB1c2goLi4ub3B0aW9ucy5zY29wZSk7XG4gICAgICBzY29wZXMgJiYgX3Njb3Blcy5wdXNoKC4uLnNjb3Blcyk7XG4gICAgICByZXR1cm4gYXdhaXQgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG4gICAgICAgIGlkOiBpc3N1ZXJJZCxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgYXV0aG9yaXphdGlvbkVuZHBvaW50LFxuICAgICAgICBzY29wZXM6IF9zY29wZXMsXG4gICAgICAgIHN0YXRlLFxuICAgICAgICByZWRpcmVjdFVSSSxcbiAgICAgICAgY29kZVZlcmlmaWVyLFxuICAgICAgICBsb2dpbkhpbnRcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgcmVkaXJlY3RVUkksIGNvZGVWZXJpZmllciB9KSA9PiB7XG4gICAgICByZXR1cm4gdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG4gICAgICAgIGNvZGUsXG4gICAgICAgIHJlZGlyZWN0VVJJLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICBjb2RlVmVyaWZpZXIsXG4gICAgICAgIHRva2VuRW5kcG9pbnRcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgcmVmcmVzaEFjY2Vzc1Rva2VuOiBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA/IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuIDogYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuICAgICAgcmV0dXJuIHJlZnJlc2hBY2Nlc3NUb2tlbih7XG4gICAgICAgIHJlZnJlc2hUb2tlbixcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgIGNsaWVudEtleTogb3B0aW9ucy5jbGllbnRLZXksXG4gICAgICAgICAgY2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldFxuICAgICAgICB9LFxuICAgICAgICB0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vZ2l0bGFiLmNvbS9vYXV0aC90b2tlblwiXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGFzeW5jIGdldFVzZXJJbmZvKHRva2VuKSB7XG4gICAgICBpZiAob3B0aW9ucy5nZXRVc2VySW5mbykge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5nZXRVc2VySW5mbyh0b2tlbik7XG4gICAgICB9XG4gICAgICBjb25zdCB7IGRhdGE6IHByb2ZpbGUsIGVycm9yIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaChcbiAgICAgICAgdXNlcmluZm9FbmRwb2ludCxcbiAgICAgICAgeyBoZWFkZXJzOiB7IGF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbi5hY2Nlc3NUb2tlbn1gIH0gfVxuICAgICAgKTtcbiAgICAgIGlmIChlcnJvciB8fCBwcm9maWxlLnN0YXRlICE9PSBcImFjdGl2ZVwiIHx8IHByb2ZpbGUubG9ja2VkKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgY29uc3QgdXNlck1hcCA9IGF3YWl0IG9wdGlvbnMubWFwUHJvZmlsZVRvVXNlcj8uKHByb2ZpbGUpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdXNlcjoge1xuICAgICAgICAgIGlkOiBwcm9maWxlLmlkLFxuICAgICAgICAgIG5hbWU6IHByb2ZpbGUubmFtZSA/PyBwcm9maWxlLnVzZXJuYW1lLFxuICAgICAgICAgIGVtYWlsOiBwcm9maWxlLmVtYWlsLFxuICAgICAgICAgIGltYWdlOiBwcm9maWxlLmF2YXRhcl91cmwsXG4gICAgICAgICAgZW1haWxWZXJpZmllZDogdHJ1ZSxcbiAgICAgICAgICAuLi51c2VyTWFwXG4gICAgICAgIH0sXG4gICAgICAgIGRhdGE6IHByb2ZpbGVcbiAgICAgIH07XG4gICAgfSxcbiAgICBvcHRpb25zXG4gIH07XG59O1xuXG5jb25zdCB0aWt0b2sgPSAob3B0aW9ucykgPT4ge1xuICByZXR1cm4ge1xuICAgIGlkOiBcInRpa3Rva1wiLFxuICAgIG5hbWU6IFwiVGlrVG9rXCIsXG4gICAgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7IHN0YXRlLCBzY29wZXMsIHJlZGlyZWN0VVJJIH0pIHtcbiAgICAgIGNvbnN0IF9zY29wZXMgPSBvcHRpb25zLmRpc2FibGVEZWZhdWx0U2NvcGUgPyBbXSA6IFtcInVzZXIuaW5mby5wcm9maWxlXCJdO1xuICAgICAgb3B0aW9ucy5zY29wZSAmJiBfc2NvcGVzLnB1c2goLi4ub3B0aW9ucy5zY29wZSk7XG4gICAgICBzY29wZXMgJiYgX3Njb3Blcy5wdXNoKC4uLnNjb3Blcyk7XG4gICAgICByZXR1cm4gbmV3IFVSTChcbiAgICAgICAgYGh0dHBzOi8vd3d3LnRpa3Rvay5jb20vdjIvYXV0aC9hdXRob3JpemU/c2NvcGU9JHtfc2NvcGVzLmpvaW4oXG4gICAgICAgICAgXCIsXCJcbiAgICAgICAgKX0mcmVzcG9uc2VfdHlwZT1jb2RlJmNsaWVudF9rZXk9JHtvcHRpb25zLmNsaWVudEtleX0mY2xpZW50X3NlY3JldD0ke29wdGlvbnMuY2xpZW50U2VjcmV0fSZyZWRpcmVjdF91cmk9JHtlbmNvZGVVUklDb21wb25lbnQoXG4gICAgICAgICAgb3B0aW9ucy5yZWRpcmVjdFVSSSB8fCByZWRpcmVjdFVSSVxuICAgICAgICApfSZzdGF0ZT0ke3N0YXRlfWBcbiAgICAgICk7XG4gICAgfSxcbiAgICB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlOiBhc3luYyAoeyBjb2RlLCByZWRpcmVjdFVSSSB9KSA9PiB7XG4gICAgICByZXR1cm4gdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG4gICAgICAgIGNvZGUsXG4gICAgICAgIHJlZGlyZWN0VVJJOiBvcHRpb25zLnJlZGlyZWN0VVJJIHx8IHJlZGlyZWN0VVJJLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgY2xpZW50S2V5OiBvcHRpb25zLmNsaWVudEtleSxcbiAgICAgICAgICBjbGllbnRTZWNyZXQ6IG9wdGlvbnMuY2xpZW50U2VjcmV0XG4gICAgICAgIH0sXG4gICAgICAgIHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9vcGVuLnRpa3Rva2FwaXMuY29tL3YyL29hdXRoL3Rva2VuL1wiXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHJlZnJlc2hBY2Nlc3NUb2tlbjogb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gPyBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA6IGFzeW5jIChyZWZyZXNoVG9rZW4pID0+IHtcbiAgICAgIHJldHVybiByZWZyZXNoQWNjZXNzVG9rZW4oe1xuICAgICAgICByZWZyZXNoVG9rZW4sXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICBjbGllbnRLZXk6IG9wdGlvbnMuY2xpZW50S2V5LFxuICAgICAgICAgIGNsaWVudFNlY3JldDogb3B0aW9ucy5jbGllbnRTZWNyZXRcbiAgICAgICAgfSxcbiAgICAgICAgdG9rZW5FbmRwb2ludDogXCJodHRwczovL29wZW4udGlrdG9rYXBpcy5jb20vdjIvb2F1dGgvdG9rZW4vXCJcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgYXN5bmMgZ2V0VXNlckluZm8odG9rZW4pIHtcbiAgICAgIGlmIChvcHRpb25zLmdldFVzZXJJbmZvKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLmdldFVzZXJJbmZvKHRva2VuKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGZpZWxkcyA9IFtcbiAgICAgICAgXCJvcGVuX2lkXCIsXG4gICAgICAgIFwiYXZhdGFyX2xhcmdlX3VybFwiLFxuICAgICAgICBcImRpc3BsYXlfbmFtZVwiLFxuICAgICAgICBcInVzZXJuYW1lXCJcbiAgICAgIF07XG4gICAgICBjb25zdCB7IGRhdGE6IHByb2ZpbGUsIGVycm9yIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaChcbiAgICAgICAgYGh0dHBzOi8vb3Blbi50aWt0b2thcGlzLmNvbS92Mi91c2VyL2luZm8vP2ZpZWxkcz0ke2ZpZWxkcy5qb2luKFwiLFwiKX1gLFxuICAgICAgICB7XG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VuLmFjY2Vzc1Rva2VufWBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgZW1haWw6IHByb2ZpbGUuZGF0YS51c2VyLmVtYWlsIHx8IHByb2ZpbGUuZGF0YS51c2VyLnVzZXJuYW1lLFxuICAgICAgICAgIGlkOiBwcm9maWxlLmRhdGEudXNlci5vcGVuX2lkLFxuICAgICAgICAgIG5hbWU6IHByb2ZpbGUuZGF0YS51c2VyLmRpc3BsYXlfbmFtZSB8fCBwcm9maWxlLmRhdGEudXNlci51c2VybmFtZSxcbiAgICAgICAgICBpbWFnZTogcHJvZmlsZS5kYXRhLnVzZXIuYXZhdGFyX2xhcmdlX3VybCxcbiAgICAgICAgICAvKiogQG5vdGUgVGlrdG9rIGRvZXMgbm90IHByb3ZpZGUgZW1haWxWZXJpZmllZCBvciBldmVuIGVtYWlsKi9cbiAgICAgICAgICBlbWFpbFZlcmlmaWVkOiBwcm9maWxlLmRhdGEudXNlci5lbWFpbCA/IHRydWUgOiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBkYXRhOiBwcm9maWxlXG4gICAgICB9O1xuICAgIH0sXG4gICAgb3B0aW9uc1xuICB9O1xufTtcblxuY29uc3QgcmVkZGl0ID0gKG9wdGlvbnMpID0+IHtcbiAgcmV0dXJuIHtcbiAgICBpZDogXCJyZWRkaXRcIixcbiAgICBuYW1lOiBcIlJlZGRpdFwiLFxuICAgIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoeyBzdGF0ZSwgc2NvcGVzLCByZWRpcmVjdFVSSSB9KSB7XG4gICAgICBjb25zdCBfc2NvcGVzID0gb3B0aW9ucy5kaXNhYmxlRGVmYXVsdFNjb3BlID8gW10gOiBbXCJpZGVudGl0eVwiXTtcbiAgICAgIG9wdGlvbnMuc2NvcGUgJiYgX3Njb3Blcy5wdXNoKC4uLm9wdGlvbnMuc2NvcGUpO1xuICAgICAgc2NvcGVzICYmIF9zY29wZXMucHVzaCguLi5zY29wZXMpO1xuICAgICAgcmV0dXJuIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoe1xuICAgICAgICBpZDogXCJyZWRkaXRcIixcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgYXV0aG9yaXphdGlvbkVuZHBvaW50OiBcImh0dHBzOi8vd3d3LnJlZGRpdC5jb20vYXBpL3YxL2F1dGhvcml6ZVwiLFxuICAgICAgICBzY29wZXM6IF9zY29wZXMsXG4gICAgICAgIHN0YXRlLFxuICAgICAgICByZWRpcmVjdFVSSSxcbiAgICAgICAgZHVyYXRpb246IG9wdGlvbnMuZHVyYXRpb25cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgcmVkaXJlY3RVUkkgfSkgPT4ge1xuICAgICAgY29uc3QgYm9keSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgICBncmFudF90eXBlOiBcImF1dGhvcml6YXRpb25fY29kZVwiLFxuICAgICAgICBjb2RlLFxuICAgICAgICByZWRpcmVjdF91cmk6IG9wdGlvbnMucmVkaXJlY3RVUkkgfHwgcmVkaXJlY3RVUklcbiAgICAgIH0pO1xuICAgICAgY29uc3QgaGVhZGVycyA9IHtcbiAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIixcbiAgICAgICAgYWNjZXB0OiBcInRleHQvcGxhaW5cIixcbiAgICAgICAgXCJ1c2VyLWFnZW50XCI6IFwiYmV0dGVyLWF1dGhcIixcbiAgICAgICAgQXV0aG9yaXphdGlvbjogYEJhc2ljICR7YmFzZTY0LmVuY29kZShcbiAgICAgICAgICBgJHtvcHRpb25zLmNsaWVudElkfToke29wdGlvbnMuY2xpZW50U2VjcmV0fWBcbiAgICAgICAgKX1gXG4gICAgICB9O1xuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgYmV0dGVyRmV0Y2goXG4gICAgICAgIFwiaHR0cHM6Ly93d3cucmVkZGl0LmNvbS9hcGkvdjEvYWNjZXNzX3Rva2VuXCIsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgYm9keTogYm9keS50b1N0cmluZygpXG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgICByZXR1cm4gZ2V0T0F1dGgyVG9rZW5zKGRhdGEpO1xuICAgIH0sXG4gICAgcmVmcmVzaEFjY2Vzc1Rva2VuOiBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA/IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuIDogYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuICAgICAgcmV0dXJuIHJlZnJlc2hBY2Nlc3NUb2tlbih7XG4gICAgICAgIHJlZnJlc2hUb2tlbixcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgIGNsaWVudEtleTogb3B0aW9ucy5jbGllbnRLZXksXG4gICAgICAgICAgY2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldFxuICAgICAgICB9LFxuICAgICAgICBhdXRoZW50aWNhdGlvbjogXCJiYXNpY1wiLFxuICAgICAgICB0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vd3d3LnJlZGRpdC5jb20vYXBpL3YxL2FjY2Vzc190b2tlblwiXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGFzeW5jIGdldFVzZXJJbmZvKHRva2VuKSB7XG4gICAgICBpZiAob3B0aW9ucy5nZXRVc2VySW5mbykge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5nZXRVc2VySW5mbyh0b2tlbik7XG4gICAgICB9XG4gICAgICBjb25zdCB7IGRhdGE6IHByb2ZpbGUsIGVycm9yIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaChcbiAgICAgICAgXCJodHRwczovL29hdXRoLnJlZGRpdC5jb20vYXBpL3YxL21lXCIsXG4gICAgICAgIHtcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW4uYWNjZXNzVG9rZW59YCxcbiAgICAgICAgICAgIFwiVXNlci1BZ2VudFwiOiBcImJldHRlci1hdXRoXCJcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4ocHJvZmlsZSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgaWQ6IHByb2ZpbGUuaWQsXG4gICAgICAgICAgbmFtZTogcHJvZmlsZS5uYW1lLFxuICAgICAgICAgIGVtYWlsOiBwcm9maWxlLm9hdXRoX2NsaWVudF9pZCxcbiAgICAgICAgICBlbWFpbFZlcmlmaWVkOiBwcm9maWxlLmhhc192ZXJpZmllZF9lbWFpbCxcbiAgICAgICAgICBpbWFnZTogcHJvZmlsZS5pY29uX2ltZz8uc3BsaXQoXCI/XCIpWzBdLFxuICAgICAgICAgIC4uLnVzZXJNYXBcbiAgICAgICAgfSxcbiAgICAgICAgZGF0YTogcHJvZmlsZVxuICAgICAgfTtcbiAgICB9LFxuICAgIG9wdGlvbnNcbiAgfTtcbn07XG5cbmNvbnN0IHJvYmxveCA9IChvcHRpb25zKSA9PiB7XG4gIHJldHVybiB7XG4gICAgaWQ6IFwicm9ibG94XCIsXG4gICAgbmFtZTogXCJSb2Jsb3hcIixcbiAgICBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHsgc3RhdGUsIHNjb3BlcywgcmVkaXJlY3RVUkkgfSkge1xuICAgICAgY29uc3QgX3Njb3BlcyA9IG9wdGlvbnMuZGlzYWJsZURlZmF1bHRTY29wZSA/IFtdIDogW1wib3BlbmlkXCIsIFwicHJvZmlsZVwiXTtcbiAgICAgIG9wdGlvbnMuc2NvcGUgJiYgX3Njb3Blcy5wdXNoKC4uLm9wdGlvbnMuc2NvcGUpO1xuICAgICAgc2NvcGVzICYmIF9zY29wZXMucHVzaCguLi5zY29wZXMpO1xuICAgICAgcmV0dXJuIG5ldyBVUkwoXG4gICAgICAgIGBodHRwczovL2FwaXMucm9ibG94LmNvbS9vYXV0aC92MS9hdXRob3JpemU/c2NvcGU9JHtfc2NvcGVzLmpvaW4oXG4gICAgICAgICAgXCIrXCJcbiAgICAgICAgKX0mcmVzcG9uc2VfdHlwZT1jb2RlJmNsaWVudF9pZD0ke29wdGlvbnMuY2xpZW50SWR9JnJlZGlyZWN0X3VyaT0ke2VuY29kZVVSSUNvbXBvbmVudChcbiAgICAgICAgICBvcHRpb25zLnJlZGlyZWN0VVJJIHx8IHJlZGlyZWN0VVJJXG4gICAgICAgICl9JnN0YXRlPSR7c3RhdGV9JnByb21wdD0ke29wdGlvbnMucHJvbXB0IHx8IFwic2VsZWN0X2FjY291bnQgY29uc2VudFwifWBcbiAgICAgICk7XG4gICAgfSxcbiAgICB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlOiBhc3luYyAoeyBjb2RlLCByZWRpcmVjdFVSSSB9KSA9PiB7XG4gICAgICByZXR1cm4gdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG4gICAgICAgIGNvZGUsXG4gICAgICAgIHJlZGlyZWN0VVJJOiBvcHRpb25zLnJlZGlyZWN0VVJJIHx8IHJlZGlyZWN0VVJJLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICB0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vYXBpcy5yb2Jsb3guY29tL29hdXRoL3YxL3Rva2VuXCIsXG4gICAgICAgIGF1dGhlbnRpY2F0aW9uOiBcInBvc3RcIlxuICAgICAgfSk7XG4gICAgfSxcbiAgICByZWZyZXNoQWNjZXNzVG9rZW46IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuID8gb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gOiBhc3luYyAocmVmcmVzaFRva2VuKSA9PiB7XG4gICAgICByZXR1cm4gcmVmcmVzaEFjY2Vzc1Rva2VuKHtcbiAgICAgICAgcmVmcmVzaFRva2VuLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgY2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgY2xpZW50S2V5OiBvcHRpb25zLmNsaWVudEtleSxcbiAgICAgICAgICBjbGllbnRTZWNyZXQ6IG9wdGlvbnMuY2xpZW50U2VjcmV0XG4gICAgICAgIH0sXG4gICAgICAgIHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9hcGlzLnJvYmxveC5jb20vb2F1dGgvdjEvdG9rZW5cIlxuICAgICAgfSk7XG4gICAgfSxcbiAgICBhc3luYyBnZXRVc2VySW5mbyh0b2tlbikge1xuICAgICAgaWYgKG9wdGlvbnMuZ2V0VXNlckluZm8pIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuZ2V0VXNlckluZm8odG9rZW4pO1xuICAgICAgfVxuICAgICAgY29uc3QgeyBkYXRhOiBwcm9maWxlLCBlcnJvciB9ID0gYXdhaXQgYmV0dGVyRmV0Y2goXG4gICAgICAgIFwiaHR0cHM6Ly9hcGlzLnJvYmxveC5jb20vb2F1dGgvdjEvdXNlcmluZm9cIixcbiAgICAgICAge1xuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIGF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbi5hY2Nlc3NUb2tlbn1gXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApO1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgY29uc3QgdXNlck1hcCA9IGF3YWl0IG9wdGlvbnMubWFwUHJvZmlsZVRvVXNlcj8uKHByb2ZpbGUpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdXNlcjoge1xuICAgICAgICAgIGlkOiBwcm9maWxlLnN1YixcbiAgICAgICAgICBuYW1lOiBwcm9maWxlLm5pY2tuYW1lIHx8IHByb2ZpbGUucHJlZmVycmVkX3VzZXJuYW1lIHx8IFwiXCIsXG4gICAgICAgICAgaW1hZ2U6IHByb2ZpbGUucGljdHVyZSxcbiAgICAgICAgICBlbWFpbDogcHJvZmlsZS5wcmVmZXJyZWRfdXNlcm5hbWUgfHwgbnVsbCxcbiAgICAgICAgICAvLyBSb2Jsb3ggZG9lcyBub3QgcHJvdmlkZSBlbWFpbFxuICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6IHRydWUsXG4gICAgICAgICAgLi4udXNlck1hcFxuICAgICAgICB9LFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgLi4ucHJvZmlsZVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0sXG4gICAgb3B0aW9uc1xuICB9O1xufTtcblxuY29uc3Qgc2FsZXNmb3JjZSA9IChvcHRpb25zKSA9PiB7XG4gIGNvbnN0IGVudmlyb25tZW50ID0gb3B0aW9ucy5lbnZpcm9ubWVudCA/PyBcInByb2R1Y3Rpb25cIjtcbiAgY29uc3QgaXNTYW5kYm94ID0gZW52aXJvbm1lbnQgPT09IFwic2FuZGJveFwiO1xuICBjb25zdCBhdXRob3JpemF0aW9uRW5kcG9pbnQgPSBvcHRpb25zLmxvZ2luVXJsID8gYGh0dHBzOi8vJHtvcHRpb25zLmxvZ2luVXJsfS9zZXJ2aWNlcy9vYXV0aDIvYXV0aG9yaXplYCA6IGlzU2FuZGJveCA/IFwiaHR0cHM6Ly90ZXN0LnNhbGVzZm9yY2UuY29tL3NlcnZpY2VzL29hdXRoMi9hdXRob3JpemVcIiA6IFwiaHR0cHM6Ly9sb2dpbi5zYWxlc2ZvcmNlLmNvbS9zZXJ2aWNlcy9vYXV0aDIvYXV0aG9yaXplXCI7XG4gIGNvbnN0IHRva2VuRW5kcG9pbnQgPSBvcHRpb25zLmxvZ2luVXJsID8gYGh0dHBzOi8vJHtvcHRpb25zLmxvZ2luVXJsfS9zZXJ2aWNlcy9vYXV0aDIvdG9rZW5gIDogaXNTYW5kYm94ID8gXCJodHRwczovL3Rlc3Quc2FsZXNmb3JjZS5jb20vc2VydmljZXMvb2F1dGgyL3Rva2VuXCIgOiBcImh0dHBzOi8vbG9naW4uc2FsZXNmb3JjZS5jb20vc2VydmljZXMvb2F1dGgyL3Rva2VuXCI7XG4gIGNvbnN0IHVzZXJJbmZvRW5kcG9pbnQgPSBvcHRpb25zLmxvZ2luVXJsID8gYGh0dHBzOi8vJHtvcHRpb25zLmxvZ2luVXJsfS9zZXJ2aWNlcy9vYXV0aDIvdXNlcmluZm9gIDogaXNTYW5kYm94ID8gXCJodHRwczovL3Rlc3Quc2FsZXNmb3JjZS5jb20vc2VydmljZXMvb2F1dGgyL3VzZXJpbmZvXCIgOiBcImh0dHBzOi8vbG9naW4uc2FsZXNmb3JjZS5jb20vc2VydmljZXMvb2F1dGgyL3VzZXJpbmZvXCI7XG4gIHJldHVybiB7XG4gICAgaWQ6IFwic2FsZXNmb3JjZVwiLFxuICAgIG5hbWU6IFwiU2FsZXNmb3JjZVwiLFxuICAgIGFzeW5jIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoeyBzdGF0ZSwgc2NvcGVzLCBjb2RlVmVyaWZpZXIsIHJlZGlyZWN0VVJJIH0pIHtcbiAgICAgIGlmICghb3B0aW9ucy5jbGllbnRJZCB8fCAhb3B0aW9ucy5jbGllbnRTZWNyZXQpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFxuICAgICAgICAgIFwiQ2xpZW50IElkIGFuZCBDbGllbnQgU2VjcmV0IGFyZSByZXF1aXJlZCBmb3IgU2FsZXNmb3JjZS4gTWFrZSBzdXJlIHRvIHByb3ZpZGUgdGhlbSBpbiB0aGUgb3B0aW9ucy5cIlxuICAgICAgICApO1xuICAgICAgICB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKFwiQ0xJRU5UX0lEX0FORF9TRUNSRVRfUkVRVUlSRURcIik7XG4gICAgICB9XG4gICAgICBpZiAoIWNvZGVWZXJpZmllcikge1xuICAgICAgICB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKFwiY29kZVZlcmlmaWVyIGlzIHJlcXVpcmVkIGZvciBTYWxlc2ZvcmNlXCIpO1xuICAgICAgfVxuICAgICAgY29uc3QgX3Njb3BlcyA9IG9wdGlvbnMuZGlzYWJsZURlZmF1bHRTY29wZSA/IFtdIDogW1wib3BlbmlkXCIsIFwiZW1haWxcIiwgXCJwcm9maWxlXCJdO1xuICAgICAgb3B0aW9ucy5zY29wZSAmJiBfc2NvcGVzLnB1c2goLi4ub3B0aW9ucy5zY29wZSk7XG4gICAgICBzY29wZXMgJiYgX3Njb3Blcy5wdXNoKC4uLnNjb3Blcyk7XG4gICAgICByZXR1cm4gY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG4gICAgICAgIGlkOiBcInNhbGVzZm9yY2VcIixcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgYXV0aG9yaXphdGlvbkVuZHBvaW50LFxuICAgICAgICBzY29wZXM6IF9zY29wZXMsXG4gICAgICAgIHN0YXRlLFxuICAgICAgICBjb2RlVmVyaWZpZXIsXG4gICAgICAgIHJlZGlyZWN0VVJJOiBvcHRpb25zLnJlZGlyZWN0VVJJIHx8IHJlZGlyZWN0VVJJXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGU6IGFzeW5jICh7IGNvZGUsIGNvZGVWZXJpZmllciwgcmVkaXJlY3RVUkkgfSkgPT4ge1xuICAgICAgcmV0dXJuIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoe1xuICAgICAgICBjb2RlLFxuICAgICAgICBjb2RlVmVyaWZpZXIsXG4gICAgICAgIHJlZGlyZWN0VVJJOiBvcHRpb25zLnJlZGlyZWN0VVJJIHx8IHJlZGlyZWN0VVJJLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICB0b2tlbkVuZHBvaW50XG4gICAgICB9KTtcbiAgICB9LFxuICAgIHJlZnJlc2hBY2Nlc3NUb2tlbjogb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gPyBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA6IGFzeW5jIChyZWZyZXNoVG9rZW4pID0+IHtcbiAgICAgIHJldHVybiByZWZyZXNoQWNjZXNzVG9rZW4oe1xuICAgICAgICByZWZyZXNoVG9rZW4sXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICBjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICBjbGllbnRTZWNyZXQ6IG9wdGlvbnMuY2xpZW50U2VjcmV0XG4gICAgICAgIH0sXG4gICAgICAgIHRva2VuRW5kcG9pbnRcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgYXN5bmMgZ2V0VXNlckluZm8odG9rZW4pIHtcbiAgICAgIGlmIChvcHRpb25zLmdldFVzZXJJbmZvKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLmdldFVzZXJJbmZvKHRva2VuKTtcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgZGF0YTogdXNlciB9ID0gYXdhaXQgYmV0dGVyRmV0Y2goXG4gICAgICAgICAgdXNlckluZm9FbmRwb2ludCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbi5hY2Nlc3NUb2tlbn1gXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggdXNlciBpbmZvIGZyb20gU2FsZXNmb3JjZVwiKTtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4odXNlcik7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgaWQ6IHVzZXIudXNlcl9pZCxcbiAgICAgICAgICAgIG5hbWU6IHVzZXIubmFtZSxcbiAgICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgICAgaW1hZ2U6IHVzZXIucGhvdG9zPy5waWN0dXJlIHx8IHVzZXIucGhvdG9zPy50aHVtYm5haWwsXG4gICAgICAgICAgICBlbWFpbFZlcmlmaWVkOiB1c2VyLmVtYWlsX3ZlcmlmaWVkID8/IGZhbHNlLFxuICAgICAgICAgICAgLi4udXNlck1hcFxuICAgICAgICAgIH0sXG4gICAgICAgICAgZGF0YTogdXNlclxuICAgICAgICB9O1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIGZldGNoIHVzZXIgaW5mbyBmcm9tIFNhbGVzZm9yY2U6XCIsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfSxcbiAgICBvcHRpb25zXG4gIH07XG59O1xuXG5jb25zdCB2ayA9IChvcHRpb25zKSA9PiB7XG4gIHJldHVybiB7XG4gICAgaWQ6IFwidmtcIixcbiAgICBuYW1lOiBcIlZLXCIsXG4gICAgYXN5bmMgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7IHN0YXRlLCBzY29wZXMsIGNvZGVWZXJpZmllciwgcmVkaXJlY3RVUkkgfSkge1xuICAgICAgY29uc3QgX3Njb3BlcyA9IG9wdGlvbnMuZGlzYWJsZURlZmF1bHRTY29wZSA/IFtdIDogW1wiZW1haWxcIiwgXCJwaG9uZVwiXTtcbiAgICAgIG9wdGlvbnMuc2NvcGUgJiYgX3Njb3Blcy5wdXNoKC4uLm9wdGlvbnMuc2NvcGUpO1xuICAgICAgc2NvcGVzICYmIF9zY29wZXMucHVzaCguLi5zY29wZXMpO1xuICAgICAgY29uc3QgYXV0aG9yaXphdGlvbkVuZHBvaW50ID0gXCJodHRwczovL2lkLnZrLmNvbS9hdXRob3JpemVcIjtcbiAgICAgIHJldHVybiBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHtcbiAgICAgICAgaWQ6IFwidmtcIixcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgYXV0aG9yaXphdGlvbkVuZHBvaW50LFxuICAgICAgICBzY29wZXM6IF9zY29wZXMsXG4gICAgICAgIHN0YXRlLFxuICAgICAgICByZWRpcmVjdFVSSSxcbiAgICAgICAgY29kZVZlcmlmaWVyXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGU6IGFzeW5jICh7XG4gICAgICBjb2RlLFxuICAgICAgY29kZVZlcmlmaWVyLFxuICAgICAgcmVkaXJlY3RVUkksXG4gICAgICBkZXZpY2VJZFxuICAgIH0pID0+IHtcbiAgICAgIHJldHVybiB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlKHtcbiAgICAgICAgY29kZSxcbiAgICAgICAgY29kZVZlcmlmaWVyLFxuICAgICAgICByZWRpcmVjdFVSSTogb3B0aW9ucy5yZWRpcmVjdFVSSSB8fCByZWRpcmVjdFVSSSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgZGV2aWNlSWQsXG4gICAgICAgIHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9pZC52ay5jb20vb2F1dGgyL2F1dGhcIlxuICAgICAgfSk7XG4gICAgfSxcbiAgICByZWZyZXNoQWNjZXNzVG9rZW46IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuID8gb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gOiBhc3luYyAocmVmcmVzaFRva2VuKSA9PiB7XG4gICAgICByZXR1cm4gcmVmcmVzaEFjY2Vzc1Rva2VuKHtcbiAgICAgICAgcmVmcmVzaFRva2VuLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgY2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgY2xpZW50S2V5OiBvcHRpb25zLmNsaWVudEtleSxcbiAgICAgICAgICBjbGllbnRTZWNyZXQ6IG9wdGlvbnMuY2xpZW50U2VjcmV0XG4gICAgICAgIH0sXG4gICAgICAgIHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9pZC52ay5jb20vb2F1dGgyL2F1dGhcIlxuICAgICAgfSk7XG4gICAgfSxcbiAgICBhc3luYyBnZXRVc2VySW5mbyhkYXRhKSB7XG4gICAgICBpZiAob3B0aW9ucy5nZXRVc2VySW5mbykge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5nZXRVc2VySW5mbyhkYXRhKTtcbiAgICAgIH1cbiAgICAgIGlmICghZGF0YS5hY2Nlc3NUb2tlbikge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGZvcm1Cb2R5ID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgIGFjY2Vzc190b2tlbjogZGF0YS5hY2Nlc3NUb2tlbixcbiAgICAgICAgY2xpZW50X2lkOiBvcHRpb25zLmNsaWVudElkXG4gICAgICB9KS50b1N0cmluZygpO1xuICAgICAgY29uc3QgeyBkYXRhOiBwcm9maWxlLCBlcnJvciB9ID0gYXdhaXQgYmV0dGVyRmV0Y2goXG4gICAgICAgIFwiaHR0cHM6Ly9pZC52ay5jb20vb2F1dGgyL3VzZXJfaW5mb1wiLFxuICAgICAgICB7XG4gICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICBib2R5OiBmb3JtQm9keVxuICAgICAgICB9XG4gICAgICApO1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKCFwcm9maWxlLnVzZXIuZW1haWwpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4ocHJvZmlsZSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgaWQ6IHByb2ZpbGUudXNlci51c2VyX2lkLFxuICAgICAgICAgIGZpcnN0X25hbWU6IHByb2ZpbGUudXNlci5maXJzdF9uYW1lLFxuICAgICAgICAgIGxhc3RfbmFtZTogcHJvZmlsZS51c2VyLmxhc3RfbmFtZSxcbiAgICAgICAgICBlbWFpbDogcHJvZmlsZS51c2VyLmVtYWlsLFxuICAgICAgICAgIGltYWdlOiBwcm9maWxlLnVzZXIuYXZhdGFyLFxuICAgICAgICAgIC8qKiBAbm90ZSBWSyBkb2VzIG5vdCBwcm92aWRlIGVtYWlsVmVyaWZpZWQqL1xuICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6ICEhcHJvZmlsZS51c2VyLmVtYWlsLFxuICAgICAgICAgIGJpcnRoZGF5OiBwcm9maWxlLnVzZXIuYmlydGhkYXksXG4gICAgICAgICAgc2V4OiBwcm9maWxlLnVzZXIuc2V4LFxuICAgICAgICAgIG5hbWU6IGAke3Byb2ZpbGUudXNlci5maXJzdF9uYW1lfSAke3Byb2ZpbGUudXNlci5sYXN0X25hbWV9YCxcbiAgICAgICAgICAuLi51c2VyTWFwXG4gICAgICAgIH0sXG4gICAgICAgIGRhdGE6IHByb2ZpbGVcbiAgICAgIH07XG4gICAgfSxcbiAgICBvcHRpb25zXG4gIH07XG59O1xuXG5jb25zdCB6b29tID0gKHVzZXJPcHRpb25zKSA9PiB7XG4gIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgcGtjZTogdHJ1ZSxcbiAgICAuLi51c2VyT3B0aW9uc1xuICB9O1xuICByZXR1cm4ge1xuICAgIGlkOiBcInpvb21cIixcbiAgICBuYW1lOiBcIlpvb21cIixcbiAgICBjcmVhdGVBdXRob3JpemF0aW9uVVJMOiBhc3luYyAoeyBzdGF0ZSwgcmVkaXJlY3RVUkksIGNvZGVWZXJpZmllciB9KSA9PiB7XG4gICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgICAgcmVzcG9uc2VfdHlwZTogXCJjb2RlXCIsXG4gICAgICAgIHJlZGlyZWN0X3VyaTogb3B0aW9ucy5yZWRpcmVjdFVSSSA/IG9wdGlvbnMucmVkaXJlY3RVUkkgOiByZWRpcmVjdFVSSSxcbiAgICAgICAgY2xpZW50X2lkOiBvcHRpb25zLmNsaWVudElkLFxuICAgICAgICBzdGF0ZVxuICAgICAgfSk7XG4gICAgICBpZiAob3B0aW9ucy5wa2NlKSB7XG4gICAgICAgIGNvbnN0IGNvZGVDaGFsbGVuZ2UgPSBhd2FpdCBnZW5lcmF0ZUNvZGVDaGFsbGVuZ2UoY29kZVZlcmlmaWVyKTtcbiAgICAgICAgcGFyYW1zLnNldChcImNvZGVfY2hhbGxlbmdlX21ldGhvZFwiLCBcIlMyNTZcIik7XG4gICAgICAgIHBhcmFtcy5zZXQoXCJjb2RlX2NoYWxsZW5nZVwiLCBjb2RlQ2hhbGxlbmdlKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoXCJodHRwczovL3pvb20udXMvb2F1dGgvYXV0aG9yaXplXCIpO1xuICAgICAgdXJsLnNlYXJjaCA9IHBhcmFtcy50b1N0cmluZygpO1xuICAgICAgcmV0dXJuIHVybDtcbiAgICB9LFxuICAgIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGU6IGFzeW5jICh7IGNvZGUsIHJlZGlyZWN0VVJJLCBjb2RlVmVyaWZpZXIgfSkgPT4ge1xuICAgICAgcmV0dXJuIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoe1xuICAgICAgICBjb2RlLFxuICAgICAgICByZWRpcmVjdFVSSTogb3B0aW9ucy5yZWRpcmVjdFVSSSB8fCByZWRpcmVjdFVSSSxcbiAgICAgICAgY29kZVZlcmlmaWVyLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICB0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vem9vbS51cy9vYXV0aC90b2tlblwiLFxuICAgICAgICBhdXRoZW50aWNhdGlvbjogXCJwb3N0XCJcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgYXN5bmMgZ2V0VXNlckluZm8odG9rZW4pIHtcbiAgICAgIGlmIChvcHRpb25zLmdldFVzZXJJbmZvKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLmdldFVzZXJJbmZvKHRva2VuKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgZGF0YTogcHJvZmlsZSwgZXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKFxuICAgICAgICBcImh0dHBzOi8vYXBpLnpvb20udXMvdjIvdXNlcnMvbWVcIixcbiAgICAgICAge1xuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIGF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbi5hY2Nlc3NUb2tlbn1gXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApO1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgY29uc3QgdXNlck1hcCA9IGF3YWl0IG9wdGlvbnMubWFwUHJvZmlsZVRvVXNlcj8uKHByb2ZpbGUpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdXNlcjoge1xuICAgICAgICAgIGlkOiBwcm9maWxlLmlkLFxuICAgICAgICAgIG5hbWU6IHByb2ZpbGUuZGlzcGxheV9uYW1lLFxuICAgICAgICAgIGltYWdlOiBwcm9maWxlLnBpY191cmwsXG4gICAgICAgICAgZW1haWw6IHByb2ZpbGUuZW1haWwsXG4gICAgICAgICAgZW1haWxWZXJpZmllZDogQm9vbGVhbihwcm9maWxlLnZlcmlmaWVkKSxcbiAgICAgICAgICAuLi51c2VyTWFwXG4gICAgICAgIH0sXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAuLi5wcm9maWxlXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9O1xufTtcblxuY29uc3Qga2FrYW8gPSAob3B0aW9ucykgPT4ge1xuICByZXR1cm4ge1xuICAgIGlkOiBcImtha2FvXCIsXG4gICAgbmFtZTogXCJLYWthb1wiLFxuICAgIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoeyBzdGF0ZSwgc2NvcGVzLCByZWRpcmVjdFVSSSB9KSB7XG4gICAgICBjb25zdCBfc2NvcGVzID0gb3B0aW9ucy5kaXNhYmxlRGVmYXVsdFNjb3BlID8gW10gOiBbXCJhY2NvdW50X2VtYWlsXCIsIFwicHJvZmlsZV9pbWFnZVwiLCBcInByb2ZpbGVfbmlja25hbWVcIl07XG4gICAgICBvcHRpb25zLnNjb3BlICYmIF9zY29wZXMucHVzaCguLi5vcHRpb25zLnNjb3BlKTtcbiAgICAgIHNjb3BlcyAmJiBfc2NvcGVzLnB1c2goLi4uc2NvcGVzKTtcbiAgICAgIHJldHVybiBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHtcbiAgICAgICAgaWQ6IFwia2FrYW9cIixcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgYXV0aG9yaXphdGlvbkVuZHBvaW50OiBcImh0dHBzOi8va2F1dGgua2FrYW8uY29tL29hdXRoL2F1dGhvcml6ZVwiLFxuICAgICAgICBzY29wZXM6IF9zY29wZXMsXG4gICAgICAgIHN0YXRlLFxuICAgICAgICByZWRpcmVjdFVSSVxuICAgICAgfSk7XG4gICAgfSxcbiAgICB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlOiBhc3luYyAoeyBjb2RlLCByZWRpcmVjdFVSSSB9KSA9PiB7XG4gICAgICByZXR1cm4gdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG4gICAgICAgIGNvZGUsXG4gICAgICAgIHJlZGlyZWN0VVJJLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICB0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8va2F1dGgua2FrYW8uY29tL29hdXRoL3Rva2VuXCJcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgcmVmcmVzaEFjY2Vzc1Rva2VuOiBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA/IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuIDogYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuICAgICAgcmV0dXJuIHJlZnJlc2hBY2Nlc3NUb2tlbih7XG4gICAgICAgIHJlZnJlc2hUb2tlbixcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgIGNsaWVudEtleTogb3B0aW9ucy5jbGllbnRLZXksXG4gICAgICAgICAgY2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldFxuICAgICAgICB9LFxuICAgICAgICB0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8va2F1dGgua2FrYW8uY29tL29hdXRoL3Rva2VuXCJcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgYXN5bmMgZ2V0VXNlckluZm8odG9rZW4pIHtcbiAgICAgIGlmIChvcHRpb25zLmdldFVzZXJJbmZvKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLmdldFVzZXJJbmZvKHRva2VuKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgZGF0YTogcHJvZmlsZSwgZXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKFxuICAgICAgICBcImh0dHBzOi8va2FwaS5rYWthby5jb20vdjIvdXNlci9tZVwiLFxuICAgICAgICB7XG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VuLmFjY2Vzc1Rva2VufWBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBpZiAoZXJyb3IgfHwgIXByb2ZpbGUpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4ocHJvZmlsZSk7XG4gICAgICBjb25zdCBhY2NvdW50ID0gcHJvZmlsZS5rYWthb19hY2NvdW50IHx8IHt9O1xuICAgICAgY29uc3Qga2FrYW9Qcm9maWxlID0gYWNjb3VudC5wcm9maWxlIHx8IHt9O1xuICAgICAgY29uc3QgdXNlciA9IHtcbiAgICAgICAgaWQ6IFN0cmluZyhwcm9maWxlLmlkKSxcbiAgICAgICAgbmFtZToga2FrYW9Qcm9maWxlLm5pY2tuYW1lIHx8IGFjY291bnQubmFtZSB8fCB2b2lkIDAsXG4gICAgICAgIGVtYWlsOiBhY2NvdW50LmVtYWlsLFxuICAgICAgICBpbWFnZToga2FrYW9Qcm9maWxlLnByb2ZpbGVfaW1hZ2VfdXJsIHx8IGtha2FvUHJvZmlsZS50aHVtYm5haWxfaW1hZ2VfdXJsLFxuICAgICAgICBlbWFpbFZlcmlmaWVkOiAhIWFjY291bnQuaXNfZW1haWxfdmFsaWQgJiYgISFhY2NvdW50LmlzX2VtYWlsX3ZlcmlmaWVkLFxuICAgICAgICAuLi51c2VyTWFwXG4gICAgICB9O1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdXNlcixcbiAgICAgICAgZGF0YTogcHJvZmlsZVxuICAgICAgfTtcbiAgICB9LFxuICAgIG9wdGlvbnNcbiAgfTtcbn07XG5cbmNvbnN0IG5hdmVyID0gKG9wdGlvbnMpID0+IHtcbiAgcmV0dXJuIHtcbiAgICBpZDogXCJuYXZlclwiLFxuICAgIG5hbWU6IFwiTmF2ZXJcIixcbiAgICBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHsgc3RhdGUsIHNjb3BlcywgcmVkaXJlY3RVUkkgfSkge1xuICAgICAgY29uc3QgX3Njb3BlcyA9IG9wdGlvbnMuZGlzYWJsZURlZmF1bHRTY29wZSA/IFtdIDogW1wicHJvZmlsZVwiLCBcImVtYWlsXCJdO1xuICAgICAgb3B0aW9ucy5zY29wZSAmJiBfc2NvcGVzLnB1c2goLi4ub3B0aW9ucy5zY29wZSk7XG4gICAgICBzY29wZXMgJiYgX3Njb3Blcy5wdXNoKC4uLnNjb3Blcyk7XG4gICAgICByZXR1cm4gY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG4gICAgICAgIGlkOiBcIm5hdmVyXCIsXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIGF1dGhvcml6YXRpb25FbmRwb2ludDogXCJodHRwczovL25pZC5uYXZlci5jb20vb2F1dGgyLjAvYXV0aG9yaXplXCIsXG4gICAgICAgIHNjb3BlczogX3Njb3BlcyxcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIHJlZGlyZWN0VVJJXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGU6IGFzeW5jICh7IGNvZGUsIHJlZGlyZWN0VVJJIH0pID0+IHtcbiAgICAgIHJldHVybiB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlKHtcbiAgICAgICAgY29kZSxcbiAgICAgICAgcmVkaXJlY3RVUkksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9uaWQubmF2ZXIuY29tL29hdXRoMi4wL3Rva2VuXCJcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgcmVmcmVzaEFjY2Vzc1Rva2VuOiBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA/IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuIDogYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuICAgICAgcmV0dXJuIHJlZnJlc2hBY2Nlc3NUb2tlbih7XG4gICAgICAgIHJlZnJlc2hUb2tlbixcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgIGNsaWVudEtleTogb3B0aW9ucy5jbGllbnRLZXksXG4gICAgICAgICAgY2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldFxuICAgICAgICB9LFxuICAgICAgICB0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vbmlkLm5hdmVyLmNvbS9vYXV0aDIuMC90b2tlblwiXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGFzeW5jIGdldFVzZXJJbmZvKHRva2VuKSB7XG4gICAgICBpZiAob3B0aW9ucy5nZXRVc2VySW5mbykge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5nZXRVc2VySW5mbyh0b2tlbik7XG4gICAgICB9XG4gICAgICBjb25zdCB7IGRhdGE6IHByb2ZpbGUsIGVycm9yIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaChcbiAgICAgICAgXCJodHRwczovL29wZW5hcGkubmF2ZXIuY29tL3YxL25pZC9tZVwiLFxuICAgICAgICB7XG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VuLmFjY2Vzc1Rva2VufWBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBpZiAoZXJyb3IgfHwgIXByb2ZpbGUgfHwgcHJvZmlsZS5yZXN1bHRjb2RlICE9PSBcIjAwXCIpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4ocHJvZmlsZSk7XG4gICAgICBjb25zdCByZXMgPSBwcm9maWxlLnJlc3BvbnNlIHx8IHt9O1xuICAgICAgY29uc3QgdXNlciA9IHtcbiAgICAgICAgaWQ6IHJlcy5pZCxcbiAgICAgICAgbmFtZTogcmVzLm5hbWUgfHwgcmVzLm5pY2tuYW1lLFxuICAgICAgICBlbWFpbDogcmVzLmVtYWlsLFxuICAgICAgICBpbWFnZTogcmVzLnByb2ZpbGVfaW1hZ2UsXG4gICAgICAgIGVtYWlsVmVyaWZpZWQ6IGZhbHNlLFxuICAgICAgICAuLi51c2VyTWFwXG4gICAgICB9O1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdXNlcixcbiAgICAgICAgZGF0YTogcHJvZmlsZVxuICAgICAgfTtcbiAgICB9LFxuICAgIG9wdGlvbnNcbiAgfTtcbn07XG5cbmNvbnN0IGxpbmUgPSAob3B0aW9ucykgPT4ge1xuICBjb25zdCBhdXRob3JpemF0aW9uRW5kcG9pbnQgPSBcImh0dHBzOi8vYWNjZXNzLmxpbmUubWUvb2F1dGgyL3YyLjEvYXV0aG9yaXplXCI7XG4gIGNvbnN0IHRva2VuRW5kcG9pbnQgPSBcImh0dHBzOi8vYXBpLmxpbmUubWUvb2F1dGgyL3YyLjEvdG9rZW5cIjtcbiAgY29uc3QgdXNlckluZm9FbmRwb2ludCA9IFwiaHR0cHM6Ly9hcGkubGluZS5tZS9vYXV0aDIvdjIuMS91c2VyaW5mb1wiO1xuICBjb25zdCB2ZXJpZnlJZFRva2VuRW5kcG9pbnQgPSBcImh0dHBzOi8vYXBpLmxpbmUubWUvb2F1dGgyL3YyLjEvdmVyaWZ5XCI7XG4gIHJldHVybiB7XG4gICAgaWQ6IFwibGluZVwiLFxuICAgIG5hbWU6IFwiTElORVwiLFxuICAgIGFzeW5jIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoe1xuICAgICAgc3RhdGUsXG4gICAgICBzY29wZXMsXG4gICAgICBjb2RlVmVyaWZpZXIsXG4gICAgICByZWRpcmVjdFVSSSxcbiAgICAgIGxvZ2luSGludFxuICAgIH0pIHtcbiAgICAgIGNvbnN0IF9zY29wZXMgPSBvcHRpb25zLmRpc2FibGVEZWZhdWx0U2NvcGUgPyBbXSA6IFtcIm9wZW5pZFwiLCBcInByb2ZpbGVcIiwgXCJlbWFpbFwiXTtcbiAgICAgIG9wdGlvbnMuc2NvcGUgJiYgX3Njb3Blcy5wdXNoKC4uLm9wdGlvbnMuc2NvcGUpO1xuICAgICAgc2NvcGVzICYmIF9zY29wZXMucHVzaCguLi5zY29wZXMpO1xuICAgICAgcmV0dXJuIGF3YWl0IGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoe1xuICAgICAgICBpZDogXCJsaW5lXCIsXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIGF1dGhvcml6YXRpb25FbmRwb2ludCxcbiAgICAgICAgc2NvcGVzOiBfc2NvcGVzLFxuICAgICAgICBzdGF0ZSxcbiAgICAgICAgY29kZVZlcmlmaWVyLFxuICAgICAgICByZWRpcmVjdFVSSSxcbiAgICAgICAgbG9naW5IaW50XG4gICAgICB9KTtcbiAgICB9LFxuICAgIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGU6IGFzeW5jICh7IGNvZGUsIGNvZGVWZXJpZmllciwgcmVkaXJlY3RVUkkgfSkgPT4ge1xuICAgICAgcmV0dXJuIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoe1xuICAgICAgICBjb2RlLFxuICAgICAgICBjb2RlVmVyaWZpZXIsXG4gICAgICAgIHJlZGlyZWN0VVJJLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICB0b2tlbkVuZHBvaW50XG4gICAgICB9KTtcbiAgICB9LFxuICAgIHJlZnJlc2hBY2Nlc3NUb2tlbjogb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gPyBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA6IGFzeW5jIChyZWZyZXNoVG9rZW4pID0+IHtcbiAgICAgIHJldHVybiByZWZyZXNoQWNjZXNzVG9rZW4oe1xuICAgICAgICByZWZyZXNoVG9rZW4sXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICBjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICBjbGllbnRTZWNyZXQ6IG9wdGlvbnMuY2xpZW50U2VjcmV0XG4gICAgICAgIH0sXG4gICAgICAgIHRva2VuRW5kcG9pbnRcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgYXN5bmMgdmVyaWZ5SWRUb2tlbih0b2tlbiwgbm9uY2UpIHtcbiAgICAgIGlmIChvcHRpb25zLmRpc2FibGVJZFRva2VuU2lnbkluKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zLnZlcmlmeUlkVG9rZW4pIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMudmVyaWZ5SWRUb2tlbih0b2tlbiwgbm9uY2UpO1xuICAgICAgfVxuICAgICAgY29uc3QgYm9keSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgICAgIGJvZHkuc2V0KFwiaWRfdG9rZW5cIiwgdG9rZW4pO1xuICAgICAgYm9keS5zZXQoXCJjbGllbnRfaWRcIiwgb3B0aW9ucy5jbGllbnRJZCk7XG4gICAgICBpZiAobm9uY2UpIGJvZHkuc2V0KFwibm9uY2VcIiwgbm9uY2UpO1xuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgYmV0dGVyRmV0Y2goXG4gICAgICAgIHZlcmlmeUlkVG9rZW5FbmRwb2ludCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAgYm9keVxuICAgICAgICB9XG4gICAgICApO1xuICAgICAgaWYgKGVycm9yIHx8ICFkYXRhKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChkYXRhLmF1ZCAhPT0gb3B0aW9ucy5jbGllbnRJZCkgcmV0dXJuIGZhbHNlO1xuICAgICAgaWYgKG5vbmNlICYmIGRhdGEubm9uY2UgJiYgZGF0YS5ub25jZSAhPT0gbm9uY2UpIHJldHVybiBmYWxzZTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgYXN5bmMgZ2V0VXNlckluZm8odG9rZW4pIHtcbiAgICAgIGlmIChvcHRpb25zLmdldFVzZXJJbmZvKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLmdldFVzZXJJbmZvKHRva2VuKTtcbiAgICAgIH1cbiAgICAgIGxldCBwcm9maWxlID0gbnVsbDtcbiAgICAgIGlmICh0b2tlbi5pZFRva2VuKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcHJvZmlsZSA9IGRlY29kZUp3dCh0b2tlbi5pZFRva2VuKTtcbiAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghcHJvZmlsZSkge1xuICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGJldHRlckZldGNoKHVzZXJJbmZvRW5kcG9pbnQsIHtcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBhdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW4uYWNjZXNzVG9rZW59YFxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHByb2ZpbGUgPSBkYXRhIHx8IG51bGw7XG4gICAgICB9XG4gICAgICBpZiAoIXByb2ZpbGUpIHJldHVybiBudWxsO1xuICAgICAgY29uc3QgdXNlck1hcCA9IGF3YWl0IG9wdGlvbnMubWFwUHJvZmlsZVRvVXNlcj8uKHByb2ZpbGUpO1xuICAgICAgY29uc3QgaWQgPSBwcm9maWxlLnN1YiB8fCBwcm9maWxlLnVzZXJJZDtcbiAgICAgIGNvbnN0IG5hbWUgPSBwcm9maWxlLm5hbWUgfHwgcHJvZmlsZS5kaXNwbGF5TmFtZTtcbiAgICAgIGNvbnN0IGltYWdlID0gcHJvZmlsZS5waWN0dXJlIHx8IHByb2ZpbGUucGljdHVyZVVybCB8fCB2b2lkIDA7XG4gICAgICBjb25zdCBlbWFpbCA9IHByb2ZpbGUuZW1haWw7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgaWQsXG4gICAgICAgICAgbmFtZSxcbiAgICAgICAgICBlbWFpbCxcbiAgICAgICAgICBpbWFnZSxcbiAgICAgICAgICAvLyBMSU5FIGRvZXMgbm90IGV4cG9zZSBlbWFpbCB2ZXJpZmljYXRpb24gc3RhdHVzIGluIElEIHRva2VuL3VzZXJpbmZvXG4gICAgICAgICAgZW1haWxWZXJpZmllZDogZmFsc2UsXG4gICAgICAgICAgLi4udXNlck1hcFxuICAgICAgICB9LFxuICAgICAgICBkYXRhOiBwcm9maWxlXG4gICAgICB9O1xuICAgIH0sXG4gICAgb3B0aW9uc1xuICB9O1xufTtcblxuY29uc3QgcGF5cGFsID0gKG9wdGlvbnMpID0+IHtcbiAgY29uc3QgZW52aXJvbm1lbnQgPSBvcHRpb25zLmVudmlyb25tZW50IHx8IFwic2FuZGJveFwiO1xuICBjb25zdCBpc1NhbmRib3ggPSBlbnZpcm9ubWVudCA9PT0gXCJzYW5kYm94XCI7XG4gIGNvbnN0IGF1dGhvcml6YXRpb25FbmRwb2ludCA9IGlzU2FuZGJveCA/IFwiaHR0cHM6Ly93d3cuc2FuZGJveC5wYXlwYWwuY29tL3NpZ25pbi9hdXRob3JpemVcIiA6IFwiaHR0cHM6Ly93d3cucGF5cGFsLmNvbS9zaWduaW4vYXV0aG9yaXplXCI7XG4gIGNvbnN0IHRva2VuRW5kcG9pbnQgPSBpc1NhbmRib3ggPyBcImh0dHBzOi8vYXBpLW0uc2FuZGJveC5wYXlwYWwuY29tL3YxL29hdXRoMi90b2tlblwiIDogXCJodHRwczovL2FwaS1tLnBheXBhbC5jb20vdjEvb2F1dGgyL3Rva2VuXCI7XG4gIGNvbnN0IHVzZXJJbmZvRW5kcG9pbnQgPSBpc1NhbmRib3ggPyBcImh0dHBzOi8vYXBpLW0uc2FuZGJveC5wYXlwYWwuY29tL3YxL2lkZW50aXR5L29hdXRoMi91c2VyaW5mb1wiIDogXCJodHRwczovL2FwaS1tLnBheXBhbC5jb20vdjEvaWRlbnRpdHkvb2F1dGgyL3VzZXJpbmZvXCI7XG4gIHJldHVybiB7XG4gICAgaWQ6IFwicGF5cGFsXCIsXG4gICAgbmFtZTogXCJQYXlQYWxcIixcbiAgICBhc3luYyBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHsgc3RhdGUsIGNvZGVWZXJpZmllciwgcmVkaXJlY3RVUkkgfSkge1xuICAgICAgaWYgKCFvcHRpb25zLmNsaWVudElkIHx8ICFvcHRpb25zLmNsaWVudFNlY3JldCkge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXG4gICAgICAgICAgXCJDbGllbnQgSWQgYW5kIENsaWVudCBTZWNyZXQgaXMgcmVxdWlyZWQgZm9yIFBheVBhbC4gTWFrZSBzdXJlIHRvIHByb3ZpZGUgdGhlbSBpbiB0aGUgb3B0aW9ucy5cIlxuICAgICAgICApO1xuICAgICAgICB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKFwiQ0xJRU5UX0lEX0FORF9TRUNSRVRfUkVRVUlSRURcIik7XG4gICAgICB9XG4gICAgICBjb25zdCBfc2NvcGVzID0gW107XG4gICAgICBjb25zdCB1cmwgPSBhd2FpdCBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHtcbiAgICAgICAgaWQ6IFwicGF5cGFsXCIsXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIGF1dGhvcml6YXRpb25FbmRwb2ludCxcbiAgICAgICAgc2NvcGVzOiBfc2NvcGVzLFxuICAgICAgICBzdGF0ZSxcbiAgICAgICAgY29kZVZlcmlmaWVyLFxuICAgICAgICByZWRpcmVjdFVSSSxcbiAgICAgICAgcHJvbXB0OiBvcHRpb25zLnByb21wdFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdXJsO1xuICAgIH0sXG4gICAgdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgcmVkaXJlY3RVUkkgfSkgPT4ge1xuICAgICAgY29uc3QgY3JlZGVudGlhbHMgPSBCdWZmZXIuZnJvbShcbiAgICAgICAgYCR7b3B0aW9ucy5jbGllbnRJZH06JHtvcHRpb25zLmNsaWVudFNlY3JldH1gXG4gICAgICApLnRvU3RyaW5nKFwiYmFzZTY0XCIpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBiZXR0ZXJGZXRjaCh0b2tlbkVuZHBvaW50LCB7XG4gICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmFzaWMgJHtjcmVkZW50aWFsc31gLFxuICAgICAgICAgICAgQWNjZXB0OiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIFwiQWNjZXB0LUxhbmd1YWdlXCI6IFwiZW5fVVNcIixcbiAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIGJvZHk6IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgICAgICAgZ3JhbnRfdHlwZTogXCJhdXRob3JpemF0aW9uX2NvZGVcIixcbiAgICAgICAgICAgIGNvZGUsXG4gICAgICAgICAgICByZWRpcmVjdF91cmk6IHJlZGlyZWN0VVJJXG4gICAgICAgICAgfSkudG9TdHJpbmcoKVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcIkZBSUxFRF9UT19HRVRfQUNDRVNTX1RPS0VOXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRhdGEgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgICAgYWNjZXNzVG9rZW46IGRhdGEuYWNjZXNzX3Rva2VuLFxuICAgICAgICAgIHJlZnJlc2hUb2tlbjogZGF0YS5yZWZyZXNoX3Rva2VuLFxuICAgICAgICAgIGFjY2Vzc1Rva2VuRXhwaXJlc0F0OiBkYXRhLmV4cGlyZXNfaW4gPyBuZXcgRGF0ZShEYXRlLm5vdygpICsgZGF0YS5leHBpcmVzX2luICogMWUzKSA6IHZvaWQgMCxcbiAgICAgICAgICBpZFRva2VuOiBkYXRhLmlkX3Rva2VuXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJQYXlQYWwgdG9rZW4gZXhjaGFuZ2UgZmFpbGVkOlwiLCBlcnJvcik7XG4gICAgICAgIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJGQUlMRURfVE9fR0VUX0FDQ0VTU19UT0tFTlwiKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHJlZnJlc2hBY2Nlc3NUb2tlbjogb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gPyBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA6IGFzeW5jIChyZWZyZXNoVG9rZW4pID0+IHtcbiAgICAgIGNvbnN0IGNyZWRlbnRpYWxzID0gQnVmZmVyLmZyb20oXG4gICAgICAgIGAke29wdGlvbnMuY2xpZW50SWR9OiR7b3B0aW9ucy5jbGllbnRTZWNyZXR9YFxuICAgICAgKS50b1N0cmluZyhcImJhc2U2NFwiKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYmV0dGVyRmV0Y2godG9rZW5FbmRwb2ludCwge1xuICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJhc2ljICR7Y3JlZGVudGlhbHN9YCxcbiAgICAgICAgICAgIEFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICBcIkFjY2VwdC1MYW5ndWFnZVwiOiBcImVuX1VTXCIsXG4gICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICBib2R5OiBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgICAgICAgIGdyYW50X3R5cGU6IFwicmVmcmVzaF90b2tlblwiLFxuICAgICAgICAgICAgcmVmcmVzaF90b2tlbjogcmVmcmVzaFRva2VuXG4gICAgICAgICAgfSkudG9TdHJpbmcoKVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcIkZBSUxFRF9UT19SRUZSRVNIX0FDQ0VTU19UT0tFTlwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBhY2Nlc3NUb2tlbjogZGF0YS5hY2Nlc3NfdG9rZW4sXG4gICAgICAgICAgcmVmcmVzaFRva2VuOiBkYXRhLnJlZnJlc2hfdG9rZW4sXG4gICAgICAgICAgYWNjZXNzVG9rZW5FeHBpcmVzQXQ6IGRhdGEuZXhwaXJlc19pbiA/IG5ldyBEYXRlKERhdGUubm93KCkgKyBkYXRhLmV4cGlyZXNfaW4gKiAxZTMpIDogdm9pZCAwXG4gICAgICAgIH07XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJQYXlQYWwgdG9rZW4gcmVmcmVzaCBmYWlsZWQ6XCIsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcIkZBSUxFRF9UT19SRUZSRVNIX0FDQ0VTU19UT0tFTlwiKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGFzeW5jIHZlcmlmeUlkVG9rZW4odG9rZW4sIG5vbmNlKSB7XG4gICAgICBpZiAob3B0aW9ucy5kaXNhYmxlSWRUb2tlblNpZ25Jbikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAob3B0aW9ucy52ZXJpZnlJZFRva2VuKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLnZlcmlmeUlkVG9rZW4odG9rZW4sIG5vbmNlKTtcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBheWxvYWQgPSBkZWNvZGVKd3QodG9rZW4pO1xuICAgICAgICByZXR1cm4gISFwYXlsb2FkLnN1YjtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byB2ZXJpZnkgUGF5UGFsIElEIHRva2VuOlwiLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGFzeW5jIGdldFVzZXJJbmZvKHRva2VuKSB7XG4gICAgICBpZiAob3B0aW9ucy5nZXRVc2VySW5mbykge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5nZXRVc2VySW5mbyh0b2tlbik7XG4gICAgICB9XG4gICAgICBpZiAoIXRva2VuLmFjY2Vzc1Rva2VuKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcIkFjY2VzcyB0b2tlbiBpcyByZXF1aXJlZCB0byBmZXRjaCBQYXlQYWwgdXNlciBpbmZvXCIpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYmV0dGVyRmV0Y2goXG4gICAgICAgICAgYCR7dXNlckluZm9FbmRwb2ludH0/c2NoZW1hPXBheXBhbHYxLjFgLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VuLmFjY2Vzc1Rva2VufWAsXG4gICAgICAgICAgICAgIEFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIGlmICghcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBmZXRjaCB1c2VyIGluZm8gZnJvbSBQYXlQYWxcIik7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdXNlckluZm8gPSByZXNwb25zZS5kYXRhO1xuICAgICAgICBjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4odXNlckluZm8pO1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgaWQ6IHVzZXJJbmZvLnVzZXJfaWQsXG4gICAgICAgICAgICBuYW1lOiB1c2VySW5mby5uYW1lLFxuICAgICAgICAgICAgZW1haWw6IHVzZXJJbmZvLmVtYWlsLFxuICAgICAgICAgICAgaW1hZ2U6IHVzZXJJbmZvLnBpY3R1cmUsXG4gICAgICAgICAgICBlbWFpbFZlcmlmaWVkOiB1c2VySW5mby5lbWFpbF92ZXJpZmllZCxcbiAgICAgICAgICAgIC4uLnVzZXJNYXBcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRhdGE6IHVzZXJJbmZvXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggdXNlciBpbmZvIGZyb20gUGF5UGFsOlwiLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH0sXG4gICAgb3B0aW9uc1xuICB9O1xufTtcblxuY29uc3Qgc29jaWFsUHJvdmlkZXJzID0ge1xuICBhcHBsZSxcbiAgYXRsYXNzaWFuLFxuICBjb2duaXRvLFxuICBkaXNjb3JkLFxuICBmYWNlYm9vayxcbiAgZmlnbWEsXG4gIGdpdGh1YixcbiAgbWljcm9zb2Z0LFxuICBnb29nbGUsXG4gIGh1Z2dpbmdmYWNlLFxuICBzbGFjayxcbiAgc3BvdGlmeSxcbiAgdHdpdGNoLFxuICB0d2l0dGVyLFxuICBkcm9wYm94LFxuICBraWNrLFxuICBsaW5lYXIsXG4gIGxpbmtlZGluLFxuICBnaXRsYWIsXG4gIHRpa3RvayxcbiAgcmVkZGl0LFxuICByb2Jsb3gsXG4gIHNhbGVzZm9yY2UsXG4gIHZrLFxuICB6b29tLFxuICBub3Rpb24sXG4gIGtha2FvLFxuICBuYXZlcixcbiAgbGluZSxcbiAgcGF5cGFsXG59O1xuY29uc3Qgc29jaWFsUHJvdmlkZXJMaXN0ID0gT2JqZWN0LmtleXMoc29jaWFsUHJvdmlkZXJzKTtcbmNvbnN0IFNvY2lhbFByb3ZpZGVyTGlzdEVudW0gPSB6LmVudW0oc29jaWFsUHJvdmlkZXJMaXN0KS5vcih6LnN0cmluZygpKTtcblxuY29uc3Qgc2lnbkluU29jaWFsID0gY3JlYXRlQXV0aEVuZHBvaW50KFxuICBcIi9zaWduLWluL3NvY2lhbFwiLFxuICB7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICBib2R5OiB6Lm9iamVjdCh7XG4gICAgICAvKipcbiAgICAgICAqIENhbGxiYWNrIFVSTCB0byByZWRpcmVjdCB0byBhZnRlciB0aGUgdXNlclxuICAgICAgICogaGFzIHNpZ25lZCBpbi5cbiAgICAgICAqL1xuICAgICAgY2FsbGJhY2tVUkw6IHouc3RyaW5nKCkubWV0YSh7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIkNhbGxiYWNrIFVSTCB0byByZWRpcmVjdCB0byBhZnRlciB0aGUgdXNlciBoYXMgc2lnbmVkIGluXCJcbiAgICAgIH0pLm9wdGlvbmFsKCksXG4gICAgICAvKipcbiAgICAgICAqIGNhbGxiYWNrIHVybCB0byByZWRpcmVjdCBpZiB0aGUgdXNlciBpcyBuZXdseSByZWdpc3RlcmVkLlxuICAgICAgICpcbiAgICAgICAqIHVzZWZ1bCBpZiB5b3UgaGF2ZSBkaWZmZXJlbnQgcm91dGVzIGZvciBleGlzdGluZyB1c2VycyBhbmQgbmV3IHVzZXJzXG4gICAgICAgKi9cbiAgICAgIG5ld1VzZXJDYWxsYmFja1VSTDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgLyoqXG4gICAgICAgKiBDYWxsYmFjayB1cmwgdG8gcmVkaXJlY3QgdG8gaWYgYW4gZXJyb3IgaGFwcGVuc1xuICAgICAgICpcbiAgICAgICAqIElmIGl0J3MgaW5pdGlhdGVkIGZyb20gdGhlIGNsaWVudCBzZGsgdGhpcyBkZWZhdWx0cyB0b1xuICAgICAgICogdGhlIGN1cnJlbnQgdXJsLlxuICAgICAgICovXG4gICAgICBlcnJvckNhbGxiYWNrVVJMOiB6LnN0cmluZygpLm1ldGEoe1xuICAgICAgICBkZXNjcmlwdGlvbjogXCJDYWxsYmFjayBVUkwgdG8gcmVkaXJlY3QgdG8gaWYgYW4gZXJyb3IgaGFwcGVuc1wiXG4gICAgICB9KS5vcHRpb25hbCgpLFxuICAgICAgLyoqXG4gICAgICAgKiBPQXV0aDIgcHJvdmlkZXIgdG8gdXNlYFxuICAgICAgICovXG4gICAgICBwcm92aWRlcjogU29jaWFsUHJvdmlkZXJMaXN0RW51bSxcbiAgICAgIC8qKlxuICAgICAgICogRGlzYWJsZSBhdXRvbWF0aWMgcmVkaXJlY3Rpb24gdG8gdGhlIHByb3ZpZGVyXG4gICAgICAgKlxuICAgICAgICogVGhpcyBpcyB1c2VmdWwgaWYgeW91IHdhbnQgdG8gaGFuZGxlIHRoZSByZWRpcmVjdGlvblxuICAgICAgICogeW91cnNlbGYgbGlrZSBpbiBhIHBvcHVwIG9yIGEgZGlmZmVyZW50IHRhYi5cbiAgICAgICAqL1xuICAgICAgZGlzYWJsZVJlZGlyZWN0OiB6LmJvb2xlYW4oKS5tZXRhKHtcbiAgICAgICAgZGVzY3JpcHRpb246IFwiRGlzYWJsZSBhdXRvbWF0aWMgcmVkaXJlY3Rpb24gdG8gdGhlIHByb3ZpZGVyLiBVc2VmdWwgZm9yIGhhbmRsaW5nIHRoZSByZWRpcmVjdGlvbiB5b3Vyc2VsZlwiXG4gICAgICB9KS5vcHRpb25hbCgpLFxuICAgICAgLyoqXG4gICAgICAgKiBJRCB0b2tlbiBmcm9tIHRoZSBwcm92aWRlclxuICAgICAgICpcbiAgICAgICAqIFRoaXMgaXMgdXNlZCB0byBzaWduIGluIHRoZSB1c2VyXG4gICAgICAgKiBpZiB0aGUgdXNlciBpcyBhbHJlYWR5IHNpZ25lZCBpbiB3aXRoIHRoZVxuICAgICAgICogcHJvdmlkZXIgaW4gdGhlIGZyb250ZW5kLlxuICAgICAgICpcbiAgICAgICAqIE9ubHkgYXBwbGljYWJsZSBpZiB0aGUgcHJvdmlkZXIgc3VwcG9ydHNcbiAgICAgICAqIGl0LiBDdXJyZW50bHkgb25seSBgYXBwbGVgIGFuZCBgZ29vZ2xlYCBpc1xuICAgICAgICogc3VwcG9ydGVkIG91dCBvZiB0aGUgYm94LlxuICAgICAgICovXG4gICAgICBpZFRva2VuOiB6Lm9wdGlvbmFsKFxuICAgICAgICB6Lm9iamVjdCh7XG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogSUQgdG9rZW4gZnJvbSB0aGUgcHJvdmlkZXJcbiAgICAgICAgICAgKi9cbiAgICAgICAgICB0b2tlbjogei5zdHJpbmcoKS5tZXRhKHtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIklEIHRva2VuIGZyb20gdGhlIHByb3ZpZGVyXCJcbiAgICAgICAgICB9KSxcbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBUaGUgbm9uY2UgdXNlZCB0byBnZW5lcmF0ZSB0aGUgdG9rZW5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBub25jZTogei5zdHJpbmcoKS5tZXRhKHtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIk5vbmNlIHVzZWQgdG8gZ2VuZXJhdGUgdGhlIHRva2VuXCJcbiAgICAgICAgICB9KS5vcHRpb25hbCgpLFxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEFjY2VzcyB0b2tlbiBmcm9tIHRoZSBwcm92aWRlclxuICAgICAgICAgICAqL1xuICAgICAgICAgIGFjY2Vzc1Rva2VuOiB6LnN0cmluZygpLm1ldGEoe1xuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiQWNjZXNzIHRva2VuIGZyb20gdGhlIHByb3ZpZGVyXCJcbiAgICAgICAgICB9KS5vcHRpb25hbCgpLFxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIFJlZnJlc2ggdG9rZW4gZnJvbSB0aGUgcHJvdmlkZXJcbiAgICAgICAgICAgKi9cbiAgICAgICAgICByZWZyZXNoVG9rZW46IHouc3RyaW5nKCkubWV0YSh7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJSZWZyZXNoIHRva2VuIGZyb20gdGhlIHByb3ZpZGVyXCJcbiAgICAgICAgICB9KS5vcHRpb25hbCgpLFxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEV4cGlyeSBkYXRlIG9mIHRoZSB0b2tlblxuICAgICAgICAgICAqL1xuICAgICAgICAgIGV4cGlyZXNBdDogei5udW1iZXIoKS5tZXRhKHtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkV4cGlyeSBkYXRlIG9mIHRoZSB0b2tlblwiXG4gICAgICAgICAgfSkub3B0aW9uYWwoKVxuICAgICAgICB9KVxuICAgICAgKSxcbiAgICAgIHNjb3Blczogei5hcnJheSh6LnN0cmluZygpKS5tZXRhKHtcbiAgICAgICAgZGVzY3JpcHRpb246IFwiQXJyYXkgb2Ygc2NvcGVzIHRvIHJlcXVlc3QgZnJvbSB0aGUgcHJvdmlkZXIuIFRoaXMgd2lsbCBvdmVycmlkZSB0aGUgZGVmYXVsdCBzY29wZXMgcGFzc2VkLlwiXG4gICAgICB9KS5vcHRpb25hbCgpLFxuICAgICAgLyoqXG4gICAgICAgKiBFeHBsaWNpdGx5IHJlcXVlc3Qgc2lnbi11cFxuICAgICAgICpcbiAgICAgICAqIFNob3VsZCBiZSB1c2VkIHRvIGFsbG93IHNpZ24gdXAgd2hlblxuICAgICAgICogZGlzYWJsZUltcGxpY2l0U2lnblVwIGZvciB0aGlzIHByb3ZpZGVyIGlzXG4gICAgICAgKiB0cnVlXG4gICAgICAgKi9cbiAgICAgIHJlcXVlc3RTaWduVXA6IHouYm9vbGVhbigpLm1ldGEoe1xuICAgICAgICBkZXNjcmlwdGlvbjogXCJFeHBsaWNpdGx5IHJlcXVlc3Qgc2lnbi11cC4gVXNlZnVsIHdoZW4gZGlzYWJsZUltcGxpY2l0U2lnblVwIGlzIHRydWUgZm9yIHRoaXMgcHJvdmlkZXJcIlxuICAgICAgfSkub3B0aW9uYWwoKSxcbiAgICAgIC8qKlxuICAgICAgICogVGhlIGxvZ2luIGhpbnQgdG8gdXNlIGZvciB0aGUgYXV0aG9yaXphdGlvbiBjb2RlIHJlcXVlc3RcbiAgICAgICAqL1xuICAgICAgbG9naW5IaW50OiB6LnN0cmluZygpLm1ldGEoe1xuICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgbG9naW4gaGludCB0byB1c2UgZm9yIHRoZSBhdXRob3JpemF0aW9uIGNvZGUgcmVxdWVzdFwiXG4gICAgICB9KS5vcHRpb25hbCgpXG4gICAgfSksXG4gICAgbWV0YWRhdGE6IHtcbiAgICAgIG9wZW5hcGk6IHtcbiAgICAgICAgZGVzY3JpcHRpb246IFwiU2lnbiBpbiB3aXRoIGEgc29jaWFsIHByb3ZpZGVyXCIsXG4gICAgICAgIG9wZXJhdGlvbklkOiBcInNvY2lhbFNpZ25JblwiLFxuICAgICAgICByZXNwb25zZXM6IHtcbiAgICAgICAgICBcIjIwMFwiOiB7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJTdWNjZXNzIC0gUmV0dXJucyBlaXRoZXIgc2Vzc2lvbiBkZXRhaWxzIG9yIHJlZGlyZWN0IFVSTFwiLFxuICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICBcImFwcGxpY2F0aW9uL2pzb25cIjoge1xuICAgICAgICAgICAgICAgIHNjaGVtYToge1xuICAgICAgICAgICAgICAgICAgLy8gdG9kbzogd2UgbmVlZCBzdXBwb3J0IGZvciBtdWx0aXBsZSBzY2hlbWFcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwib2JqZWN0XCIsXG4gICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJTZXNzaW9uIHJlc3BvbnNlIHdoZW4gaWRUb2tlbiBpcyBwcm92aWRlZFwiLFxuICAgICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICByZWRpcmVjdDoge1xuICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYm9vbGVhblwiLFxuICAgICAgICAgICAgICAgICAgICAgIGVudW06IFtmYWxzZV1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdG9rZW46IHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlNlc3Npb24gdG9rZW5cIixcbiAgICAgICAgICAgICAgICAgICAgICB1cmw6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibnVsbFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbGFibGU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwib2JqZWN0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbGFibGU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZW1haWxWZXJpZmllZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYm9vbGVhblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBcImRhdGUtdGltZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBcImRhdGUtdGltZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICBcImlkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwiZW1haWxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJlbWFpbFZlcmlmaWVkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwiY3JlYXRlZEF0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwidXBkYXRlZEF0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICByZXF1aXJlZDogW1wicmVkaXJlY3RcIiwgXCJ0b2tlblwiLCBcInVzZXJcIl1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIGFzeW5jIChjKSA9PiB7XG4gICAgY29uc3QgcHJvdmlkZXIgPSBjLmNvbnRleHQuc29jaWFsUHJvdmlkZXJzLmZpbmQoXG4gICAgICAocCkgPT4gcC5pZCA9PT0gYy5ib2R5LnByb3ZpZGVyXG4gICAgKTtcbiAgICBpZiAoIXByb3ZpZGVyKSB7XG4gICAgICBjLmNvbnRleHQubG9nZ2VyLmVycm9yKFxuICAgICAgICBcIlByb3ZpZGVyIG5vdCBmb3VuZC4gTWFrZSBzdXJlIHRvIGFkZCB0aGUgcHJvdmlkZXIgaW4geW91ciBhdXRoIGNvbmZpZ1wiLFxuICAgICAgICB7XG4gICAgICAgICAgcHJvdmlkZXI6IGMuYm9keS5wcm92aWRlclxuICAgICAgICB9XG4gICAgICApO1xuICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKFwiTk9UX0ZPVU5EXCIsIHtcbiAgICAgICAgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5QUk9WSURFUl9OT1RfRk9VTkRcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoYy5ib2R5LmlkVG9rZW4pIHtcbiAgICAgIGlmICghcHJvdmlkZXIudmVyaWZ5SWRUb2tlbikge1xuICAgICAgICBjLmNvbnRleHQubG9nZ2VyLmVycm9yKFxuICAgICAgICAgIFwiUHJvdmlkZXIgZG9lcyBub3Qgc3VwcG9ydCBpZCB0b2tlbiB2ZXJpZmljYXRpb25cIixcbiAgICAgICAgICB7XG4gICAgICAgICAgICBwcm92aWRlcjogYy5ib2R5LnByb3ZpZGVyXG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJOT1RfRk9VTkRcIiwge1xuICAgICAgICAgIG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSURfVE9LRU5fTk9UX1NVUFBPUlRFRFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgdG9rZW4sIG5vbmNlIH0gPSBjLmJvZHkuaWRUb2tlbjtcbiAgICAgIGNvbnN0IHZhbGlkID0gYXdhaXQgcHJvdmlkZXIudmVyaWZ5SWRUb2tlbih0b2tlbiwgbm9uY2UpO1xuICAgICAgaWYgKCF2YWxpZCkge1xuICAgICAgICBjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiSW52YWxpZCBpZCB0b2tlblwiLCB7XG4gICAgICAgICAgcHJvdmlkZXI6IGMuYm9keS5wcm92aWRlclxuICAgICAgICB9KTtcbiAgICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHtcbiAgICAgICAgICBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLklOVkFMSURfVE9LRU5cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCB1c2VySW5mbyA9IGF3YWl0IHByb3ZpZGVyLmdldFVzZXJJbmZvKHtcbiAgICAgICAgaWRUb2tlbjogdG9rZW4sXG4gICAgICAgIGFjY2Vzc1Rva2VuOiBjLmJvZHkuaWRUb2tlbi5hY2Nlc3NUb2tlbixcbiAgICAgICAgcmVmcmVzaFRva2VuOiBjLmJvZHkuaWRUb2tlbi5yZWZyZXNoVG9rZW5cbiAgICAgIH0pO1xuICAgICAgaWYgKCF1c2VySW5mbyB8fCAhdXNlckluZm8/LnVzZXIpIHtcbiAgICAgICAgYy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBnZXQgdXNlciBpbmZvXCIsIHtcbiAgICAgICAgICBwcm92aWRlcjogYy5ib2R5LnByb3ZpZGVyXG4gICAgICAgIH0pO1xuICAgICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwge1xuICAgICAgICAgIG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuRkFJTEVEX1RPX0dFVF9VU0VSX0lORk9cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoIXVzZXJJbmZvLnVzZXIuZW1haWwpIHtcbiAgICAgICAgYy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlVzZXIgZW1haWwgbm90IGZvdW5kXCIsIHtcbiAgICAgICAgICBwcm92aWRlcjogYy5ib2R5LnByb3ZpZGVyXG4gICAgICAgIH0pO1xuICAgICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwge1xuICAgICAgICAgIG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuVVNFUl9FTUFJTF9OT1RfRk9VTkRcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgaGFuZGxlT0F1dGhVc2VySW5mbyhjLCB7XG4gICAgICAgIHVzZXJJbmZvOiB7XG4gICAgICAgICAgLi4udXNlckluZm8udXNlcixcbiAgICAgICAgICBlbWFpbDogdXNlckluZm8udXNlci5lbWFpbCxcbiAgICAgICAgICBpZDogU3RyaW5nKHVzZXJJbmZvLnVzZXIuaWQpLFxuICAgICAgICAgIG5hbWU6IHVzZXJJbmZvLnVzZXIubmFtZSB8fCBcIlwiLFxuICAgICAgICAgIGltYWdlOiB1c2VySW5mby51c2VyLmltYWdlLFxuICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6IHVzZXJJbmZvLnVzZXIuZW1haWxWZXJpZmllZCB8fCBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBhY2NvdW50OiB7XG4gICAgICAgICAgcHJvdmlkZXJJZDogcHJvdmlkZXIuaWQsXG4gICAgICAgICAgYWNjb3VudElkOiBTdHJpbmcodXNlckluZm8udXNlci5pZCksXG4gICAgICAgICAgYWNjZXNzVG9rZW46IGMuYm9keS5pZFRva2VuLmFjY2Vzc1Rva2VuXG4gICAgICAgIH0sXG4gICAgICAgIGNhbGxiYWNrVVJMOiBjLmJvZHkuY2FsbGJhY2tVUkwsXG4gICAgICAgIGRpc2FibGVTaWduVXA6IHByb3ZpZGVyLmRpc2FibGVJbXBsaWNpdFNpZ25VcCAmJiAhYy5ib2R5LnJlcXVlc3RTaWduVXAgfHwgcHJvdmlkZXIuZGlzYWJsZVNpZ25VcFxuICAgICAgfSk7XG4gICAgICBpZiAoZGF0YS5lcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwge1xuICAgICAgICAgIG1lc3NhZ2U6IGRhdGEuZXJyb3JcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBhd2FpdCBzZXRTZXNzaW9uQ29va2llKGMsIGRhdGEuZGF0YSk7XG4gICAgICByZXR1cm4gYy5qc29uKHtcbiAgICAgICAgcmVkaXJlY3Q6IGZhbHNlLFxuICAgICAgICB0b2tlbjogZGF0YS5kYXRhLnNlc3Npb24udG9rZW4sXG4gICAgICAgIHVybDogdm9pZCAwLFxuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgaWQ6IGRhdGEuZGF0YS51c2VyLmlkLFxuICAgICAgICAgIGVtYWlsOiBkYXRhLmRhdGEudXNlci5lbWFpbCxcbiAgICAgICAgICBuYW1lOiBkYXRhLmRhdGEudXNlci5uYW1lLFxuICAgICAgICAgIGltYWdlOiBkYXRhLmRhdGEudXNlci5pbWFnZSxcbiAgICAgICAgICBlbWFpbFZlcmlmaWVkOiBkYXRhLmRhdGEudXNlci5lbWFpbFZlcmlmaWVkLFxuICAgICAgICAgIGNyZWF0ZWRBdDogZGF0YS5kYXRhLnVzZXIuY3JlYXRlZEF0LFxuICAgICAgICAgIHVwZGF0ZWRBdDogZGF0YS5kYXRhLnVzZXIudXBkYXRlZEF0XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCB7IGNvZGVWZXJpZmllciwgc3RhdGUgfSA9IGF3YWl0IGdlbmVyYXRlU3RhdGUoYyk7XG4gICAgY29uc3QgdXJsID0gYXdhaXQgcHJvdmlkZXIuY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG4gICAgICBzdGF0ZSxcbiAgICAgIGNvZGVWZXJpZmllcixcbiAgICAgIHJlZGlyZWN0VVJJOiBgJHtjLmNvbnRleHQuYmFzZVVSTH0vY2FsbGJhY2svJHtwcm92aWRlci5pZH1gLFxuICAgICAgc2NvcGVzOiBjLmJvZHkuc2NvcGVzLFxuICAgICAgbG9naW5IaW50OiBjLmJvZHkubG9naW5IaW50XG4gICAgfSk7XG4gICAgcmV0dXJuIGMuanNvbih7XG4gICAgICB1cmw6IHVybC50b1N0cmluZygpLFxuICAgICAgcmVkaXJlY3Q6ICFjLmJvZHkuZGlzYWJsZVJlZGlyZWN0XG4gICAgfSk7XG4gIH1cbik7XG5jb25zdCBzaWduSW5FbWFpbCA9IGNyZWF0ZUF1dGhFbmRwb2ludChcbiAgXCIvc2lnbi1pbi9lbWFpbFwiLFxuICB7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICBib2R5OiB6Lm9iamVjdCh7XG4gICAgICAvKipcbiAgICAgICAqIEVtYWlsIG9mIHRoZSB1c2VyXG4gICAgICAgKi9cbiAgICAgIGVtYWlsOiB6LnN0cmluZygpLm1ldGEoe1xuICAgICAgICBkZXNjcmlwdGlvbjogXCJFbWFpbCBvZiB0aGUgdXNlclwiXG4gICAgICB9KSxcbiAgICAgIC8qKlxuICAgICAgICogUGFzc3dvcmQgb2YgdGhlIHVzZXJcbiAgICAgICAqL1xuICAgICAgcGFzc3dvcmQ6IHouc3RyaW5nKCkubWV0YSh7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIlBhc3N3b3JkIG9mIHRoZSB1c2VyXCJcbiAgICAgIH0pLFxuICAgICAgLyoqXG4gICAgICAgKiBDYWxsYmFjayBVUkwgdG8gdXNlIGFzIGEgcmVkaXJlY3QgZm9yIGVtYWlsXG4gICAgICAgKiB2ZXJpZmljYXRpb24gYW5kIGZvciBwb3NzaWJsZSByZWRpcmVjdHNcbiAgICAgICAqL1xuICAgICAgY2FsbGJhY2tVUkw6IHouc3RyaW5nKCkubWV0YSh7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIkNhbGxiYWNrIFVSTCB0byB1c2UgYXMgYSByZWRpcmVjdCBmb3IgZW1haWwgdmVyaWZpY2F0aW9uXCJcbiAgICAgIH0pLm9wdGlvbmFsKCksXG4gICAgICAvKipcbiAgICAgICAqIElmIHRoaXMgaXMgZmFsc2UsIHRoZSBzZXNzaW9uIHdpbGwgbm90IGJlIHJlbWVtYmVyZWRcbiAgICAgICAqIEBkZWZhdWx0IHRydWVcbiAgICAgICAqL1xuICAgICAgcmVtZW1iZXJNZTogei5ib29sZWFuKCkubWV0YSh7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIklmIHRoaXMgaXMgZmFsc2UsIHRoZSBzZXNzaW9uIHdpbGwgbm90IGJlIHJlbWVtYmVyZWQuIERlZmF1bHQgaXMgYHRydWVgLlwiXG4gICAgICB9KS5kZWZhdWx0KHRydWUpLm9wdGlvbmFsKClcbiAgICB9KSxcbiAgICBtZXRhZGF0YToge1xuICAgICAgb3BlbmFwaToge1xuICAgICAgICBkZXNjcmlwdGlvbjogXCJTaWduIGluIHdpdGggZW1haWwgYW5kIHBhc3N3b3JkXCIsXG4gICAgICAgIHJlc3BvbnNlczoge1xuICAgICAgICAgIFwiMjAwXCI6IHtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3MgLSBSZXR1cm5zIGVpdGhlciBzZXNzaW9uIGRldGFpbHMgb3IgcmVkaXJlY3QgVVJMXCIsXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgIFwiYXBwbGljYXRpb24vanNvblwiOiB7XG4gICAgICAgICAgICAgICAgc2NoZW1hOiB7XG4gICAgICAgICAgICAgICAgICAvLyB0b2RvOiB3ZSBuZWVkIHN1cHBvcnQgZm9yIG11bHRpcGxlIHNjaGVtYVxuICAgICAgICAgICAgICAgICAgdHlwZTogXCJvYmplY3RcIixcbiAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlNlc3Npb24gcmVzcG9uc2Ugd2hlbiBpZFRva2VuIGlzIHByb3ZpZGVkXCIsXG4gICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgICAgIHJlZGlyZWN0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJib29sZWFuXCIsXG4gICAgICAgICAgICAgICAgICAgICAgZW51bTogW2ZhbHNlXVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB0b2tlbjoge1xuICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiU2Vzc2lvbiB0b2tlblwiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHVybDoge1xuICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibnVsbFwiLFxuICAgICAgICAgICAgICAgICAgICAgIG51bGxhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm9iamVjdFwiLFxuICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbGFibGU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBpbWFnZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJib29sZWFuXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBcImRhdGUtdGltZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZEF0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogXCJkYXRlLXRpbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZW1haWxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZW1haWxWZXJpZmllZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjcmVhdGVkQXRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidXBkYXRlZEF0XCJcbiAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICByZXF1aXJlZDogW1wicmVkaXJlY3RcIiwgXCJ0b2tlblwiLCBcInVzZXJcIl1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIGFzeW5jIChjdHgpID0+IHtcbiAgICBpZiAoIWN0eC5jb250ZXh0Lm9wdGlvbnM/LmVtYWlsQW5kUGFzc3dvcmQ/LmVuYWJsZWQpIHtcbiAgICAgIGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcbiAgICAgICAgXCJFbWFpbCBhbmQgcGFzc3dvcmQgaXMgbm90IGVuYWJsZWQuIE1ha2Ugc3VyZSB0byBlbmFibGUgaXQgaW4gdGhlIG9wdGlvbnMgb24geW91IGBhdXRoLnRzYCBmaWxlLiBDaGVjayBgaHR0cHM6Ly9iZXR0ZXItYXV0aC5jb20vZG9jcy9hdXRoZW50aWNhdGlvbi9lbWFpbC1wYXNzd29yZGAgZm9yIG1vcmUhXCJcbiAgICAgICk7XG4gICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG4gICAgICAgIG1lc3NhZ2U6IFwiRW1haWwgYW5kIHBhc3N3b3JkIGlzIG5vdCBlbmFibGVkXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCB9ID0gY3R4LmJvZHk7XG4gICAgY29uc3QgaXNWYWxpZEVtYWlsID0gei5zdHJpbmcoKS5lbWFpbCgpLnNhZmVQYXJzZShlbWFpbCk7XG4gICAgaWYgKCFpc1ZhbGlkRW1haWwuc3VjY2Vzcykge1xuICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwge1xuICAgICAgICBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLklOVkFMSURfRU1BSUxcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCB1c2VyID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRVc2VyQnlFbWFpbChlbWFpbCwge1xuICAgICAgaW5jbHVkZUFjY291bnRzOiB0cnVlXG4gICAgfSk7XG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICBhd2FpdCBjdHguY29udGV4dC5wYXNzd29yZC5oYXNoKHBhc3N3b3JkKTtcbiAgICAgIGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlVzZXIgbm90IGZvdW5kXCIsIHsgZW1haWwgfSk7XG4gICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwge1xuICAgICAgICBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLklOVkFMSURfRU1BSUxfT1JfUEFTU1dPUkRcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBjcmVkZW50aWFsQWNjb3VudCA9IHVzZXIuYWNjb3VudHMuZmluZChcbiAgICAgIChhKSA9PiBhLnByb3ZpZGVySWQgPT09IFwiY3JlZGVudGlhbFwiXG4gICAgKTtcbiAgICBpZiAoIWNyZWRlbnRpYWxBY2NvdW50KSB7XG4gICAgICBjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJDcmVkZW50aWFsIGFjY291bnQgbm90IGZvdW5kXCIsIHsgZW1haWwgfSk7XG4gICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwge1xuICAgICAgICBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLklOVkFMSURfRU1BSUxfT1JfUEFTU1dPUkRcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBjdXJyZW50UGFzc3dvcmQgPSBjcmVkZW50aWFsQWNjb3VudD8ucGFzc3dvcmQ7XG4gICAgaWYgKCFjdXJyZW50UGFzc3dvcmQpIHtcbiAgICAgIGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlBhc3N3b3JkIG5vdCBmb3VuZFwiLCB7IGVtYWlsIH0pO1xuICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHtcbiAgICAgICAgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5JTlZBTElEX0VNQUlMX09SX1BBU1NXT1JEXG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgdmFsaWRQYXNzd29yZCA9IGF3YWl0IGN0eC5jb250ZXh0LnBhc3N3b3JkLnZlcmlmeSh7XG4gICAgICBoYXNoOiBjdXJyZW50UGFzc3dvcmQsXG4gICAgICBwYXNzd29yZFxuICAgIH0pO1xuICAgIGlmICghdmFsaWRQYXNzd29yZCkge1xuICAgICAgY3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiSW52YWxpZCBwYXNzd29yZFwiKTtcbiAgICAgIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7XG4gICAgICAgIG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSU5WQUxJRF9FTUFJTF9PUl9QQVNTV09SRFxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChjdHguY29udGV4dC5vcHRpb25zPy5lbWFpbEFuZFBhc3N3b3JkPy5yZXF1aXJlRW1haWxWZXJpZmljYXRpb24gJiYgIXVzZXIudXNlci5lbWFpbFZlcmlmaWVkKSB7XG4gICAgICBpZiAoIWN0eC5jb250ZXh0Lm9wdGlvbnM/LmVtYWlsVmVyaWZpY2F0aW9uPy5zZW5kVmVyaWZpY2F0aW9uRW1haWwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKFwiRk9SQklEREVOXCIsIHtcbiAgICAgICAgICBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkVNQUlMX05PVF9WRVJJRklFRFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChjdHguY29udGV4dC5vcHRpb25zPy5lbWFpbFZlcmlmaWNhdGlvbj8uc2VuZE9uU2lnbkluKSB7XG4gICAgICAgIGNvbnN0IHRva2VuID0gYXdhaXQgY3JlYXRlRW1haWxWZXJpZmljYXRpb25Ub2tlbihcbiAgICAgICAgICBjdHguY29udGV4dC5zZWNyZXQsXG4gICAgICAgICAgdXNlci51c2VyLmVtYWlsLFxuICAgICAgICAgIHZvaWQgMCxcbiAgICAgICAgICBjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5leHBpcmVzSW5cbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgdXJsID0gYCR7Y3R4LmNvbnRleHQuYmFzZVVSTH0vdmVyaWZ5LWVtYWlsP3Rva2VuPSR7dG9rZW59JmNhbGxiYWNrVVJMPSR7Y3R4LmJvZHkuY2FsbGJhY2tVUkwgfHwgXCIvXCJ9YDtcbiAgICAgICAgYXdhaXQgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbi5zZW5kVmVyaWZpY2F0aW9uRW1haWwoXG4gICAgICAgICAge1xuICAgICAgICAgICAgdXNlcjogdXNlci51c2VyLFxuICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgdG9rZW5cbiAgICAgICAgICB9LFxuICAgICAgICAgIGN0eC5yZXF1ZXN0XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwge1xuICAgICAgICBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkVNQUlMX05PVF9WRVJJRklFRFxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlU2Vzc2lvbihcbiAgICAgIHVzZXIudXNlci5pZCxcbiAgICAgIGN0eCxcbiAgICAgIGN0eC5ib2R5LnJlbWVtYmVyTWUgPT09IGZhbHNlXG4gICAgKTtcbiAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgIGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBjcmVhdGUgc2Vzc2lvblwiKTtcbiAgICAgIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7XG4gICAgICAgIG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuRkFJTEVEX1RPX0NSRUFURV9TRVNTSU9OXG4gICAgICB9KTtcbiAgICB9XG4gICAgYXdhaXQgc2V0U2Vzc2lvbkNvb2tpZShcbiAgICAgIGN0eCxcbiAgICAgIHtcbiAgICAgICAgc2Vzc2lvbixcbiAgICAgICAgdXNlcjogdXNlci51c2VyXG4gICAgICB9LFxuICAgICAgY3R4LmJvZHkucmVtZW1iZXJNZSA9PT0gZmFsc2VcbiAgICApO1xuICAgIHJldHVybiBjdHguanNvbih7XG4gICAgICByZWRpcmVjdDogISFjdHguYm9keS5jYWxsYmFja1VSTCxcbiAgICAgIHRva2VuOiBzZXNzaW9uLnRva2VuLFxuICAgICAgdXJsOiBjdHguYm9keS5jYWxsYmFja1VSTCxcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgaWQ6IHVzZXIudXNlci5pZCxcbiAgICAgICAgZW1haWw6IHVzZXIudXNlci5lbWFpbCxcbiAgICAgICAgbmFtZTogdXNlci51c2VyLm5hbWUsXG4gICAgICAgIGltYWdlOiB1c2VyLnVzZXIuaW1hZ2UsXG4gICAgICAgIGVtYWlsVmVyaWZpZWQ6IHVzZXIudXNlci5lbWFpbFZlcmlmaWVkLFxuICAgICAgICBjcmVhdGVkQXQ6IHVzZXIudXNlci5jcmVhdGVkQXQsXG4gICAgICAgIHVwZGF0ZWRBdDogdXNlci51c2VyLnVwZGF0ZWRBdFxuICAgICAgfVxuICAgIH0pO1xuICB9XG4pO1xuXG5jb25zdCBzY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGNvZGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgZXJyb3I6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgZGV2aWNlX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIGVycm9yX2Rlc2NyaXB0aW9uOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHN0YXRlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHVzZXI6IHouc3RyaW5nKCkub3B0aW9uYWwoKVxufSk7XG5jb25zdCBjYWxsYmFja09BdXRoID0gY3JlYXRlQXV0aEVuZHBvaW50KFxuICBcIi9jYWxsYmFjay86aWRcIixcbiAge1xuICAgIG1ldGhvZDogW1wiR0VUXCIsIFwiUE9TVFwiXSxcbiAgICBib2R5OiBzY2hlbWEub3B0aW9uYWwoKSxcbiAgICBxdWVyeTogc2NoZW1hLm9wdGlvbmFsKCksXG4gICAgbWV0YWRhdGE6IEhJREVfTUVUQURBVEFcbiAgfSxcbiAgYXN5bmMgKGMpID0+IHtcbiAgICBsZXQgcXVlcnlPckJvZHk7XG4gICAgY29uc3QgZGVmYXVsdEVycm9yVVJMID0gYy5jb250ZXh0Lm9wdGlvbnMub25BUElFcnJvcj8uZXJyb3JVUkwgfHwgYCR7Yy5jb250ZXh0LmJhc2VVUkx9L2Vycm9yYDtcbiAgICB0cnkge1xuICAgICAgaWYgKGMubWV0aG9kID09PSBcIkdFVFwiKSB7XG4gICAgICAgIHF1ZXJ5T3JCb2R5ID0gc2NoZW1hLnBhcnNlKGMucXVlcnkpO1xuICAgICAgfSBlbHNlIGlmIChjLm1ldGhvZCA9PT0gXCJQT1NUXCIpIHtcbiAgICAgICAgcXVlcnlPckJvZHkgPSBzY2hlbWEucGFyc2UoYy5ib2R5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuc3VwcG9ydGVkIG1ldGhvZFwiKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiSU5WQUxJRF9DQUxMQkFDS19SRVFVRVNUXCIsIGUpO1xuICAgICAgdGhyb3cgYy5yZWRpcmVjdChgJHtkZWZhdWx0RXJyb3JVUkx9P2Vycm9yPWludmFsaWRfY2FsbGJhY2tfcmVxdWVzdGApO1xuICAgIH1cbiAgICBjb25zdCB7IGNvZGUsIGVycm9yLCBzdGF0ZSwgZXJyb3JfZGVzY3JpcHRpb24sIGRldmljZV9pZCB9ID0gcXVlcnlPckJvZHk7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICB0aHJvdyBjLnJlZGlyZWN0KFxuICAgICAgICBgJHtkZWZhdWx0RXJyb3JVUkx9P2Vycm9yPSR7ZXJyb3J9JmVycm9yX2Rlc2NyaXB0aW9uPSR7ZXJyb3JfZGVzY3JpcHRpb259YFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKCFzdGF0ZSkge1xuICAgICAgYy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlN0YXRlIG5vdCBmb3VuZFwiLCBlcnJvcik7XG4gICAgICB0aHJvdyBjLnJlZGlyZWN0KGAke2RlZmF1bHRFcnJvclVSTH0/ZXJyb3I9c3RhdGVfbm90X2ZvdW5kYCk7XG4gICAgfVxuICAgIGNvbnN0IHtcbiAgICAgIGNvZGVWZXJpZmllcixcbiAgICAgIGNhbGxiYWNrVVJMLFxuICAgICAgbGluayxcbiAgICAgIGVycm9yVVJMLFxuICAgICAgbmV3VXNlclVSTCxcbiAgICAgIHJlcXVlc3RTaWduVXBcbiAgICB9ID0gYXdhaXQgcGFyc2VTdGF0ZShjKTtcbiAgICBmdW5jdGlvbiByZWRpcmVjdE9uRXJyb3IoZXJyb3IyKSB7XG4gICAgICBsZXQgdXJsID0gZXJyb3JVUkwgfHwgZGVmYXVsdEVycm9yVVJMO1xuICAgICAgaWYgKHVybC5pbmNsdWRlcyhcIj9cIikpIHtcbiAgICAgICAgdXJsID0gYCR7dXJsfSZlcnJvcj0ke2Vycm9yMn1gO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdXJsID0gYCR7dXJsfT9lcnJvcj0ke2Vycm9yMn1gO1xuICAgICAgfVxuICAgICAgdGhyb3cgYy5yZWRpcmVjdCh1cmwpO1xuICAgIH1cbiAgICBpZiAoIWNvZGUpIHtcbiAgICAgIGMuY29udGV4dC5sb2dnZXIuZXJyb3IoXCJDb2RlIG5vdCBmb3VuZFwiKTtcbiAgICAgIHRocm93IHJlZGlyZWN0T25FcnJvcihcIm5vX2NvZGVcIik7XG4gICAgfVxuICAgIGNvbnN0IHByb3ZpZGVyID0gYy5jb250ZXh0LnNvY2lhbFByb3ZpZGVycy5maW5kKFxuICAgICAgKHApID0+IHAuaWQgPT09IGMucGFyYW1zLmlkXG4gICAgKTtcbiAgICBpZiAoIXByb3ZpZGVyKSB7XG4gICAgICBjLmNvbnRleHQubG9nZ2VyLmVycm9yKFxuICAgICAgICBcIk9hdXRoIHByb3ZpZGVyIHdpdGggaWRcIixcbiAgICAgICAgYy5wYXJhbXMuaWQsXG4gICAgICAgIFwibm90IGZvdW5kXCJcbiAgICAgICk7XG4gICAgICB0aHJvdyByZWRpcmVjdE9uRXJyb3IoXCJvYXV0aF9wcm92aWRlcl9ub3RfZm91bmRcIik7XG4gICAgfVxuICAgIGxldCB0b2tlbnM7XG4gICAgdHJ5IHtcbiAgICAgIHRva2VucyA9IGF3YWl0IHByb3ZpZGVyLnZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoe1xuICAgICAgICBjb2RlLFxuICAgICAgICBjb2RlVmVyaWZpZXIsXG4gICAgICAgIGRldmljZUlkOiBkZXZpY2VfaWQsXG4gICAgICAgIHJlZGlyZWN0VVJJOiBgJHtjLmNvbnRleHQuYmFzZVVSTH0vY2FsbGJhY2svJHtwcm92aWRlci5pZH1gXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiXCIsIGUpO1xuICAgICAgdGhyb3cgcmVkaXJlY3RPbkVycm9yKFwiaW52YWxpZF9jb2RlXCIpO1xuICAgIH1cbiAgICBjb25zdCB1c2VySW5mbyA9IGF3YWl0IHByb3ZpZGVyLmdldFVzZXJJbmZvKHtcbiAgICAgIC4uLnRva2VucyxcbiAgICAgIHVzZXI6IGMuYm9keT8udXNlciA/IHNhZmVKU09OUGFyc2UoYy5ib2R5LnVzZXIpIDogdm9pZCAwXG4gICAgfSkudGhlbigocmVzKSA9PiByZXM/LnVzZXIpO1xuICAgIGlmICghdXNlckluZm8pIHtcbiAgICAgIGMuY29udGV4dC5sb2dnZXIuZXJyb3IoXCJVbmFibGUgdG8gZ2V0IHVzZXIgaW5mb1wiKTtcbiAgICAgIHJldHVybiByZWRpcmVjdE9uRXJyb3IoXCJ1bmFibGVfdG9fZ2V0X3VzZXJfaW5mb1wiKTtcbiAgICB9XG4gICAgaWYgKCFjYWxsYmFja1VSTCkge1xuICAgICAgYy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIk5vIGNhbGxiYWNrIFVSTCBmb3VuZFwiKTtcbiAgICAgIHRocm93IHJlZGlyZWN0T25FcnJvcihcIm5vX2NhbGxiYWNrX3VybFwiKTtcbiAgICB9XG4gICAgaWYgKGxpbmspIHtcbiAgICAgIGNvbnN0IHRydXN0ZWRQcm92aWRlcnMgPSBjLmNvbnRleHQub3B0aW9ucy5hY2NvdW50Py5hY2NvdW50TGlua2luZz8udHJ1c3RlZFByb3ZpZGVycztcbiAgICAgIGNvbnN0IGlzVHJ1c3RlZFByb3ZpZGVyID0gdHJ1c3RlZFByb3ZpZGVycz8uaW5jbHVkZXMoXG4gICAgICAgIHByb3ZpZGVyLmlkXG4gICAgICApO1xuICAgICAgaWYgKCFpc1RydXN0ZWRQcm92aWRlciAmJiAhdXNlckluZm8uZW1haWxWZXJpZmllZCB8fCBjLmNvbnRleHQub3B0aW9ucy5hY2NvdW50Py5hY2NvdW50TGlua2luZz8uZW5hYmxlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgYy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlVuYWJsZSB0byBsaW5rIGFjY291bnQgLSB1bnRydXN0ZWQgcHJvdmlkZXJcIik7XG4gICAgICAgIHJldHVybiByZWRpcmVjdE9uRXJyb3IoXCJ1bmFibGVfdG9fbGlua19hY2NvdW50XCIpO1xuICAgICAgfVxuICAgICAgY29uc3QgZXhpc3RpbmdBY2NvdW50ID0gYXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kQWNjb3VudChcbiAgICAgICAgU3RyaW5nKHVzZXJJbmZvLmlkKVxuICAgICAgKTtcbiAgICAgIGlmIChleGlzdGluZ0FjY291bnQpIHtcbiAgICAgICAgaWYgKGV4aXN0aW5nQWNjb3VudC51c2VySWQudG9TdHJpbmcoKSAhPT0gbGluay51c2VySWQudG9TdHJpbmcoKSkge1xuICAgICAgICAgIHJldHVybiByZWRpcmVjdE9uRXJyb3IoXCJhY2NvdW50X2FscmVhZHlfbGlua2VkX3RvX2RpZmZlcmVudF91c2VyXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAgICAgT2JqZWN0LmVudHJpZXMoe1xuICAgICAgICAgICAgYWNjZXNzVG9rZW46IGF3YWl0IHNldFRva2VuVXRpbCh0b2tlbnMuYWNjZXNzVG9rZW4sIGMuY29udGV4dCksXG4gICAgICAgICAgICByZWZyZXNoVG9rZW46IGF3YWl0IHNldFRva2VuVXRpbCh0b2tlbnMucmVmcmVzaFRva2VuLCBjLmNvbnRleHQpLFxuICAgICAgICAgICAgaWRUb2tlbjogdG9rZW5zLmlkVG9rZW4sXG4gICAgICAgICAgICBhY2Nlc3NUb2tlbkV4cGlyZXNBdDogdG9rZW5zLmFjY2Vzc1Rva2VuRXhwaXJlc0F0LFxuICAgICAgICAgICAgcmVmcmVzaFRva2VuRXhwaXJlc0F0OiB0b2tlbnMucmVmcmVzaFRva2VuRXhwaXJlc0F0LFxuICAgICAgICAgICAgc2NvcGU6IHRva2Vucy5zY29wZXM/LmpvaW4oXCIsXCIpXG4gICAgICAgICAgfSkuZmlsdGVyKChbXywgdmFsdWVdKSA9PiB2YWx1ZSAhPT0gdm9pZCAwKVxuICAgICAgICApO1xuICAgICAgICBhd2FpdCBjLmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZUFjY291bnQoXG4gICAgICAgICAgZXhpc3RpbmdBY2NvdW50LmlkLFxuICAgICAgICAgIHVwZGF0ZURhdGFcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IG5ld0FjY291bnQgPSBhd2FpdCBjLmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZUFjY291bnQoXG4gICAgICAgICAge1xuICAgICAgICAgICAgdXNlcklkOiBsaW5rLnVzZXJJZCxcbiAgICAgICAgICAgIHByb3ZpZGVySWQ6IHByb3ZpZGVyLmlkLFxuICAgICAgICAgICAgYWNjb3VudElkOiBTdHJpbmcodXNlckluZm8uaWQpLFxuICAgICAgICAgICAgLi4udG9rZW5zLFxuICAgICAgICAgICAgYWNjZXNzVG9rZW46IGF3YWl0IHNldFRva2VuVXRpbCh0b2tlbnMuYWNjZXNzVG9rZW4sIGMuY29udGV4dCksXG4gICAgICAgICAgICByZWZyZXNoVG9rZW46IGF3YWl0IHNldFRva2VuVXRpbCh0b2tlbnMucmVmcmVzaFRva2VuLCBjLmNvbnRleHQpLFxuICAgICAgICAgICAgc2NvcGU6IHRva2Vucy5zY29wZXM/LmpvaW4oXCIsXCIpXG4gICAgICAgICAgfSxcbiAgICAgICAgICBjXG4gICAgICAgICk7XG4gICAgICAgIGlmICghbmV3QWNjb3VudCkge1xuICAgICAgICAgIHJldHVybiByZWRpcmVjdE9uRXJyb3IoXCJ1bmFibGVfdG9fbGlua19hY2NvdW50XCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsZXQgdG9SZWRpcmVjdFRvMjtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVybCA9IGNhbGxiYWNrVVJMO1xuICAgICAgICB0b1JlZGlyZWN0VG8yID0gdXJsLnRvU3RyaW5nKCk7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgdG9SZWRpcmVjdFRvMiA9IGNhbGxiYWNrVVJMO1xuICAgICAgfVxuICAgICAgdGhyb3cgYy5yZWRpcmVjdCh0b1JlZGlyZWN0VG8yKTtcbiAgICB9XG4gICAgaWYgKCF1c2VySW5mby5lbWFpbCkge1xuICAgICAgYy5jb250ZXh0LmxvZ2dlci5lcnJvcihcbiAgICAgICAgXCJQcm92aWRlciBkaWQgbm90IHJldHVybiBlbWFpbC4gVGhpcyBjb3VsZCBiZSBkdWUgdG8gbWlzY29uZmlndXJhdGlvbiBpbiB0aGUgcHJvdmlkZXIgc2V0dGluZ3MuXCJcbiAgICAgICk7XG4gICAgICByZXR1cm4gcmVkaXJlY3RPbkVycm9yKFwiZW1haWxfbm90X2ZvdW5kXCIpO1xuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVPQXV0aFVzZXJJbmZvKGMsIHtcbiAgICAgIHVzZXJJbmZvOiB7XG4gICAgICAgIC4uLnVzZXJJbmZvLFxuICAgICAgICBpZDogU3RyaW5nKHVzZXJJbmZvLmlkKSxcbiAgICAgICAgZW1haWw6IHVzZXJJbmZvLmVtYWlsLFxuICAgICAgICBuYW1lOiB1c2VySW5mby5uYW1lIHx8IHVzZXJJbmZvLmVtYWlsXG4gICAgICB9LFxuICAgICAgYWNjb3VudDoge1xuICAgICAgICBwcm92aWRlcklkOiBwcm92aWRlci5pZCxcbiAgICAgICAgYWNjb3VudElkOiBTdHJpbmcodXNlckluZm8uaWQpLFxuICAgICAgICAuLi50b2tlbnMsXG4gICAgICAgIHNjb3BlOiB0b2tlbnMuc2NvcGVzPy5qb2luKFwiLFwiKVxuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrVVJMLFxuICAgICAgZGlzYWJsZVNpZ25VcDogcHJvdmlkZXIuZGlzYWJsZUltcGxpY2l0U2lnblVwICYmICFyZXF1ZXN0U2lnblVwIHx8IHByb3ZpZGVyLm9wdGlvbnM/LmRpc2FibGVTaWduVXAsXG4gICAgICBvdmVycmlkZVVzZXJJbmZvOiBwcm92aWRlci5vcHRpb25zPy5vdmVycmlkZVVzZXJJbmZvT25TaWduSW5cbiAgICB9KTtcbiAgICBpZiAocmVzdWx0LmVycm9yKSB7XG4gICAgICBjLmNvbnRleHQubG9nZ2VyLmVycm9yKHJlc3VsdC5lcnJvci5zcGxpdChcIiBcIikuam9pbihcIl9cIikpO1xuICAgICAgcmV0dXJuIHJlZGlyZWN0T25FcnJvcihyZXN1bHQuZXJyb3Iuc3BsaXQoXCIgXCIpLmpvaW4oXCJfXCIpKTtcbiAgICB9XG4gICAgY29uc3QgeyBzZXNzaW9uLCB1c2VyIH0gPSByZXN1bHQuZGF0YTtcbiAgICBhd2FpdCBzZXRTZXNzaW9uQ29va2llKGMsIHtcbiAgICAgIHNlc3Npb24sXG4gICAgICB1c2VyXG4gICAgfSk7XG4gICAgbGV0IHRvUmVkaXJlY3RUbztcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXJsID0gcmVzdWx0LmlzUmVnaXN0ZXIgPyBuZXdVc2VyVVJMIHx8IGNhbGxiYWNrVVJMIDogY2FsbGJhY2tVUkw7XG4gICAgICB0b1JlZGlyZWN0VG8gPSB1cmwudG9TdHJpbmcoKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHRvUmVkaXJlY3RUbyA9IHJlc3VsdC5pc1JlZ2lzdGVyID8gbmV3VXNlclVSTCB8fCBjYWxsYmFja1VSTCA6IGNhbGxiYWNrVVJMO1xuICAgIH1cbiAgICB0aHJvdyBjLnJlZGlyZWN0KHRvUmVkaXJlY3RUbyk7XG4gIH1cbik7XG5cbmNvbnN0IHNpZ25PdXQgPSBjcmVhdGVBdXRoRW5kcG9pbnQoXG4gIFwiL3NpZ24tb3V0XCIsXG4gIHtcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIHJlcXVpcmVIZWFkZXJzOiB0cnVlLFxuICAgIG1ldGFkYXRhOiB7XG4gICAgICBvcGVuYXBpOiB7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIlNpZ24gb3V0IHRoZSBjdXJyZW50IHVzZXJcIixcbiAgICAgICAgcmVzcG9uc2VzOiB7XG4gICAgICAgICAgXCIyMDBcIjoge1xuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICBcImFwcGxpY2F0aW9uL2pzb25cIjoge1xuICAgICAgICAgICAgICAgIHNjaGVtYToge1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJvYmplY3RcIixcbiAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2Vzczoge1xuICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYm9vbGVhblwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIGFzeW5jIChjdHgpID0+IHtcbiAgICBjb25zdCBzZXNzaW9uQ29va2llVG9rZW4gPSBhd2FpdCBjdHguZ2V0U2lnbmVkQ29va2llKFxuICAgICAgY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuc2Vzc2lvblRva2VuLm5hbWUsXG4gICAgICBjdHguY29udGV4dC5zZWNyZXRcbiAgICApO1xuICAgIGlmICghc2Vzc2lvbkNvb2tpZVRva2VuKSB7XG4gICAgICBkZWxldGVTZXNzaW9uQ29va2llKGN0eCk7XG4gICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG4gICAgICAgIG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuRkFJTEVEX1RPX0dFVF9TRVNTSU9OXG4gICAgICB9KTtcbiAgICB9XG4gICAgYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVNlc3Npb24oc2Vzc2lvbkNvb2tpZVRva2VuKTtcbiAgICBkZWxldGVTZXNzaW9uQ29va2llKGN0eCk7XG4gICAgcmV0dXJuIGN0eC5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWVcbiAgICB9KTtcbiAgfVxuKTtcblxuZnVuY3Rpb24gcmVkaXJlY3RFcnJvcihjdHgsIGNhbGxiYWNrVVJMLCBxdWVyeSkge1xuICBjb25zdCB1cmwgPSBjYWxsYmFja1VSTCA/IG5ldyBVUkwoY2FsbGJhY2tVUkwsIGN0eC5iYXNlVVJMKSA6IG5ldyBVUkwoYCR7Y3R4LmJhc2VVUkx9L2Vycm9yYCk7XG4gIGlmIChxdWVyeSlcbiAgICBPYmplY3QuZW50cmllcyhxdWVyeSkuZm9yRWFjaCgoW2ssIHZdKSA9PiB1cmwuc2VhcmNoUGFyYW1zLnNldChrLCB2KSk7XG4gIHJldHVybiB1cmwuaHJlZjtcbn1cbmZ1bmN0aW9uIHJlZGlyZWN0Q2FsbGJhY2soY3R4LCBjYWxsYmFja1VSTCwgcXVlcnkpIHtcbiAgY29uc3QgdXJsID0gbmV3IFVSTChjYWxsYmFja1VSTCwgY3R4LmJhc2VVUkwpO1xuICBpZiAocXVlcnkpXG4gICAgT2JqZWN0LmVudHJpZXMocXVlcnkpLmZvckVhY2goKFtrLCB2XSkgPT4gdXJsLnNlYXJjaFBhcmFtcy5zZXQoaywgdikpO1xuICByZXR1cm4gdXJsLmhyZWY7XG59XG5jb25zdCByZXF1ZXN0UGFzc3dvcmRSZXNldCA9IGNyZWF0ZUF1dGhFbmRwb2ludChcbiAgXCIvcmVxdWVzdC1wYXNzd29yZC1yZXNldFwiLFxuICB7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICBib2R5OiB6Lm9iamVjdCh7XG4gICAgICAvKipcbiAgICAgICAqIFRoZSBlbWFpbCBhZGRyZXNzIG9mIHRoZSB1c2VyIHRvIHNlbmQgYSBwYXNzd29yZCByZXNldCBlbWFpbCB0by5cbiAgICAgICAqL1xuICAgICAgZW1haWw6IHouZW1haWwoKS5tZXRhKHtcbiAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIGVtYWlsIGFkZHJlc3Mgb2YgdGhlIHVzZXIgdG8gc2VuZCBhIHBhc3N3b3JkIHJlc2V0IGVtYWlsIHRvXCJcbiAgICAgIH0pLFxuICAgICAgLyoqXG4gICAgICAgKiBUaGUgVVJMIHRvIHJlZGlyZWN0IHRoZSB1c2VyIHRvIHJlc2V0IHRoZWlyIHBhc3N3b3JkLlxuICAgICAgICogSWYgdGhlIHRva2VuIGlzbid0IHZhbGlkIG9yIGV4cGlyZWQsIGl0J2xsIGJlIHJlZGlyZWN0ZWQgd2l0aCBhIHF1ZXJ5IHBhcmFtZXRlciBgP1xuICAgICAgICogZXJyb3I9SU5WQUxJRF9UT0tFTmAuIElmIHRoZSB0b2tlbiBpcyB2YWxpZCwgaXQnbGwgYmUgcmVkaXJlY3RlZCB3aXRoIGEgcXVlcnkgcGFyYW1ldGVyIGA/XG4gICAgICAgKiB0b2tlbj1WQUxJRF9UT0tFTlxuICAgICAgICovXG4gICAgICByZWRpcmVjdFRvOiB6LnN0cmluZygpLm1ldGEoe1xuICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgVVJMIHRvIHJlZGlyZWN0IHRoZSB1c2VyIHRvIHJlc2V0IHRoZWlyIHBhc3N3b3JkLiBJZiB0aGUgdG9rZW4gaXNuJ3QgdmFsaWQgb3IgZXhwaXJlZCwgaXQnbGwgYmUgcmVkaXJlY3RlZCB3aXRoIGEgcXVlcnkgcGFyYW1ldGVyIGA/ZXJyb3I9SU5WQUxJRF9UT0tFTmAuIElmIHRoZSB0b2tlbiBpcyB2YWxpZCwgaXQnbGwgYmUgcmVkaXJlY3RlZCB3aXRoIGEgcXVlcnkgcGFyYW1ldGVyIGA/dG9rZW49VkFMSURfVE9LRU5cIlxuICAgICAgfSkub3B0aW9uYWwoKVxuICAgIH0pLFxuICAgIG1ldGFkYXRhOiB7XG4gICAgICBvcGVuYXBpOiB7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIlNlbmQgYSBwYXNzd29yZCByZXNldCBlbWFpbCB0byB0aGUgdXNlclwiLFxuICAgICAgICByZXNwb25zZXM6IHtcbiAgICAgICAgICBcIjIwMFwiOiB7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgIFwiYXBwbGljYXRpb24vanNvblwiOiB7XG4gICAgICAgICAgICAgICAgc2NoZW1hOiB7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcIm9iamVjdFwiLFxuICAgICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJvb2xlYW5cIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LFxuICBhc3luYyAoY3R4KSA9PiB7XG4gICAgaWYgKCFjdHguY29udGV4dC5vcHRpb25zLmVtYWlsQW5kUGFzc3dvcmQ/LnNlbmRSZXNldFBhc3N3b3JkKSB7XG4gICAgICBjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXG4gICAgICAgIFwiUmVzZXQgcGFzc3dvcmQgaXNuJ3QgZW5hYmxlZC5QbGVhc2UgcGFzcyBhbiBlbWFpbEFuZFBhc3N3b3JkLnNlbmRSZXNldFBhc3N3b3JkIGZ1bmN0aW9uIGluIHlvdXIgYXV0aCBjb25maWchXCJcbiAgICAgICk7XG4gICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG4gICAgICAgIG1lc3NhZ2U6IFwiUmVzZXQgcGFzc3dvcmQgaXNuJ3QgZW5hYmxlZFwiXG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgeyBlbWFpbCwgcmVkaXJlY3RUbyB9ID0gY3R4LmJvZHk7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVXNlckJ5RW1haWwoZW1haWwsIHtcbiAgICAgIGluY2x1ZGVBY2NvdW50czogdHJ1ZVxuICAgIH0pO1xuICAgIGlmICghdXNlcikge1xuICAgICAgY3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiUmVzZXQgUGFzc3dvcmQ6IFVzZXIgbm90IGZvdW5kXCIsIHsgZW1haWwgfSk7XG4gICAgICByZXR1cm4gY3R4Lmpzb24oe1xuICAgICAgICBzdGF0dXM6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6IFwiSWYgdGhpcyBlbWFpbCBleGlzdHMgaW4gb3VyIHN5c3RlbSwgY2hlY2sgeW91ciBlbWFpbCBmb3IgdGhlIHJlc2V0IGxpbmtcIlxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IGRlZmF1bHRFeHBpcmVzSW4gPSA2MCAqIDYwICogMTtcbiAgICBjb25zdCBleHBpcmVzQXQgPSBnZXREYXRlKFxuICAgICAgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkLnJlc2V0UGFzc3dvcmRUb2tlbkV4cGlyZXNJbiB8fCBkZWZhdWx0RXhwaXJlc0luLFxuICAgICAgXCJzZWNcIlxuICAgICk7XG4gICAgY29uc3QgdmVyaWZpY2F0aW9uVG9rZW4gPSBnZW5lcmF0ZUlkKDI0KTtcbiAgICBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlVmVyaWZpY2F0aW9uVmFsdWUoXG4gICAgICB7XG4gICAgICAgIHZhbHVlOiB1c2VyLnVzZXIuaWQsXG4gICAgICAgIGlkZW50aWZpZXI6IGByZXNldC1wYXNzd29yZDoke3ZlcmlmaWNhdGlvblRva2VufWAsXG4gICAgICAgIGV4cGlyZXNBdFxuICAgICAgfSxcbiAgICAgIGN0eFxuICAgICk7XG4gICAgY29uc3QgY2FsbGJhY2tVUkwgPSByZWRpcmVjdFRvID8gZW5jb2RlVVJJQ29tcG9uZW50KHJlZGlyZWN0VG8pIDogXCJcIjtcbiAgICBjb25zdCB1cmwgPSBgJHtjdHguY29udGV4dC5iYXNlVVJMfS9yZXNldC1wYXNzd29yZC8ke3ZlcmlmaWNhdGlvblRva2VufT9jYWxsYmFja1VSTD0ke2NhbGxiYWNrVVJMfWA7XG4gICAgYXdhaXQgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkLnNlbmRSZXNldFBhc3N3b3JkKFxuICAgICAge1xuICAgICAgICB1c2VyOiB1c2VyLnVzZXIsXG4gICAgICAgIHVybCxcbiAgICAgICAgdG9rZW46IHZlcmlmaWNhdGlvblRva2VuXG4gICAgICB9LFxuICAgICAgY3R4LnJlcXVlc3RcbiAgICApO1xuICAgIHJldHVybiBjdHguanNvbih7XG4gICAgICBzdGF0dXM6IHRydWVcbiAgICB9KTtcbiAgfVxuKTtcbmNvbnN0IGZvcmdldFBhc3N3b3JkID0gY3JlYXRlQXV0aEVuZHBvaW50KFxuICBcIi9mb3JnZXQtcGFzc3dvcmRcIixcbiAge1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgYm9keTogei5vYmplY3Qoe1xuICAgICAgLyoqXG4gICAgICAgKiBUaGUgZW1haWwgYWRkcmVzcyBvZiB0aGUgdXNlciB0byBzZW5kIGEgcGFzc3dvcmQgcmVzZXQgZW1haWwgdG8uXG4gICAgICAgKi9cbiAgICAgIGVtYWlsOiB6LnN0cmluZygpLmVtYWlsKCkubWV0YSh7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIlRoZSBlbWFpbCBhZGRyZXNzIG9mIHRoZSB1c2VyIHRvIHNlbmQgYSBwYXNzd29yZCByZXNldCBlbWFpbCB0b1wiXG4gICAgICB9KSxcbiAgICAgIC8qKlxuICAgICAgICogVGhlIFVSTCB0byByZWRpcmVjdCB0aGUgdXNlciB0byByZXNldCB0aGVpciBwYXNzd29yZC5cbiAgICAgICAqIElmIHRoZSB0b2tlbiBpc24ndCB2YWxpZCBvciBleHBpcmVkLCBpdCdsbCBiZSByZWRpcmVjdGVkIHdpdGggYSBxdWVyeSBwYXJhbWV0ZXIgYD9cbiAgICAgICAqIGVycm9yPUlOVkFMSURfVE9LRU5gLiBJZiB0aGUgdG9rZW4gaXMgdmFsaWQsIGl0J2xsIGJlIHJlZGlyZWN0ZWQgd2l0aCBhIHF1ZXJ5IHBhcmFtZXRlciBgP1xuICAgICAgICogdG9rZW49VkFMSURfVE9LRU5cbiAgICAgICAqL1xuICAgICAgcmVkaXJlY3RUbzogei5zdHJpbmcoKS5tZXRhKHtcbiAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIFVSTCB0byByZWRpcmVjdCB0aGUgdXNlciB0byByZXNldCB0aGVpciBwYXNzd29yZC4gSWYgdGhlIHRva2VuIGlzbid0IHZhbGlkIG9yIGV4cGlyZWQsIGl0J2xsIGJlIHJlZGlyZWN0ZWQgd2l0aCBhIHF1ZXJ5IHBhcmFtZXRlciBgP2Vycm9yPUlOVkFMSURfVE9LRU5gLiBJZiB0aGUgdG9rZW4gaXMgdmFsaWQsIGl0J2xsIGJlIHJlZGlyZWN0ZWQgd2l0aCBhIHF1ZXJ5IHBhcmFtZXRlciBgP3Rva2VuPVZBTElEX1RPS0VOXCJcbiAgICAgIH0pLm9wdGlvbmFsKClcbiAgICB9KSxcbiAgICBtZXRhZGF0YToge1xuICAgICAgb3BlbmFwaToge1xuICAgICAgICBkZXNjcmlwdGlvbjogXCJTZW5kIGEgcGFzc3dvcmQgcmVzZXQgZW1haWwgdG8gdGhlIHVzZXJcIixcbiAgICAgICAgcmVzcG9uc2VzOiB7XG4gICAgICAgICAgXCIyMDBcIjoge1xuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICBcImFwcGxpY2F0aW9uL2pzb25cIjoge1xuICAgICAgICAgICAgICAgIHNjaGVtYToge1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJvYmplY3RcIixcbiAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJib29sZWFuXCJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZToge1xuICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgYXN5bmMgKGN0eCkgPT4ge1xuICAgIGlmICghY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkPy5zZW5kUmVzZXRQYXNzd29yZCkge1xuICAgICAgY3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFxuICAgICAgICBcIlJlc2V0IHBhc3N3b3JkIGlzbid0IGVuYWJsZWQuUGxlYXNlIHBhc3MgYW4gZW1haWxBbmRQYXNzd29yZC5zZW5kUmVzZXRQYXNzd29yZCBmdW5jdGlvbiBpbiB5b3VyIGF1dGggY29uZmlnIVwiXG4gICAgICApO1xuICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwge1xuICAgICAgICBtZXNzYWdlOiBcIlJlc2V0IHBhc3N3b3JkIGlzbid0IGVuYWJsZWRcIlxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHsgZW1haWwsIHJlZGlyZWN0VG8gfSA9IGN0eC5ib2R5O1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFVzZXJCeUVtYWlsKGVtYWlsLCB7XG4gICAgICBpbmNsdWRlQWNjb3VudHM6IHRydWVcbiAgICB9KTtcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlJlc2V0IFBhc3N3b3JkOiBVc2VyIG5vdCBmb3VuZFwiLCB7IGVtYWlsIH0pO1xuICAgICAgcmV0dXJuIGN0eC5qc29uKHtcbiAgICAgICAgc3RhdHVzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiBcIklmIHRoaXMgZW1haWwgZXhpc3RzIGluIG91ciBzeXN0ZW0sIGNoZWNrIHlvdXIgZW1haWwgZm9yIHRoZSByZXNldCBsaW5rXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBkZWZhdWx0RXhwaXJlc0luID0gNjAgKiA2MCAqIDE7XG4gICAgY29uc3QgZXhwaXJlc0F0ID0gZ2V0RGF0ZShcbiAgICAgIGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxBbmRQYXNzd29yZC5yZXNldFBhc3N3b3JkVG9rZW5FeHBpcmVzSW4gfHwgZGVmYXVsdEV4cGlyZXNJbixcbiAgICAgIFwic2VjXCJcbiAgICApO1xuICAgIGNvbnN0IHZlcmlmaWNhdGlvblRva2VuID0gZ2VuZXJhdGVJZCgyNCk7XG4gICAgYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZVZlcmlmaWNhdGlvblZhbHVlKFxuICAgICAge1xuICAgICAgICB2YWx1ZTogdXNlci51c2VyLmlkLFxuICAgICAgICBpZGVudGlmaWVyOiBgcmVzZXQtcGFzc3dvcmQ6JHt2ZXJpZmljYXRpb25Ub2tlbn1gLFxuICAgICAgICBleHBpcmVzQXRcbiAgICAgIH0sXG4gICAgICBjdHhcbiAgICApO1xuICAgIGNvbnN0IGNhbGxiYWNrVVJMID0gcmVkaXJlY3RUbyA/IGVuY29kZVVSSUNvbXBvbmVudChyZWRpcmVjdFRvKSA6IFwiXCI7XG4gICAgY29uc3QgdXJsID0gYCR7Y3R4LmNvbnRleHQuYmFzZVVSTH0vcmVzZXQtcGFzc3dvcmQvJHt2ZXJpZmljYXRpb25Ub2tlbn0/Y2FsbGJhY2tVUkw9JHtjYWxsYmFja1VSTH1gO1xuICAgIGF3YWl0IGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxBbmRQYXNzd29yZC5zZW5kUmVzZXRQYXNzd29yZChcbiAgICAgIHtcbiAgICAgICAgdXNlcjogdXNlci51c2VyLFxuICAgICAgICB1cmwsXG4gICAgICAgIHRva2VuOiB2ZXJpZmljYXRpb25Ub2tlblxuICAgICAgfSxcbiAgICAgIGN0eC5yZXF1ZXN0XG4gICAgKTtcbiAgICByZXR1cm4gY3R4Lmpzb24oe1xuICAgICAgc3RhdHVzOiB0cnVlXG4gICAgfSk7XG4gIH1cbik7XG5jb25zdCByZXF1ZXN0UGFzc3dvcmRSZXNldENhbGxiYWNrID0gY3JlYXRlQXV0aEVuZHBvaW50KFxuICBcIi9yZXNldC1wYXNzd29yZC86dG9rZW5cIixcbiAge1xuICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICBxdWVyeTogei5vYmplY3Qoe1xuICAgICAgY2FsbGJhY2tVUkw6IHouc3RyaW5nKCkubWV0YSh7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIlRoZSBVUkwgdG8gcmVkaXJlY3QgdGhlIHVzZXIgdG8gcmVzZXQgdGhlaXIgcGFzc3dvcmRcIlxuICAgICAgfSlcbiAgICB9KSxcbiAgICB1c2U6IFtvcmlnaW5DaGVjaygoY3R4KSA9PiBjdHgucXVlcnkuY2FsbGJhY2tVUkwpXSxcbiAgICBtZXRhZGF0YToge1xuICAgICAgb3BlbmFwaToge1xuICAgICAgICBkZXNjcmlwdGlvbjogXCJSZWRpcmVjdHMgdGhlIHVzZXIgdG8gdGhlIGNhbGxiYWNrIFVSTCB3aXRoIHRoZSB0b2tlblwiLFxuICAgICAgICByZXNwb25zZXM6IHtcbiAgICAgICAgICBcIjIwMFwiOiB7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgIFwiYXBwbGljYXRpb24vanNvblwiOiB7XG4gICAgICAgICAgICAgICAgc2NoZW1hOiB7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcIm9iamVjdFwiLFxuICAgICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICB0b2tlbjoge1xuICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgYXN5bmMgKGN0eCkgPT4ge1xuICAgIGNvbnN0IHsgdG9rZW4gfSA9IGN0eC5wYXJhbXM7XG4gICAgY29uc3QgeyBjYWxsYmFja1VSTCB9ID0gY3R4LnF1ZXJ5O1xuICAgIGlmICghdG9rZW4gfHwgIWNhbGxiYWNrVVJMKSB7XG4gICAgICB0aHJvdyBjdHgucmVkaXJlY3QoXG4gICAgICAgIHJlZGlyZWN0RXJyb3IoY3R4LmNvbnRleHQsIGNhbGxiYWNrVVJMLCB7IGVycm9yOiBcIklOVkFMSURfVE9LRU5cIiB9KVxuICAgICAgKTtcbiAgICB9XG4gICAgY29uc3QgdmVyaWZpY2F0aW9uID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRWZXJpZmljYXRpb25WYWx1ZShcbiAgICAgIGByZXNldC1wYXNzd29yZDoke3Rva2VufWBcbiAgICApO1xuICAgIGlmICghdmVyaWZpY2F0aW9uIHx8IHZlcmlmaWNhdGlvbi5leHBpcmVzQXQgPCAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkge1xuICAgICAgdGhyb3cgY3R4LnJlZGlyZWN0KFxuICAgICAgICByZWRpcmVjdEVycm9yKGN0eC5jb250ZXh0LCBjYWxsYmFja1VSTCwgeyBlcnJvcjogXCJJTlZBTElEX1RPS0VOXCIgfSlcbiAgICAgICk7XG4gICAgfVxuICAgIHRocm93IGN0eC5yZWRpcmVjdChyZWRpcmVjdENhbGxiYWNrKGN0eC5jb250ZXh0LCBjYWxsYmFja1VSTCwgeyB0b2tlbiB9KSk7XG4gIH1cbik7XG5jb25zdCBmb3JnZXRQYXNzd29yZENhbGxiYWNrID0gcmVxdWVzdFBhc3N3b3JkUmVzZXRDYWxsYmFjaztcbmNvbnN0IHJlc2V0UGFzc3dvcmQgPSBjcmVhdGVBdXRoRW5kcG9pbnQoXG4gIFwiL3Jlc2V0LXBhc3N3b3JkXCIsXG4gIHtcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIHF1ZXJ5OiB6Lm9iamVjdCh7XG4gICAgICB0b2tlbjogei5zdHJpbmcoKS5vcHRpb25hbCgpXG4gICAgfSkub3B0aW9uYWwoKSxcbiAgICBib2R5OiB6Lm9iamVjdCh7XG4gICAgICBuZXdQYXNzd29yZDogei5zdHJpbmcoKS5tZXRhKHtcbiAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIG5ldyBwYXNzd29yZCB0byBzZXRcIlxuICAgICAgfSksXG4gICAgICB0b2tlbjogei5zdHJpbmcoKS5tZXRhKHtcbiAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIHRva2VuIHRvIHJlc2V0IHRoZSBwYXNzd29yZFwiXG4gICAgICB9KS5vcHRpb25hbCgpXG4gICAgfSksXG4gICAgbWV0YWRhdGE6IHtcbiAgICAgIG9wZW5hcGk6IHtcbiAgICAgICAgZGVzY3JpcHRpb246IFwiUmVzZXQgdGhlIHBhc3N3b3JkIGZvciBhIHVzZXJcIixcbiAgICAgICAgcmVzcG9uc2VzOiB7XG4gICAgICAgICAgXCIyMDBcIjoge1xuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICBcImFwcGxpY2F0aW9uL2pzb25cIjoge1xuICAgICAgICAgICAgICAgIHNjaGVtYToge1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJvYmplY3RcIixcbiAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJib29sZWFuXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgYXN5bmMgKGN0eCkgPT4ge1xuICAgIGNvbnN0IHRva2VuID0gY3R4LmJvZHkudG9rZW4gfHwgY3R4LnF1ZXJ5Py50b2tlbjtcbiAgICBpZiAoIXRva2VuKSB7XG4gICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG4gICAgICAgIG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSU5WQUxJRF9UT0tFTlxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHsgbmV3UGFzc3dvcmQgfSA9IGN0eC5ib2R5O1xuICAgIGNvbnN0IG1pbkxlbmd0aCA9IGN0eC5jb250ZXh0LnBhc3N3b3JkPy5jb25maWcubWluUGFzc3dvcmRMZW5ndGg7XG4gICAgY29uc3QgbWF4TGVuZ3RoID0gY3R4LmNvbnRleHQucGFzc3dvcmQ/LmNvbmZpZy5tYXhQYXNzd29yZExlbmd0aDtcbiAgICBpZiAobmV3UGFzc3dvcmQubGVuZ3RoIDwgbWluTGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG4gICAgICAgIG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuUEFTU1dPUkRfVE9PX1NIT1JUXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKG5ld1Bhc3N3b3JkLmxlbmd0aCA+IG1heExlbmd0aCkge1xuICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwge1xuICAgICAgICBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLlBBU1NXT1JEX1RPT19MT05HXG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgaWQgPSBgcmVzZXQtcGFzc3dvcmQ6JHt0b2tlbn1gO1xuICAgIGNvbnN0IHZlcmlmaWNhdGlvbiA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVmVyaWZpY2F0aW9uVmFsdWUoaWQpO1xuICAgIGlmICghdmVyaWZpY2F0aW9uIHx8IHZlcmlmaWNhdGlvbi5leHBpcmVzQXQgPCAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkge1xuICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwge1xuICAgICAgICBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLklOVkFMSURfVE9LRU5cbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCB1c2VySWQgPSB2ZXJpZmljYXRpb24udmFsdWU7XG4gICAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBjdHguY29udGV4dC5wYXNzd29yZC5oYXNoKG5ld1Bhc3N3b3JkKTtcbiAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kQWNjb3VudHModXNlcklkKTtcbiAgICBjb25zdCBhY2NvdW50ID0gYWNjb3VudHMuZmluZCgoYWMpID0+IGFjLnByb3ZpZGVySWQgPT09IFwiY3JlZGVudGlhbFwiKTtcbiAgICBpZiAoIWFjY291bnQpIHtcbiAgICAgIGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVBY2NvdW50KFxuICAgICAgICB7XG4gICAgICAgICAgdXNlcklkLFxuICAgICAgICAgIHByb3ZpZGVySWQ6IFwiY3JlZGVudGlhbFwiLFxuICAgICAgICAgIHBhc3N3b3JkOiBoYXNoZWRQYXNzd29yZCxcbiAgICAgICAgICBhY2NvdW50SWQ6IHVzZXJJZFxuICAgICAgICB9LFxuICAgICAgICBjdHhcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci51cGRhdGVQYXNzd29yZChcbiAgICAgICAgdXNlcklkLFxuICAgICAgICBoYXNoZWRQYXNzd29yZCxcbiAgICAgICAgY3R4XG4gICAgICApO1xuICAgIH1cbiAgICBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlVmVyaWZpY2F0aW9uVmFsdWUodmVyaWZpY2F0aW9uLmlkKTtcbiAgICBpZiAoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkPy5vblBhc3N3b3JkUmVzZXQpIHtcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFVzZXJCeUlkKHVzZXJJZCk7XG4gICAgICBpZiAodXNlcikge1xuICAgICAgICBhd2FpdCBjdHguY29udGV4dC5vcHRpb25zLmVtYWlsQW5kUGFzc3dvcmQub25QYXNzd29yZFJlc2V0KFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHVzZXJcbiAgICAgICAgICB9LFxuICAgICAgICAgIGN0eC5yZXF1ZXN0XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChjdHguY29udGV4dC5vcHRpb25zLmVtYWlsQW5kUGFzc3dvcmQ/LnJldm9rZVNlc3Npb25zT25QYXNzd29yZFJlc2V0KSB7XG4gICAgICBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlU2Vzc2lvbnModXNlcklkKTtcbiAgICB9XG4gICAgcmV0dXJuIGN0eC5qc29uKHtcbiAgICAgIHN0YXR1czogdHJ1ZVxuICAgIH0pO1xuICB9XG4pO1xuXG5jb25zdCB1cGRhdGVVc2VyID0gKCkgPT4gY3JlYXRlQXV0aEVuZHBvaW50KFxuICBcIi91cGRhdGUtdXNlclwiLFxuICB7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICBib2R5OiB6LnJlY29yZChcbiAgICAgIHouc3RyaW5nKCkubWV0YSh7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIkZpZWxkIG5hbWUgbXVzdCBiZSBhIHN0cmluZ1wiXG4gICAgICB9KSxcbiAgICAgIHouYW55KClcbiAgICApLFxuICAgIHVzZTogW3Nlc3Npb25NaWRkbGV3YXJlXSxcbiAgICBtZXRhZGF0YToge1xuICAgICAgJEluZmVyOiB7XG4gICAgICAgIGJvZHk6IHt9XG4gICAgICB9LFxuICAgICAgb3BlbmFwaToge1xuICAgICAgICBkZXNjcmlwdGlvbjogXCJVcGRhdGUgdGhlIGN1cnJlbnQgdXNlclwiLFxuICAgICAgICByZXF1ZXN0Qm9keToge1xuICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgIFwiYXBwbGljYXRpb24vanNvblwiOiB7XG4gICAgICAgICAgICAgIHNjaGVtYToge1xuICAgICAgICAgICAgICAgIHR5cGU6IFwib2JqZWN0XCIsXG4gICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgbmFtZSBvZiB0aGUgdXNlclwiXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgaW1hZ2U6IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIGltYWdlIG9mIHRoZSB1c2VyXCJcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHJlc3BvbnNlczoge1xuICAgICAgICAgIFwiMjAwXCI6IHtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcbiAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHtcbiAgICAgICAgICAgICAgICBzY2hlbWE6IHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwib2JqZWN0XCIsXG4gICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czoge1xuICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYm9vbGVhblwiLFxuICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkluZGljYXRlcyBpZiB0aGUgdXBkYXRlIHdhcyBzdWNjZXNzZnVsXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgYXN5bmMgKGN0eCkgPT4ge1xuICAgIGNvbnN0IGJvZHkgPSBjdHguYm9keTtcbiAgICBpZiAoYm9keS5lbWFpbCkge1xuICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwge1xuICAgICAgICBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkVNQUlMX0NBTl9OT1RfQkVfVVBEQVRFRFxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHsgbmFtZSwgaW1hZ2UsIC4uLnJlc3QgfSA9IGJvZHk7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGN0eC5jb250ZXh0LnNlc3Npb247XG4gICAgaWYgKGltYWdlID09PSB2b2lkIDAgJiYgbmFtZSA9PT0gdm9pZCAwICYmIE9iamVjdC5rZXlzKHJlc3QpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGN0eC5qc29uKHtcbiAgICAgICAgc3RhdHVzOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgYWRkaXRpb25hbEZpZWxkcyA9IHBhcnNlVXNlcklucHV0KFxuICAgICAgY3R4LmNvbnRleHQub3B0aW9ucyxcbiAgICAgIHJlc3QsXG4gICAgICBcInVwZGF0ZVwiXG4gICAgKTtcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZVVzZXIoXG4gICAgICBzZXNzaW9uLnVzZXIuaWQsXG4gICAgICB7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGltYWdlLFxuICAgICAgICAuLi5hZGRpdGlvbmFsRmllbGRzXG4gICAgICB9LFxuICAgICAgY3R4XG4gICAgKTtcbiAgICBhd2FpdCBzZXRTZXNzaW9uQ29va2llKGN0eCwge1xuICAgICAgc2Vzc2lvbjogc2Vzc2lvbi5zZXNzaW9uLFxuICAgICAgdXNlclxuICAgIH0pO1xuICAgIHJldHVybiBjdHguanNvbih7XG4gICAgICBzdGF0dXM6IHRydWVcbiAgICB9KTtcbiAgfVxuKTtcbmNvbnN0IGNoYW5nZVBhc3N3b3JkID0gY3JlYXRlQXV0aEVuZHBvaW50KFxuICBcIi9jaGFuZ2UtcGFzc3dvcmRcIixcbiAge1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgYm9keTogei5vYmplY3Qoe1xuICAgICAgLyoqXG4gICAgICAgKiBUaGUgbmV3IHBhc3N3b3JkIHRvIHNldFxuICAgICAgICovXG4gICAgICBuZXdQYXNzd29yZDogei5zdHJpbmcoKS5tZXRhKHtcbiAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIG5ldyBwYXNzd29yZCB0byBzZXRcIlxuICAgICAgfSksXG4gICAgICAvKipcbiAgICAgICAqIFRoZSBjdXJyZW50IHBhc3N3b3JkIG9mIHRoZSB1c2VyXG4gICAgICAgKi9cbiAgICAgIGN1cnJlbnRQYXNzd29yZDogei5zdHJpbmcoKS5tZXRhKHtcbiAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIGN1cnJlbnQgcGFzc3dvcmQgaXMgcmVxdWlyZWRcIlxuICAgICAgfSksXG4gICAgICAvKipcbiAgICAgICAqIHJldm9rZSBhbGwgc2Vzc2lvbnMgdGhhdCBhcmUgbm90IHRoZVxuICAgICAgICogY3VycmVudCBvbmUgbG9nZ2VkIGluIGJ5IHRoZSB1c2VyXG4gICAgICAgKi9cbiAgICAgIHJldm9rZU90aGVyU2Vzc2lvbnM6IHouYm9vbGVhbigpLm1ldGEoe1xuICAgICAgICBkZXNjcmlwdGlvbjogXCJNdXN0IGJlIGEgYm9vbGVhbiB2YWx1ZVwiXG4gICAgICB9KS5vcHRpb25hbCgpXG4gICAgfSksXG4gICAgdXNlOiBbc2Vzc2lvbk1pZGRsZXdhcmVdLFxuICAgIG1ldGFkYXRhOiB7XG4gICAgICBvcGVuYXBpOiB7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIkNoYW5nZSB0aGUgcGFzc3dvcmQgb2YgdGhlIHVzZXJcIixcbiAgICAgICAgcmVzcG9uc2VzOiB7XG4gICAgICAgICAgXCIyMDBcIjoge1xuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiUGFzc3dvcmQgc3VjY2Vzc2Z1bGx5IGNoYW5nZWRcIixcbiAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHtcbiAgICAgICAgICAgICAgICBzY2hlbWE6IHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwib2JqZWN0XCIsXG4gICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgICAgIHRva2VuOiB7XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICBudWxsYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IHByZXNlbnQgaWYgcmV2b2tlT3RoZXJTZXNzaW9ucyBpcyB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiTmV3IHNlc3Npb24gdG9rZW4gaWYgb3RoZXIgc2Vzc2lvbnMgd2VyZSByZXZva2VkXCJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwib2JqZWN0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIHVuaXF1ZSBpZGVudGlmaWVyIG9mIHRoZSB1c2VyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IFwiZW1haWxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIGVtYWlsIGFkZHJlc3Mgb2YgdGhlIHVzZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIG5hbWUgb2YgdGhlIHVzZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogXCJ1cmlcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlRoZSBwcm9maWxlIGltYWdlIFVSTCBvZiB0aGUgdXNlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZW1haWxWZXJpZmllZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJvb2xlYW5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiV2hldGhlciB0aGUgZW1haWwgaGFzIGJlZW4gdmVyaWZpZWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IFwiZGF0ZS10aW1lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIldoZW4gdGhlIHVzZXIgd2FzIGNyZWF0ZWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IFwiZGF0ZS10aW1lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIldoZW4gdGhlIHVzZXIgd2FzIGxhc3QgdXBkYXRlZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogW1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJlbWFpbFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImVtYWlsVmVyaWZpZWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY3JlYXRlZEF0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInVwZGF0ZWRBdFwiXG4gICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IFtcInVzZXJcIl1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIGFzeW5jIChjdHgpID0+IHtcbiAgICBjb25zdCB7IG5ld1Bhc3N3b3JkLCBjdXJyZW50UGFzc3dvcmQsIHJldm9rZU90aGVyU2Vzc2lvbnMgfSA9IGN0eC5ib2R5O1xuICAgIGNvbnN0IHNlc3Npb24gPSBjdHguY29udGV4dC5zZXNzaW9uO1xuICAgIGNvbnN0IG1pblBhc3N3b3JkTGVuZ3RoID0gY3R4LmNvbnRleHQucGFzc3dvcmQuY29uZmlnLm1pblBhc3N3b3JkTGVuZ3RoO1xuICAgIGlmIChuZXdQYXNzd29yZC5sZW5ndGggPCBtaW5QYXNzd29yZExlbmd0aCkge1xuICAgICAgY3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiUGFzc3dvcmQgaXMgdG9vIHNob3J0XCIpO1xuICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwge1xuICAgICAgICBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLlBBU1NXT1JEX1RPT19TSE9SVFxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IG1heFBhc3N3b3JkTGVuZ3RoID0gY3R4LmNvbnRleHQucGFzc3dvcmQuY29uZmlnLm1heFBhc3N3b3JkTGVuZ3RoO1xuICAgIGlmIChuZXdQYXNzd29yZC5sZW5ndGggPiBtYXhQYXNzd29yZExlbmd0aCkge1xuICAgICAgY3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiUGFzc3dvcmQgaXMgdG9vIGxvbmdcIik7XG4gICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG4gICAgICAgIG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuUEFTU1dPUkRfVE9PX0xPTkdcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kQWNjb3VudHMoXG4gICAgICBzZXNzaW9uLnVzZXIuaWRcbiAgICApO1xuICAgIGNvbnN0IGFjY291bnQgPSBhY2NvdW50cy5maW5kKFxuICAgICAgKGFjY291bnQyKSA9PiBhY2NvdW50Mi5wcm92aWRlcklkID09PSBcImNyZWRlbnRpYWxcIiAmJiBhY2NvdW50Mi5wYXNzd29yZFxuICAgICk7XG4gICAgaWYgKCFhY2NvdW50IHx8ICFhY2NvdW50LnBhc3N3b3JkKSB7XG4gICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG4gICAgICAgIG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuQ1JFREVOVElBTF9BQ0NPVU5UX05PVF9GT1VORFxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHBhc3N3b3JkSGFzaCA9IGF3YWl0IGN0eC5jb250ZXh0LnBhc3N3b3JkLmhhc2gobmV3UGFzc3dvcmQpO1xuICAgIGNvbnN0IHZlcmlmeSA9IGF3YWl0IGN0eC5jb250ZXh0LnBhc3N3b3JkLnZlcmlmeSh7XG4gICAgICBoYXNoOiBhY2NvdW50LnBhc3N3b3JkLFxuICAgICAgcGFzc3dvcmQ6IGN1cnJlbnRQYXNzd29yZFxuICAgIH0pO1xuICAgIGlmICghdmVyaWZ5KSB7XG4gICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG4gICAgICAgIG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSU5WQUxJRF9QQVNTV09SRFxuICAgICAgfSk7XG4gICAgfVxuICAgIGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci51cGRhdGVBY2NvdW50KGFjY291bnQuaWQsIHtcbiAgICAgIHBhc3N3b3JkOiBwYXNzd29yZEhhc2hcbiAgICB9KTtcbiAgICBsZXQgdG9rZW4gPSBudWxsO1xuICAgIGlmIChyZXZva2VPdGhlclNlc3Npb25zKSB7XG4gICAgICBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlU2Vzc2lvbnMoc2Vzc2lvbi51c2VyLmlkKTtcbiAgICAgIGNvbnN0IG5ld1Nlc3Npb24gPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlU2Vzc2lvbihcbiAgICAgICAgc2Vzc2lvbi51c2VyLmlkLFxuICAgICAgICBjdHhcbiAgICAgICk7XG4gICAgICBpZiAoIW5ld1Nlc3Npb24pIHtcbiAgICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsIHtcbiAgICAgICAgICBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkZBSUxFRF9UT19HRVRfU0VTU0lPTlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGF3YWl0IHNldFNlc3Npb25Db29raWUoY3R4LCB7XG4gICAgICAgIHNlc3Npb246IG5ld1Nlc3Npb24sXG4gICAgICAgIHVzZXI6IHNlc3Npb24udXNlclxuICAgICAgfSk7XG4gICAgICB0b2tlbiA9IG5ld1Nlc3Npb24udG9rZW47XG4gICAgfVxuICAgIHJldHVybiBjdHguanNvbih7XG4gICAgICB0b2tlbixcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgaWQ6IHNlc3Npb24udXNlci5pZCxcbiAgICAgICAgZW1haWw6IHNlc3Npb24udXNlci5lbWFpbCxcbiAgICAgICAgbmFtZTogc2Vzc2lvbi51c2VyLm5hbWUsXG4gICAgICAgIGltYWdlOiBzZXNzaW9uLnVzZXIuaW1hZ2UsXG4gICAgICAgIGVtYWlsVmVyaWZpZWQ6IHNlc3Npb24udXNlci5lbWFpbFZlcmlmaWVkLFxuICAgICAgICBjcmVhdGVkQXQ6IHNlc3Npb24udXNlci5jcmVhdGVkQXQsXG4gICAgICAgIHVwZGF0ZWRBdDogc2Vzc2lvbi51c2VyLnVwZGF0ZWRBdFxuICAgICAgfVxuICAgIH0pO1xuICB9XG4pO1xuY29uc3Qgc2V0UGFzc3dvcmQgPSBjcmVhdGVBdXRoRW5kcG9pbnQoXG4gIFwiL3NldC1wYXNzd29yZFwiLFxuICB7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICBib2R5OiB6Lm9iamVjdCh7XG4gICAgICAvKipcbiAgICAgICAqIFRoZSBuZXcgcGFzc3dvcmQgdG8gc2V0XG4gICAgICAgKi9cbiAgICAgIG5ld1Bhc3N3b3JkOiB6LnN0cmluZygpLm1ldGEoe1xuICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgbmV3IHBhc3N3b3JkIHRvIHNldCBpcyByZXF1aXJlZFwiXG4gICAgICB9KVxuICAgIH0pLFxuICAgIG1ldGFkYXRhOiB7XG4gICAgICBTRVJWRVJfT05MWTogdHJ1ZVxuICAgIH0sXG4gICAgdXNlOiBbc2Vzc2lvbk1pZGRsZXdhcmVdXG4gIH0sXG4gIGFzeW5jIChjdHgpID0+IHtcbiAgICBjb25zdCB7IG5ld1Bhc3N3b3JkIH0gPSBjdHguYm9keTtcbiAgICBjb25zdCBzZXNzaW9uID0gY3R4LmNvbnRleHQuc2Vzc2lvbjtcbiAgICBjb25zdCBtaW5QYXNzd29yZExlbmd0aCA9IGN0eC5jb250ZXh0LnBhc3N3b3JkLmNvbmZpZy5taW5QYXNzd29yZExlbmd0aDtcbiAgICBpZiAobmV3UGFzc3dvcmQubGVuZ3RoIDwgbWluUGFzc3dvcmRMZW5ndGgpIHtcbiAgICAgIGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlBhc3N3b3JkIGlzIHRvbyBzaG9ydFwiKTtcbiAgICAgIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcbiAgICAgICAgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5QQVNTV09SRF9UT09fU0hPUlRcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBtYXhQYXNzd29yZExlbmd0aCA9IGN0eC5jb250ZXh0LnBhc3N3b3JkLmNvbmZpZy5tYXhQYXNzd29yZExlbmd0aDtcbiAgICBpZiAobmV3UGFzc3dvcmQubGVuZ3RoID4gbWF4UGFzc3dvcmRMZW5ndGgpIHtcbiAgICAgIGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlBhc3N3b3JkIGlzIHRvbyBsb25nXCIpO1xuICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwge1xuICAgICAgICBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLlBBU1NXT1JEX1RPT19MT05HXG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgYWNjb3VudHMgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZEFjY291bnRzKFxuICAgICAgc2Vzc2lvbi51c2VyLmlkXG4gICAgKTtcbiAgICBjb25zdCBhY2NvdW50ID0gYWNjb3VudHMuZmluZChcbiAgICAgIChhY2NvdW50MikgPT4gYWNjb3VudDIucHJvdmlkZXJJZCA9PT0gXCJjcmVkZW50aWFsXCIgJiYgYWNjb3VudDIucGFzc3dvcmRcbiAgICApO1xuICAgIGNvbnN0IHBhc3N3b3JkSGFzaCA9IGF3YWl0IGN0eC5jb250ZXh0LnBhc3N3b3JkLmhhc2gobmV3UGFzc3dvcmQpO1xuICAgIGlmICghYWNjb3VudCkge1xuICAgICAgYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmxpbmtBY2NvdW50KFxuICAgICAgICB7XG4gICAgICAgICAgdXNlcklkOiBzZXNzaW9uLnVzZXIuaWQsXG4gICAgICAgICAgcHJvdmlkZXJJZDogXCJjcmVkZW50aWFsXCIsXG4gICAgICAgICAgYWNjb3VudElkOiBzZXNzaW9uLnVzZXIuaWQsXG4gICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkSGFzaFxuICAgICAgICB9LFxuICAgICAgICBjdHhcbiAgICAgICk7XG4gICAgICByZXR1cm4gY3R4Lmpzb24oe1xuICAgICAgICBzdGF0dXM6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG4gICAgICBtZXNzYWdlOiBcInVzZXIgYWxyZWFkeSBoYXMgYSBwYXNzd29yZFwiXG4gICAgfSk7XG4gIH1cbik7XG5jb25zdCBkZWxldGVVc2VyID0gY3JlYXRlQXV0aEVuZHBvaW50KFxuICBcIi9kZWxldGUtdXNlclwiLFxuICB7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICB1c2U6IFtzZXNzaW9uTWlkZGxld2FyZV0sXG4gICAgYm9keTogei5vYmplY3Qoe1xuICAgICAgLyoqXG4gICAgICAgKiBUaGUgY2FsbGJhY2sgVVJMIHRvIHJlZGlyZWN0IHRvIGFmdGVyIHRoZSB1c2VyIGlzIGRlbGV0ZWRcbiAgICAgICAqIHRoaXMgaXMgb25seSB1c2VkIG9uIGRlbGV0ZSB1c2VyIGNhbGxiYWNrXG4gICAgICAgKi9cbiAgICAgIGNhbGxiYWNrVVJMOiB6LnN0cmluZygpLm1ldGEoe1xuICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgY2FsbGJhY2sgVVJMIHRvIHJlZGlyZWN0IHRvIGFmdGVyIHRoZSB1c2VyIGlzIGRlbGV0ZWRcIlxuICAgICAgfSkub3B0aW9uYWwoKSxcbiAgICAgIC8qKlxuICAgICAgICogVGhlIHBhc3N3b3JkIG9mIHRoZSB1c2VyLiBJZiB0aGUgcGFzc3dvcmQgaXNuJ3QgcHJvdmlkZWQsIHNlc3Npb24gZnJlc2huZXNzXG4gICAgICAgKiB3aWxsIGJlIGNoZWNrZWQuXG4gICAgICAgKi9cbiAgICAgIHBhc3N3b3JkOiB6LnN0cmluZygpLm1ldGEoe1xuICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgcGFzc3dvcmQgb2YgdGhlIHVzZXIgaXMgcmVxdWlyZWQgdG8gZGVsZXRlIHRoZSB1c2VyXCJcbiAgICAgIH0pLm9wdGlvbmFsKCksXG4gICAgICAvKipcbiAgICAgICAqIFRoZSB0b2tlbiB0byBkZWxldGUgdGhlIHVzZXIuIElmIHRoZSB0b2tlbiBpcyBwcm92aWRlZCwgdGhlIHVzZXIgd2lsbCBiZSBkZWxldGVkXG4gICAgICAgKi9cbiAgICAgIHRva2VuOiB6LnN0cmluZygpLm1ldGEoe1xuICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgdG9rZW4gdG8gZGVsZXRlIHRoZSB1c2VyIGlzIHJlcXVpcmVkXCJcbiAgICAgIH0pLm9wdGlvbmFsKClcbiAgICB9KSxcbiAgICBtZXRhZGF0YToge1xuICAgICAgb3BlbmFwaToge1xuICAgICAgICBkZXNjcmlwdGlvbjogXCJEZWxldGUgdGhlIHVzZXJcIixcbiAgICAgICAgcmVzcG9uc2VzOiB7XG4gICAgICAgICAgXCIyMDBcIjoge1xuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiVXNlciBkZWxldGlvbiBwcm9jZXNzZWQgc3VjY2Vzc2Z1bGx5XCIsXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgIFwiYXBwbGljYXRpb24vanNvblwiOiB7XG4gICAgICAgICAgICAgICAgc2NoZW1hOiB7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcIm9iamVjdFwiLFxuICAgICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJib29sZWFuXCIsXG4gICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiSW5kaWNhdGVzIGlmIHRoZSBvcGVyYXRpb24gd2FzIHN1Y2Nlc3NmdWxcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICBlbnVtOiBbXCJVc2VyIGRlbGV0ZWRcIiwgXCJWZXJpZmljYXRpb24gZW1haWwgc2VudFwiXSxcbiAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJTdGF0dXMgbWVzc2FnZSBvZiB0aGUgZGVsZXRpb24gcHJvY2Vzc1wiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICByZXF1aXJlZDogW1wic3VjY2Vzc1wiLCBcIm1lc3NhZ2VcIl1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIGFzeW5jIChjdHgpID0+IHtcbiAgICBpZiAoIWN0eC5jb250ZXh0Lm9wdGlvbnMudXNlcj8uZGVsZXRlVXNlcj8uZW5hYmxlZCkge1xuICAgICAgY3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFxuICAgICAgICBcIkRlbGV0ZSB1c2VyIGlzIGRpc2FibGVkLiBFbmFibGUgaXQgaW4gdGhlIG9wdGlvbnNcIixcbiAgICAgICAge1xuICAgICAgICAgIHNlc3Npb246IGN0eC5jb250ZXh0LnNlc3Npb25cbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIHRocm93IG5ldyBBUElFcnJvcihcIk5PVF9GT1VORFwiKTtcbiAgICB9XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGN0eC5jb250ZXh0LnNlc3Npb247XG4gICAgaWYgKGN0eC5ib2R5LnBhc3N3b3JkKSB7XG4gICAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kQWNjb3VudHMoXG4gICAgICAgIHNlc3Npb24udXNlci5pZFxuICAgICAgKTtcbiAgICAgIGNvbnN0IGFjY291bnQgPSBhY2NvdW50cy5maW5kKFxuICAgICAgICAoYWNjb3VudDIpID0+IGFjY291bnQyLnByb3ZpZGVySWQgPT09IFwiY3JlZGVudGlhbFwiICYmIGFjY291bnQyLnBhc3N3b3JkXG4gICAgICApO1xuICAgICAgaWYgKCFhY2NvdW50IHx8ICFhY2NvdW50LnBhc3N3b3JkKSB7XG4gICAgICAgIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcbiAgICAgICAgICBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkNSRURFTlRJQUxfQUNDT1VOVF9OT1RfRk9VTkRcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCB2ZXJpZnkgPSBhd2FpdCBjdHguY29udGV4dC5wYXNzd29yZC52ZXJpZnkoe1xuICAgICAgICBoYXNoOiBhY2NvdW50LnBhc3N3b3JkLFxuICAgICAgICBwYXNzd29yZDogY3R4LmJvZHkucGFzc3dvcmRcbiAgICAgIH0pO1xuICAgICAgaWYgKCF2ZXJpZnkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwge1xuICAgICAgICAgIG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSU5WQUxJRF9QQVNTV09SRFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGN0eC5ib2R5LnRva2VuKSB7XG4gICAgICBhd2FpdCBkZWxldGVVc2VyQ2FsbGJhY2soe1xuICAgICAgICAuLi5jdHgsXG4gICAgICAgIHF1ZXJ5OiB7XG4gICAgICAgICAgdG9rZW46IGN0eC5ib2R5LnRva2VuXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGN0eC5qc29uKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogXCJVc2VyIGRlbGV0ZWRcIlxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChjdHguY29udGV4dC5vcHRpb25zLnVzZXIuZGVsZXRlVXNlcj8uc2VuZERlbGV0ZUFjY291bnRWZXJpZmljYXRpb24pIHtcbiAgICAgIGNvbnN0IHRva2VuID0gZ2VuZXJhdGVSYW5kb21TdHJpbmcoMzIsIFwiMC05XCIsIFwiYS16XCIpO1xuICAgICAgYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZVZlcmlmaWNhdGlvblZhbHVlKFxuICAgICAgICB7XG4gICAgICAgICAgdmFsdWU6IHNlc3Npb24udXNlci5pZCxcbiAgICAgICAgICBpZGVudGlmaWVyOiBgZGVsZXRlLWFjY291bnQtJHt0b2tlbn1gLFxuICAgICAgICAgIGV4cGlyZXNBdDogbmV3IERhdGUoXG4gICAgICAgICAgICBEYXRlLm5vdygpICsgKGN0eC5jb250ZXh0Lm9wdGlvbnMudXNlci5kZWxldGVVc2VyPy5kZWxldGVUb2tlbkV4cGlyZXNJbiB8fCA2MCAqIDYwICogMjQpICogMWUzXG4gICAgICAgICAgKVxuICAgICAgICB9LFxuICAgICAgICBjdHhcbiAgICAgICk7XG4gICAgICBjb25zdCB1cmwgPSBgJHtjdHguY29udGV4dC5iYXNlVVJMfS9kZWxldGUtdXNlci9jYWxsYmFjaz90b2tlbj0ke3Rva2VufSZjYWxsYmFja1VSTD0ke2N0eC5ib2R5LmNhbGxiYWNrVVJMIHx8IFwiL1wifWA7XG4gICAgICBhd2FpdCBjdHguY29udGV4dC5vcHRpb25zLnVzZXIuZGVsZXRlVXNlci5zZW5kRGVsZXRlQWNjb3VudFZlcmlmaWNhdGlvbihcbiAgICAgICAge1xuICAgICAgICAgIHVzZXI6IHNlc3Npb24udXNlcixcbiAgICAgICAgICB1cmwsXG4gICAgICAgICAgdG9rZW5cbiAgICAgICAgfSxcbiAgICAgICAgY3R4LnJlcXVlc3RcbiAgICAgICk7XG4gICAgICByZXR1cm4gY3R4Lmpzb24oe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiBcIlZlcmlmaWNhdGlvbiBlbWFpbCBzZW50XCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoIWN0eC5ib2R5LnBhc3N3b3JkICYmIGN0eC5jb250ZXh0LnNlc3Npb25Db25maWcuZnJlc2hBZ2UgIT09IDApIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRBZ2UgPSBuZXcgRGF0ZShzZXNzaW9uLnNlc3Npb24uY3JlYXRlZEF0KS5nZXRUaW1lKCk7XG4gICAgICBjb25zdCBmcmVzaEFnZSA9IGN0eC5jb250ZXh0LnNlc3Npb25Db25maWcuZnJlc2hBZ2UgKiAxZTM7XG4gICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgaWYgKG5vdyAtIGN1cnJlbnRBZ2UgPiBmcmVzaEFnZSAqIDFlMykge1xuICAgICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG4gICAgICAgICAgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5TRVNTSU9OX0VYUElSRURcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGJlZm9yZURlbGV0ZSA9IGN0eC5jb250ZXh0Lm9wdGlvbnMudXNlci5kZWxldGVVc2VyPy5iZWZvcmVEZWxldGU7XG4gICAgaWYgKGJlZm9yZURlbGV0ZSkge1xuICAgICAgYXdhaXQgYmVmb3JlRGVsZXRlKHNlc3Npb24udXNlciwgY3R4LnJlcXVlc3QpO1xuICAgIH1cbiAgICBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlVXNlcihzZXNzaW9uLnVzZXIuaWQpO1xuICAgIGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVTZXNzaW9ucyhzZXNzaW9uLnVzZXIuaWQpO1xuICAgIGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVBY2NvdW50cyhzZXNzaW9uLnVzZXIuaWQpO1xuICAgIGRlbGV0ZVNlc3Npb25Db29raWUoY3R4KTtcbiAgICBjb25zdCBhZnRlckRlbGV0ZSA9IGN0eC5jb250ZXh0Lm9wdGlvbnMudXNlci5kZWxldGVVc2VyPy5hZnRlckRlbGV0ZTtcbiAgICBpZiAoYWZ0ZXJEZWxldGUpIHtcbiAgICAgIGF3YWl0IGFmdGVyRGVsZXRlKHNlc3Npb24udXNlciwgY3R4LnJlcXVlc3QpO1xuICAgIH1cbiAgICByZXR1cm4gY3R4Lmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIG1lc3NhZ2U6IFwiVXNlciBkZWxldGVkXCJcbiAgICB9KTtcbiAgfVxuKTtcbmNvbnN0IGRlbGV0ZVVzZXJDYWxsYmFjayA9IGNyZWF0ZUF1dGhFbmRwb2ludChcbiAgXCIvZGVsZXRlLXVzZXIvY2FsbGJhY2tcIixcbiAge1xuICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICBxdWVyeTogei5vYmplY3Qoe1xuICAgICAgdG9rZW46IHouc3RyaW5nKCkubWV0YSh7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIlRoZSB0b2tlbiB0byB2ZXJpZnkgdGhlIGRlbGV0aW9uIHJlcXVlc3RcIlxuICAgICAgfSksXG4gICAgICBjYWxsYmFja1VSTDogei5zdHJpbmcoKS5tZXRhKHtcbiAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIFVSTCB0byByZWRpcmVjdCB0byBhZnRlciBkZWxldGlvblwiXG4gICAgICB9KS5vcHRpb25hbCgpXG4gICAgfSksXG4gICAgdXNlOiBbb3JpZ2luQ2hlY2soKGN0eCkgPT4gY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMKV0sXG4gICAgbWV0YWRhdGE6IHtcbiAgICAgIG9wZW5hcGk6IHtcbiAgICAgICAgZGVzY3JpcHRpb246IFwiQ2FsbGJhY2sgdG8gY29tcGxldGUgdXNlciBkZWxldGlvbiB3aXRoIHZlcmlmaWNhdGlvbiB0b2tlblwiLFxuICAgICAgICByZXNwb25zZXM6IHtcbiAgICAgICAgICBcIjIwMFwiOiB7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJVc2VyIHN1Y2Nlc3NmdWxseSBkZWxldGVkXCIsXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgIFwiYXBwbGljYXRpb24vanNvblwiOiB7XG4gICAgICAgICAgICAgICAgc2NoZW1hOiB7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcIm9iamVjdFwiLFxuICAgICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJib29sZWFuXCIsXG4gICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiSW5kaWNhdGVzIGlmIHRoZSBkZWxldGlvbiB3YXMgc3VjY2Vzc2Z1bFwiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgIGVudW06IFtcIlVzZXIgZGVsZXRlZFwiXSxcbiAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJDb25maXJtYXRpb24gbWVzc2FnZVwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICByZXF1aXJlZDogW1wic3VjY2Vzc1wiLCBcIm1lc3NhZ2VcIl1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIGFzeW5jIChjdHgpID0+IHtcbiAgICBpZiAoIWN0eC5jb250ZXh0Lm9wdGlvbnMudXNlcj8uZGVsZXRlVXNlcj8uZW5hYmxlZCkge1xuICAgICAgY3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFxuICAgICAgICBcIkRlbGV0ZSB1c2VyIGlzIGRpc2FibGVkLiBFbmFibGUgaXQgaW4gdGhlIG9wdGlvbnNcIlxuICAgICAgKTtcbiAgICAgIHRocm93IG5ldyBBUElFcnJvcihcIk5PVF9GT1VORFwiKTtcbiAgICB9XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb25Gcm9tQ3R4KGN0eCk7XG4gICAgaWYgKCFzZXNzaW9uKSB7XG4gICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJOT1RfRk9VTkRcIiwge1xuICAgICAgICBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkZBSUxFRF9UT19HRVRfVVNFUl9JTkZPXG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgdG9rZW4gPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFZlcmlmaWNhdGlvblZhbHVlKFxuICAgICAgYGRlbGV0ZS1hY2NvdW50LSR7Y3R4LnF1ZXJ5LnRva2VufWBcbiAgICApO1xuICAgIGlmICghdG9rZW4gfHwgdG9rZW4uZXhwaXJlc0F0IDwgLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpIHtcbiAgICAgIHRocm93IG5ldyBBUElFcnJvcihcIk5PVF9GT1VORFwiLCB7XG4gICAgICAgIG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSU5WQUxJRF9UT0tFTlxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICh0b2tlbi52YWx1ZSAhPT0gc2Vzc2lvbi51c2VyLmlkKSB7XG4gICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJOT1RfRk9VTkRcIiwge1xuICAgICAgICBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLklOVkFMSURfVE9LRU5cbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBiZWZvcmVEZWxldGUgPSBjdHguY29udGV4dC5vcHRpb25zLnVzZXIuZGVsZXRlVXNlcj8uYmVmb3JlRGVsZXRlO1xuICAgIGlmIChiZWZvcmVEZWxldGUpIHtcbiAgICAgIGF3YWl0IGJlZm9yZURlbGV0ZShzZXNzaW9uLnVzZXIsIGN0eC5yZXF1ZXN0KTtcbiAgICB9XG4gICAgYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVVzZXIoc2Vzc2lvbi51c2VyLmlkKTtcbiAgICBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlU2Vzc2lvbnMoc2Vzc2lvbi51c2VyLmlkKTtcbiAgICBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlQWNjb3VudHMoc2Vzc2lvbi51c2VyLmlkKTtcbiAgICBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlVmVyaWZpY2F0aW9uVmFsdWUodG9rZW4uaWQpO1xuICAgIGRlbGV0ZVNlc3Npb25Db29raWUoY3R4KTtcbiAgICBjb25zdCBhZnRlckRlbGV0ZSA9IGN0eC5jb250ZXh0Lm9wdGlvbnMudXNlci5kZWxldGVVc2VyPy5hZnRlckRlbGV0ZTtcbiAgICBpZiAoYWZ0ZXJEZWxldGUpIHtcbiAgICAgIGF3YWl0IGFmdGVyRGVsZXRlKHNlc3Npb24udXNlciwgY3R4LnJlcXVlc3QpO1xuICAgIH1cbiAgICBpZiAoY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMKSB7XG4gICAgICB0aHJvdyBjdHgucmVkaXJlY3QoY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMIHx8IFwiL1wiKTtcbiAgICB9XG4gICAgcmV0dXJuIGN0eC5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBtZXNzYWdlOiBcIlVzZXIgZGVsZXRlZFwiXG4gICAgfSk7XG4gIH1cbik7XG5jb25zdCBjaGFuZ2VFbWFpbCA9IGNyZWF0ZUF1dGhFbmRwb2ludChcbiAgXCIvY2hhbmdlLWVtYWlsXCIsXG4gIHtcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIGJvZHk6IHoub2JqZWN0KHtcbiAgICAgIG5ld0VtYWlsOiB6LmVtYWlsKCkubWV0YSh7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIlRoZSBuZXcgZW1haWwgYWRkcmVzcyB0byBzZXQgbXVzdCBiZSBhIHZhbGlkIGVtYWlsIGFkZHJlc3NcIlxuICAgICAgfSksXG4gICAgICBjYWxsYmFja1VSTDogei5zdHJpbmcoKS5tZXRhKHtcbiAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIFVSTCB0byByZWRpcmVjdCB0byBhZnRlciBlbWFpbCB2ZXJpZmljYXRpb25cIlxuICAgICAgfSkub3B0aW9uYWwoKVxuICAgIH0pLFxuICAgIHVzZTogW3Nlc3Npb25NaWRkbGV3YXJlXSxcbiAgICBtZXRhZGF0YToge1xuICAgICAgb3BlbmFwaToge1xuICAgICAgICByZXNwb25zZXM6IHtcbiAgICAgICAgICBcIjIwMFwiOiB7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJFbWFpbCBjaGFuZ2UgcmVxdWVzdCBwcm9jZXNzZWQgc3VjY2Vzc2Z1bGx5XCIsXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgIFwiYXBwbGljYXRpb24vanNvblwiOiB7XG4gICAgICAgICAgICAgICAgc2NoZW1hOiB7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcIm9iamVjdFwiLFxuICAgICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJvb2xlYW5cIixcbiAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJJbmRpY2F0ZXMgaWYgdGhlIHJlcXVlc3Qgd2FzIHN1Y2Nlc3NmdWxcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICBlbnVtOiBbXCJFbWFpbCB1cGRhdGVkXCIsIFwiVmVyaWZpY2F0aW9uIGVtYWlsIHNlbnRcIl0sXG4gICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiU3RhdHVzIG1lc3NhZ2Ugb2YgdGhlIGVtYWlsIGNoYW5nZSBwcm9jZXNzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgbnVsbGFibGU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBbXCJzdGF0dXNcIl1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIGFzeW5jIChjdHgpID0+IHtcbiAgICBpZiAoIWN0eC5jb250ZXh0Lm9wdGlvbnMudXNlcj8uY2hhbmdlRW1haWw/LmVuYWJsZWQpIHtcbiAgICAgIGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIkNoYW5nZSBlbWFpbCBpcyBkaXNhYmxlZC5cIik7XG4gICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG4gICAgICAgIG1lc3NhZ2U6IFwiQ2hhbmdlIGVtYWlsIGlzIGRpc2FibGVkXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBuZXdFbWFpbCA9IGN0eC5ib2R5Lm5ld0VtYWlsLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKG5ld0VtYWlsID09PSBjdHguY29udGV4dC5zZXNzaW9uLnVzZXIuZW1haWwpIHtcbiAgICAgIGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIkVtYWlsIGlzIHRoZSBzYW1lXCIpO1xuICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwge1xuICAgICAgICBtZXNzYWdlOiBcIkVtYWlsIGlzIHRoZSBzYW1lXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFVzZXJCeUVtYWlsKG5ld0VtYWlsKTtcbiAgICBpZiAoZXhpc3RpbmdVc2VyKSB7XG4gICAgICBjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJFbWFpbCBhbHJlYWR5IGV4aXN0c1wiKTtcbiAgICAgIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcbiAgICAgICAgbWVzc2FnZTogXCJDb3VsZG4ndCB1cGRhdGUgeW91ciBlbWFpbFwiXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGN0eC5jb250ZXh0LnNlc3Npb24udXNlci5lbWFpbFZlcmlmaWVkICE9PSB0cnVlKSB7XG4gICAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVXNlckJ5RW1haWwobmV3RW1haWwpO1xuICAgICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgIHRocm93IG5ldyBBUElFcnJvcihcIlVOUFJPQ0VTU0FCTEVfRU5USVRZXCIsIHtcbiAgICAgICAgICBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLlVTRVJfQUxSRUFEWV9FWElTVFNcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlVXNlckJ5RW1haWwoXG4gICAgICAgIGN0eC5jb250ZXh0LnNlc3Npb24udXNlci5lbWFpbCxcbiAgICAgICAge1xuICAgICAgICAgIGVtYWlsOiBuZXdFbWFpbFxuICAgICAgICB9LFxuICAgICAgICBjdHhcbiAgICAgICk7XG4gICAgICBhd2FpdCBzZXRTZXNzaW9uQ29va2llKGN0eCwge1xuICAgICAgICBzZXNzaW9uOiBjdHguY29udGV4dC5zZXNzaW9uLnNlc3Npb24sXG4gICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAuLi5jdHguY29udGV4dC5zZXNzaW9uLnVzZXIsXG4gICAgICAgICAgZW1haWw6IG5ld0VtYWlsXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LnNlbmRWZXJpZmljYXRpb25FbWFpbCkge1xuICAgICAgICBjb25zdCB0b2tlbjIgPSBhd2FpdCBjcmVhdGVFbWFpbFZlcmlmaWNhdGlvblRva2VuKFxuICAgICAgICAgIGN0eC5jb250ZXh0LnNlY3JldCxcbiAgICAgICAgICBuZXdFbWFpbCxcbiAgICAgICAgICB2b2lkIDAsXG4gICAgICAgICAgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uZXhwaXJlc0luXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHVybDIgPSBgJHtjdHguY29udGV4dC5iYXNlVVJMfS92ZXJpZnktZW1haWw/dG9rZW49JHt0b2tlbjJ9JmNhbGxiYWNrVVJMPSR7Y3R4LmJvZHkuY2FsbGJhY2tVUkwgfHwgXCIvXCJ9YDtcbiAgICAgICAgYXdhaXQgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbi5zZW5kVmVyaWZpY2F0aW9uRW1haWwoXG4gICAgICAgICAge1xuICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICAuLi5jdHguY29udGV4dC5zZXNzaW9uLnVzZXIsXG4gICAgICAgICAgICAgIGVtYWlsOiBuZXdFbWFpbFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHVybDogdXJsMixcbiAgICAgICAgICAgIHRva2VuOiB0b2tlbjJcbiAgICAgICAgICB9LFxuICAgICAgICAgIGN0eC5yZXF1ZXN0XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY3R4Lmpzb24oe1xuICAgICAgICBzdGF0dXM6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoIWN0eC5jb250ZXh0Lm9wdGlvbnMudXNlci5jaGFuZ2VFbWFpbC5zZW5kQ2hhbmdlRW1haWxWZXJpZmljYXRpb24pIHtcbiAgICAgIGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlZlcmlmaWNhdGlvbiBlbWFpbCBpc24ndCBlbmFibGVkLlwiKTtcbiAgICAgIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcbiAgICAgICAgbWVzc2FnZTogXCJWZXJpZmljYXRpb24gZW1haWwgaXNuJ3QgZW5hYmxlZFwiXG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgdG9rZW4gPSBhd2FpdCBjcmVhdGVFbWFpbFZlcmlmaWNhdGlvblRva2VuKFxuICAgICAgY3R4LmNvbnRleHQuc2VjcmV0LFxuICAgICAgY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLmVtYWlsLFxuICAgICAgbmV3RW1haWwsXG4gICAgICBjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5leHBpcmVzSW5cbiAgICApO1xuICAgIGNvbnN0IHVybCA9IGAke2N0eC5jb250ZXh0LmJhc2VVUkx9L3ZlcmlmeS1lbWFpbD90b2tlbj0ke3Rva2VufSZjYWxsYmFja1VSTD0ke2N0eC5ib2R5LmNhbGxiYWNrVVJMIHx8IFwiL1wifWA7XG4gICAgYXdhaXQgY3R4LmNvbnRleHQub3B0aW9ucy51c2VyLmNoYW5nZUVtYWlsLnNlbmRDaGFuZ2VFbWFpbFZlcmlmaWNhdGlvbihcbiAgICAgIHtcbiAgICAgICAgdXNlcjogY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLFxuICAgICAgICBuZXdFbWFpbCxcbiAgICAgICAgdXJsLFxuICAgICAgICB0b2tlblxuICAgICAgfSxcbiAgICAgIGN0eC5yZXF1ZXN0XG4gICAgKTtcbiAgICByZXR1cm4gY3R4Lmpzb24oe1xuICAgICAgc3RhdHVzOiB0cnVlXG4gICAgfSk7XG4gIH1cbik7XG5cbmZ1bmN0aW9uIHNhbml0aXplKGlucHV0KSB7XG4gIHJldHVybiBpbnB1dC5yZXBsYWNlKC8mL2csIFwiJmFtcDtcIikucmVwbGFjZSgvPC9nLCBcIiZsdDtcIikucmVwbGFjZSgvPi9nLCBcIiZndDtcIikucmVwbGFjZSgvXCIvZywgXCImcXVvdDtcIikucmVwbGFjZSgvJy9nLCBcIiYjMzk7XCIpO1xufVxuY29uc3QgaHRtbCA9IChlcnJvckNvZGUgPSBcIlVua25vd25cIikgPT4gYDwhRE9DVFlQRSBodG1sPlxuPGh0bWwgbGFuZz1cImVuXCI+XG48aGVhZD5cbiAgICA8bWV0YSBjaGFyc2V0PVwiVVRGLThcIj5cbiAgICA8bWV0YSBuYW1lPVwidmlld3BvcnRcIiBjb250ZW50PVwid2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMFwiPlxuICAgIDx0aXRsZT5BdXRoZW50aWNhdGlvbiBFcnJvcjwvdGl0bGU+XG4gICAgPHN0eWxlPlxuICAgICAgICA6cm9vdCB7XG4gICAgICAgICAgICAtLWJnLWNvbG9yOiAjZjhmOWZhO1xuICAgICAgICAgICAgLS10ZXh0LWNvbG9yOiAjMjEyNTI5O1xuICAgICAgICAgICAgLS1hY2NlbnQtY29sb3I6ICMwMDAwMDA7XG4gICAgICAgICAgICAtLWVycm9yLWNvbG9yOiAjZGMzNTQ1O1xuICAgICAgICAgICAgLS1ib3JkZXItY29sb3I6ICNlOWVjZWY7XG4gICAgICAgIH1cbiAgICAgICAgYm9keSB7XG4gICAgICAgICAgICBmb250LWZhbWlseTogLWFwcGxlLXN5c3RlbSwgQmxpbmtNYWNTeXN0ZW1Gb250LCAnU2Vnb2UgVUknLCBSb2JvdG8sICdIZWx2ZXRpY2EgTmV1ZScsIEFyaWFsLCBzYW5zLXNlcmlmO1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmctY29sb3IpO1xuICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtY29sb3IpO1xuICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgIGhlaWdodDogMTAwdmg7XG4gICAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgICBsaW5lLWhlaWdodDogMS41O1xuICAgICAgICB9XG4gICAgICAgIC5lcnJvci1jb250YWluZXIge1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7XG4gICAgICAgICAgICBib3gtc2hhZG93OiAwIDRweCA2cHggcmdiYSgwLCAwLCAwLCAwLjA1KTtcbiAgICAgICAgICAgIHBhZGRpbmc6IDIuNXJlbTtcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgIG1heC13aWR0aDogOTAlO1xuICAgICAgICAgICAgd2lkdGg6IDQwMHB4O1xuICAgICAgICB9XG4gICAgICAgIGgxIHtcbiAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1lcnJvci1jb2xvcik7XG4gICAgICAgICAgICBmb250LXNpemU6IDEuNzVyZW07XG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxcmVtO1xuICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgICAgfVxuICAgICAgICBwIHtcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEuNXJlbTtcbiAgICAgICAgICAgIGNvbG9yOiAjNDk1MDU3O1xuICAgICAgICB9XG4gICAgICAgIC5idG4ge1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYWNjZW50LWNvbG9yKTtcbiAgICAgICAgICAgIGNvbG9yOiAjZmZmZmZmO1xuICAgICAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICAgICAgICAgICAgcGFkZGluZzogMC43NXJlbSAxLjVyZW07XG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlO1xuICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWFjY2VudC1jb2xvcik7XG4gICAgICAgIH1cbiAgICAgICAgLmJ0bjpob3ZlciB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMTMxNzIxO1xuICAgICAgICB9XG4gICAgICAgIC5lcnJvci1jb2RlIHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMC44NzVyZW07XG4gICAgICAgICAgICBjb2xvcjogIzZjNzU3ZDtcbiAgICAgICAgICAgIG1hcmdpbi10b3A6IDEuNXJlbTtcbiAgICAgICAgICAgIHBhZGRpbmctdG9wOiAxLjVyZW07XG4gICAgICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLWNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgICAuaWNvbiB7XG4gICAgICAgICAgICBmb250LXNpemU6IDNyZW07XG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxcmVtO1xuICAgICAgICB9XG4gICAgPC9zdHlsZT5cbjwvaGVhZD5cbjxib2R5PlxuICAgIDxkaXYgY2xhc3M9XCJlcnJvci1jb250YWluZXJcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImljb25cIj5cXHUyNkEwXFx1RkUwRjwvZGl2PlxuICAgICAgICA8aDE+QmV0dGVyIEF1dGggRXJyb3I8L2gxPlxuICAgICAgICA8cD5XZSBlbmNvdW50ZXJlZCBhbiBpc3N1ZSB3aGlsZSBwcm9jZXNzaW5nIHlvdXIgcmVxdWVzdC4gUGxlYXNlIHRyeSBhZ2FpbiBvciBjb250YWN0IHRoZSBhcHBsaWNhdGlvbiBvd25lciBpZiB0aGUgcHJvYmxlbSBwZXJzaXN0cy48L3A+XG4gICAgICAgIDxhIGhyZWY9XCIvXCIgaWQ9XCJyZXR1cm5MaW5rXCIgY2xhc3M9XCJidG5cIj5SZXR1cm4gdG8gQXBwbGljYXRpb248L2E+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJlcnJvci1jb2RlXCI+RXJyb3IgQ29kZTogPHNwYW4gaWQ9XCJlcnJvckNvZGVcIj4ke3Nhbml0aXplKFxuICBlcnJvckNvZGVcbil9PC9zcGFuPjwvZGl2PlxuICAgIDwvZGl2PlxuPC9ib2R5PlxuPC9odG1sPmA7XG5jb25zdCBlcnJvciA9IGNyZWF0ZUF1dGhFbmRwb2ludChcbiAgXCIvZXJyb3JcIixcbiAge1xuICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICBtZXRhZGF0YToge1xuICAgICAgLi4uSElERV9NRVRBREFUQSxcbiAgICAgIG9wZW5hcGk6IHtcbiAgICAgICAgZGVzY3JpcHRpb246IFwiRGlzcGxheXMgYW4gZXJyb3IgcGFnZVwiLFxuICAgICAgICByZXNwb25zZXM6IHtcbiAgICAgICAgICBcIjIwMFwiOiB7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgIFwidGV4dC9odG1sXCI6IHtcbiAgICAgICAgICAgICAgICBzY2hlbWE6IHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgSFRNTCBjb250ZW50IG9mIHRoZSBlcnJvciBwYWdlXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIGFzeW5jIChjKSA9PiB7XG4gICAgY29uc3QgcXVlcnkgPSBuZXcgVVJMKGMucmVxdWVzdD8udXJsIHx8IFwiXCIpLnNlYXJjaFBhcmFtcy5nZXQoXCJlcnJvclwiKSB8fCBcIlVua25vd25cIjtcbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKGh0bWwocXVlcnkpLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwidGV4dC9odG1sXCJcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuKTtcblxuY29uc3Qgb2sgPSBjcmVhdGVBdXRoRW5kcG9pbnQoXG4gIFwiL29rXCIsXG4gIHtcbiAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgbWV0YWRhdGE6IHtcbiAgICAgIC4uLkhJREVfTUVUQURBVEEsXG4gICAgICBvcGVuYXBpOiB7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIkNoZWNrIGlmIHRoZSBBUEkgaXMgd29ya2luZ1wiLFxuICAgICAgICByZXNwb25zZXM6IHtcbiAgICAgICAgICBcIjIwMFwiOiB7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJBUEkgaXMgd29ya2luZ1wiLFxuICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICBcImFwcGxpY2F0aW9uL2pzb25cIjoge1xuICAgICAgICAgICAgICAgIHNjaGVtYToge1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJvYmplY3RcIixcbiAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgb2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJvb2xlYW5cIixcbiAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJJbmRpY2F0ZXMgaWYgdGhlIEFQSSBpcyB3b3JraW5nXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBbXCJva1wiXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgYXN5bmMgKGN0eCkgPT4ge1xuICAgIHJldHVybiBjdHguanNvbih7XG4gICAgICBvazogdHJ1ZVxuICAgIH0pO1xuICB9XG4pO1xuXG5jb25zdCBsaXN0VXNlckFjY291bnRzID0gY3JlYXRlQXV0aEVuZHBvaW50KFxuICBcIi9saXN0LWFjY291bnRzXCIsXG4gIHtcbiAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgdXNlOiBbc2Vzc2lvbk1pZGRsZXdhcmVdLFxuICAgIG1ldGFkYXRhOiB7XG4gICAgICBvcGVuYXBpOiB7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIkxpc3QgYWxsIGFjY291bnRzIGxpbmtlZCB0byB0aGUgdXNlclwiLFxuICAgICAgICByZXNwb25zZXM6IHtcbiAgICAgICAgICBcIjIwMFwiOiB7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgIFwiYXBwbGljYXRpb24vanNvblwiOiB7XG4gICAgICAgICAgICAgICAgc2NoZW1hOiB7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICBpdGVtczoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm9iamVjdFwiLFxuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVySWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogXCJkYXRlLXRpbWVcIlxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZEF0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBcImRhdGUtdGltZVwiXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgIHNjb3Blczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IFtcbiAgICAgICAgICAgICAgICAgICAgICBcImlkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgXCJwcm92aWRlcklkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgXCJjcmVhdGVkQXRcIixcbiAgICAgICAgICAgICAgICAgICAgICBcInVwZGF0ZWRBdFwiLFxuICAgICAgICAgICAgICAgICAgICAgIFwiYWNjb3VudElkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgXCJzY29wZXNcIlxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LFxuICBhc3luYyAoYykgPT4ge1xuICAgIGNvbnN0IHNlc3Npb24gPSBjLmNvbnRleHQuc2Vzc2lvbjtcbiAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IGMuY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZEFjY291bnRzKFxuICAgICAgc2Vzc2lvbi51c2VyLmlkXG4gICAgKTtcbiAgICByZXR1cm4gYy5qc29uKFxuICAgICAgYWNjb3VudHMubWFwKChhKSA9PiAoe1xuICAgICAgICBpZDogYS5pZCxcbiAgICAgICAgcHJvdmlkZXJJZDogYS5wcm92aWRlcklkLFxuICAgICAgICBjcmVhdGVkQXQ6IGEuY3JlYXRlZEF0LFxuICAgICAgICB1cGRhdGVkQXQ6IGEudXBkYXRlZEF0LFxuICAgICAgICBhY2NvdW50SWQ6IGEuYWNjb3VudElkLFxuICAgICAgICBzY29wZXM6IGEuc2NvcGU/LnNwbGl0KFwiLFwiKSB8fCBbXVxuICAgICAgfSkpXG4gICAgKTtcbiAgfVxuKTtcbmNvbnN0IGxpbmtTb2NpYWxBY2NvdW50ID0gY3JlYXRlQXV0aEVuZHBvaW50KFxuICBcIi9saW5rLXNvY2lhbFwiLFxuICB7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICByZXF1aXJlSGVhZGVyczogdHJ1ZSxcbiAgICBib2R5OiB6Lm9iamVjdCh7XG4gICAgICAvKipcbiAgICAgICAqIENhbGxiYWNrIFVSTCB0byByZWRpcmVjdCB0byBhZnRlciB0aGUgdXNlciBoYXMgc2lnbmVkIGluLlxuICAgICAgICovXG4gICAgICBjYWxsYmFja1VSTDogei5zdHJpbmcoKS5tZXRhKHtcbiAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIFVSTCB0byByZWRpcmVjdCB0byBhZnRlciB0aGUgdXNlciBoYXMgc2lnbmVkIGluXCJcbiAgICAgIH0pLm9wdGlvbmFsKCksXG4gICAgICAvKipcbiAgICAgICAqIE9BdXRoMiBwcm92aWRlciB0byB1c2VcbiAgICAgICAqL1xuICAgICAgcHJvdmlkZXI6IFNvY2lhbFByb3ZpZGVyTGlzdEVudW0sXG4gICAgICAvKipcbiAgICAgICAqIElEIFRva2VuIGZvciBkaXJlY3QgYXV0aGVudGljYXRpb24gd2l0aG91dCByZWRpcmVjdFxuICAgICAgICovXG4gICAgICBpZFRva2VuOiB6Lm9iamVjdCh7XG4gICAgICAgIHRva2VuOiB6LnN0cmluZygpLFxuICAgICAgICBub25jZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICBhY2Nlc3NUb2tlbjogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICByZWZyZXNoVG9rZW46IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgc2NvcGVzOiB6LmFycmF5KHouc3RyaW5nKCkpLm9wdGlvbmFsKClcbiAgICAgIH0pLm9wdGlvbmFsKCksXG4gICAgICAvKipcbiAgICAgICAqIFdoZXRoZXIgdG8gYWxsb3cgc2lnbiB1cCBmb3IgbmV3IHVzZXJzXG4gICAgICAgKi9cbiAgICAgIHJlcXVlc3RTaWduVXA6IHouYm9vbGVhbigpLm9wdGlvbmFsKCksXG4gICAgICAvKipcbiAgICAgICAqIEFkZGl0aW9uYWwgc2NvcGVzIHRvIHJlcXVlc3Qgd2hlbiBsaW5raW5nIHRoZSBhY2NvdW50LlxuICAgICAgICogVGhpcyBpcyB1c2VmdWwgZm9yIHJlcXVlc3RpbmcgYWRkaXRpb25hbCBwZXJtaXNzaW9ucyB3aGVuXG4gICAgICAgKiBsaW5raW5nIGEgc29jaWFsIGFjY291bnQgY29tcGFyZWQgdG8gdGhlIGluaXRpYWwgYXV0aGVudGljYXRpb24uXG4gICAgICAgKi9cbiAgICAgIHNjb3Blczogei5hcnJheSh6LnN0cmluZygpKS5tZXRhKHtcbiAgICAgICAgZGVzY3JpcHRpb246IFwiQWRkaXRpb25hbCBzY29wZXMgdG8gcmVxdWVzdCBmcm9tIHRoZSBwcm92aWRlclwiXG4gICAgICB9KS5vcHRpb25hbCgpLFxuICAgICAgLyoqXG4gICAgICAgKiBUaGUgVVJMIHRvIHJlZGlyZWN0IHRvIGlmIHRoZXJlIGlzIGFuIGVycm9yIGR1cmluZyB0aGUgbGluayBwcm9jZXNzLlxuICAgICAgICovXG4gICAgICBlcnJvckNhbGxiYWNrVVJMOiB6LnN0cmluZygpLm1ldGEoe1xuICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgVVJMIHRvIHJlZGlyZWN0IHRvIGlmIHRoZXJlIGlzIGFuIGVycm9yIGR1cmluZyB0aGUgbGluayBwcm9jZXNzXCJcbiAgICAgIH0pLm9wdGlvbmFsKCksXG4gICAgICAvKipcbiAgICAgICAqIERpc2FibGUgYXV0b21hdGljIHJlZGlyZWN0aW9uIHRvIHRoZSBwcm92aWRlclxuICAgICAgICpcbiAgICAgICAqIFRoaXMgaXMgdXNlZnVsIGlmIHlvdSB3YW50IHRvIGhhbmRsZSB0aGUgcmVkaXJlY3Rpb25cbiAgICAgICAqIHlvdXJzZWxmIGxpa2UgaW4gYSBwb3B1cCBvciBhIGRpZmZlcmVudCB0YWIuXG4gICAgICAgKi9cbiAgICAgIGRpc2FibGVSZWRpcmVjdDogei5ib29sZWFuKCkubWV0YSh7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIkRpc2FibGUgYXV0b21hdGljIHJlZGlyZWN0aW9uIHRvIHRoZSBwcm92aWRlci4gVXNlZnVsIGZvciBoYW5kbGluZyB0aGUgcmVkaXJlY3Rpb24geW91cnNlbGZcIlxuICAgICAgfSkub3B0aW9uYWwoKVxuICAgIH0pLFxuICAgIHVzZTogW3Nlc3Npb25NaWRkbGV3YXJlXSxcbiAgICBtZXRhZGF0YToge1xuICAgICAgb3BlbmFwaToge1xuICAgICAgICBkZXNjcmlwdGlvbjogXCJMaW5rIGEgc29jaWFsIGFjY291bnQgdG8gdGhlIHVzZXJcIixcbiAgICAgICAgcmVzcG9uc2VzOiB7XG4gICAgICAgICAgXCIyMDBcIjoge1xuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICBcImFwcGxpY2F0aW9uL2pzb25cIjoge1xuICAgICAgICAgICAgICAgIHNjaGVtYToge1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJvYmplY3RcIixcbiAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgYXV0aG9yaXphdGlvbiBVUkwgdG8gcmVkaXJlY3QgdGhlIHVzZXIgdG9cIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICByZWRpcmVjdDoge1xuICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYm9vbGVhblwiLFxuICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkluZGljYXRlcyBpZiB0aGUgdXNlciBzaG91bGQgYmUgcmVkaXJlY3RlZCB0byB0aGUgYXV0aG9yaXphdGlvbiBVUkxcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJvb2xlYW5cIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IFtcInJlZGlyZWN0XCJdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LFxuICBhc3luYyAoYykgPT4ge1xuICAgIGNvbnN0IHNlc3Npb24gPSBjLmNvbnRleHQuc2Vzc2lvbjtcbiAgICBjb25zdCBwcm92aWRlciA9IGMuY29udGV4dC5zb2NpYWxQcm92aWRlcnMuZmluZChcbiAgICAgIChwKSA9PiBwLmlkID09PSBjLmJvZHkucHJvdmlkZXJcbiAgICApO1xuICAgIGlmICghcHJvdmlkZXIpIHtcbiAgICAgIGMuY29udGV4dC5sb2dnZXIuZXJyb3IoXG4gICAgICAgIFwiUHJvdmlkZXIgbm90IGZvdW5kLiBNYWtlIHN1cmUgdG8gYWRkIHRoZSBwcm92aWRlciBpbiB5b3VyIGF1dGggY29uZmlnXCIsXG4gICAgICAgIHtcbiAgICAgICAgICBwcm92aWRlcjogYy5ib2R5LnByb3ZpZGVyXG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJOT1RfRk9VTkRcIiwge1xuICAgICAgICBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLlBST1ZJREVSX05PVF9GT1VORFxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChjLmJvZHkuaWRUb2tlbikge1xuICAgICAgaWYgKCFwcm92aWRlci52ZXJpZnlJZFRva2VuKSB7XG4gICAgICAgIGMuY29udGV4dC5sb2dnZXIuZXJyb3IoXG4gICAgICAgICAgXCJQcm92aWRlciBkb2VzIG5vdCBzdXBwb3J0IGlkIHRva2VuIHZlcmlmaWNhdGlvblwiLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHByb3ZpZGVyOiBjLmJvZHkucHJvdmlkZXJcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIHRocm93IG5ldyBBUElFcnJvcihcIk5PVF9GT1VORFwiLCB7XG4gICAgICAgICAgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5JRF9UT0tFTl9OT1RfU1VQUE9SVEVEXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgeyB0b2tlbiwgbm9uY2UgfSA9IGMuYm9keS5pZFRva2VuO1xuICAgICAgY29uc3QgdmFsaWQgPSBhd2FpdCBwcm92aWRlci52ZXJpZnlJZFRva2VuKHRva2VuLCBub25jZSk7XG4gICAgICBpZiAoIXZhbGlkKSB7XG4gICAgICAgIGMuY29udGV4dC5sb2dnZXIuZXJyb3IoXCJJbnZhbGlkIGlkIHRva2VuXCIsIHtcbiAgICAgICAgICBwcm92aWRlcjogYy5ib2R5LnByb3ZpZGVyXG4gICAgICAgIH0pO1xuICAgICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwge1xuICAgICAgICAgIG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSU5WQUxJRF9UT0tFTlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGxpbmtpbmdVc2VySW5mbyA9IGF3YWl0IHByb3ZpZGVyLmdldFVzZXJJbmZvKHtcbiAgICAgICAgaWRUb2tlbjogdG9rZW4sXG4gICAgICAgIGFjY2Vzc1Rva2VuOiBjLmJvZHkuaWRUb2tlbi5hY2Nlc3NUb2tlbixcbiAgICAgICAgcmVmcmVzaFRva2VuOiBjLmJvZHkuaWRUb2tlbi5yZWZyZXNoVG9rZW5cbiAgICAgIH0pO1xuICAgICAgaWYgKCFsaW5raW5nVXNlckluZm8gfHwgIWxpbmtpbmdVc2VySW5mbz8udXNlcikge1xuICAgICAgICBjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIGdldCB1c2VyIGluZm9cIiwge1xuICAgICAgICAgIHByb3ZpZGVyOiBjLmJvZHkucHJvdmlkZXJcbiAgICAgICAgfSk7XG4gICAgICAgIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7XG4gICAgICAgICAgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5GQUlMRURfVE9fR0VUX1VTRVJfSU5GT1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGxpbmtpbmdVc2VySWQgPSBTdHJpbmcobGlua2luZ1VzZXJJbmZvLnVzZXIuaWQpO1xuICAgICAgaWYgKCFsaW5raW5nVXNlckluZm8udXNlci5lbWFpbCkge1xuICAgICAgICBjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiVXNlciBlbWFpbCBub3QgZm91bmRcIiwge1xuICAgICAgICAgIHByb3ZpZGVyOiBjLmJvZHkucHJvdmlkZXJcbiAgICAgICAgfSk7XG4gICAgICAgIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7XG4gICAgICAgICAgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5VU0VSX0VNQUlMX05PVF9GT1VORFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGV4aXN0aW5nQWNjb3VudHMgPSBhd2FpdCBjLmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRBY2NvdW50cyhcbiAgICAgICAgc2Vzc2lvbi51c2VyLmlkXG4gICAgICApO1xuICAgICAgY29uc3QgaGFzQmVlbkxpbmtlZCA9IGV4aXN0aW5nQWNjb3VudHMuZmluZChcbiAgICAgICAgKGEpID0+IGEucHJvdmlkZXJJZCA9PT0gcHJvdmlkZXIuaWQgJiYgYS5hY2NvdW50SWQgPT09IGxpbmtpbmdVc2VySWRcbiAgICAgICk7XG4gICAgICBpZiAoaGFzQmVlbkxpbmtlZCkge1xuICAgICAgICByZXR1cm4gYy5qc29uKHtcbiAgICAgICAgICB1cmw6IFwiXCIsXG4gICAgICAgICAgLy8gdGhpcyBpcyBmb3IgdHlwZSBpbmZlcmVuY2VcbiAgICAgICAgICBzdGF0dXM6IHRydWUsXG4gICAgICAgICAgcmVkaXJlY3Q6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgdHJ1c3RlZFByb3ZpZGVycyA9IGMuY29udGV4dC5vcHRpb25zLmFjY291bnQ/LmFjY291bnRMaW5raW5nPy50cnVzdGVkUHJvdmlkZXJzO1xuICAgICAgY29uc3QgaXNUcnVzdGVkUHJvdmlkZXIgPSB0cnVzdGVkUHJvdmlkZXJzPy5pbmNsdWRlcyhwcm92aWRlci5pZCk7XG4gICAgICBpZiAoIWlzVHJ1c3RlZFByb3ZpZGVyICYmICFsaW5raW5nVXNlckluZm8udXNlci5lbWFpbFZlcmlmaWVkIHx8IGMuY29udGV4dC5vcHRpb25zLmFjY291bnQ/LmFjY291bnRMaW5raW5nPy5lbmFibGVkID09PSBmYWxzZSkge1xuICAgICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwge1xuICAgICAgICAgIG1lc3NhZ2U6IFwiQWNjb3VudCBub3QgbGlua2VkIC0gbGlua2luZyBub3QgYWxsb3dlZFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKGxpbmtpbmdVc2VySW5mby51c2VyLmVtYWlsICE9PSBzZXNzaW9uLnVzZXIuZW1haWwgJiYgYy5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8uYWNjb3VudExpbmtpbmc/LmFsbG93RGlmZmVyZW50RW1haWxzICE9PSB0cnVlKSB7XG4gICAgICAgIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7XG4gICAgICAgICAgbWVzc2FnZTogXCJBY2NvdW50IG5vdCBsaW5rZWQgLSBkaWZmZXJlbnQgZW1haWxzIG5vdCBhbGxvd2VkXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBjLmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZUFjY291bnQoXG4gICAgICAgICAge1xuICAgICAgICAgICAgdXNlcklkOiBzZXNzaW9uLnVzZXIuaWQsXG4gICAgICAgICAgICBwcm92aWRlcklkOiBwcm92aWRlci5pZCxcbiAgICAgICAgICAgIGFjY291bnRJZDogbGlua2luZ1VzZXJJZCxcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiBjLmJvZHkuaWRUb2tlbi5hY2Nlc3NUb2tlbixcbiAgICAgICAgICAgIGlkVG9rZW46IHRva2VuLFxuICAgICAgICAgICAgcmVmcmVzaFRva2VuOiBjLmJvZHkuaWRUb2tlbi5yZWZyZXNoVG9rZW4sXG4gICAgICAgICAgICBzY29wZTogYy5ib2R5LmlkVG9rZW4uc2NvcGVzPy5qb2luKFwiLFwiKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgY1xuICAgICAgICApO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJFWFBFQ1RBVElPTl9GQUlMRURcIiwge1xuICAgICAgICAgIG1lc3NhZ2U6IFwiQWNjb3VudCBub3QgbGlua2VkIC0gdW5hYmxlIHRvIGNyZWF0ZSBhY2NvdW50XCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoYy5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8uYWNjb3VudExpbmtpbmc/LnVwZGF0ZVVzZXJJbmZvT25MaW5rID09PSB0cnVlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci51cGRhdGVVc2VyKHNlc3Npb24udXNlci5pZCwge1xuICAgICAgICAgICAgbmFtZTogbGlua2luZ1VzZXJJbmZvLnVzZXI/Lm5hbWUsXG4gICAgICAgICAgICBpbWFnZTogbGlua2luZ1VzZXJJbmZvLnVzZXI/LmltYWdlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXCJDb3VsZCBub3QgdXBkYXRlIHVzZXIgLSBcIiArIGUudG9TdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBjLmpzb24oe1xuICAgICAgICB1cmw6IFwiXCIsXG4gICAgICAgIC8vIHRoaXMgaXMgZm9yIHR5cGUgaW5mZXJlbmNlXG4gICAgICAgIHN0YXR1czogdHJ1ZSxcbiAgICAgICAgcmVkaXJlY3Q6IGZhbHNlXG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3Qgc3RhdGUgPSBhd2FpdCBnZW5lcmF0ZVN0YXRlKGMsIHtcbiAgICAgIHVzZXJJZDogc2Vzc2lvbi51c2VyLmlkLFxuICAgICAgZW1haWw6IHNlc3Npb24udXNlci5lbWFpbFxuICAgIH0pO1xuICAgIGNvbnN0IHVybCA9IGF3YWl0IHByb3ZpZGVyLmNyZWF0ZUF1dGhvcml6YXRpb25VUkwoe1xuICAgICAgc3RhdGU6IHN0YXRlLnN0YXRlLFxuICAgICAgY29kZVZlcmlmaWVyOiBzdGF0ZS5jb2RlVmVyaWZpZXIsXG4gICAgICByZWRpcmVjdFVSSTogYCR7Yy5jb250ZXh0LmJhc2VVUkx9L2NhbGxiYWNrLyR7cHJvdmlkZXIuaWR9YCxcbiAgICAgIHNjb3BlczogYy5ib2R5LnNjb3Blc1xuICAgIH0pO1xuICAgIHJldHVybiBjLmpzb24oe1xuICAgICAgdXJsOiB1cmwudG9TdHJpbmcoKSxcbiAgICAgIHJlZGlyZWN0OiAhYy5ib2R5LmRpc2FibGVSZWRpcmVjdFxuICAgIH0pO1xuICB9XG4pO1xuY29uc3QgdW5saW5rQWNjb3VudCA9IGNyZWF0ZUF1dGhFbmRwb2ludChcbiAgXCIvdW5saW5rLWFjY291bnRcIixcbiAge1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgYm9keTogei5vYmplY3Qoe1xuICAgICAgcHJvdmlkZXJJZDogei5zdHJpbmcoKSxcbiAgICAgIGFjY291bnRJZDogei5zdHJpbmcoKS5vcHRpb25hbCgpXG4gICAgfSksXG4gICAgdXNlOiBbZnJlc2hTZXNzaW9uTWlkZGxld2FyZV0sXG4gICAgbWV0YWRhdGE6IHtcbiAgICAgIG9wZW5hcGk6IHtcbiAgICAgICAgZGVzY3JpcHRpb246IFwiVW5saW5rIGFuIGFjY291bnRcIixcbiAgICAgICAgcmVzcG9uc2VzOiB7XG4gICAgICAgICAgXCIyMDBcIjoge1xuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICBcImFwcGxpY2F0aW9uL2pzb25cIjoge1xuICAgICAgICAgICAgICAgIHNjaGVtYToge1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJvYmplY3RcIixcbiAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJib29sZWFuXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgYXN5bmMgKGN0eCkgPT4ge1xuICAgIGNvbnN0IHsgcHJvdmlkZXJJZCwgYWNjb3VudElkIH0gPSBjdHguYm9keTtcbiAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kQWNjb3VudHMoXG4gICAgICBjdHguY29udGV4dC5zZXNzaW9uLnVzZXIuaWRcbiAgICApO1xuICAgIGlmIChhY2NvdW50cy5sZW5ndGggPT09IDEgJiYgIWN0eC5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8uYWNjb3VudExpbmtpbmc/LmFsbG93VW5saW5raW5nQWxsKSB7XG4gICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG4gICAgICAgIG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuRkFJTEVEX1RPX1VOTElOS19MQVNUX0FDQ09VTlRcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBhY2NvdW50RXhpc3QgPSBhY2NvdW50cy5maW5kKFxuICAgICAgKGFjY291bnQpID0+IGFjY291bnRJZCA/IGFjY291bnQuYWNjb3VudElkID09PSBhY2NvdW50SWQgJiYgYWNjb3VudC5wcm92aWRlcklkID09PSBwcm92aWRlcklkIDogYWNjb3VudC5wcm92aWRlcklkID09PSBwcm92aWRlcklkXG4gICAgKTtcbiAgICBpZiAoIWFjY291bnRFeGlzdCkge1xuICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwge1xuICAgICAgICBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkFDQ09VTlRfTk9UX0ZPVU5EXG4gICAgICB9KTtcbiAgICB9XG4gICAgYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZUFjY291bnQoYWNjb3VudEV4aXN0LmlkKTtcbiAgICByZXR1cm4gY3R4Lmpzb24oe1xuICAgICAgc3RhdHVzOiB0cnVlXG4gICAgfSk7XG4gIH1cbik7XG5jb25zdCBnZXRBY2Nlc3NUb2tlbiA9IGNyZWF0ZUF1dGhFbmRwb2ludChcbiAgXCIvZ2V0LWFjY2Vzcy10b2tlblwiLFxuICB7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICBib2R5OiB6Lm9iamVjdCh7XG4gICAgICBwcm92aWRlcklkOiB6LnN0cmluZygpLm1ldGEoe1xuICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgcHJvdmlkZXIgSUQgZm9yIHRoZSBPQXV0aCBwcm92aWRlclwiXG4gICAgICB9KSxcbiAgICAgIGFjY291bnRJZDogei5zdHJpbmcoKS5tZXRhKHtcbiAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIGFjY291bnQgSUQgYXNzb2NpYXRlZCB3aXRoIHRoZSByZWZyZXNoIHRva2VuXCJcbiAgICAgIH0pLm9wdGlvbmFsKCksXG4gICAgICB1c2VySWQ6IHouc3RyaW5nKCkubWV0YSh7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIlRoZSB1c2VyIElEIGFzc29jaWF0ZWQgd2l0aCB0aGUgYWNjb3VudFwiXG4gICAgICB9KS5vcHRpb25hbCgpXG4gICAgfSksXG4gICAgbWV0YWRhdGE6IHtcbiAgICAgIG9wZW5hcGk6IHtcbiAgICAgICAgZGVzY3JpcHRpb246IFwiR2V0IGEgdmFsaWQgYWNjZXNzIHRva2VuLCBkb2luZyBhIHJlZnJlc2ggaWYgbmVlZGVkXCIsXG4gICAgICAgIHJlc3BvbnNlczoge1xuICAgICAgICAgIDIwMDoge1xuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiQSBWYWxpZCBhY2Nlc3MgdG9rZW5cIixcbiAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHtcbiAgICAgICAgICAgICAgICBzY2hlbWE6IHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwib2JqZWN0XCIsXG4gICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgICAgIHRva2VuVHlwZToge1xuICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgaWRUb2tlbjoge1xuICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHJlZnJlc2hUb2tlbjoge1xuICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYWNjZXNzVG9rZW5FeHBpcmVzQXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogXCJkYXRlLXRpbWVcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICByZWZyZXNoVG9rZW5FeHBpcmVzQXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogXCJkYXRlLXRpbWVcIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICA0MDA6IHtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkludmFsaWQgcmVmcmVzaCB0b2tlbiBvciBwcm92aWRlciBjb25maWd1cmF0aW9uXCJcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIGFzeW5jIChjdHgpID0+IHtcbiAgICBjb25zdCB7IHByb3ZpZGVySWQsIGFjY291bnRJZCwgdXNlcklkIH0gPSBjdHguYm9keTtcbiAgICBjb25zdCByZXEgPSBjdHgucmVxdWVzdDtcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkZyb21DdHgoY3R4KTtcbiAgICBpZiAocmVxICYmICFzZXNzaW9uKSB7XG4gICAgICB0aHJvdyBjdHguZXJyb3IoXCJVTkFVVEhPUklaRURcIik7XG4gICAgfVxuICAgIGxldCByZXNvbHZlZFVzZXJJZCA9IHNlc3Npb24/LnVzZXI/LmlkIHx8IHVzZXJJZDtcbiAgICBpZiAoIXJlc29sdmVkVXNlcklkKSB7XG4gICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG4gICAgICAgIG1lc3NhZ2U6IGBFaXRoZXIgdXNlcklkIG9yIHNlc3Npb24gaXMgcmVxdWlyZWRgXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKCFjdHguY29udGV4dC5zb2NpYWxQcm92aWRlcnMuZmluZCgocCkgPT4gcC5pZCA9PT0gcHJvdmlkZXJJZCkpIHtcbiAgICAgIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcbiAgICAgICAgbWVzc2FnZTogYFByb3ZpZGVyICR7cHJvdmlkZXJJZH0gaXMgbm90IHN1cHBvcnRlZC5gXG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgYWNjb3VudHMgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZEFjY291bnRzKHJlc29sdmVkVXNlcklkKTtcbiAgICBjb25zdCBhY2NvdW50ID0gYWNjb3VudHMuZmluZChcbiAgICAgIChhY2MpID0+IGFjY291bnRJZCA/IGFjYy5pZCA9PT0gYWNjb3VudElkICYmIGFjYy5wcm92aWRlcklkID09PSBwcm92aWRlcklkIDogYWNjLnByb3ZpZGVySWQgPT09IHByb3ZpZGVySWRcbiAgICApO1xuICAgIGlmICghYWNjb3VudCkge1xuICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwge1xuICAgICAgICBtZXNzYWdlOiBcIkFjY291bnQgbm90IGZvdW5kXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBwcm92aWRlciA9IGN0eC5jb250ZXh0LnNvY2lhbFByb3ZpZGVycy5maW5kKFxuICAgICAgKHApID0+IHAuaWQgPT09IHByb3ZpZGVySWRcbiAgICApO1xuICAgIGlmICghcHJvdmlkZXIpIHtcbiAgICAgIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcbiAgICAgICAgbWVzc2FnZTogYFByb3ZpZGVyICR7cHJvdmlkZXJJZH0gbm90IGZvdW5kLmBcbiAgICAgIH0pO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgbGV0IG5ld1Rva2VucyA9IG51bGw7XG4gICAgICBjb25zdCBhY2Nlc3NUb2tlbkV4cGlyZWQgPSBhY2NvdW50LmFjY2Vzc1Rva2VuRXhwaXJlc0F0ICYmIG5ldyBEYXRlKGFjY291bnQuYWNjZXNzVG9rZW5FeHBpcmVzQXQpLmdldFRpbWUoKSAtIERhdGUubm93KCkgPCA1ZTM7XG4gICAgICBpZiAoYWNjb3VudC5yZWZyZXNoVG9rZW4gJiYgYWNjZXNzVG9rZW5FeHBpcmVkICYmIHByb3ZpZGVyLnJlZnJlc2hBY2Nlc3NUb2tlbikge1xuICAgICAgICBuZXdUb2tlbnMgPSBhd2FpdCBwcm92aWRlci5yZWZyZXNoQWNjZXNzVG9rZW4oXG4gICAgICAgICAgYWNjb3VudC5yZWZyZXNoVG9rZW5cbiAgICAgICAgKTtcbiAgICAgICAgYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZUFjY291bnQoYWNjb3VudC5pZCwge1xuICAgICAgICAgIGFjY2Vzc1Rva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwobmV3VG9rZW5zLmFjY2Vzc1Rva2VuLCBjdHguY29udGV4dCksXG4gICAgICAgICAgYWNjZXNzVG9rZW5FeHBpcmVzQXQ6IG5ld1Rva2Vucy5hY2Nlc3NUb2tlbkV4cGlyZXNBdCxcbiAgICAgICAgICByZWZyZXNoVG9rZW46IGF3YWl0IHNldFRva2VuVXRpbChuZXdUb2tlbnMucmVmcmVzaFRva2VuLCBjdHguY29udGV4dCksXG4gICAgICAgICAgcmVmcmVzaFRva2VuRXhwaXJlc0F0OiBuZXdUb2tlbnMucmVmcmVzaFRva2VuRXhwaXJlc0F0XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgdG9rZW5zID0ge1xuICAgICAgICBhY2Nlc3NUb2tlbjogYXdhaXQgZGVjcnlwdE9BdXRoVG9rZW4oXG4gICAgICAgICAgbmV3VG9rZW5zPy5hY2Nlc3NUb2tlbiA/PyBhY2NvdW50LmFjY2Vzc1Rva2VuID8/IFwiXCIsXG4gICAgICAgICAgY3R4LmNvbnRleHRcbiAgICAgICAgKSxcbiAgICAgICAgYWNjZXNzVG9rZW5FeHBpcmVzQXQ6IG5ld1Rva2Vucz8uYWNjZXNzVG9rZW5FeHBpcmVzQXQgPz8gYWNjb3VudC5hY2Nlc3NUb2tlbkV4cGlyZXNBdCA/PyB2b2lkIDAsXG4gICAgICAgIHNjb3BlczogYWNjb3VudC5zY29wZT8uc3BsaXQoXCIsXCIpID8/IFtdLFxuICAgICAgICBpZFRva2VuOiBuZXdUb2tlbnM/LmlkVG9rZW4gPz8gYWNjb3VudC5pZFRva2VuID8/IHZvaWQgMFxuICAgICAgfTtcbiAgICAgIHJldHVybiBjdHguanNvbih0b2tlbnMpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG4gICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGdldCBhIHZhbGlkIGFjY2VzcyB0b2tlblwiLFxuICAgICAgICBjYXVzZTogZXJyb3JcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuKTtcbmNvbnN0IHJlZnJlc2hUb2tlbiA9IGNyZWF0ZUF1dGhFbmRwb2ludChcbiAgXCIvcmVmcmVzaC10b2tlblwiLFxuICB7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICBib2R5OiB6Lm9iamVjdCh7XG4gICAgICBwcm92aWRlcklkOiB6LnN0cmluZygpLm1ldGEoe1xuICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgcHJvdmlkZXIgSUQgZm9yIHRoZSBPQXV0aCBwcm92aWRlclwiXG4gICAgICB9KSxcbiAgICAgIGFjY291bnRJZDogei5zdHJpbmcoKS5tZXRhKHtcbiAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIGFjY291bnQgSUQgYXNzb2NpYXRlZCB3aXRoIHRoZSByZWZyZXNoIHRva2VuXCJcbiAgICAgIH0pLm9wdGlvbmFsKCksXG4gICAgICB1c2VySWQ6IHouc3RyaW5nKCkubWV0YSh7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIlRoZSB1c2VyIElEIGFzc29jaWF0ZWQgd2l0aCB0aGUgYWNjb3VudFwiXG4gICAgICB9KS5vcHRpb25hbCgpXG4gICAgfSksXG4gICAgbWV0YWRhdGE6IHtcbiAgICAgIG9wZW5hcGk6IHtcbiAgICAgICAgZGVzY3JpcHRpb246IFwiUmVmcmVzaCB0aGUgYWNjZXNzIHRva2VuIHVzaW5nIGEgcmVmcmVzaCB0b2tlblwiLFxuICAgICAgICByZXNwb25zZXM6IHtcbiAgICAgICAgICAyMDA6IHtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkFjY2VzcyB0b2tlbiByZWZyZXNoZWQgc3VjY2Vzc2Z1bGx5XCIsXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgIFwiYXBwbGljYXRpb24vanNvblwiOiB7XG4gICAgICAgICAgICAgICAgc2NoZW1hOiB7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcIm9iamVjdFwiLFxuICAgICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICB0b2tlblR5cGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGlkVG9rZW46IHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiB7XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICByZWZyZXNoVG9rZW46IHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuRXhwaXJlc0F0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IFwiZGF0ZS10aW1lXCJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcmVmcmVzaFRva2VuRXhwaXJlc0F0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IFwiZGF0ZS10aW1lXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgNDAwOiB7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJJbnZhbGlkIHJlZnJlc2ggdG9rZW4gb3IgcHJvdmlkZXIgY29uZmlndXJhdGlvblwiXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LFxuICBhc3luYyAoY3R4KSA9PiB7XG4gICAgY29uc3QgeyBwcm92aWRlcklkLCBhY2NvdW50SWQsIHVzZXJJZCB9ID0gY3R4LmJvZHk7XG4gICAgY29uc3QgcmVxID0gY3R4LnJlcXVlc3Q7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb25Gcm9tQ3R4KGN0eCk7XG4gICAgaWYgKHJlcSAmJiAhc2Vzc2lvbikge1xuICAgICAgdGhyb3cgY3R4LmVycm9yKFwiVU5BVVRIT1JJWkVEXCIpO1xuICAgIH1cbiAgICBsZXQgcmVzb2x2ZWRVc2VySWQgPSBzZXNzaW9uPy51c2VyPy5pZCB8fCB1c2VySWQ7XG4gICAgaWYgKCFyZXNvbHZlZFVzZXJJZCkge1xuICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwge1xuICAgICAgICBtZXNzYWdlOiBgRWl0aGVyIHVzZXJJZCBvciBzZXNzaW9uIGlzIHJlcXVpcmVkYFxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IGFjY291bnRzID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRBY2NvdW50cyhyZXNvbHZlZFVzZXJJZCk7XG4gICAgY29uc3QgYWNjb3VudCA9IGFjY291bnRzLmZpbmQoXG4gICAgICAoYWNjKSA9PiBhY2NvdW50SWQgPyBhY2MuaWQgPT09IGFjY291bnRJZCAmJiBhY2MucHJvdmlkZXJJZCA9PT0gcHJvdmlkZXJJZCA6IGFjYy5wcm92aWRlcklkID09PSBwcm92aWRlcklkXG4gICAgKTtcbiAgICBpZiAoIWFjY291bnQpIHtcbiAgICAgIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcbiAgICAgICAgbWVzc2FnZTogXCJBY2NvdW50IG5vdCBmb3VuZFwiXG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgcHJvdmlkZXIgPSBjdHguY29udGV4dC5zb2NpYWxQcm92aWRlcnMuZmluZChcbiAgICAgIChwKSA9PiBwLmlkID09PSBwcm92aWRlcklkXG4gICAgKTtcbiAgICBpZiAoIXByb3ZpZGVyKSB7XG4gICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG4gICAgICAgIG1lc3NhZ2U6IGBQcm92aWRlciAke3Byb3ZpZGVySWR9IG5vdCBmb3VuZC5gXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKCFwcm92aWRlci5yZWZyZXNoQWNjZXNzVG9rZW4pIHtcbiAgICAgIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcbiAgICAgICAgbWVzc2FnZTogYFByb3ZpZGVyICR7cHJvdmlkZXJJZH0gZG9lcyBub3Qgc3VwcG9ydCB0b2tlbiByZWZyZXNoaW5nLmBcbiAgICAgIH0pO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgY29uc3QgdG9rZW5zID0gYXdhaXQgcHJvdmlkZXIucmVmcmVzaEFjY2Vzc1Rva2VuKFxuICAgICAgICBhY2NvdW50LnJlZnJlc2hUb2tlblxuICAgICAgKTtcbiAgICAgIGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci51cGRhdGVBY2NvdW50KGFjY291bnQuaWQsIHtcbiAgICAgICAgYWNjZXNzVG9rZW46IGF3YWl0IHNldFRva2VuVXRpbCh0b2tlbnMuYWNjZXNzVG9rZW4sIGN0eC5jb250ZXh0KSxcbiAgICAgICAgcmVmcmVzaFRva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwodG9rZW5zLnJlZnJlc2hUb2tlbiwgY3R4LmNvbnRleHQpLFxuICAgICAgICBhY2Nlc3NUb2tlbkV4cGlyZXNBdDogdG9rZW5zLmFjY2Vzc1Rva2VuRXhwaXJlc0F0LFxuICAgICAgICByZWZyZXNoVG9rZW5FeHBpcmVzQXQ6IHRva2Vucy5yZWZyZXNoVG9rZW5FeHBpcmVzQXRcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGN0eC5qc29uKHRva2Vucyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcbiAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gcmVmcmVzaCBhY2Nlc3MgdG9rZW5cIixcbiAgICAgICAgY2F1c2U6IGVycm9yXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbik7XG5jb25zdCBhY2NvdW50SW5mbyA9IGNyZWF0ZUF1dGhFbmRwb2ludChcbiAgXCIvYWNjb3VudC1pbmZvXCIsXG4gIHtcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIHVzZTogW3Nlc3Npb25NaWRkbGV3YXJlXSxcbiAgICBtZXRhZGF0YToge1xuICAgICAgb3BlbmFwaToge1xuICAgICAgICBkZXNjcmlwdGlvbjogXCJHZXQgdGhlIGFjY291bnQgaW5mbyBwcm92aWRlZCBieSB0aGUgcHJvdmlkZXJcIixcbiAgICAgICAgcmVzcG9uc2VzOiB7XG4gICAgICAgICAgXCIyMDBcIjoge1xuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICBcImFwcGxpY2F0aW9uL2pzb25cIjoge1xuICAgICAgICAgICAgICAgIHNjaGVtYToge1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJvYmplY3RcIixcbiAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwib2JqZWN0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBpbWFnZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZW1haWxWZXJpZmllZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJvb2xlYW5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IFtcImlkXCIsIFwiZW1haWxWZXJpZmllZFwiXVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJvYmplY3RcIixcbiAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7fSxcbiAgICAgICAgICAgICAgICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IFtcInVzZXJcIiwgXCJkYXRhXCJdLFxuICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBib2R5OiB6Lm9iamVjdCh7XG4gICAgICBhY2NvdW50SWQ6IHouc3RyaW5nKCkubWV0YSh7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIlRoZSBwcm92aWRlciBnaXZlbiBhY2NvdW50IGlkIGZvciB3aGljaCB0byBnZXQgdGhlIGFjY291bnQgaW5mb1wiXG4gICAgICB9KVxuICAgIH0pXG4gIH0sXG4gIGFzeW5jIChjdHgpID0+IHtcbiAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRBY2NvdW50KFxuICAgICAgY3R4LmJvZHkuYWNjb3VudElkXG4gICAgKTtcbiAgICBpZiAoIWFjY291bnQgfHwgYWNjb3VudC51c2VySWQgIT09IGN0eC5jb250ZXh0LnNlc3Npb24udXNlci5pZCkge1xuICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwge1xuICAgICAgICBtZXNzYWdlOiBcIkFjY291bnQgbm90IGZvdW5kXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBwcm92aWRlciA9IGN0eC5jb250ZXh0LnNvY2lhbFByb3ZpZGVycy5maW5kKFxuICAgICAgKHApID0+IHAuaWQgPT09IGFjY291bnQucHJvdmlkZXJJZFxuICAgICk7XG4gICAgaWYgKCFwcm92aWRlcikge1xuICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsIHtcbiAgICAgICAgbWVzc2FnZTogYFByb3ZpZGVyIGFjY291bnQgcHJvdmlkZXIgaXMgJHthY2NvdW50LnByb3ZpZGVySWR9IGJ1dCBpdCBpcyBub3QgY29uZmlndXJlZGBcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCB0b2tlbnMgPSBhd2FpdCBnZXRBY2Nlc3NUb2tlbih7XG4gICAgICAuLi5jdHgsXG4gICAgICBib2R5OiB7XG4gICAgICAgIGFjY291bnRJZDogYWNjb3VudC5pZCxcbiAgICAgICAgcHJvdmlkZXJJZDogYWNjb3VudC5wcm92aWRlcklkXG4gICAgICB9LFxuICAgICAgcmV0dXJuSGVhZGVyczogZmFsc2VcbiAgICB9KTtcbiAgICBpZiAoIXRva2Vucy5hY2Nlc3NUb2tlbikge1xuICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwge1xuICAgICAgICBtZXNzYWdlOiBcIkFjY2VzcyB0b2tlbiBub3QgZm91bmRcIlxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IGluZm8gPSBhd2FpdCBwcm92aWRlci5nZXRVc2VySW5mbyh7XG4gICAgICAuLi50b2tlbnMsXG4gICAgICBhY2Nlc3NUb2tlbjogdG9rZW5zLmFjY2Vzc1Rva2VuXG4gICAgfSk7XG4gICAgcmV0dXJuIGN0eC5qc29uKGluZm8pO1xuICB9XG4pO1xuXG5jb25zdCBkZWZ1UmVwbGFjZUFycmF5cyA9IGNyZWF0ZURlZnUoKG9iaiwga2V5LCB2YWx1ZSkgPT4ge1xuICBpZiAoQXJyYXkuaXNBcnJheShvYmpba2V5XSkgJiYgQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICBvYmpba2V5XSA9IHZhbHVlO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59KTtcbmZ1bmN0aW9uIHRvQXV0aEVuZHBvaW50cyhlbmRwb2ludHMsIGN0eCkge1xuICBjb25zdCBhcGkgPSB7fTtcbiAgZm9yIChjb25zdCBba2V5LCBlbmRwb2ludF0gb2YgT2JqZWN0LmVudHJpZXMoZW5kcG9pbnRzKSkge1xuICAgIGFwaVtrZXldID0gYXN5bmMgKGNvbnRleHQpID0+IHtcbiAgICAgIGNvbnN0IGF1dGhDb250ZXh0ID0gYXdhaXQgY3R4O1xuICAgICAgbGV0IGludGVybmFsQ29udGV4dCA9IHtcbiAgICAgICAgLi4uY29udGV4dCxcbiAgICAgICAgY29udGV4dDoge1xuICAgICAgICAgIC4uLmF1dGhDb250ZXh0LFxuICAgICAgICAgIHJldHVybmVkOiB2b2lkIDAsXG4gICAgICAgICAgcmVzcG9uc2VIZWFkZXJzOiB2b2lkIDAsXG4gICAgICAgICAgc2Vzc2lvbjogbnVsbFxuICAgICAgICB9LFxuICAgICAgICBwYXRoOiBlbmRwb2ludC5wYXRoLFxuICAgICAgICBoZWFkZXJzOiBjb250ZXh0Py5oZWFkZXJzID8gbmV3IEhlYWRlcnMoY29udGV4dD8uaGVhZGVycykgOiB2b2lkIDBcbiAgICAgIH07XG4gICAgICBjb25zdCB7IGJlZm9yZUhvb2tzLCBhZnRlckhvb2tzIH0gPSBnZXRIb29rcyhhdXRoQ29udGV4dCk7XG4gICAgICBjb25zdCBiZWZvcmUgPSBhd2FpdCBydW5CZWZvcmVIb29rcyhpbnRlcm5hbENvbnRleHQsIGJlZm9yZUhvb2tzKTtcbiAgICAgIGlmIChcImNvbnRleHRcIiBpbiBiZWZvcmUgJiYgYmVmb3JlLmNvbnRleHQgJiYgdHlwZW9mIGJlZm9yZS5jb250ZXh0ID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIGNvbnN0IHsgaGVhZGVycywgLi4ucmVzdCB9ID0gYmVmb3JlLmNvbnRleHQ7XG4gICAgICAgIGlmIChoZWFkZXJzKSB7XG4gICAgICAgICAgaGVhZGVycy5mb3JFYWNoKCh2YWx1ZSwga2V5MikgPT4ge1xuICAgICAgICAgICAgaW50ZXJuYWxDb250ZXh0LmhlYWRlcnMuc2V0KGtleTIsIHZhbHVlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpbnRlcm5hbENvbnRleHQgPSBkZWZ1UmVwbGFjZUFycmF5cyhyZXN0LCBpbnRlcm5hbENvbnRleHQpO1xuICAgICAgfSBlbHNlIGlmIChiZWZvcmUpIHtcbiAgICAgICAgcmV0dXJuIGJlZm9yZTtcbiAgICAgIH1cbiAgICAgIGludGVybmFsQ29udGV4dC5hc1Jlc3BvbnNlID0gZmFsc2U7XG4gICAgICBpbnRlcm5hbENvbnRleHQucmV0dXJuSGVhZGVycyA9IHRydWU7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBlbmRwb2ludChpbnRlcm5hbENvbnRleHQpLmNhdGNoKChlKSA9PiB7XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgQVBJRXJyb3IpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzcG9uc2U6IGUsXG4gICAgICAgICAgICBoZWFkZXJzOiBlLmhlYWRlcnMgPyBuZXcgSGVhZGVycyhlLmhlYWRlcnMpIDogbnVsbFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgZTtcbiAgICAgIH0pO1xuICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQgaW5zdGFuY2VvZiBSZXNwb25zZSkge1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgICAgaW50ZXJuYWxDb250ZXh0LmNvbnRleHQucmV0dXJuZWQgPSByZXN1bHQucmVzcG9uc2U7XG4gICAgICBpbnRlcm5hbENvbnRleHQuY29udGV4dC5yZXNwb25zZUhlYWRlcnMgPSByZXN1bHQuaGVhZGVycztcbiAgICAgIGNvbnN0IGFmdGVyID0gYXdhaXQgcnVuQWZ0ZXJIb29rcyhpbnRlcm5hbENvbnRleHQsIGFmdGVySG9va3MpO1xuICAgICAgaWYgKGFmdGVyLnJlc3BvbnNlKSB7XG4gICAgICAgIHJlc3VsdC5yZXNwb25zZSA9IGFmdGVyLnJlc3BvbnNlO1xuICAgICAgfVxuICAgICAgaWYgKHJlc3VsdC5yZXNwb25zZSBpbnN0YW5jZW9mIEFQSUVycm9yICYmIHNob3VsZFB1Ymxpc2hMb2coYXV0aENvbnRleHQubG9nZ2VyLmxldmVsLCBcImRlYnVnXCIpKSB7XG4gICAgICAgIHJlc3VsdC5yZXNwb25zZS5zdGFjayA9IHJlc3VsdC5yZXNwb25zZS5lcnJvclN0YWNrO1xuICAgICAgfVxuICAgICAgaWYgKHJlc3VsdC5yZXNwb25zZSBpbnN0YW5jZW9mIEFQSUVycm9yICYmICFjb250ZXh0Py5hc1Jlc3BvbnNlKSB7XG4gICAgICAgIHRocm93IHJlc3VsdC5yZXNwb25zZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gY29udGV4dD8uYXNSZXNwb25zZSA/IHRvUmVzcG9uc2UocmVzdWx0LnJlc3BvbnNlLCB7XG4gICAgICAgIGhlYWRlcnM6IHJlc3VsdC5oZWFkZXJzXG4gICAgICB9KSA6IGNvbnRleHQ/LnJldHVybkhlYWRlcnMgPyB7XG4gICAgICAgIGhlYWRlcnM6IHJlc3VsdC5oZWFkZXJzLFxuICAgICAgICByZXNwb25zZTogcmVzdWx0LnJlc3BvbnNlXG4gICAgICB9IDogcmVzdWx0LnJlc3BvbnNlO1xuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH07XG4gICAgYXBpW2tleV0ucGF0aCA9IGVuZHBvaW50LnBhdGg7XG4gICAgYXBpW2tleV0ub3B0aW9ucyA9IGVuZHBvaW50Lm9wdGlvbnM7XG4gIH1cbiAgcmV0dXJuIGFwaTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHJ1bkJlZm9yZUhvb2tzKGNvbnRleHQsIGhvb2tzKSB7XG4gIGxldCBtb2RpZmllZENvbnRleHQgPSB7fTtcbiAgZm9yIChjb25zdCBob29rIG9mIGhvb2tzKSB7XG4gICAgaWYgKGhvb2subWF0Y2hlcihjb250ZXh0KSkge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaG9vay5oYW5kbGVyKHtcbiAgICAgICAgLi4uY29udGV4dCxcbiAgICAgICAgcmV0dXJuSGVhZGVyczogZmFsc2VcbiAgICAgIH0pLmNhdGNoKChlKSA9PiB7XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgQVBJRXJyb3IgJiYgc2hvdWxkUHVibGlzaExvZyhjb250ZXh0LmNvbnRleHQubG9nZ2VyLmxldmVsLCBcImRlYnVnXCIpKSB7XG4gICAgICAgICAgZS5zdGFjayA9IGUuZXJyb3JTdGFjaztcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBlO1xuICAgICAgfSk7XG4gICAgICBpZiAocmVzdWx0ICYmIHR5cGVvZiByZXN1bHQgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgaWYgKFwiY29udGV4dFwiIGluIHJlc3VsdCAmJiB0eXBlb2YgcmVzdWx0LmNvbnRleHQgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICBjb25zdCB7IGhlYWRlcnMsIC4uLnJlc3QgfSA9IHJlc3VsdC5jb250ZXh0O1xuICAgICAgICAgIGlmIChoZWFkZXJzIGluc3RhbmNlb2YgSGVhZGVycykge1xuICAgICAgICAgICAgaWYgKG1vZGlmaWVkQ29udGV4dC5oZWFkZXJzKSB7XG4gICAgICAgICAgICAgIGhlYWRlcnMuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4ge1xuICAgICAgICAgICAgICAgIG1vZGlmaWVkQ29udGV4dC5oZWFkZXJzPy5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgbW9kaWZpZWRDb250ZXh0LmhlYWRlcnMgPSBoZWFkZXJzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBtb2RpZmllZENvbnRleHQgPSBkZWZ1UmVwbGFjZUFycmF5cyhyZXN0LCBtb2RpZmllZENvbnRleHQpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB7IGNvbnRleHQ6IG1vZGlmaWVkQ29udGV4dCB9O1xufVxuYXN5bmMgZnVuY3Rpb24gcnVuQWZ0ZXJIb29rcyhjb250ZXh0LCBob29rcykge1xuICBmb3IgKGNvbnN0IGhvb2sgb2YgaG9va3MpIHtcbiAgICBpZiAoaG9vay5tYXRjaGVyKGNvbnRleHQpKSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBob29rLmhhbmRsZXIoY29udGV4dCkuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBBUElFcnJvcikge1xuICAgICAgICAgIGlmIChzaG91bGRQdWJsaXNoTG9nKGNvbnRleHQuY29udGV4dC5sb2dnZXIubGV2ZWwsIFwiZGVidWdcIikpIHtcbiAgICAgICAgICAgIGUuc3RhY2sgPSBlLmVycm9yU3RhY2s7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXNwb25zZTogZSxcbiAgICAgICAgICAgIGhlYWRlcnM6IGUuaGVhZGVycyA/IG5ldyBIZWFkZXJzKGUuaGVhZGVycykgOiBudWxsXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBlO1xuICAgICAgfSk7XG4gICAgICBpZiAocmVzdWx0LmhlYWRlcnMpIHtcbiAgICAgICAgcmVzdWx0LmhlYWRlcnMuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4ge1xuICAgICAgICAgIGlmICghY29udGV4dC5jb250ZXh0LnJlc3BvbnNlSGVhZGVycykge1xuICAgICAgICAgICAgY29udGV4dC5jb250ZXh0LnJlc3BvbnNlSGVhZGVycyA9IG5ldyBIZWFkZXJzKHtcbiAgICAgICAgICAgICAgW2tleV06IHZhbHVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGtleS50b0xvd2VyQ2FzZSgpID09PSBcInNldC1jb29raWVcIikge1xuICAgICAgICAgICAgICBjb250ZXh0LmNvbnRleHQucmVzcG9uc2VIZWFkZXJzLmFwcGVuZChrZXksIHZhbHVlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnRleHQuY29udGV4dC5yZXNwb25zZUhlYWRlcnMuc2V0KGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAocmVzdWx0LnJlc3BvbnNlKSB7XG4gICAgICAgIGNvbnRleHQuY29udGV4dC5yZXR1cm5lZCA9IHJlc3VsdC5yZXNwb25zZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHtcbiAgICByZXNwb25zZTogY29udGV4dC5jb250ZXh0LnJldHVybmVkLFxuICAgIGhlYWRlcnM6IGNvbnRleHQuY29udGV4dC5yZXNwb25zZUhlYWRlcnNcbiAgfTtcbn1cbmZ1bmN0aW9uIGdldEhvb2tzKGF1dGhDb250ZXh0KSB7XG4gIGNvbnN0IHBsdWdpbnMgPSBhdXRoQ29udGV4dC5vcHRpb25zLnBsdWdpbnMgfHwgW107XG4gIGNvbnN0IGJlZm9yZUhvb2tzID0gW107XG4gIGNvbnN0IGFmdGVySG9va3MgPSBbXTtcbiAgaWYgKGF1dGhDb250ZXh0Lm9wdGlvbnMuaG9va3M/LmJlZm9yZSkge1xuICAgIGJlZm9yZUhvb2tzLnB1c2goe1xuICAgICAgbWF0Y2hlcjogKCkgPT4gdHJ1ZSxcbiAgICAgIGhhbmRsZXI6IGF1dGhDb250ZXh0Lm9wdGlvbnMuaG9va3MuYmVmb3JlXG4gICAgfSk7XG4gIH1cbiAgaWYgKGF1dGhDb250ZXh0Lm9wdGlvbnMuaG9va3M/LmFmdGVyKSB7XG4gICAgYWZ0ZXJIb29rcy5wdXNoKHtcbiAgICAgIG1hdGNoZXI6ICgpID0+IHRydWUsXG4gICAgICBoYW5kbGVyOiBhdXRoQ29udGV4dC5vcHRpb25zLmhvb2tzLmFmdGVyXG4gICAgfSk7XG4gIH1cbiAgY29uc3QgcGx1Z2luQmVmb3JlSG9va3MgPSBwbHVnaW5zLm1hcCgocGx1Z2luKSA9PiB7XG4gICAgaWYgKHBsdWdpbi5ob29rcz8uYmVmb3JlKSB7XG4gICAgICByZXR1cm4gcGx1Z2luLmhvb2tzLmJlZm9yZTtcbiAgICB9XG4gIH0pLmZpbHRlcigocGx1Z2luKSA9PiBwbHVnaW4gIT09IHZvaWQgMCkuZmxhdCgpO1xuICBjb25zdCBwbHVnaW5BZnRlckhvb2tzID0gcGx1Z2lucy5tYXAoKHBsdWdpbikgPT4ge1xuICAgIGlmIChwbHVnaW4uaG9va3M/LmFmdGVyKSB7XG4gICAgICByZXR1cm4gcGx1Z2luLmhvb2tzLmFmdGVyO1xuICAgIH1cbiAgfSkuZmlsdGVyKChwbHVnaW4pID0+IHBsdWdpbiAhPT0gdm9pZCAwKS5mbGF0KCk7XG4gIHBsdWdpbkJlZm9yZUhvb2tzLmxlbmd0aCAmJiBiZWZvcmVIb29rcy5wdXNoKC4uLnBsdWdpbkJlZm9yZUhvb2tzKTtcbiAgcGx1Z2luQWZ0ZXJIb29rcy5sZW5ndGggJiYgYWZ0ZXJIb29rcy5wdXNoKC4uLnBsdWdpbkFmdGVySG9va3MpO1xuICByZXR1cm4ge1xuICAgIGJlZm9yZUhvb2tzLFxuICAgIGFmdGVySG9va3NcbiAgfTtcbn1cblxuZXhwb3J0IHsgZ2V0Q29nbml0b1B1YmxpY0tleSBhcyAkLCBkZWxldGVVc2VyQ2FsbGJhY2sgYXMgQSwgbGlzdFVzZXJBY2NvdW50cyBhcyBCLCBsaW5rU29jaWFsQWNjb3VudCBhcyBDLCByZXF1ZXN0UGFzc3dvcmRSZXNldENhbGxiYWNrIGFzIEQsIHJlcXVlc3RQYXNzd29yZFJlc2V0IGFzIEUsIGZvcmdldFBhc3N3b3JkQ2FsbGJhY2sgYXMgRiwgZGVsZXRlVXNlciBhcyBHLCBISURFX01FVEFEQVRBIGFzIEgsIHNldFBhc3N3b3JkIGFzIEksIGNoYW5nZVBhc3N3b3JkIGFzIEosIGNoYW5nZUVtYWlsIGFzIEssIHNlbmRWZXJpZmljYXRpb25FbWFpbCBhcyBMLCB2ZXJpZnlFbWFpbCBhcyBNLCByZXNldFBhc3N3b3JkIGFzIE4sIGZvcmdldFBhc3N3b3JkIGFzIE8sIHNpZ25JbkVtYWlsIGFzIFAsIHNpZ25PdXQgYXMgUSwgY2FsbGJhY2tPQXV0aCBhcyBSLCBzaWduSW5Tb2NpYWwgYXMgUywgc2VuZFZlcmlmaWNhdGlvbkVtYWlsRm4gYXMgVCwgc29jaWFsUHJvdmlkZXJzIGFzIFUsIHNvY2lhbFByb3ZpZGVyTGlzdCBhcyBWLCBTb2NpYWxQcm92aWRlckxpc3RFbnVtIGFzIFcsIGFwcGxlIGFzIFgsIGdldEFwcGxlUHVibGljS2V5IGFzIFksIGF0bGFzc2lhbiBhcyBaLCBjb2duaXRvIGFzIF8sIGNyZWF0ZUF1dGhvcml6YXRpb25Db2RlUmVxdWVzdCBhcyBhLCBkaXNjb3JkIGFzIGEwLCBkcm9wYm94IGFzIGExLCBmYWNlYm9vayBhcyBhMiwgZmlnbWEgYXMgYTMsIGdpdGh1YiBhcyBhNCwgbGluZWFyIGFzIGE1LCBsaW5rZWRpbiBhcyBhNiwgZ2l0bGFiIGFzIGE3LCBnb29nbGUgYXMgYTgsIGtpY2sgYXMgYTksIG1pY3Jvc29mdCBhcyBhYSwgbm90aW9uIGFzIGFiLCByZWRkaXQgYXMgYWMsIHJvYmxveCBhcyBhZCwgc2FsZXNmb3JjZSBhcyBhZSwgc3BvdGlmeSBhcyBhZiwgdGlrdG9rIGFzIGFnLCB0d2l0Y2ggYXMgYWgsIHR3aXR0ZXIgYXMgYWksIHZrIGFzIGFqLCB6b29tIGFzIGFrLCBodWdnaW5nZmFjZSBhcyBhbCwgc2xhY2sgYXMgYW0sIGtha2FvIGFzIGFuLCBuYXZlciBhcyBhbywgbGluZSBhcyBhcCwgcGF5cGFsIGFzIGFxLCB2YWxpZGF0ZVRva2VuIGFzIGIsIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwgYXMgYywgY3JlYXRlUmVmcmVzaEFjY2Vzc1Rva2VuUmVxdWVzdCBhcyBkLCBnZW5lcmF0ZUNvZGVDaGFsbGVuZ2UgYXMgZSwgZ2V0T0F1dGgyVG9rZW5zIGFzIGYsIGdlbmVyYXRlU3RhdGUgYXMgZywgZW5jb2RlT0F1dGhQYXJhbWV0ZXIgYXMgaCwgZGVjcnlwdE9BdXRoVG9rZW4gYXMgaSwgaGFuZGxlT0F1dGhVc2VySW5mbyBhcyBqLCBjcmVhdGVFbWFpbFZlcmlmaWNhdGlvblRva2VuIGFzIGssIG9yaWdpbkNoZWNrTWlkZGxld2FyZSBhcyBsLCBlcnJvciBhcyBtLCBvayBhcyBuLCBvcmlnaW5DaGVjayBhcyBvLCBwYXJzZVN0YXRlIGFzIHAsIGFjY291bnRJbmZvIGFzIHEsIHJlZnJlc2hBY2Nlc3NUb2tlbiBhcyByLCBzZXRUb2tlblV0aWwgYXMgcywgdG9BdXRoRW5kcG9pbnRzIGFzIHQsIHVwZGF0ZVVzZXIgYXMgdSwgdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSBhcyB2LCB3aWxkY2FyZE1hdGNoIGFzIHcsIGdldEFjY2Vzc1Rva2VuIGFzIHgsIHJlZnJlc2hUb2tlbiBhcyB5LCB1bmxpbmtBY2NvdW50IGFzIHogfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/shared/better-auth.nqWf7zUe.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/node_modules/zod/v4/classic/coerce.js":
/*!************************************************************************!*\
  !*** ./node_modules/better-auth/node_modules/zod/v4/classic/coerce.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   bigint: () => (/* binding */ bigint),\n/* harmony export */   boolean: () => (/* binding */ boolean),\n/* harmony export */   date: () => (/* binding */ date),\n/* harmony export */   number: () => (/* binding */ number),\n/* harmony export */   string: () => (/* binding */ string)\n/* harmony export */ });\n/* harmony import */ var _core_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/index.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/api.js\");\n/* harmony import */ var _schemas_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./schemas.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/classic/schemas.js\");\n\n\nfunction string(params) {\n    return _core_index_js__WEBPACK_IMPORTED_MODULE_0__._coercedString(_schemas_js__WEBPACK_IMPORTED_MODULE_1__.ZodString, params);\n}\nfunction number(params) {\n    return _core_index_js__WEBPACK_IMPORTED_MODULE_0__._coercedNumber(_schemas_js__WEBPACK_IMPORTED_MODULE_1__.ZodNumber, params);\n}\nfunction boolean(params) {\n    return _core_index_js__WEBPACK_IMPORTED_MODULE_0__._coercedBoolean(_schemas_js__WEBPACK_IMPORTED_MODULE_1__.ZodBoolean, params);\n}\nfunction bigint(params) {\n    return _core_index_js__WEBPACK_IMPORTED_MODULE_0__._coercedBigint(_schemas_js__WEBPACK_IMPORTED_MODULE_1__.ZodBigInt, params);\n}\nfunction date(params) {\n    return _core_index_js__WEBPACK_IMPORTED_MODULE_0__._coercedDate(_schemas_js__WEBPACK_IMPORTED_MODULE_1__.ZodDate, params);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvbm9kZV9tb2R1bGVzL3pvZC92NC9jbGFzc2ljL2NvZXJjZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXlDO0FBQ0Q7QUFDakM7QUFDUCxXQUFXLDBEQUFtQixDQUFDLGtEQUFpQjtBQUNoRDtBQUNPO0FBQ1AsV0FBVywwREFBbUIsQ0FBQyxrREFBaUI7QUFDaEQ7QUFDTztBQUNQLFdBQVcsMkRBQW9CLENBQUMsbURBQWtCO0FBQ2xEO0FBQ087QUFDUCxXQUFXLDBEQUFtQixDQUFDLGtEQUFpQjtBQUNoRDtBQUNPO0FBQ1AsV0FBVyx3REFBaUIsQ0FBQyxnREFBZTtBQUM1QyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhbWFhblxcT25lRHJpdmVcXERlc2t0b3BcXEthbmRpZF8yXFxOZXcgZm9sZGVyICgyKVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcbm9kZV9tb2R1bGVzXFx6b2RcXHY0XFxjbGFzc2ljXFxjb2VyY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgY29yZSBmcm9tIFwiLi4vY29yZS9pbmRleC5qc1wiO1xuaW1wb3J0ICogYXMgc2NoZW1hcyBmcm9tIFwiLi9zY2hlbWFzLmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gc3RyaW5nKHBhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl9jb2VyY2VkU3RyaW5nKHNjaGVtYXMuWm9kU3RyaW5nLCBwYXJhbXMpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG51bWJlcihwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5fY29lcmNlZE51bWJlcihzY2hlbWFzLlpvZE51bWJlciwgcGFyYW1zKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBib29sZWFuKHBhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl9jb2VyY2VkQm9vbGVhbihzY2hlbWFzLlpvZEJvb2xlYW4sIHBhcmFtcyk7XG59XG5leHBvcnQgZnVuY3Rpb24gYmlnaW50KHBhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl9jb2VyY2VkQmlnaW50KHNjaGVtYXMuWm9kQmlnSW50LCBwYXJhbXMpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRhdGUocGFyYW1zKSB7XG4gICAgcmV0dXJuIGNvcmUuX2NvZXJjZWREYXRlKHNjaGVtYXMuWm9kRGF0ZSwgcGFyYW1zKTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/node_modules/zod/v4/classic/coerce.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/node_modules/zod/v4/classic/errors.js":
/*!************************************************************************!*\
  !*** ./node_modules/better-auth/node_modules/zod/v4/classic/errors.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ZodError: () => (/* binding */ ZodError),\n/* harmony export */   ZodRealError: () => (/* binding */ ZodRealError)\n/* harmony export */ });\n/* harmony import */ var _core_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/index.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/errors.js\");\n/* harmony import */ var _core_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/index.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/core.js\");\n/* harmony import */ var _core_util_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/util.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/util.js\");\n\n\n\nconst initializer = (inst, issues) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$ZodError.init(inst, issues);\n    inst.name = \"ZodError\";\n    Object.defineProperties(inst, {\n        format: {\n            value: (mapper) => _core_index_js__WEBPACK_IMPORTED_MODULE_0__.formatError(inst, mapper),\n            // enumerable: false,\n        },\n        flatten: {\n            value: (mapper) => _core_index_js__WEBPACK_IMPORTED_MODULE_0__.flattenError(inst, mapper),\n            // enumerable: false,\n        },\n        addIssue: {\n            value: (issue) => {\n                inst.issues.push(issue);\n                inst.message = JSON.stringify(inst.issues, _core_util_js__WEBPACK_IMPORTED_MODULE_1__.jsonStringifyReplacer, 2);\n            },\n            // enumerable: false,\n        },\n        addIssues: {\n            value: (issues) => {\n                inst.issues.push(...issues);\n                inst.message = JSON.stringify(inst.issues, _core_util_js__WEBPACK_IMPORTED_MODULE_1__.jsonStringifyReplacer, 2);\n            },\n            // enumerable: false,\n        },\n        isEmpty: {\n            get() {\n                return inst.issues.length === 0;\n            },\n            // enumerable: false,\n        },\n    });\n    // Object.defineProperty(inst, \"isEmpty\", {\n    //   get() {\n    //     return inst.issues.length === 0;\n    //   },\n    // });\n};\nconst ZodError = _core_index_js__WEBPACK_IMPORTED_MODULE_2__.$constructor(\"ZodError\", initializer);\nconst ZodRealError = _core_index_js__WEBPACK_IMPORTED_MODULE_2__.$constructor(\"ZodError\", initializer, {\n    Parent: Error,\n});\n// /** @deprecated Use `z.core.$ZodErrorMapCtx` instead. */\n// export type ErrorMapCtx = core.$ZodErrorMapCtx;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvbm9kZV9tb2R1bGVzL3pvZC92NC9jbGFzc2ljL2Vycm9ycy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF5QztBQUNJO0FBQ0w7QUFDeEM7QUFDQSxJQUFJLHFEQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLHVEQUFnQjtBQUMvQztBQUNBLFNBQVM7QUFDVDtBQUNBLCtCQUErQix3REFBaUI7QUFDaEQ7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELGdFQUEwQjtBQUNyRixhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELGdFQUEwQjtBQUNyRixhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsUUFBUTtBQUNSO0FBQ08saUJBQWlCLHdEQUFpQjtBQUNsQyxxQkFBcUIsd0RBQWlCO0FBQzdDO0FBQ0EsQ0FBQztBQUNEO0FBQ0EiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYW1hYW5cXE9uZURyaXZlXFxEZXNrdG9wXFxLYW5kaWRfMlxcTmV3IGZvbGRlciAoMilcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXG5vZGVfbW9kdWxlc1xcem9kXFx2NFxcY2xhc3NpY1xcZXJyb3JzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGNvcmUgZnJvbSBcIi4uL2NvcmUvaW5kZXguanNcIjtcbmltcG9ydCB7ICRab2RFcnJvciB9IGZyb20gXCIuLi9jb3JlL2luZGV4LmpzXCI7XG5pbXBvcnQgKiBhcyB1dGlsIGZyb20gXCIuLi9jb3JlL3V0aWwuanNcIjtcbmNvbnN0IGluaXRpYWxpemVyID0gKGluc3QsIGlzc3VlcykgPT4ge1xuICAgICRab2RFcnJvci5pbml0KGluc3QsIGlzc3Vlcyk7XG4gICAgaW5zdC5uYW1lID0gXCJab2RFcnJvclwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGluc3QsIHtcbiAgICAgICAgZm9ybWF0OiB7XG4gICAgICAgICAgICB2YWx1ZTogKG1hcHBlcikgPT4gY29yZS5mb3JtYXRFcnJvcihpbnN0LCBtYXBwZXIpLFxuICAgICAgICAgICAgLy8gZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgIGZsYXR0ZW46IHtcbiAgICAgICAgICAgIHZhbHVlOiAobWFwcGVyKSA9PiBjb3JlLmZsYXR0ZW5FcnJvcihpbnN0LCBtYXBwZXIpLFxuICAgICAgICAgICAgLy8gZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgIGFkZElzc3VlOiB7XG4gICAgICAgICAgICB2YWx1ZTogKGlzc3VlKSA9PiB7XG4gICAgICAgICAgICAgICAgaW5zdC5pc3N1ZXMucHVzaChpc3N1ZSk7XG4gICAgICAgICAgICAgICAgaW5zdC5tZXNzYWdlID0gSlNPTi5zdHJpbmdpZnkoaW5zdC5pc3N1ZXMsIHV0aWwuanNvblN0cmluZ2lmeVJlcGxhY2VyLCAyKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvLyBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgICAgYWRkSXNzdWVzOiB7XG4gICAgICAgICAgICB2YWx1ZTogKGlzc3VlcykgPT4ge1xuICAgICAgICAgICAgICAgIGluc3QuaXNzdWVzLnB1c2goLi4uaXNzdWVzKTtcbiAgICAgICAgICAgICAgICBpbnN0Lm1lc3NhZ2UgPSBKU09OLnN0cmluZ2lmeShpbnN0Lmlzc3VlcywgdXRpbC5qc29uU3RyaW5naWZ5UmVwbGFjZXIsIDIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICBpc0VtcHR5OiB7XG4gICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGluc3QuaXNzdWVzLmxlbmd0aCA9PT0gMDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvLyBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICAvLyBPYmplY3QuZGVmaW5lUHJvcGVydHkoaW5zdCwgXCJpc0VtcHR5XCIsIHtcbiAgICAvLyAgIGdldCgpIHtcbiAgICAvLyAgICAgcmV0dXJuIGluc3QuaXNzdWVzLmxlbmd0aCA9PT0gMDtcbiAgICAvLyAgIH0sXG4gICAgLy8gfSk7XG59O1xuZXhwb3J0IGNvbnN0IFpvZEVycm9yID0gY29yZS4kY29uc3RydWN0b3IoXCJab2RFcnJvclwiLCBpbml0aWFsaXplcik7XG5leHBvcnQgY29uc3QgWm9kUmVhbEVycm9yID0gY29yZS4kY29uc3RydWN0b3IoXCJab2RFcnJvclwiLCBpbml0aWFsaXplciwge1xuICAgIFBhcmVudDogRXJyb3IsXG59KTtcbi8vIC8qKiBAZGVwcmVjYXRlZCBVc2UgYHouY29yZS4kWm9kRXJyb3JNYXBDdHhgIGluc3RlYWQuICovXG4vLyBleHBvcnQgdHlwZSBFcnJvck1hcEN0eCA9IGNvcmUuJFpvZEVycm9yTWFwQ3R4O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/node_modules/zod/v4/classic/errors.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/node_modules/zod/v4/classic/iso.js":
/*!*********************************************************************!*\
  !*** ./node_modules/better-auth/node_modules/zod/v4/classic/iso.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ZodISODate: () => (/* binding */ ZodISODate),\n/* harmony export */   ZodISODateTime: () => (/* binding */ ZodISODateTime),\n/* harmony export */   ZodISODuration: () => (/* binding */ ZodISODuration),\n/* harmony export */   ZodISOTime: () => (/* binding */ ZodISOTime),\n/* harmony export */   date: () => (/* binding */ date),\n/* harmony export */   datetime: () => (/* binding */ datetime),\n/* harmony export */   duration: () => (/* binding */ duration),\n/* harmony export */   time: () => (/* binding */ time)\n/* harmony export */ });\n/* harmony import */ var _core_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/index.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/core.js\");\n/* harmony import */ var _core_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/index.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/schemas.js\");\n/* harmony import */ var _core_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/index.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/api.js\");\n/* harmony import */ var _schemas_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./schemas.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/classic/schemas.js\");\n\n\nconst ZodISODateTime = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodISODateTime\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodISODateTime.init(inst, def);\n    _schemas_js__WEBPACK_IMPORTED_MODULE_2__.ZodStringFormat.init(inst, def);\n});\nfunction datetime(params) {\n    return _core_index_js__WEBPACK_IMPORTED_MODULE_3__._isoDateTime(ZodISODateTime, params);\n}\nconst ZodISODate = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodISODate\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodISODate.init(inst, def);\n    _schemas_js__WEBPACK_IMPORTED_MODULE_2__.ZodStringFormat.init(inst, def);\n});\nfunction date(params) {\n    return _core_index_js__WEBPACK_IMPORTED_MODULE_3__._isoDate(ZodISODate, params);\n}\nconst ZodISOTime = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodISOTime\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodISOTime.init(inst, def);\n    _schemas_js__WEBPACK_IMPORTED_MODULE_2__.ZodStringFormat.init(inst, def);\n});\nfunction time(params) {\n    return _core_index_js__WEBPACK_IMPORTED_MODULE_3__._isoTime(ZodISOTime, params);\n}\nconst ZodISODuration = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodISODuration\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodISODuration.init(inst, def);\n    _schemas_js__WEBPACK_IMPORTED_MODULE_2__.ZodStringFormat.init(inst, def);\n});\nfunction duration(params) {\n    return _core_index_js__WEBPACK_IMPORTED_MODULE_3__._isoDuration(ZodISODuration, params);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvbm9kZV9tb2R1bGVzL3pvZC92NC9jbGFzc2ljL2lzby5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBeUM7QUFDRDtBQUNqQyxxQ0FBcUMsd0RBQWlCO0FBQzdELElBQUksMkRBQW9CO0FBQ3hCLElBQUksd0RBQXVCO0FBQzNCLENBQUM7QUFDTTtBQUNQLFdBQVcsd0RBQWlCO0FBQzVCO0FBQ08saUNBQWlDLHdEQUFpQjtBQUN6RCxJQUFJLHVEQUFnQjtBQUNwQixJQUFJLHdEQUF1QjtBQUMzQixDQUFDO0FBQ007QUFDUCxXQUFXLG9EQUFhO0FBQ3hCO0FBQ08saUNBQWlDLHdEQUFpQjtBQUN6RCxJQUFJLHVEQUFnQjtBQUNwQixJQUFJLHdEQUF1QjtBQUMzQixDQUFDO0FBQ007QUFDUCxXQUFXLG9EQUFhO0FBQ3hCO0FBQ08scUNBQXFDLHdEQUFpQjtBQUM3RCxJQUFJLDJEQUFvQjtBQUN4QixJQUFJLHdEQUF1QjtBQUMzQixDQUFDO0FBQ007QUFDUCxXQUFXLHdEQUFpQjtBQUM1QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhbWFhblxcT25lRHJpdmVcXERlc2t0b3BcXEthbmRpZF8yXFxOZXcgZm9sZGVyICgyKVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcbm9kZV9tb2R1bGVzXFx6b2RcXHY0XFxjbGFzc2ljXFxpc28uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgY29yZSBmcm9tIFwiLi4vY29yZS9pbmRleC5qc1wiO1xuaW1wb3J0ICogYXMgc2NoZW1hcyBmcm9tIFwiLi9zY2hlbWFzLmpzXCI7XG5leHBvcnQgY29uc3QgWm9kSVNPRGF0ZVRpbWUgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kSVNPRGF0ZVRpbWVcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGNvcmUuJFpvZElTT0RhdGVUaW1lLmluaXQoaW5zdCwgZGVmKTtcbiAgICBzY2hlbWFzLlpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBkYXRldGltZShwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5faXNvRGF0ZVRpbWUoWm9kSVNPRGF0ZVRpbWUsIHBhcmFtcyk7XG59XG5leHBvcnQgY29uc3QgWm9kSVNPRGF0ZSA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RJU09EYXRlXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2RJU09EYXRlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBzY2hlbWFzLlpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBkYXRlKHBhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl9pc29EYXRlKFpvZElTT0RhdGUsIHBhcmFtcyk7XG59XG5leHBvcnQgY29uc3QgWm9kSVNPVGltZSA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RJU09UaW1lXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2RJU09UaW1lLmluaXQoaW5zdCwgZGVmKTtcbiAgICBzY2hlbWFzLlpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiB0aW1lKHBhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl9pc29UaW1lKFpvZElTT1RpbWUsIHBhcmFtcyk7XG59XG5leHBvcnQgY29uc3QgWm9kSVNPRHVyYXRpb24gPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kSVNPRHVyYXRpb25cIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGNvcmUuJFpvZElTT0R1cmF0aW9uLmluaXQoaW5zdCwgZGVmKTtcbiAgICBzY2hlbWFzLlpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBkdXJhdGlvbihwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5faXNvRHVyYXRpb24oWm9kSVNPRHVyYXRpb24sIHBhcmFtcyk7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/node_modules/zod/v4/classic/iso.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/node_modules/zod/v4/classic/parse.js":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/node_modules/zod/v4/classic/parse.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decode: () => (/* binding */ decode),\n/* harmony export */   decodeAsync: () => (/* binding */ decodeAsync),\n/* harmony export */   encode: () => (/* binding */ encode),\n/* harmony export */   encodeAsync: () => (/* binding */ encodeAsync),\n/* harmony export */   parse: () => (/* binding */ parse),\n/* harmony export */   parseAsync: () => (/* binding */ parseAsync),\n/* harmony export */   safeDecode: () => (/* binding */ safeDecode),\n/* harmony export */   safeDecodeAsync: () => (/* binding */ safeDecodeAsync),\n/* harmony export */   safeEncode: () => (/* binding */ safeEncode),\n/* harmony export */   safeEncodeAsync: () => (/* binding */ safeEncodeAsync),\n/* harmony export */   safeParse: () => (/* binding */ safeParse),\n/* harmony export */   safeParseAsync: () => (/* binding */ safeParseAsync)\n/* harmony export */ });\n/* harmony import */ var _core_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/index.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/parse.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errors.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/classic/errors.js\");\n\n\nconst parse = /* @__PURE__ */ _core_index_js__WEBPACK_IMPORTED_MODULE_0__._parse(_errors_js__WEBPACK_IMPORTED_MODULE_1__.ZodRealError);\nconst parseAsync = /* @__PURE__ */ _core_index_js__WEBPACK_IMPORTED_MODULE_0__._parseAsync(_errors_js__WEBPACK_IMPORTED_MODULE_1__.ZodRealError);\nconst safeParse = /* @__PURE__ */ _core_index_js__WEBPACK_IMPORTED_MODULE_0__._safeParse(_errors_js__WEBPACK_IMPORTED_MODULE_1__.ZodRealError);\nconst safeParseAsync = /* @__PURE__ */ _core_index_js__WEBPACK_IMPORTED_MODULE_0__._safeParseAsync(_errors_js__WEBPACK_IMPORTED_MODULE_1__.ZodRealError);\n// Codec functions\nconst encode = /* @__PURE__ */ _core_index_js__WEBPACK_IMPORTED_MODULE_0__._encode(_errors_js__WEBPACK_IMPORTED_MODULE_1__.ZodRealError);\nconst decode = /* @__PURE__ */ _core_index_js__WEBPACK_IMPORTED_MODULE_0__._decode(_errors_js__WEBPACK_IMPORTED_MODULE_1__.ZodRealError);\nconst encodeAsync = /* @__PURE__ */ _core_index_js__WEBPACK_IMPORTED_MODULE_0__._encodeAsync(_errors_js__WEBPACK_IMPORTED_MODULE_1__.ZodRealError);\nconst decodeAsync = /* @__PURE__ */ _core_index_js__WEBPACK_IMPORTED_MODULE_0__._decodeAsync(_errors_js__WEBPACK_IMPORTED_MODULE_1__.ZodRealError);\nconst safeEncode = /* @__PURE__ */ _core_index_js__WEBPACK_IMPORTED_MODULE_0__._safeEncode(_errors_js__WEBPACK_IMPORTED_MODULE_1__.ZodRealError);\nconst safeDecode = /* @__PURE__ */ _core_index_js__WEBPACK_IMPORTED_MODULE_0__._safeDecode(_errors_js__WEBPACK_IMPORTED_MODULE_1__.ZodRealError);\nconst safeEncodeAsync = /* @__PURE__ */ _core_index_js__WEBPACK_IMPORTED_MODULE_0__._safeEncodeAsync(_errors_js__WEBPACK_IMPORTED_MODULE_1__.ZodRealError);\nconst safeDecodeAsync = /* @__PURE__ */ _core_index_js__WEBPACK_IMPORTED_MODULE_0__._safeDecodeAsync(_errors_js__WEBPACK_IMPORTED_MODULE_1__.ZodRealError);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvbm9kZV9tb2R1bGVzL3pvZC92NC9jbGFzc2ljL3BhcnNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXlDO0FBQ0U7QUFDcEMsOEJBQThCLGtEQUFXLENBQUMsb0RBQVk7QUFDdEQsbUNBQW1DLHVEQUFnQixDQUFDLG9EQUFZO0FBQ2hFLGtDQUFrQyxzREFBZSxDQUFDLG9EQUFZO0FBQzlELHVDQUF1QywyREFBb0IsQ0FBQyxvREFBWTtBQUMvRTtBQUNPLCtCQUErQixtREFBWSxDQUFDLG9EQUFZO0FBQ3hELCtCQUErQixtREFBWSxDQUFDLG9EQUFZO0FBQ3hELG9DQUFvQyx3REFBaUIsQ0FBQyxvREFBWTtBQUNsRSxvQ0FBb0Msd0RBQWlCLENBQUMsb0RBQVk7QUFDbEUsbUNBQW1DLHVEQUFnQixDQUFDLG9EQUFZO0FBQ2hFLG1DQUFtQyx1REFBZ0IsQ0FBQyxvREFBWTtBQUNoRSx3Q0FBd0MsNERBQXFCLENBQUMsb0RBQVk7QUFDMUUsd0NBQXdDLDREQUFxQixDQUFDLG9EQUFZIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFtYWFuXFxPbmVEcml2ZVxcRGVza3RvcFxcS2FuZGlkXzJcXE5ldyBmb2xkZXIgKDIpXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxub2RlX21vZHVsZXNcXHpvZFxcdjRcXGNsYXNzaWNcXHBhcnNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGNvcmUgZnJvbSBcIi4uL2NvcmUvaW5kZXguanNcIjtcbmltcG9ydCB7IFpvZFJlYWxFcnJvciB9IGZyb20gXCIuL2Vycm9ycy5qc1wiO1xuZXhwb3J0IGNvbnN0IHBhcnNlID0gLyogQF9fUFVSRV9fICovIGNvcmUuX3BhcnNlKFpvZFJlYWxFcnJvcik7XG5leHBvcnQgY29uc3QgcGFyc2VBc3luYyA9IC8qIEBfX1BVUkVfXyAqLyBjb3JlLl9wYXJzZUFzeW5jKFpvZFJlYWxFcnJvcik7XG5leHBvcnQgY29uc3Qgc2FmZVBhcnNlID0gLyogQF9fUFVSRV9fICovIGNvcmUuX3NhZmVQYXJzZShab2RSZWFsRXJyb3IpO1xuZXhwb3J0IGNvbnN0IHNhZmVQYXJzZUFzeW5jID0gLyogQF9fUFVSRV9fICovIGNvcmUuX3NhZmVQYXJzZUFzeW5jKFpvZFJlYWxFcnJvcik7XG4vLyBDb2RlYyBmdW5jdGlvbnNcbmV4cG9ydCBjb25zdCBlbmNvZGUgPSAvKiBAX19QVVJFX18gKi8gY29yZS5fZW5jb2RlKFpvZFJlYWxFcnJvcik7XG5leHBvcnQgY29uc3QgZGVjb2RlID0gLyogQF9fUFVSRV9fICovIGNvcmUuX2RlY29kZShab2RSZWFsRXJyb3IpO1xuZXhwb3J0IGNvbnN0IGVuY29kZUFzeW5jID0gLyogQF9fUFVSRV9fICovIGNvcmUuX2VuY29kZUFzeW5jKFpvZFJlYWxFcnJvcik7XG5leHBvcnQgY29uc3QgZGVjb2RlQXN5bmMgPSAvKiBAX19QVVJFX18gKi8gY29yZS5fZGVjb2RlQXN5bmMoWm9kUmVhbEVycm9yKTtcbmV4cG9ydCBjb25zdCBzYWZlRW5jb2RlID0gLyogQF9fUFVSRV9fICovIGNvcmUuX3NhZmVFbmNvZGUoWm9kUmVhbEVycm9yKTtcbmV4cG9ydCBjb25zdCBzYWZlRGVjb2RlID0gLyogQF9fUFVSRV9fICovIGNvcmUuX3NhZmVEZWNvZGUoWm9kUmVhbEVycm9yKTtcbmV4cG9ydCBjb25zdCBzYWZlRW5jb2RlQXN5bmMgPSAvKiBAX19QVVJFX18gKi8gY29yZS5fc2FmZUVuY29kZUFzeW5jKFpvZFJlYWxFcnJvcik7XG5leHBvcnQgY29uc3Qgc2FmZURlY29kZUFzeW5jID0gLyogQF9fUFVSRV9fICovIGNvcmUuX3NhZmVEZWNvZGVBc3luYyhab2RSZWFsRXJyb3IpO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/node_modules/zod/v4/classic/parse.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/node_modules/zod/v4/classic/schemas.js":
/*!*************************************************************************!*\
  !*** ./node_modules/better-auth/node_modules/zod/v4/classic/schemas.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ZodAny: () => (/* binding */ ZodAny),\n/* harmony export */   ZodArray: () => (/* binding */ ZodArray),\n/* harmony export */   ZodBase64: () => (/* binding */ ZodBase64),\n/* harmony export */   ZodBase64URL: () => (/* binding */ ZodBase64URL),\n/* harmony export */   ZodBigInt: () => (/* binding */ ZodBigInt),\n/* harmony export */   ZodBigIntFormat: () => (/* binding */ ZodBigIntFormat),\n/* harmony export */   ZodBoolean: () => (/* binding */ ZodBoolean),\n/* harmony export */   ZodCIDRv4: () => (/* binding */ ZodCIDRv4),\n/* harmony export */   ZodCIDRv6: () => (/* binding */ ZodCIDRv6),\n/* harmony export */   ZodCUID: () => (/* binding */ ZodCUID),\n/* harmony export */   ZodCUID2: () => (/* binding */ ZodCUID2),\n/* harmony export */   ZodCatch: () => (/* binding */ ZodCatch),\n/* harmony export */   ZodCodec: () => (/* binding */ ZodCodec),\n/* harmony export */   ZodCustom: () => (/* binding */ ZodCustom),\n/* harmony export */   ZodCustomStringFormat: () => (/* binding */ ZodCustomStringFormat),\n/* harmony export */   ZodDate: () => (/* binding */ ZodDate),\n/* harmony export */   ZodDefault: () => (/* binding */ ZodDefault),\n/* harmony export */   ZodDiscriminatedUnion: () => (/* binding */ ZodDiscriminatedUnion),\n/* harmony export */   ZodE164: () => (/* binding */ ZodE164),\n/* harmony export */   ZodEmail: () => (/* binding */ ZodEmail),\n/* harmony export */   ZodEmoji: () => (/* binding */ ZodEmoji),\n/* harmony export */   ZodEnum: () => (/* binding */ ZodEnum),\n/* harmony export */   ZodFile: () => (/* binding */ ZodFile),\n/* harmony export */   ZodFunction: () => (/* binding */ ZodFunction),\n/* harmony export */   ZodGUID: () => (/* binding */ ZodGUID),\n/* harmony export */   ZodIPv4: () => (/* binding */ ZodIPv4),\n/* harmony export */   ZodIPv6: () => (/* binding */ ZodIPv6),\n/* harmony export */   ZodIntersection: () => (/* binding */ ZodIntersection),\n/* harmony export */   ZodJWT: () => (/* binding */ ZodJWT),\n/* harmony export */   ZodKSUID: () => (/* binding */ ZodKSUID),\n/* harmony export */   ZodLazy: () => (/* binding */ ZodLazy),\n/* harmony export */   ZodLiteral: () => (/* binding */ ZodLiteral),\n/* harmony export */   ZodMap: () => (/* binding */ ZodMap),\n/* harmony export */   ZodNaN: () => (/* binding */ ZodNaN),\n/* harmony export */   ZodNanoID: () => (/* binding */ ZodNanoID),\n/* harmony export */   ZodNever: () => (/* binding */ ZodNever),\n/* harmony export */   ZodNonOptional: () => (/* binding */ ZodNonOptional),\n/* harmony export */   ZodNull: () => (/* binding */ ZodNull),\n/* harmony export */   ZodNullable: () => (/* binding */ ZodNullable),\n/* harmony export */   ZodNumber: () => (/* binding */ ZodNumber),\n/* harmony export */   ZodNumberFormat: () => (/* binding */ ZodNumberFormat),\n/* harmony export */   ZodObject: () => (/* binding */ ZodObject),\n/* harmony export */   ZodOptional: () => (/* binding */ ZodOptional),\n/* harmony export */   ZodPipe: () => (/* binding */ ZodPipe),\n/* harmony export */   ZodPrefault: () => (/* binding */ ZodPrefault),\n/* harmony export */   ZodPromise: () => (/* binding */ ZodPromise),\n/* harmony export */   ZodReadonly: () => (/* binding */ ZodReadonly),\n/* harmony export */   ZodRecord: () => (/* binding */ ZodRecord),\n/* harmony export */   ZodSet: () => (/* binding */ ZodSet),\n/* harmony export */   ZodString: () => (/* binding */ ZodString),\n/* harmony export */   ZodStringFormat: () => (/* binding */ ZodStringFormat),\n/* harmony export */   ZodSuccess: () => (/* binding */ ZodSuccess),\n/* harmony export */   ZodSymbol: () => (/* binding */ ZodSymbol),\n/* harmony export */   ZodTemplateLiteral: () => (/* binding */ ZodTemplateLiteral),\n/* harmony export */   ZodTransform: () => (/* binding */ ZodTransform),\n/* harmony export */   ZodTuple: () => (/* binding */ ZodTuple),\n/* harmony export */   ZodType: () => (/* binding */ ZodType),\n/* harmony export */   ZodULID: () => (/* binding */ ZodULID),\n/* harmony export */   ZodURL: () => (/* binding */ ZodURL),\n/* harmony export */   ZodUUID: () => (/* binding */ ZodUUID),\n/* harmony export */   ZodUndefined: () => (/* binding */ ZodUndefined),\n/* harmony export */   ZodUnion: () => (/* binding */ ZodUnion),\n/* harmony export */   ZodUnknown: () => (/* binding */ ZodUnknown),\n/* harmony export */   ZodVoid: () => (/* binding */ ZodVoid),\n/* harmony export */   ZodXID: () => (/* binding */ ZodXID),\n/* harmony export */   _ZodString: () => (/* binding */ _ZodString),\n/* harmony export */   _default: () => (/* binding */ _default),\n/* harmony export */   _function: () => (/* binding */ _function),\n/* harmony export */   any: () => (/* binding */ any),\n/* harmony export */   array: () => (/* binding */ array),\n/* harmony export */   base64: () => (/* binding */ base64),\n/* harmony export */   base64url: () => (/* binding */ base64url),\n/* harmony export */   bigint: () => (/* binding */ bigint),\n/* harmony export */   boolean: () => (/* binding */ boolean),\n/* harmony export */   \"catch\": () => (/* binding */ _catch),\n/* harmony export */   check: () => (/* binding */ check),\n/* harmony export */   cidrv4: () => (/* binding */ cidrv4),\n/* harmony export */   cidrv6: () => (/* binding */ cidrv6),\n/* harmony export */   codec: () => (/* binding */ codec),\n/* harmony export */   cuid: () => (/* binding */ cuid),\n/* harmony export */   cuid2: () => (/* binding */ cuid2),\n/* harmony export */   custom: () => (/* binding */ custom),\n/* harmony export */   date: () => (/* binding */ date),\n/* harmony export */   discriminatedUnion: () => (/* binding */ discriminatedUnion),\n/* harmony export */   e164: () => (/* binding */ e164),\n/* harmony export */   email: () => (/* binding */ email),\n/* harmony export */   emoji: () => (/* binding */ emoji),\n/* harmony export */   \"enum\": () => (/* binding */ _enum),\n/* harmony export */   file: () => (/* binding */ file),\n/* harmony export */   float32: () => (/* binding */ float32),\n/* harmony export */   float64: () => (/* binding */ float64),\n/* harmony export */   \"function\": () => (/* binding */ _function),\n/* harmony export */   guid: () => (/* binding */ guid),\n/* harmony export */   hash: () => (/* binding */ hash),\n/* harmony export */   hex: () => (/* binding */ hex),\n/* harmony export */   hostname: () => (/* binding */ hostname),\n/* harmony export */   httpUrl: () => (/* binding */ httpUrl),\n/* harmony export */   \"instanceof\": () => (/* binding */ _instanceof),\n/* harmony export */   int: () => (/* binding */ int),\n/* harmony export */   int32: () => (/* binding */ int32),\n/* harmony export */   int64: () => (/* binding */ int64),\n/* harmony export */   intersection: () => (/* binding */ intersection),\n/* harmony export */   ipv4: () => (/* binding */ ipv4),\n/* harmony export */   ipv6: () => (/* binding */ ipv6),\n/* harmony export */   json: () => (/* binding */ json),\n/* harmony export */   jwt: () => (/* binding */ jwt),\n/* harmony export */   keyof: () => (/* binding */ keyof),\n/* harmony export */   ksuid: () => (/* binding */ ksuid),\n/* harmony export */   lazy: () => (/* binding */ lazy),\n/* harmony export */   literal: () => (/* binding */ literal),\n/* harmony export */   looseObject: () => (/* binding */ looseObject),\n/* harmony export */   map: () => (/* binding */ map),\n/* harmony export */   nan: () => (/* binding */ nan),\n/* harmony export */   nanoid: () => (/* binding */ nanoid),\n/* harmony export */   nativeEnum: () => (/* binding */ nativeEnum),\n/* harmony export */   never: () => (/* binding */ never),\n/* harmony export */   nonoptional: () => (/* binding */ nonoptional),\n/* harmony export */   \"null\": () => (/* binding */ _null),\n/* harmony export */   nullable: () => (/* binding */ nullable),\n/* harmony export */   nullish: () => (/* binding */ nullish),\n/* harmony export */   number: () => (/* binding */ number),\n/* harmony export */   object: () => (/* binding */ object),\n/* harmony export */   optional: () => (/* binding */ optional),\n/* harmony export */   partialRecord: () => (/* binding */ partialRecord),\n/* harmony export */   pipe: () => (/* binding */ pipe),\n/* harmony export */   prefault: () => (/* binding */ prefault),\n/* harmony export */   preprocess: () => (/* binding */ preprocess),\n/* harmony export */   promise: () => (/* binding */ promise),\n/* harmony export */   readonly: () => (/* binding */ readonly),\n/* harmony export */   record: () => (/* binding */ record),\n/* harmony export */   refine: () => (/* binding */ refine),\n/* harmony export */   set: () => (/* binding */ set),\n/* harmony export */   strictObject: () => (/* binding */ strictObject),\n/* harmony export */   string: () => (/* binding */ string),\n/* harmony export */   stringFormat: () => (/* binding */ stringFormat),\n/* harmony export */   stringbool: () => (/* binding */ stringbool),\n/* harmony export */   success: () => (/* binding */ success),\n/* harmony export */   superRefine: () => (/* binding */ superRefine),\n/* harmony export */   symbol: () => (/* binding */ symbol),\n/* harmony export */   templateLiteral: () => (/* binding */ templateLiteral),\n/* harmony export */   transform: () => (/* binding */ transform),\n/* harmony export */   tuple: () => (/* binding */ tuple),\n/* harmony export */   uint32: () => (/* binding */ uint32),\n/* harmony export */   uint64: () => (/* binding */ uint64),\n/* harmony export */   ulid: () => (/* binding */ ulid),\n/* harmony export */   undefined: () => (/* binding */ _undefined),\n/* harmony export */   union: () => (/* binding */ union),\n/* harmony export */   unknown: () => (/* binding */ unknown),\n/* harmony export */   url: () => (/* binding */ url),\n/* harmony export */   uuid: () => (/* binding */ uuid),\n/* harmony export */   uuidv4: () => (/* binding */ uuidv4),\n/* harmony export */   uuidv6: () => (/* binding */ uuidv6),\n/* harmony export */   uuidv7: () => (/* binding */ uuidv7),\n/* harmony export */   \"void\": () => (/* binding */ _void),\n/* harmony export */   xid: () => (/* binding */ xid)\n/* harmony export */ });\n/* harmony import */ var _core_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/index.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/core.js\");\n/* harmony import */ var _core_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/index.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/schemas.js\");\n/* harmony import */ var _core_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/index.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/util.js\");\n/* harmony import */ var _core_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../core/index.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/registries.js\");\n/* harmony import */ var _checks_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./checks.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/api.js\");\n/* harmony import */ var _core_index_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../core/index.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/regexes.js\");\n/* harmony import */ var _core_index_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../core/index.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/checks.js\");\n/* harmony import */ var _iso_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./iso.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/classic/iso.js\");\n/* harmony import */ var _parse_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./parse.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/classic/parse.js\");\n\n\n\n\n\nconst ZodType = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodType\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodType.init(inst, def);\n    inst.def = def;\n    inst.type = def.type;\n    Object.defineProperty(inst, \"_def\", { value: def });\n    // base methods\n    inst.check = (...checks) => {\n        return inst.clone({\n            ...def,\n            checks: [\n                ...(def.checks ?? []),\n                ...checks.map((ch) => typeof ch === \"function\" ? { _zod: { check: ch, def: { check: \"custom\" }, onattach: [] } } : ch),\n            ],\n        }\n        // { parent: true }\n        );\n    };\n    inst.clone = (def, params) => _core_index_js__WEBPACK_IMPORTED_MODULE_2__.clone(inst, def, params);\n    inst.brand = () => inst;\n    inst.register = ((reg, meta) => {\n        reg.add(inst, meta);\n        return inst;\n    });\n    // parsing\n    inst.parse = (data, params) => _parse_js__WEBPACK_IMPORTED_MODULE_3__.parse(inst, data, params, { callee: inst.parse });\n    inst.safeParse = (data, params) => _parse_js__WEBPACK_IMPORTED_MODULE_3__.safeParse(inst, data, params);\n    inst.parseAsync = async (data, params) => _parse_js__WEBPACK_IMPORTED_MODULE_3__.parseAsync(inst, data, params, { callee: inst.parseAsync });\n    inst.safeParseAsync = async (data, params) => _parse_js__WEBPACK_IMPORTED_MODULE_3__.safeParseAsync(inst, data, params);\n    inst.spa = inst.safeParseAsync;\n    // encoding/decoding\n    inst.encode = (data, params) => _parse_js__WEBPACK_IMPORTED_MODULE_3__.encode(inst, data, params);\n    inst.decode = (data, params) => _parse_js__WEBPACK_IMPORTED_MODULE_3__.decode(inst, data, params);\n    inst.encodeAsync = async (data, params) => _parse_js__WEBPACK_IMPORTED_MODULE_3__.encodeAsync(inst, data, params);\n    inst.decodeAsync = async (data, params) => _parse_js__WEBPACK_IMPORTED_MODULE_3__.decodeAsync(inst, data, params);\n    inst.safeEncode = (data, params) => _parse_js__WEBPACK_IMPORTED_MODULE_3__.safeEncode(inst, data, params);\n    inst.safeDecode = (data, params) => _parse_js__WEBPACK_IMPORTED_MODULE_3__.safeDecode(inst, data, params);\n    inst.safeEncodeAsync = async (data, params) => _parse_js__WEBPACK_IMPORTED_MODULE_3__.safeEncodeAsync(inst, data, params);\n    inst.safeDecodeAsync = async (data, params) => _parse_js__WEBPACK_IMPORTED_MODULE_3__.safeDecodeAsync(inst, data, params);\n    // refinements\n    inst.refine = (check, params) => inst.check(refine(check, params));\n    inst.superRefine = (refinement) => inst.check(superRefine(refinement));\n    inst.overwrite = (fn) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._overwrite(fn));\n    // wrappers\n    inst.optional = () => optional(inst);\n    inst.nullable = () => nullable(inst);\n    inst.nullish = () => optional(nullable(inst));\n    inst.nonoptional = (params) => nonoptional(inst, params);\n    inst.array = () => array(inst);\n    inst.or = (arg) => union([inst, arg]);\n    inst.and = (arg) => intersection(inst, arg);\n    inst.transform = (tx) => pipe(inst, transform(tx));\n    inst.default = (def) => _default(inst, def);\n    inst.prefault = (def) => prefault(inst, def);\n    // inst.coalesce = (def, params) => coalesce(inst, def, params);\n    inst.catch = (params) => _catch(inst, params);\n    inst.pipe = (target) => pipe(inst, target);\n    inst.readonly = () => readonly(inst);\n    // meta\n    inst.describe = (description) => {\n        const cl = inst.clone();\n        _core_index_js__WEBPACK_IMPORTED_MODULE_5__.globalRegistry.add(cl, { description });\n        return cl;\n    };\n    Object.defineProperty(inst, \"description\", {\n        get() {\n            return _core_index_js__WEBPACK_IMPORTED_MODULE_5__.globalRegistry.get(inst)?.description;\n        },\n        configurable: true,\n    });\n    inst.meta = (...args) => {\n        if (args.length === 0) {\n            return _core_index_js__WEBPACK_IMPORTED_MODULE_5__.globalRegistry.get(inst);\n        }\n        const cl = inst.clone();\n        _core_index_js__WEBPACK_IMPORTED_MODULE_5__.globalRegistry.add(cl, args[0]);\n        return cl;\n    };\n    // helpers\n    inst.isOptional = () => inst.safeParse(undefined).success;\n    inst.isNullable = () => inst.safeParse(null).success;\n    return inst;\n});\n/** @internal */\nconst _ZodString = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"_ZodString\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodString.init(inst, def);\n    ZodType.init(inst, def);\n    const bag = inst._zod.bag;\n    inst.format = bag.format ?? null;\n    inst.minLength = bag.minimum ?? null;\n    inst.maxLength = bag.maximum ?? null;\n    // validations\n    inst.regex = (...args) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._regex(...args));\n    inst.includes = (...args) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._includes(...args));\n    inst.startsWith = (...args) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._startsWith(...args));\n    inst.endsWith = (...args) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._endsWith(...args));\n    inst.min = (...args) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._minLength(...args));\n    inst.max = (...args) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._maxLength(...args));\n    inst.length = (...args) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._length(...args));\n    inst.nonempty = (...args) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._minLength(1, ...args));\n    inst.lowercase = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._lowercase(params));\n    inst.uppercase = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._uppercase(params));\n    // transforms\n    inst.trim = () => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._trim());\n    inst.normalize = (...args) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._normalize(...args));\n    inst.toLowerCase = () => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._toLowerCase());\n    inst.toUpperCase = () => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._toUpperCase());\n});\nconst ZodString = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodString\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodString.init(inst, def);\n    _ZodString.init(inst, def);\n    inst.email = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._email(ZodEmail, params));\n    inst.url = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._url(ZodURL, params));\n    inst.jwt = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._jwt(ZodJWT, params));\n    inst.emoji = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._emoji(ZodEmoji, params));\n    inst.guid = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._guid(ZodGUID, params));\n    inst.uuid = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._uuid(ZodUUID, params));\n    inst.uuidv4 = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._uuidv4(ZodUUID, params));\n    inst.uuidv6 = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._uuidv6(ZodUUID, params));\n    inst.uuidv7 = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._uuidv7(ZodUUID, params));\n    inst.nanoid = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._nanoid(ZodNanoID, params));\n    inst.guid = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._guid(ZodGUID, params));\n    inst.cuid = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._cuid(ZodCUID, params));\n    inst.cuid2 = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._cuid2(ZodCUID2, params));\n    inst.ulid = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._ulid(ZodULID, params));\n    inst.base64 = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._base64(ZodBase64, params));\n    inst.base64url = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._base64url(ZodBase64URL, params));\n    inst.xid = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._xid(ZodXID, params));\n    inst.ksuid = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._ksuid(ZodKSUID, params));\n    inst.ipv4 = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._ipv4(ZodIPv4, params));\n    inst.ipv6 = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._ipv6(ZodIPv6, params));\n    inst.cidrv4 = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._cidrv4(ZodCIDRv4, params));\n    inst.cidrv6 = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._cidrv6(ZodCIDRv6, params));\n    inst.e164 = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._e164(ZodE164, params));\n    // iso\n    inst.datetime = (params) => inst.check(_iso_js__WEBPACK_IMPORTED_MODULE_6__.datetime(params));\n    inst.date = (params) => inst.check(_iso_js__WEBPACK_IMPORTED_MODULE_6__.date(params));\n    inst.time = (params) => inst.check(_iso_js__WEBPACK_IMPORTED_MODULE_6__.time(params));\n    inst.duration = (params) => inst.check(_iso_js__WEBPACK_IMPORTED_MODULE_6__.duration(params));\n});\nfunction string(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._string(ZodString, params);\n}\nconst ZodStringFormat = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodStringFormat\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodStringFormat.init(inst, def);\n    _ZodString.init(inst, def);\n});\nconst ZodEmail = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodEmail\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodEmail.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nfunction email(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._email(ZodEmail, params);\n}\nconst ZodGUID = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodGUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodGUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nfunction guid(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._guid(ZodGUID, params);\n}\nconst ZodUUID = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodUUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodUUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nfunction uuid(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._uuid(ZodUUID, params);\n}\nfunction uuidv4(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._uuidv4(ZodUUID, params);\n}\n// ZodUUIDv6\nfunction uuidv6(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._uuidv6(ZodUUID, params);\n}\n// ZodUUIDv7\nfunction uuidv7(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._uuidv7(ZodUUID, params);\n}\nconst ZodURL = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodURL\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodURL.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nfunction url(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._url(ZodURL, params);\n}\nfunction httpUrl(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._url(ZodURL, {\n        protocol: /^https?$/,\n        hostname: _core_index_js__WEBPACK_IMPORTED_MODULE_7__.domain,\n        ..._core_index_js__WEBPACK_IMPORTED_MODULE_2__.normalizeParams(params),\n    });\n}\nconst ZodEmoji = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodEmoji\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodEmoji.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nfunction emoji(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._emoji(ZodEmoji, params);\n}\nconst ZodNanoID = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodNanoID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodNanoID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nfunction nanoid(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._nanoid(ZodNanoID, params);\n}\nconst ZodCUID = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodCUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodCUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nfunction cuid(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._cuid(ZodCUID, params);\n}\nconst ZodCUID2 = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodCUID2\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodCUID2.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nfunction cuid2(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._cuid2(ZodCUID2, params);\n}\nconst ZodULID = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodULID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodULID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nfunction ulid(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._ulid(ZodULID, params);\n}\nconst ZodXID = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodXID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodXID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nfunction xid(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._xid(ZodXID, params);\n}\nconst ZodKSUID = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodKSUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodKSUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nfunction ksuid(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._ksuid(ZodKSUID, params);\n}\nconst ZodIPv4 = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodIPv4\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodIPv4.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nfunction ipv4(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._ipv4(ZodIPv4, params);\n}\nconst ZodIPv6 = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodIPv6\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodIPv6.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nfunction ipv6(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._ipv6(ZodIPv6, params);\n}\nconst ZodCIDRv4 = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodCIDRv4\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodCIDRv4.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nfunction cidrv4(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._cidrv4(ZodCIDRv4, params);\n}\nconst ZodCIDRv6 = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodCIDRv6\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodCIDRv6.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nfunction cidrv6(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._cidrv6(ZodCIDRv6, params);\n}\nconst ZodBase64 = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodBase64\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodBase64.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nfunction base64(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._base64(ZodBase64, params);\n}\nconst ZodBase64URL = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodBase64URL\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodBase64URL.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nfunction base64url(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._base64url(ZodBase64URL, params);\n}\nconst ZodE164 = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodE164\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodE164.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nfunction e164(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._e164(ZodE164, params);\n}\nconst ZodJWT = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodJWT\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodJWT.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nfunction jwt(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._jwt(ZodJWT, params);\n}\nconst ZodCustomStringFormat = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodCustomStringFormat\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodCustomStringFormat.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nfunction stringFormat(format, fnOrRegex, _params = {}) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._stringFormat(ZodCustomStringFormat, format, fnOrRegex, _params);\n}\nfunction hostname(_params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._stringFormat(ZodCustomStringFormat, \"hostname\", _core_index_js__WEBPACK_IMPORTED_MODULE_7__.hostname, _params);\n}\nfunction hex(_params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._stringFormat(ZodCustomStringFormat, \"hex\", _core_index_js__WEBPACK_IMPORTED_MODULE_7__.hex, _params);\n}\nfunction hash(alg, params) {\n    const enc = params?.enc ?? \"hex\";\n    const format = `${alg}_${enc}`;\n    const regex = _core_index_js__WEBPACK_IMPORTED_MODULE_7__[format];\n    if (!regex)\n        throw new Error(`Unrecognized hash format: ${format}`);\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._stringFormat(ZodCustomStringFormat, format, regex, params);\n}\nconst ZodNumber = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodNumber\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodNumber.init(inst, def);\n    ZodType.init(inst, def);\n    inst.gt = (value, params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._gt(value, params));\n    inst.gte = (value, params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._gte(value, params));\n    inst.min = (value, params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._gte(value, params));\n    inst.lt = (value, params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._lt(value, params));\n    inst.lte = (value, params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._lte(value, params));\n    inst.max = (value, params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._lte(value, params));\n    inst.int = (params) => inst.check(int(params));\n    inst.safe = (params) => inst.check(int(params));\n    inst.positive = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._gt(0, params));\n    inst.nonnegative = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._gte(0, params));\n    inst.negative = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._lt(0, params));\n    inst.nonpositive = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._lte(0, params));\n    inst.multipleOf = (value, params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._multipleOf(value, params));\n    inst.step = (value, params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._multipleOf(value, params));\n    // inst.finite = (params) => inst.check(core.finite(params));\n    inst.finite = () => inst;\n    const bag = inst._zod.bag;\n    inst.minValue =\n        Math.max(bag.minimum ?? Number.NEGATIVE_INFINITY, bag.exclusiveMinimum ?? Number.NEGATIVE_INFINITY) ?? null;\n    inst.maxValue =\n        Math.min(bag.maximum ?? Number.POSITIVE_INFINITY, bag.exclusiveMaximum ?? Number.POSITIVE_INFINITY) ?? null;\n    inst.isInt = (bag.format ?? \"\").includes(\"int\") || Number.isSafeInteger(bag.multipleOf ?? 0.5);\n    inst.isFinite = true;\n    inst.format = bag.format ?? null;\n});\nfunction number(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._number(ZodNumber, params);\n}\nconst ZodNumberFormat = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodNumberFormat\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodNumberFormat.init(inst, def);\n    ZodNumber.init(inst, def);\n});\nfunction int(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._int(ZodNumberFormat, params);\n}\nfunction float32(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._float32(ZodNumberFormat, params);\n}\nfunction float64(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._float64(ZodNumberFormat, params);\n}\nfunction int32(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._int32(ZodNumberFormat, params);\n}\nfunction uint32(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._uint32(ZodNumberFormat, params);\n}\nconst ZodBoolean = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodBoolean\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodBoolean.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction boolean(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._boolean(ZodBoolean, params);\n}\nconst ZodBigInt = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodBigInt\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodBigInt.init(inst, def);\n    ZodType.init(inst, def);\n    inst.gte = (value, params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._gte(value, params));\n    inst.min = (value, params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._gte(value, params));\n    inst.gt = (value, params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._gt(value, params));\n    inst.gte = (value, params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._gte(value, params));\n    inst.min = (value, params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._gte(value, params));\n    inst.lt = (value, params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._lt(value, params));\n    inst.lte = (value, params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._lte(value, params));\n    inst.max = (value, params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._lte(value, params));\n    inst.positive = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._gt(BigInt(0), params));\n    inst.negative = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._lt(BigInt(0), params));\n    inst.nonpositive = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._lte(BigInt(0), params));\n    inst.nonnegative = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._gte(BigInt(0), params));\n    inst.multipleOf = (value, params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._multipleOf(value, params));\n    const bag = inst._zod.bag;\n    inst.minValue = bag.minimum ?? null;\n    inst.maxValue = bag.maximum ?? null;\n    inst.format = bag.format ?? null;\n});\nfunction bigint(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._bigint(ZodBigInt, params);\n}\nconst ZodBigIntFormat = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodBigIntFormat\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodBigIntFormat.init(inst, def);\n    ZodBigInt.init(inst, def);\n});\n// int64\nfunction int64(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._int64(ZodBigIntFormat, params);\n}\n// uint64\nfunction uint64(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._uint64(ZodBigIntFormat, params);\n}\nconst ZodSymbol = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodSymbol\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodSymbol.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction symbol(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._symbol(ZodSymbol, params);\n}\nconst ZodUndefined = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodUndefined\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodUndefined.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction _undefined(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._undefined(ZodUndefined, params);\n}\n\nconst ZodNull = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodNull\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodNull.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction _null(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._null(ZodNull, params);\n}\n\nconst ZodAny = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodAny\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodAny.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction any() {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._any(ZodAny);\n}\nconst ZodUnknown = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodUnknown\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodUnknown.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction unknown() {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._unknown(ZodUnknown);\n}\nconst ZodNever = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodNever\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodNever.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction never(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._never(ZodNever, params);\n}\nconst ZodVoid = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodVoid\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodVoid.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction _void(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._void(ZodVoid, params);\n}\n\nconst ZodDate = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodDate\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodDate.init(inst, def);\n    ZodType.init(inst, def);\n    inst.min = (value, params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._gte(value, params));\n    inst.max = (value, params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._lte(value, params));\n    const c = inst._zod.bag;\n    inst.minDate = c.minimum ? new Date(c.minimum) : null;\n    inst.maxDate = c.maximum ? new Date(c.maximum) : null;\n});\nfunction date(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._date(ZodDate, params);\n}\nconst ZodArray = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodArray\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodArray.init(inst, def);\n    ZodType.init(inst, def);\n    inst.element = def.element;\n    inst.min = (minLength, params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._minLength(minLength, params));\n    inst.nonempty = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._minLength(1, params));\n    inst.max = (maxLength, params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._maxLength(maxLength, params));\n    inst.length = (len, params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._length(len, params));\n    inst.unwrap = () => inst.element;\n});\nfunction array(element, params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._array(ZodArray, element, params);\n}\n// .keyof\nfunction keyof(schema) {\n    const shape = schema._zod.def.shape;\n    return _enum(Object.keys(shape));\n}\nconst ZodObject = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodObject\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodObjectJIT.init(inst, def);\n    ZodType.init(inst, def);\n    _core_index_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst, \"shape\", () => def.shape);\n    inst.keyof = () => _enum(Object.keys(inst._zod.def.shape));\n    inst.catchall = (catchall) => inst.clone({ ...inst._zod.def, catchall: catchall });\n    inst.passthrough = () => inst.clone({ ...inst._zod.def, catchall: unknown() });\n    inst.loose = () => inst.clone({ ...inst._zod.def, catchall: unknown() });\n    inst.strict = () => inst.clone({ ...inst._zod.def, catchall: never() });\n    inst.strip = () => inst.clone({ ...inst._zod.def, catchall: undefined });\n    inst.extend = (incoming) => {\n        return _core_index_js__WEBPACK_IMPORTED_MODULE_2__.extend(inst, incoming);\n    };\n    inst.safeExtend = (incoming) => {\n        return _core_index_js__WEBPACK_IMPORTED_MODULE_2__.safeExtend(inst, incoming);\n    };\n    inst.merge = (other) => _core_index_js__WEBPACK_IMPORTED_MODULE_2__.merge(inst, other);\n    inst.pick = (mask) => _core_index_js__WEBPACK_IMPORTED_MODULE_2__.pick(inst, mask);\n    inst.omit = (mask) => _core_index_js__WEBPACK_IMPORTED_MODULE_2__.omit(inst, mask);\n    inst.partial = (...args) => _core_index_js__WEBPACK_IMPORTED_MODULE_2__.partial(ZodOptional, inst, args[0]);\n    inst.required = (...args) => _core_index_js__WEBPACK_IMPORTED_MODULE_2__.required(ZodNonOptional, inst, args[0]);\n});\nfunction object(shape, params) {\n    const def = {\n        type: \"object\",\n        get shape() {\n            _core_index_js__WEBPACK_IMPORTED_MODULE_2__.assignProp(this, \"shape\", shape ? _core_index_js__WEBPACK_IMPORTED_MODULE_2__.objectClone(shape) : {});\n            return this.shape;\n        },\n        ..._core_index_js__WEBPACK_IMPORTED_MODULE_2__.normalizeParams(params),\n    };\n    return new ZodObject(def);\n}\n// strictObject\nfunction strictObject(shape, params) {\n    return new ZodObject({\n        type: \"object\",\n        get shape() {\n            _core_index_js__WEBPACK_IMPORTED_MODULE_2__.assignProp(this, \"shape\", _core_index_js__WEBPACK_IMPORTED_MODULE_2__.objectClone(shape));\n            return this.shape;\n        },\n        catchall: never(),\n        ..._core_index_js__WEBPACK_IMPORTED_MODULE_2__.normalizeParams(params),\n    });\n}\n// looseObject\nfunction looseObject(shape, params) {\n    return new ZodObject({\n        type: \"object\",\n        get shape() {\n            _core_index_js__WEBPACK_IMPORTED_MODULE_2__.assignProp(this, \"shape\", _core_index_js__WEBPACK_IMPORTED_MODULE_2__.objectClone(shape));\n            return this.shape;\n        },\n        catchall: unknown(),\n        ..._core_index_js__WEBPACK_IMPORTED_MODULE_2__.normalizeParams(params),\n    });\n}\nconst ZodUnion = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodUnion\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodUnion.init(inst, def);\n    ZodType.init(inst, def);\n    inst.options = def.options;\n});\nfunction union(options, params) {\n    return new ZodUnion({\n        type: \"union\",\n        options: options,\n        ..._core_index_js__WEBPACK_IMPORTED_MODULE_2__.normalizeParams(params),\n    });\n}\nconst ZodDiscriminatedUnion = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodDiscriminatedUnion\", (inst, def) => {\n    ZodUnion.init(inst, def);\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodDiscriminatedUnion.init(inst, def);\n});\nfunction discriminatedUnion(discriminator, options, params) {\n    // const [options, params] = args;\n    return new ZodDiscriminatedUnion({\n        type: \"union\",\n        options,\n        discriminator,\n        ..._core_index_js__WEBPACK_IMPORTED_MODULE_2__.normalizeParams(params),\n    });\n}\nconst ZodIntersection = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodIntersection\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodIntersection.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction intersection(left, right) {\n    return new ZodIntersection({\n        type: \"intersection\",\n        left: left,\n        right: right,\n    });\n}\nconst ZodTuple = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodTuple\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodTuple.init(inst, def);\n    ZodType.init(inst, def);\n    inst.rest = (rest) => inst.clone({\n        ...inst._zod.def,\n        rest: rest,\n    });\n});\nfunction tuple(items, _paramsOrRest, _params) {\n    const hasRest = _paramsOrRest instanceof _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodType;\n    const params = hasRest ? _params : _paramsOrRest;\n    const rest = hasRest ? _paramsOrRest : null;\n    return new ZodTuple({\n        type: \"tuple\",\n        items: items,\n        rest,\n        ..._core_index_js__WEBPACK_IMPORTED_MODULE_2__.normalizeParams(params),\n    });\n}\nconst ZodRecord = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodRecord\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodRecord.init(inst, def);\n    ZodType.init(inst, def);\n    inst.keyType = def.keyType;\n    inst.valueType = def.valueType;\n});\nfunction record(keyType, valueType, params) {\n    return new ZodRecord({\n        type: \"record\",\n        keyType,\n        valueType: valueType,\n        ..._core_index_js__WEBPACK_IMPORTED_MODULE_2__.normalizeParams(params),\n    });\n}\n// type alksjf = core.output<core.$ZodRecordKey>;\nfunction partialRecord(keyType, valueType, params) {\n    const k = _core_index_js__WEBPACK_IMPORTED_MODULE_2__.clone(keyType);\n    k._zod.values = undefined;\n    return new ZodRecord({\n        type: \"record\",\n        keyType: k,\n        valueType: valueType,\n        ..._core_index_js__WEBPACK_IMPORTED_MODULE_2__.normalizeParams(params),\n    });\n}\nconst ZodMap = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodMap\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodMap.init(inst, def);\n    ZodType.init(inst, def);\n    inst.keyType = def.keyType;\n    inst.valueType = def.valueType;\n});\nfunction map(keyType, valueType, params) {\n    return new ZodMap({\n        type: \"map\",\n        keyType: keyType,\n        valueType: valueType,\n        ..._core_index_js__WEBPACK_IMPORTED_MODULE_2__.normalizeParams(params),\n    });\n}\nconst ZodSet = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodSet\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodSet.init(inst, def);\n    ZodType.init(inst, def);\n    inst.min = (...args) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._minSize(...args));\n    inst.nonempty = (params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._minSize(1, params));\n    inst.max = (...args) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._maxSize(...args));\n    inst.size = (...args) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._size(...args));\n});\nfunction set(valueType, params) {\n    return new ZodSet({\n        type: \"set\",\n        valueType: valueType,\n        ..._core_index_js__WEBPACK_IMPORTED_MODULE_2__.normalizeParams(params),\n    });\n}\nconst ZodEnum = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodEnum\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodEnum.init(inst, def);\n    ZodType.init(inst, def);\n    inst.enum = def.entries;\n    inst.options = Object.values(def.entries);\n    const keys = new Set(Object.keys(def.entries));\n    inst.extract = (values, params) => {\n        const newEntries = {};\n        for (const value of values) {\n            if (keys.has(value)) {\n                newEntries[value] = def.entries[value];\n            }\n            else\n                throw new Error(`Key ${value} not found in enum`);\n        }\n        return new ZodEnum({\n            ...def,\n            checks: [],\n            ..._core_index_js__WEBPACK_IMPORTED_MODULE_2__.normalizeParams(params),\n            entries: newEntries,\n        });\n    };\n    inst.exclude = (values, params) => {\n        const newEntries = { ...def.entries };\n        for (const value of values) {\n            if (keys.has(value)) {\n                delete newEntries[value];\n            }\n            else\n                throw new Error(`Key ${value} not found in enum`);\n        }\n        return new ZodEnum({\n            ...def,\n            checks: [],\n            ..._core_index_js__WEBPACK_IMPORTED_MODULE_2__.normalizeParams(params),\n            entries: newEntries,\n        });\n    };\n});\nfunction _enum(values, params) {\n    const entries = Array.isArray(values) ? Object.fromEntries(values.map((v) => [v, v])) : values;\n    return new ZodEnum({\n        type: \"enum\",\n        entries,\n        ..._core_index_js__WEBPACK_IMPORTED_MODULE_2__.normalizeParams(params),\n    });\n}\n\n/** @deprecated This API has been merged into `z.enum()`. Use `z.enum()` instead.\n *\n * ```ts\n * enum Colors { red, green, blue }\n * z.enum(Colors);\n * ```\n */\nfunction nativeEnum(entries, params) {\n    return new ZodEnum({\n        type: \"enum\",\n        entries,\n        ..._core_index_js__WEBPACK_IMPORTED_MODULE_2__.normalizeParams(params),\n    });\n}\nconst ZodLiteral = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodLiteral\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodLiteral.init(inst, def);\n    ZodType.init(inst, def);\n    inst.values = new Set(def.values);\n    Object.defineProperty(inst, \"value\", {\n        get() {\n            if (def.values.length > 1) {\n                throw new Error(\"This schema contains multiple valid literal values. Use `.values` instead.\");\n            }\n            return def.values[0];\n        },\n    });\n});\nfunction literal(value, params) {\n    return new ZodLiteral({\n        type: \"literal\",\n        values: Array.isArray(value) ? value : [value],\n        ..._core_index_js__WEBPACK_IMPORTED_MODULE_2__.normalizeParams(params),\n    });\n}\nconst ZodFile = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodFile\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodFile.init(inst, def);\n    ZodType.init(inst, def);\n    inst.min = (size, params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._minSize(size, params));\n    inst.max = (size, params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._maxSize(size, params));\n    inst.mime = (types, params) => inst.check(_checks_js__WEBPACK_IMPORTED_MODULE_4__._mime(Array.isArray(types) ? types : [types], params));\n});\nfunction file(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._file(ZodFile, params);\n}\nconst ZodTransform = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodTransform\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodTransform.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        if (_ctx.direction === \"backward\") {\n            throw new _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$ZodEncodeError(inst.constructor.name);\n        }\n        payload.addIssue = (issue) => {\n            if (typeof issue === \"string\") {\n                payload.issues.push(_core_index_js__WEBPACK_IMPORTED_MODULE_2__.issue(issue, payload.value, def));\n            }\n            else {\n                // for Zod 3 backwards compatibility\n                const _issue = issue;\n                if (_issue.fatal)\n                    _issue.continue = false;\n                _issue.code ?? (_issue.code = \"custom\");\n                _issue.input ?? (_issue.input = payload.value);\n                _issue.inst ?? (_issue.inst = inst);\n                // _issue.continue ??= true;\n                payload.issues.push(_core_index_js__WEBPACK_IMPORTED_MODULE_2__.issue(_issue));\n            }\n        };\n        const output = def.transform(payload.value, payload);\n        if (output instanceof Promise) {\n            return output.then((output) => {\n                payload.value = output;\n                return payload;\n            });\n        }\n        payload.value = output;\n        return payload;\n    };\n});\nfunction transform(fn) {\n    return new ZodTransform({\n        type: \"transform\",\n        transform: fn,\n    });\n}\nconst ZodOptional = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodOptional\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodOptional.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nfunction optional(innerType) {\n    return new ZodOptional({\n        type: \"optional\",\n        innerType: innerType,\n    });\n}\nconst ZodNullable = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodNullable\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodNullable.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nfunction nullable(innerType) {\n    return new ZodNullable({\n        type: \"nullable\",\n        innerType: innerType,\n    });\n}\n// nullish\nfunction nullish(innerType) {\n    return optional(nullable(innerType));\n}\nconst ZodDefault = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodDefault\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodDefault.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n    inst.removeDefault = inst.unwrap;\n});\nfunction _default(innerType, defaultValue) {\n    return new ZodDefault({\n        type: \"default\",\n        innerType: innerType,\n        get defaultValue() {\n            return typeof defaultValue === \"function\" ? defaultValue() : _core_index_js__WEBPACK_IMPORTED_MODULE_2__.shallowClone(defaultValue);\n        },\n    });\n}\nconst ZodPrefault = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodPrefault\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodPrefault.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nfunction prefault(innerType, defaultValue) {\n    return new ZodPrefault({\n        type: \"prefault\",\n        innerType: innerType,\n        get defaultValue() {\n            return typeof defaultValue === \"function\" ? defaultValue() : _core_index_js__WEBPACK_IMPORTED_MODULE_2__.shallowClone(defaultValue);\n        },\n    });\n}\nconst ZodNonOptional = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodNonOptional\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodNonOptional.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nfunction nonoptional(innerType, params) {\n    return new ZodNonOptional({\n        type: \"nonoptional\",\n        innerType: innerType,\n        ..._core_index_js__WEBPACK_IMPORTED_MODULE_2__.normalizeParams(params),\n    });\n}\nconst ZodSuccess = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodSuccess\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodSuccess.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nfunction success(innerType) {\n    return new ZodSuccess({\n        type: \"success\",\n        innerType: innerType,\n    });\n}\nconst ZodCatch = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodCatch\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodCatch.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n    inst.removeCatch = inst.unwrap;\n});\nfunction _catch(innerType, catchValue) {\n    return new ZodCatch({\n        type: \"catch\",\n        innerType: innerType,\n        catchValue: (typeof catchValue === \"function\" ? catchValue : () => catchValue),\n    });\n}\n\nconst ZodNaN = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodNaN\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodNaN.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction nan(params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._nan(ZodNaN, params);\n}\nconst ZodPipe = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodPipe\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodPipe.init(inst, def);\n    ZodType.init(inst, def);\n    inst.in = def.in;\n    inst.out = def.out;\n});\nfunction pipe(in_, out) {\n    return new ZodPipe({\n        type: \"pipe\",\n        in: in_,\n        out: out,\n        // ...util.normalizeParams(params),\n    });\n}\nconst ZodCodec = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodCodec\", (inst, def) => {\n    ZodPipe.init(inst, def);\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodCodec.init(inst, def);\n});\nfunction codec(in_, out, params) {\n    return new ZodCodec({\n        type: \"pipe\",\n        in: in_,\n        out: out,\n        transform: params.decode,\n        reverseTransform: params.encode,\n    });\n}\nconst ZodReadonly = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodReadonly\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodReadonly.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nfunction readonly(innerType) {\n    return new ZodReadonly({\n        type: \"readonly\",\n        innerType: innerType,\n    });\n}\nconst ZodTemplateLiteral = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodTemplateLiteral\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodTemplateLiteral.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction templateLiteral(parts, params) {\n    return new ZodTemplateLiteral({\n        type: \"template_literal\",\n        parts,\n        ..._core_index_js__WEBPACK_IMPORTED_MODULE_2__.normalizeParams(params),\n    });\n}\nconst ZodLazy = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodLazy\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodLazy.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.getter();\n});\nfunction lazy(getter) {\n    return new ZodLazy({\n        type: \"lazy\",\n        getter: getter,\n    });\n}\nconst ZodPromise = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodPromise\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodPromise.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nfunction promise(innerType) {\n    return new ZodPromise({\n        type: \"promise\",\n        innerType: innerType,\n    });\n}\nconst ZodFunction = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodFunction\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodFunction.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction _function(params) {\n    return new ZodFunction({\n        type: \"function\",\n        input: Array.isArray(params?.input) ? tuple(params?.input) : (params?.input ?? array(unknown())),\n        output: params?.output ?? unknown(),\n    });\n}\n\nconst ZodCustom = /*@__PURE__*/ _core_index_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"ZodCustom\", (inst, def) => {\n    _core_index_js__WEBPACK_IMPORTED_MODULE_1__.$ZodCustom.init(inst, def);\n    ZodType.init(inst, def);\n});\n// custom checks\nfunction check(fn) {\n    const ch = new _core_index_js__WEBPACK_IMPORTED_MODULE_8__.$ZodCheck({\n        check: \"custom\",\n        // ...util.normalizeParams(params),\n    });\n    ch._zod.check = fn;\n    return ch;\n}\nfunction custom(fn, _params) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._custom(ZodCustom, fn ?? (() => true), _params);\n}\nfunction refine(fn, _params = {}) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._refine(ZodCustom, fn, _params);\n}\n// superRefine\nfunction superRefine(fn) {\n    return _checks_js__WEBPACK_IMPORTED_MODULE_4__._superRefine(fn);\n}\nfunction _instanceof(cls, params = {\n    error: `Input not instance of ${cls.name}`,\n}) {\n    const inst = new ZodCustom({\n        type: \"custom\",\n        check: \"custom\",\n        fn: (data) => data instanceof cls,\n        abort: true,\n        ..._core_index_js__WEBPACK_IMPORTED_MODULE_2__.normalizeParams(params),\n    });\n    inst._zod.bag.Class = cls;\n    return inst;\n}\n\n// stringbool\nconst stringbool = (...args) => _checks_js__WEBPACK_IMPORTED_MODULE_4__._stringbool({\n    Codec: ZodCodec,\n    Boolean: ZodBoolean,\n    String: ZodString,\n}, ...args);\nfunction json(params) {\n    const jsonSchema = lazy(() => {\n        return union([string(params), number(), boolean(), _null(), array(jsonSchema), record(string(), jsonSchema)]);\n    });\n    return jsonSchema;\n}\n// preprocess\n// /** @deprecated Use `z.pipe()` and `z.transform()` instead. */\nfunction preprocess(fn, schema) {\n    return pipe(transform(fn), schema);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvbm9kZV9tb2R1bGVzL3pvZC92NC9jbGFzc2ljL3NjaGVtYXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBeUM7QUFDRDtBQUNGO0FBQ047QUFDSTtBQUM3Qiw4QkFBOEIsd0RBQWlCO0FBQ3RELElBQUksb0RBQWE7QUFDakI7QUFDQTtBQUNBLDBDQUEwQyxZQUFZO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1FQUFtRSxRQUFRLGtCQUFrQixpQkFBaUIsbUJBQW1CO0FBQ2pJO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGtDQUFrQyxpREFBVTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLG1DQUFtQyw0Q0FBVyx1QkFBdUIsb0JBQW9CO0FBQ3pGLHVDQUF1QyxnREFBZTtBQUN0RCw4Q0FBOEMsaURBQWdCLHVCQUF1Qix5QkFBeUI7QUFDOUcsa0RBQWtELHFEQUFvQjtBQUN0RTtBQUNBO0FBQ0Esb0NBQW9DLDZDQUFZO0FBQ2hELG9DQUFvQyw2Q0FBWTtBQUNoRCwrQ0FBK0Msa0RBQWlCO0FBQ2hFLCtDQUErQyxrREFBaUI7QUFDaEUsd0NBQXdDLGlEQUFnQjtBQUN4RCx3Q0FBd0MsaURBQWdCO0FBQ3hELG1EQUFtRCxzREFBcUI7QUFDeEUsbURBQW1ELHNEQUFxQjtBQUN4RTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0Msa0RBQWdCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsMERBQW1CLFdBQVcsYUFBYTtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiwwREFBbUI7QUFDdEMsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxtQkFBbUIsMERBQW1CO0FBQ3RDO0FBQ0E7QUFDQSxRQUFRLDBEQUFtQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDTyxpQ0FBaUMsd0RBQWlCO0FBQ3pELElBQUksc0RBQWU7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLDhDQUFZO0FBQ3JELDRDQUE0QyxpREFBZTtBQUMzRCw4Q0FBOEMsbURBQWlCO0FBQy9ELDRDQUE0QyxpREFBZTtBQUMzRCx1Q0FBdUMsa0RBQWdCO0FBQ3ZELHVDQUF1QyxrREFBZ0I7QUFDdkQsMENBQTBDLCtDQUFhO0FBQ3ZELDRDQUE0QyxrREFBZ0I7QUFDNUQsNENBQTRDLGtEQUFnQjtBQUM1RCw0Q0FBNEMsa0RBQWdCO0FBQzVEO0FBQ0EsaUNBQWlDLDZDQUFXO0FBQzVDLDZDQUE2QyxrREFBZ0I7QUFDN0Qsd0NBQXdDLG9EQUFrQjtBQUMxRCx3Q0FBd0Msb0RBQWtCO0FBQzFELENBQUM7QUFDTSxnQ0FBZ0Msd0RBQWlCO0FBQ3hELElBQUksc0RBQWU7QUFDbkI7QUFDQSx3Q0FBd0MsOENBQVc7QUFDbkQsc0NBQXNDLDRDQUFTO0FBQy9DLHNDQUFzQyw0Q0FBUztBQUMvQyx3Q0FBd0MsOENBQVc7QUFDbkQsdUNBQXVDLDZDQUFVO0FBQ2pELHVDQUF1Qyw2Q0FBVTtBQUNqRCx5Q0FBeUMsK0NBQVk7QUFDckQseUNBQXlDLCtDQUFZO0FBQ3JELHlDQUF5QywrQ0FBWTtBQUNyRCx5Q0FBeUMsK0NBQVk7QUFDckQsdUNBQXVDLDZDQUFVO0FBQ2pELHVDQUF1Qyw2Q0FBVTtBQUNqRCx3Q0FBd0MsOENBQVc7QUFDbkQsdUNBQXVDLDZDQUFVO0FBQ2pELHlDQUF5QywrQ0FBWTtBQUNyRCw0Q0FBNEMsa0RBQWU7QUFDM0Qsc0NBQXNDLDRDQUFTO0FBQy9DLHdDQUF3Qyw4Q0FBVztBQUNuRCx1Q0FBdUMsNkNBQVU7QUFDakQsdUNBQXVDLDZDQUFVO0FBQ2pELHlDQUF5QywrQ0FBWTtBQUNyRCx5Q0FBeUMsK0NBQVk7QUFDckQsdUNBQXVDLDZDQUFVO0FBQ2pEO0FBQ0EsMkNBQTJDLDZDQUFZO0FBQ3ZELHVDQUF1Qyx5Q0FBUTtBQUMvQyx1Q0FBdUMseUNBQVE7QUFDL0MsMkNBQTJDLDZDQUFZO0FBQ3ZELENBQUM7QUFDTTtBQUNQLFdBQVcsK0NBQVk7QUFDdkI7QUFDTyxzQ0FBc0Msd0RBQWlCO0FBQzlELElBQUksNERBQXFCO0FBQ3pCO0FBQ0EsQ0FBQztBQUNNLCtCQUErQix3REFBaUI7QUFDdkQ7QUFDQSxJQUFJLHFEQUFjO0FBQ2xCO0FBQ0EsQ0FBQztBQUNNO0FBQ1AsV0FBVyw4Q0FBVztBQUN0QjtBQUNPLDhCQUE4Qix3REFBaUI7QUFDdEQ7QUFDQSxJQUFJLG9EQUFhO0FBQ2pCO0FBQ0EsQ0FBQztBQUNNO0FBQ1AsV0FBVyw2Q0FBVTtBQUNyQjtBQUNPLDhCQUE4Qix3REFBaUI7QUFDdEQ7QUFDQSxJQUFJLG9EQUFhO0FBQ2pCO0FBQ0EsQ0FBQztBQUNNO0FBQ1AsV0FBVyw2Q0FBVTtBQUNyQjtBQUNPO0FBQ1AsV0FBVywrQ0FBWTtBQUN2QjtBQUNBO0FBQ087QUFDUCxXQUFXLCtDQUFZO0FBQ3ZCO0FBQ0E7QUFDTztBQUNQLFdBQVcsK0NBQVk7QUFDdkI7QUFDTyw2QkFBNkIsd0RBQWlCO0FBQ3JEO0FBQ0EsSUFBSSxtREFBWTtBQUNoQjtBQUNBLENBQUM7QUFDTTtBQUNQLFdBQVcsNENBQVM7QUFDcEI7QUFDTztBQUNQLFdBQVcsNENBQVM7QUFDcEI7QUFDQSxrQkFBa0Isa0RBQW1CO0FBQ3JDLFdBQVcsMkRBQW9CO0FBQy9CLEtBQUs7QUFDTDtBQUNPLCtCQUErQix3REFBaUI7QUFDdkQ7QUFDQSxJQUFJLHFEQUFjO0FBQ2xCO0FBQ0EsQ0FBQztBQUNNO0FBQ1AsV0FBVyw4Q0FBVztBQUN0QjtBQUNPLGdDQUFnQyx3REFBaUI7QUFDeEQ7QUFDQSxJQUFJLHNEQUFlO0FBQ25CO0FBQ0EsQ0FBQztBQUNNO0FBQ1AsV0FBVywrQ0FBWTtBQUN2QjtBQUNPLDhCQUE4Qix3REFBaUI7QUFDdEQ7QUFDQSxJQUFJLG9EQUFhO0FBQ2pCO0FBQ0EsQ0FBQztBQUNNO0FBQ1AsV0FBVyw2Q0FBVTtBQUNyQjtBQUNPLCtCQUErQix3REFBaUI7QUFDdkQ7QUFDQSxJQUFJLHFEQUFjO0FBQ2xCO0FBQ0EsQ0FBQztBQUNNO0FBQ1AsV0FBVyw4Q0FBVztBQUN0QjtBQUNPLDhCQUE4Qix3REFBaUI7QUFDdEQ7QUFDQSxJQUFJLG9EQUFhO0FBQ2pCO0FBQ0EsQ0FBQztBQUNNO0FBQ1AsV0FBVyw2Q0FBVTtBQUNyQjtBQUNPLDZCQUE2Qix3REFBaUI7QUFDckQ7QUFDQSxJQUFJLG1EQUFZO0FBQ2hCO0FBQ0EsQ0FBQztBQUNNO0FBQ1AsV0FBVyw0Q0FBUztBQUNwQjtBQUNPLCtCQUErQix3REFBaUI7QUFDdkQ7QUFDQSxJQUFJLHFEQUFjO0FBQ2xCO0FBQ0EsQ0FBQztBQUNNO0FBQ1AsV0FBVyw4Q0FBVztBQUN0QjtBQUNPLDhCQUE4Qix3REFBaUI7QUFDdEQ7QUFDQSxJQUFJLG9EQUFhO0FBQ2pCO0FBQ0EsQ0FBQztBQUNNO0FBQ1AsV0FBVyw2Q0FBVTtBQUNyQjtBQUNPLDhCQUE4Qix3REFBaUI7QUFDdEQ7QUFDQSxJQUFJLG9EQUFhO0FBQ2pCO0FBQ0EsQ0FBQztBQUNNO0FBQ1AsV0FBVyw2Q0FBVTtBQUNyQjtBQUNPLGdDQUFnQyx3REFBaUI7QUFDeEQsSUFBSSxzREFBZTtBQUNuQjtBQUNBLENBQUM7QUFDTTtBQUNQLFdBQVcsK0NBQVk7QUFDdkI7QUFDTyxnQ0FBZ0Msd0RBQWlCO0FBQ3hELElBQUksc0RBQWU7QUFDbkI7QUFDQSxDQUFDO0FBQ007QUFDUCxXQUFXLCtDQUFZO0FBQ3ZCO0FBQ08sZ0NBQWdDLHdEQUFpQjtBQUN4RDtBQUNBLElBQUksc0RBQWU7QUFDbkI7QUFDQSxDQUFDO0FBQ007QUFDUCxXQUFXLCtDQUFZO0FBQ3ZCO0FBQ08sbUNBQW1DLHdEQUFpQjtBQUMzRDtBQUNBLElBQUkseURBQWtCO0FBQ3RCO0FBQ0EsQ0FBQztBQUNNO0FBQ1AsV0FBVyxrREFBZTtBQUMxQjtBQUNPLDhCQUE4Qix3REFBaUI7QUFDdEQ7QUFDQSxJQUFJLG9EQUFhO0FBQ2pCO0FBQ0EsQ0FBQztBQUNNO0FBQ1AsV0FBVyw2Q0FBVTtBQUNyQjtBQUNPLDZCQUE2Qix3REFBaUI7QUFDckQ7QUFDQSxJQUFJLG1EQUFZO0FBQ2hCO0FBQ0EsQ0FBQztBQUNNO0FBQ1AsV0FBVyw0Q0FBUztBQUNwQjtBQUNPLDRDQUE0Qyx3REFBaUI7QUFDcEU7QUFDQSxJQUFJLGtFQUEyQjtBQUMvQjtBQUNBLENBQUM7QUFDTSxxREFBcUQ7QUFDNUQsV0FBVyxxREFBa0I7QUFDN0I7QUFDTztBQUNQLFdBQVcscURBQWtCLG9DQUFvQyxvREFBcUI7QUFDdEY7QUFDTztBQUNQLFdBQVcscURBQWtCLCtCQUErQiwrQ0FBZ0I7QUFDNUU7QUFDTztBQUNQO0FBQ0Esc0JBQXNCLElBQUksR0FBRyxJQUFJO0FBQ2pDLGtCQUFrQiwyQ0FBWTtBQUM5QjtBQUNBLHFEQUFxRCxPQUFPO0FBQzVELFdBQVcscURBQWtCO0FBQzdCO0FBQ08sZ0NBQWdDLHdEQUFpQjtBQUN4RCxJQUFJLHNEQUFlO0FBQ25CO0FBQ0EsNENBQTRDLDJDQUFTO0FBQ3JELDZDQUE2Qyw0Q0FBVTtBQUN2RCw2Q0FBNkMsNENBQVU7QUFDdkQsNENBQTRDLDJDQUFTO0FBQ3JELDZDQUE2Qyw0Q0FBVTtBQUN2RCw2Q0FBNkMsNENBQVU7QUFDdkQ7QUFDQTtBQUNBLDJDQUEyQywyQ0FBUztBQUNwRCw4Q0FBOEMsNENBQVU7QUFDeEQsMkNBQTJDLDJDQUFTO0FBQ3BELDhDQUE4Qyw0Q0FBVTtBQUN4RCxvREFBb0QsbURBQWlCO0FBQ3JFLDhDQUE4QyxtREFBaUI7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ007QUFDUCxXQUFXLCtDQUFZO0FBQ3ZCO0FBQ08sc0NBQXNDLHdEQUFpQjtBQUM5RCxJQUFJLDREQUFxQjtBQUN6QjtBQUNBLENBQUM7QUFDTTtBQUNQLFdBQVcsNENBQVM7QUFDcEI7QUFDTztBQUNQLFdBQVcsZ0RBQWE7QUFDeEI7QUFDTztBQUNQLFdBQVcsZ0RBQWE7QUFDeEI7QUFDTztBQUNQLFdBQVcsOENBQVc7QUFDdEI7QUFDTztBQUNQLFdBQVcsK0NBQVk7QUFDdkI7QUFDTyxpQ0FBaUMsd0RBQWlCO0FBQ3pELElBQUksdURBQWdCO0FBQ3BCO0FBQ0EsQ0FBQztBQUNNO0FBQ1AsV0FBVyxnREFBYTtBQUN4QjtBQUNPLGdDQUFnQyx3REFBaUI7QUFDeEQsSUFBSSxzREFBZTtBQUNuQjtBQUNBLDZDQUE2Qyw0Q0FBVTtBQUN2RCw2Q0FBNkMsNENBQVU7QUFDdkQsNENBQTRDLDJDQUFTO0FBQ3JELDZDQUE2Qyw0Q0FBVTtBQUN2RCw2Q0FBNkMsNENBQVU7QUFDdkQsNENBQTRDLDJDQUFTO0FBQ3JELDZDQUE2Qyw0Q0FBVTtBQUN2RCw2Q0FBNkMsNENBQVU7QUFDdkQsMkNBQTJDLDJDQUFTO0FBQ3BELDJDQUEyQywyQ0FBUztBQUNwRCw4Q0FBOEMsNENBQVU7QUFDeEQsOENBQThDLDRDQUFVO0FBQ3hELG9EQUFvRCxtREFBaUI7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ007QUFDUCxXQUFXLCtDQUFZO0FBQ3ZCO0FBQ08sc0NBQXNDLHdEQUFpQjtBQUM5RCxJQUFJLDREQUFxQjtBQUN6QjtBQUNBLENBQUM7QUFDRDtBQUNPO0FBQ1AsV0FBVyw4Q0FBVztBQUN0QjtBQUNBO0FBQ087QUFDUCxXQUFXLCtDQUFZO0FBQ3ZCO0FBQ08sZ0NBQWdDLHdEQUFpQjtBQUN4RCxJQUFJLHNEQUFlO0FBQ25CO0FBQ0EsQ0FBQztBQUNNO0FBQ1AsV0FBVywrQ0FBWTtBQUN2QjtBQUNPLG1DQUFtQyx3REFBaUI7QUFDM0QsSUFBSSx5REFBa0I7QUFDdEI7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxXQUFXLGtEQUFlO0FBQzFCO0FBQ21DO0FBQzVCLDhCQUE4Qix3REFBaUI7QUFDdEQsSUFBSSxvREFBYTtBQUNqQjtBQUNBLENBQUM7QUFDRDtBQUNBLFdBQVcsNkNBQVU7QUFDckI7QUFDeUI7QUFDbEIsNkJBQTZCLHdEQUFpQjtBQUNyRCxJQUFJLG1EQUFZO0FBQ2hCO0FBQ0EsQ0FBQztBQUNNO0FBQ1AsV0FBVyw0Q0FBUztBQUNwQjtBQUNPLGlDQUFpQyx3REFBaUI7QUFDekQsSUFBSSx1REFBZ0I7QUFDcEI7QUFDQSxDQUFDO0FBQ007QUFDUCxXQUFXLGdEQUFhO0FBQ3hCO0FBQ08sK0JBQStCLHdEQUFpQjtBQUN2RCxJQUFJLHFEQUFjO0FBQ2xCO0FBQ0EsQ0FBQztBQUNNO0FBQ1AsV0FBVyw4Q0FBVztBQUN0QjtBQUNPLDhCQUE4Qix3REFBaUI7QUFDdEQsSUFBSSxvREFBYTtBQUNqQjtBQUNBLENBQUM7QUFDRDtBQUNBLFdBQVcsNkNBQVU7QUFDckI7QUFDeUI7QUFDbEIsOEJBQThCLHdEQUFpQjtBQUN0RCxJQUFJLG9EQUFhO0FBQ2pCO0FBQ0EsNkNBQTZDLDRDQUFVO0FBQ3ZELDZDQUE2Qyw0Q0FBVTtBQUN2RDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ007QUFDUCxXQUFXLDZDQUFVO0FBQ3JCO0FBQ08sK0JBQStCLHdEQUFpQjtBQUN2RCxJQUFJLHFEQUFjO0FBQ2xCO0FBQ0E7QUFDQSxpREFBaUQsa0RBQWdCO0FBQ2pFLDJDQUEyQyxrREFBZ0I7QUFDM0QsaURBQWlELGtEQUFnQjtBQUNqRSw4Q0FBOEMsK0NBQWE7QUFDM0Q7QUFDQSxDQUFDO0FBQ007QUFDUCxXQUFXLDhDQUFXO0FBQ3RCO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNPLGdDQUFnQyx3REFBaUI7QUFDeEQsSUFBSSx5REFBa0I7QUFDdEI7QUFDQSxJQUFJLHNEQUFlO0FBQ25CO0FBQ0EsK0NBQStDLHNDQUFzQztBQUNyRiwwQ0FBMEMsdUNBQXVDO0FBQ2pGLG9DQUFvQyx1Q0FBdUM7QUFDM0UscUNBQXFDLHFDQUFxQztBQUMxRSxvQ0FBb0MsdUNBQXVDO0FBQzNFO0FBQ0EsZUFBZSxrREFBVztBQUMxQjtBQUNBO0FBQ0EsZUFBZSxzREFBZTtBQUM5QjtBQUNBLDRCQUE0QixpREFBVTtBQUN0QywwQkFBMEIsZ0RBQVM7QUFDbkMsMEJBQTBCLGdEQUFTO0FBQ25DLGdDQUFnQyxtREFBWTtBQUM1QyxpQ0FBaUMsb0RBQWE7QUFDOUMsQ0FBQztBQUNNO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsWUFBWSxzREFBZSx3QkFBd0IsdURBQWdCLFlBQVk7QUFDL0U7QUFDQSxTQUFTO0FBQ1QsV0FBVywyREFBb0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFlBQVksc0RBQWUsZ0JBQWdCLHVEQUFnQjtBQUMzRDtBQUNBLFNBQVM7QUFDVDtBQUNBLFdBQVcsMkRBQW9CO0FBQy9CLEtBQUs7QUFDTDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxZQUFZLHNEQUFlLGdCQUFnQix1REFBZ0I7QUFDM0Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxXQUFXLDJEQUFvQjtBQUMvQixLQUFLO0FBQ0w7QUFDTywrQkFBK0Isd0RBQWlCO0FBQ3ZELElBQUkscURBQWM7QUFDbEI7QUFDQTtBQUNBLENBQUM7QUFDTTtBQUNQO0FBQ0E7QUFDQTtBQUNBLFdBQVcsMkRBQW9CO0FBQy9CLEtBQUs7QUFDTDtBQUNPLDRDQUE0Qyx3REFBaUI7QUFDcEU7QUFDQSxJQUFJLGtFQUEyQjtBQUMvQixDQUFDO0FBQ007QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVywyREFBb0I7QUFDL0IsS0FBSztBQUNMO0FBQ08sc0NBQXNDLHdEQUFpQjtBQUM5RCxJQUFJLDREQUFxQjtBQUN6QjtBQUNBLENBQUM7QUFDTTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ08sK0JBQStCLHdEQUFpQjtBQUN2RCxJQUFJLHFEQUFjO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLENBQUM7QUFDTTtBQUNQLDZDQUE2QyxvREFBYTtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLDJEQUFvQjtBQUMvQixLQUFLO0FBQ0w7QUFDTyxnQ0FBZ0Msd0RBQWlCO0FBQ3hELElBQUksc0RBQWU7QUFDbkI7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNNO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLDJEQUFvQjtBQUMvQixLQUFLO0FBQ0w7QUFDQTtBQUNPO0FBQ1AsY0FBYyxpREFBVTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVywyREFBb0I7QUFDL0IsS0FBSztBQUNMO0FBQ08sNkJBQTZCLHdEQUFpQjtBQUNyRCxJQUFJLG1EQUFZO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDTTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVywyREFBb0I7QUFDL0IsS0FBSztBQUNMO0FBQ08sNkJBQTZCLHdEQUFpQjtBQUNyRCxJQUFJLG1EQUFZO0FBQ2hCO0FBQ0EsdUNBQXVDLGdEQUFhO0FBQ3BELDJDQUEyQyxnREFBYTtBQUN4RCx1Q0FBdUMsZ0RBQWE7QUFDcEQsd0NBQXdDLDZDQUFVO0FBQ2xELENBQUM7QUFDTTtBQUNQO0FBQ0E7QUFDQTtBQUNBLFdBQVcsMkRBQW9CO0FBQy9CLEtBQUs7QUFDTDtBQUNPLDhCQUE4Qix3REFBaUI7QUFDdEQsSUFBSSxvREFBYTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLE9BQU87QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDJEQUFvQjtBQUNuQztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsT0FBTztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMkRBQW9CO0FBQ25DO0FBQ0EsU0FBUztBQUNUO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLDJEQUFvQjtBQUMvQixLQUFLO0FBQ0w7QUFDeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsV0FBVywyREFBb0I7QUFDL0IsS0FBSztBQUNMO0FBQ08saUNBQWlDLHdEQUFpQjtBQUN6RCxJQUFJLHVEQUFnQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTCxDQUFDO0FBQ007QUFDUDtBQUNBO0FBQ0E7QUFDQSxXQUFXLDJEQUFvQjtBQUMvQixLQUFLO0FBQ0w7QUFDTyw4QkFBOEIsd0RBQWlCO0FBQ3RELElBQUksb0RBQWE7QUFDakI7QUFDQSw0Q0FBNEMsZ0RBQWE7QUFDekQsNENBQTRDLGdEQUFhO0FBQ3pELDhDQUE4Qyw2Q0FBVTtBQUN4RCxDQUFDO0FBQ007QUFDUCxXQUFXLDZDQUFVO0FBQ3JCO0FBQ08sbUNBQW1DLHdEQUFpQjtBQUMzRCxJQUFJLHlEQUFrQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsMkRBQW9CO0FBQzFDO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxpREFBVTtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxpREFBVTtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDTTtBQUNQO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNPLGtDQUFrQyx3REFBaUI7QUFDMUQsSUFBSSx3REFBaUI7QUFDckI7QUFDQTtBQUNBLENBQUM7QUFDTTtBQUNQO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNPLGtDQUFrQyx3REFBaUI7QUFDMUQsSUFBSSx3REFBaUI7QUFDckI7QUFDQTtBQUNBLENBQUM7QUFDTTtBQUNQO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ08saUNBQWlDLHdEQUFpQjtBQUN6RCxJQUFJLHVEQUFnQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ007QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlFQUF5RSx3REFBaUI7QUFDMUYsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNPLGtDQUFrQyx3REFBaUI7QUFDMUQsSUFBSSx3REFBaUI7QUFDckI7QUFDQTtBQUNBLENBQUM7QUFDTTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUVBQXlFLHdEQUFpQjtBQUMxRixTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ08scUNBQXFDLHdEQUFpQjtBQUM3RCxJQUFJLDJEQUFvQjtBQUN4QjtBQUNBO0FBQ0EsQ0FBQztBQUNNO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsV0FBVywyREFBb0I7QUFDL0IsS0FBSztBQUNMO0FBQ08saUNBQWlDLHdEQUFpQjtBQUN6RCxJQUFJLHVEQUFnQjtBQUNwQjtBQUNBO0FBQ0EsQ0FBQztBQUNNO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ08sK0JBQStCLHdEQUFpQjtBQUN2RCxJQUFJLHFEQUFjO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzJCO0FBQ3BCLDZCQUE2Qix3REFBaUI7QUFDckQsSUFBSSxtREFBWTtBQUNoQjtBQUNBLENBQUM7QUFDTTtBQUNQLFdBQVcsNENBQVM7QUFDcEI7QUFDTyw4QkFBOEIsd0RBQWlCO0FBQ3RELElBQUksb0RBQWE7QUFDakI7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNNO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNPLCtCQUErQix3REFBaUI7QUFDdkQ7QUFDQSxJQUFJLHFEQUFjO0FBQ2xCLENBQUM7QUFDTTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNPLGtDQUFrQyx3REFBaUI7QUFDMUQsSUFBSSx3REFBaUI7QUFDckI7QUFDQTtBQUNBLENBQUM7QUFDTTtBQUNQO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNPLHlDQUF5Qyx3REFBaUI7QUFDakUsSUFBSSwrREFBd0I7QUFDNUI7QUFDQSxDQUFDO0FBQ007QUFDUDtBQUNBO0FBQ0E7QUFDQSxXQUFXLDJEQUFvQjtBQUMvQixLQUFLO0FBQ0w7QUFDTyw4QkFBOEIsd0RBQWlCO0FBQ3RELElBQUksb0RBQWE7QUFDakI7QUFDQTtBQUNBLENBQUM7QUFDTTtBQUNQO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNPLGlDQUFpQyx3REFBaUI7QUFDekQsSUFBSSx1REFBZ0I7QUFDcEI7QUFDQTtBQUNBLENBQUM7QUFDTTtBQUNQO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNPLGtDQUFrQyx3REFBaUI7QUFDMUQsSUFBSSx3REFBaUI7QUFDckI7QUFDQSxDQUFDO0FBQ007QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNpQztBQUMxQixnQ0FBZ0Msd0RBQWlCO0FBQ3hELElBQUksc0RBQWU7QUFDbkI7QUFDQSxDQUFDO0FBQ0Q7QUFDTztBQUNQLG1CQUFtQixxREFBYztBQUNqQztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsV0FBVywrQ0FBWTtBQUN2QjtBQUNPLGdDQUFnQztBQUN2QyxXQUFXLCtDQUFZO0FBQ3ZCO0FBQ0E7QUFDTztBQUNQLFdBQVcsb0RBQWlCO0FBQzVCO0FBQ0E7QUFDQSxvQ0FBb0MsU0FBUztBQUM3QyxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsMkRBQW9CO0FBQy9CLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDcUM7QUFDckM7QUFDTyxnQ0FBZ0MsbURBQWdCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDTTtBQUNQO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYW1hYW5cXE9uZURyaXZlXFxEZXNrdG9wXFxLYW5kaWRfMlxcTmV3IGZvbGRlciAoMilcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXG5vZGVfbW9kdWxlc1xcem9kXFx2NFxcY2xhc3NpY1xcc2NoZW1hcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBjb3JlIGZyb20gXCIuLi9jb3JlL2luZGV4LmpzXCI7XG5pbXBvcnQgeyB1dGlsIH0gZnJvbSBcIi4uL2NvcmUvaW5kZXguanNcIjtcbmltcG9ydCAqIGFzIGNoZWNrcyBmcm9tIFwiLi9jaGVja3MuanNcIjtcbmltcG9ydCAqIGFzIGlzbyBmcm9tIFwiLi9pc28uanNcIjtcbmltcG9ydCAqIGFzIHBhcnNlIGZyb20gXCIuL3BhcnNlLmpzXCI7XG5leHBvcnQgY29uc3QgWm9kVHlwZSA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RUeXBlXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0LmRlZiA9IGRlZjtcbiAgICBpbnN0LnR5cGUgPSBkZWYudHlwZTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoaW5zdCwgXCJfZGVmXCIsIHsgdmFsdWU6IGRlZiB9KTtcbiAgICAvLyBiYXNlIG1ldGhvZHNcbiAgICBpbnN0LmNoZWNrID0gKC4uLmNoZWNrcykgPT4ge1xuICAgICAgICByZXR1cm4gaW5zdC5jbG9uZSh7XG4gICAgICAgICAgICAuLi5kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFtcbiAgICAgICAgICAgICAgICAuLi4oZGVmLmNoZWNrcyA/PyBbXSksXG4gICAgICAgICAgICAgICAgLi4uY2hlY2tzLm1hcCgoY2gpID0+IHR5cGVvZiBjaCA9PT0gXCJmdW5jdGlvblwiID8geyBfem9kOiB7IGNoZWNrOiBjaCwgZGVmOiB7IGNoZWNrOiBcImN1c3RvbVwiIH0sIG9uYXR0YWNoOiBbXSB9IH0gOiBjaCksXG4gICAgICAgICAgICBdLFxuICAgICAgICB9XG4gICAgICAgIC8vIHsgcGFyZW50OiB0cnVlIH1cbiAgICAgICAgKTtcbiAgICB9O1xuICAgIGluc3QuY2xvbmUgPSAoZGVmLCBwYXJhbXMpID0+IGNvcmUuY2xvbmUoaW5zdCwgZGVmLCBwYXJhbXMpO1xuICAgIGluc3QuYnJhbmQgPSAoKSA9PiBpbnN0O1xuICAgIGluc3QucmVnaXN0ZXIgPSAoKHJlZywgbWV0YSkgPT4ge1xuICAgICAgICByZWcuYWRkKGluc3QsIG1ldGEpO1xuICAgICAgICByZXR1cm4gaW5zdDtcbiAgICB9KTtcbiAgICAvLyBwYXJzaW5nXG4gICAgaW5zdC5wYXJzZSA9IChkYXRhLCBwYXJhbXMpID0+IHBhcnNlLnBhcnNlKGluc3QsIGRhdGEsIHBhcmFtcywgeyBjYWxsZWU6IGluc3QucGFyc2UgfSk7XG4gICAgaW5zdC5zYWZlUGFyc2UgPSAoZGF0YSwgcGFyYW1zKSA9PiBwYXJzZS5zYWZlUGFyc2UoaW5zdCwgZGF0YSwgcGFyYW1zKTtcbiAgICBpbnN0LnBhcnNlQXN5bmMgPSBhc3luYyAoZGF0YSwgcGFyYW1zKSA9PiBwYXJzZS5wYXJzZUFzeW5jKGluc3QsIGRhdGEsIHBhcmFtcywgeyBjYWxsZWU6IGluc3QucGFyc2VBc3luYyB9KTtcbiAgICBpbnN0LnNhZmVQYXJzZUFzeW5jID0gYXN5bmMgKGRhdGEsIHBhcmFtcykgPT4gcGFyc2Uuc2FmZVBhcnNlQXN5bmMoaW5zdCwgZGF0YSwgcGFyYW1zKTtcbiAgICBpbnN0LnNwYSA9IGluc3Quc2FmZVBhcnNlQXN5bmM7XG4gICAgLy8gZW5jb2RpbmcvZGVjb2RpbmdcbiAgICBpbnN0LmVuY29kZSA9IChkYXRhLCBwYXJhbXMpID0+IHBhcnNlLmVuY29kZShpbnN0LCBkYXRhLCBwYXJhbXMpO1xuICAgIGluc3QuZGVjb2RlID0gKGRhdGEsIHBhcmFtcykgPT4gcGFyc2UuZGVjb2RlKGluc3QsIGRhdGEsIHBhcmFtcyk7XG4gICAgaW5zdC5lbmNvZGVBc3luYyA9IGFzeW5jIChkYXRhLCBwYXJhbXMpID0+IHBhcnNlLmVuY29kZUFzeW5jKGluc3QsIGRhdGEsIHBhcmFtcyk7XG4gICAgaW5zdC5kZWNvZGVBc3luYyA9IGFzeW5jIChkYXRhLCBwYXJhbXMpID0+IHBhcnNlLmRlY29kZUFzeW5jKGluc3QsIGRhdGEsIHBhcmFtcyk7XG4gICAgaW5zdC5zYWZlRW5jb2RlID0gKGRhdGEsIHBhcmFtcykgPT4gcGFyc2Uuc2FmZUVuY29kZShpbnN0LCBkYXRhLCBwYXJhbXMpO1xuICAgIGluc3Quc2FmZURlY29kZSA9IChkYXRhLCBwYXJhbXMpID0+IHBhcnNlLnNhZmVEZWNvZGUoaW5zdCwgZGF0YSwgcGFyYW1zKTtcbiAgICBpbnN0LnNhZmVFbmNvZGVBc3luYyA9IGFzeW5jIChkYXRhLCBwYXJhbXMpID0+IHBhcnNlLnNhZmVFbmNvZGVBc3luYyhpbnN0LCBkYXRhLCBwYXJhbXMpO1xuICAgIGluc3Quc2FmZURlY29kZUFzeW5jID0gYXN5bmMgKGRhdGEsIHBhcmFtcykgPT4gcGFyc2Uuc2FmZURlY29kZUFzeW5jKGluc3QsIGRhdGEsIHBhcmFtcyk7XG4gICAgLy8gcmVmaW5lbWVudHNcbiAgICBpbnN0LnJlZmluZSA9IChjaGVjaywgcGFyYW1zKSA9PiBpbnN0LmNoZWNrKHJlZmluZShjaGVjaywgcGFyYW1zKSk7XG4gICAgaW5zdC5zdXBlclJlZmluZSA9IChyZWZpbmVtZW50KSA9PiBpbnN0LmNoZWNrKHN1cGVyUmVmaW5lKHJlZmluZW1lbnQpKTtcbiAgICBpbnN0Lm92ZXJ3cml0ZSA9IChmbikgPT4gaW5zdC5jaGVjayhjaGVja3Mub3ZlcndyaXRlKGZuKSk7XG4gICAgLy8gd3JhcHBlcnNcbiAgICBpbnN0Lm9wdGlvbmFsID0gKCkgPT4gb3B0aW9uYWwoaW5zdCk7XG4gICAgaW5zdC5udWxsYWJsZSA9ICgpID0+IG51bGxhYmxlKGluc3QpO1xuICAgIGluc3QubnVsbGlzaCA9ICgpID0+IG9wdGlvbmFsKG51bGxhYmxlKGluc3QpKTtcbiAgICBpbnN0Lm5vbm9wdGlvbmFsID0gKHBhcmFtcykgPT4gbm9ub3B0aW9uYWwoaW5zdCwgcGFyYW1zKTtcbiAgICBpbnN0LmFycmF5ID0gKCkgPT4gYXJyYXkoaW5zdCk7XG4gICAgaW5zdC5vciA9IChhcmcpID0+IHVuaW9uKFtpbnN0LCBhcmddKTtcbiAgICBpbnN0LmFuZCA9IChhcmcpID0+IGludGVyc2VjdGlvbihpbnN0LCBhcmcpO1xuICAgIGluc3QudHJhbnNmb3JtID0gKHR4KSA9PiBwaXBlKGluc3QsIHRyYW5zZm9ybSh0eCkpO1xuICAgIGluc3QuZGVmYXVsdCA9IChkZWYpID0+IF9kZWZhdWx0KGluc3QsIGRlZik7XG4gICAgaW5zdC5wcmVmYXVsdCA9IChkZWYpID0+IHByZWZhdWx0KGluc3QsIGRlZik7XG4gICAgLy8gaW5zdC5jb2FsZXNjZSA9IChkZWYsIHBhcmFtcykgPT4gY29hbGVzY2UoaW5zdCwgZGVmLCBwYXJhbXMpO1xuICAgIGluc3QuY2F0Y2ggPSAocGFyYW1zKSA9PiBfY2F0Y2goaW5zdCwgcGFyYW1zKTtcbiAgICBpbnN0LnBpcGUgPSAodGFyZ2V0KSA9PiBwaXBlKGluc3QsIHRhcmdldCk7XG4gICAgaW5zdC5yZWFkb25seSA9ICgpID0+IHJlYWRvbmx5KGluc3QpO1xuICAgIC8vIG1ldGFcbiAgICBpbnN0LmRlc2NyaWJlID0gKGRlc2NyaXB0aW9uKSA9PiB7XG4gICAgICAgIGNvbnN0IGNsID0gaW5zdC5jbG9uZSgpO1xuICAgICAgICBjb3JlLmdsb2JhbFJlZ2lzdHJ5LmFkZChjbCwgeyBkZXNjcmlwdGlvbiB9KTtcbiAgICAgICAgcmV0dXJuIGNsO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGluc3QsIFwiZGVzY3JpcHRpb25cIiwge1xuICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gY29yZS5nbG9iYWxSZWdpc3RyeS5nZXQoaW5zdCk/LmRlc2NyaXB0aW9uO1xuICAgICAgICB9LFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgfSk7XG4gICAgaW5zdC5tZXRhID0gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gY29yZS5nbG9iYWxSZWdpc3RyeS5nZXQoaW5zdCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2wgPSBpbnN0LmNsb25lKCk7XG4gICAgICAgIGNvcmUuZ2xvYmFsUmVnaXN0cnkuYWRkKGNsLCBhcmdzWzBdKTtcbiAgICAgICAgcmV0dXJuIGNsO1xuICAgIH07XG4gICAgLy8gaGVscGVyc1xuICAgIGluc3QuaXNPcHRpb25hbCA9ICgpID0+IGluc3Quc2FmZVBhcnNlKHVuZGVmaW5lZCkuc3VjY2VzcztcbiAgICBpbnN0LmlzTnVsbGFibGUgPSAoKSA9PiBpbnN0LnNhZmVQYXJzZShudWxsKS5zdWNjZXNzO1xuICAgIHJldHVybiBpbnN0O1xufSk7XG4vKiogQGludGVybmFsICovXG5leHBvcnQgY29uc3QgX1pvZFN0cmluZyA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJfWm9kU3RyaW5nXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2RTdHJpbmcuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGNvbnN0IGJhZyA9IGluc3QuX3pvZC5iYWc7XG4gICAgaW5zdC5mb3JtYXQgPSBiYWcuZm9ybWF0ID8/IG51bGw7XG4gICAgaW5zdC5taW5MZW5ndGggPSBiYWcubWluaW11bSA/PyBudWxsO1xuICAgIGluc3QubWF4TGVuZ3RoID0gYmFnLm1heGltdW0gPz8gbnVsbDtcbiAgICAvLyB2YWxpZGF0aW9uc1xuICAgIGluc3QucmVnZXggPSAoLi4uYXJncykgPT4gaW5zdC5jaGVjayhjaGVja3MucmVnZXgoLi4uYXJncykpO1xuICAgIGluc3QuaW5jbHVkZXMgPSAoLi4uYXJncykgPT4gaW5zdC5jaGVjayhjaGVja3MuaW5jbHVkZXMoLi4uYXJncykpO1xuICAgIGluc3Quc3RhcnRzV2l0aCA9ICguLi5hcmdzKSA9PiBpbnN0LmNoZWNrKGNoZWNrcy5zdGFydHNXaXRoKC4uLmFyZ3MpKTtcbiAgICBpbnN0LmVuZHNXaXRoID0gKC4uLmFyZ3MpID0+IGluc3QuY2hlY2soY2hlY2tzLmVuZHNXaXRoKC4uLmFyZ3MpKTtcbiAgICBpbnN0Lm1pbiA9ICguLi5hcmdzKSA9PiBpbnN0LmNoZWNrKGNoZWNrcy5taW5MZW5ndGgoLi4uYXJncykpO1xuICAgIGluc3QubWF4ID0gKC4uLmFyZ3MpID0+IGluc3QuY2hlY2soY2hlY2tzLm1heExlbmd0aCguLi5hcmdzKSk7XG4gICAgaW5zdC5sZW5ndGggPSAoLi4uYXJncykgPT4gaW5zdC5jaGVjayhjaGVja3MubGVuZ3RoKC4uLmFyZ3MpKTtcbiAgICBpbnN0Lm5vbmVtcHR5ID0gKC4uLmFyZ3MpID0+IGluc3QuY2hlY2soY2hlY2tzLm1pbkxlbmd0aCgxLCAuLi5hcmdzKSk7XG4gICAgaW5zdC5sb3dlcmNhc2UgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNoZWNrcy5sb3dlcmNhc2UocGFyYW1zKSk7XG4gICAgaW5zdC51cHBlcmNhc2UgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNoZWNrcy51cHBlcmNhc2UocGFyYW1zKSk7XG4gICAgLy8gdHJhbnNmb3Jtc1xuICAgIGluc3QudHJpbSA9ICgpID0+IGluc3QuY2hlY2soY2hlY2tzLnRyaW0oKSk7XG4gICAgaW5zdC5ub3JtYWxpemUgPSAoLi4uYXJncykgPT4gaW5zdC5jaGVjayhjaGVja3Mubm9ybWFsaXplKC4uLmFyZ3MpKTtcbiAgICBpbnN0LnRvTG93ZXJDYXNlID0gKCkgPT4gaW5zdC5jaGVjayhjaGVja3MudG9Mb3dlckNhc2UoKSk7XG4gICAgaW5zdC50b1VwcGVyQ2FzZSA9ICgpID0+IGluc3QuY2hlY2soY2hlY2tzLnRvVXBwZXJDYXNlKCkpO1xufSk7XG5leHBvcnQgY29uc3QgWm9kU3RyaW5nID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZFN0cmluZ1wiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY29yZS4kWm9kU3RyaW5nLmluaXQoaW5zdCwgZGVmKTtcbiAgICBfWm9kU3RyaW5nLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0LmVtYWlsID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhjb3JlLl9lbWFpbChab2RFbWFpbCwgcGFyYW1zKSk7XG4gICAgaW5zdC51cmwgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNvcmUuX3VybChab2RVUkwsIHBhcmFtcykpO1xuICAgIGluc3Quand0ID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhjb3JlLl9qd3QoWm9kSldULCBwYXJhbXMpKTtcbiAgICBpbnN0LmVtb2ppID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhjb3JlLl9lbW9qaShab2RFbW9qaSwgcGFyYW1zKSk7XG4gICAgaW5zdC5ndWlkID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhjb3JlLl9ndWlkKFpvZEdVSUQsIHBhcmFtcykpO1xuICAgIGluc3QudXVpZCA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soY29yZS5fdXVpZChab2RVVUlELCBwYXJhbXMpKTtcbiAgICBpbnN0LnV1aWR2NCA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soY29yZS5fdXVpZHY0KFpvZFVVSUQsIHBhcmFtcykpO1xuICAgIGluc3QudXVpZHY2ID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhjb3JlLl91dWlkdjYoWm9kVVVJRCwgcGFyYW1zKSk7XG4gICAgaW5zdC51dWlkdjcgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNvcmUuX3V1aWR2Nyhab2RVVUlELCBwYXJhbXMpKTtcbiAgICBpbnN0Lm5hbm9pZCA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soY29yZS5fbmFub2lkKFpvZE5hbm9JRCwgcGFyYW1zKSk7XG4gICAgaW5zdC5ndWlkID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhjb3JlLl9ndWlkKFpvZEdVSUQsIHBhcmFtcykpO1xuICAgIGluc3QuY3VpZCA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soY29yZS5fY3VpZChab2RDVUlELCBwYXJhbXMpKTtcbiAgICBpbnN0LmN1aWQyID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhjb3JlLl9jdWlkMihab2RDVUlEMiwgcGFyYW1zKSk7XG4gICAgaW5zdC51bGlkID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhjb3JlLl91bGlkKFpvZFVMSUQsIHBhcmFtcykpO1xuICAgIGluc3QuYmFzZTY0ID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhjb3JlLl9iYXNlNjQoWm9kQmFzZTY0LCBwYXJhbXMpKTtcbiAgICBpbnN0LmJhc2U2NHVybCA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soY29yZS5fYmFzZTY0dXJsKFpvZEJhc2U2NFVSTCwgcGFyYW1zKSk7XG4gICAgaW5zdC54aWQgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNvcmUuX3hpZChab2RYSUQsIHBhcmFtcykpO1xuICAgIGluc3Qua3N1aWQgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNvcmUuX2tzdWlkKFpvZEtTVUlELCBwYXJhbXMpKTtcbiAgICBpbnN0LmlwdjQgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNvcmUuX2lwdjQoWm9kSVB2NCwgcGFyYW1zKSk7XG4gICAgaW5zdC5pcHY2ID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhjb3JlLl9pcHY2KFpvZElQdjYsIHBhcmFtcykpO1xuICAgIGluc3QuY2lkcnY0ID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhjb3JlLl9jaWRydjQoWm9kQ0lEUnY0LCBwYXJhbXMpKTtcbiAgICBpbnN0LmNpZHJ2NiA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soY29yZS5fY2lkcnY2KFpvZENJRFJ2NiwgcGFyYW1zKSk7XG4gICAgaW5zdC5lMTY0ID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhjb3JlLl9lMTY0KFpvZEUxNjQsIHBhcmFtcykpO1xuICAgIC8vIGlzb1xuICAgIGluc3QuZGF0ZXRpbWUgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKGlzby5kYXRldGltZShwYXJhbXMpKTtcbiAgICBpbnN0LmRhdGUgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKGlzby5kYXRlKHBhcmFtcykpO1xuICAgIGluc3QudGltZSA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soaXNvLnRpbWUocGFyYW1zKSk7XG4gICAgaW5zdC5kdXJhdGlvbiA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soaXNvLmR1cmF0aW9uKHBhcmFtcykpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gc3RyaW5nKHBhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl9zdHJpbmcoWm9kU3RyaW5nLCBwYXJhbXMpO1xufVxuZXhwb3J0IGNvbnN0IFpvZFN0cmluZ0Zvcm1hdCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RTdHJpbmdGb3JtYXRcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGNvcmUuJFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG4gICAgX1pvZFN0cmluZy5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBjb25zdCBab2RFbWFpbCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RFbWFpbFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgLy8gWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbiAgICBjb3JlLiRab2RFbWFpbC5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIGVtYWlsKHBhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl9lbWFpbChab2RFbWFpbCwgcGFyYW1zKTtcbn1cbmV4cG9ydCBjb25zdCBab2RHVUlEID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZEdVSURcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIC8vIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG4gICAgY29yZS4kWm9kR1VJRC5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIGd1aWQocGFyYW1zKSB7XG4gICAgcmV0dXJuIGNvcmUuX2d1aWQoWm9kR1VJRCwgcGFyYW1zKTtcbn1cbmV4cG9ydCBjb25zdCBab2RVVUlEID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZFVVSURcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIC8vIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG4gICAgY29yZS4kWm9kVVVJRC5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIHV1aWQocGFyYW1zKSB7XG4gICAgcmV0dXJuIGNvcmUuX3V1aWQoWm9kVVVJRCwgcGFyYW1zKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB1dWlkdjQocGFyYW1zKSB7XG4gICAgcmV0dXJuIGNvcmUuX3V1aWR2NChab2RVVUlELCBwYXJhbXMpO1xufVxuLy8gWm9kVVVJRHY2XG5leHBvcnQgZnVuY3Rpb24gdXVpZHY2KHBhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl91dWlkdjYoWm9kVVVJRCwgcGFyYW1zKTtcbn1cbi8vIFpvZFVVSUR2N1xuZXhwb3J0IGZ1bmN0aW9uIHV1aWR2NyhwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5fdXVpZHY3KFpvZFVVSUQsIHBhcmFtcyk7XG59XG5leHBvcnQgY29uc3QgWm9kVVJMID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZFVSTFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgLy8gWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbiAgICBjb3JlLiRab2RVUkwuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiB1cmwocGFyYW1zKSB7XG4gICAgcmV0dXJuIGNvcmUuX3VybChab2RVUkwsIHBhcmFtcyk7XG59XG5leHBvcnQgZnVuY3Rpb24gaHR0cFVybChwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5fdXJsKFpvZFVSTCwge1xuICAgICAgICBwcm90b2NvbDogL15odHRwcz8kLyxcbiAgICAgICAgaG9zdG5hbWU6IGNvcmUucmVnZXhlcy5kb21haW4sXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgY29uc3QgWm9kRW1vamkgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kRW1vamlcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIC8vIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG4gICAgY29yZS4kWm9kRW1vamkuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBlbW9qaShwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5fZW1vamkoWm9kRW1vamksIHBhcmFtcyk7XG59XG5leHBvcnQgY29uc3QgWm9kTmFub0lEID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZE5hbm9JRFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgLy8gWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbiAgICBjb3JlLiRab2ROYW5vSUQuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBuYW5vaWQocGFyYW1zKSB7XG4gICAgcmV0dXJuIGNvcmUuX25hbm9pZChab2ROYW5vSUQsIHBhcmFtcyk7XG59XG5leHBvcnQgY29uc3QgWm9kQ1VJRCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RDVUlEXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAvLyBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xuICAgIGNvcmUuJFpvZENVSUQuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBjdWlkKHBhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl9jdWlkKFpvZENVSUQsIHBhcmFtcyk7XG59XG5leHBvcnQgY29uc3QgWm9kQ1VJRDIgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kQ1VJRDJcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIC8vIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG4gICAgY29yZS4kWm9kQ1VJRDIuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBjdWlkMihwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5fY3VpZDIoWm9kQ1VJRDIsIHBhcmFtcyk7XG59XG5leHBvcnQgY29uc3QgWm9kVUxJRCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RVTElEXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAvLyBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xuICAgIGNvcmUuJFpvZFVMSUQuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiB1bGlkKHBhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl91bGlkKFpvZFVMSUQsIHBhcmFtcyk7XG59XG5leHBvcnQgY29uc3QgWm9kWElEID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZFhJRFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgLy8gWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbiAgICBjb3JlLiRab2RYSUQuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiB4aWQocGFyYW1zKSB7XG4gICAgcmV0dXJuIGNvcmUuX3hpZChab2RYSUQsIHBhcmFtcyk7XG59XG5leHBvcnQgY29uc3QgWm9kS1NVSUQgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kS1NVSURcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIC8vIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG4gICAgY29yZS4kWm9kS1NVSUQuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBrc3VpZChwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5fa3N1aWQoWm9kS1NVSUQsIHBhcmFtcyk7XG59XG5leHBvcnQgY29uc3QgWm9kSVB2NCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RJUHY0XCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAvLyBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xuICAgIGNvcmUuJFpvZElQdjQuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBpcHY0KHBhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl9pcHY0KFpvZElQdjQsIHBhcmFtcyk7XG59XG5leHBvcnQgY29uc3QgWm9kSVB2NiA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RJUHY2XCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAvLyBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xuICAgIGNvcmUuJFpvZElQdjYuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBpcHY2KHBhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl9pcHY2KFpvZElQdjYsIHBhcmFtcyk7XG59XG5leHBvcnQgY29uc3QgWm9kQ0lEUnY0ID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZENJRFJ2NFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY29yZS4kWm9kQ0lEUnY0LmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gY2lkcnY0KHBhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl9jaWRydjQoWm9kQ0lEUnY0LCBwYXJhbXMpO1xufVxuZXhwb3J0IGNvbnN0IFpvZENJRFJ2NiA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RDSURSdjZcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGNvcmUuJFpvZENJRFJ2Ni5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIGNpZHJ2NihwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5fY2lkcnY2KFpvZENJRFJ2NiwgcGFyYW1zKTtcbn1cbmV4cG9ydCBjb25zdCBab2RCYXNlNjQgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kQmFzZTY0XCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAvLyBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xuICAgIGNvcmUuJFpvZEJhc2U2NC5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIGJhc2U2NChwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5fYmFzZTY0KFpvZEJhc2U2NCwgcGFyYW1zKTtcbn1cbmV4cG9ydCBjb25zdCBab2RCYXNlNjRVUkwgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kQmFzZTY0VVJMXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAvLyBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xuICAgIGNvcmUuJFpvZEJhc2U2NFVSTC5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIGJhc2U2NHVybChwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5fYmFzZTY0dXJsKFpvZEJhc2U2NFVSTCwgcGFyYW1zKTtcbn1cbmV4cG9ydCBjb25zdCBab2RFMTY0ID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZEUxNjRcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIC8vIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG4gICAgY29yZS4kWm9kRTE2NC5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIGUxNjQocGFyYW1zKSB7XG4gICAgcmV0dXJuIGNvcmUuX2UxNjQoWm9kRTE2NCwgcGFyYW1zKTtcbn1cbmV4cG9ydCBjb25zdCBab2RKV1QgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kSldUXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAvLyBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xuICAgIGNvcmUuJFpvZEpXVC5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIGp3dChwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5fand0KFpvZEpXVCwgcGFyYW1zKTtcbn1cbmV4cG9ydCBjb25zdCBab2RDdXN0b21TdHJpbmdGb3JtYXQgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kQ3VzdG9tU3RyaW5nRm9ybWF0XCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAvLyBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xuICAgIGNvcmUuJFpvZEN1c3RvbVN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ0Zvcm1hdChmb3JtYXQsIGZuT3JSZWdleCwgX3BhcmFtcyA9IHt9KSB7XG4gICAgcmV0dXJuIGNvcmUuX3N0cmluZ0Zvcm1hdChab2RDdXN0b21TdHJpbmdGb3JtYXQsIGZvcm1hdCwgZm5PclJlZ2V4LCBfcGFyYW1zKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBob3N0bmFtZShfcGFyYW1zKSB7XG4gICAgcmV0dXJuIGNvcmUuX3N0cmluZ0Zvcm1hdChab2RDdXN0b21TdHJpbmdGb3JtYXQsIFwiaG9zdG5hbWVcIiwgY29yZS5yZWdleGVzLmhvc3RuYW1lLCBfcGFyYW1zKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBoZXgoX3BhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl9zdHJpbmdGb3JtYXQoWm9kQ3VzdG9tU3RyaW5nRm9ybWF0LCBcImhleFwiLCBjb3JlLnJlZ2V4ZXMuaGV4LCBfcGFyYW1zKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBoYXNoKGFsZywgcGFyYW1zKSB7XG4gICAgY29uc3QgZW5jID0gcGFyYW1zPy5lbmMgPz8gXCJoZXhcIjtcbiAgICBjb25zdCBmb3JtYXQgPSBgJHthbGd9XyR7ZW5jfWA7XG4gICAgY29uc3QgcmVnZXggPSBjb3JlLnJlZ2V4ZXNbZm9ybWF0XTtcbiAgICBpZiAoIXJlZ2V4KVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVucmVjb2duaXplZCBoYXNoIGZvcm1hdDogJHtmb3JtYXR9YCk7XG4gICAgcmV0dXJuIGNvcmUuX3N0cmluZ0Zvcm1hdChab2RDdXN0b21TdHJpbmdGb3JtYXQsIGZvcm1hdCwgcmVnZXgsIHBhcmFtcyk7XG59XG5leHBvcnQgY29uc3QgWm9kTnVtYmVyID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZE51bWJlclwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY29yZS4kWm9kTnVtYmVyLmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Lmd0ID0gKHZhbHVlLCBwYXJhbXMpID0+IGluc3QuY2hlY2soY2hlY2tzLmd0KHZhbHVlLCBwYXJhbXMpKTtcbiAgICBpbnN0Lmd0ZSA9ICh2YWx1ZSwgcGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNoZWNrcy5ndGUodmFsdWUsIHBhcmFtcykpO1xuICAgIGluc3QubWluID0gKHZhbHVlLCBwYXJhbXMpID0+IGluc3QuY2hlY2soY2hlY2tzLmd0ZSh2YWx1ZSwgcGFyYW1zKSk7XG4gICAgaW5zdC5sdCA9ICh2YWx1ZSwgcGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNoZWNrcy5sdCh2YWx1ZSwgcGFyYW1zKSk7XG4gICAgaW5zdC5sdGUgPSAodmFsdWUsIHBhcmFtcykgPT4gaW5zdC5jaGVjayhjaGVja3MubHRlKHZhbHVlLCBwYXJhbXMpKTtcbiAgICBpbnN0Lm1heCA9ICh2YWx1ZSwgcGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNoZWNrcy5sdGUodmFsdWUsIHBhcmFtcykpO1xuICAgIGluc3QuaW50ID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhpbnQocGFyYW1zKSk7XG4gICAgaW5zdC5zYWZlID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhpbnQocGFyYW1zKSk7XG4gICAgaW5zdC5wb3NpdGl2ZSA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soY2hlY2tzLmd0KDAsIHBhcmFtcykpO1xuICAgIGluc3Qubm9ubmVnYXRpdmUgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNoZWNrcy5ndGUoMCwgcGFyYW1zKSk7XG4gICAgaW5zdC5uZWdhdGl2ZSA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soY2hlY2tzLmx0KDAsIHBhcmFtcykpO1xuICAgIGluc3Qubm9ucG9zaXRpdmUgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNoZWNrcy5sdGUoMCwgcGFyYW1zKSk7XG4gICAgaW5zdC5tdWx0aXBsZU9mID0gKHZhbHVlLCBwYXJhbXMpID0+IGluc3QuY2hlY2soY2hlY2tzLm11bHRpcGxlT2YodmFsdWUsIHBhcmFtcykpO1xuICAgIGluc3Quc3RlcCA9ICh2YWx1ZSwgcGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNoZWNrcy5tdWx0aXBsZU9mKHZhbHVlLCBwYXJhbXMpKTtcbiAgICAvLyBpbnN0LmZpbml0ZSA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soY29yZS5maW5pdGUocGFyYW1zKSk7XG4gICAgaW5zdC5maW5pdGUgPSAoKSA9PiBpbnN0O1xuICAgIGNvbnN0IGJhZyA9IGluc3QuX3pvZC5iYWc7XG4gICAgaW5zdC5taW5WYWx1ZSA9XG4gICAgICAgIE1hdGgubWF4KGJhZy5taW5pbXVtID8/IE51bWJlci5ORUdBVElWRV9JTkZJTklUWSwgYmFnLmV4Y2x1c2l2ZU1pbmltdW0gPz8gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZKSA/PyBudWxsO1xuICAgIGluc3QubWF4VmFsdWUgPVxuICAgICAgICBNYXRoLm1pbihiYWcubWF4aW11bSA/PyBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksIGJhZy5leGNsdXNpdmVNYXhpbXVtID8/IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSkgPz8gbnVsbDtcbiAgICBpbnN0LmlzSW50ID0gKGJhZy5mb3JtYXQgPz8gXCJcIikuaW5jbHVkZXMoXCJpbnRcIikgfHwgTnVtYmVyLmlzU2FmZUludGVnZXIoYmFnLm11bHRpcGxlT2YgPz8gMC41KTtcbiAgICBpbnN0LmlzRmluaXRlID0gdHJ1ZTtcbiAgICBpbnN0LmZvcm1hdCA9IGJhZy5mb3JtYXQgPz8gbnVsbDtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIG51bWJlcihwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5fbnVtYmVyKFpvZE51bWJlciwgcGFyYW1zKTtcbn1cbmV4cG9ydCBjb25zdCBab2ROdW1iZXJGb3JtYXQgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kTnVtYmVyRm9ybWF0XCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2ROdW1iZXJGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZE51bWJlci5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBpbnQocGFyYW1zKSB7XG4gICAgcmV0dXJuIGNvcmUuX2ludChab2ROdW1iZXJGb3JtYXQsIHBhcmFtcyk7XG59XG5leHBvcnQgZnVuY3Rpb24gZmxvYXQzMihwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5fZmxvYXQzMihab2ROdW1iZXJGb3JtYXQsIHBhcmFtcyk7XG59XG5leHBvcnQgZnVuY3Rpb24gZmxvYXQ2NChwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5fZmxvYXQ2NChab2ROdW1iZXJGb3JtYXQsIHBhcmFtcyk7XG59XG5leHBvcnQgZnVuY3Rpb24gaW50MzIocGFyYW1zKSB7XG4gICAgcmV0dXJuIGNvcmUuX2ludDMyKFpvZE51bWJlckZvcm1hdCwgcGFyYW1zKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB1aW50MzIocGFyYW1zKSB7XG4gICAgcmV0dXJuIGNvcmUuX3VpbnQzMihab2ROdW1iZXJGb3JtYXQsIHBhcmFtcyk7XG59XG5leHBvcnQgY29uc3QgWm9kQm9vbGVhbiA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RCb29sZWFuXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2RCb29sZWFuLmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIGJvb2xlYW4ocGFyYW1zKSB7XG4gICAgcmV0dXJuIGNvcmUuX2Jvb2xlYW4oWm9kQm9vbGVhbiwgcGFyYW1zKTtcbn1cbmV4cG9ydCBjb25zdCBab2RCaWdJbnQgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kQmlnSW50XCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2RCaWdJbnQuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuZ3RlID0gKHZhbHVlLCBwYXJhbXMpID0+IGluc3QuY2hlY2soY2hlY2tzLmd0ZSh2YWx1ZSwgcGFyYW1zKSk7XG4gICAgaW5zdC5taW4gPSAodmFsdWUsIHBhcmFtcykgPT4gaW5zdC5jaGVjayhjaGVja3MuZ3RlKHZhbHVlLCBwYXJhbXMpKTtcbiAgICBpbnN0Lmd0ID0gKHZhbHVlLCBwYXJhbXMpID0+IGluc3QuY2hlY2soY2hlY2tzLmd0KHZhbHVlLCBwYXJhbXMpKTtcbiAgICBpbnN0Lmd0ZSA9ICh2YWx1ZSwgcGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNoZWNrcy5ndGUodmFsdWUsIHBhcmFtcykpO1xuICAgIGluc3QubWluID0gKHZhbHVlLCBwYXJhbXMpID0+IGluc3QuY2hlY2soY2hlY2tzLmd0ZSh2YWx1ZSwgcGFyYW1zKSk7XG4gICAgaW5zdC5sdCA9ICh2YWx1ZSwgcGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNoZWNrcy5sdCh2YWx1ZSwgcGFyYW1zKSk7XG4gICAgaW5zdC5sdGUgPSAodmFsdWUsIHBhcmFtcykgPT4gaW5zdC5jaGVjayhjaGVja3MubHRlKHZhbHVlLCBwYXJhbXMpKTtcbiAgICBpbnN0Lm1heCA9ICh2YWx1ZSwgcGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNoZWNrcy5sdGUodmFsdWUsIHBhcmFtcykpO1xuICAgIGluc3QucG9zaXRpdmUgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNoZWNrcy5ndChCaWdJbnQoMCksIHBhcmFtcykpO1xuICAgIGluc3QubmVnYXRpdmUgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNoZWNrcy5sdChCaWdJbnQoMCksIHBhcmFtcykpO1xuICAgIGluc3Qubm9ucG9zaXRpdmUgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNoZWNrcy5sdGUoQmlnSW50KDApLCBwYXJhbXMpKTtcbiAgICBpbnN0Lm5vbm5lZ2F0aXZlID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhjaGVja3MuZ3RlKEJpZ0ludCgwKSwgcGFyYW1zKSk7XG4gICAgaW5zdC5tdWx0aXBsZU9mID0gKHZhbHVlLCBwYXJhbXMpID0+IGluc3QuY2hlY2soY2hlY2tzLm11bHRpcGxlT2YodmFsdWUsIHBhcmFtcykpO1xuICAgIGNvbnN0IGJhZyA9IGluc3QuX3pvZC5iYWc7XG4gICAgaW5zdC5taW5WYWx1ZSA9IGJhZy5taW5pbXVtID8/IG51bGw7XG4gICAgaW5zdC5tYXhWYWx1ZSA9IGJhZy5tYXhpbXVtID8/IG51bGw7XG4gICAgaW5zdC5mb3JtYXQgPSBiYWcuZm9ybWF0ID8/IG51bGw7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBiaWdpbnQocGFyYW1zKSB7XG4gICAgcmV0dXJuIGNvcmUuX2JpZ2ludChab2RCaWdJbnQsIHBhcmFtcyk7XG59XG5leHBvcnQgY29uc3QgWm9kQmlnSW50Rm9ybWF0ID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZEJpZ0ludEZvcm1hdFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY29yZS4kWm9kQmlnSW50Rm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RCaWdJbnQuaW5pdChpbnN0LCBkZWYpO1xufSk7XG4vLyBpbnQ2NFxuZXhwb3J0IGZ1bmN0aW9uIGludDY0KHBhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl9pbnQ2NChab2RCaWdJbnRGb3JtYXQsIHBhcmFtcyk7XG59XG4vLyB1aW50NjRcbmV4cG9ydCBmdW5jdGlvbiB1aW50NjQocGFyYW1zKSB7XG4gICAgcmV0dXJuIGNvcmUuX3VpbnQ2NChab2RCaWdJbnRGb3JtYXQsIHBhcmFtcyk7XG59XG5leHBvcnQgY29uc3QgWm9kU3ltYm9sID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZFN5bWJvbFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY29yZS4kWm9kU3ltYm9sLmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIHN5bWJvbChwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5fc3ltYm9sKFpvZFN5bWJvbCwgcGFyYW1zKTtcbn1cbmV4cG9ydCBjb25zdCBab2RVbmRlZmluZWQgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kVW5kZWZpbmVkXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2RVbmRlZmluZWQuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xufSk7XG5mdW5jdGlvbiBfdW5kZWZpbmVkKHBhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl91bmRlZmluZWQoWm9kVW5kZWZpbmVkLCBwYXJhbXMpO1xufVxuZXhwb3J0IHsgX3VuZGVmaW5lZCBhcyB1bmRlZmluZWQgfTtcbmV4cG9ydCBjb25zdCBab2ROdWxsID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZE51bGxcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGNvcmUuJFpvZE51bGwuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xufSk7XG5mdW5jdGlvbiBfbnVsbChwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5fbnVsbChab2ROdWxsLCBwYXJhbXMpO1xufVxuZXhwb3J0IHsgX251bGwgYXMgbnVsbCB9O1xuZXhwb3J0IGNvbnN0IFpvZEFueSA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RBbnlcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGNvcmUuJFpvZEFueS5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBhbnkoKSB7XG4gICAgcmV0dXJuIGNvcmUuX2FueShab2RBbnkpO1xufVxuZXhwb3J0IGNvbnN0IFpvZFVua25vd24gPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kVW5rbm93blwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY29yZS4kWm9kVW5rbm93bi5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiB1bmtub3duKCkge1xuICAgIHJldHVybiBjb3JlLl91bmtub3duKFpvZFVua25vd24pO1xufVxuZXhwb3J0IGNvbnN0IFpvZE5ldmVyID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZE5ldmVyXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2ROZXZlci5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBuZXZlcihwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5fbmV2ZXIoWm9kTmV2ZXIsIHBhcmFtcyk7XG59XG5leHBvcnQgY29uc3QgWm9kVm9pZCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RWb2lkXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2RWb2lkLmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbn0pO1xuZnVuY3Rpb24gX3ZvaWQocGFyYW1zKSB7XG4gICAgcmV0dXJuIGNvcmUuX3ZvaWQoWm9kVm9pZCwgcGFyYW1zKTtcbn1cbmV4cG9ydCB7IF92b2lkIGFzIHZvaWQgfTtcbmV4cG9ydCBjb25zdCBab2REYXRlID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZERhdGVcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGNvcmUuJFpvZERhdGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QubWluID0gKHZhbHVlLCBwYXJhbXMpID0+IGluc3QuY2hlY2soY2hlY2tzLmd0ZSh2YWx1ZSwgcGFyYW1zKSk7XG4gICAgaW5zdC5tYXggPSAodmFsdWUsIHBhcmFtcykgPT4gaW5zdC5jaGVjayhjaGVja3MubHRlKHZhbHVlLCBwYXJhbXMpKTtcbiAgICBjb25zdCBjID0gaW5zdC5fem9kLmJhZztcbiAgICBpbnN0Lm1pbkRhdGUgPSBjLm1pbmltdW0gPyBuZXcgRGF0ZShjLm1pbmltdW0pIDogbnVsbDtcbiAgICBpbnN0Lm1heERhdGUgPSBjLm1heGltdW0gPyBuZXcgRGF0ZShjLm1heGltdW0pIDogbnVsbDtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIGRhdGUocGFyYW1zKSB7XG4gICAgcmV0dXJuIGNvcmUuX2RhdGUoWm9kRGF0ZSwgcGFyYW1zKTtcbn1cbmV4cG9ydCBjb25zdCBab2RBcnJheSA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RBcnJheVwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY29yZS4kWm9kQXJyYXkuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuZWxlbWVudCA9IGRlZi5lbGVtZW50O1xuICAgIGluc3QubWluID0gKG1pbkxlbmd0aCwgcGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNoZWNrcy5taW5MZW5ndGgobWluTGVuZ3RoLCBwYXJhbXMpKTtcbiAgICBpbnN0Lm5vbmVtcHR5ID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhjaGVja3MubWluTGVuZ3RoKDEsIHBhcmFtcykpO1xuICAgIGluc3QubWF4ID0gKG1heExlbmd0aCwgcGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNoZWNrcy5tYXhMZW5ndGgobWF4TGVuZ3RoLCBwYXJhbXMpKTtcbiAgICBpbnN0Lmxlbmd0aCA9IChsZW4sIHBhcmFtcykgPT4gaW5zdC5jaGVjayhjaGVja3MubGVuZ3RoKGxlbiwgcGFyYW1zKSk7XG4gICAgaW5zdC51bndyYXAgPSAoKSA9PiBpbnN0LmVsZW1lbnQ7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBhcnJheShlbGVtZW50LCBwYXJhbXMpIHtcbiAgICByZXR1cm4gY29yZS5fYXJyYXkoWm9kQXJyYXksIGVsZW1lbnQsIHBhcmFtcyk7XG59XG4vLyAua2V5b2ZcbmV4cG9ydCBmdW5jdGlvbiBrZXlvZihzY2hlbWEpIHtcbiAgICBjb25zdCBzaGFwZSA9IHNjaGVtYS5fem9kLmRlZi5zaGFwZTtcbiAgICByZXR1cm4gX2VudW0oT2JqZWN0LmtleXMoc2hhcGUpKTtcbn1cbmV4cG9ydCBjb25zdCBab2RPYmplY3QgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kT2JqZWN0XCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2RPYmplY3RKSVQuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIHV0aWwuZGVmaW5lTGF6eShpbnN0LCBcInNoYXBlXCIsICgpID0+IGRlZi5zaGFwZSk7XG4gICAgaW5zdC5rZXlvZiA9ICgpID0+IF9lbnVtKE9iamVjdC5rZXlzKGluc3QuX3pvZC5kZWYuc2hhcGUpKTtcbiAgICBpbnN0LmNhdGNoYWxsID0gKGNhdGNoYWxsKSA9PiBpbnN0LmNsb25lKHsgLi4uaW5zdC5fem9kLmRlZiwgY2F0Y2hhbGw6IGNhdGNoYWxsIH0pO1xuICAgIGluc3QucGFzc3Rocm91Z2ggPSAoKSA9PiBpbnN0LmNsb25lKHsgLi4uaW5zdC5fem9kLmRlZiwgY2F0Y2hhbGw6IHVua25vd24oKSB9KTtcbiAgICBpbnN0Lmxvb3NlID0gKCkgPT4gaW5zdC5jbG9uZSh7IC4uLmluc3QuX3pvZC5kZWYsIGNhdGNoYWxsOiB1bmtub3duKCkgfSk7XG4gICAgaW5zdC5zdHJpY3QgPSAoKSA9PiBpbnN0LmNsb25lKHsgLi4uaW5zdC5fem9kLmRlZiwgY2F0Y2hhbGw6IG5ldmVyKCkgfSk7XG4gICAgaW5zdC5zdHJpcCA9ICgpID0+IGluc3QuY2xvbmUoeyAuLi5pbnN0Ll96b2QuZGVmLCBjYXRjaGFsbDogdW5kZWZpbmVkIH0pO1xuICAgIGluc3QuZXh0ZW5kID0gKGluY29taW5nKSA9PiB7XG4gICAgICAgIHJldHVybiB1dGlsLmV4dGVuZChpbnN0LCBpbmNvbWluZyk7XG4gICAgfTtcbiAgICBpbnN0LnNhZmVFeHRlbmQgPSAoaW5jb21pbmcpID0+IHtcbiAgICAgICAgcmV0dXJuIHV0aWwuc2FmZUV4dGVuZChpbnN0LCBpbmNvbWluZyk7XG4gICAgfTtcbiAgICBpbnN0Lm1lcmdlID0gKG90aGVyKSA9PiB1dGlsLm1lcmdlKGluc3QsIG90aGVyKTtcbiAgICBpbnN0LnBpY2sgPSAobWFzaykgPT4gdXRpbC5waWNrKGluc3QsIG1hc2spO1xuICAgIGluc3Qub21pdCA9IChtYXNrKSA9PiB1dGlsLm9taXQoaW5zdCwgbWFzayk7XG4gICAgaW5zdC5wYXJ0aWFsID0gKC4uLmFyZ3MpID0+IHV0aWwucGFydGlhbChab2RPcHRpb25hbCwgaW5zdCwgYXJnc1swXSk7XG4gICAgaW5zdC5yZXF1aXJlZCA9ICguLi5hcmdzKSA9PiB1dGlsLnJlcXVpcmVkKFpvZE5vbk9wdGlvbmFsLCBpbnN0LCBhcmdzWzBdKTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIG9iamVjdChzaGFwZSwgcGFyYW1zKSB7XG4gICAgY29uc3QgZGVmID0ge1xuICAgICAgICB0eXBlOiBcIm9iamVjdFwiLFxuICAgICAgICBnZXQgc2hhcGUoKSB7XG4gICAgICAgICAgICB1dGlsLmFzc2lnblByb3AodGhpcywgXCJzaGFwZVwiLCBzaGFwZSA/IHV0aWwub2JqZWN0Q2xvbmUoc2hhcGUpIDoge30pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2hhcGU7XG4gICAgICAgIH0sXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfTtcbiAgICByZXR1cm4gbmV3IFpvZE9iamVjdChkZWYpO1xufVxuLy8gc3RyaWN0T2JqZWN0XG5leHBvcnQgZnVuY3Rpb24gc3RyaWN0T2JqZWN0KHNoYXBlLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgIHR5cGU6IFwib2JqZWN0XCIsXG4gICAgICAgIGdldCBzaGFwZSgpIHtcbiAgICAgICAgICAgIHV0aWwuYXNzaWduUHJvcCh0aGlzLCBcInNoYXBlXCIsIHV0aWwub2JqZWN0Q2xvbmUoc2hhcGUpKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNoYXBlO1xuICAgICAgICB9LFxuICAgICAgICBjYXRjaGFsbDogbmV2ZXIoKSxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbi8vIGxvb3NlT2JqZWN0XG5leHBvcnQgZnVuY3Rpb24gbG9vc2VPYmplY3Qoc2hhcGUsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgdHlwZTogXCJvYmplY3RcIixcbiAgICAgICAgZ2V0IHNoYXBlKCkge1xuICAgICAgICAgICAgdXRpbC5hc3NpZ25Qcm9wKHRoaXMsIFwic2hhcGVcIiwgdXRpbC5vYmplY3RDbG9uZShzaGFwZSkpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2hhcGU7XG4gICAgICAgIH0sXG4gICAgICAgIGNhdGNoYWxsOiB1bmtub3duKCksXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgY29uc3QgWm9kVW5pb24gPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kVW5pb25cIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGNvcmUuJFpvZFVuaW9uLmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Lm9wdGlvbnMgPSBkZWYub3B0aW9ucztcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIHVuaW9uKG9wdGlvbnMsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgWm9kVW5pb24oe1xuICAgICAgICB0eXBlOiBcInVuaW9uXCIsXG4gICAgICAgIG9wdGlvbnM6IG9wdGlvbnMsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgY29uc3QgWm9kRGlzY3JpbWluYXRlZFVuaW9uID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZERpc2NyaW1pbmF0ZWRVbmlvblwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgWm9kVW5pb24uaW5pdChpbnN0LCBkZWYpO1xuICAgIGNvcmUuJFpvZERpc2NyaW1pbmF0ZWRVbmlvbi5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBkaXNjcmltaW5hdGVkVW5pb24oZGlzY3JpbWluYXRvciwgb3B0aW9ucywgcGFyYW1zKSB7XG4gICAgLy8gY29uc3QgW29wdGlvbnMsIHBhcmFtc10gPSBhcmdzO1xuICAgIHJldHVybiBuZXcgWm9kRGlzY3JpbWluYXRlZFVuaW9uKHtcbiAgICAgICAgdHlwZTogXCJ1bmlvblwiLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICBkaXNjcmltaW5hdG9yLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGNvbnN0IFpvZEludGVyc2VjdGlvbiA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RJbnRlcnNlY3Rpb25cIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGNvcmUuJFpvZEludGVyc2VjdGlvbi5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3Rpb24obGVmdCwgcmlnaHQpIHtcbiAgICByZXR1cm4gbmV3IFpvZEludGVyc2VjdGlvbih7XG4gICAgICAgIHR5cGU6IFwiaW50ZXJzZWN0aW9uXCIsXG4gICAgICAgIGxlZnQ6IGxlZnQsXG4gICAgICAgIHJpZ2h0OiByaWdodCxcbiAgICB9KTtcbn1cbmV4cG9ydCBjb25zdCBab2RUdXBsZSA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RUdXBsZVwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY29yZS4kWm9kVHVwbGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QucmVzdCA9IChyZXN0KSA9PiBpbnN0LmNsb25lKHtcbiAgICAgICAgLi4uaW5zdC5fem9kLmRlZixcbiAgICAgICAgcmVzdDogcmVzdCxcbiAgICB9KTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIHR1cGxlKGl0ZW1zLCBfcGFyYW1zT3JSZXN0LCBfcGFyYW1zKSB7XG4gICAgY29uc3QgaGFzUmVzdCA9IF9wYXJhbXNPclJlc3QgaW5zdGFuY2VvZiBjb3JlLiRab2RUeXBlO1xuICAgIGNvbnN0IHBhcmFtcyA9IGhhc1Jlc3QgPyBfcGFyYW1zIDogX3BhcmFtc09yUmVzdDtcbiAgICBjb25zdCByZXN0ID0gaGFzUmVzdCA/IF9wYXJhbXNPclJlc3QgOiBudWxsO1xuICAgIHJldHVybiBuZXcgWm9kVHVwbGUoe1xuICAgICAgICB0eXBlOiBcInR1cGxlXCIsXG4gICAgICAgIGl0ZW1zOiBpdGVtcyxcbiAgICAgICAgcmVzdCxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBjb25zdCBab2RSZWNvcmQgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kUmVjb3JkXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2RSZWNvcmQuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3Qua2V5VHlwZSA9IGRlZi5rZXlUeXBlO1xuICAgIGluc3QudmFsdWVUeXBlID0gZGVmLnZhbHVlVHlwZTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIHJlY29yZChrZXlUeXBlLCB2YWx1ZVR5cGUsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgWm9kUmVjb3JkKHtcbiAgICAgICAgdHlwZTogXCJyZWNvcmRcIixcbiAgICAgICAga2V5VHlwZSxcbiAgICAgICAgdmFsdWVUeXBlOiB2YWx1ZVR5cGUsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG4vLyB0eXBlIGFsa3NqZiA9IGNvcmUub3V0cHV0PGNvcmUuJFpvZFJlY29yZEtleT47XG5leHBvcnQgZnVuY3Rpb24gcGFydGlhbFJlY29yZChrZXlUeXBlLCB2YWx1ZVR5cGUsIHBhcmFtcykge1xuICAgIGNvbnN0IGsgPSBjb3JlLmNsb25lKGtleVR5cGUpO1xuICAgIGsuX3pvZC52YWx1ZXMgPSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIG5ldyBab2RSZWNvcmQoe1xuICAgICAgICB0eXBlOiBcInJlY29yZFwiLFxuICAgICAgICBrZXlUeXBlOiBrLFxuICAgICAgICB2YWx1ZVR5cGU6IHZhbHVlVHlwZSxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBjb25zdCBab2RNYXAgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kTWFwXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2RNYXAuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3Qua2V5VHlwZSA9IGRlZi5rZXlUeXBlO1xuICAgIGluc3QudmFsdWVUeXBlID0gZGVmLnZhbHVlVHlwZTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIG1hcChrZXlUeXBlLCB2YWx1ZVR5cGUsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgWm9kTWFwKHtcbiAgICAgICAgdHlwZTogXCJtYXBcIixcbiAgICAgICAga2V5VHlwZToga2V5VHlwZSxcbiAgICAgICAgdmFsdWVUeXBlOiB2YWx1ZVR5cGUsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgY29uc3QgWm9kU2V0ID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZFNldFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY29yZS4kWm9kU2V0LmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Lm1pbiA9ICguLi5hcmdzKSA9PiBpbnN0LmNoZWNrKGNvcmUuX21pblNpemUoLi4uYXJncykpO1xuICAgIGluc3Qubm9uZW1wdHkgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNvcmUuX21pblNpemUoMSwgcGFyYW1zKSk7XG4gICAgaW5zdC5tYXggPSAoLi4uYXJncykgPT4gaW5zdC5jaGVjayhjb3JlLl9tYXhTaXplKC4uLmFyZ3MpKTtcbiAgICBpbnN0LnNpemUgPSAoLi4uYXJncykgPT4gaW5zdC5jaGVjayhjb3JlLl9zaXplKC4uLmFyZ3MpKTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIHNldCh2YWx1ZVR5cGUsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgWm9kU2V0KHtcbiAgICAgICAgdHlwZTogXCJzZXRcIixcbiAgICAgICAgdmFsdWVUeXBlOiB2YWx1ZVR5cGUsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgY29uc3QgWm9kRW51bSA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RFbnVtXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2RFbnVtLmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0LmVudW0gPSBkZWYuZW50cmllcztcbiAgICBpbnN0Lm9wdGlvbnMgPSBPYmplY3QudmFsdWVzKGRlZi5lbnRyaWVzKTtcbiAgICBjb25zdCBrZXlzID0gbmV3IFNldChPYmplY3Qua2V5cyhkZWYuZW50cmllcykpO1xuICAgIGluc3QuZXh0cmFjdCA9ICh2YWx1ZXMsIHBhcmFtcykgPT4ge1xuICAgICAgICBjb25zdCBuZXdFbnRyaWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICAgICAgICBpZiAoa2V5cy5oYXModmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgbmV3RW50cmllc1t2YWx1ZV0gPSBkZWYuZW50cmllc1t2YWx1ZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBLZXkgJHt2YWx1ZX0gbm90IGZvdW5kIGluIGVudW1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFpvZEVudW0oe1xuICAgICAgICAgICAgLi4uZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbXSxcbiAgICAgICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgICAgICAgICBlbnRyaWVzOiBuZXdFbnRyaWVzLFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGluc3QuZXhjbHVkZSA9ICh2YWx1ZXMsIHBhcmFtcykgPT4ge1xuICAgICAgICBjb25zdCBuZXdFbnRyaWVzID0geyAuLi5kZWYuZW50cmllcyB9O1xuICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHZhbHVlcykge1xuICAgICAgICAgICAgaWYgKGtleXMuaGFzKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBuZXdFbnRyaWVzW3ZhbHVlXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEtleSAke3ZhbHVlfSBub3QgZm91bmQgaW4gZW51bWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kRW51bSh7XG4gICAgICAgICAgICAuLi5kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFtdLFxuICAgICAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICAgICAgICAgIGVudHJpZXM6IG5ld0VudHJpZXMsXG4gICAgICAgIH0pO1xuICAgIH07XG59KTtcbmZ1bmN0aW9uIF9lbnVtKHZhbHVlcywgcGFyYW1zKSB7XG4gICAgY29uc3QgZW50cmllcyA9IEFycmF5LmlzQXJyYXkodmFsdWVzKSA/IE9iamVjdC5mcm9tRW50cmllcyh2YWx1ZXMubWFwKCh2KSA9PiBbdiwgdl0pKSA6IHZhbHVlcztcbiAgICByZXR1cm4gbmV3IFpvZEVudW0oe1xuICAgICAgICB0eXBlOiBcImVudW1cIixcbiAgICAgICAgZW50cmllcyxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbmV4cG9ydCB7IF9lbnVtIGFzIGVudW0gfTtcbi8qKiBAZGVwcmVjYXRlZCBUaGlzIEFQSSBoYXMgYmVlbiBtZXJnZWQgaW50byBgei5lbnVtKClgLiBVc2UgYHouZW51bSgpYCBpbnN0ZWFkLlxuICpcbiAqIGBgYHRzXG4gKiBlbnVtIENvbG9ycyB7IHJlZCwgZ3JlZW4sIGJsdWUgfVxuICogei5lbnVtKENvbG9ycyk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5hdGl2ZUVudW0oZW50cmllcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBab2RFbnVtKHtcbiAgICAgICAgdHlwZTogXCJlbnVtXCIsXG4gICAgICAgIGVudHJpZXMsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgY29uc3QgWm9kTGl0ZXJhbCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RMaXRlcmFsXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2RMaXRlcmFsLmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0LnZhbHVlcyA9IG5ldyBTZXQoZGVmLnZhbHVlcyk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGluc3QsIFwidmFsdWVcIiwge1xuICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICBpZiAoZGVmLnZhbHVlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBzY2hlbWEgY29udGFpbnMgbXVsdGlwbGUgdmFsaWQgbGl0ZXJhbCB2YWx1ZXMuIFVzZSBgLnZhbHVlc2AgaW5zdGVhZC5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZGVmLnZhbHVlc1swXTtcbiAgICAgICAgfSxcbiAgICB9KTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIGxpdGVyYWwodmFsdWUsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgWm9kTGl0ZXJhbCh7XG4gICAgICAgIHR5cGU6IFwibGl0ZXJhbFwiLFxuICAgICAgICB2YWx1ZXM6IEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBbdmFsdWVdLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGNvbnN0IFpvZEZpbGUgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kRmlsZVwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY29yZS4kWm9kRmlsZS5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5taW4gPSAoc2l6ZSwgcGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNvcmUuX21pblNpemUoc2l6ZSwgcGFyYW1zKSk7XG4gICAgaW5zdC5tYXggPSAoc2l6ZSwgcGFyYW1zKSA9PiBpbnN0LmNoZWNrKGNvcmUuX21heFNpemUoc2l6ZSwgcGFyYW1zKSk7XG4gICAgaW5zdC5taW1lID0gKHR5cGVzLCBwYXJhbXMpID0+IGluc3QuY2hlY2soY29yZS5fbWltZShBcnJheS5pc0FycmF5KHR5cGVzKSA/IHR5cGVzIDogW3R5cGVzXSwgcGFyYW1zKSk7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBmaWxlKHBhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl9maWxlKFpvZEZpbGUsIHBhcmFtcyk7XG59XG5leHBvcnQgY29uc3QgWm9kVHJhbnNmb3JtID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZFRyYW5zZm9ybVwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY29yZS4kWm9kVHJhbnNmb3JtLmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgX2N0eCkgPT4ge1xuICAgICAgICBpZiAoX2N0eC5kaXJlY3Rpb24gPT09IFwiYmFja3dhcmRcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGNvcmUuJFpvZEVuY29kZUVycm9yKGluc3QuY29uc3RydWN0b3IubmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgcGF5bG9hZC5hZGRJc3N1ZSA9IChpc3N1ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpc3N1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2godXRpbC5pc3N1ZShpc3N1ZSwgcGF5bG9hZC52YWx1ZSwgZGVmKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBmb3IgWm9kIDMgYmFja3dhcmRzIGNvbXBhdGliaWxpdHlcbiAgICAgICAgICAgICAgICBjb25zdCBfaXNzdWUgPSBpc3N1ZTtcbiAgICAgICAgICAgICAgICBpZiAoX2lzc3VlLmZhdGFsKVxuICAgICAgICAgICAgICAgICAgICBfaXNzdWUuY29udGludWUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBfaXNzdWUuY29kZSA/PyAoX2lzc3VlLmNvZGUgPSBcImN1c3RvbVwiKTtcbiAgICAgICAgICAgICAgICBfaXNzdWUuaW5wdXQgPz8gKF9pc3N1ZS5pbnB1dCA9IHBheWxvYWQudmFsdWUpO1xuICAgICAgICAgICAgICAgIF9pc3N1ZS5pbnN0ID8/IChfaXNzdWUuaW5zdCA9IGluc3QpO1xuICAgICAgICAgICAgICAgIC8vIF9pc3N1ZS5jb250aW51ZSA/Pz0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHV0aWwuaXNzdWUoX2lzc3VlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IGRlZi50cmFuc2Zvcm0ocGF5bG9hZC52YWx1ZSwgcGF5bG9hZCk7XG4gICAgICAgIGlmIChvdXRwdXQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0LnRoZW4oKG91dHB1dCkgPT4ge1xuICAgICAgICAgICAgICAgIHBheWxvYWQudmFsdWUgPSBvdXRwdXQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBwYXlsb2FkLnZhbHVlID0gb3V0cHV0O1xuICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICB9O1xufSk7XG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtKGZuKSB7XG4gICAgcmV0dXJuIG5ldyBab2RUcmFuc2Zvcm0oe1xuICAgICAgICB0eXBlOiBcInRyYW5zZm9ybVwiLFxuICAgICAgICB0cmFuc2Zvcm06IGZuLFxuICAgIH0pO1xufVxuZXhwb3J0IGNvbnN0IFpvZE9wdGlvbmFsID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZE9wdGlvbmFsXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2RPcHRpb25hbC5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC51bndyYXAgPSAoKSA9PiBpbnN0Ll96b2QuZGVmLmlubmVyVHlwZTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIG9wdGlvbmFsKGlubmVyVHlwZSkge1xuICAgIHJldHVybiBuZXcgWm9kT3B0aW9uYWwoe1xuICAgICAgICB0eXBlOiBcIm9wdGlvbmFsXCIsXG4gICAgICAgIGlubmVyVHlwZTogaW5uZXJUeXBlLFxuICAgIH0pO1xufVxuZXhwb3J0IGNvbnN0IFpvZE51bGxhYmxlID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZE51bGxhYmxlXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2ROdWxsYWJsZS5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC51bndyYXAgPSAoKSA9PiBpbnN0Ll96b2QuZGVmLmlubmVyVHlwZTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIG51bGxhYmxlKGlubmVyVHlwZSkge1xuICAgIHJldHVybiBuZXcgWm9kTnVsbGFibGUoe1xuICAgICAgICB0eXBlOiBcIm51bGxhYmxlXCIsXG4gICAgICAgIGlubmVyVHlwZTogaW5uZXJUeXBlLFxuICAgIH0pO1xufVxuLy8gbnVsbGlzaFxuZXhwb3J0IGZ1bmN0aW9uIG51bGxpc2goaW5uZXJUeXBlKSB7XG4gICAgcmV0dXJuIG9wdGlvbmFsKG51bGxhYmxlKGlubmVyVHlwZSkpO1xufVxuZXhwb3J0IGNvbnN0IFpvZERlZmF1bHQgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kRGVmYXVsdFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY29yZS4kWm9kRGVmYXVsdC5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC51bndyYXAgPSAoKSA9PiBpbnN0Ll96b2QuZGVmLmlubmVyVHlwZTtcbiAgICBpbnN0LnJlbW92ZURlZmF1bHQgPSBpbnN0LnVud3JhcDtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIF9kZWZhdWx0KGlubmVyVHlwZSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgcmV0dXJuIG5ldyBab2REZWZhdWx0KHtcbiAgICAgICAgdHlwZTogXCJkZWZhdWx0XCIsXG4gICAgICAgIGlubmVyVHlwZTogaW5uZXJUeXBlLFxuICAgICAgICBnZXQgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBkZWZhdWx0VmFsdWUgPT09IFwiZnVuY3Rpb25cIiA/IGRlZmF1bHRWYWx1ZSgpIDogdXRpbC5zaGFsbG93Q2xvbmUoZGVmYXVsdFZhbHVlKTtcbiAgICAgICAgfSxcbiAgICB9KTtcbn1cbmV4cG9ydCBjb25zdCBab2RQcmVmYXVsdCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RQcmVmYXVsdFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY29yZS4kWm9kUHJlZmF1bHQuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QudW53cmFwID0gKCkgPT4gaW5zdC5fem9kLmRlZi5pbm5lclR5cGU7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBwcmVmYXVsdChpbm5lclR5cGUsIGRlZmF1bHRWYWx1ZSkge1xuICAgIHJldHVybiBuZXcgWm9kUHJlZmF1bHQoe1xuICAgICAgICB0eXBlOiBcInByZWZhdWx0XCIsXG4gICAgICAgIGlubmVyVHlwZTogaW5uZXJUeXBlLFxuICAgICAgICBnZXQgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBkZWZhdWx0VmFsdWUgPT09IFwiZnVuY3Rpb25cIiA/IGRlZmF1bHRWYWx1ZSgpIDogdXRpbC5zaGFsbG93Q2xvbmUoZGVmYXVsdFZhbHVlKTtcbiAgICAgICAgfSxcbiAgICB9KTtcbn1cbmV4cG9ydCBjb25zdCBab2ROb25PcHRpb25hbCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2ROb25PcHRpb25hbFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY29yZS4kWm9kTm9uT3B0aW9uYWwuaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QudW53cmFwID0gKCkgPT4gaW5zdC5fem9kLmRlZi5pbm5lclR5cGU7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBub25vcHRpb25hbChpbm5lclR5cGUsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgWm9kTm9uT3B0aW9uYWwoe1xuICAgICAgICB0eXBlOiBcIm5vbm9wdGlvbmFsXCIsXG4gICAgICAgIGlubmVyVHlwZTogaW5uZXJUeXBlLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGNvbnN0IFpvZFN1Y2Nlc3MgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kU3VjY2Vzc1wiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY29yZS4kWm9kU3VjY2Vzcy5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC51bndyYXAgPSAoKSA9PiBpbnN0Ll96b2QuZGVmLmlubmVyVHlwZTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIHN1Y2Nlc3MoaW5uZXJUeXBlKSB7XG4gICAgcmV0dXJuIG5ldyBab2RTdWNjZXNzKHtcbiAgICAgICAgdHlwZTogXCJzdWNjZXNzXCIsXG4gICAgICAgIGlubmVyVHlwZTogaW5uZXJUeXBlLFxuICAgIH0pO1xufVxuZXhwb3J0IGNvbnN0IFpvZENhdGNoID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZENhdGNoXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2RDYXRjaC5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC51bndyYXAgPSAoKSA9PiBpbnN0Ll96b2QuZGVmLmlubmVyVHlwZTtcbiAgICBpbnN0LnJlbW92ZUNhdGNoID0gaW5zdC51bndyYXA7XG59KTtcbmZ1bmN0aW9uIF9jYXRjaChpbm5lclR5cGUsIGNhdGNoVmFsdWUpIHtcbiAgICByZXR1cm4gbmV3IFpvZENhdGNoKHtcbiAgICAgICAgdHlwZTogXCJjYXRjaFwiLFxuICAgICAgICBpbm5lclR5cGU6IGlubmVyVHlwZSxcbiAgICAgICAgY2F0Y2hWYWx1ZTogKHR5cGVvZiBjYXRjaFZhbHVlID09PSBcImZ1bmN0aW9uXCIgPyBjYXRjaFZhbHVlIDogKCkgPT4gY2F0Y2hWYWx1ZSksXG4gICAgfSk7XG59XG5leHBvcnQgeyBfY2F0Y2ggYXMgY2F0Y2ggfTtcbmV4cG9ydCBjb25zdCBab2ROYU4gPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kTmFOXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2ROYU4uaW5pdChpbnN0LCBkZWYpO1xuICAgIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gbmFuKHBhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl9uYW4oWm9kTmFOLCBwYXJhbXMpO1xufVxuZXhwb3J0IGNvbnN0IFpvZFBpcGUgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kUGlwZVwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY29yZS4kWm9kUGlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5pbiA9IGRlZi5pbjtcbiAgICBpbnN0Lm91dCA9IGRlZi5vdXQ7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBwaXBlKGluXywgb3V0KSB7XG4gICAgcmV0dXJuIG5ldyBab2RQaXBlKHtcbiAgICAgICAgdHlwZTogXCJwaXBlXCIsXG4gICAgICAgIGluOiBpbl8sXG4gICAgICAgIG91dDogb3V0LFxuICAgICAgICAvLyAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGNvbnN0IFpvZENvZGVjID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZENvZGVjXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBab2RQaXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBjb3JlLiRab2RDb2RlYy5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBjb2RlYyhpbl8sIG91dCwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBab2RDb2RlYyh7XG4gICAgICAgIHR5cGU6IFwicGlwZVwiLFxuICAgICAgICBpbjogaW5fLFxuICAgICAgICBvdXQ6IG91dCxcbiAgICAgICAgdHJhbnNmb3JtOiBwYXJhbXMuZGVjb2RlLFxuICAgICAgICByZXZlcnNlVHJhbnNmb3JtOiBwYXJhbXMuZW5jb2RlLFxuICAgIH0pO1xufVxuZXhwb3J0IGNvbnN0IFpvZFJlYWRvbmx5ID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZFJlYWRvbmx5XCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2RSZWFkb25seS5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC51bndyYXAgPSAoKSA9PiBpbnN0Ll96b2QuZGVmLmlubmVyVHlwZTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIHJlYWRvbmx5KGlubmVyVHlwZSkge1xuICAgIHJldHVybiBuZXcgWm9kUmVhZG9ubHkoe1xuICAgICAgICB0eXBlOiBcInJlYWRvbmx5XCIsXG4gICAgICAgIGlubmVyVHlwZTogaW5uZXJUeXBlLFxuICAgIH0pO1xufVxuZXhwb3J0IGNvbnN0IFpvZFRlbXBsYXRlTGl0ZXJhbCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RUZW1wbGF0ZUxpdGVyYWxcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGNvcmUuJFpvZFRlbXBsYXRlTGl0ZXJhbC5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBmdW5jdGlvbiB0ZW1wbGF0ZUxpdGVyYWwocGFydHMsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgWm9kVGVtcGxhdGVMaXRlcmFsKHtcbiAgICAgICAgdHlwZTogXCJ0ZW1wbGF0ZV9saXRlcmFsXCIsXG4gICAgICAgIHBhcnRzLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGNvbnN0IFpvZExhenkgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kTGF6eVwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY29yZS4kWm9kTGF6eS5pbml0KGluc3QsIGRlZik7XG4gICAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC51bndyYXAgPSAoKSA9PiBpbnN0Ll96b2QuZGVmLmdldHRlcigpO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gbGF6eShnZXR0ZXIpIHtcbiAgICByZXR1cm4gbmV3IFpvZExhenkoe1xuICAgICAgICB0eXBlOiBcImxhenlcIixcbiAgICAgICAgZ2V0dGVyOiBnZXR0ZXIsXG4gICAgfSk7XG59XG5leHBvcnQgY29uc3QgWm9kUHJvbWlzZSA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCJab2RQcm9taXNlXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjb3JlLiRab2RQcm9taXNlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0LnVud3JhcCA9ICgpID0+IGluc3QuX3pvZC5kZWYuaW5uZXJUeXBlO1xufSk7XG5leHBvcnQgZnVuY3Rpb24gcHJvbWlzZShpbm5lclR5cGUpIHtcbiAgICByZXR1cm4gbmV3IFpvZFByb21pc2Uoe1xuICAgICAgICB0eXBlOiBcInByb21pc2VcIixcbiAgICAgICAgaW5uZXJUeXBlOiBpbm5lclR5cGUsXG4gICAgfSk7XG59XG5leHBvcnQgY29uc3QgWm9kRnVuY3Rpb24gPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiWm9kRnVuY3Rpb25cIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGNvcmUuJFpvZEZ1bmN0aW9uLmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIF9mdW5jdGlvbihwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IFpvZEZ1bmN0aW9uKHtcbiAgICAgICAgdHlwZTogXCJmdW5jdGlvblwiLFxuICAgICAgICBpbnB1dDogQXJyYXkuaXNBcnJheShwYXJhbXM/LmlucHV0KSA/IHR1cGxlKHBhcmFtcz8uaW5wdXQpIDogKHBhcmFtcz8uaW5wdXQgPz8gYXJyYXkodW5rbm93bigpKSksXG4gICAgICAgIG91dHB1dDogcGFyYW1zPy5vdXRwdXQgPz8gdW5rbm93bigpLFxuICAgIH0pO1xufVxuZXhwb3J0IHsgX2Z1bmN0aW9uIGFzIGZ1bmN0aW9uIH07XG5leHBvcnQgY29uc3QgWm9kQ3VzdG9tID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIlpvZEN1c3RvbVwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY29yZS4kWm9kQ3VzdG9tLmluaXQoaW5zdCwgZGVmKTtcbiAgICBab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbn0pO1xuLy8gY3VzdG9tIGNoZWNrc1xuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrKGZuKSB7XG4gICAgY29uc3QgY2ggPSBuZXcgY29yZS4kWm9kQ2hlY2soe1xuICAgICAgICBjaGVjazogXCJjdXN0b21cIixcbiAgICAgICAgLy8gLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbiAgICBjaC5fem9kLmNoZWNrID0gZm47XG4gICAgcmV0dXJuIGNoO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGN1c3RvbShmbiwgX3BhcmFtcykge1xuICAgIHJldHVybiBjb3JlLl9jdXN0b20oWm9kQ3VzdG9tLCBmbiA/PyAoKCkgPT4gdHJ1ZSksIF9wYXJhbXMpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlZmluZShmbiwgX3BhcmFtcyA9IHt9KSB7XG4gICAgcmV0dXJuIGNvcmUuX3JlZmluZShab2RDdXN0b20sIGZuLCBfcGFyYW1zKTtcbn1cbi8vIHN1cGVyUmVmaW5lXG5leHBvcnQgZnVuY3Rpb24gc3VwZXJSZWZpbmUoZm4pIHtcbiAgICByZXR1cm4gY29yZS5fc3VwZXJSZWZpbmUoZm4pO1xufVxuZnVuY3Rpb24gX2luc3RhbmNlb2YoY2xzLCBwYXJhbXMgPSB7XG4gICAgZXJyb3I6IGBJbnB1dCBub3QgaW5zdGFuY2Ugb2YgJHtjbHMubmFtZX1gLFxufSkge1xuICAgIGNvbnN0IGluc3QgPSBuZXcgWm9kQ3VzdG9tKHtcbiAgICAgICAgdHlwZTogXCJjdXN0b21cIixcbiAgICAgICAgY2hlY2s6IFwiY3VzdG9tXCIsXG4gICAgICAgIGZuOiAoZGF0YSkgPT4gZGF0YSBpbnN0YW5jZW9mIGNscyxcbiAgICAgICAgYWJvcnQ6IHRydWUsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG4gICAgaW5zdC5fem9kLmJhZy5DbGFzcyA9IGNscztcbiAgICByZXR1cm4gaW5zdDtcbn1cbmV4cG9ydCB7IF9pbnN0YW5jZW9mIGFzIGluc3RhbmNlb2YgfTtcbi8vIHN0cmluZ2Jvb2xcbmV4cG9ydCBjb25zdCBzdHJpbmdib29sID0gKC4uLmFyZ3MpID0+IGNvcmUuX3N0cmluZ2Jvb2woe1xuICAgIENvZGVjOiBab2RDb2RlYyxcbiAgICBCb29sZWFuOiBab2RCb29sZWFuLFxuICAgIFN0cmluZzogWm9kU3RyaW5nLFxufSwgLi4uYXJncyk7XG5leHBvcnQgZnVuY3Rpb24ganNvbihwYXJhbXMpIHtcbiAgICBjb25zdCBqc29uU2NoZW1hID0gbGF6eSgoKSA9PiB7XG4gICAgICAgIHJldHVybiB1bmlvbihbc3RyaW5nKHBhcmFtcyksIG51bWJlcigpLCBib29sZWFuKCksIF9udWxsKCksIGFycmF5KGpzb25TY2hlbWEpLCByZWNvcmQoc3RyaW5nKCksIGpzb25TY2hlbWEpXSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGpzb25TY2hlbWE7XG59XG4vLyBwcmVwcm9jZXNzXG4vLyAvKiogQGRlcHJlY2F0ZWQgVXNlIGB6LnBpcGUoKWAgYW5kIGB6LnRyYW5zZm9ybSgpYCBpbnN0ZWFkLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHByZXByb2Nlc3MoZm4sIHNjaGVtYSkge1xuICAgIHJldHVybiBwaXBlKHRyYW5zZm9ybShmbiksIHNjaGVtYSk7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/node_modules/zod/v4/classic/schemas.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/api.js":
/*!******************************************************************!*\
  !*** ./node_modules/better-auth/node_modules/zod/v4/core/api.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TimePrecision: () => (/* binding */ TimePrecision),\n/* harmony export */   _any: () => (/* binding */ _any),\n/* harmony export */   _array: () => (/* binding */ _array),\n/* harmony export */   _base64: () => (/* binding */ _base64),\n/* harmony export */   _base64url: () => (/* binding */ _base64url),\n/* harmony export */   _bigint: () => (/* binding */ _bigint),\n/* harmony export */   _boolean: () => (/* binding */ _boolean),\n/* harmony export */   _catch: () => (/* binding */ _catch),\n/* harmony export */   _check: () => (/* binding */ _check),\n/* harmony export */   _cidrv4: () => (/* binding */ _cidrv4),\n/* harmony export */   _cidrv6: () => (/* binding */ _cidrv6),\n/* harmony export */   _coercedBigint: () => (/* binding */ _coercedBigint),\n/* harmony export */   _coercedBoolean: () => (/* binding */ _coercedBoolean),\n/* harmony export */   _coercedDate: () => (/* binding */ _coercedDate),\n/* harmony export */   _coercedNumber: () => (/* binding */ _coercedNumber),\n/* harmony export */   _coercedString: () => (/* binding */ _coercedString),\n/* harmony export */   _cuid: () => (/* binding */ _cuid),\n/* harmony export */   _cuid2: () => (/* binding */ _cuid2),\n/* harmony export */   _custom: () => (/* binding */ _custom),\n/* harmony export */   _date: () => (/* binding */ _date),\n/* harmony export */   _default: () => (/* binding */ _default),\n/* harmony export */   _discriminatedUnion: () => (/* binding */ _discriminatedUnion),\n/* harmony export */   _e164: () => (/* binding */ _e164),\n/* harmony export */   _email: () => (/* binding */ _email),\n/* harmony export */   _emoji: () => (/* binding */ _emoji),\n/* harmony export */   _endsWith: () => (/* binding */ _endsWith),\n/* harmony export */   _enum: () => (/* binding */ _enum),\n/* harmony export */   _file: () => (/* binding */ _file),\n/* harmony export */   _float32: () => (/* binding */ _float32),\n/* harmony export */   _float64: () => (/* binding */ _float64),\n/* harmony export */   _gt: () => (/* binding */ _gt),\n/* harmony export */   _gte: () => (/* binding */ _gte),\n/* harmony export */   _guid: () => (/* binding */ _guid),\n/* harmony export */   _includes: () => (/* binding */ _includes),\n/* harmony export */   _int: () => (/* binding */ _int),\n/* harmony export */   _int32: () => (/* binding */ _int32),\n/* harmony export */   _int64: () => (/* binding */ _int64),\n/* harmony export */   _intersection: () => (/* binding */ _intersection),\n/* harmony export */   _ipv4: () => (/* binding */ _ipv4),\n/* harmony export */   _ipv6: () => (/* binding */ _ipv6),\n/* harmony export */   _isoDate: () => (/* binding */ _isoDate),\n/* harmony export */   _isoDateTime: () => (/* binding */ _isoDateTime),\n/* harmony export */   _isoDuration: () => (/* binding */ _isoDuration),\n/* harmony export */   _isoTime: () => (/* binding */ _isoTime),\n/* harmony export */   _jwt: () => (/* binding */ _jwt),\n/* harmony export */   _ksuid: () => (/* binding */ _ksuid),\n/* harmony export */   _lazy: () => (/* binding */ _lazy),\n/* harmony export */   _length: () => (/* binding */ _length),\n/* harmony export */   _literal: () => (/* binding */ _literal),\n/* harmony export */   _lowercase: () => (/* binding */ _lowercase),\n/* harmony export */   _lt: () => (/* binding */ _lt),\n/* harmony export */   _lte: () => (/* binding */ _lte),\n/* harmony export */   _map: () => (/* binding */ _map),\n/* harmony export */   _max: () => (/* binding */ _lte),\n/* harmony export */   _maxLength: () => (/* binding */ _maxLength),\n/* harmony export */   _maxSize: () => (/* binding */ _maxSize),\n/* harmony export */   _mime: () => (/* binding */ _mime),\n/* harmony export */   _min: () => (/* binding */ _gte),\n/* harmony export */   _minLength: () => (/* binding */ _minLength),\n/* harmony export */   _minSize: () => (/* binding */ _minSize),\n/* harmony export */   _multipleOf: () => (/* binding */ _multipleOf),\n/* harmony export */   _nan: () => (/* binding */ _nan),\n/* harmony export */   _nanoid: () => (/* binding */ _nanoid),\n/* harmony export */   _nativeEnum: () => (/* binding */ _nativeEnum),\n/* harmony export */   _negative: () => (/* binding */ _negative),\n/* harmony export */   _never: () => (/* binding */ _never),\n/* harmony export */   _nonnegative: () => (/* binding */ _nonnegative),\n/* harmony export */   _nonoptional: () => (/* binding */ _nonoptional),\n/* harmony export */   _nonpositive: () => (/* binding */ _nonpositive),\n/* harmony export */   _normalize: () => (/* binding */ _normalize),\n/* harmony export */   _null: () => (/* binding */ _null),\n/* harmony export */   _nullable: () => (/* binding */ _nullable),\n/* harmony export */   _number: () => (/* binding */ _number),\n/* harmony export */   _optional: () => (/* binding */ _optional),\n/* harmony export */   _overwrite: () => (/* binding */ _overwrite),\n/* harmony export */   _pipe: () => (/* binding */ _pipe),\n/* harmony export */   _positive: () => (/* binding */ _positive),\n/* harmony export */   _promise: () => (/* binding */ _promise),\n/* harmony export */   _property: () => (/* binding */ _property),\n/* harmony export */   _readonly: () => (/* binding */ _readonly),\n/* harmony export */   _record: () => (/* binding */ _record),\n/* harmony export */   _refine: () => (/* binding */ _refine),\n/* harmony export */   _regex: () => (/* binding */ _regex),\n/* harmony export */   _set: () => (/* binding */ _set),\n/* harmony export */   _size: () => (/* binding */ _size),\n/* harmony export */   _startsWith: () => (/* binding */ _startsWith),\n/* harmony export */   _string: () => (/* binding */ _string),\n/* harmony export */   _stringFormat: () => (/* binding */ _stringFormat),\n/* harmony export */   _stringbool: () => (/* binding */ _stringbool),\n/* harmony export */   _success: () => (/* binding */ _success),\n/* harmony export */   _superRefine: () => (/* binding */ _superRefine),\n/* harmony export */   _symbol: () => (/* binding */ _symbol),\n/* harmony export */   _templateLiteral: () => (/* binding */ _templateLiteral),\n/* harmony export */   _toLowerCase: () => (/* binding */ _toLowerCase),\n/* harmony export */   _toUpperCase: () => (/* binding */ _toUpperCase),\n/* harmony export */   _transform: () => (/* binding */ _transform),\n/* harmony export */   _trim: () => (/* binding */ _trim),\n/* harmony export */   _tuple: () => (/* binding */ _tuple),\n/* harmony export */   _uint32: () => (/* binding */ _uint32),\n/* harmony export */   _uint64: () => (/* binding */ _uint64),\n/* harmony export */   _ulid: () => (/* binding */ _ulid),\n/* harmony export */   _undefined: () => (/* binding */ _undefined),\n/* harmony export */   _union: () => (/* binding */ _union),\n/* harmony export */   _unknown: () => (/* binding */ _unknown),\n/* harmony export */   _uppercase: () => (/* binding */ _uppercase),\n/* harmony export */   _url: () => (/* binding */ _url),\n/* harmony export */   _uuid: () => (/* binding */ _uuid),\n/* harmony export */   _uuidv4: () => (/* binding */ _uuidv4),\n/* harmony export */   _uuidv6: () => (/* binding */ _uuidv6),\n/* harmony export */   _uuidv7: () => (/* binding */ _uuidv7),\n/* harmony export */   _void: () => (/* binding */ _void),\n/* harmony export */   _xid: () => (/* binding */ _xid)\n/* harmony export */ });\n/* harmony import */ var _checks_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./checks.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/checks.js\");\n/* harmony import */ var _schemas_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./schemas.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/schemas.js\");\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./util.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/util.js\");\n\n\n\nfunction _string(Class, params) {\n    return new Class({\n        type: \"string\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _coercedString(Class, params) {\n    return new Class({\n        type: \"string\",\n        coerce: true,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _email(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"email\",\n        check: \"string_format\",\n        abort: false,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _guid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"guid\",\n        check: \"string_format\",\n        abort: false,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _uuid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _uuidv4(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        version: \"v4\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _uuidv6(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        version: \"v6\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _uuidv7(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        version: \"v7\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _url(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"url\",\n        check: \"string_format\",\n        abort: false,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _emoji(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"emoji\",\n        check: \"string_format\",\n        abort: false,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _nanoid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"nanoid\",\n        check: \"string_format\",\n        abort: false,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _cuid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cuid\",\n        check: \"string_format\",\n        abort: false,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _cuid2(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cuid2\",\n        check: \"string_format\",\n        abort: false,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _ulid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ulid\",\n        check: \"string_format\",\n        abort: false,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _xid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"xid\",\n        check: \"string_format\",\n        abort: false,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _ksuid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ksuid\",\n        check: \"string_format\",\n        abort: false,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _ipv4(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ipv4\",\n        check: \"string_format\",\n        abort: false,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _ipv6(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ipv6\",\n        check: \"string_format\",\n        abort: false,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _cidrv4(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cidrv4\",\n        check: \"string_format\",\n        abort: false,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _cidrv6(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cidrv6\",\n        check: \"string_format\",\n        abort: false,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _base64(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"base64\",\n        check: \"string_format\",\n        abort: false,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _base64url(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"base64url\",\n        check: \"string_format\",\n        abort: false,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _e164(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"e164\",\n        check: \"string_format\",\n        abort: false,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _jwt(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"jwt\",\n        check: \"string_format\",\n        abort: false,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nconst TimePrecision = {\n    Any: null,\n    Minute: -1,\n    Second: 0,\n    Millisecond: 3,\n    Microsecond: 6,\n};\nfunction _isoDateTime(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"datetime\",\n        check: \"string_format\",\n        offset: false,\n        local: false,\n        precision: null,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _isoDate(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"date\",\n        check: \"string_format\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _isoTime(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"time\",\n        check: \"string_format\",\n        precision: null,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _isoDuration(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"duration\",\n        check: \"string_format\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _number(Class, params) {\n    return new Class({\n        type: \"number\",\n        checks: [],\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _coercedNumber(Class, params) {\n    return new Class({\n        type: \"number\",\n        coerce: true,\n        checks: [],\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _int(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"safeint\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _float32(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"float32\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _float64(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"float64\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _int32(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"int32\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _uint32(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"uint32\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _boolean(Class, params) {\n    return new Class({\n        type: \"boolean\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _coercedBoolean(Class, params) {\n    return new Class({\n        type: \"boolean\",\n        coerce: true,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _bigint(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _coercedBigint(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        coerce: true,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _int64(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        check: \"bigint_format\",\n        abort: false,\n        format: \"int64\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _uint64(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        check: \"bigint_format\",\n        abort: false,\n        format: \"uint64\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _symbol(Class, params) {\n    return new Class({\n        type: \"symbol\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _undefined(Class, params) {\n    return new Class({\n        type: \"undefined\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _null(Class, params) {\n    return new Class({\n        type: \"null\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _any(Class) {\n    return new Class({\n        type: \"any\",\n    });\n}\nfunction _unknown(Class) {\n    return new Class({\n        type: \"unknown\",\n    });\n}\nfunction _never(Class, params) {\n    return new Class({\n        type: \"never\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _void(Class, params) {\n    return new Class({\n        type: \"void\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _date(Class, params) {\n    return new Class({\n        type: \"date\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _coercedDate(Class, params) {\n    return new Class({\n        type: \"date\",\n        coerce: true,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _nan(Class, params) {\n    return new Class({\n        type: \"nan\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _lt(value, params) {\n    return new _checks_js__WEBPACK_IMPORTED_MODULE_1__.$ZodCheckLessThan({\n        check: \"less_than\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n        value,\n        inclusive: false,\n    });\n}\nfunction _lte(value, params) {\n    return new _checks_js__WEBPACK_IMPORTED_MODULE_1__.$ZodCheckLessThan({\n        check: \"less_than\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n        value,\n        inclusive: true,\n    });\n}\n\nfunction _gt(value, params) {\n    return new _checks_js__WEBPACK_IMPORTED_MODULE_1__.$ZodCheckGreaterThan({\n        check: \"greater_than\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n        value,\n        inclusive: false,\n    });\n}\nfunction _gte(value, params) {\n    return new _checks_js__WEBPACK_IMPORTED_MODULE_1__.$ZodCheckGreaterThan({\n        check: \"greater_than\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n        value,\n        inclusive: true,\n    });\n}\n\nfunction _positive(params) {\n    return _gt(0, params);\n}\n// negative\nfunction _negative(params) {\n    return _lt(0, params);\n}\n// nonpositive\nfunction _nonpositive(params) {\n    return _lte(0, params);\n}\n// nonnegative\nfunction _nonnegative(params) {\n    return _gte(0, params);\n}\nfunction _multipleOf(value, params) {\n    return new _checks_js__WEBPACK_IMPORTED_MODULE_1__.$ZodCheckMultipleOf({\n        check: \"multiple_of\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n        value,\n    });\n}\nfunction _maxSize(maximum, params) {\n    return new _checks_js__WEBPACK_IMPORTED_MODULE_1__.$ZodCheckMaxSize({\n        check: \"max_size\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n        maximum,\n    });\n}\nfunction _minSize(minimum, params) {\n    return new _checks_js__WEBPACK_IMPORTED_MODULE_1__.$ZodCheckMinSize({\n        check: \"min_size\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n        minimum,\n    });\n}\nfunction _size(size, params) {\n    return new _checks_js__WEBPACK_IMPORTED_MODULE_1__.$ZodCheckSizeEquals({\n        check: \"size_equals\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n        size,\n    });\n}\nfunction _maxLength(maximum, params) {\n    const ch = new _checks_js__WEBPACK_IMPORTED_MODULE_1__.$ZodCheckMaxLength({\n        check: \"max_length\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n        maximum,\n    });\n    return ch;\n}\nfunction _minLength(minimum, params) {\n    return new _checks_js__WEBPACK_IMPORTED_MODULE_1__.$ZodCheckMinLength({\n        check: \"min_length\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n        minimum,\n    });\n}\nfunction _length(length, params) {\n    return new _checks_js__WEBPACK_IMPORTED_MODULE_1__.$ZodCheckLengthEquals({\n        check: \"length_equals\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n        length,\n    });\n}\nfunction _regex(pattern, params) {\n    return new _checks_js__WEBPACK_IMPORTED_MODULE_1__.$ZodCheckRegex({\n        check: \"string_format\",\n        format: \"regex\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n        pattern,\n    });\n}\nfunction _lowercase(params) {\n    return new _checks_js__WEBPACK_IMPORTED_MODULE_1__.$ZodCheckLowerCase({\n        check: \"string_format\",\n        format: \"lowercase\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _uppercase(params) {\n    return new _checks_js__WEBPACK_IMPORTED_MODULE_1__.$ZodCheckUpperCase({\n        check: \"string_format\",\n        format: \"uppercase\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _includes(includes, params) {\n    return new _checks_js__WEBPACK_IMPORTED_MODULE_1__.$ZodCheckIncludes({\n        check: \"string_format\",\n        format: \"includes\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n        includes,\n    });\n}\nfunction _startsWith(prefix, params) {\n    return new _checks_js__WEBPACK_IMPORTED_MODULE_1__.$ZodCheckStartsWith({\n        check: \"string_format\",\n        format: \"starts_with\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n        prefix,\n    });\n}\nfunction _endsWith(suffix, params) {\n    return new _checks_js__WEBPACK_IMPORTED_MODULE_1__.$ZodCheckEndsWith({\n        check: \"string_format\",\n        format: \"ends_with\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n        suffix,\n    });\n}\nfunction _property(property, schema, params) {\n    return new _checks_js__WEBPACK_IMPORTED_MODULE_1__.$ZodCheckProperty({\n        check: \"property\",\n        property,\n        schema,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _mime(types, params) {\n    return new _checks_js__WEBPACK_IMPORTED_MODULE_1__.$ZodCheckMimeType({\n        check: \"mime_type\",\n        mime: types,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _overwrite(tx) {\n    return new _checks_js__WEBPACK_IMPORTED_MODULE_1__.$ZodCheckOverwrite({\n        check: \"overwrite\",\n        tx,\n    });\n}\n// normalize\nfunction _normalize(form) {\n    return _overwrite((input) => input.normalize(form));\n}\n// trim\nfunction _trim() {\n    return _overwrite((input) => input.trim());\n}\n// toLowerCase\nfunction _toLowerCase() {\n    return _overwrite((input) => input.toLowerCase());\n}\n// toUpperCase\nfunction _toUpperCase() {\n    return _overwrite((input) => input.toUpperCase());\n}\nfunction _array(Class, element, params) {\n    return new Class({\n        type: \"array\",\n        element,\n        // get element() {\n        //   return element;\n        // },\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _union(Class, options, params) {\n    return new Class({\n        type: \"union\",\n        options,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _discriminatedUnion(Class, discriminator, options, params) {\n    return new Class({\n        type: \"union\",\n        options,\n        discriminator,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _intersection(Class, left, right) {\n    return new Class({\n        type: \"intersection\",\n        left,\n        right,\n    });\n}\n// export function _tuple(\n//   Class: util.SchemaClass<schemas.$ZodTuple>,\n//   items: [],\n//   params?: string | $ZodTupleParams\n// ): schemas.$ZodTuple<[], null>;\nfunction _tuple(Class, items, _paramsOrRest, _params) {\n    const hasRest = _paramsOrRest instanceof _schemas_js__WEBPACK_IMPORTED_MODULE_2__.$ZodType;\n    const params = hasRest ? _params : _paramsOrRest;\n    const rest = hasRest ? _paramsOrRest : null;\n    return new Class({\n        type: \"tuple\",\n        items,\n        rest,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _record(Class, keyType, valueType, params) {\n    return new Class({\n        type: \"record\",\n        keyType,\n        valueType,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _map(Class, keyType, valueType, params) {\n    return new Class({\n        type: \"map\",\n        keyType,\n        valueType,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _set(Class, valueType, params) {\n    return new Class({\n        type: \"set\",\n        valueType,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _enum(Class, values, params) {\n    const entries = Array.isArray(values) ? Object.fromEntries(values.map((v) => [v, v])) : values;\n    // if (Array.isArray(values)) {\n    //   for (const value of values) {\n    //     entries[value] = value;\n    //   }\n    // } else {\n    //   Object.assign(entries, values);\n    // }\n    // const entries: util.EnumLike = {};\n    // for (const val of values) {\n    //   entries[val] = val;\n    // }\n    return new Class({\n        type: \"enum\",\n        entries,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\n/** @deprecated This API has been merged into `z.enum()`. Use `z.enum()` instead.\n *\n * ```ts\n * enum Colors { red, green, blue }\n * z.enum(Colors);\n * ```\n */\nfunction _nativeEnum(Class, entries, params) {\n    return new Class({\n        type: \"enum\",\n        entries,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _literal(Class, value, params) {\n    return new Class({\n        type: \"literal\",\n        values: Array.isArray(value) ? value : [value],\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _file(Class, params) {\n    return new Class({\n        type: \"file\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _transform(Class, fn) {\n    return new Class({\n        type: \"transform\",\n        transform: fn,\n    });\n}\nfunction _optional(Class, innerType) {\n    return new Class({\n        type: \"optional\",\n        innerType,\n    });\n}\nfunction _nullable(Class, innerType) {\n    return new Class({\n        type: \"nullable\",\n        innerType,\n    });\n}\nfunction _default(Class, innerType, defaultValue) {\n    return new Class({\n        type: \"default\",\n        innerType,\n        get defaultValue() {\n            return typeof defaultValue === \"function\" ? defaultValue() : _util_js__WEBPACK_IMPORTED_MODULE_0__.shallowClone(defaultValue);\n        },\n    });\n}\nfunction _nonoptional(Class, innerType, params) {\n    return new Class({\n        type: \"nonoptional\",\n        innerType,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _success(Class, innerType) {\n    return new Class({\n        type: \"success\",\n        innerType,\n    });\n}\nfunction _catch(Class, innerType, catchValue) {\n    return new Class({\n        type: \"catch\",\n        innerType,\n        catchValue: (typeof catchValue === \"function\" ? catchValue : () => catchValue),\n    });\n}\nfunction _pipe(Class, in_, out) {\n    return new Class({\n        type: \"pipe\",\n        in: in_,\n        out,\n    });\n}\nfunction _readonly(Class, innerType) {\n    return new Class({\n        type: \"readonly\",\n        innerType,\n    });\n}\nfunction _templateLiteral(Class, parts, params) {\n    return new Class({\n        type: \"template_literal\",\n        parts,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n}\nfunction _lazy(Class, getter) {\n    return new Class({\n        type: \"lazy\",\n        getter,\n    });\n}\nfunction _promise(Class, innerType) {\n    return new Class({\n        type: \"promise\",\n        innerType,\n    });\n}\nfunction _custom(Class, fn, _params) {\n    const norm = _util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(_params);\n    norm.abort ?? (norm.abort = true); // default to abort:false\n    const schema = new Class({\n        type: \"custom\",\n        check: \"custom\",\n        fn: fn,\n        ...norm,\n    });\n    return schema;\n}\n// same as _custom but defaults to abort:false\nfunction _refine(Class, fn, _params) {\n    const schema = new Class({\n        type: \"custom\",\n        check: \"custom\",\n        fn: fn,\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(_params),\n    });\n    return schema;\n}\nfunction _superRefine(fn) {\n    const ch = _check((payload) => {\n        payload.addIssue = (issue) => {\n            if (typeof issue === \"string\") {\n                payload.issues.push(_util_js__WEBPACK_IMPORTED_MODULE_0__.issue(issue, payload.value, ch._zod.def));\n            }\n            else {\n                // for Zod 3 backwards compatibility\n                const _issue = issue;\n                if (_issue.fatal)\n                    _issue.continue = false;\n                _issue.code ?? (_issue.code = \"custom\");\n                _issue.input ?? (_issue.input = payload.value);\n                _issue.inst ?? (_issue.inst = ch);\n                _issue.continue ?? (_issue.continue = !ch._zod.def.abort); // abort is always undefined, so this is always true...\n                payload.issues.push(_util_js__WEBPACK_IMPORTED_MODULE_0__.issue(_issue));\n            }\n        };\n        return fn(payload.value, payload);\n    });\n    return ch;\n}\nfunction _check(fn, params) {\n    const ch = new _checks_js__WEBPACK_IMPORTED_MODULE_1__.$ZodCheck({\n        check: \"custom\",\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(params),\n    });\n    ch._zod.check = fn;\n    return ch;\n}\nfunction _stringbool(Classes, _params) {\n    const params = _util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(_params);\n    let truthyArray = params.truthy ?? [\"true\", \"1\", \"yes\", \"on\", \"y\", \"enabled\"];\n    let falsyArray = params.falsy ?? [\"false\", \"0\", \"no\", \"off\", \"n\", \"disabled\"];\n    if (params.case !== \"sensitive\") {\n        truthyArray = truthyArray.map((v) => (typeof v === \"string\" ? v.toLowerCase() : v));\n        falsyArray = falsyArray.map((v) => (typeof v === \"string\" ? v.toLowerCase() : v));\n    }\n    const truthySet = new Set(truthyArray);\n    const falsySet = new Set(falsyArray);\n    const _Codec = Classes.Codec ?? _schemas_js__WEBPACK_IMPORTED_MODULE_2__.$ZodCodec;\n    const _Boolean = Classes.Boolean ?? _schemas_js__WEBPACK_IMPORTED_MODULE_2__.$ZodBoolean;\n    const _String = Classes.String ?? _schemas_js__WEBPACK_IMPORTED_MODULE_2__.$ZodString;\n    const stringSchema = new _String({ type: \"string\", error: params.error });\n    const booleanSchema = new _Boolean({ type: \"boolean\", error: params.error });\n    const codec = new _Codec({\n        type: \"pipe\",\n        in: stringSchema,\n        out: booleanSchema,\n        transform: ((input, payload) => {\n            let data = input;\n            if (params.case !== \"sensitive\")\n                data = data.toLowerCase();\n            if (truthySet.has(data)) {\n                return true;\n            }\n            else if (falsySet.has(data)) {\n                return false;\n            }\n            else {\n                payload.issues.push({\n                    code: \"invalid_value\",\n                    expected: \"stringbool\",\n                    values: [...truthySet, ...falsySet],\n                    input: payload.value,\n                    inst: codec,\n                    continue: false,\n                });\n                return {};\n            }\n        }),\n        reverseTransform: ((input, _payload) => {\n            if (input === true) {\n                return truthyArray[0] || \"true\";\n            }\n            else {\n                return falsyArray[0] || \"false\";\n            }\n        }),\n        error: params.error,\n    });\n    return codec;\n}\nfunction _stringFormat(Class, format, fnOrRegex, _params = {}) {\n    const params = _util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(_params);\n    const def = {\n        ..._util_js__WEBPACK_IMPORTED_MODULE_0__.normalizeParams(_params),\n        check: \"string_format\",\n        type: \"string\",\n        format,\n        fn: typeof fnOrRegex === \"function\" ? fnOrRegex : (val) => fnOrRegex.test(val),\n        ...params,\n    };\n    if (fnOrRegex instanceof RegExp) {\n        def.pattern = fnOrRegex;\n    }\n    const inst = new Class(def);\n    return inst;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvbm9kZV9tb2R1bGVzL3pvZC92NC9jb3JlL2FwaS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNDO0FBQ0U7QUFDTjtBQUMzQjtBQUNQO0FBQ0E7QUFDQSxXQUFXLHFEQUFvQjtBQUMvQixLQUFLO0FBQ0w7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFdBQVcscURBQW9CO0FBQy9CLEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscURBQW9CO0FBQy9CLEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscURBQW9CO0FBQy9CLEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscURBQW9CO0FBQy9CLEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxxREFBb0I7QUFDL0IsS0FBSztBQUNMO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHFEQUFvQjtBQUMvQixLQUFLO0FBQ0w7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscURBQW9CO0FBQy9CLEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscURBQW9CO0FBQy9CLEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscURBQW9CO0FBQy9CLEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscURBQW9CO0FBQy9CLEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscURBQW9CO0FBQy9CLEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscURBQW9CO0FBQy9CLEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscURBQW9CO0FBQy9CLEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscURBQW9CO0FBQy9CLEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscURBQW9CO0FBQy9CLEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscURBQW9CO0FBQy9CLEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscURBQW9CO0FBQy9CLEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscURBQW9CO0FBQy9CLEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscURBQW9CO0FBQy9CLEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscURBQW9CO0FBQy9CLEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscURBQW9CO0FBQy9CLEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscURBQW9CO0FBQy9CLEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscURBQW9CO0FBQy9CLEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscURBQW9CO0FBQy9CLEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHFEQUFvQjtBQUMvQixLQUFLO0FBQ0w7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHFEQUFvQjtBQUMvQixLQUFLO0FBQ0w7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxxREFBb0I7QUFDL0IsS0FBSztBQUNMO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxXQUFXLHFEQUFvQjtBQUMvQixLQUFLO0FBQ0w7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxxREFBb0I7QUFDL0IsS0FBSztBQUNMO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxxREFBb0I7QUFDL0IsS0FBSztBQUNMO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxxREFBb0I7QUFDL0IsS0FBSztBQUNMO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxxREFBb0I7QUFDL0IsS0FBSztBQUNMO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxxREFBb0I7QUFDL0IsS0FBSztBQUNMO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxxREFBb0I7QUFDL0IsS0FBSztBQUNMO0FBQ087QUFDUDtBQUNBO0FBQ0EsV0FBVyxxREFBb0I7QUFDL0IsS0FBSztBQUNMO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxXQUFXLHFEQUFvQjtBQUMvQixLQUFLO0FBQ0w7QUFDTztBQUNQO0FBQ0E7QUFDQSxXQUFXLHFEQUFvQjtBQUMvQixLQUFLO0FBQ0w7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFdBQVcscURBQW9CO0FBQy9CLEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscURBQW9CO0FB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QUNBO0FBQ0EsMkVBQTJFO0FBQzNFLG9DQUFvQywyQ0FBVTtBQUM5QztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNPO0FBQ1AsbUJBQW1CLGlEQUFnQjtBQUNuQztBQUNBLFdBQVcscURBQW9CO0FBQy9CLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDTztBQUNQLG1CQUFtQixxREFBb0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxrREFBaUI7QUFDckQsd0NBQXdDLG9EQUFtQjtBQUMzRCxzQ0FBc0MsbURBQWtCO0FBQ3hELHVDQUF1QyxxQ0FBcUM7QUFDNUUseUNBQXlDLHNDQUFzQztBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDTyw2REFBNkQ7QUFDcEUsbUJBQW1CLHFEQUFvQjtBQUN2QztBQUNBLFdBQVcscURBQW9CO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhbWFhblxcT25lRHJpdmVcXERlc2t0b3BcXEthbmRpZF8yXFxOZXcgZm9sZGVyICgyKVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcbm9kZV9tb2R1bGVzXFx6b2RcXHY0XFxjb3JlXFxhcGkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgY2hlY2tzIGZyb20gXCIuL2NoZWNrcy5qc1wiO1xuaW1wb3J0ICogYXMgc2NoZW1hcyBmcm9tIFwiLi9zY2hlbWFzLmpzXCI7XG5pbXBvcnQgKiBhcyB1dGlsIGZyb20gXCIuL3V0aWwuanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBfc3RyaW5nKENsYXNzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfY29lcmNlZFN0cmluZyhDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgIGNvZXJjZTogdHJ1ZSxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfZW1haWwoQ2xhc3MsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICBmb3JtYXQ6IFwiZW1haWxcIixcbiAgICAgICAgY2hlY2s6IFwic3RyaW5nX2Zvcm1hdFwiLFxuICAgICAgICBhYm9ydDogZmFsc2UsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX2d1aWQoQ2xhc3MsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICBmb3JtYXQ6IFwiZ3VpZFwiLFxuICAgICAgICBjaGVjazogXCJzdHJpbmdfZm9ybWF0XCIsXG4gICAgICAgIGFib3J0OiBmYWxzZSxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfdXVpZChDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgIGZvcm1hdDogXCJ1dWlkXCIsXG4gICAgICAgIGNoZWNrOiBcInN0cmluZ19mb3JtYXRcIixcbiAgICAgICAgYWJvcnQ6IGZhbHNlLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF91dWlkdjQoQ2xhc3MsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICBmb3JtYXQ6IFwidXVpZFwiLFxuICAgICAgICBjaGVjazogXCJzdHJpbmdfZm9ybWF0XCIsXG4gICAgICAgIGFib3J0OiBmYWxzZSxcbiAgICAgICAgdmVyc2lvbjogXCJ2NFwiLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF91dWlkdjYoQ2xhc3MsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICBmb3JtYXQ6IFwidXVpZFwiLFxuICAgICAgICBjaGVjazogXCJzdHJpbmdfZm9ybWF0XCIsXG4gICAgICAgIGFib3J0OiBmYWxzZSxcbiAgICAgICAgdmVyc2lvbjogXCJ2NlwiLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF91dWlkdjcoQ2xhc3MsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICBmb3JtYXQ6IFwidXVpZFwiLFxuICAgICAgICBjaGVjazogXCJzdHJpbmdfZm9ybWF0XCIsXG4gICAgICAgIGFib3J0OiBmYWxzZSxcbiAgICAgICAgdmVyc2lvbjogXCJ2N1wiLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF91cmwoQ2xhc3MsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICBmb3JtYXQ6IFwidXJsXCIsXG4gICAgICAgIGNoZWNrOiBcInN0cmluZ19mb3JtYXRcIixcbiAgICAgICAgYWJvcnQ6IGZhbHNlLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9lbW9qaShDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgIGZvcm1hdDogXCJlbW9qaVwiLFxuICAgICAgICBjaGVjazogXCJzdHJpbmdfZm9ybWF0XCIsXG4gICAgICAgIGFib3J0OiBmYWxzZSxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfbmFub2lkKENsYXNzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgZm9ybWF0OiBcIm5hbm9pZFwiLFxuICAgICAgICBjaGVjazogXCJzdHJpbmdfZm9ybWF0XCIsXG4gICAgICAgIGFib3J0OiBmYWxzZSxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfY3VpZChDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgIGZvcm1hdDogXCJjdWlkXCIsXG4gICAgICAgIGNoZWNrOiBcInN0cmluZ19mb3JtYXRcIixcbiAgICAgICAgYWJvcnQ6IGZhbHNlLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9jdWlkMihDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgIGZvcm1hdDogXCJjdWlkMlwiLFxuICAgICAgICBjaGVjazogXCJzdHJpbmdfZm9ybWF0XCIsXG4gICAgICAgIGFib3J0OiBmYWxzZSxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfdWxpZChDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgIGZvcm1hdDogXCJ1bGlkXCIsXG4gICAgICAgIGNoZWNrOiBcInN0cmluZ19mb3JtYXRcIixcbiAgICAgICAgYWJvcnQ6IGZhbHNlLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF94aWQoQ2xhc3MsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICBmb3JtYXQ6IFwieGlkXCIsXG4gICAgICAgIGNoZWNrOiBcInN0cmluZ19mb3JtYXRcIixcbiAgICAgICAgYWJvcnQ6IGZhbHNlLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9rc3VpZChDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgIGZvcm1hdDogXCJrc3VpZFwiLFxuICAgICAgICBjaGVjazogXCJzdHJpbmdfZm9ybWF0XCIsXG4gICAgICAgIGFib3J0OiBmYWxzZSxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfaXB2NChDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgIGZvcm1hdDogXCJpcHY0XCIsXG4gICAgICAgIGNoZWNrOiBcInN0cmluZ19mb3JtYXRcIixcbiAgICAgICAgYWJvcnQ6IGZhbHNlLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9pcHY2KENsYXNzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgZm9ybWF0OiBcImlwdjZcIixcbiAgICAgICAgY2hlY2s6IFwic3RyaW5nX2Zvcm1hdFwiLFxuICAgICAgICBhYm9ydDogZmFsc2UsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX2NpZHJ2NChDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgIGZvcm1hdDogXCJjaWRydjRcIixcbiAgICAgICAgY2hlY2s6IFwic3RyaW5nX2Zvcm1hdFwiLFxuICAgICAgICBhYm9ydDogZmFsc2UsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX2NpZHJ2NihDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgIGZvcm1hdDogXCJjaWRydjZcIixcbiAgICAgICAgY2hlY2s6IFwic3RyaW5nX2Zvcm1hdFwiLFxuICAgICAgICBhYm9ydDogZmFsc2UsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX2Jhc2U2NChDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgIGZvcm1hdDogXCJiYXNlNjRcIixcbiAgICAgICAgY2hlY2s6IFwic3RyaW5nX2Zvcm1hdFwiLFxuICAgICAgICBhYm9ydDogZmFsc2UsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX2Jhc2U2NHVybChDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgIGZvcm1hdDogXCJiYXNlNjR1cmxcIixcbiAgICAgICAgY2hlY2s6IFwic3RyaW5nX2Zvcm1hdFwiLFxuICAgICAgICBhYm9ydDogZmFsc2UsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX2UxNjQoQ2xhc3MsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICBmb3JtYXQ6IFwiZTE2NFwiLFxuICAgICAgICBjaGVjazogXCJzdHJpbmdfZm9ybWF0XCIsXG4gICAgICAgIGFib3J0OiBmYWxzZSxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfand0KENsYXNzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgZm9ybWF0OiBcImp3dFwiLFxuICAgICAgICBjaGVjazogXCJzdHJpbmdfZm9ybWF0XCIsXG4gICAgICAgIGFib3J0OiBmYWxzZSxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBjb25zdCBUaW1lUHJlY2lzaW9uID0ge1xuICAgIEFueTogbnVsbCxcbiAgICBNaW51dGU6IC0xLFxuICAgIFNlY29uZDogMCxcbiAgICBNaWxsaXNlY29uZDogMyxcbiAgICBNaWNyb3NlY29uZDogNixcbn07XG5leHBvcnQgZnVuY3Rpb24gX2lzb0RhdGVUaW1lKENsYXNzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgZm9ybWF0OiBcImRhdGV0aW1lXCIsXG4gICAgICAgIGNoZWNrOiBcInN0cmluZ19mb3JtYXRcIixcbiAgICAgICAgb2Zmc2V0OiBmYWxzZSxcbiAgICAgICAgbG9jYWw6IGZhbHNlLFxuICAgICAgICBwcmVjaXNpb246IG51bGwsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX2lzb0RhdGUoQ2xhc3MsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICBmb3JtYXQ6IFwiZGF0ZVwiLFxuICAgICAgICBjaGVjazogXCJzdHJpbmdfZm9ybWF0XCIsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX2lzb1RpbWUoQ2xhc3MsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICBmb3JtYXQ6IFwidGltZVwiLFxuICAgICAgICBjaGVjazogXCJzdHJpbmdfZm9ybWF0XCIsXG4gICAgICAgIHByZWNpc2lvbjogbnVsbCxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfaXNvRHVyYXRpb24oQ2xhc3MsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICBmb3JtYXQ6IFwiZHVyYXRpb25cIixcbiAgICAgICAgY2hlY2s6IFwic3RyaW5nX2Zvcm1hdFwiLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9udW1iZXIoQ2xhc3MsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcIm51bWJlclwiLFxuICAgICAgICBjaGVja3M6IFtdLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9jb2VyY2VkTnVtYmVyKENsYXNzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJudW1iZXJcIixcbiAgICAgICAgY29lcmNlOiB0cnVlLFxuICAgICAgICBjaGVja3M6IFtdLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9pbnQoQ2xhc3MsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcIm51bWJlclwiLFxuICAgICAgICBjaGVjazogXCJudW1iZXJfZm9ybWF0XCIsXG4gICAgICAgIGFib3J0OiBmYWxzZSxcbiAgICAgICAgZm9ybWF0OiBcInNhZmVpbnRcIixcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfZmxvYXQzMihDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXG4gICAgICAgIGNoZWNrOiBcIm51bWJlcl9mb3JtYXRcIixcbiAgICAgICAgYWJvcnQ6IGZhbHNlLFxuICAgICAgICBmb3JtYXQ6IFwiZmxvYXQzMlwiLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9mbG9hdDY0KENsYXNzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJudW1iZXJcIixcbiAgICAgICAgY2hlY2s6IFwibnVtYmVyX2Zvcm1hdFwiLFxuICAgICAgICBhYm9ydDogZmFsc2UsXG4gICAgICAgIGZvcm1hdDogXCJmbG9hdDY0XCIsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX2ludDMyKENsYXNzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJudW1iZXJcIixcbiAgICAgICAgY2hlY2s6IFwibnVtYmVyX2Zvcm1hdFwiLFxuICAgICAgICBhYm9ydDogZmFsc2UsXG4gICAgICAgIGZvcm1hdDogXCJpbnQzMlwiLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF91aW50MzIoQ2xhc3MsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcIm51bWJlclwiLFxuICAgICAgICBjaGVjazogXCJudW1iZXJfZm9ybWF0XCIsXG4gICAgICAgIGFib3J0OiBmYWxzZSxcbiAgICAgICAgZm9ybWF0OiBcInVpbnQzMlwiLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9ib29sZWFuKENsYXNzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJib29sZWFuXCIsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX2NvZXJjZWRCb29sZWFuKENsYXNzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJib29sZWFuXCIsXG4gICAgICAgIGNvZXJjZTogdHJ1ZSxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfYmlnaW50KENsYXNzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJiaWdpbnRcIixcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfY29lcmNlZEJpZ2ludChDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwiYmlnaW50XCIsXG4gICAgICAgIGNvZXJjZTogdHJ1ZSxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfaW50NjQoQ2xhc3MsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcImJpZ2ludFwiLFxuICAgICAgICBjaGVjazogXCJiaWdpbnRfZm9ybWF0XCIsXG4gICAgICAgIGFib3J0OiBmYWxzZSxcbiAgICAgICAgZm9ybWF0OiBcImludDY0XCIsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX3VpbnQ2NChDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwiYmlnaW50XCIsXG4gICAgICAgIGNoZWNrOiBcImJpZ2ludF9mb3JtYXRcIixcbiAgICAgICAgYWJvcnQ6IGZhbHNlLFxuICAgICAgICBmb3JtYXQ6IFwidWludDY0XCIsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX3N5bWJvbChDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwic3ltYm9sXCIsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX3VuZGVmaW5lZChDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwidW5kZWZpbmVkXCIsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX251bGwoQ2xhc3MsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcIm51bGxcIixcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfYW55KENsYXNzKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwiYW55XCIsXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX3Vua25vd24oQ2xhc3MpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJ1bmtub3duXCIsXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX25ldmVyKENsYXNzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJuZXZlclwiLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF92b2lkKENsYXNzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJ2b2lkXCIsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX2RhdGUoQ2xhc3MsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcImRhdGVcIixcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfY29lcmNlZERhdGUoQ2xhc3MsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcImRhdGVcIixcbiAgICAgICAgY29lcmNlOiB0cnVlLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9uYW4oQ2xhc3MsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcIm5hblwiLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9sdCh2YWx1ZSwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBjaGVja3MuJFpvZENoZWNrTGVzc1RoYW4oe1xuICAgICAgICBjaGVjazogXCJsZXNzX3RoYW5cIixcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICAgICAgdmFsdWUsXG4gICAgICAgIGluY2x1c2l2ZTogZmFsc2UsXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX2x0ZSh2YWx1ZSwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBjaGVja3MuJFpvZENoZWNrTGVzc1RoYW4oe1xuICAgICAgICBjaGVjazogXCJsZXNzX3RoYW5cIixcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICAgICAgdmFsdWUsXG4gICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICB9KTtcbn1cbmV4cG9ydCB7IFxuLyoqIEBkZXByZWNhdGVkIFVzZSBgei5sdGUoKWAgaW5zdGVhZC4gKi9cbl9sdGUgYXMgX21heCwgfTtcbmV4cG9ydCBmdW5jdGlvbiBfZ3QodmFsdWUsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgY2hlY2tzLiRab2RDaGVja0dyZWF0ZXJUaGFuKHtcbiAgICAgICAgY2hlY2s6IFwiZ3JlYXRlcl90aGFuXCIsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIHZhbHVlLFxuICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9ndGUodmFsdWUsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgY2hlY2tzLiRab2RDaGVja0dyZWF0ZXJUaGFuKHtcbiAgICAgICAgY2hlY2s6IFwiZ3JlYXRlcl90aGFuXCIsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIHZhbHVlLFxuICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgfSk7XG59XG5leHBvcnQgeyBcbi8qKiBAZGVwcmVjYXRlZCBVc2UgYHouZ3RlKClgIGluc3RlYWQuICovXG5fZ3RlIGFzIF9taW4sIH07XG5leHBvcnQgZnVuY3Rpb24gX3Bvc2l0aXZlKHBhcmFtcykge1xuICAgIHJldHVybiBfZ3QoMCwgcGFyYW1zKTtcbn1cbi8vIG5lZ2F0aXZlXG5leHBvcnQgZnVuY3Rpb24gX25lZ2F0aXZlKHBhcmFtcykge1xuICAgIHJldHVybiBfbHQoMCwgcGFyYW1zKTtcbn1cbi8vIG5vbnBvc2l0aXZlXG5leHBvcnQgZnVuY3Rpb24gX25vbnBvc2l0aXZlKHBhcmFtcykge1xuICAgIHJldHVybiBfbHRlKDAsIHBhcmFtcyk7XG59XG4vLyBub25uZWdhdGl2ZVxuZXhwb3J0IGZ1bmN0aW9uIF9ub25uZWdhdGl2ZShwYXJhbXMpIHtcbiAgICByZXR1cm4gX2d0ZSgwLCBwYXJhbXMpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9tdWx0aXBsZU9mKHZhbHVlLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IGNoZWNrcy4kWm9kQ2hlY2tNdWx0aXBsZU9mKHtcbiAgICAgICAgY2hlY2s6IFwibXVsdGlwbGVfb2ZcIixcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICAgICAgdmFsdWUsXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX21heFNpemUobWF4aW11bSwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBjaGVja3MuJFpvZENoZWNrTWF4U2l6ZSh7XG4gICAgICAgIGNoZWNrOiBcIm1heF9zaXplXCIsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIG1heGltdW0sXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX21pblNpemUobWluaW11bSwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBjaGVja3MuJFpvZENoZWNrTWluU2l6ZSh7XG4gICAgICAgIGNoZWNrOiBcIm1pbl9zaXplXCIsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIG1pbmltdW0sXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX3NpemUoc2l6ZSwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBjaGVja3MuJFpvZENoZWNrU2l6ZUVxdWFscyh7XG4gICAgICAgIGNoZWNrOiBcInNpemVfZXF1YWxzXCIsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIHNpemUsXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX21heExlbmd0aChtYXhpbXVtLCBwYXJhbXMpIHtcbiAgICBjb25zdCBjaCA9IG5ldyBjaGVja3MuJFpvZENoZWNrTWF4TGVuZ3RoKHtcbiAgICAgICAgY2hlY2s6IFwibWF4X2xlbmd0aFwiLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgICAgICBtYXhpbXVtLFxuICAgIH0pO1xuICAgIHJldHVybiBjaDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfbWluTGVuZ3RoKG1pbmltdW0sIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgY2hlY2tzLiRab2RDaGVja01pbkxlbmd0aCh7XG4gICAgICAgIGNoZWNrOiBcIm1pbl9sZW5ndGhcIixcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICAgICAgbWluaW11bSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfbGVuZ3RoKGxlbmd0aCwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBjaGVja3MuJFpvZENoZWNrTGVuZ3RoRXF1YWxzKHtcbiAgICAgICAgY2hlY2s6IFwibGVuZ3RoX2VxdWFsc1wiLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgICAgICBsZW5ndGgsXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX3JlZ2V4KHBhdHRlcm4sIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgY2hlY2tzLiRab2RDaGVja1JlZ2V4KHtcbiAgICAgICAgY2hlY2s6IFwic3RyaW5nX2Zvcm1hdFwiLFxuICAgICAgICBmb3JtYXQ6IFwicmVnZXhcIixcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICAgICAgcGF0dGVybixcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfbG93ZXJjYXNlKHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgY2hlY2tzLiRab2RDaGVja0xvd2VyQ2FzZSh7XG4gICAgICAgIGNoZWNrOiBcInN0cmluZ19mb3JtYXRcIixcbiAgICAgICAgZm9ybWF0OiBcImxvd2VyY2FzZVwiLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF91cHBlcmNhc2UocGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBjaGVja3MuJFpvZENoZWNrVXBwZXJDYXNlKHtcbiAgICAgICAgY2hlY2s6IFwic3RyaW5nX2Zvcm1hdFwiLFxuICAgICAgICBmb3JtYXQ6IFwidXBwZXJjYXNlXCIsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX2luY2x1ZGVzKGluY2x1ZGVzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IGNoZWNrcy4kWm9kQ2hlY2tJbmNsdWRlcyh7XG4gICAgICAgIGNoZWNrOiBcInN0cmluZ19mb3JtYXRcIixcbiAgICAgICAgZm9ybWF0OiBcImluY2x1ZGVzXCIsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIGluY2x1ZGVzLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9zdGFydHNXaXRoKHByZWZpeCwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBjaGVja3MuJFpvZENoZWNrU3RhcnRzV2l0aCh7XG4gICAgICAgIGNoZWNrOiBcInN0cmluZ19mb3JtYXRcIixcbiAgICAgICAgZm9ybWF0OiBcInN0YXJ0c193aXRoXCIsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIHByZWZpeCxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfZW5kc1dpdGgoc3VmZml4LCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IGNoZWNrcy4kWm9kQ2hlY2tFbmRzV2l0aCh7XG4gICAgICAgIGNoZWNrOiBcInN0cmluZ19mb3JtYXRcIixcbiAgICAgICAgZm9ybWF0OiBcImVuZHNfd2l0aFwiLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgICAgICBzdWZmaXgsXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX3Byb3BlcnR5KHByb3BlcnR5LCBzY2hlbWEsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgY2hlY2tzLiRab2RDaGVja1Byb3BlcnR5KHtcbiAgICAgICAgY2hlY2s6IFwicHJvcGVydHlcIixcbiAgICAgICAgcHJvcGVydHksXG4gICAgICAgIHNjaGVtYSxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfbWltZSh0eXBlcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBjaGVja3MuJFpvZENoZWNrTWltZVR5cGUoe1xuICAgICAgICBjaGVjazogXCJtaW1lX3R5cGVcIixcbiAgICAgICAgbWltZTogdHlwZXMsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX292ZXJ3cml0ZSh0eCkge1xuICAgIHJldHVybiBuZXcgY2hlY2tzLiRab2RDaGVja092ZXJ3cml0ZSh7XG4gICAgICAgIGNoZWNrOiBcIm92ZXJ3cml0ZVwiLFxuICAgICAgICB0eCxcbiAgICB9KTtcbn1cbi8vIG5vcm1hbGl6ZVxuZXhwb3J0IGZ1bmN0aW9uIF9ub3JtYWxpemUoZm9ybSkge1xuICAgIHJldHVybiBfb3ZlcndyaXRlKChpbnB1dCkgPT4gaW5wdXQubm9ybWFsaXplKGZvcm0pKTtcbn1cbi8vIHRyaW1cbmV4cG9ydCBmdW5jdGlvbiBfdHJpbSgpIHtcbiAgICByZXR1cm4gX292ZXJ3cml0ZSgoaW5wdXQpID0+IGlucHV0LnRyaW0oKSk7XG59XG4vLyB0b0xvd2VyQ2FzZVxuZXhwb3J0IGZ1bmN0aW9uIF90b0xvd2VyQ2FzZSgpIHtcbiAgICByZXR1cm4gX292ZXJ3cml0ZSgoaW5wdXQpID0+IGlucHV0LnRvTG93ZXJDYXNlKCkpO1xufVxuLy8gdG9VcHBlckNhc2VcbmV4cG9ydCBmdW5jdGlvbiBfdG9VcHBlckNhc2UoKSB7XG4gICAgcmV0dXJuIF9vdmVyd3JpdGUoKGlucHV0KSA9PiBpbnB1dC50b1VwcGVyQ2FzZSgpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfYXJyYXkoQ2xhc3MsIGVsZW1lbnQsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgIGVsZW1lbnQsXG4gICAgICAgIC8vIGdldCBlbGVtZW50KCkge1xuICAgICAgICAvLyAgIHJldHVybiBlbGVtZW50O1xuICAgICAgICAvLyB9LFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF91bmlvbihDbGFzcywgb3B0aW9ucywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwidW5pb25cIixcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfZGlzY3JpbWluYXRlZFVuaW9uKENsYXNzLCBkaXNjcmltaW5hdG9yLCBvcHRpb25zLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJ1bmlvblwiLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICBkaXNjcmltaW5hdG9yLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9pbnRlcnNlY3Rpb24oQ2xhc3MsIGxlZnQsIHJpZ2h0KSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwiaW50ZXJzZWN0aW9uXCIsXG4gICAgICAgIGxlZnQsXG4gICAgICAgIHJpZ2h0LFxuICAgIH0pO1xufVxuLy8gZXhwb3J0IGZ1bmN0aW9uIF90dXBsZShcbi8vICAgQ2xhc3M6IHV0aWwuU2NoZW1hQ2xhc3M8c2NoZW1hcy4kWm9kVHVwbGU+LFxuLy8gICBpdGVtczogW10sXG4vLyAgIHBhcmFtcz86IHN0cmluZyB8ICRab2RUdXBsZVBhcmFtc1xuLy8gKTogc2NoZW1hcy4kWm9kVHVwbGU8W10sIG51bGw+O1xuZXhwb3J0IGZ1bmN0aW9uIF90dXBsZShDbGFzcywgaXRlbXMsIF9wYXJhbXNPclJlc3QsIF9wYXJhbXMpIHtcbiAgICBjb25zdCBoYXNSZXN0ID0gX3BhcmFtc09yUmVzdCBpbnN0YW5jZW9mIHNjaGVtYXMuJFpvZFR5cGU7XG4gICAgY29uc3QgcGFyYW1zID0gaGFzUmVzdCA/IF9wYXJhbXMgOiBfcGFyYW1zT3JSZXN0O1xuICAgIGNvbnN0IHJlc3QgPSBoYXNSZXN0ID8gX3BhcmFtc09yUmVzdCA6IG51bGw7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwidHVwbGVcIixcbiAgICAgICAgaXRlbXMsXG4gICAgICAgIHJlc3QsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX3JlY29yZChDbGFzcywga2V5VHlwZSwgdmFsdWVUeXBlLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJyZWNvcmRcIixcbiAgICAgICAga2V5VHlwZSxcbiAgICAgICAgdmFsdWVUeXBlLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9tYXAoQ2xhc3MsIGtleVR5cGUsIHZhbHVlVHlwZSwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwibWFwXCIsXG4gICAgICAgIGtleVR5cGUsXG4gICAgICAgIHZhbHVlVHlwZSxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfc2V0KENsYXNzLCB2YWx1ZVR5cGUsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcInNldFwiLFxuICAgICAgICB2YWx1ZVR5cGUsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX2VudW0oQ2xhc3MsIHZhbHVlcywgcGFyYW1zKSB7XG4gICAgY29uc3QgZW50cmllcyA9IEFycmF5LmlzQXJyYXkodmFsdWVzKSA/IE9iamVjdC5mcm9tRW50cmllcyh2YWx1ZXMubWFwKCh2KSA9PiBbdiwgdl0pKSA6IHZhbHVlcztcbiAgICAvLyBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZXMpKSB7XG4gICAgLy8gICBmb3IgKGNvbnN0IHZhbHVlIG9mIHZhbHVlcykge1xuICAgIC8vICAgICBlbnRyaWVzW3ZhbHVlXSA9IHZhbHVlO1xuICAgIC8vICAgfVxuICAgIC8vIH0gZWxzZSB7XG4gICAgLy8gICBPYmplY3QuYXNzaWduKGVudHJpZXMsIHZhbHVlcyk7XG4gICAgLy8gfVxuICAgIC8vIGNvbnN0IGVudHJpZXM6IHV0aWwuRW51bUxpa2UgPSB7fTtcbiAgICAvLyBmb3IgKGNvbnN0IHZhbCBvZiB2YWx1ZXMpIHtcbiAgICAvLyAgIGVudHJpZXNbdmFsXSA9IHZhbDtcbiAgICAvLyB9XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwiZW51bVwiLFxuICAgICAgICBlbnRyaWVzLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuLyoqIEBkZXByZWNhdGVkIFRoaXMgQVBJIGhhcyBiZWVuIG1lcmdlZCBpbnRvIGB6LmVudW0oKWAuIFVzZSBgei5lbnVtKClgIGluc3RlYWQuXG4gKlxuICogYGBgdHNcbiAqIGVudW0gQ29sb3JzIHsgcmVkLCBncmVlbiwgYmx1ZSB9XG4gKiB6LmVudW0oQ29sb3JzKTtcbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gX25hdGl2ZUVudW0oQ2xhc3MsIGVudHJpZXMsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcImVudW1cIixcbiAgICAgICAgZW50cmllcyxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfbGl0ZXJhbChDbGFzcywgdmFsdWUsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcImxpdGVyYWxcIixcbiAgICAgICAgdmFsdWVzOiBBcnJheS5pc0FycmF5KHZhbHVlKSA/IHZhbHVlIDogW3ZhbHVlXSxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfZmlsZShDbGFzcywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwiZmlsZVwiLFxuICAgICAgICAuLi51dGlsLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF90cmFuc2Zvcm0oQ2xhc3MsIGZuKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwidHJhbnNmb3JtXCIsXG4gICAgICAgIHRyYW5zZm9ybTogZm4sXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX29wdGlvbmFsKENsYXNzLCBpbm5lclR5cGUpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJvcHRpb25hbFwiLFxuICAgICAgICBpbm5lclR5cGUsXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX251bGxhYmxlKENsYXNzLCBpbm5lclR5cGUpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJudWxsYWJsZVwiLFxuICAgICAgICBpbm5lclR5cGUsXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX2RlZmF1bHQoQ2xhc3MsIGlubmVyVHlwZSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwiZGVmYXVsdFwiLFxuICAgICAgICBpbm5lclR5cGUsXG4gICAgICAgIGdldCBkZWZhdWx0VmFsdWUoKSB7XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIGRlZmF1bHRWYWx1ZSA9PT0gXCJmdW5jdGlvblwiID8gZGVmYXVsdFZhbHVlKCkgOiB1dGlsLnNoYWxsb3dDbG9uZShkZWZhdWx0VmFsdWUpO1xuICAgICAgICB9LFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9ub25vcHRpb25hbChDbGFzcywgaW5uZXJUeXBlLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJub25vcHRpb25hbFwiLFxuICAgICAgICBpbm5lclR5cGUsXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX3N1Y2Nlc3MoQ2xhc3MsIGlubmVyVHlwZSkge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgaW5uZXJUeXBlLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9jYXRjaChDbGFzcywgaW5uZXJUeXBlLCBjYXRjaFZhbHVlKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwiY2F0Y2hcIixcbiAgICAgICAgaW5uZXJUeXBlLFxuICAgICAgICBjYXRjaFZhbHVlOiAodHlwZW9mIGNhdGNoVmFsdWUgPT09IFwiZnVuY3Rpb25cIiA/IGNhdGNoVmFsdWUgOiAoKSA9PiBjYXRjaFZhbHVlKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfcGlwZShDbGFzcywgaW5fLCBvdXQpIHtcbiAgICByZXR1cm4gbmV3IENsYXNzKHtcbiAgICAgICAgdHlwZTogXCJwaXBlXCIsXG4gICAgICAgIGluOiBpbl8sXG4gICAgICAgIG91dCxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfcmVhZG9ubHkoQ2xhc3MsIGlubmVyVHlwZSkge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcInJlYWRvbmx5XCIsXG4gICAgICAgIGlubmVyVHlwZSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfdGVtcGxhdGVMaXRlcmFsKENsYXNzLCBwYXJ0cywgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwidGVtcGxhdGVfbGl0ZXJhbFwiLFxuICAgICAgICBwYXJ0cyxcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfbGF6eShDbGFzcywgZ2V0dGVyKSB7XG4gICAgcmV0dXJuIG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwibGF6eVwiLFxuICAgICAgICBnZXR0ZXIsXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX3Byb21pc2UoQ2xhc3MsIGlubmVyVHlwZSkge1xuICAgIHJldHVybiBuZXcgQ2xhc3Moe1xuICAgICAgICB0eXBlOiBcInByb21pc2VcIixcbiAgICAgICAgaW5uZXJUeXBlLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9jdXN0b20oQ2xhc3MsIGZuLCBfcGFyYW1zKSB7XG4gICAgY29uc3Qgbm9ybSA9IHV0aWwubm9ybWFsaXplUGFyYW1zKF9wYXJhbXMpO1xuICAgIG5vcm0uYWJvcnQgPz8gKG5vcm0uYWJvcnQgPSB0cnVlKTsgLy8gZGVmYXVsdCB0byBhYm9ydDpmYWxzZVxuICAgIGNvbnN0IHNjaGVtYSA9IG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwiY3VzdG9tXCIsXG4gICAgICAgIGNoZWNrOiBcImN1c3RvbVwiLFxuICAgICAgICBmbjogZm4sXG4gICAgICAgIC4uLm5vcm0sXG4gICAgfSk7XG4gICAgcmV0dXJuIHNjaGVtYTtcbn1cbi8vIHNhbWUgYXMgX2N1c3RvbSBidXQgZGVmYXVsdHMgdG8gYWJvcnQ6ZmFsc2VcbmV4cG9ydCBmdW5jdGlvbiBfcmVmaW5lKENsYXNzLCBmbiwgX3BhcmFtcykge1xuICAgIGNvbnN0IHNjaGVtYSA9IG5ldyBDbGFzcyh7XG4gICAgICAgIHR5cGU6IFwiY3VzdG9tXCIsXG4gICAgICAgIGNoZWNrOiBcImN1c3RvbVwiLFxuICAgICAgICBmbjogZm4sXG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKF9wYXJhbXMpLFxuICAgIH0pO1xuICAgIHJldHVybiBzY2hlbWE7XG59XG5leHBvcnQgZnVuY3Rpb24gX3N1cGVyUmVmaW5lKGZuKSB7XG4gICAgY29uc3QgY2ggPSBfY2hlY2soKHBheWxvYWQpID0+IHtcbiAgICAgICAgcGF5bG9hZC5hZGRJc3N1ZSA9IChpc3N1ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpc3N1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2godXRpbC5pc3N1ZShpc3N1ZSwgcGF5bG9hZC52YWx1ZSwgY2guX3pvZC5kZWYpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGZvciBab2QgMyBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eVxuICAgICAgICAgICAgICAgIGNvbnN0IF9pc3N1ZSA9IGlzc3VlO1xuICAgICAgICAgICAgICAgIGlmIChfaXNzdWUuZmF0YWwpXG4gICAgICAgICAgICAgICAgICAgIF9pc3N1ZS5jb250aW51ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIF9pc3N1ZS5jb2RlID8/IChfaXNzdWUuY29kZSA9IFwiY3VzdG9tXCIpO1xuICAgICAgICAgICAgICAgIF9pc3N1ZS5pbnB1dCA/PyAoX2lzc3VlLmlucHV0ID0gcGF5bG9hZC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgX2lzc3VlLmluc3QgPz8gKF9pc3N1ZS5pbnN0ID0gY2gpO1xuICAgICAgICAgICAgICAgIF9pc3N1ZS5jb250aW51ZSA/PyAoX2lzc3VlLmNvbnRpbnVlID0gIWNoLl96b2QuZGVmLmFib3J0KTsgLy8gYWJvcnQgaXMgYWx3YXlzIHVuZGVmaW5lZCwgc28gdGhpcyBpcyBhbHdheXMgdHJ1ZS4uLlxuICAgICAgICAgICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2godXRpbC5pc3N1ZShfaXNzdWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGZuKHBheWxvYWQudmFsdWUsIHBheWxvYWQpO1xuICAgIH0pO1xuICAgIHJldHVybiBjaDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfY2hlY2soZm4sIHBhcmFtcykge1xuICAgIGNvbnN0IGNoID0gbmV3IGNoZWNrcy4kWm9kQ2hlY2soe1xuICAgICAgICBjaGVjazogXCJjdXN0b21cIixcbiAgICAgICAgLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbiAgICBjaC5fem9kLmNoZWNrID0gZm47XG4gICAgcmV0dXJuIGNoO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9zdHJpbmdib29sKENsYXNzZXMsIF9wYXJhbXMpIHtcbiAgICBjb25zdCBwYXJhbXMgPSB1dGlsLm5vcm1hbGl6ZVBhcmFtcyhfcGFyYW1zKTtcbiAgICBsZXQgdHJ1dGh5QXJyYXkgPSBwYXJhbXMudHJ1dGh5ID8/IFtcInRydWVcIiwgXCIxXCIsIFwieWVzXCIsIFwib25cIiwgXCJ5XCIsIFwiZW5hYmxlZFwiXTtcbiAgICBsZXQgZmFsc3lBcnJheSA9IHBhcmFtcy5mYWxzeSA/PyBbXCJmYWxzZVwiLCBcIjBcIiwgXCJub1wiLCBcIm9mZlwiLCBcIm5cIiwgXCJkaXNhYmxlZFwiXTtcbiAgICBpZiAocGFyYW1zLmNhc2UgIT09IFwic2Vuc2l0aXZlXCIpIHtcbiAgICAgICAgdHJ1dGh5QXJyYXkgPSB0cnV0aHlBcnJheS5tYXAoKHYpID0+ICh0eXBlb2YgdiA9PT0gXCJzdHJpbmdcIiA/IHYudG9Mb3dlckNhc2UoKSA6IHYpKTtcbiAgICAgICAgZmFsc3lBcnJheSA9IGZhbHN5QXJyYXkubWFwKCh2KSA9PiAodHlwZW9mIHYgPT09IFwic3RyaW5nXCIgPyB2LnRvTG93ZXJDYXNlKCkgOiB2KSk7XG4gICAgfVxuICAgIGNvbnN0IHRydXRoeVNldCA9IG5ldyBTZXQodHJ1dGh5QXJyYXkpO1xuICAgIGNvbnN0IGZhbHN5U2V0ID0gbmV3IFNldChmYWxzeUFycmF5KTtcbiAgICBjb25zdCBfQ29kZWMgPSBDbGFzc2VzLkNvZGVjID8/IHNjaGVtYXMuJFpvZENvZGVjO1xuICAgIGNvbnN0IF9Cb29sZWFuID0gQ2xhc3Nlcy5Cb29sZWFuID8/IHNjaGVtYXMuJFpvZEJvb2xlYW47XG4gICAgY29uc3QgX1N0cmluZyA9IENsYXNzZXMuU3RyaW5nID8/IHNjaGVtYXMuJFpvZFN0cmluZztcbiAgICBjb25zdCBzdHJpbmdTY2hlbWEgPSBuZXcgX1N0cmluZyh7IHR5cGU6IFwic3RyaW5nXCIsIGVycm9yOiBwYXJhbXMuZXJyb3IgfSk7XG4gICAgY29uc3QgYm9vbGVhblNjaGVtYSA9IG5ldyBfQm9vbGVhbih7IHR5cGU6IFwiYm9vbGVhblwiLCBlcnJvcjogcGFyYW1zLmVycm9yIH0pO1xuICAgIGNvbnN0IGNvZGVjID0gbmV3IF9Db2RlYyh7XG4gICAgICAgIHR5cGU6IFwicGlwZVwiLFxuICAgICAgICBpbjogc3RyaW5nU2NoZW1hLFxuICAgICAgICBvdXQ6IGJvb2xlYW5TY2hlbWEsXG4gICAgICAgIHRyYW5zZm9ybTogKChpbnB1dCwgcGF5bG9hZCkgPT4ge1xuICAgICAgICAgICAgbGV0IGRhdGEgPSBpbnB1dDtcbiAgICAgICAgICAgIGlmIChwYXJhbXMuY2FzZSAhPT0gXCJzZW5zaXRpdmVcIilcbiAgICAgICAgICAgICAgICBkYXRhID0gZGF0YS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgaWYgKHRydXRoeVNldC5oYXMoZGF0YSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGZhbHN5U2V0LmhhcyhkYXRhKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBcImludmFsaWRfdmFsdWVcIixcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFwic3RyaW5nYm9vbFwiLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IFsuLi50cnV0aHlTZXQsIC4uLmZhbHN5U2V0XSxcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIGluc3Q6IGNvZGVjLFxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgICAgcmV2ZXJzZVRyYW5zZm9ybTogKChpbnB1dCwgX3BheWxvYWQpID0+IHtcbiAgICAgICAgICAgIGlmIChpbnB1dCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnV0aHlBcnJheVswXSB8fCBcInRydWVcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzeUFycmF5WzBdIHx8IFwiZmFsc2VcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksXG4gICAgICAgIGVycm9yOiBwYXJhbXMuZXJyb3IsXG4gICAgfSk7XG4gICAgcmV0dXJuIGNvZGVjO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9zdHJpbmdGb3JtYXQoQ2xhc3MsIGZvcm1hdCwgZm5PclJlZ2V4LCBfcGFyYW1zID0ge30pIHtcbiAgICBjb25zdCBwYXJhbXMgPSB1dGlsLm5vcm1hbGl6ZVBhcmFtcyhfcGFyYW1zKTtcbiAgICBjb25zdCBkZWYgPSB7XG4gICAgICAgIC4uLnV0aWwubm9ybWFsaXplUGFyYW1zKF9wYXJhbXMpLFxuICAgICAgICBjaGVjazogXCJzdHJpbmdfZm9ybWF0XCIsXG4gICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgIGZvcm1hdCxcbiAgICAgICAgZm46IHR5cGVvZiBmbk9yUmVnZXggPT09IFwiZnVuY3Rpb25cIiA/IGZuT3JSZWdleCA6ICh2YWwpID0+IGZuT3JSZWdleC50ZXN0KHZhbCksXG4gICAgICAgIC4uLnBhcmFtcyxcbiAgICB9O1xuICAgIGlmIChmbk9yUmVnZXggaW5zdGFuY2VvZiBSZWdFeHApIHtcbiAgICAgICAgZGVmLnBhdHRlcm4gPSBmbk9yUmVnZXg7XG4gICAgfVxuICAgIGNvbnN0IGluc3QgPSBuZXcgQ2xhc3MoZGVmKTtcbiAgICByZXR1cm4gaW5zdDtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/api.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/checks.js":
/*!*********************************************************************!*\
  !*** ./node_modules/better-auth/node_modules/zod/v4/core/checks.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $ZodCheck: () => (/* binding */ $ZodCheck),\n/* harmony export */   $ZodCheckBigIntFormat: () => (/* binding */ $ZodCheckBigIntFormat),\n/* harmony export */   $ZodCheckEndsWith: () => (/* binding */ $ZodCheckEndsWith),\n/* harmony export */   $ZodCheckGreaterThan: () => (/* binding */ $ZodCheckGreaterThan),\n/* harmony export */   $ZodCheckIncludes: () => (/* binding */ $ZodCheckIncludes),\n/* harmony export */   $ZodCheckLengthEquals: () => (/* binding */ $ZodCheckLengthEquals),\n/* harmony export */   $ZodCheckLessThan: () => (/* binding */ $ZodCheckLessThan),\n/* harmony export */   $ZodCheckLowerCase: () => (/* binding */ $ZodCheckLowerCase),\n/* harmony export */   $ZodCheckMaxLength: () => (/* binding */ $ZodCheckMaxLength),\n/* harmony export */   $ZodCheckMaxSize: () => (/* binding */ $ZodCheckMaxSize),\n/* harmony export */   $ZodCheckMimeType: () => (/* binding */ $ZodCheckMimeType),\n/* harmony export */   $ZodCheckMinLength: () => (/* binding */ $ZodCheckMinLength),\n/* harmony export */   $ZodCheckMinSize: () => (/* binding */ $ZodCheckMinSize),\n/* harmony export */   $ZodCheckMultipleOf: () => (/* binding */ $ZodCheckMultipleOf),\n/* harmony export */   $ZodCheckNumberFormat: () => (/* binding */ $ZodCheckNumberFormat),\n/* harmony export */   $ZodCheckOverwrite: () => (/* binding */ $ZodCheckOverwrite),\n/* harmony export */   $ZodCheckProperty: () => (/* binding */ $ZodCheckProperty),\n/* harmony export */   $ZodCheckRegex: () => (/* binding */ $ZodCheckRegex),\n/* harmony export */   $ZodCheckSizeEquals: () => (/* binding */ $ZodCheckSizeEquals),\n/* harmony export */   $ZodCheckStartsWith: () => (/* binding */ $ZodCheckStartsWith),\n/* harmony export */   $ZodCheckStringFormat: () => (/* binding */ $ZodCheckStringFormat),\n/* harmony export */   $ZodCheckUpperCase: () => (/* binding */ $ZodCheckUpperCase)\n/* harmony export */ });\n/* harmony import */ var _core_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./core.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/core.js\");\n/* harmony import */ var _regexes_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./regexes.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/regexes.js\");\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./util.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/util.js\");\n// import { $ZodType } from \"./schemas.js\";\n\n\n\nconst $ZodCheck = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodCheck\", (inst, def) => {\n    var _a;\n    inst._zod ?? (inst._zod = {});\n    inst._zod.def = def;\n    (_a = inst._zod).onattach ?? (_a.onattach = []);\n});\nconst numericOriginMap = {\n    number: \"number\",\n    bigint: \"bigint\",\n    object: \"date\",\n};\nconst $ZodCheckLessThan = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodCheckLessThan\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const origin = numericOriginMap[typeof def.value];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        const curr = (def.inclusive ? bag.maximum : bag.exclusiveMaximum) ?? Number.POSITIVE_INFINITY;\n        if (def.value < curr) {\n            if (def.inclusive)\n                bag.maximum = def.value;\n            else\n                bag.exclusiveMaximum = def.value;\n        }\n    });\n    inst._zod.check = (payload) => {\n        if (def.inclusive ? payload.value <= def.value : payload.value < def.value) {\n            return;\n        }\n        payload.issues.push({\n            origin,\n            code: \"too_big\",\n            maximum: def.value,\n            input: payload.value,\n            inclusive: def.inclusive,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nconst $ZodCheckGreaterThan = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodCheckGreaterThan\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const origin = numericOriginMap[typeof def.value];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        const curr = (def.inclusive ? bag.minimum : bag.exclusiveMinimum) ?? Number.NEGATIVE_INFINITY;\n        if (def.value > curr) {\n            if (def.inclusive)\n                bag.minimum = def.value;\n            else\n                bag.exclusiveMinimum = def.value;\n        }\n    });\n    inst._zod.check = (payload) => {\n        if (def.inclusive ? payload.value >= def.value : payload.value > def.value) {\n            return;\n        }\n        payload.issues.push({\n            origin,\n            code: \"too_small\",\n            minimum: def.value,\n            input: payload.value,\n            inclusive: def.inclusive,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nconst $ZodCheckMultipleOf = \n/*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodCheckMultipleOf\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        var _a;\n        (_a = inst._zod.bag).multipleOf ?? (_a.multipleOf = def.value);\n    });\n    inst._zod.check = (payload) => {\n        if (typeof payload.value !== typeof def.value)\n            throw new Error(\"Cannot mix number and bigint in multiple_of check.\");\n        const isMultiple = typeof payload.value === \"bigint\"\n            ? payload.value % def.value === BigInt(0)\n            : _util_js__WEBPACK_IMPORTED_MODULE_1__.floatSafeRemainder(payload.value, def.value) === 0;\n        if (isMultiple)\n            return;\n        payload.issues.push({\n            origin: typeof payload.value,\n            code: \"not_multiple_of\",\n            divisor: def.value,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nconst $ZodCheckNumberFormat = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodCheckNumberFormat\", (inst, def) => {\n    $ZodCheck.init(inst, def); // no format checks\n    def.format = def.format || \"float64\";\n    const isInt = def.format?.includes(\"int\");\n    const origin = isInt ? \"int\" : \"number\";\n    const [minimum, maximum] = _util_js__WEBPACK_IMPORTED_MODULE_1__.NUMBER_FORMAT_RANGES[def.format];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = def.format;\n        bag.minimum = minimum;\n        bag.maximum = maximum;\n        if (isInt)\n            bag.pattern = _regexes_js__WEBPACK_IMPORTED_MODULE_2__.integer;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        if (isInt) {\n            if (!Number.isInteger(input)) {\n                // invalid_format issue\n                // payload.issues.push({\n                //   expected: def.format,\n                //   format: def.format,\n                //   code: \"invalid_format\",\n                //   input,\n                //   inst,\n                // });\n                // invalid_type issue\n                payload.issues.push({\n                    expected: origin,\n                    format: def.format,\n                    code: \"invalid_type\",\n                    continue: false,\n                    input,\n                    inst,\n                });\n                return;\n                // not_multiple_of issue\n                // payload.issues.push({\n                //   code: \"not_multiple_of\",\n                //   origin: \"number\",\n                //   input,\n                //   inst,\n                //   divisor: 1,\n                // });\n            }\n            if (!Number.isSafeInteger(input)) {\n                if (input > 0) {\n                    // too_big\n                    payload.issues.push({\n                        input,\n                        code: \"too_big\",\n                        maximum: Number.MAX_SAFE_INTEGER,\n                        note: \"Integers must be within the safe integer range.\",\n                        inst,\n                        origin,\n                        continue: !def.abort,\n                    });\n                }\n                else {\n                    // too_small\n                    payload.issues.push({\n                        input,\n                        code: \"too_small\",\n                        minimum: Number.MIN_SAFE_INTEGER,\n                        note: \"Integers must be within the safe integer range.\",\n                        inst,\n                        origin,\n                        continue: !def.abort,\n                    });\n                }\n                return;\n            }\n        }\n        if (input < minimum) {\n            payload.issues.push({\n                origin: \"number\",\n                input,\n                code: \"too_small\",\n                minimum,\n                inclusive: true,\n                inst,\n                continue: !def.abort,\n            });\n        }\n        if (input > maximum) {\n            payload.issues.push({\n                origin: \"number\",\n                input,\n                code: \"too_big\",\n                maximum,\n                inst,\n            });\n        }\n    };\n});\nconst $ZodCheckBigIntFormat = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodCheckBigIntFormat\", (inst, def) => {\n    $ZodCheck.init(inst, def); // no format checks\n    const [minimum, maximum] = _util_js__WEBPACK_IMPORTED_MODULE_1__.BIGINT_FORMAT_RANGES[def.format];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = def.format;\n        bag.minimum = minimum;\n        bag.maximum = maximum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        if (input < minimum) {\n            payload.issues.push({\n                origin: \"bigint\",\n                input,\n                code: \"too_small\",\n                minimum: minimum,\n                inclusive: true,\n                inst,\n                continue: !def.abort,\n            });\n        }\n        if (input > maximum) {\n            payload.issues.push({\n                origin: \"bigint\",\n                input,\n                code: \"too_big\",\n                maximum,\n                inst,\n            });\n        }\n    };\n});\nconst $ZodCheckMaxSize = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodCheckMaxSize\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !_util_js__WEBPACK_IMPORTED_MODULE_1__.nullish(val) && val.size !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.maximum ?? Number.POSITIVE_INFINITY);\n        if (def.maximum < curr)\n            inst._zod.bag.maximum = def.maximum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const size = input.size;\n        if (size <= def.maximum)\n            return;\n        payload.issues.push({\n            origin: _util_js__WEBPACK_IMPORTED_MODULE_1__.getSizableOrigin(input),\n            code: \"too_big\",\n            maximum: def.maximum,\n            inclusive: true,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nconst $ZodCheckMinSize = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodCheckMinSize\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !_util_js__WEBPACK_IMPORTED_MODULE_1__.nullish(val) && val.size !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.minimum ?? Number.NEGATIVE_INFINITY);\n        if (def.minimum > curr)\n            inst._zod.bag.minimum = def.minimum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const size = input.size;\n        if (size >= def.minimum)\n            return;\n        payload.issues.push({\n            origin: _util_js__WEBPACK_IMPORTED_MODULE_1__.getSizableOrigin(input),\n            code: \"too_small\",\n            minimum: def.minimum,\n            inclusive: true,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nconst $ZodCheckSizeEquals = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodCheckSizeEquals\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !_util_js__WEBPACK_IMPORTED_MODULE_1__.nullish(val) && val.size !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.minimum = def.size;\n        bag.maximum = def.size;\n        bag.size = def.size;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const size = input.size;\n        if (size === def.size)\n            return;\n        const tooBig = size > def.size;\n        payload.issues.push({\n            origin: _util_js__WEBPACK_IMPORTED_MODULE_1__.getSizableOrigin(input),\n            ...(tooBig ? { code: \"too_big\", maximum: def.size } : { code: \"too_small\", minimum: def.size }),\n            inclusive: true,\n            exact: true,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nconst $ZodCheckMaxLength = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodCheckMaxLength\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !_util_js__WEBPACK_IMPORTED_MODULE_1__.nullish(val) && val.length !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.maximum ?? Number.POSITIVE_INFINITY);\n        if (def.maximum < curr)\n            inst._zod.bag.maximum = def.maximum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const length = input.length;\n        if (length <= def.maximum)\n            return;\n        const origin = _util_js__WEBPACK_IMPORTED_MODULE_1__.getLengthableOrigin(input);\n        payload.issues.push({\n            origin,\n            code: \"too_big\",\n            maximum: def.maximum,\n            inclusive: true,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nconst $ZodCheckMinLength = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodCheckMinLength\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !_util_js__WEBPACK_IMPORTED_MODULE_1__.nullish(val) && val.length !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.minimum ?? Number.NEGATIVE_INFINITY);\n        if (def.minimum > curr)\n            inst._zod.bag.minimum = def.minimum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const length = input.length;\n        if (length >= def.minimum)\n            return;\n        const origin = _util_js__WEBPACK_IMPORTED_MODULE_1__.getLengthableOrigin(input);\n        payload.issues.push({\n            origin,\n            code: \"too_small\",\n            minimum: def.minimum,\n            inclusive: true,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nconst $ZodCheckLengthEquals = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodCheckLengthEquals\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !_util_js__WEBPACK_IMPORTED_MODULE_1__.nullish(val) && val.length !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.minimum = def.length;\n        bag.maximum = def.length;\n        bag.length = def.length;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const length = input.length;\n        if (length === def.length)\n            return;\n        const origin = _util_js__WEBPACK_IMPORTED_MODULE_1__.getLengthableOrigin(input);\n        const tooBig = length > def.length;\n        payload.issues.push({\n            origin,\n            ...(tooBig ? { code: \"too_big\", maximum: def.length } : { code: \"too_small\", minimum: def.length }),\n            inclusive: true,\n            exact: true,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nconst $ZodCheckStringFormat = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodCheckStringFormat\", (inst, def) => {\n    var _a, _b;\n    $ZodCheck.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = def.format;\n        if (def.pattern) {\n            bag.patterns ?? (bag.patterns = new Set());\n            bag.patterns.add(def.pattern);\n        }\n    });\n    if (def.pattern)\n        (_a = inst._zod).check ?? (_a.check = (payload) => {\n            def.pattern.lastIndex = 0;\n            if (def.pattern.test(payload.value))\n                return;\n            payload.issues.push({\n                origin: \"string\",\n                code: \"invalid_format\",\n                format: def.format,\n                input: payload.value,\n                ...(def.pattern ? { pattern: def.pattern.toString() } : {}),\n                inst,\n                continue: !def.abort,\n            });\n        });\n    else\n        (_b = inst._zod).check ?? (_b.check = () => { });\n});\nconst $ZodCheckRegex = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodCheckRegex\", (inst, def) => {\n    $ZodCheckStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        def.pattern.lastIndex = 0;\n        if (def.pattern.test(payload.value))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"regex\",\n            input: payload.value,\n            pattern: def.pattern.toString(),\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nconst $ZodCheckLowerCase = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodCheckLowerCase\", (inst, def) => {\n    def.pattern ?? (def.pattern = _regexes_js__WEBPACK_IMPORTED_MODULE_2__.lowercase);\n    $ZodCheckStringFormat.init(inst, def);\n});\nconst $ZodCheckUpperCase = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodCheckUpperCase\", (inst, def) => {\n    def.pattern ?? (def.pattern = _regexes_js__WEBPACK_IMPORTED_MODULE_2__.uppercase);\n    $ZodCheckStringFormat.init(inst, def);\n});\nconst $ZodCheckIncludes = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodCheckIncludes\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const escapedRegex = _util_js__WEBPACK_IMPORTED_MODULE_1__.escapeRegex(def.includes);\n    const pattern = new RegExp(typeof def.position === \"number\" ? `^.{${def.position}}${escapedRegex}` : escapedRegex);\n    def.pattern = pattern;\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.patterns ?? (bag.patterns = new Set());\n        bag.patterns.add(pattern);\n    });\n    inst._zod.check = (payload) => {\n        if (payload.value.includes(def.includes, def.position))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"includes\",\n            includes: def.includes,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nconst $ZodCheckStartsWith = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodCheckStartsWith\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const pattern = new RegExp(`^${_util_js__WEBPACK_IMPORTED_MODULE_1__.escapeRegex(def.prefix)}.*`);\n    def.pattern ?? (def.pattern = pattern);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.patterns ?? (bag.patterns = new Set());\n        bag.patterns.add(pattern);\n    });\n    inst._zod.check = (payload) => {\n        if (payload.value.startsWith(def.prefix))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"starts_with\",\n            prefix: def.prefix,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nconst $ZodCheckEndsWith = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodCheckEndsWith\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const pattern = new RegExp(`.*${_util_js__WEBPACK_IMPORTED_MODULE_1__.escapeRegex(def.suffix)}$`);\n    def.pattern ?? (def.pattern = pattern);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.patterns ?? (bag.patterns = new Set());\n        bag.patterns.add(pattern);\n    });\n    inst._zod.check = (payload) => {\n        if (payload.value.endsWith(def.suffix))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"ends_with\",\n            suffix: def.suffix,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\n///////////////////////////////////\n/////    $ZodCheckProperty    /////\n///////////////////////////////////\nfunction handleCheckPropertyResult(result, payload, property) {\n    if (result.issues.length) {\n        payload.issues.push(..._util_js__WEBPACK_IMPORTED_MODULE_1__.prefixIssues(property, result.issues));\n    }\n}\nconst $ZodCheckProperty = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodCheckProperty\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    inst._zod.check = (payload) => {\n        const result = def.schema._zod.run({\n            value: payload.value[def.property],\n            issues: [],\n        }, {});\n        if (result instanceof Promise) {\n            return result.then((result) => handleCheckPropertyResult(result, payload, def.property));\n        }\n        handleCheckPropertyResult(result, payload, def.property);\n        return;\n    };\n});\nconst $ZodCheckMimeType = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodCheckMimeType\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const mimeSet = new Set(def.mime);\n    inst._zod.onattach.push((inst) => {\n        inst._zod.bag.mime = def.mime;\n    });\n    inst._zod.check = (payload) => {\n        if (mimeSet.has(payload.value.type))\n            return;\n        payload.issues.push({\n            code: \"invalid_value\",\n            values: def.mime,\n            input: payload.value.type,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nconst $ZodCheckOverwrite = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodCheckOverwrite\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    inst._zod.check = (payload) => {\n        payload.value = def.tx(payload.value);\n    };\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvbm9kZV9tb2R1bGVzL3pvZC92NC9jb3JlL2NoZWNrcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsWUFBWSxXQUFXO0FBQ1c7QUFDTTtBQUNOO0FBQzNCLGdDQUFnQyxrREFBaUI7QUFDeEQ7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sd0NBQXdDLGtEQUFpQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLENBQUM7QUFDTSwyQ0FBMkMsa0RBQWlCO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsQ0FBQztBQUNNO0FBQ1AsY0FBYyxrREFBaUI7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsd0RBQXVCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLENBQUM7QUFDTSw0Q0FBNEMsa0RBQWlCO0FBQ3BFLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsMERBQXlCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixnREFBZTtBQUN6QyxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFD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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsQ0FBQztBQUNNLHdDQUF3QyxrREFBaUI7QUFDaEU7QUFDQSxvQ0FBb0MsaURBQWdCLGFBQWE7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0Isa0RBQWlCO0FBQ2hEO0FBQ0E7QUFDTyx3Q0FBd0Msa0RBQWlCO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLElBQUk7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ00sd0NBQXdDLGtEQUFpQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxDQUFDO0FBQ00seUNBQXlDLGtEQUFpQjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYW1hYW5cXE9uZURyaXZlXFxEZXNrdG9wXFxLYW5kaWRfMlxcTmV3IGZvbGRlciAoMilcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXG5vZGVfbW9kdWxlc1xcem9kXFx2NFxcY29yZVxcY2hlY2tzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGltcG9ydCB7ICRab2RUeXBlIH0gZnJvbSBcIi4vc2NoZW1hcy5qc1wiO1xuaW1wb3J0ICogYXMgY29yZSBmcm9tIFwiLi9jb3JlLmpzXCI7XG5pbXBvcnQgKiBhcyByZWdleGVzIGZyb20gXCIuL3JlZ2V4ZXMuanNcIjtcbmltcG9ydCAqIGFzIHV0aWwgZnJvbSBcIi4vdXRpbC5qc1wiO1xuZXhwb3J0IGNvbnN0ICRab2RDaGVjayA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kQ2hlY2tcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIHZhciBfYTtcbiAgICBpbnN0Ll96b2QgPz8gKGluc3QuX3pvZCA9IHt9KTtcbiAgICBpbnN0Ll96b2QuZGVmID0gZGVmO1xuICAgIChfYSA9IGluc3QuX3pvZCkub25hdHRhY2ggPz8gKF9hLm9uYXR0YWNoID0gW10pO1xufSk7XG5jb25zdCBudW1lcmljT3JpZ2luTWFwID0ge1xuICAgIG51bWJlcjogXCJudW1iZXJcIixcbiAgICBiaWdpbnQ6IFwiYmlnaW50XCIsXG4gICAgb2JqZWN0OiBcImRhdGVcIixcbn07XG5leHBvcnQgY29uc3QgJFpvZENoZWNrTGVzc1RoYW4gPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZENoZWNrTGVzc1RoYW5cIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RDaGVjay5pbml0KGluc3QsIGRlZik7XG4gICAgY29uc3Qgb3JpZ2luID0gbnVtZXJpY09yaWdpbk1hcFt0eXBlb2YgZGVmLnZhbHVlXTtcbiAgICBpbnN0Ll96b2Qub25hdHRhY2gucHVzaCgoaW5zdCkgPT4ge1xuICAgICAgICBjb25zdCBiYWcgPSBpbnN0Ll96b2QuYmFnO1xuICAgICAgICBjb25zdCBjdXJyID0gKGRlZi5pbmNsdXNpdmUgPyBiYWcubWF4aW11bSA6IGJhZy5leGNsdXNpdmVNYXhpbXVtKSA/PyBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgICAgIGlmIChkZWYudmFsdWUgPCBjdXJyKSB7XG4gICAgICAgICAgICBpZiAoZGVmLmluY2x1c2l2ZSlcbiAgICAgICAgICAgICAgICBiYWcubWF4aW11bSA9IGRlZi52YWx1ZTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBiYWcuZXhjbHVzaXZlTWF4aW11bSA9IGRlZi52YWx1ZTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGluc3QuX3pvZC5jaGVjayA9IChwYXlsb2FkKSA9PiB7XG4gICAgICAgIGlmIChkZWYuaW5jbHVzaXZlID8gcGF5bG9hZC52YWx1ZSA8PSBkZWYudmFsdWUgOiBwYXlsb2FkLnZhbHVlIDwgZGVmLnZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICBvcmlnaW4sXG4gICAgICAgICAgICBjb2RlOiBcInRvb19iaWdcIixcbiAgICAgICAgICAgIG1heGltdW06IGRlZi52YWx1ZSxcbiAgICAgICAgICAgIGlucHV0OiBwYXlsb2FkLnZhbHVlLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiBkZWYuaW5jbHVzaXZlLFxuICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgICAgIGNvbnRpbnVlOiAhZGVmLmFib3J0LFxuICAgICAgICB9KTtcbiAgICB9O1xufSk7XG5leHBvcnQgY29uc3QgJFpvZENoZWNrR3JlYXRlclRoYW4gPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZENoZWNrR3JlYXRlclRoYW5cIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RDaGVjay5pbml0KGluc3QsIGRlZik7XG4gICAgY29uc3Qgb3JpZ2luID0gbnVtZXJpY09yaWdpbk1hcFt0eXBlb2YgZGVmLnZhbHVlXTtcbiAgICBpbnN0Ll96b2Qub25hdHRhY2gucHVzaCgoaW5zdCkgPT4ge1xuICAgICAgICBjb25zdCBiYWcgPSBpbnN0Ll96b2QuYmFnO1xuICAgICAgICBjb25zdCBjdXJyID0gKGRlZi5pbmNsdXNpdmUgPyBiYWcubWluaW11bSA6IGJhZy5leGNsdXNpdmVNaW5pbXVtKSA/PyBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7XG4gICAgICAgIGlmIChkZWYudmFsdWUgPiBjdXJyKSB7XG4gICAgICAgICAgICBpZiAoZGVmLmluY2x1c2l2ZSlcbiAgICAgICAgICAgICAgICBiYWcubWluaW11bSA9IGRlZi52YWx1ZTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBiYWcuZXhjbHVzaXZlTWluaW11bSA9IGRlZi52YWx1ZTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGluc3QuX3pvZC5jaGVjayA9IChwYXlsb2FkKSA9PiB7XG4gICAgICAgIGlmIChkZWYuaW5jbHVzaXZlID8gcGF5bG9hZC52YWx1ZSA+PSBkZWYudmFsdWUgOiBwYXlsb2FkLnZhbHVlID4gZGVmLnZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICBvcmlnaW4sXG4gICAgICAgICAgICBjb2RlOiBcInRvb19zbWFsbFwiLFxuICAgICAgICAgICAgbWluaW11bTogZGVmLnZhbHVlLFxuICAgICAgICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGRlZi5pbmNsdXNpdmUsXG4gICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgY29udGludWU6ICFkZWYuYWJvcnQsXG4gICAgICAgIH0pO1xuICAgIH07XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kQ2hlY2tNdWx0aXBsZU9mID0gXG4vKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZENoZWNrTXVsdGlwbGVPZlwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgJFpvZENoZWNrLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2Qub25hdHRhY2gucHVzaCgoaW5zdCkgPT4ge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIChfYSA9IGluc3QuX3pvZC5iYWcpLm11bHRpcGxlT2YgPz8gKF9hLm11bHRpcGxlT2YgPSBkZWYudmFsdWUpO1xuICAgIH0pO1xuICAgIGluc3QuX3pvZC5jaGVjayA9IChwYXlsb2FkKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgcGF5bG9hZC52YWx1ZSAhPT0gdHlwZW9mIGRlZi52YWx1ZSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBtaXggbnVtYmVyIGFuZCBiaWdpbnQgaW4gbXVsdGlwbGVfb2YgY2hlY2suXCIpO1xuICAgICAgICBjb25zdCBpc011bHRpcGxlID0gdHlwZW9mIHBheWxvYWQudmFsdWUgPT09IFwiYmlnaW50XCJcbiAgICAgICAgICAgID8gcGF5bG9hZC52YWx1ZSAlIGRlZi52YWx1ZSA9PT0gQmlnSW50KDApXG4gICAgICAgICAgICA6IHV0aWwuZmxvYXRTYWZlUmVtYWluZGVyKHBheWxvYWQudmFsdWUsIGRlZi52YWx1ZSkgPT09IDA7XG4gICAgICAgIGlmIChpc011bHRpcGxlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgIG9yaWdpbjogdHlwZW9mIHBheWxvYWQudmFsdWUsXG4gICAgICAgICAgICBjb2RlOiBcIm5vdF9tdWx0aXBsZV9vZlwiLFxuICAgICAgICAgICAgZGl2aXNvcjogZGVmLnZhbHVlLFxuICAgICAgICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsXG4gICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgY29udGludWU6ICFkZWYuYWJvcnQsXG4gICAgICAgIH0pO1xuICAgIH07XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kQ2hlY2tOdW1iZXJGb3JtYXQgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZENoZWNrTnVtYmVyRm9ybWF0XCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAkWm9kQ2hlY2suaW5pdChpbnN0LCBkZWYpOyAvLyBubyBmb3JtYXQgY2hlY2tzXG4gICAgZGVmLmZvcm1hdCA9IGRlZi5mb3JtYXQgfHwgXCJmbG9hdDY0XCI7XG4gICAgY29uc3QgaXNJbnQgPSBkZWYuZm9ybWF0Py5pbmNsdWRlcyhcImludFwiKTtcbiAgICBjb25zdCBvcmlnaW4gPSBpc0ludCA/IFwiaW50XCIgOiBcIm51bWJlclwiO1xuICAgIGNvbnN0IFttaW5pbXVtLCBtYXhpbXVtXSA9IHV0aWwuTlVNQkVSX0ZPUk1BVF9SQU5HRVNbZGVmLmZvcm1hdF07XG4gICAgaW5zdC5fem9kLm9uYXR0YWNoLnB1c2goKGluc3QpID0+IHtcbiAgICAgICAgY29uc3QgYmFnID0gaW5zdC5fem9kLmJhZztcbiAgICAgICAgYmFnLmZvcm1hdCA9IGRlZi5mb3JtYXQ7XG4gICAgICAgIGJhZy5taW5pbXVtID0gbWluaW11bTtcbiAgICAgICAgYmFnLm1heGltdW0gPSBtYXhpbXVtO1xuICAgICAgICBpZiAoaXNJbnQpXG4gICAgICAgICAgICBiYWcucGF0dGVybiA9IHJlZ2V4ZXMuaW50ZWdlcjtcbiAgICB9KTtcbiAgICBpbnN0Ll96b2QuY2hlY2sgPSAocGF5bG9hZCkgPT4ge1xuICAgICAgICBjb25zdCBpbnB1dCA9IHBheWxvYWQudmFsdWU7XG4gICAgICAgIGlmIChpc0ludCkge1xuICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKGlucHV0KSkge1xuICAgICAgICAgICAgICAgIC8vIGludmFsaWRfZm9ybWF0IGlzc3VlXG4gICAgICAgICAgICAgICAgLy8gcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgLy8gICBleHBlY3RlZDogZGVmLmZvcm1hdCxcbiAgICAgICAgICAgICAgICAvLyAgIGZvcm1hdDogZGVmLmZvcm1hdCxcbiAgICAgICAgICAgICAgICAvLyAgIGNvZGU6IFwiaW52YWxpZF9mb3JtYXRcIixcbiAgICAgICAgICAgICAgICAvLyAgIGlucHV0LFxuICAgICAgICAgICAgICAgIC8vICAgaW5zdCxcbiAgICAgICAgICAgICAgICAvLyB9KTtcbiAgICAgICAgICAgICAgICAvLyBpbnZhbGlkX3R5cGUgaXNzdWVcbiAgICAgICAgICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IG9yaWdpbixcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBkZWYuZm9ybWF0LFxuICAgICAgICAgICAgICAgICAgICBjb2RlOiBcImludmFsaWRfdHlwZVwiLFxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAvLyBub3RfbXVsdGlwbGVfb2YgaXNzdWVcbiAgICAgICAgICAgICAgICAvLyBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAvLyAgIGNvZGU6IFwibm90X211bHRpcGxlX29mXCIsXG4gICAgICAgICAgICAgICAgLy8gICBvcmlnaW46IFwibnVtYmVyXCIsXG4gICAgICAgICAgICAgICAgLy8gICBpbnB1dCxcbiAgICAgICAgICAgICAgICAvLyAgIGluc3QsXG4gICAgICAgICAgICAgICAgLy8gICBkaXZpc29yOiAxLFxuICAgICAgICAgICAgICAgIC8vIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNTYWZlSW50ZWdlcihpbnB1dCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRvb19iaWdcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFwidG9vX2JpZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsXG4gICAgICAgICAgICAgICAgICAgICAgICBub3RlOiBcIkludGVnZXJzIG11c3QgYmUgd2l0aGluIHRoZSBzYWZlIGludGVnZXIgcmFuZ2UuXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU6ICFkZWYuYWJvcnQsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdG9vX3NtYWxsXG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBcInRvb19zbWFsbFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bTogTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIsXG4gICAgICAgICAgICAgICAgICAgICAgICBub3RlOiBcIkludGVnZXJzIG11c3QgYmUgd2l0aGluIHRoZSBzYWZlIGludGVnZXIgcmFuZ2UuXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU6ICFkZWYuYWJvcnQsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlucHV0IDwgbWluaW11bSkge1xuICAgICAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgb3JpZ2luOiBcIm51bWJlclwiLFxuICAgICAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgICAgIGNvZGU6IFwidG9vX3NtYWxsXCIsXG4gICAgICAgICAgICAgICAgbWluaW11bSxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgICAgICAgICBjb250aW51ZTogIWRlZi5hYm9ydCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbnB1dCA+IG1heGltdW0pIHtcbiAgICAgICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgICAgIG9yaWdpbjogXCJudW1iZXJcIixcbiAgICAgICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgICAgICBjb2RlOiBcInRvb19iaWdcIixcbiAgICAgICAgICAgICAgICBtYXhpbXVtLFxuICAgICAgICAgICAgICAgIGluc3QsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kQ2hlY2tCaWdJbnRGb3JtYXQgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZENoZWNrQmlnSW50Rm9ybWF0XCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAkWm9kQ2hlY2suaW5pdChpbnN0LCBkZWYpOyAvLyBubyBmb3JtYXQgY2hlY2tzXG4gICAgY29uc3QgW21pbmltdW0sIG1heGltdW1dID0gdXRpbC5CSUdJTlRfRk9STUFUX1JBTkdFU1tkZWYuZm9ybWF0XTtcbiAgICBpbnN0Ll96b2Qub25hdHRhY2gucHVzaCgoaW5zdCkgPT4ge1xuICAgICAgICBjb25zdCBiYWcgPSBpbnN0Ll96b2QuYmFnO1xuICAgICAgICBiYWcuZm9ybWF0ID0gZGVmLmZvcm1hdDtcbiAgICAgICAgYmFnLm1pbmltdW0gPSBtaW5pbXVtO1xuICAgICAgICBiYWcubWF4aW11bSA9IG1heGltdW07XG4gICAgfSk7XG4gICAgaW5zdC5fem9kLmNoZWNrID0gKHBheWxvYWQpID0+IHtcbiAgICAgICAgY29uc3QgaW5wdXQgPSBwYXlsb2FkLnZhbHVlO1xuICAgICAgICBpZiAoaW5wdXQgPCBtaW5pbXVtKSB7XG4gICAgICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBvcmlnaW46IFwiYmlnaW50XCIsXG4gICAgICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICAgICAgY29kZTogXCJ0b29fc21hbGxcIixcbiAgICAgICAgICAgICAgICBtaW5pbXVtOiBtaW5pbXVtLFxuICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgICAgIGNvbnRpbnVlOiAhZGVmLmFib3J0LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlucHV0ID4gbWF4aW11bSkge1xuICAgICAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgb3JpZ2luOiBcImJpZ2ludFwiLFxuICAgICAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgICAgIGNvZGU6IFwidG9vX2JpZ1wiLFxuICAgICAgICAgICAgICAgIG1heGltdW0sXG4gICAgICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RDaGVja01heFNpemUgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZENoZWNrTWF4U2l6ZVwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgdmFyIF9hO1xuICAgICRab2RDaGVjay5pbml0KGluc3QsIGRlZik7XG4gICAgKF9hID0gaW5zdC5fem9kLmRlZikud2hlbiA/PyAoX2Eud2hlbiA9IChwYXlsb2FkKSA9PiB7XG4gICAgICAgIGNvbnN0IHZhbCA9IHBheWxvYWQudmFsdWU7XG4gICAgICAgIHJldHVybiAhdXRpbC5udWxsaXNoKHZhbCkgJiYgdmFsLnNpemUgIT09IHVuZGVmaW5lZDtcbiAgICB9KTtcbiAgICBpbnN0Ll96b2Qub25hdHRhY2gucHVzaCgoaW5zdCkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyID0gKGluc3QuX3pvZC5iYWcubWF4aW11bSA/PyBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpO1xuICAgICAgICBpZiAoZGVmLm1heGltdW0gPCBjdXJyKVxuICAgICAgICAgICAgaW5zdC5fem9kLmJhZy5tYXhpbXVtID0gZGVmLm1heGltdW07XG4gICAgfSk7XG4gICAgaW5zdC5fem9kLmNoZWNrID0gKHBheWxvYWQpID0+IHtcbiAgICAgICAgY29uc3QgaW5wdXQgPSBwYXlsb2FkLnZhbHVlO1xuICAgICAgICBjb25zdCBzaXplID0gaW5wdXQuc2l6ZTtcbiAgICAgICAgaWYgKHNpemUgPD0gZGVmLm1heGltdW0pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgb3JpZ2luOiB1dGlsLmdldFNpemFibGVPcmlnaW4oaW5wdXQpLFxuICAgICAgICAgICAgY29kZTogXCJ0b29fYmlnXCIsXG4gICAgICAgICAgICBtYXhpbXVtOiBkZWYubWF4aW11bSxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgICAgIGNvbnRpbnVlOiAhZGVmLmFib3J0LFxuICAgICAgICB9KTtcbiAgICB9O1xufSk7XG5leHBvcnQgY29uc3QgJFpvZENoZWNrTWluU2l6ZSA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kQ2hlY2tNaW5TaXplXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICB2YXIgX2E7XG4gICAgJFpvZENoZWNrLmluaXQoaW5zdCwgZGVmKTtcbiAgICAoX2EgPSBpbnN0Ll96b2QuZGVmKS53aGVuID8/IChfYS53aGVuID0gKHBheWxvYWQpID0+IHtcbiAgICAgICAgY29uc3QgdmFsID0gcGF5bG9hZC52YWx1ZTtcbiAgICAgICAgcmV0dXJuICF1dGlsLm51bGxpc2godmFsKSAmJiB2YWwuc2l6ZSAhPT0gdW5kZWZpbmVkO1xuICAgIH0pO1xuICAgIGluc3QuX3pvZC5vbmF0dGFjaC5wdXNoKChpbnN0KSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnIgPSAoaW5zdC5fem9kLmJhZy5taW5pbXVtID8/IE51bWJlci5ORUdBVElWRV9JTkZJTklUWSk7XG4gICAgICAgIGlmIChkZWYubWluaW11bSA+IGN1cnIpXG4gICAgICAgICAgICBpbnN0Ll96b2QuYmFnLm1pbmltdW0gPSBkZWYubWluaW11bTtcbiAgICB9KTtcbiAgICBpbnN0Ll96b2QuY2hlY2sgPSAocGF5bG9hZCkgPT4ge1xuICAgICAgICBjb25zdCBpbnB1dCA9IHBheWxvYWQudmFsdWU7XG4gICAgICAgIGNvbnN0IHNpemUgPSBpbnB1dC5zaXplO1xuICAgICAgICBpZiAoc2l6ZSA+PSBkZWYubWluaW11bSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICBvcmlnaW46IHV0aWwuZ2V0U2l6YWJsZU9yaWdpbihpbnB1dCksXG4gICAgICAgICAgICBjb2RlOiBcInRvb19zbWFsbFwiLFxuICAgICAgICAgICAgbWluaW11bTogZGVmLm1pbmltdW0sXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgIGluc3QsXG4gICAgICAgICAgICBjb250aW51ZTogIWRlZi5hYm9ydCxcbiAgICAgICAgfSk7XG4gICAgfTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RDaGVja1NpemVFcXVhbHMgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZENoZWNrU2l6ZUVxdWFsc1wiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgdmFyIF9hO1xuICAgICRab2RDaGVjay5pbml0KGluc3QsIGRlZik7XG4gICAgKF9hID0gaW5zdC5fem9kLmRlZikud2hlbiA/PyAoX2Eud2hlbiA9IChwYXlsb2FkKSA9PiB7XG4gICAgICAgIGNvbnN0IHZhbCA9IHBheWxvYWQudmFsdWU7XG4gICAgICAgIHJldHVybiAhdXRpbC5udWxsaXNoKHZhbCkgJiYgdmFsLnNpemUgIT09IHVuZGVmaW5lZDtcbiAgICB9KTtcbiAgICBpbnN0Ll96b2Qub25hdHRhY2gucHVzaCgoaW5zdCkgPT4ge1xuICAgICAgICBjb25zdCBiYWcgPSBpbnN0Ll96b2QuYmFnO1xuICAgICAgICBiYWcubWluaW11bSA9IGRlZi5zaXplO1xuICAgICAgICBiYWcubWF4aW11bSA9IGRlZi5zaXplO1xuICAgICAgICBiYWcuc2l6ZSA9IGRlZi5zaXplO1xuICAgIH0pO1xuICAgIGluc3QuX3pvZC5jaGVjayA9IChwYXlsb2FkKSA9PiB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gcGF5bG9hZC52YWx1ZTtcbiAgICAgICAgY29uc3Qgc2l6ZSA9IGlucHV0LnNpemU7XG4gICAgICAgIGlmIChzaXplID09PSBkZWYuc2l6ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgdG9vQmlnID0gc2l6ZSA+IGRlZi5zaXplO1xuICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgIG9yaWdpbjogdXRpbC5nZXRTaXphYmxlT3JpZ2luKGlucHV0KSxcbiAgICAgICAgICAgIC4uLih0b29CaWcgPyB7IGNvZGU6IFwidG9vX2JpZ1wiLCBtYXhpbXVtOiBkZWYuc2l6ZSB9IDogeyBjb2RlOiBcInRvb19zbWFsbFwiLCBtaW5pbXVtOiBkZWYuc2l6ZSB9KSxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIGV4YWN0OiB0cnVlLFxuICAgICAgICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsXG4gICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgY29udGludWU6ICFkZWYuYWJvcnQsXG4gICAgICAgIH0pO1xuICAgIH07XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kQ2hlY2tNYXhMZW5ndGggPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZENoZWNrTWF4TGVuZ3RoXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICB2YXIgX2E7XG4gICAgJFpvZENoZWNrLmluaXQoaW5zdCwgZGVmKTtcbiAgICAoX2EgPSBpbnN0Ll96b2QuZGVmKS53aGVuID8/IChfYS53aGVuID0gKHBheWxvYWQpID0+IHtcbiAgICAgICAgY29uc3QgdmFsID0gcGF5bG9hZC52YWx1ZTtcbiAgICAgICAgcmV0dXJuICF1dGlsLm51bGxpc2godmFsKSAmJiB2YWwubGVuZ3RoICE9PSB1bmRlZmluZWQ7XG4gICAgfSk7XG4gICAgaW5zdC5fem9kLm9uYXR0YWNoLnB1c2goKGluc3QpID0+IHtcbiAgICAgICAgY29uc3QgY3VyciA9IChpbnN0Ll96b2QuYmFnLm1heGltdW0gPz8gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKTtcbiAgICAgICAgaWYgKGRlZi5tYXhpbXVtIDwgY3VycilcbiAgICAgICAgICAgIGluc3QuX3pvZC5iYWcubWF4aW11bSA9IGRlZi5tYXhpbXVtO1xuICAgIH0pO1xuICAgIGluc3QuX3pvZC5jaGVjayA9IChwYXlsb2FkKSA9PiB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gcGF5bG9hZC52YWx1ZTtcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuICAgICAgICBpZiAobGVuZ3RoIDw9IGRlZi5tYXhpbXVtKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBvcmlnaW4gPSB1dGlsLmdldExlbmd0aGFibGVPcmlnaW4oaW5wdXQpO1xuICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgIG9yaWdpbixcbiAgICAgICAgICAgIGNvZGU6IFwidG9vX2JpZ1wiLFxuICAgICAgICAgICAgbWF4aW11bTogZGVmLm1heGltdW0sXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgIGluc3QsXG4gICAgICAgICAgICBjb250aW51ZTogIWRlZi5hYm9ydCxcbiAgICAgICAgfSk7XG4gICAgfTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RDaGVja01pbkxlbmd0aCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kQ2hlY2tNaW5MZW5ndGhcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIHZhciBfYTtcbiAgICAkWm9kQ2hlY2suaW5pdChpbnN0LCBkZWYpO1xuICAgIChfYSA9IGluc3QuX3pvZC5kZWYpLndoZW4gPz8gKF9hLndoZW4gPSAocGF5bG9hZCkgPT4ge1xuICAgICAgICBjb25zdCB2YWwgPSBwYXlsb2FkLnZhbHVlO1xuICAgICAgICByZXR1cm4gIXV0aWwubnVsbGlzaCh2YWwpICYmIHZhbC5sZW5ndGggIT09IHVuZGVmaW5lZDtcbiAgICB9KTtcbiAgICBpbnN0Ll96b2Qub25hdHRhY2gucHVzaCgoaW5zdCkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyID0gKGluc3QuX3pvZC5iYWcubWluaW11bSA/PyBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkpO1xuICAgICAgICBpZiAoZGVmLm1pbmltdW0gPiBjdXJyKVxuICAgICAgICAgICAgaW5zdC5fem9kLmJhZy5taW5pbXVtID0gZGVmLm1pbmltdW07XG4gICAgfSk7XG4gICAgaW5zdC5fem9kLmNoZWNrID0gKHBheWxvYWQpID0+IHtcbiAgICAgICAgY29uc3QgaW5wdXQgPSBwYXlsb2FkLnZhbHVlO1xuICAgICAgICBjb25zdCBsZW5ndGggPSBpbnB1dC5sZW5ndGg7XG4gICAgICAgIGlmIChsZW5ndGggPj0gZGVmLm1pbmltdW0pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IG9yaWdpbiA9IHV0aWwuZ2V0TGVuZ3RoYWJsZU9yaWdpbihpbnB1dCk7XG4gICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgb3JpZ2luLFxuICAgICAgICAgICAgY29kZTogXCJ0b29fc21hbGxcIixcbiAgICAgICAgICAgIG1pbmltdW06IGRlZi5taW5pbXVtLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgY29udGludWU6ICFkZWYuYWJvcnQsXG4gICAgICAgIH0pO1xuICAgIH07XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kQ2hlY2tMZW5ndGhFcXVhbHMgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZENoZWNrTGVuZ3RoRXF1YWxzXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICB2YXIgX2E7XG4gICAgJFpvZENoZWNrLmluaXQoaW5zdCwgZGVmKTtcbiAgICAoX2EgPSBpbnN0Ll96b2QuZGVmKS53aGVuID8/IChfYS53aGVuID0gKHBheWxvYWQpID0+IHtcbiAgICAgICAgY29uc3QgdmFsID0gcGF5bG9hZC52YWx1ZTtcbiAgICAgICAgcmV0dXJuICF1dGlsLm51bGxpc2godmFsKSAmJiB2YWwubGVuZ3RoICE9PSB1bmRlZmluZWQ7XG4gICAgfSk7XG4gICAgaW5zdC5fem9kLm9uYXR0YWNoLnB1c2goKGluc3QpID0+IHtcbiAgICAgICAgY29uc3QgYmFnID0gaW5zdC5fem9kLmJhZztcbiAgICAgICAgYmFnLm1pbmltdW0gPSBkZWYubGVuZ3RoO1xuICAgICAgICBiYWcubWF4aW11bSA9IGRlZi5sZW5ndGg7XG4gICAgICAgIGJhZy5sZW5ndGggPSBkZWYubGVuZ3RoO1xuICAgIH0pO1xuICAgIGluc3QuX3pvZC5jaGVjayA9IChwYXlsb2FkKSA9PiB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gcGF5bG9hZC52YWx1ZTtcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuICAgICAgICBpZiAobGVuZ3RoID09PSBkZWYubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBvcmlnaW4gPSB1dGlsLmdldExlbmd0aGFibGVPcmlnaW4oaW5wdXQpO1xuICAgICAgICBjb25zdCB0b29CaWcgPSBsZW5ndGggPiBkZWYubGVuZ3RoO1xuICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgIG9yaWdpbixcbiAgICAgICAgICAgIC4uLih0b29CaWcgPyB7IGNvZGU6IFwidG9vX2JpZ1wiLCBtYXhpbXVtOiBkZWYubGVuZ3RoIH0gOiB7IGNvZGU6IFwidG9vX3NtYWxsXCIsIG1pbmltdW06IGRlZi5sZW5ndGggfSksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBleGFjdDogdHJ1ZSxcbiAgICAgICAgICAgIGlucHV0OiBwYXlsb2FkLnZhbHVlLFxuICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgICAgIGNvbnRpbnVlOiAhZGVmLmFib3J0LFxuICAgICAgICB9KTtcbiAgICB9O1xufSk7XG5leHBvcnQgY29uc3QgJFpvZENoZWNrU3RyaW5nRm9ybWF0ID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RDaGVja1N0cmluZ0Zvcm1hdFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICAkWm9kQ2hlY2suaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX3pvZC5vbmF0dGFjaC5wdXNoKChpbnN0KSA9PiB7XG4gICAgICAgIGNvbnN0IGJhZyA9IGluc3QuX3pvZC5iYWc7XG4gICAgICAgIGJhZy5mb3JtYXQgPSBkZWYuZm9ybWF0O1xuICAgICAgICBpZiAoZGVmLnBhdHRlcm4pIHtcbiAgICAgICAgICAgIGJhZy5wYXR0ZXJucyA/PyAoYmFnLnBhdHRlcm5zID0gbmV3IFNldCgpKTtcbiAgICAgICAgICAgIGJhZy5wYXR0ZXJucy5hZGQoZGVmLnBhdHRlcm4pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgaWYgKGRlZi5wYXR0ZXJuKVxuICAgICAgICAoX2EgPSBpbnN0Ll96b2QpLmNoZWNrID8/IChfYS5jaGVjayA9IChwYXlsb2FkKSA9PiB7XG4gICAgICAgICAgICBkZWYucGF0dGVybi5sYXN0SW5kZXggPSAwO1xuICAgICAgICAgICAgaWYgKGRlZi5wYXR0ZXJuLnRlc3QocGF5bG9hZC52YWx1ZSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgb3JpZ2luOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgIGNvZGU6IFwiaW52YWxpZF9mb3JtYXRcIixcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IGRlZi5mb3JtYXQsXG4gICAgICAgICAgICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsXG4gICAgICAgICAgICAgICAgLi4uKGRlZi5wYXR0ZXJuID8geyBwYXR0ZXJuOiBkZWYucGF0dGVybi50b1N0cmluZygpIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgICAgICAgICBjb250aW51ZTogIWRlZi5hYm9ydCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICBlbHNlXG4gICAgICAgIChfYiA9IGluc3QuX3pvZCkuY2hlY2sgPz8gKF9iLmNoZWNrID0gKCkgPT4geyB9KTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RDaGVja1JlZ2V4ID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RDaGVja1JlZ2V4XCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAkWm9kQ2hlY2tTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX3pvZC5jaGVjayA9IChwYXlsb2FkKSA9PiB7XG4gICAgICAgIGRlZi5wYXR0ZXJuLmxhc3RJbmRleCA9IDA7XG4gICAgICAgIGlmIChkZWYucGF0dGVybi50ZXN0KHBheWxvYWQudmFsdWUpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgIG9yaWdpbjogXCJzdHJpbmdcIixcbiAgICAgICAgICAgIGNvZGU6IFwiaW52YWxpZF9mb3JtYXRcIixcbiAgICAgICAgICAgIGZvcm1hdDogXCJyZWdleFwiLFxuICAgICAgICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsXG4gICAgICAgICAgICBwYXR0ZXJuOiBkZWYucGF0dGVybi50b1N0cmluZygpLFxuICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgICAgIGNvbnRpbnVlOiAhZGVmLmFib3J0LFxuICAgICAgICB9KTtcbiAgICB9O1xufSk7XG5leHBvcnQgY29uc3QgJFpvZENoZWNrTG93ZXJDYXNlID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RDaGVja0xvd2VyQ2FzZVwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgZGVmLnBhdHRlcm4gPz8gKGRlZi5wYXR0ZXJuID0gcmVnZXhlcy5sb3dlcmNhc2UpO1xuICAgICRab2RDaGVja1N0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kQ2hlY2tVcHBlckNhc2UgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZENoZWNrVXBwZXJDYXNlXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBkZWYucGF0dGVybiA/PyAoZGVmLnBhdHRlcm4gPSByZWdleGVzLnVwcGVyY2FzZSk7XG4gICAgJFpvZENoZWNrU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RDaGVja0luY2x1ZGVzID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RDaGVja0luY2x1ZGVzXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAkWm9kQ2hlY2suaW5pdChpbnN0LCBkZWYpO1xuICAgIGNvbnN0IGVzY2FwZWRSZWdleCA9IHV0aWwuZXNjYXBlUmVnZXgoZGVmLmluY2x1ZGVzKTtcbiAgICBjb25zdCBwYXR0ZXJuID0gbmV3IFJlZ0V4cCh0eXBlb2YgZGVmLnBvc2l0aW9uID09PSBcIm51bWJlclwiID8gYF4ueyR7ZGVmLnBvc2l0aW9ufX0ke2VzY2FwZWRSZWdleH1gIDogZXNjYXBlZFJlZ2V4KTtcbiAgICBkZWYucGF0dGVybiA9IHBhdHRlcm47XG4gICAgaW5zdC5fem9kLm9uYXR0YWNoLnB1c2goKGluc3QpID0+IHtcbiAgICAgICAgY29uc3QgYmFnID0gaW5zdC5fem9kLmJhZztcbiAgICAgICAgYmFnLnBhdHRlcm5zID8/IChiYWcucGF0dGVybnMgPSBuZXcgU2V0KCkpO1xuICAgICAgICBiYWcucGF0dGVybnMuYWRkKHBhdHRlcm4pO1xuICAgIH0pO1xuICAgIGluc3QuX3pvZC5jaGVjayA9IChwYXlsb2FkKSA9PiB7XG4gICAgICAgIGlmIChwYXlsb2FkLnZhbHVlLmluY2x1ZGVzKGRlZi5pbmNsdWRlcywgZGVmLnBvc2l0aW9uKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICBvcmlnaW46IFwic3RyaW5nXCIsXG4gICAgICAgICAgICBjb2RlOiBcImludmFsaWRfZm9ybWF0XCIsXG4gICAgICAgICAgICBmb3JtYXQ6IFwiaW5jbHVkZXNcIixcbiAgICAgICAgICAgIGluY2x1ZGVzOiBkZWYuaW5jbHVkZXMsXG4gICAgICAgICAgICBpbnB1dDogcGF5bG9hZC52YWx1ZSxcbiAgICAgICAgICAgIGluc3QsXG4gICAgICAgICAgICBjb250aW51ZTogIWRlZi5hYm9ydCxcbiAgICAgICAgfSk7XG4gICAgfTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RDaGVja1N0YXJ0c1dpdGggPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZENoZWNrU3RhcnRzV2l0aFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgJFpvZENoZWNrLmluaXQoaW5zdCwgZGVmKTtcbiAgICBjb25zdCBwYXR0ZXJuID0gbmV3IFJlZ0V4cChgXiR7dXRpbC5lc2NhcGVSZWdleChkZWYucHJlZml4KX0uKmApO1xuICAgIGRlZi5wYXR0ZXJuID8/IChkZWYucGF0dGVybiA9IHBhdHRlcm4pO1xuICAgIGluc3QuX3pvZC5vbmF0dGFjaC5wdXNoKChpbnN0KSA9PiB7XG4gICAgICAgIGNvbnN0IGJhZyA9IGluc3QuX3pvZC5iYWc7XG4gICAgICAgIGJhZy5wYXR0ZXJucyA/PyAoYmFnLnBhdHRlcm5zID0gbmV3IFNldCgpKTtcbiAgICAgICAgYmFnLnBhdHRlcm5zLmFkZChwYXR0ZXJuKTtcbiAgICB9KTtcbiAgICBpbnN0Ll96b2QuY2hlY2sgPSAocGF5bG9hZCkgPT4ge1xuICAgICAgICBpZiAocGF5bG9hZC52YWx1ZS5zdGFydHNXaXRoKGRlZi5wcmVmaXgpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgIG9yaWdpbjogXCJzdHJpbmdcIixcbiAgICAgICAgICAgIGNvZGU6IFwiaW52YWxpZF9mb3JtYXRcIixcbiAgICAgICAgICAgIGZvcm1hdDogXCJzdGFydHNfd2l0aFwiLFxuICAgICAgICAgICAgcHJlZml4OiBkZWYucHJlZml4LFxuICAgICAgICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsXG4gICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgY29udGludWU6ICFkZWYuYWJvcnQsXG4gICAgICAgIH0pO1xuICAgIH07XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kQ2hlY2tFbmRzV2l0aCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kQ2hlY2tFbmRzV2l0aFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgJFpvZENoZWNrLmluaXQoaW5zdCwgZGVmKTtcbiAgICBjb25zdCBwYXR0ZXJuID0gbmV3IFJlZ0V4cChgLioke3V0aWwuZXNjYXBlUmVnZXgoZGVmLnN1ZmZpeCl9JGApO1xuICAgIGRlZi5wYXR0ZXJuID8/IChkZWYucGF0dGVybiA9IHBhdHRlcm4pO1xuICAgIGluc3QuX3pvZC5vbmF0dGFjaC5wdXNoKChpbnN0KSA9PiB7XG4gICAgICAgIGNvbnN0IGJhZyA9IGluc3QuX3pvZC5iYWc7XG4gICAgICAgIGJhZy5wYXR0ZXJucyA/PyAoYmFnLnBhdHRlcm5zID0gbmV3IFNldCgpKTtcbiAgICAgICAgYmFnLnBhdHRlcm5zLmFkZChwYXR0ZXJuKTtcbiAgICB9KTtcbiAgICBpbnN0Ll96b2QuY2hlY2sgPSAocGF5bG9hZCkgPT4ge1xuICAgICAgICBpZiAocGF5bG9hZC52YWx1ZS5lbmRzV2l0aChkZWYuc3VmZml4KSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICBvcmlnaW46IFwic3RyaW5nXCIsXG4gICAgICAgICAgICBjb2RlOiBcImludmFsaWRfZm9ybWF0XCIsXG4gICAgICAgICAgICBmb3JtYXQ6IFwiZW5kc193aXRoXCIsXG4gICAgICAgICAgICBzdWZmaXg6IGRlZi5zdWZmaXgsXG4gICAgICAgICAgICBpbnB1dDogcGF5bG9hZC52YWx1ZSxcbiAgICAgICAgICAgIGluc3QsXG4gICAgICAgICAgICBjb250aW51ZTogIWRlZi5hYm9ydCxcbiAgICAgICAgfSk7XG4gICAgfTtcbn0pO1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vICAgICRab2RDaGVja1Byb3BlcnR5ICAgIC8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuZnVuY3Rpb24gaGFuZGxlQ2hlY2tQcm9wZXJ0eVJlc3VsdChyZXN1bHQsIHBheWxvYWQsIHByb3BlcnR5KSB7XG4gICAgaWYgKHJlc3VsdC5pc3N1ZXMubGVuZ3RoKSB7XG4gICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goLi4udXRpbC5wcmVmaXhJc3N1ZXMocHJvcGVydHksIHJlc3VsdC5pc3N1ZXMpKTtcbiAgICB9XG59XG5leHBvcnQgY29uc3QgJFpvZENoZWNrUHJvcGVydHkgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZENoZWNrUHJvcGVydHlcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RDaGVjay5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLmNoZWNrID0gKHBheWxvYWQpID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gZGVmLnNjaGVtYS5fem9kLnJ1bih7XG4gICAgICAgICAgICB2YWx1ZTogcGF5bG9hZC52YWx1ZVtkZWYucHJvcGVydHldLFxuICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgfSwge30pO1xuICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKChyZXN1bHQpID0+IGhhbmRsZUNoZWNrUHJvcGVydHlSZXN1bHQocmVzdWx0LCBwYXlsb2FkLCBkZWYucHJvcGVydHkpKTtcbiAgICAgICAgfVxuICAgICAgICBoYW5kbGVDaGVja1Byb3BlcnR5UmVzdWx0KHJlc3VsdCwgcGF5bG9hZCwgZGVmLnByb3BlcnR5KTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH07XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kQ2hlY2tNaW1lVHlwZSA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kQ2hlY2tNaW1lVHlwZVwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgJFpvZENoZWNrLmluaXQoaW5zdCwgZGVmKTtcbiAgICBjb25zdCBtaW1lU2V0ID0gbmV3IFNldChkZWYubWltZSk7XG4gICAgaW5zdC5fem9kLm9uYXR0YWNoLnB1c2goKGluc3QpID0+IHtcbiAgICAgICAgaW5zdC5fem9kLmJhZy5taW1lID0gZGVmLm1pbWU7XG4gICAgfSk7XG4gICAgaW5zdC5fem9kLmNoZWNrID0gKHBheWxvYWQpID0+IHtcbiAgICAgICAgaWYgKG1pbWVTZXQuaGFzKHBheWxvYWQudmFsdWUudHlwZSkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgY29kZTogXCJpbnZhbGlkX3ZhbHVlXCIsXG4gICAgICAgICAgICB2YWx1ZXM6IGRlZi5taW1lLFxuICAgICAgICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUudHlwZSxcbiAgICAgICAgICAgIGluc3QsXG4gICAgICAgICAgICBjb250aW51ZTogIWRlZi5hYm9ydCxcbiAgICAgICAgfSk7XG4gICAgfTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RDaGVja092ZXJ3cml0ZSA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kQ2hlY2tPdmVyd3JpdGVcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RDaGVjay5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLmNoZWNrID0gKHBheWxvYWQpID0+IHtcbiAgICAgICAgcGF5bG9hZC52YWx1ZSA9IGRlZi50eChwYXlsb2FkLnZhbHVlKTtcbiAgICB9O1xufSk7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/checks.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/core.js":
/*!*******************************************************************!*\
  !*** ./node_modules/better-auth/node_modules/zod/v4/core/core.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $ZodAsyncError: () => (/* binding */ $ZodAsyncError),\n/* harmony export */   $ZodEncodeError: () => (/* binding */ $ZodEncodeError),\n/* harmony export */   $brand: () => (/* binding */ $brand),\n/* harmony export */   $constructor: () => (/* binding */ $constructor),\n/* harmony export */   NEVER: () => (/* binding */ NEVER),\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   globalConfig: () => (/* binding */ globalConfig)\n/* harmony export */ });\n/** A special constant with type `never` */\nconst NEVER = Object.freeze({\n    status: \"aborted\",\n});\nfunction $constructor(name, initializer, params) {\n    function init(inst, def) {\n        var _a;\n        Object.defineProperty(inst, \"_zod\", {\n            value: inst._zod ?? {},\n            enumerable: false,\n        });\n        (_a = inst._zod).traits ?? (_a.traits = new Set());\n        inst._zod.traits.add(name);\n        initializer(inst, def);\n        // support prototype modifications\n        for (const k in _.prototype) {\n            if (!(k in inst))\n                Object.defineProperty(inst, k, { value: _.prototype[k].bind(inst) });\n        }\n        inst._zod.constr = _;\n        inst._zod.def = def;\n    }\n    // doesn't work if Parent has a constructor with arguments\n    const Parent = params?.Parent ?? Object;\n    class Definition extends Parent {\n    }\n    Object.defineProperty(Definition, \"name\", { value: name });\n    function _(def) {\n        var _a;\n        const inst = params?.Parent ? new Definition() : this;\n        init(inst, def);\n        (_a = inst._zod).deferred ?? (_a.deferred = []);\n        for (const fn of inst._zod.deferred) {\n            fn();\n        }\n        return inst;\n    }\n    Object.defineProperty(_, \"init\", { value: init });\n    Object.defineProperty(_, Symbol.hasInstance, {\n        value: (inst) => {\n            if (params?.Parent && inst instanceof params.Parent)\n                return true;\n            return inst?._zod?.traits?.has(name);\n        },\n    });\n    Object.defineProperty(_, \"name\", { value: name });\n    return _;\n}\n//////////////////////////////   UTILITIES   ///////////////////////////////////////\nconst $brand = Symbol(\"zod_brand\");\nclass $ZodAsyncError extends Error {\n    constructor() {\n        super(`Encountered Promise during synchronous parse. Use .parseAsync() instead.`);\n    }\n}\nclass $ZodEncodeError extends Error {\n    constructor(name) {\n        super(`Encountered unidirectional transform during encode: ${name}`);\n        this.name = \"ZodEncodeError\";\n    }\n}\nconst globalConfig = {};\nfunction config(newConfig) {\n    if (newConfig)\n        Object.assign(globalConfig, newConfig);\n    return globalConfig;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvbm9kZV9tb2R1bGVzL3pvZC92NC9jb3JlL2NvcmUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQ087QUFDUDtBQUNBLENBQUM7QUFDK0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxrQ0FBa0M7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxhQUFhO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLGFBQWE7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0wsdUNBQXVDLGFBQWE7QUFDcEQ7QUFDQTtBQUNBO0FBQ087QUFDQTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLHFFQUFxRSxLQUFLO0FBQzFFO0FBQ0E7QUFDQTtBQUNPO0FBQ0E7QUFDUDtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhbWFhblxcT25lRHJpdmVcXERlc2t0b3BcXEthbmRpZF8yXFxOZXcgZm9sZGVyICgyKVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcbm9kZV9tb2R1bGVzXFx6b2RcXHY0XFxjb3JlXFxjb3JlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKiBBIHNwZWNpYWwgY29uc3RhbnQgd2l0aCB0eXBlIGBuZXZlcmAgKi9cbmV4cG9ydCBjb25zdCBORVZFUiA9IE9iamVjdC5mcmVlemUoe1xuICAgIHN0YXR1czogXCJhYm9ydGVkXCIsXG59KTtcbmV4cG9ydCAvKkBfX05PX1NJREVfRUZGRUNUU19fKi8gZnVuY3Rpb24gJGNvbnN0cnVjdG9yKG5hbWUsIGluaXRpYWxpemVyLCBwYXJhbXMpIHtcbiAgICBmdW5jdGlvbiBpbml0KGluc3QsIGRlZikge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpbnN0LCBcIl96b2RcIiwge1xuICAgICAgICAgICAgdmFsdWU6IGluc3QuX3pvZCA/PyB7fSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9KTtcbiAgICAgICAgKF9hID0gaW5zdC5fem9kKS50cmFpdHMgPz8gKF9hLnRyYWl0cyA9IG5ldyBTZXQoKSk7XG4gICAgICAgIGluc3QuX3pvZC50cmFpdHMuYWRkKG5hbWUpO1xuICAgICAgICBpbml0aWFsaXplcihpbnN0LCBkZWYpO1xuICAgICAgICAvLyBzdXBwb3J0IHByb3RvdHlwZSBtb2RpZmljYXRpb25zXG4gICAgICAgIGZvciAoY29uc3QgayBpbiBfLnByb3RvdHlwZSkge1xuICAgICAgICAgICAgaWYgKCEoayBpbiBpbnN0KSlcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoaW5zdCwgaywgeyB2YWx1ZTogXy5wcm90b3R5cGVba10uYmluZChpbnN0KSB9KTtcbiAgICAgICAgfVxuICAgICAgICBpbnN0Ll96b2QuY29uc3RyID0gXztcbiAgICAgICAgaW5zdC5fem9kLmRlZiA9IGRlZjtcbiAgICB9XG4gICAgLy8gZG9lc24ndCB3b3JrIGlmIFBhcmVudCBoYXMgYSBjb25zdHJ1Y3RvciB3aXRoIGFyZ3VtZW50c1xuICAgIGNvbnN0IFBhcmVudCA9IHBhcmFtcz8uUGFyZW50ID8/IE9iamVjdDtcbiAgICBjbGFzcyBEZWZpbml0aW9uIGV4dGVuZHMgUGFyZW50IHtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KERlZmluaXRpb24sIFwibmFtZVwiLCB7IHZhbHVlOiBuYW1lIH0pO1xuICAgIGZ1bmN0aW9uIF8oZGVmKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgaW5zdCA9IHBhcmFtcz8uUGFyZW50ID8gbmV3IERlZmluaXRpb24oKSA6IHRoaXM7XG4gICAgICAgIGluaXQoaW5zdCwgZGVmKTtcbiAgICAgICAgKF9hID0gaW5zdC5fem9kKS5kZWZlcnJlZCA/PyAoX2EuZGVmZXJyZWQgPSBbXSk7XG4gICAgICAgIGZvciAoY29uc3QgZm4gb2YgaW5zdC5fem9kLmRlZmVycmVkKSB7XG4gICAgICAgICAgICBmbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbnN0O1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoXywgXCJpbml0XCIsIHsgdmFsdWU6IGluaXQgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF8sIFN5bWJvbC5oYXNJbnN0YW5jZSwge1xuICAgICAgICB2YWx1ZTogKGluc3QpID0+IHtcbiAgICAgICAgICAgIGlmIChwYXJhbXM/LlBhcmVudCAmJiBpbnN0IGluc3RhbmNlb2YgcGFyYW1zLlBhcmVudClcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiBpbnN0Py5fem9kPy50cmFpdHM/LmhhcyhuYW1lKTtcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoXywgXCJuYW1lXCIsIHsgdmFsdWU6IG5hbWUgfSk7XG4gICAgcmV0dXJuIF87XG59XG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gICBVVElMSVRJRVMgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbmV4cG9ydCBjb25zdCAkYnJhbmQgPSBTeW1ib2woXCJ6b2RfYnJhbmRcIik7XG5leHBvcnQgY2xhc3MgJFpvZEFzeW5jRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKGBFbmNvdW50ZXJlZCBQcm9taXNlIGR1cmluZyBzeW5jaHJvbm91cyBwYXJzZS4gVXNlIC5wYXJzZUFzeW5jKCkgaW5zdGVhZC5gKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgJFpvZEVuY29kZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcbiAgICAgICAgc3VwZXIoYEVuY291bnRlcmVkIHVuaWRpcmVjdGlvbmFsIHRyYW5zZm9ybSBkdXJpbmcgZW5jb2RlOiAke25hbWV9YCk7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiWm9kRW5jb2RlRXJyb3JcIjtcbiAgICB9XG59XG5leHBvcnQgY29uc3QgZ2xvYmFsQ29uZmlnID0ge307XG5leHBvcnQgZnVuY3Rpb24gY29uZmlnKG5ld0NvbmZpZykge1xuICAgIGlmIChuZXdDb25maWcpXG4gICAgICAgIE9iamVjdC5hc3NpZ24oZ2xvYmFsQ29uZmlnLCBuZXdDb25maWcpO1xuICAgIHJldHVybiBnbG9iYWxDb25maWc7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/core.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/doc.js":
/*!******************************************************************!*\
  !*** ./node_modules/better-auth/node_modules/zod/v4/core/doc.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Doc: () => (/* binding */ Doc)\n/* harmony export */ });\nclass Doc {\n    constructor(args = []) {\n        this.content = [];\n        this.indent = 0;\n        if (this)\n            this.args = args;\n    }\n    indented(fn) {\n        this.indent += 1;\n        fn(this);\n        this.indent -= 1;\n    }\n    write(arg) {\n        if (typeof arg === \"function\") {\n            arg(this, { execution: \"sync\" });\n            arg(this, { execution: \"async\" });\n            return;\n        }\n        const content = arg;\n        const lines = content.split(\"\\n\").filter((x) => x);\n        const minIndent = Math.min(...lines.map((x) => x.length - x.trimStart().length));\n        const dedented = lines.map((x) => x.slice(minIndent)).map((x) => \" \".repeat(this.indent * 2) + x);\n        for (const line of dedented) {\n            this.content.push(line);\n        }\n    }\n    compile() {\n        const F = Function;\n        const args = this?.args;\n        const content = this?.content ?? [``];\n        const lines = [...content.map((x) => `  ${x}`)];\n        // console.log(lines.join(\"\\n\"));\n        return new F(...args, lines.join(\"\\n\"));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvbm9kZV9tb2R1bGVzL3pvZC92NC9jb3JlL2RvYy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixtQkFBbUI7QUFDM0Msd0JBQXdCLG9CQUFvQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELEVBQUU7QUFDcEQ7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYW1hYW5cXE9uZURyaXZlXFxEZXNrdG9wXFxLYW5kaWRfMlxcTmV3IGZvbGRlciAoMilcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXG5vZGVfbW9kdWxlc1xcem9kXFx2NFxcY29yZVxcZG9jLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBEb2Mge1xuICAgIGNvbnN0cnVjdG9yKGFyZ3MgPSBbXSkge1xuICAgICAgICB0aGlzLmNvbnRlbnQgPSBbXTtcbiAgICAgICAgdGhpcy5pbmRlbnQgPSAwO1xuICAgICAgICBpZiAodGhpcylcbiAgICAgICAgICAgIHRoaXMuYXJncyA9IGFyZ3M7XG4gICAgfVxuICAgIGluZGVudGVkKGZuKSB7XG4gICAgICAgIHRoaXMuaW5kZW50ICs9IDE7XG4gICAgICAgIGZuKHRoaXMpO1xuICAgICAgICB0aGlzLmluZGVudCAtPSAxO1xuICAgIH1cbiAgICB3cml0ZShhcmcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBhcmcgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgYXJnKHRoaXMsIHsgZXhlY3V0aW9uOiBcInN5bmNcIiB9KTtcbiAgICAgICAgICAgIGFyZyh0aGlzLCB7IGV4ZWN1dGlvbjogXCJhc3luY1wiIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhcmc7XG4gICAgICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdChcIlxcblwiKS5maWx0ZXIoKHgpID0+IHgpO1xuICAgICAgICBjb25zdCBtaW5JbmRlbnQgPSBNYXRoLm1pbiguLi5saW5lcy5tYXAoKHgpID0+IHgubGVuZ3RoIC0geC50cmltU3RhcnQoKS5sZW5ndGgpKTtcbiAgICAgICAgY29uc3QgZGVkZW50ZWQgPSBsaW5lcy5tYXAoKHgpID0+IHguc2xpY2UobWluSW5kZW50KSkubWFwKCh4KSA9PiBcIiBcIi5yZXBlYXQodGhpcy5pbmRlbnQgKiAyKSArIHgpO1xuICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgZGVkZW50ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGVudC5wdXNoKGxpbmUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbXBpbGUoKSB7XG4gICAgICAgIGNvbnN0IEYgPSBGdW5jdGlvbjtcbiAgICAgICAgY29uc3QgYXJncyA9IHRoaXM/LmFyZ3M7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSB0aGlzPy5jb250ZW50ID8/IFtgYF07XG4gICAgICAgIGNvbnN0IGxpbmVzID0gWy4uLmNvbnRlbnQubWFwKCh4KSA9PiBgICAke3h9YCldO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhsaW5lcy5qb2luKFwiXFxuXCIpKTtcbiAgICAgICAgcmV0dXJuIG5ldyBGKC4uLmFyZ3MsIGxpbmVzLmpvaW4oXCJcXG5cIikpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/doc.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/errors.js":
/*!*********************************************************************!*\
  !*** ./node_modules/better-auth/node_modules/zod/v4/core/errors.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $ZodError: () => (/* binding */ $ZodError),\n/* harmony export */   $ZodRealError: () => (/* binding */ $ZodRealError),\n/* harmony export */   flattenError: () => (/* binding */ flattenError),\n/* harmony export */   formatError: () => (/* binding */ formatError),\n/* harmony export */   prettifyError: () => (/* binding */ prettifyError),\n/* harmony export */   toDotPath: () => (/* binding */ toDotPath),\n/* harmony export */   treeifyError: () => (/* binding */ treeifyError)\n/* harmony export */ });\n/* harmony import */ var _core_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/core.js\");\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./util.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/util.js\");\n\n\nconst initializer = (inst, def) => {\n    inst.name = \"$ZodError\";\n    Object.defineProperty(inst, \"_zod\", {\n        value: inst._zod,\n        enumerable: false,\n    });\n    Object.defineProperty(inst, \"issues\", {\n        value: def,\n        enumerable: false,\n    });\n    inst.message = JSON.stringify(def, _util_js__WEBPACK_IMPORTED_MODULE_0__.jsonStringifyReplacer, 2);\n    Object.defineProperty(inst, \"toString\", {\n        value: () => inst.message,\n        enumerable: false,\n    });\n};\nconst $ZodError = (0,_core_js__WEBPACK_IMPORTED_MODULE_1__.$constructor)(\"$ZodError\", initializer);\nconst $ZodRealError = (0,_core_js__WEBPACK_IMPORTED_MODULE_1__.$constructor)(\"$ZodError\", initializer, { Parent: Error });\nfunction flattenError(error, mapper = (issue) => issue.message) {\n    const fieldErrors = {};\n    const formErrors = [];\n    for (const sub of error.issues) {\n        if (sub.path.length > 0) {\n            fieldErrors[sub.path[0]] = fieldErrors[sub.path[0]] || [];\n            fieldErrors[sub.path[0]].push(mapper(sub));\n        }\n        else {\n            formErrors.push(mapper(sub));\n        }\n    }\n    return { formErrors, fieldErrors };\n}\nfunction formatError(error, _mapper) {\n    const mapper = _mapper ||\n        function (issue) {\n            return issue.message;\n        };\n    const fieldErrors = { _errors: [] };\n    const processError = (error) => {\n        for (const issue of error.issues) {\n            if (issue.code === \"invalid_union\" && issue.errors.length) {\n                issue.errors.map((issues) => processError({ issues }));\n            }\n            else if (issue.code === \"invalid_key\") {\n                processError({ issues: issue.issues });\n            }\n            else if (issue.code === \"invalid_element\") {\n                processError({ issues: issue.issues });\n            }\n            else if (issue.path.length === 0) {\n                fieldErrors._errors.push(mapper(issue));\n            }\n            else {\n                let curr = fieldErrors;\n                let i = 0;\n                while (i < issue.path.length) {\n                    const el = issue.path[i];\n                    const terminal = i === issue.path.length - 1;\n                    if (!terminal) {\n                        curr[el] = curr[el] || { _errors: [] };\n                    }\n                    else {\n                        curr[el] = curr[el] || { _errors: [] };\n                        curr[el]._errors.push(mapper(issue));\n                    }\n                    curr = curr[el];\n                    i++;\n                }\n            }\n        }\n    };\n    processError(error);\n    return fieldErrors;\n}\nfunction treeifyError(error, _mapper) {\n    const mapper = _mapper ||\n        function (issue) {\n            return issue.message;\n        };\n    const result = { errors: [] };\n    const processError = (error, path = []) => {\n        var _a, _b;\n        for (const issue of error.issues) {\n            if (issue.code === \"invalid_union\" && issue.errors.length) {\n                // regular union error\n                issue.errors.map((issues) => processError({ issues }, issue.path));\n            }\n            else if (issue.code === \"invalid_key\") {\n                processError({ issues: issue.issues }, issue.path);\n            }\n            else if (issue.code === \"invalid_element\") {\n                processError({ issues: issue.issues }, issue.path);\n            }\n            else {\n                const fullpath = [...path, ...issue.path];\n                if (fullpath.length === 0) {\n                    result.errors.push(mapper(issue));\n                    continue;\n                }\n                let curr = result;\n                let i = 0;\n                while (i < fullpath.length) {\n                    const el = fullpath[i];\n                    const terminal = i === fullpath.length - 1;\n                    if (typeof el === \"string\") {\n                        curr.properties ?? (curr.properties = {});\n                        (_a = curr.properties)[el] ?? (_a[el] = { errors: [] });\n                        curr = curr.properties[el];\n                    }\n                    else {\n                        curr.items ?? (curr.items = []);\n                        (_b = curr.items)[el] ?? (_b[el] = { errors: [] });\n                        curr = curr.items[el];\n                    }\n                    if (terminal) {\n                        curr.errors.push(mapper(issue));\n                    }\n                    i++;\n                }\n            }\n        }\n    };\n    processError(error);\n    return result;\n}\n/** Format a ZodError as a human-readable string in the following form.\n *\n * From\n *\n * ```ts\n * ZodError {\n *   issues: [\n *     {\n *       expected: 'string',\n *       code: 'invalid_type',\n *       path: [ 'username' ],\n *       message: 'Invalid input: expected string'\n *     },\n *     {\n *       expected: 'number',\n *       code: 'invalid_type',\n *       path: [ 'favoriteNumbers', 1 ],\n *       message: 'Invalid input: expected number'\n *     }\n *   ];\n * }\n * ```\n *\n * to\n *\n * ```\n * username\n *    Expected number, received string at \"username\n * favoriteNumbers[0]\n *    Invalid input: expected number\n * ```\n */\nfunction toDotPath(_path) {\n    const segs = [];\n    const path = _path.map((seg) => (typeof seg === \"object\" ? seg.key : seg));\n    for (const seg of path) {\n        if (typeof seg === \"number\")\n            segs.push(`[${seg}]`);\n        else if (typeof seg === \"symbol\")\n            segs.push(`[${JSON.stringify(String(seg))}]`);\n        else if (/[^\\w$]/.test(seg))\n            segs.push(`[${JSON.stringify(seg)}]`);\n        else {\n            if (segs.length)\n                segs.push(\".\");\n            segs.push(seg);\n        }\n    }\n    return segs.join(\"\");\n}\nfunction prettifyError(error) {\n    const lines = [];\n    // sort by path length\n    const issues = [...error.issues].sort((a, b) => (a.path ?? []).length - (b.path ?? []).length);\n    // Process each issue\n    for (const issue of issues) {\n        lines.push(` ${issue.message}`);\n        if (issue.path?.length)\n            lines.push(`   at ${toDotPath(issue.path)}`);\n    }\n    // Convert Map to formatted string\n    return lines.join(\"\\n\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvbm9kZV9tb2R1bGVzL3pvZC92NC9jb3JlL2Vycm9ycy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBeUM7QUFDUDtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCx1Q0FBdUMsMkRBQTBCO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNPLGtCQUFrQixzREFBWTtBQUM5QixzQkFBc0Isc0RBQVksNkJBQTZCLGVBQWU7QUFDOUU7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsUUFBUTtBQUNwRTtBQUNBO0FBQ0EsK0JBQStCLHNCQUFzQjtBQUNyRDtBQUNBO0FBQ0EsK0JBQStCLHNCQUFzQjtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlEO0FBQ2pEO0FBQ0E7QUFDQSxpREFBaUQ7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCxRQUFRO0FBQ3BFO0FBQ0E7QUFDQSwrQkFBK0Isc0JBQXNCO0FBQ3JEO0FBQ0E7QUFDQSwrQkFBK0Isc0JBQXNCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0VBQWdFO0FBQ2hFLGtFQUFrRSxZQUFZO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELFlBQVk7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLElBQUk7QUFDOUI7QUFDQSwwQkFBMEIsNEJBQTRCO0FBQ3REO0FBQ0EsMEJBQTBCLG9CQUFvQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGNBQWM7QUFDdEM7QUFDQSxpQ0FBaUMsc0JBQXNCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFtYWFuXFxPbmVEcml2ZVxcRGVza3RvcFxcS2FuZGlkXzJcXE5ldyBmb2xkZXIgKDIpXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxub2RlX21vZHVsZXNcXHpvZFxcdjRcXGNvcmVcXGVycm9ycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyAkY29uc3RydWN0b3IgfSBmcm9tIFwiLi9jb3JlLmpzXCI7XG5pbXBvcnQgKiBhcyB1dGlsIGZyb20gXCIuL3V0aWwuanNcIjtcbmNvbnN0IGluaXRpYWxpemVyID0gKGluc3QsIGRlZikgPT4ge1xuICAgIGluc3QubmFtZSA9IFwiJFpvZEVycm9yXCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGluc3QsIFwiX3pvZFwiLCB7XG4gICAgICAgIHZhbHVlOiBpbnN0Ll96b2QsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpbnN0LCBcImlzc3Vlc1wiLCB7XG4gICAgICAgIHZhbHVlOiBkZWYsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgIH0pO1xuICAgIGluc3QubWVzc2FnZSA9IEpTT04uc3RyaW5naWZ5KGRlZiwgdXRpbC5qc29uU3RyaW5naWZ5UmVwbGFjZXIsIDIpO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpbnN0LCBcInRvU3RyaW5nXCIsIHtcbiAgICAgICAgdmFsdWU6ICgpID0+IGluc3QubWVzc2FnZSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgfSk7XG59O1xuZXhwb3J0IGNvbnN0ICRab2RFcnJvciA9ICRjb25zdHJ1Y3RvcihcIiRab2RFcnJvclwiLCBpbml0aWFsaXplcik7XG5leHBvcnQgY29uc3QgJFpvZFJlYWxFcnJvciA9ICRjb25zdHJ1Y3RvcihcIiRab2RFcnJvclwiLCBpbml0aWFsaXplciwgeyBQYXJlbnQ6IEVycm9yIH0pO1xuZXhwb3J0IGZ1bmN0aW9uIGZsYXR0ZW5FcnJvcihlcnJvciwgbWFwcGVyID0gKGlzc3VlKSA9PiBpc3N1ZS5tZXNzYWdlKSB7XG4gICAgY29uc3QgZmllbGRFcnJvcnMgPSB7fTtcbiAgICBjb25zdCBmb3JtRXJyb3JzID0gW107XG4gICAgZm9yIChjb25zdCBzdWIgb2YgZXJyb3IuaXNzdWVzKSB7XG4gICAgICAgIGlmIChzdWIucGF0aC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBmaWVsZEVycm9yc1tzdWIucGF0aFswXV0gPSBmaWVsZEVycm9yc1tzdWIucGF0aFswXV0gfHwgW107XG4gICAgICAgICAgICBmaWVsZEVycm9yc1tzdWIucGF0aFswXV0ucHVzaChtYXBwZXIoc3ViKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3JtRXJyb3JzLnB1c2gobWFwcGVyKHN1YikpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7IGZvcm1FcnJvcnMsIGZpZWxkRXJyb3JzIH07XG59XG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RXJyb3IoZXJyb3IsIF9tYXBwZXIpIHtcbiAgICBjb25zdCBtYXBwZXIgPSBfbWFwcGVyIHx8XG4gICAgICAgIGZ1bmN0aW9uIChpc3N1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGlzc3VlLm1lc3NhZ2U7XG4gICAgICAgIH07XG4gICAgY29uc3QgZmllbGRFcnJvcnMgPSB7IF9lcnJvcnM6IFtdIH07XG4gICAgY29uc3QgcHJvY2Vzc0Vycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgaXNzdWUgb2YgZXJyb3IuaXNzdWVzKSB7XG4gICAgICAgICAgICBpZiAoaXNzdWUuY29kZSA9PT0gXCJpbnZhbGlkX3VuaW9uXCIgJiYgaXNzdWUuZXJyb3JzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlzc3VlLmVycm9ycy5tYXAoKGlzc3VlcykgPT4gcHJvY2Vzc0Vycm9yKHsgaXNzdWVzIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLmNvZGUgPT09IFwiaW52YWxpZF9rZXlcIikge1xuICAgICAgICAgICAgICAgIHByb2Nlc3NFcnJvcih7IGlzc3VlczogaXNzdWUuaXNzdWVzIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUuY29kZSA9PT0gXCJpbnZhbGlkX2VsZW1lbnRcIikge1xuICAgICAgICAgICAgICAgIHByb2Nlc3NFcnJvcih7IGlzc3VlczogaXNzdWUuaXNzdWVzIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUucGF0aC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBmaWVsZEVycm9ycy5fZXJyb3JzLnB1c2gobWFwcGVyKGlzc3VlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgY3VyciA9IGZpZWxkRXJyb3JzO1xuICAgICAgICAgICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgICAgICAgICB3aGlsZSAoaSA8IGlzc3VlLnBhdGgubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gaXNzdWUucGF0aFtpXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVybWluYWwgPSBpID09PSBpc3N1ZS5wYXRoLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGVybWluYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgeyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycltlbF0gPSBjdXJyW2VsXSB8fCB7IF9lcnJvcnM6IFtdIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyW2VsXS5fZXJyb3JzLnB1c2gobWFwcGVyKGlzc3VlKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY3VyciA9IGN1cnJbZWxdO1xuICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBwcm9jZXNzRXJyb3IoZXJyb3IpO1xuICAgIHJldHVybiBmaWVsZEVycm9ycztcbn1cbmV4cG9ydCBmdW5jdGlvbiB0cmVlaWZ5RXJyb3IoZXJyb3IsIF9tYXBwZXIpIHtcbiAgICBjb25zdCBtYXBwZXIgPSBfbWFwcGVyIHx8XG4gICAgICAgIGZ1bmN0aW9uIChpc3N1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGlzc3VlLm1lc3NhZ2U7XG4gICAgICAgIH07XG4gICAgY29uc3QgcmVzdWx0ID0geyBlcnJvcnM6IFtdIH07XG4gICAgY29uc3QgcHJvY2Vzc0Vycm9yID0gKGVycm9yLCBwYXRoID0gW10pID0+IHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgZm9yIChjb25zdCBpc3N1ZSBvZiBlcnJvci5pc3N1ZXMpIHtcbiAgICAgICAgICAgIGlmIChpc3N1ZS5jb2RlID09PSBcImludmFsaWRfdW5pb25cIiAmJiBpc3N1ZS5lcnJvcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgLy8gcmVndWxhciB1bmlvbiBlcnJvclxuICAgICAgICAgICAgICAgIGlzc3VlLmVycm9ycy5tYXAoKGlzc3VlcykgPT4gcHJvY2Vzc0Vycm9yKHsgaXNzdWVzIH0sIGlzc3VlLnBhdGgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLmNvZGUgPT09IFwiaW52YWxpZF9rZXlcIikge1xuICAgICAgICAgICAgICAgIHByb2Nlc3NFcnJvcih7IGlzc3VlczogaXNzdWUuaXNzdWVzIH0sIGlzc3VlLnBhdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUuY29kZSA9PT0gXCJpbnZhbGlkX2VsZW1lbnRcIikge1xuICAgICAgICAgICAgICAgIHByb2Nlc3NFcnJvcih7IGlzc3VlczogaXNzdWUuaXNzdWVzIH0sIGlzc3VlLnBhdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZnVsbHBhdGggPSBbLi4ucGF0aCwgLi4uaXNzdWUucGF0aF07XG4gICAgICAgICAgICAgICAgaWYgKGZ1bGxwYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuZXJyb3JzLnB1c2gobWFwcGVyKGlzc3VlKSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgY3VyciA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGkgPCBmdWxscGF0aC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZWwgPSBmdWxscGF0aFtpXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVybWluYWwgPSBpID09PSBmdWxscGF0aC5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGVsID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyLnByb3BlcnRpZXMgPz8gKGN1cnIucHJvcGVydGllcyA9IHt9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIChfYSA9IGN1cnIucHJvcGVydGllcylbZWxdID8/IChfYVtlbF0gPSB7IGVycm9yczogW10gfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyID0gY3Vyci5wcm9wZXJ0aWVzW2VsXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnIuaXRlbXMgPz8gKGN1cnIuaXRlbXMgPSBbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAoX2IgPSBjdXJyLml0ZW1zKVtlbF0gPz8gKF9iW2VsXSA9IHsgZXJyb3JzOiBbXSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnIgPSBjdXJyLml0ZW1zW2VsXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGVybWluYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnIuZXJyb3JzLnB1c2gobWFwcGVyKGlzc3VlKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcHJvY2Vzc0Vycm9yKGVycm9yKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLyoqIEZvcm1hdCBhIFpvZEVycm9yIGFzIGEgaHVtYW4tcmVhZGFibGUgc3RyaW5nIGluIHRoZSBmb2xsb3dpbmcgZm9ybS5cbiAqXG4gKiBGcm9tXG4gKlxuICogYGBgdHNcbiAqIFpvZEVycm9yIHtcbiAqICAgaXNzdWVzOiBbXG4gKiAgICAge1xuICogICAgICAgZXhwZWN0ZWQ6ICdzdHJpbmcnLFxuICogICAgICAgY29kZTogJ2ludmFsaWRfdHlwZScsXG4gKiAgICAgICBwYXRoOiBbICd1c2VybmFtZScgXSxcbiAqICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIGlucHV0OiBleHBlY3RlZCBzdHJpbmcnXG4gKiAgICAgfSxcbiAqICAgICB7XG4gKiAgICAgICBleHBlY3RlZDogJ251bWJlcicsXG4gKiAgICAgICBjb2RlOiAnaW52YWxpZF90eXBlJyxcbiAqICAgICAgIHBhdGg6IFsgJ2Zhdm9yaXRlTnVtYmVycycsIDEgXSxcbiAqICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIGlucHV0OiBleHBlY3RlZCBudW1iZXInXG4gKiAgICAgfVxuICogICBdO1xuICogfVxuICogYGBgXG4gKlxuICogdG9cbiAqXG4gKiBgYGBcbiAqIHVzZXJuYW1lXG4gKiAgIOKcliBFeHBlY3RlZCBudW1iZXIsIHJlY2VpdmVkIHN0cmluZyBhdCBcInVzZXJuYW1lXG4gKiBmYXZvcml0ZU51bWJlcnNbMF1cbiAqICAg4pyWIEludmFsaWQgaW5wdXQ6IGV4cGVjdGVkIG51bWJlclxuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0RvdFBhdGgoX3BhdGgpIHtcbiAgICBjb25zdCBzZWdzID0gW107XG4gICAgY29uc3QgcGF0aCA9IF9wYXRoLm1hcCgoc2VnKSA9PiAodHlwZW9mIHNlZyA9PT0gXCJvYmplY3RcIiA/IHNlZy5rZXkgOiBzZWcpKTtcbiAgICBmb3IgKGNvbnN0IHNlZyBvZiBwYXRoKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2VnID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgc2Vncy5wdXNoKGBbJHtzZWd9XWApO1xuICAgICAgICBlbHNlIGlmICh0eXBlb2Ygc2VnID09PSBcInN5bWJvbFwiKVxuICAgICAgICAgICAgc2Vncy5wdXNoKGBbJHtKU09OLnN0cmluZ2lmeShTdHJpbmcoc2VnKSl9XWApO1xuICAgICAgICBlbHNlIGlmICgvW15cXHckXS8udGVzdChzZWcpKVxuICAgICAgICAgICAgc2Vncy5wdXNoKGBbJHtKU09OLnN0cmluZ2lmeShzZWcpfV1gKTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoc2Vncy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgc2Vncy5wdXNoKFwiLlwiKTtcbiAgICAgICAgICAgIHNlZ3MucHVzaChzZWcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzZWdzLmpvaW4oXCJcIik7XG59XG5leHBvcnQgZnVuY3Rpb24gcHJldHRpZnlFcnJvcihlcnJvcikge1xuICAgIGNvbnN0IGxpbmVzID0gW107XG4gICAgLy8gc29ydCBieSBwYXRoIGxlbmd0aFxuICAgIGNvbnN0IGlzc3VlcyA9IFsuLi5lcnJvci5pc3N1ZXNdLnNvcnQoKGEsIGIpID0+IChhLnBhdGggPz8gW10pLmxlbmd0aCAtIChiLnBhdGggPz8gW10pLmxlbmd0aCk7XG4gICAgLy8gUHJvY2VzcyBlYWNoIGlzc3VlXG4gICAgZm9yIChjb25zdCBpc3N1ZSBvZiBpc3N1ZXMpIHtcbiAgICAgICAgbGluZXMucHVzaChg4pyWICR7aXNzdWUubWVzc2FnZX1gKTtcbiAgICAgICAgaWYgKGlzc3VlLnBhdGg/Lmxlbmd0aClcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYCAg4oaSIGF0ICR7dG9Eb3RQYXRoKGlzc3VlLnBhdGgpfWApO1xuICAgIH1cbiAgICAvLyBDb252ZXJ0IE1hcCB0byBmb3JtYXR0ZWQgc3RyaW5nXG4gICAgcmV0dXJuIGxpbmVzLmpvaW4oXCJcXG5cIik7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/errors.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/parse.js":
/*!********************************************************************!*\
  !*** ./node_modules/better-auth/node_modules/zod/v4/core/parse.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _decode: () => (/* binding */ _decode),\n/* harmony export */   _decodeAsync: () => (/* binding */ _decodeAsync),\n/* harmony export */   _encode: () => (/* binding */ _encode),\n/* harmony export */   _encodeAsync: () => (/* binding */ _encodeAsync),\n/* harmony export */   _parse: () => (/* binding */ _parse),\n/* harmony export */   _parseAsync: () => (/* binding */ _parseAsync),\n/* harmony export */   _safeDecode: () => (/* binding */ _safeDecode),\n/* harmony export */   _safeDecodeAsync: () => (/* binding */ _safeDecodeAsync),\n/* harmony export */   _safeEncode: () => (/* binding */ _safeEncode),\n/* harmony export */   _safeEncodeAsync: () => (/* binding */ _safeEncodeAsync),\n/* harmony export */   _safeParse: () => (/* binding */ _safeParse),\n/* harmony export */   _safeParseAsync: () => (/* binding */ _safeParseAsync),\n/* harmony export */   decode: () => (/* binding */ decode),\n/* harmony export */   decodeAsync: () => (/* binding */ decodeAsync),\n/* harmony export */   encode: () => (/* binding */ encode),\n/* harmony export */   encodeAsync: () => (/* binding */ encodeAsync),\n/* harmony export */   parse: () => (/* binding */ parse),\n/* harmony export */   parseAsync: () => (/* binding */ parseAsync),\n/* harmony export */   safeDecode: () => (/* binding */ safeDecode),\n/* harmony export */   safeDecodeAsync: () => (/* binding */ safeDecodeAsync),\n/* harmony export */   safeEncode: () => (/* binding */ safeEncode),\n/* harmony export */   safeEncodeAsync: () => (/* binding */ safeEncodeAsync),\n/* harmony export */   safeParse: () => (/* binding */ safeParse),\n/* harmony export */   safeParseAsync: () => (/* binding */ safeParseAsync)\n/* harmony export */ });\n/* harmony import */ var _core_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./core.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/core.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./errors.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/errors.js\");\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./util.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/util.js\");\n\n\n\nconst _parse = (_Err) => (schema, value, _ctx, _params) => {\n    const ctx = _ctx ? Object.assign(_ctx, { async: false }) : { async: false };\n    const result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise) {\n        throw new _core_js__WEBPACK_IMPORTED_MODULE_0__.$ZodAsyncError();\n    }\n    if (result.issues.length) {\n        const e = new (_params?.Err ?? _Err)(result.issues.map((iss) => _util_js__WEBPACK_IMPORTED_MODULE_1__.finalizeIssue(iss, ctx, _core_js__WEBPACK_IMPORTED_MODULE_0__.config())));\n        _util_js__WEBPACK_IMPORTED_MODULE_1__.captureStackTrace(e, _params?.callee);\n        throw e;\n    }\n    return result.value;\n};\nconst parse = /* @__PURE__*/ _parse(_errors_js__WEBPACK_IMPORTED_MODULE_2__.$ZodRealError);\nconst _parseAsync = (_Err) => async (schema, value, _ctx, params) => {\n    const ctx = _ctx ? Object.assign(_ctx, { async: true }) : { async: true };\n    let result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise)\n        result = await result;\n    if (result.issues.length) {\n        const e = new (params?.Err ?? _Err)(result.issues.map((iss) => _util_js__WEBPACK_IMPORTED_MODULE_1__.finalizeIssue(iss, ctx, _core_js__WEBPACK_IMPORTED_MODULE_0__.config())));\n        _util_js__WEBPACK_IMPORTED_MODULE_1__.captureStackTrace(e, params?.callee);\n        throw e;\n    }\n    return result.value;\n};\nconst parseAsync = /* @__PURE__*/ _parseAsync(_errors_js__WEBPACK_IMPORTED_MODULE_2__.$ZodRealError);\nconst _safeParse = (_Err) => (schema, value, _ctx) => {\n    const ctx = _ctx ? { ..._ctx, async: false } : { async: false };\n    const result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise) {\n        throw new _core_js__WEBPACK_IMPORTED_MODULE_0__.$ZodAsyncError();\n    }\n    return result.issues.length\n        ? {\n            success: false,\n            error: new (_Err ?? _errors_js__WEBPACK_IMPORTED_MODULE_2__.$ZodError)(result.issues.map((iss) => _util_js__WEBPACK_IMPORTED_MODULE_1__.finalizeIssue(iss, ctx, _core_js__WEBPACK_IMPORTED_MODULE_0__.config()))),\n        }\n        : { success: true, data: result.value };\n};\nconst safeParse = /* @__PURE__*/ _safeParse(_errors_js__WEBPACK_IMPORTED_MODULE_2__.$ZodRealError);\nconst _safeParseAsync = (_Err) => async (schema, value, _ctx) => {\n    const ctx = _ctx ? Object.assign(_ctx, { async: true }) : { async: true };\n    let result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise)\n        result = await result;\n    return result.issues.length\n        ? {\n            success: false,\n            error: new _Err(result.issues.map((iss) => _util_js__WEBPACK_IMPORTED_MODULE_1__.finalizeIssue(iss, ctx, _core_js__WEBPACK_IMPORTED_MODULE_0__.config()))),\n        }\n        : { success: true, data: result.value };\n};\nconst safeParseAsync = /* @__PURE__*/ _safeParseAsync(_errors_js__WEBPACK_IMPORTED_MODULE_2__.$ZodRealError);\nconst _encode = (_Err) => (schema, value, _ctx) => {\n    const ctx = _ctx ? Object.assign(_ctx, { direction: \"backward\" }) : { direction: \"backward\" };\n    return _parse(_Err)(schema, value, ctx);\n};\nconst encode = /* @__PURE__*/ _encode(_errors_js__WEBPACK_IMPORTED_MODULE_2__.$ZodRealError);\nconst _decode = (_Err) => (schema, value, _ctx) => {\n    return _parse(_Err)(schema, value, _ctx);\n};\nconst decode = /* @__PURE__*/ _decode(_errors_js__WEBPACK_IMPORTED_MODULE_2__.$ZodRealError);\nconst _encodeAsync = (_Err) => async (schema, value, _ctx) => {\n    const ctx = _ctx ? Object.assign(_ctx, { direction: \"backward\" }) : { direction: \"backward\" };\n    return _parseAsync(_Err)(schema, value, ctx);\n};\nconst encodeAsync = /* @__PURE__*/ _encodeAsync(_errors_js__WEBPACK_IMPORTED_MODULE_2__.$ZodRealError);\nconst _decodeAsync = (_Err) => async (schema, value, _ctx) => {\n    return _parseAsync(_Err)(schema, value, _ctx);\n};\nconst decodeAsync = /* @__PURE__*/ _decodeAsync(_errors_js__WEBPACK_IMPORTED_MODULE_2__.$ZodRealError);\nconst _safeEncode = (_Err) => (schema, value, _ctx) => {\n    const ctx = _ctx ? Object.assign(_ctx, { direction: \"backward\" }) : { direction: \"backward\" };\n    return _safeParse(_Err)(schema, value, ctx);\n};\nconst safeEncode = /* @__PURE__*/ _safeEncode(_errors_js__WEBPACK_IMPORTED_MODULE_2__.$ZodRealError);\nconst _safeDecode = (_Err) => (schema, value, _ctx) => {\n    return _safeParse(_Err)(schema, value, _ctx);\n};\nconst safeDecode = /* @__PURE__*/ _safeDecode(_errors_js__WEBPACK_IMPORTED_MODULE_2__.$ZodRealError);\nconst _safeEncodeAsync = (_Err) => async (schema, value, _ctx) => {\n    const ctx = _ctx ? Object.assign(_ctx, { direction: \"backward\" }) : { direction: \"backward\" };\n    return _safeParseAsync(_Err)(schema, value, ctx);\n};\nconst safeEncodeAsync = /* @__PURE__*/ _safeEncodeAsync(_errors_js__WEBPACK_IMPORTED_MODULE_2__.$ZodRealError);\nconst _safeDecodeAsync = (_Err) => async (schema, value, _ctx) => {\n    return _safeParseAsync(_Err)(schema, value, _ctx);\n};\nconst safeDecodeAsync = /* @__PURE__*/ _safeDecodeAsync(_errors_js__WEBPACK_IMPORTED_MODULE_2__.$ZodRealError);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvbm9kZV9tb2R1bGVzL3pvZC92NC9jb3JlL3BhcnNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFrQztBQUNJO0FBQ0o7QUFDM0I7QUFDUCw2Q0FBNkMsY0FBYyxNQUFNO0FBQ2pFLHFDQUFxQyxtQkFBbUI7QUFDeEQ7QUFDQSxrQkFBa0Isb0RBQW1CO0FBQ3JDO0FBQ0E7QUFDQSx3RUFBd0UsbURBQWtCLFdBQVcsNENBQVc7QUFDaEgsUUFBUSx1REFBc0I7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDTyxvQ0FBb0MscURBQW9CO0FBQ3hEO0FBQ1AsNkNBQTZDLGFBQWEsTUFBTTtBQUNoRSxtQ0FBbUMsbUJBQW1CO0FBQ3REO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RSxtREFBa0IsV0FBVyw0Q0FBVztBQUMvRyxRQUFRLHVEQUFzQjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNPLDhDQUE4QyxxREFBb0I7QUFDbEU7QUFDUCx5QkFBeUIsd0JBQXdCLElBQUk7QUFDckQscUNBQXFDLG1CQUFtQjtBQUN4RDtBQUNBLGtCQUFrQixvREFBbUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsaURBQWdCLDZCQUE2QixtREFBa0IsV0FBVyw0Q0FBVztBQUNySDtBQUNBLFlBQVk7QUFDWjtBQUNPLDRDQUE0QyxxREFBb0I7QUFDaEU7QUFDUCw2Q0FBNkMsYUFBYSxNQUFNO0FBQ2hFLG1DQUFtQyxtQkFBbUI7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUF1RCxtREFBa0IsV0FBVyw0Q0FBVztBQUMvRjtBQUNBLFlBQVk7QUFDWjtBQUNPLHNEQUFzRCxxREFBb0I7QUFDMUU7QUFDUCw2Q0FBNkMsdUJBQXVCLE1BQU07QUFDMUU7QUFDQTtBQUNPLHNDQUFzQyxxREFBb0I7QUFDMUQ7QUFDUDtBQUNBO0FBQ08sc0NBQXNDLHFEQUFvQjtBQUMxRDtBQUNQLDZDQUE2Qyx1QkFBdUIsTUFBTTtBQUMxRTtBQUNBO0FBQ08sZ0RBQWdELHFEQUFvQjtBQUNwRTtBQUNQO0FBQ0E7QUFDTyxnREFBZ0QscURBQW9CO0FBQ3BFO0FBQ1AsNkNBQTZDLHVCQUF1QixNQUFNO0FBQzFFO0FBQ0E7QUFDTyw4Q0FBOEMscURBQW9CO0FBQ2xFO0FBQ1A7QUFDQTtBQUNPLDhDQUE4QyxxREFBb0I7QUFDbEU7QUFDUCw2Q0FBNkMsdUJBQXVCLE1BQU07QUFDMUU7QUFDQTtBQUNPLHdEQUF3RCxxREFBb0I7QUFDNUU7QUFDUDtBQUNBO0FBQ08sd0RBQXdELHFEQUFvQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhbWFhblxcT25lRHJpdmVcXERlc2t0b3BcXEthbmRpZF8yXFxOZXcgZm9sZGVyICgyKVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcbm9kZV9tb2R1bGVzXFx6b2RcXHY0XFxjb3JlXFxwYXJzZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBjb3JlIGZyb20gXCIuL2NvcmUuanNcIjtcbmltcG9ydCAqIGFzIGVycm9ycyBmcm9tIFwiLi9lcnJvcnMuanNcIjtcbmltcG9ydCAqIGFzIHV0aWwgZnJvbSBcIi4vdXRpbC5qc1wiO1xuZXhwb3J0IGNvbnN0IF9wYXJzZSA9IChfRXJyKSA9PiAoc2NoZW1hLCB2YWx1ZSwgX2N0eCwgX3BhcmFtcykgPT4ge1xuICAgIGNvbnN0IGN0eCA9IF9jdHggPyBPYmplY3QuYXNzaWduKF9jdHgsIHsgYXN5bmM6IGZhbHNlIH0pIDogeyBhc3luYzogZmFsc2UgfTtcbiAgICBjb25zdCByZXN1bHQgPSBzY2hlbWEuX3pvZC5ydW4oeyB2YWx1ZSwgaXNzdWVzOiBbXSB9LCBjdHgpO1xuICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHRocm93IG5ldyBjb3JlLiRab2RBc3luY0Vycm9yKCk7XG4gICAgfVxuICAgIGlmIChyZXN1bHQuaXNzdWVzLmxlbmd0aCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IChfcGFyYW1zPy5FcnIgPz8gX0VycikocmVzdWx0Lmlzc3Vlcy5tYXAoKGlzcykgPT4gdXRpbC5maW5hbGl6ZUlzc3VlKGlzcywgY3R4LCBjb3JlLmNvbmZpZygpKSkpO1xuICAgICAgICB1dGlsLmNhcHR1cmVTdGFja1RyYWNlKGUsIF9wYXJhbXM/LmNhbGxlZSk7XG4gICAgICAgIHRocm93IGU7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQudmFsdWU7XG59O1xuZXhwb3J0IGNvbnN0IHBhcnNlID0gLyogQF9fUFVSRV9fKi8gX3BhcnNlKGVycm9ycy4kWm9kUmVhbEVycm9yKTtcbmV4cG9ydCBjb25zdCBfcGFyc2VBc3luYyA9IChfRXJyKSA9PiBhc3luYyAoc2NoZW1hLCB2YWx1ZSwgX2N0eCwgcGFyYW1zKSA9PiB7XG4gICAgY29uc3QgY3R4ID0gX2N0eCA/IE9iamVjdC5hc3NpZ24oX2N0eCwgeyBhc3luYzogdHJ1ZSB9KSA6IHsgYXN5bmM6IHRydWUgfTtcbiAgICBsZXQgcmVzdWx0ID0gc2NoZW1hLl96b2QucnVuKHsgdmFsdWUsIGlzc3VlczogW10gfSwgY3R4KTtcbiAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSlcbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgcmVzdWx0O1xuICAgIGlmIChyZXN1bHQuaXNzdWVzLmxlbmd0aCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IChwYXJhbXM/LkVyciA/PyBfRXJyKShyZXN1bHQuaXNzdWVzLm1hcCgoaXNzKSA9PiB1dGlsLmZpbmFsaXplSXNzdWUoaXNzLCBjdHgsIGNvcmUuY29uZmlnKCkpKSk7XG4gICAgICAgIHV0aWwuY2FwdHVyZVN0YWNrVHJhY2UoZSwgcGFyYW1zPy5jYWxsZWUpO1xuICAgICAgICB0aHJvdyBlO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0LnZhbHVlO1xufTtcbmV4cG9ydCBjb25zdCBwYXJzZUFzeW5jID0gLyogQF9fUFVSRV9fKi8gX3BhcnNlQXN5bmMoZXJyb3JzLiRab2RSZWFsRXJyb3IpO1xuZXhwb3J0IGNvbnN0IF9zYWZlUGFyc2UgPSAoX0VycikgPT4gKHNjaGVtYSwgdmFsdWUsIF9jdHgpID0+IHtcbiAgICBjb25zdCBjdHggPSBfY3R4ID8geyAuLi5fY3R4LCBhc3luYzogZmFsc2UgfSA6IHsgYXN5bmM6IGZhbHNlIH07XG4gICAgY29uc3QgcmVzdWx0ID0gc2NoZW1hLl96b2QucnVuKHsgdmFsdWUsIGlzc3VlczogW10gfSwgY3R4KTtcbiAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICB0aHJvdyBuZXcgY29yZS4kWm9kQXN5bmNFcnJvcigpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0Lmlzc3Vlcy5sZW5ndGhcbiAgICAgICAgPyB7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIGVycm9yOiBuZXcgKF9FcnIgPz8gZXJyb3JzLiRab2RFcnJvcikocmVzdWx0Lmlzc3Vlcy5tYXAoKGlzcykgPT4gdXRpbC5maW5hbGl6ZUlzc3VlKGlzcywgY3R4LCBjb3JlLmNvbmZpZygpKSkpLFxuICAgICAgICB9XG4gICAgICAgIDogeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQudmFsdWUgfTtcbn07XG5leHBvcnQgY29uc3Qgc2FmZVBhcnNlID0gLyogQF9fUFVSRV9fKi8gX3NhZmVQYXJzZShlcnJvcnMuJFpvZFJlYWxFcnJvcik7XG5leHBvcnQgY29uc3QgX3NhZmVQYXJzZUFzeW5jID0gKF9FcnIpID0+IGFzeW5jIChzY2hlbWEsIHZhbHVlLCBfY3R4KSA9PiB7XG4gICAgY29uc3QgY3R4ID0gX2N0eCA/IE9iamVjdC5hc3NpZ24oX2N0eCwgeyBhc3luYzogdHJ1ZSB9KSA6IHsgYXN5bmM6IHRydWUgfTtcbiAgICBsZXQgcmVzdWx0ID0gc2NoZW1hLl96b2QucnVuKHsgdmFsdWUsIGlzc3VlczogW10gfSwgY3R4KTtcbiAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSlcbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgcmVzdWx0O1xuICAgIHJldHVybiByZXN1bHQuaXNzdWVzLmxlbmd0aFxuICAgICAgICA/IHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3I6IG5ldyBfRXJyKHJlc3VsdC5pc3N1ZXMubWFwKChpc3MpID0+IHV0aWwuZmluYWxpemVJc3N1ZShpc3MsIGN0eCwgY29yZS5jb25maWcoKSkpKSxcbiAgICAgICAgfVxuICAgICAgICA6IHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0LnZhbHVlIH07XG59O1xuZXhwb3J0IGNvbnN0IHNhZmVQYXJzZUFzeW5jID0gLyogQF9fUFVSRV9fKi8gX3NhZmVQYXJzZUFzeW5jKGVycm9ycy4kWm9kUmVhbEVycm9yKTtcbmV4cG9ydCBjb25zdCBfZW5jb2RlID0gKF9FcnIpID0+IChzY2hlbWEsIHZhbHVlLCBfY3R4KSA9PiB7XG4gICAgY29uc3QgY3R4ID0gX2N0eCA/IE9iamVjdC5hc3NpZ24oX2N0eCwgeyBkaXJlY3Rpb246IFwiYmFja3dhcmRcIiB9KSA6IHsgZGlyZWN0aW9uOiBcImJhY2t3YXJkXCIgfTtcbiAgICByZXR1cm4gX3BhcnNlKF9FcnIpKHNjaGVtYSwgdmFsdWUsIGN0eCk7XG59O1xuZXhwb3J0IGNvbnN0IGVuY29kZSA9IC8qIEBfX1BVUkVfXyovIF9lbmNvZGUoZXJyb3JzLiRab2RSZWFsRXJyb3IpO1xuZXhwb3J0IGNvbnN0IF9kZWNvZGUgPSAoX0VycikgPT4gKHNjaGVtYSwgdmFsdWUsIF9jdHgpID0+IHtcbiAgICByZXR1cm4gX3BhcnNlKF9FcnIpKHNjaGVtYSwgdmFsdWUsIF9jdHgpO1xufTtcbmV4cG9ydCBjb25zdCBkZWNvZGUgPSAvKiBAX19QVVJFX18qLyBfZGVjb2RlKGVycm9ycy4kWm9kUmVhbEVycm9yKTtcbmV4cG9ydCBjb25zdCBfZW5jb2RlQXN5bmMgPSAoX0VycikgPT4gYXN5bmMgKHNjaGVtYSwgdmFsdWUsIF9jdHgpID0+IHtcbiAgICBjb25zdCBjdHggPSBfY3R4ID8gT2JqZWN0LmFzc2lnbihfY3R4LCB7IGRpcmVjdGlvbjogXCJiYWNrd2FyZFwiIH0pIDogeyBkaXJlY3Rpb246IFwiYmFja3dhcmRcIiB9O1xuICAgIHJldHVybiBfcGFyc2VBc3luYyhfRXJyKShzY2hlbWEsIHZhbHVlLCBjdHgpO1xufTtcbmV4cG9ydCBjb25zdCBlbmNvZGVBc3luYyA9IC8qIEBfX1BVUkVfXyovIF9lbmNvZGVBc3luYyhlcnJvcnMuJFpvZFJlYWxFcnJvcik7XG5leHBvcnQgY29uc3QgX2RlY29kZUFzeW5jID0gKF9FcnIpID0+IGFzeW5jIChzY2hlbWEsIHZhbHVlLCBfY3R4KSA9PiB7XG4gICAgcmV0dXJuIF9wYXJzZUFzeW5jKF9FcnIpKHNjaGVtYSwgdmFsdWUsIF9jdHgpO1xufTtcbmV4cG9ydCBjb25zdCBkZWNvZGVBc3luYyA9IC8qIEBfX1BVUkVfXyovIF9kZWNvZGVBc3luYyhlcnJvcnMuJFpvZFJlYWxFcnJvcik7XG5leHBvcnQgY29uc3QgX3NhZmVFbmNvZGUgPSAoX0VycikgPT4gKHNjaGVtYSwgdmFsdWUsIF9jdHgpID0+IHtcbiAgICBjb25zdCBjdHggPSBfY3R4ID8gT2JqZWN0LmFzc2lnbihfY3R4LCB7IGRpcmVjdGlvbjogXCJiYWNrd2FyZFwiIH0pIDogeyBkaXJlY3Rpb246IFwiYmFja3dhcmRcIiB9O1xuICAgIHJldHVybiBfc2FmZVBhcnNlKF9FcnIpKHNjaGVtYSwgdmFsdWUsIGN0eCk7XG59O1xuZXhwb3J0IGNvbnN0IHNhZmVFbmNvZGUgPSAvKiBAX19QVVJFX18qLyBfc2FmZUVuY29kZShlcnJvcnMuJFpvZFJlYWxFcnJvcik7XG5leHBvcnQgY29uc3QgX3NhZmVEZWNvZGUgPSAoX0VycikgPT4gKHNjaGVtYSwgdmFsdWUsIF9jdHgpID0+IHtcbiAgICByZXR1cm4gX3NhZmVQYXJzZShfRXJyKShzY2hlbWEsIHZhbHVlLCBfY3R4KTtcbn07XG5leHBvcnQgY29uc3Qgc2FmZURlY29kZSA9IC8qIEBfX1BVUkVfXyovIF9zYWZlRGVjb2RlKGVycm9ycy4kWm9kUmVhbEVycm9yKTtcbmV4cG9ydCBjb25zdCBfc2FmZUVuY29kZUFzeW5jID0gKF9FcnIpID0+IGFzeW5jIChzY2hlbWEsIHZhbHVlLCBfY3R4KSA9PiB7XG4gICAgY29uc3QgY3R4ID0gX2N0eCA/IE9iamVjdC5hc3NpZ24oX2N0eCwgeyBkaXJlY3Rpb246IFwiYmFja3dhcmRcIiB9KSA6IHsgZGlyZWN0aW9uOiBcImJhY2t3YXJkXCIgfTtcbiAgICByZXR1cm4gX3NhZmVQYXJzZUFzeW5jKF9FcnIpKHNjaGVtYSwgdmFsdWUsIGN0eCk7XG59O1xuZXhwb3J0IGNvbnN0IHNhZmVFbmNvZGVBc3luYyA9IC8qIEBfX1BVUkVfXyovIF9zYWZlRW5jb2RlQXN5bmMoZXJyb3JzLiRab2RSZWFsRXJyb3IpO1xuZXhwb3J0IGNvbnN0IF9zYWZlRGVjb2RlQXN5bmMgPSAoX0VycikgPT4gYXN5bmMgKHNjaGVtYSwgdmFsdWUsIF9jdHgpID0+IHtcbiAgICByZXR1cm4gX3NhZmVQYXJzZUFzeW5jKF9FcnIpKHNjaGVtYSwgdmFsdWUsIF9jdHgpO1xufTtcbmV4cG9ydCBjb25zdCBzYWZlRGVjb2RlQXN5bmMgPSAvKiBAX19QVVJFX18qLyBfc2FmZURlY29kZUFzeW5jKGVycm9ycy4kWm9kUmVhbEVycm9yKTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/parse.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/regexes.js":
/*!**********************************************************************!*\
  !*** ./node_modules/better-auth/node_modules/zod/v4/core/regexes.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   base64: () => (/* binding */ base64),\n/* harmony export */   base64url: () => (/* binding */ base64url),\n/* harmony export */   bigint: () => (/* binding */ bigint),\n/* harmony export */   boolean: () => (/* binding */ boolean),\n/* harmony export */   browserEmail: () => (/* binding */ browserEmail),\n/* harmony export */   cidrv4: () => (/* binding */ cidrv4),\n/* harmony export */   cidrv6: () => (/* binding */ cidrv6),\n/* harmony export */   cuid: () => (/* binding */ cuid),\n/* harmony export */   cuid2: () => (/* binding */ cuid2),\n/* harmony export */   date: () => (/* binding */ date),\n/* harmony export */   datetime: () => (/* binding */ datetime),\n/* harmony export */   domain: () => (/* binding */ domain),\n/* harmony export */   duration: () => (/* binding */ duration),\n/* harmony export */   e164: () => (/* binding */ e164),\n/* harmony export */   email: () => (/* binding */ email),\n/* harmony export */   emoji: () => (/* binding */ emoji),\n/* harmony export */   extendedDuration: () => (/* binding */ extendedDuration),\n/* harmony export */   guid: () => (/* binding */ guid),\n/* harmony export */   hex: () => (/* binding */ hex),\n/* harmony export */   hostname: () => (/* binding */ hostname),\n/* harmony export */   html5Email: () => (/* binding */ html5Email),\n/* harmony export */   idnEmail: () => (/* binding */ idnEmail),\n/* harmony export */   integer: () => (/* binding */ integer),\n/* harmony export */   ipv4: () => (/* binding */ ipv4),\n/* harmony export */   ipv6: () => (/* binding */ ipv6),\n/* harmony export */   ksuid: () => (/* binding */ ksuid),\n/* harmony export */   lowercase: () => (/* binding */ lowercase),\n/* harmony export */   md5_base64: () => (/* binding */ md5_base64),\n/* harmony export */   md5_base64url: () => (/* binding */ md5_base64url),\n/* harmony export */   md5_hex: () => (/* binding */ md5_hex),\n/* harmony export */   nanoid: () => (/* binding */ nanoid),\n/* harmony export */   \"null\": () => (/* binding */ _null),\n/* harmony export */   number: () => (/* binding */ number),\n/* harmony export */   rfc5322Email: () => (/* binding */ rfc5322Email),\n/* harmony export */   sha1_base64: () => (/* binding */ sha1_base64),\n/* harmony export */   sha1_base64url: () => (/* binding */ sha1_base64url),\n/* harmony export */   sha1_hex: () => (/* binding */ sha1_hex),\n/* harmony export */   sha256_base64: () => (/* binding */ sha256_base64),\n/* harmony export */   sha256_base64url: () => (/* binding */ sha256_base64url),\n/* harmony export */   sha256_hex: () => (/* binding */ sha256_hex),\n/* harmony export */   sha384_base64: () => (/* binding */ sha384_base64),\n/* harmony export */   sha384_base64url: () => (/* binding */ sha384_base64url),\n/* harmony export */   sha384_hex: () => (/* binding */ sha384_hex),\n/* harmony export */   sha512_base64: () => (/* binding */ sha512_base64),\n/* harmony export */   sha512_base64url: () => (/* binding */ sha512_base64url),\n/* harmony export */   sha512_hex: () => (/* binding */ sha512_hex),\n/* harmony export */   string: () => (/* binding */ string),\n/* harmony export */   time: () => (/* binding */ time),\n/* harmony export */   ulid: () => (/* binding */ ulid),\n/* harmony export */   undefined: () => (/* binding */ _undefined),\n/* harmony export */   unicodeEmail: () => (/* binding */ unicodeEmail),\n/* harmony export */   uppercase: () => (/* binding */ uppercase),\n/* harmony export */   uuid: () => (/* binding */ uuid),\n/* harmony export */   uuid4: () => (/* binding */ uuid4),\n/* harmony export */   uuid6: () => (/* binding */ uuid6),\n/* harmony export */   uuid7: () => (/* binding */ uuid7),\n/* harmony export */   xid: () => (/* binding */ xid)\n/* harmony export */ });\nconst cuid = /^[cC][^\\s-]{8,}$/;\nconst cuid2 = /^[0-9a-z]+$/;\nconst ulid = /^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/;\nconst xid = /^[0-9a-vA-V]{20}$/;\nconst ksuid = /^[A-Za-z0-9]{27}$/;\nconst nanoid = /^[a-zA-Z0-9_-]{21}$/;\n/** ISO 8601-1 duration regex. Does not support the 8601-2 extensions like negative durations or fractional/negative components. */\nconst duration = /^P(?:(\\d+W)|(?!.*W)(?=\\d|T\\d)(\\d+Y)?(\\d+M)?(\\d+D)?(T(?=\\d)(\\d+H)?(\\d+M)?(\\d+([.,]\\d+)?S)?)?)$/;\n/** Implements ISO 8601-2 extensions like explicit +- prefixes, mixing weeks with other units, and fractional/negative components. */\nconst extendedDuration = /^[-+]?P(?!$)(?:(?:[-+]?\\d+Y)|(?:[-+]?\\d+[.,]\\d+Y$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:(?:[-+]?\\d+W)|(?:[-+]?\\d+[.,]\\d+W$))?(?:(?:[-+]?\\d+D)|(?:[-+]?\\d+[.,]\\d+D$))?(?:T(?=[\\d+-])(?:(?:[-+]?\\d+H)|(?:[-+]?\\d+[.,]\\d+H$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:[-+]?\\d+(?:[.,]\\d+)?S)?)??$/;\n/** A regex for any UUID-like identifier: 8-4-4-4-12 hex pattern */\nconst guid = /^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/;\n/** Returns a regex for validating an RFC 9562/4122 UUID.\n *\n * @param version Optionally specify a version 1-8. If no version is specified, all versions are supported. */\nconst uuid = (version) => {\n    if (!version)\n        return /^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/;\n    return new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${version}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`);\n};\nconst uuid4 = /*@__PURE__*/ uuid(4);\nconst uuid6 = /*@__PURE__*/ uuid(6);\nconst uuid7 = /*@__PURE__*/ uuid(7);\n/** Practical email validation */\nconst email = /^(?!\\.)(?!.*\\.\\.)([A-Za-z0-9_'+\\-\\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\\-]*\\.)+[A-Za-z]{2,}$/;\n/** Equivalent to the HTML5 input[type=email] validation implemented by browsers. Source: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/email */\nconst html5Email = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n/** The classic emailregex.com regex for RFC 5322-compliant emails */\nconst rfc5322Email = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n/** A loose regex that allows Unicode characters, enforces length limits, and that's about it. */\nconst unicodeEmail = /^[^\\s@\"]{1,64}@[^\\s@]{1,255}$/u;\nconst idnEmail = /^[^\\s@\"]{1,64}@[^\\s@]{1,255}$/u;\nconst browserEmail = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n// from https://thekevinscott.com/emojis-in-javascript/#writing-a-regular-expression\nconst _emoji = `^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$`;\nfunction emoji() {\n    return new RegExp(_emoji, \"u\");\n}\nconst ipv4 = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/;\nconst ipv6 = /^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/;\nconst cidrv4 = /^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\/([0-9]|[1-2][0-9]|3[0-2])$/;\nconst cidrv6 = /^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/;\n// https://stackoverflow.com/questions/7860392/determine-if-string-is-in-base64-using-javascript\nconst base64 = /^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/;\nconst base64url = /^[A-Za-z0-9_-]*$/;\n// based on https://stackoverflow.com/questions/106179/regular-expression-to-match-dns-hostname-or-ip-address\n// export const hostname: RegExp = /^([a-zA-Z0-9-]+\\.)*[a-zA-Z0-9-]+$/;\nconst hostname = /^(?=.{1,253}\\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\\.?$/;\nconst domain = /^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\\.)+[a-zA-Z]{2,}$/;\n// https://blog.stevenlevithan.com/archives/validate-phone-number#r4-3 (regex sans spaces)\nconst e164 = /^\\+(?:[0-9]){6,14}[0-9]$/;\n// const dateSource = `((\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\\\d|30)|(02)-(0[1-9]|1\\\\d|2[0-8])))`;\nconst dateSource = `(?:(?:\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\\\d|30)|(?:02)-(?:0[1-9]|1\\\\d|2[0-8])))`;\nconst date = /*@__PURE__*/ new RegExp(`^${dateSource}$`);\nfunction timeSource(args) {\n    const hhmm = `(?:[01]\\\\d|2[0-3]):[0-5]\\\\d`;\n    const regex = typeof args.precision === \"number\"\n        ? args.precision === -1\n            ? `${hhmm}`\n            : args.precision === 0\n                ? `${hhmm}:[0-5]\\\\d`\n                : `${hhmm}:[0-5]\\\\d\\\\.\\\\d{${args.precision}}`\n        : `${hhmm}(?::[0-5]\\\\d(?:\\\\.\\\\d+)?)?`;\n    return regex;\n}\nfunction time(args) {\n    return new RegExp(`^${timeSource(args)}$`);\n}\n// Adapted from https://stackoverflow.com/a/3143231\nfunction datetime(args) {\n    const time = timeSource({ precision: args.precision });\n    const opts = [\"Z\"];\n    if (args.local)\n        opts.push(\"\");\n    // if (args.offset) opts.push(`([+-]\\\\d{2}:\\\\d{2})`);\n    if (args.offset)\n        opts.push(`([+-](?:[01]\\\\d|2[0-3]):[0-5]\\\\d)`);\n    const timeRegex = `${time}(?:${opts.join(\"|\")})`;\n    return new RegExp(`^${dateSource}T(?:${timeRegex})$`);\n}\nconst string = (params) => {\n    const regex = params ? `[\\\\s\\\\S]{${params?.minimum ?? 0},${params?.maximum ?? \"\"}}` : `[\\\\s\\\\S]*`;\n    return new RegExp(`^${regex}$`);\n};\nconst bigint = /^\\d+n?$/;\nconst integer = /^\\d+$/;\nconst number = /^-?\\d+(?:\\.\\d+)?/i;\nconst boolean = /true|false/i;\nconst _null = /null/i;\n\nconst _undefined = /undefined/i;\n\n// regex for string with no uppercase letters\nconst lowercase = /^[^A-Z]*$/;\n// regex for string with no lowercase letters\nconst uppercase = /^[^a-z]*$/;\n// regex for hexadecimal strings (any length)\nconst hex = /^[0-9a-fA-F]*$/;\n// Hash regexes for different algorithms and encodings\n// Helper function to create base64 regex with exact length and padding\nfunction fixedBase64(bodyLength, padding) {\n    return new RegExp(`^[A-Za-z0-9+/]{${bodyLength}}${padding}$`);\n}\n// Helper function to create base64url regex with exact length (no padding)\nfunction fixedBase64url(length) {\n    return new RegExp(`^[A-Za-z0-9-_]{${length}}$`);\n}\n// MD5 (16 bytes): base64 = 24 chars total (22 + \"==\")\nconst md5_hex = /^[0-9a-fA-F]{32}$/;\nconst md5_base64 = /*@__PURE__*/ fixedBase64(22, \"==\");\nconst md5_base64url = /*@__PURE__*/ fixedBase64url(22);\n// SHA1 (20 bytes): base64 = 28 chars total (27 + \"=\")\nconst sha1_hex = /^[0-9a-fA-F]{40}$/;\nconst sha1_base64 = /*@__PURE__*/ fixedBase64(27, \"=\");\nconst sha1_base64url = /*@__PURE__*/ fixedBase64url(27);\n// SHA256 (32 bytes): base64 = 44 chars total (43 + \"=\")\nconst sha256_hex = /^[0-9a-fA-F]{64}$/;\nconst sha256_base64 = /*@__PURE__*/ fixedBase64(43, \"=\");\nconst sha256_base64url = /*@__PURE__*/ fixedBase64url(43);\n// SHA384 (48 bytes): base64 = 64 chars total (no padding)\nconst sha384_hex = /^[0-9a-fA-F]{96}$/;\nconst sha384_base64 = /*@__PURE__*/ fixedBase64(64, \"\");\nconst sha384_base64url = /*@__PURE__*/ fixedBase64url(64);\n// SHA512 (64 bytes): base64 = 88 chars total (86 + \"==\")\nconst sha512_hex = /^[0-9a-fA-F]{128}$/;\nconst sha512_base64 = /*@__PURE__*/ fixedBase64(86, \"==\");\nconst sha512_base64url = /*@__PURE__*/ fixedBase64url(86);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvbm9kZV9tb2R1bGVzL3pvZC92NC9jb3JlL3JlZ2V4ZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQU8sMEJBQTBCLEdBQUc7QUFDN0I7QUFDQSwrQ0FBK0MsR0FBRztBQUNsRCwwQkFBMEIsR0FBRztBQUM3Qiw0QkFBNEIsR0FBRztBQUMvQiwrQkFBK0IsR0FBRztBQUN6QztBQUNPO0FBQ1A7QUFDTztBQUNQO0FBQ08sNEJBQTRCLEVBQUUsYUFBYSxFQUFFLGFBQWEsRUFBRSxhQUFhLEVBQUUsYUFBYSxHQUFHO0FBQ2xHO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSw4QkFBOEIsRUFBRSxhQUFhLEVBQUUsa0JBQWtCLEVBQUUscUJBQXFCLEVBQUUsYUFBYSxHQUFHO0FBQzFHLHFDQUFxQyxFQUFFLGFBQWEsRUFBRSxHQUFHLFFBQVEsWUFBWSxFQUFFLHFCQUFxQixFQUFFLGFBQWEsR0FBRztBQUN0SDtBQUNPO0FBQ0E7QUFDQTtBQUNQO0FBQ08sMkdBQTJHLEdBQUc7QUFDckg7QUFDTywrQ0FBK0MsRUFBRSxnQ0FBZ0MsS0FBSyw2Q0FBNkMsS0FBSztBQUMvSTtBQUNPLHdDQUF3Qyx5QkFBeUIsNkJBQTZCLElBQUksUUFBUSxJQUFJLFFBQVEsSUFBSSxRQUFRLElBQUksZ0NBQWdDLEdBQUc7QUFDaEw7QUFDTywrQkFBK0IsS0FBSyxRQUFRLE1BQU07QUFDbEQsMkJBQTJCLEtBQUssUUFBUSxNQUFNO0FBQzlDLGlEQUFpRCxFQUFFLGdDQUFnQyxLQUFLLDZDQUE2QyxLQUFLO0FBQ2pKO0FBQ0Esc0JBQXNCLHNCQUFzQixLQUFLLGdCQUFnQjtBQUMxRDtBQUNQO0FBQ0E7QUFDTywwRUFBMEUsRUFBRTtBQUM1RSw2QkFBNkIsSUFBSSxHQUFHLEVBQUUsWUFBWSxJQUFJLGlCQUFpQixJQUFJLGlCQUFpQixJQUFJLElBQUksSUFBSTtBQUN4Ryx3RUFBd0UsRUFBRTtBQUMxRSwrQkFBK0IsSUFBSSxHQUFHLEVBQUUsWUFBWSxJQUFJLGlCQUFpQixJQUFJLGlCQUFpQixJQUFJLElBQUksSUFBSTtBQUNqSDtBQUNPLHFDQUFxQyxFQUFFLHNCQUFzQixFQUFFLHFCQUFxQixFQUFFO0FBQ3RGO0FBQ1A7QUFDQTtBQUNPLHdCQUF3QixNQUFNLGdDQUFnQyxLQUFLLDZDQUE2QyxLQUFLO0FBQ3JILDZDQUE2QyxLQUFLLDBCQUEwQixHQUFHO0FBQ3RGO0FBQ08sMkJBQTJCLEtBQUs7QUFDdkMsaUhBQWlILEVBQUU7QUFDbkgsa0hBQWtILEVBQUU7QUFDN0csMENBQTBDLFdBQVc7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsS0FBSztBQUN0QjtBQUNBLHFCQUFxQixLQUFLO0FBQzFCLHFCQUFxQixLQUFLLGdCQUFnQixFQUFFLGdCQUFnQjtBQUM1RCxhQUFhLEtBQUs7QUFDbEI7QUFDQTtBQUNPO0FBQ1AsMEJBQTBCLGlCQUFpQjtBQUMzQztBQUNBO0FBQ087QUFDUCw4QkFBOEIsMkJBQTJCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxFQUFFLEtBQUssRUFBRTtBQUNyRDtBQUNBO0FBQ0EseUJBQXlCLEtBQUssS0FBSyxlQUFlO0FBQ2xELDBCQUEwQixXQUFXLE1BQU0sVUFBVTtBQUNyRDtBQUNPO0FBQ1AscUNBQXFDLEVBQUUscUJBQXFCLEdBQUcsdUJBQXVCO0FBQ3RGLDBCQUEwQixNQUFNO0FBQ2hDO0FBQ087QUFDQTtBQUNBO0FBQ0E7QUFDUDtBQUN5QjtBQUN6QjtBQUNtQztBQUNuQztBQUNPO0FBQ1A7QUFDTztBQUNQO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsRUFBRSxZQUFZLEVBQUUsUUFBUTtBQUM5RDtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsRUFBRSxRQUFRO0FBQ2hEO0FBQ0E7QUFDTyw4QkFBOEIsR0FBRztBQUNqQztBQUNBO0FBQ1A7QUFDTywrQkFBK0IsR0FBRztBQUNsQztBQUNBO0FBQ1A7QUFDTyxpQ0FBaUMsR0FBRztBQUNwQztBQUNBO0FBQ1A7QUFDTyxpQ0FBaUMsR0FBRztBQUNwQztBQUNBO0FBQ1A7QUFDTyxpQ0FBaUMsSUFBSTtBQUNyQztBQUNBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFtYWFuXFxPbmVEcml2ZVxcRGVza3RvcFxcS2FuZGlkXzJcXE5ldyBmb2xkZXIgKDIpXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxub2RlX21vZHVsZXNcXHpvZFxcdjRcXGNvcmVcXHJlZ2V4ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGN1aWQgPSAvXltjQ11bXlxccy1dezgsfSQvO1xuZXhwb3J0IGNvbnN0IGN1aWQyID0gL15bMC05YS16XSskLztcbmV4cG9ydCBjb25zdCB1bGlkID0gL15bMC05QS1ISktNTlAtVFYtWmEtaGprbW5wLXR2LXpdezI2fSQvO1xuZXhwb3J0IGNvbnN0IHhpZCA9IC9eWzAtOWEtdkEtVl17MjB9JC87XG5leHBvcnQgY29uc3Qga3N1aWQgPSAvXltBLVphLXowLTldezI3fSQvO1xuZXhwb3J0IGNvbnN0IG5hbm9pZCA9IC9eW2EtekEtWjAtOV8tXXsyMX0kLztcbi8qKiBJU08gODYwMS0xIGR1cmF0aW9uIHJlZ2V4LiBEb2VzIG5vdCBzdXBwb3J0IHRoZSA4NjAxLTIgZXh0ZW5zaW9ucyBsaWtlIG5lZ2F0aXZlIGR1cmF0aW9ucyBvciBmcmFjdGlvbmFsL25lZ2F0aXZlIGNvbXBvbmVudHMuICovXG5leHBvcnQgY29uc3QgZHVyYXRpb24gPSAvXlAoPzooXFxkK1cpfCg/IS4qVykoPz1cXGR8VFxcZCkoXFxkK1kpPyhcXGQrTSk/KFxcZCtEKT8oVCg/PVxcZCkoXFxkK0gpPyhcXGQrTSk/KFxcZCsoWy4sXVxcZCspP1MpPyk/KSQvO1xuLyoqIEltcGxlbWVudHMgSVNPIDg2MDEtMiBleHRlbnNpb25zIGxpa2UgZXhwbGljaXQgKy0gcHJlZml4ZXMsIG1peGluZyB3ZWVrcyB3aXRoIG90aGVyIHVuaXRzLCBhbmQgZnJhY3Rpb25hbC9uZWdhdGl2ZSBjb21wb25lbnRzLiAqL1xuZXhwb3J0IGNvbnN0IGV4dGVuZGVkRHVyYXRpb24gPSAvXlstK10/UCg/ISQpKD86KD86Wy0rXT9cXGQrWSl8KD86Wy0rXT9cXGQrWy4sXVxcZCtZJCkpPyg/Oig/OlstK10/XFxkK00pfCg/OlstK10/XFxkK1suLF1cXGQrTSQpKT8oPzooPzpbLStdP1xcZCtXKXwoPzpbLStdP1xcZCtbLixdXFxkK1ckKSk/KD86KD86Wy0rXT9cXGQrRCl8KD86Wy0rXT9cXGQrWy4sXVxcZCtEJCkpPyg/OlQoPz1bXFxkKy1dKSg/Oig/OlstK10/XFxkK0gpfCg/OlstK10/XFxkK1suLF1cXGQrSCQpKT8oPzooPzpbLStdP1xcZCtNKXwoPzpbLStdP1xcZCtbLixdXFxkK00kKSk/KD86Wy0rXT9cXGQrKD86Wy4sXVxcZCspP1MpPyk/PyQvO1xuLyoqIEEgcmVnZXggZm9yIGFueSBVVUlELWxpa2UgaWRlbnRpZmllcjogOC00LTQtNC0xMiBoZXggcGF0dGVybiAqL1xuZXhwb3J0IGNvbnN0IGd1aWQgPSAvXihbMC05YS1mQS1GXXs4fS1bMC05YS1mQS1GXXs0fS1bMC05YS1mQS1GXXs0fS1bMC05YS1mQS1GXXs0fS1bMC05YS1mQS1GXXsxMn0pJC87XG4vKiogUmV0dXJucyBhIHJlZ2V4IGZvciB2YWxpZGF0aW5nIGFuIFJGQyA5NTYyLzQxMjIgVVVJRC5cbiAqXG4gKiBAcGFyYW0gdmVyc2lvbiBPcHRpb25hbGx5IHNwZWNpZnkgYSB2ZXJzaW9uIDEtOC4gSWYgbm8gdmVyc2lvbiBpcyBzcGVjaWZpZWQsIGFsbCB2ZXJzaW9ucyBhcmUgc3VwcG9ydGVkLiAqL1xuZXhwb3J0IGNvbnN0IHV1aWQgPSAodmVyc2lvbikgPT4ge1xuICAgIGlmICghdmVyc2lvbilcbiAgICAgICAgcmV0dXJuIC9eKFswLTlhLWZBLUZdezh9LVswLTlhLWZBLUZdezR9LVsxLThdWzAtOWEtZkEtRl17M30tWzg5YWJBQl1bMC05YS1mQS1GXXszfS1bMC05YS1mQS1GXXsxMn18MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwfGZmZmZmZmZmLWZmZmYtZmZmZi1mZmZmLWZmZmZmZmZmZmZmZikkLztcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChgXihbMC05YS1mQS1GXXs4fS1bMC05YS1mQS1GXXs0fS0ke3ZlcnNpb259WzAtOWEtZkEtRl17M30tWzg5YWJBQl1bMC05YS1mQS1GXXszfS1bMC05YS1mQS1GXXsxMn0pJGApO1xufTtcbmV4cG9ydCBjb25zdCB1dWlkNCA9IC8qQF9fUFVSRV9fKi8gdXVpZCg0KTtcbmV4cG9ydCBjb25zdCB1dWlkNiA9IC8qQF9fUFVSRV9fKi8gdXVpZCg2KTtcbmV4cG9ydCBjb25zdCB1dWlkNyA9IC8qQF9fUFVSRV9fKi8gdXVpZCg3KTtcbi8qKiBQcmFjdGljYWwgZW1haWwgdmFsaWRhdGlvbiAqL1xuZXhwb3J0IGNvbnN0IGVtYWlsID0gL14oPyFcXC4pKD8hLipcXC5cXC4pKFtBLVphLXowLTlfJytcXC1cXC5dKilbQS1aYS16MC05XystXUAoW0EtWmEtejAtOV1bQS1aYS16MC05XFwtXSpcXC4pK1tBLVphLXpdezIsfSQvO1xuLyoqIEVxdWl2YWxlbnQgdG8gdGhlIEhUTUw1IGlucHV0W3R5cGU9ZW1haWxdIHZhbGlkYXRpb24gaW1wbGVtZW50ZWQgYnkgYnJvd3NlcnMuIFNvdXJjZTogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9FbGVtZW50L2lucHV0L2VtYWlsICovXG5leHBvcnQgY29uc3QgaHRtbDVFbWFpbCA9IC9eW2EtekEtWjAtOS4hIyQlJicqKy89P15fYHt8fX4tXStAW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KD86XFwuW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KSokLztcbi8qKiBUaGUgY2xhc3NpYyBlbWFpbHJlZ2V4LmNvbSByZWdleCBmb3IgUkZDIDUzMjItY29tcGxpYW50IGVtYWlscyAqL1xuZXhwb3J0IGNvbnN0IHJmYzUzMjJFbWFpbCA9IC9eKChbXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKFxcLltePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSspKil8KFwiLitcIikpQCgoXFxbWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfV0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvO1xuLyoqIEEgbG9vc2UgcmVnZXggdGhhdCBhbGxvd3MgVW5pY29kZSBjaGFyYWN0ZXJzLCBlbmZvcmNlcyBsZW5ndGggbGltaXRzLCBhbmQgdGhhdCdzIGFib3V0IGl0LiAqL1xuZXhwb3J0IGNvbnN0IHVuaWNvZGVFbWFpbCA9IC9eW15cXHNAXCJdezEsNjR9QFteXFxzQF17MSwyNTV9JC91O1xuZXhwb3J0IGNvbnN0IGlkbkVtYWlsID0gL15bXlxcc0BcIl17MSw2NH1AW15cXHNAXXsxLDI1NX0kL3U7XG5leHBvcnQgY29uc3QgYnJvd3NlckVtYWlsID0gL15bYS16QS1aMC05LiEjJCUmJyorLz0/Xl9ge3x9fi1dK0BbYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8oPzpcXC5bYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8pKiQvO1xuLy8gZnJvbSBodHRwczovL3RoZWtldmluc2NvdHQuY29tL2Vtb2ppcy1pbi1qYXZhc2NyaXB0LyN3cml0aW5nLWEtcmVndWxhci1leHByZXNzaW9uXG5jb25zdCBfZW1vamkgPSBgXihcXFxccHtFeHRlbmRlZF9QaWN0b2dyYXBoaWN9fFxcXFxwe0Vtb2ppX0NvbXBvbmVudH0pKyRgO1xuZXhwb3J0IGZ1bmN0aW9uIGVtb2ppKCkge1xuICAgIHJldHVybiBuZXcgUmVnRXhwKF9lbW9qaSwgXCJ1XCIpO1xufVxuZXhwb3J0IGNvbnN0IGlwdjQgPSAvXig/Oig/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSlcXC4pezN9KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKSQvO1xuZXhwb3J0IGNvbnN0IGlwdjYgPSAvXigoWzAtOWEtZkEtRl17MSw0fTopezd9WzAtOWEtZkEtRl17MSw0fXw6OnwoWzAtOWEtZkEtRl17MSw0fSk/OjooWzAtOWEtZkEtRl17MSw0fTo/KXswLDZ9KSQvO1xuZXhwb3J0IGNvbnN0IGNpZHJ2NCA9IC9eKCgyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwuKXszfSgyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwvKFswLTldfFsxLTJdWzAtOV18M1swLTJdKSQvO1xuZXhwb3J0IGNvbnN0IGNpZHJ2NiA9IC9eKChbMC05YS1mQS1GXXsxLDR9Oil7N31bMC05YS1mQS1GXXsxLDR9fDo6fChbMC05YS1mQS1GXXsxLDR9KT86OihbMC05YS1mQS1GXXsxLDR9Oj8pezAsNn0pXFwvKDEyWzAtOF18MVswMV1bMC05XXxbMS05XT9bMC05XSkkLztcbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzc4NjAzOTIvZGV0ZXJtaW5lLWlmLXN0cmluZy1pcy1pbi1iYXNlNjQtdXNpbmctamF2YXNjcmlwdFxuZXhwb3J0IGNvbnN0IGJhc2U2NCA9IC9eJHxeKD86WzAtOWEtekEtWisvXXs0fSkqKD86KD86WzAtOWEtekEtWisvXXsyfT09KXwoPzpbMC05YS16QS1aKy9dezN9PSkpPyQvO1xuZXhwb3J0IGNvbnN0IGJhc2U2NHVybCA9IC9eW0EtWmEtejAtOV8tXSokLztcbi8vIGJhc2VkIG9uIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEwNjE3OS9yZWd1bGFyLWV4cHJlc3Npb24tdG8tbWF0Y2gtZG5zLWhvc3RuYW1lLW9yLWlwLWFkZHJlc3Ncbi8vIGV4cG9ydCBjb25zdCBob3N0bmFtZTogUmVnRXhwID0gL14oW2EtekEtWjAtOS1dK1xcLikqW2EtekEtWjAtOS1dKyQvO1xuZXhwb3J0IGNvbnN0IGhvc3RuYW1lID0gL14oPz0uezEsMjUzfVxcLj8kKVthLXpBLVowLTldKD86W2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pPyg/OlxcLlthLXpBLVowLTldKD86Wy0wLTlhLXpBLVpdezAsNjF9WzAtOWEtekEtWl0pPykqXFwuPyQvO1xuZXhwb3J0IGNvbnN0IGRvbWFpbiA9IC9eKFthLXpBLVowLTldKD86W2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pP1xcLikrW2EtekEtWl17Mix9JC87XG4vLyBodHRwczovL2Jsb2cuc3RldmVubGV2aXRoYW4uY29tL2FyY2hpdmVzL3ZhbGlkYXRlLXBob25lLW51bWJlciNyNC0zIChyZWdleCBzYW5zIHNwYWNlcylcbmV4cG9ydCBjb25zdCBlMTY0ID0gL15cXCsoPzpbMC05XSl7NiwxNH1bMC05XSQvO1xuLy8gY29uc3QgZGF0ZVNvdXJjZSA9IGAoKFxcXFxkXFxcXGRbMjQ2OF1bMDQ4XXxcXFxcZFxcXFxkWzEzNTc5XVsyNl18XFxcXGRcXFxcZDBbNDhdfFswMjQ2OF1bMDQ4XTAwfFsxMzU3OV1bMjZdMDApLTAyLTI5fFxcXFxkezR9LSgoMFsxMzU3OF18MVswMl0pLSgwWzEtOV18WzEyXVxcXFxkfDNbMDFdKXwoMFs0NjldfDExKS0oMFsxLTldfFsxMl1cXFxcZHwzMCl8KDAyKS0oMFsxLTldfDFcXFxcZHwyWzAtOF0pKSlgO1xuY29uc3QgZGF0ZVNvdXJjZSA9IGAoPzooPzpcXFxcZFxcXFxkWzI0NjhdWzA0OF18XFxcXGRcXFxcZFsxMzU3OV1bMjZdfFxcXFxkXFxcXGQwWzQ4XXxbMDI0NjhdWzA0OF0wMHxbMTM1NzldWzI2XTAwKS0wMi0yOXxcXFxcZHs0fS0oPzooPzowWzEzNTc4XXwxWzAyXSktKD86MFsxLTldfFsxMl1cXFxcZHwzWzAxXSl8KD86MFs0NjldfDExKS0oPzowWzEtOV18WzEyXVxcXFxkfDMwKXwoPzowMiktKD86MFsxLTldfDFcXFxcZHwyWzAtOF0pKSlgO1xuZXhwb3J0IGNvbnN0IGRhdGUgPSAvKkBfX1BVUkVfXyovIG5ldyBSZWdFeHAoYF4ke2RhdGVTb3VyY2V9JGApO1xuZnVuY3Rpb24gdGltZVNvdXJjZShhcmdzKSB7XG4gICAgY29uc3QgaGhtbSA9IGAoPzpbMDFdXFxcXGR8MlswLTNdKTpbMC01XVxcXFxkYDtcbiAgICBjb25zdCByZWdleCA9IHR5cGVvZiBhcmdzLnByZWNpc2lvbiA9PT0gXCJudW1iZXJcIlxuICAgICAgICA/IGFyZ3MucHJlY2lzaW9uID09PSAtMVxuICAgICAgICAgICAgPyBgJHtoaG1tfWBcbiAgICAgICAgICAgIDogYXJncy5wcmVjaXNpb24gPT09IDBcbiAgICAgICAgICAgICAgICA/IGAke2hobW19OlswLTVdXFxcXGRgXG4gICAgICAgICAgICAgICAgOiBgJHtoaG1tfTpbMC01XVxcXFxkXFxcXC5cXFxcZHske2FyZ3MucHJlY2lzaW9ufX1gXG4gICAgICAgIDogYCR7aGhtbX0oPzo6WzAtNV1cXFxcZCg/OlxcXFwuXFxcXGQrKT8pP2A7XG4gICAgcmV0dXJuIHJlZ2V4O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHRpbWUoYXJncykge1xuICAgIHJldHVybiBuZXcgUmVnRXhwKGBeJHt0aW1lU291cmNlKGFyZ3MpfSRgKTtcbn1cbi8vIEFkYXB0ZWQgZnJvbSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzE0MzIzMVxuZXhwb3J0IGZ1bmN0aW9uIGRhdGV0aW1lKGFyZ3MpIHtcbiAgICBjb25zdCB0aW1lID0gdGltZVNvdXJjZSh7IHByZWNpc2lvbjogYXJncy5wcmVjaXNpb24gfSk7XG4gICAgY29uc3Qgb3B0cyA9IFtcIlpcIl07XG4gICAgaWYgKGFyZ3MubG9jYWwpXG4gICAgICAgIG9wdHMucHVzaChcIlwiKTtcbiAgICAvLyBpZiAoYXJncy5vZmZzZXQpIG9wdHMucHVzaChgKFsrLV1cXFxcZHsyfTpcXFxcZHsyfSlgKTtcbiAgICBpZiAoYXJncy5vZmZzZXQpXG4gICAgICAgIG9wdHMucHVzaChgKFsrLV0oPzpbMDFdXFxcXGR8MlswLTNdKTpbMC01XVxcXFxkKWApO1xuICAgIGNvbnN0IHRpbWVSZWdleCA9IGAke3RpbWV9KD86JHtvcHRzLmpvaW4oXCJ8XCIpfSlgO1xuICAgIHJldHVybiBuZXcgUmVnRXhwKGBeJHtkYXRlU291cmNlfVQoPzoke3RpbWVSZWdleH0pJGApO1xufVxuZXhwb3J0IGNvbnN0IHN0cmluZyA9IChwYXJhbXMpID0+IHtcbiAgICBjb25zdCByZWdleCA9IHBhcmFtcyA/IGBbXFxcXHNcXFxcU117JHtwYXJhbXM/Lm1pbmltdW0gPz8gMH0sJHtwYXJhbXM/Lm1heGltdW0gPz8gXCJcIn19YCA6IGBbXFxcXHNcXFxcU10qYDtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChgXiR7cmVnZXh9JGApO1xufTtcbmV4cG9ydCBjb25zdCBiaWdpbnQgPSAvXlxcZCtuPyQvO1xuZXhwb3J0IGNvbnN0IGludGVnZXIgPSAvXlxcZCskLztcbmV4cG9ydCBjb25zdCBudW1iZXIgPSAvXi0/XFxkKyg/OlxcLlxcZCspPy9pO1xuZXhwb3J0IGNvbnN0IGJvb2xlYW4gPSAvdHJ1ZXxmYWxzZS9pO1xuY29uc3QgX251bGwgPSAvbnVsbC9pO1xuZXhwb3J0IHsgX251bGwgYXMgbnVsbCB9O1xuY29uc3QgX3VuZGVmaW5lZCA9IC91bmRlZmluZWQvaTtcbmV4cG9ydCB7IF91bmRlZmluZWQgYXMgdW5kZWZpbmVkIH07XG4vLyByZWdleCBmb3Igc3RyaW5nIHdpdGggbm8gdXBwZXJjYXNlIGxldHRlcnNcbmV4cG9ydCBjb25zdCBsb3dlcmNhc2UgPSAvXlteQS1aXSokLztcbi8vIHJlZ2V4IGZvciBzdHJpbmcgd2l0aCBubyBsb3dlcmNhc2UgbGV0dGVyc1xuZXhwb3J0IGNvbnN0IHVwcGVyY2FzZSA9IC9eW15hLXpdKiQvO1xuLy8gcmVnZXggZm9yIGhleGFkZWNpbWFsIHN0cmluZ3MgKGFueSBsZW5ndGgpXG5leHBvcnQgY29uc3QgaGV4ID0gL15bMC05YS1mQS1GXSokLztcbi8vIEhhc2ggcmVnZXhlcyBmb3IgZGlmZmVyZW50IGFsZ29yaXRobXMgYW5kIGVuY29kaW5nc1xuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNyZWF0ZSBiYXNlNjQgcmVnZXggd2l0aCBleGFjdCBsZW5ndGggYW5kIHBhZGRpbmdcbmZ1bmN0aW9uIGZpeGVkQmFzZTY0KGJvZHlMZW5ndGgsIHBhZGRpbmcpIHtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChgXltBLVphLXowLTkrL117JHtib2R5TGVuZ3RofX0ke3BhZGRpbmd9JGApO1xufVxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNyZWF0ZSBiYXNlNjR1cmwgcmVnZXggd2l0aCBleGFjdCBsZW5ndGggKG5vIHBhZGRpbmcpXG5mdW5jdGlvbiBmaXhlZEJhc2U2NHVybChsZW5ndGgpIHtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChgXltBLVphLXowLTktX117JHtsZW5ndGh9fSRgKTtcbn1cbi8vIE1ENSAoMTYgYnl0ZXMpOiBiYXNlNjQgPSAyNCBjaGFycyB0b3RhbCAoMjIgKyBcIj09XCIpXG5leHBvcnQgY29uc3QgbWQ1X2hleCA9IC9eWzAtOWEtZkEtRl17MzJ9JC87XG5leHBvcnQgY29uc3QgbWQ1X2Jhc2U2NCA9IC8qQF9fUFVSRV9fKi8gZml4ZWRCYXNlNjQoMjIsIFwiPT1cIik7XG5leHBvcnQgY29uc3QgbWQ1X2Jhc2U2NHVybCA9IC8qQF9fUFVSRV9fKi8gZml4ZWRCYXNlNjR1cmwoMjIpO1xuLy8gU0hBMSAoMjAgYnl0ZXMpOiBiYXNlNjQgPSAyOCBjaGFycyB0b3RhbCAoMjcgKyBcIj1cIilcbmV4cG9ydCBjb25zdCBzaGExX2hleCA9IC9eWzAtOWEtZkEtRl17NDB9JC87XG5leHBvcnQgY29uc3Qgc2hhMV9iYXNlNjQgPSAvKkBfX1BVUkVfXyovIGZpeGVkQmFzZTY0KDI3LCBcIj1cIik7XG5leHBvcnQgY29uc3Qgc2hhMV9iYXNlNjR1cmwgPSAvKkBfX1BVUkVfXyovIGZpeGVkQmFzZTY0dXJsKDI3KTtcbi8vIFNIQTI1NiAoMzIgYnl0ZXMpOiBiYXNlNjQgPSA0NCBjaGFycyB0b3RhbCAoNDMgKyBcIj1cIilcbmV4cG9ydCBjb25zdCBzaGEyNTZfaGV4ID0gL15bMC05YS1mQS1GXXs2NH0kLztcbmV4cG9ydCBjb25zdCBzaGEyNTZfYmFzZTY0ID0gLypAX19QVVJFX18qLyBmaXhlZEJhc2U2NCg0MywgXCI9XCIpO1xuZXhwb3J0IGNvbnN0IHNoYTI1Nl9iYXNlNjR1cmwgPSAvKkBfX1BVUkVfXyovIGZpeGVkQmFzZTY0dXJsKDQzKTtcbi8vIFNIQTM4NCAoNDggYnl0ZXMpOiBiYXNlNjQgPSA2NCBjaGFycyB0b3RhbCAobm8gcGFkZGluZylcbmV4cG9ydCBjb25zdCBzaGEzODRfaGV4ID0gL15bMC05YS1mQS1GXXs5Nn0kLztcbmV4cG9ydCBjb25zdCBzaGEzODRfYmFzZTY0ID0gLypAX19QVVJFX18qLyBmaXhlZEJhc2U2NCg2NCwgXCJcIik7XG5leHBvcnQgY29uc3Qgc2hhMzg0X2Jhc2U2NHVybCA9IC8qQF9fUFVSRV9fKi8gZml4ZWRCYXNlNjR1cmwoNjQpO1xuLy8gU0hBNTEyICg2NCBieXRlcyk6IGJhc2U2NCA9IDg4IGNoYXJzIHRvdGFsICg4NiArIFwiPT1cIilcbmV4cG9ydCBjb25zdCBzaGE1MTJfaGV4ID0gL15bMC05YS1mQS1GXXsxMjh9JC87XG5leHBvcnQgY29uc3Qgc2hhNTEyX2Jhc2U2NCA9IC8qQF9fUFVSRV9fKi8gZml4ZWRCYXNlNjQoODYsIFwiPT1cIik7XG5leHBvcnQgY29uc3Qgc2hhNTEyX2Jhc2U2NHVybCA9IC8qQF9fUFVSRV9fKi8gZml4ZWRCYXNlNjR1cmwoODYpO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/regexes.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/registries.js":
/*!*************************************************************************!*\
  !*** ./node_modules/better-auth/node_modules/zod/v4/core/registries.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $ZodRegistry: () => (/* binding */ $ZodRegistry),\n/* harmony export */   $input: () => (/* binding */ $input),\n/* harmony export */   $output: () => (/* binding */ $output),\n/* harmony export */   globalRegistry: () => (/* binding */ globalRegistry),\n/* harmony export */   registry: () => (/* binding */ registry)\n/* harmony export */ });\nconst $output = Symbol(\"ZodOutput\");\nconst $input = Symbol(\"ZodInput\");\nclass $ZodRegistry {\n    constructor() {\n        this._map = new Map();\n        this._idmap = new Map();\n    }\n    add(schema, ..._meta) {\n        const meta = _meta[0];\n        this._map.set(schema, meta);\n        if (meta && typeof meta === \"object\" && \"id\" in meta) {\n            if (this._idmap.has(meta.id)) {\n                throw new Error(`ID ${meta.id} already exists in the registry`);\n            }\n            this._idmap.set(meta.id, schema);\n        }\n        return this;\n    }\n    clear() {\n        this._map = new Map();\n        this._idmap = new Map();\n        return this;\n    }\n    remove(schema) {\n        const meta = this._map.get(schema);\n        if (meta && typeof meta === \"object\" && \"id\" in meta) {\n            this._idmap.delete(meta.id);\n        }\n        this._map.delete(schema);\n        return this;\n    }\n    get(schema) {\n        // return this._map.get(schema) as any;\n        // inherit metadata\n        const p = schema._zod.parent;\n        if (p) {\n            const pm = { ...(this.get(p) ?? {}) };\n            delete pm.id; // do not inherit id\n            const f = { ...pm, ...this._map.get(schema) };\n            return Object.keys(f).length ? f : undefined;\n        }\n        return this._map.get(schema);\n    }\n    has(schema) {\n        return this._map.has(schema);\n    }\n}\n// registries\nfunction registry() {\n    return new $ZodRegistry();\n}\nconst globalRegistry = /*@__PURE__*/ registry();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvbm9kZV9tb2R1bGVzL3pvZC92NC9jb3JlL3JlZ2lzdHJpZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBTztBQUNBO0FBQ0E7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsU0FBUztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHFCQUFxQjtBQUM5QywwQkFBMEI7QUFDMUIsd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNPIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFtYWFuXFxPbmVEcml2ZVxcRGVza3RvcFxcS2FuZGlkXzJcXE5ldyBmb2xkZXIgKDIpXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxub2RlX21vZHVsZXNcXHpvZFxcdjRcXGNvcmVcXHJlZ2lzdHJpZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0ICRvdXRwdXQgPSBTeW1ib2woXCJab2RPdXRwdXRcIik7XG5leHBvcnQgY29uc3QgJGlucHV0ID0gU3ltYm9sKFwiWm9kSW5wdXRcIik7XG5leHBvcnQgY2xhc3MgJFpvZFJlZ2lzdHJ5IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5fbWFwID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLl9pZG1hcCA9IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgYWRkKHNjaGVtYSwgLi4uX21ldGEpIHtcbiAgICAgICAgY29uc3QgbWV0YSA9IF9tZXRhWzBdO1xuICAgICAgICB0aGlzLl9tYXAuc2V0KHNjaGVtYSwgbWV0YSk7XG4gICAgICAgIGlmIChtZXRhICYmIHR5cGVvZiBtZXRhID09PSBcIm9iamVjdFwiICYmIFwiaWRcIiBpbiBtZXRhKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5faWRtYXAuaGFzKG1ldGEuaWQpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJRCAke21ldGEuaWR9IGFscmVhZHkgZXhpc3RzIGluIHRoZSByZWdpc3RyeWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5faWRtYXAuc2V0KG1ldGEuaWQsIHNjaGVtYSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGNsZWFyKCkge1xuICAgICAgICB0aGlzLl9tYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuX2lkbWFwID0gbmV3IE1hcCgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcmVtb3ZlKHNjaGVtYSkge1xuICAgICAgICBjb25zdCBtZXRhID0gdGhpcy5fbWFwLmdldChzY2hlbWEpO1xuICAgICAgICBpZiAobWV0YSAmJiB0eXBlb2YgbWV0YSA9PT0gXCJvYmplY3RcIiAmJiBcImlkXCIgaW4gbWV0YSkge1xuICAgICAgICAgICAgdGhpcy5faWRtYXAuZGVsZXRlKG1ldGEuaWQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX21hcC5kZWxldGUoc2NoZW1hKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGdldChzY2hlbWEpIHtcbiAgICAgICAgLy8gcmV0dXJuIHRoaXMuX21hcC5nZXQoc2NoZW1hKSBhcyBhbnk7XG4gICAgICAgIC8vIGluaGVyaXQgbWV0YWRhdGFcbiAgICAgICAgY29uc3QgcCA9IHNjaGVtYS5fem9kLnBhcmVudDtcbiAgICAgICAgaWYgKHApIHtcbiAgICAgICAgICAgIGNvbnN0IHBtID0geyAuLi4odGhpcy5nZXQocCkgPz8ge30pIH07XG4gICAgICAgICAgICBkZWxldGUgcG0uaWQ7IC8vIGRvIG5vdCBpbmhlcml0IGlkXG4gICAgICAgICAgICBjb25zdCBmID0geyAuLi5wbSwgLi4udGhpcy5fbWFwLmdldChzY2hlbWEpIH07XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoZikubGVuZ3RoID8gZiA6IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fbWFwLmdldChzY2hlbWEpO1xuICAgIH1cbiAgICBoYXMoc2NoZW1hKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9tYXAuaGFzKHNjaGVtYSk7XG4gICAgfVxufVxuLy8gcmVnaXN0cmllc1xuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdHJ5KCkge1xuICAgIHJldHVybiBuZXcgJFpvZFJlZ2lzdHJ5KCk7XG59XG5leHBvcnQgY29uc3QgZ2xvYmFsUmVnaXN0cnkgPSAvKkBfX1BVUkVfXyovIHJlZ2lzdHJ5KCk7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/registries.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/schemas.js":
/*!**********************************************************************!*\
  !*** ./node_modules/better-auth/node_modules/zod/v4/core/schemas.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $ZodAny: () => (/* binding */ $ZodAny),\n/* harmony export */   $ZodArray: () => (/* binding */ $ZodArray),\n/* harmony export */   $ZodBase64: () => (/* binding */ $ZodBase64),\n/* harmony export */   $ZodBase64URL: () => (/* binding */ $ZodBase64URL),\n/* harmony export */   $ZodBigInt: () => (/* binding */ $ZodBigInt),\n/* harmony export */   $ZodBigIntFormat: () => (/* binding */ $ZodBigIntFormat),\n/* harmony export */   $ZodBoolean: () => (/* binding */ $ZodBoolean),\n/* harmony export */   $ZodCIDRv4: () => (/* binding */ $ZodCIDRv4),\n/* harmony export */   $ZodCIDRv6: () => (/* binding */ $ZodCIDRv6),\n/* harmony export */   $ZodCUID: () => (/* binding */ $ZodCUID),\n/* harmony export */   $ZodCUID2: () => (/* binding */ $ZodCUID2),\n/* harmony export */   $ZodCatch: () => (/* binding */ $ZodCatch),\n/* harmony export */   $ZodCodec: () => (/* binding */ $ZodCodec),\n/* harmony export */   $ZodCustom: () => (/* binding */ $ZodCustom),\n/* harmony export */   $ZodCustomStringFormat: () => (/* binding */ $ZodCustomStringFormat),\n/* harmony export */   $ZodDate: () => (/* binding */ $ZodDate),\n/* harmony export */   $ZodDefault: () => (/* binding */ $ZodDefault),\n/* harmony export */   $ZodDiscriminatedUnion: () => (/* binding */ $ZodDiscriminatedUnion),\n/* harmony export */   $ZodE164: () => (/* binding */ $ZodE164),\n/* harmony export */   $ZodEmail: () => (/* binding */ $ZodEmail),\n/* harmony export */   $ZodEmoji: () => (/* binding */ $ZodEmoji),\n/* harmony export */   $ZodEnum: () => (/* binding */ $ZodEnum),\n/* harmony export */   $ZodFile: () => (/* binding */ $ZodFile),\n/* harmony export */   $ZodFunction: () => (/* binding */ $ZodFunction),\n/* harmony export */   $ZodGUID: () => (/* binding */ $ZodGUID),\n/* harmony export */   $ZodIPv4: () => (/* binding */ $ZodIPv4),\n/* harmony export */   $ZodIPv6: () => (/* binding */ $ZodIPv6),\n/* harmony export */   $ZodISODate: () => (/* binding */ $ZodISODate),\n/* harmony export */   $ZodISODateTime: () => (/* binding */ $ZodISODateTime),\n/* harmony export */   $ZodISODuration: () => (/* binding */ $ZodISODuration),\n/* harmony export */   $ZodISOTime: () => (/* binding */ $ZodISOTime),\n/* harmony export */   $ZodIntersection: () => (/* binding */ $ZodIntersection),\n/* harmony export */   $ZodJWT: () => (/* binding */ $ZodJWT),\n/* harmony export */   $ZodKSUID: () => (/* binding */ $ZodKSUID),\n/* harmony export */   $ZodLazy: () => (/* binding */ $ZodLazy),\n/* harmony export */   $ZodLiteral: () => (/* binding */ $ZodLiteral),\n/* harmony export */   $ZodMap: () => (/* binding */ $ZodMap),\n/* harmony export */   $ZodNaN: () => (/* binding */ $ZodNaN),\n/* harmony export */   $ZodNanoID: () => (/* binding */ $ZodNanoID),\n/* harmony export */   $ZodNever: () => (/* binding */ $ZodNever),\n/* harmony export */   $ZodNonOptional: () => (/* binding */ $ZodNonOptional),\n/* harmony export */   $ZodNull: () => (/* binding */ $ZodNull),\n/* harmony export */   $ZodNullable: () => (/* binding */ $ZodNullable),\n/* harmony export */   $ZodNumber: () => (/* binding */ $ZodNumber),\n/* harmony export */   $ZodNumberFormat: () => (/* binding */ $ZodNumberFormat),\n/* harmony export */   $ZodObject: () => (/* binding */ $ZodObject),\n/* harmony export */   $ZodObjectJIT: () => (/* binding */ $ZodObjectJIT),\n/* harmony export */   $ZodOptional: () => (/* binding */ $ZodOptional),\n/* harmony export */   $ZodPipe: () => (/* binding */ $ZodPipe),\n/* harmony export */   $ZodPrefault: () => (/* binding */ $ZodPrefault),\n/* harmony export */   $ZodPromise: () => (/* binding */ $ZodPromise),\n/* harmony export */   $ZodReadonly: () => (/* binding */ $ZodReadonly),\n/* harmony export */   $ZodRecord: () => (/* binding */ $ZodRecord),\n/* harmony export */   $ZodSet: () => (/* binding */ $ZodSet),\n/* harmony export */   $ZodString: () => (/* binding */ $ZodString),\n/* harmony export */   $ZodStringFormat: () => (/* binding */ $ZodStringFormat),\n/* harmony export */   $ZodSuccess: () => (/* binding */ $ZodSuccess),\n/* harmony export */   $ZodSymbol: () => (/* binding */ $ZodSymbol),\n/* harmony export */   $ZodTemplateLiteral: () => (/* binding */ $ZodTemplateLiteral),\n/* harmony export */   $ZodTransform: () => (/* binding */ $ZodTransform),\n/* harmony export */   $ZodTuple: () => (/* binding */ $ZodTuple),\n/* harmony export */   $ZodType: () => (/* binding */ $ZodType),\n/* harmony export */   $ZodULID: () => (/* binding */ $ZodULID),\n/* harmony export */   $ZodURL: () => (/* binding */ $ZodURL),\n/* harmony export */   $ZodUUID: () => (/* binding */ $ZodUUID),\n/* harmony export */   $ZodUndefined: () => (/* binding */ $ZodUndefined),\n/* harmony export */   $ZodUnion: () => (/* binding */ $ZodUnion),\n/* harmony export */   $ZodUnknown: () => (/* binding */ $ZodUnknown),\n/* harmony export */   $ZodVoid: () => (/* binding */ $ZodVoid),\n/* harmony export */   $ZodXID: () => (/* binding */ $ZodXID),\n/* harmony export */   clone: () => (/* reexport safe */ _util_js__WEBPACK_IMPORTED_MODULE_2__.clone),\n/* harmony export */   isValidBase64: () => (/* binding */ isValidBase64),\n/* harmony export */   isValidBase64URL: () => (/* binding */ isValidBase64URL),\n/* harmony export */   isValidJWT: () => (/* binding */ isValidJWT)\n/* harmony export */ });\n/* harmony import */ var _checks_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./checks.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/checks.js\");\n/* harmony import */ var _core_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./core.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/core.js\");\n/* harmony import */ var _doc_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./doc.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/doc.js\");\n/* harmony import */ var _parse_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./parse.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/parse.js\");\n/* harmony import */ var _regexes_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./regexes.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/regexes.js\");\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./util.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/util.js\");\n/* harmony import */ var _versions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./versions.js */ \"(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/versions.js\");\n\n\n\n\n\n\n\nconst $ZodType = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodType\", (inst, def) => {\n    var _a;\n    inst ?? (inst = {});\n    inst._zod.def = def; // set _def property\n    inst._zod.bag = inst._zod.bag || {}; // initialize _bag object\n    inst._zod.version = _versions_js__WEBPACK_IMPORTED_MODULE_1__.version;\n    const checks = [...(inst._zod.def.checks ?? [])];\n    // if inst is itself a checks.$ZodCheck, run it as a check\n    if (inst._zod.traits.has(\"$ZodCheck\")) {\n        checks.unshift(inst);\n    }\n    for (const ch of checks) {\n        for (const fn of ch._zod.onattach) {\n            fn(inst);\n        }\n    }\n    if (checks.length === 0) {\n        // deferred initializer\n        // inst._zod.parse is not yet defined\n        (_a = inst._zod).deferred ?? (_a.deferred = []);\n        inst._zod.deferred?.push(() => {\n            inst._zod.run = inst._zod.parse;\n        });\n    }\n    else {\n        const runChecks = (payload, checks, ctx) => {\n            let isAborted = _util_js__WEBPACK_IMPORTED_MODULE_2__.aborted(payload);\n            let asyncResult;\n            for (const ch of checks) {\n                if (ch._zod.def.when) {\n                    const shouldRun = ch._zod.def.when(payload);\n                    if (!shouldRun)\n                        continue;\n                }\n                else if (isAborted) {\n                    continue;\n                }\n                const currLen = payload.issues.length;\n                const _ = ch._zod.check(payload);\n                if (_ instanceof Promise && ctx?.async === false) {\n                    throw new _core_js__WEBPACK_IMPORTED_MODULE_0__.$ZodAsyncError();\n                }\n                if (asyncResult || _ instanceof Promise) {\n                    asyncResult = (asyncResult ?? Promise.resolve()).then(async () => {\n                        await _;\n                        const nextLen = payload.issues.length;\n                        if (nextLen === currLen)\n                            return;\n                        if (!isAborted)\n                            isAborted = _util_js__WEBPACK_IMPORTED_MODULE_2__.aborted(payload, currLen);\n                    });\n                }\n                else {\n                    const nextLen = payload.issues.length;\n                    if (nextLen === currLen)\n                        continue;\n                    if (!isAborted)\n                        isAborted = _util_js__WEBPACK_IMPORTED_MODULE_2__.aborted(payload, currLen);\n                }\n            }\n            if (asyncResult) {\n                return asyncResult.then(() => {\n                    return payload;\n                });\n            }\n            return payload;\n        };\n        // const handleChecksResult = (\n        //   checkResult: ParsePayload,\n        //   originalResult: ParsePayload,\n        //   ctx: ParseContextInternal\n        // ): util.MaybeAsync<ParsePayload> => {\n        //   // if the checks mutated the value && there are no issues, re-parse the result\n        //   if (checkResult.value !== originalResult.value && !checkResult.issues.length)\n        //     return inst._zod.parse(checkResult, ctx);\n        //   return originalResult;\n        // };\n        const handleCanaryResult = (canary, payload, ctx) => {\n            // abort if the canary is aborted\n            if (_util_js__WEBPACK_IMPORTED_MODULE_2__.aborted(canary)) {\n                canary.aborted = true;\n                return canary;\n            }\n            // run checks first, then\n            const checkResult = runChecks(payload, checks, ctx);\n            if (checkResult instanceof Promise) {\n                if (ctx.async === false)\n                    throw new _core_js__WEBPACK_IMPORTED_MODULE_0__.$ZodAsyncError();\n                return checkResult.then((checkResult) => inst._zod.parse(checkResult, ctx));\n            }\n            return inst._zod.parse(checkResult, ctx);\n        };\n        inst._zod.run = (payload, ctx) => {\n            if (ctx.skipChecks) {\n                return inst._zod.parse(payload, ctx);\n            }\n            if (ctx.direction === \"backward\") {\n                // run canary\n                // initial pass (no checks)\n                const canary = inst._zod.parse({ value: payload.value, issues: [] }, { ...ctx, skipChecks: true });\n                if (canary instanceof Promise) {\n                    return canary.then((canary) => {\n                        return handleCanaryResult(canary, payload, ctx);\n                    });\n                }\n                return handleCanaryResult(canary, payload, ctx);\n            }\n            // forward\n            const result = inst._zod.parse(payload, ctx);\n            if (result instanceof Promise) {\n                if (ctx.async === false)\n                    throw new _core_js__WEBPACK_IMPORTED_MODULE_0__.$ZodAsyncError();\n                return result.then((result) => runChecks(result, checks, ctx));\n            }\n            return runChecks(result, checks, ctx);\n        };\n    }\n    inst[\"~standard\"] = {\n        validate: (value) => {\n            try {\n                const r = (0,_parse_js__WEBPACK_IMPORTED_MODULE_3__.safeParse)(inst, value);\n                return r.success ? { value: r.data } : { issues: r.error?.issues };\n            }\n            catch (_) {\n                return (0,_parse_js__WEBPACK_IMPORTED_MODULE_3__.safeParseAsync)(inst, value).then((r) => (r.success ? { value: r.data } : { issues: r.error?.issues }));\n            }\n        },\n        vendor: \"zod\",\n        version: 1,\n    };\n});\n\nconst $ZodString = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodString\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = [...(inst?._zod.bag?.patterns ?? [])].pop() ?? _regexes_js__WEBPACK_IMPORTED_MODULE_4__.string(inst._zod.bag);\n    inst._zod.parse = (payload, _) => {\n        if (def.coerce)\n            try {\n                payload.value = String(payload.value);\n            }\n            catch (_) { }\n        if (typeof payload.value === \"string\")\n            return payload;\n        payload.issues.push({\n            expected: \"string\",\n            code: \"invalid_type\",\n            input: payload.value,\n            inst,\n        });\n        return payload;\n    };\n});\nconst $ZodStringFormat = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodStringFormat\", (inst, def) => {\n    // check initialization must come first\n    _checks_js__WEBPACK_IMPORTED_MODULE_5__.$ZodCheckStringFormat.init(inst, def);\n    $ZodString.init(inst, def);\n});\nconst $ZodGUID = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodGUID\", (inst, def) => {\n    def.pattern ?? (def.pattern = _regexes_js__WEBPACK_IMPORTED_MODULE_4__.guid);\n    $ZodStringFormat.init(inst, def);\n});\nconst $ZodUUID = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodUUID\", (inst, def) => {\n    if (def.version) {\n        const versionMap = {\n            v1: 1,\n            v2: 2,\n            v3: 3,\n            v4: 4,\n            v5: 5,\n            v6: 6,\n            v7: 7,\n            v8: 8,\n        };\n        const v = versionMap[def.version];\n        if (v === undefined)\n            throw new Error(`Invalid UUID version: \"${def.version}\"`);\n        def.pattern ?? (def.pattern = _regexes_js__WEBPACK_IMPORTED_MODULE_4__.uuid(v));\n    }\n    else\n        def.pattern ?? (def.pattern = _regexes_js__WEBPACK_IMPORTED_MODULE_4__.uuid());\n    $ZodStringFormat.init(inst, def);\n});\nconst $ZodEmail = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodEmail\", (inst, def) => {\n    def.pattern ?? (def.pattern = _regexes_js__WEBPACK_IMPORTED_MODULE_4__.email);\n    $ZodStringFormat.init(inst, def);\n});\nconst $ZodURL = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodURL\", (inst, def) => {\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        try {\n            // Trim whitespace from input\n            const trimmed = payload.value.trim();\n            // @ts-ignore\n            const url = new URL(trimmed);\n            if (def.hostname) {\n                def.hostname.lastIndex = 0;\n                if (!def.hostname.test(url.hostname)) {\n                    payload.issues.push({\n                        code: \"invalid_format\",\n                        format: \"url\",\n                        note: \"Invalid hostname\",\n                        pattern: _regexes_js__WEBPACK_IMPORTED_MODULE_4__.hostname.source,\n                        input: payload.value,\n                        inst,\n                        continue: !def.abort,\n                    });\n                }\n            }\n            if (def.protocol) {\n                def.protocol.lastIndex = 0;\n                if (!def.protocol.test(url.protocol.endsWith(\":\") ? url.protocol.slice(0, -1) : url.protocol)) {\n                    payload.issues.push({\n                        code: \"invalid_format\",\n                        format: \"url\",\n                        note: \"Invalid protocol\",\n                        pattern: def.protocol.source,\n                        input: payload.value,\n                        inst,\n                        continue: !def.abort,\n                    });\n                }\n            }\n            // Set the output value based on normalize flag\n            if (def.normalize) {\n                // Use normalized URL\n                payload.value = url.href;\n            }\n            else {\n                // Preserve the original input (trimmed)\n                payload.value = trimmed;\n            }\n            return;\n        }\n        catch (_) {\n            payload.issues.push({\n                code: \"invalid_format\",\n                format: \"url\",\n                input: payload.value,\n                inst,\n                continue: !def.abort,\n            });\n        }\n    };\n});\nconst $ZodEmoji = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodEmoji\", (inst, def) => {\n    def.pattern ?? (def.pattern = _regexes_js__WEBPACK_IMPORTED_MODULE_4__.emoji());\n    $ZodStringFormat.init(inst, def);\n});\nconst $ZodNanoID = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodNanoID\", (inst, def) => {\n    def.pattern ?? (def.pattern = _regexes_js__WEBPACK_IMPORTED_MODULE_4__.nanoid);\n    $ZodStringFormat.init(inst, def);\n});\nconst $ZodCUID = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodCUID\", (inst, def) => {\n    def.pattern ?? (def.pattern = _regexes_js__WEBPACK_IMPORTED_MODULE_4__.cuid);\n    $ZodStringFormat.init(inst, def);\n});\nconst $ZodCUID2 = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodCUID2\", (inst, def) => {\n    def.pattern ?? (def.pattern = _regexes_js__WEBPACK_IMPORTED_MODULE_4__.cuid2);\n    $ZodStringFormat.init(inst, def);\n});\nconst $ZodULID = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodULID\", (inst, def) => {\n    def.pattern ?? (def.pattern = _regexes_js__WEBPACK_IMPORTED_MODULE_4__.ulid);\n    $ZodStringFormat.init(inst, def);\n});\nconst $ZodXID = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodXID\", (inst, def) => {\n    def.pattern ?? (def.pattern = _regexes_js__WEBPACK_IMPORTED_MODULE_4__.xid);\n    $ZodStringFormat.init(inst, def);\n});\nconst $ZodKSUID = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodKSUID\", (inst, def) => {\n    def.pattern ?? (def.pattern = _regexes_js__WEBPACK_IMPORTED_MODULE_4__.ksuid);\n    $ZodStringFormat.init(inst, def);\n});\nconst $ZodISODateTime = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodISODateTime\", (inst, def) => {\n    def.pattern ?? (def.pattern = _regexes_js__WEBPACK_IMPORTED_MODULE_4__.datetime(def));\n    $ZodStringFormat.init(inst, def);\n});\nconst $ZodISODate = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodISODate\", (inst, def) => {\n    def.pattern ?? (def.pattern = _regexes_js__WEBPACK_IMPORTED_MODULE_4__.date);\n    $ZodStringFormat.init(inst, def);\n});\nconst $ZodISOTime = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodISOTime\", (inst, def) => {\n    def.pattern ?? (def.pattern = _regexes_js__WEBPACK_IMPORTED_MODULE_4__.time(def));\n    $ZodStringFormat.init(inst, def);\n});\nconst $ZodISODuration = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodISODuration\", (inst, def) => {\n    def.pattern ?? (def.pattern = _regexes_js__WEBPACK_IMPORTED_MODULE_4__.duration);\n    $ZodStringFormat.init(inst, def);\n});\nconst $ZodIPv4 = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodIPv4\", (inst, def) => {\n    def.pattern ?? (def.pattern = _regexes_js__WEBPACK_IMPORTED_MODULE_4__.ipv4);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = `ipv4`;\n    });\n});\nconst $ZodIPv6 = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodIPv6\", (inst, def) => {\n    def.pattern ?? (def.pattern = _regexes_js__WEBPACK_IMPORTED_MODULE_4__.ipv6);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = `ipv6`;\n    });\n    inst._zod.check = (payload) => {\n        try {\n            // @ts-ignore\n            new URL(`http://[${payload.value}]`);\n            // return;\n        }\n        catch {\n            payload.issues.push({\n                code: \"invalid_format\",\n                format: \"ipv6\",\n                input: payload.value,\n                inst,\n                continue: !def.abort,\n            });\n        }\n    };\n});\nconst $ZodCIDRv4 = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodCIDRv4\", (inst, def) => {\n    def.pattern ?? (def.pattern = _regexes_js__WEBPACK_IMPORTED_MODULE_4__.cidrv4);\n    $ZodStringFormat.init(inst, def);\n});\nconst $ZodCIDRv6 = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodCIDRv6\", (inst, def) => {\n    def.pattern ?? (def.pattern = _regexes_js__WEBPACK_IMPORTED_MODULE_4__.cidrv6); // not used for validation\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        const [address, prefix] = payload.value.split(\"/\");\n        try {\n            if (!prefix)\n                throw new Error();\n            const prefixNum = Number(prefix);\n            if (`${prefixNum}` !== prefix)\n                throw new Error();\n            if (prefixNum < 0 || prefixNum > 128)\n                throw new Error();\n            // @ts-ignore\n            new URL(`http://[${address}]`);\n        }\n        catch {\n            payload.issues.push({\n                code: \"invalid_format\",\n                format: \"cidrv6\",\n                input: payload.value,\n                inst,\n                continue: !def.abort,\n            });\n        }\n    };\n});\n//////////////////////////////   ZodBase64   //////////////////////////////\nfunction isValidBase64(data) {\n    if (data === \"\")\n        return true;\n    if (data.length % 4 !== 0)\n        return false;\n    try {\n        // @ts-ignore\n        atob(data);\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\nconst $ZodBase64 = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodBase64\", (inst, def) => {\n    def.pattern ?? (def.pattern = _regexes_js__WEBPACK_IMPORTED_MODULE_4__.base64);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        inst._zod.bag.contentEncoding = \"base64\";\n    });\n    inst._zod.check = (payload) => {\n        if (isValidBase64(payload.value))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: \"base64\",\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\n//////////////////////////////   ZodBase64   //////////////////////////////\nfunction isValidBase64URL(data) {\n    if (!_regexes_js__WEBPACK_IMPORTED_MODULE_4__.base64url.test(data))\n        return false;\n    const base64 = data.replace(/[-_]/g, (c) => (c === \"-\" ? \"+\" : \"/\"));\n    const padded = base64.padEnd(Math.ceil(base64.length / 4) * 4, \"=\");\n    return isValidBase64(padded);\n}\nconst $ZodBase64URL = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodBase64URL\", (inst, def) => {\n    def.pattern ?? (def.pattern = _regexes_js__WEBPACK_IMPORTED_MODULE_4__.base64url);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        inst._zod.bag.contentEncoding = \"base64url\";\n    });\n    inst._zod.check = (payload) => {\n        if (isValidBase64URL(payload.value))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: \"base64url\",\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nconst $ZodE164 = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodE164\", (inst, def) => {\n    def.pattern ?? (def.pattern = _regexes_js__WEBPACK_IMPORTED_MODULE_4__.e164);\n    $ZodStringFormat.init(inst, def);\n});\n//////////////////////////////   ZodJWT   //////////////////////////////\nfunction isValidJWT(token, algorithm = null) {\n    try {\n        const tokensParts = token.split(\".\");\n        if (tokensParts.length !== 3)\n            return false;\n        const [header] = tokensParts;\n        if (!header)\n            return false;\n        // @ts-ignore\n        const parsedHeader = JSON.parse(atob(header));\n        if (\"typ\" in parsedHeader && parsedHeader?.typ !== \"JWT\")\n            return false;\n        if (!parsedHeader.alg)\n            return false;\n        if (algorithm && (!(\"alg\" in parsedHeader) || parsedHeader.alg !== algorithm))\n            return false;\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\nconst $ZodJWT = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodJWT\", (inst, def) => {\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        if (isValidJWT(payload.value, def.alg))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: \"jwt\",\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nconst $ZodCustomStringFormat = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodCustomStringFormat\", (inst, def) => {\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        if (def.fn(payload.value))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: def.format,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nconst $ZodNumber = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodNumber\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = inst._zod.bag.pattern ?? _regexes_js__WEBPACK_IMPORTED_MODULE_4__.number;\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce)\n            try {\n                payload.value = Number(payload.value);\n            }\n            catch (_) { }\n        const input = payload.value;\n        if (typeof input === \"number\" && !Number.isNaN(input) && Number.isFinite(input)) {\n            return payload;\n        }\n        const received = typeof input === \"number\"\n            ? Number.isNaN(input)\n                ? \"NaN\"\n                : !Number.isFinite(input)\n                    ? \"Infinity\"\n                    : undefined\n            : undefined;\n        payload.issues.push({\n            expected: \"number\",\n            code: \"invalid_type\",\n            input,\n            inst,\n            ...(received ? { received } : {}),\n        });\n        return payload;\n    };\n});\nconst $ZodNumberFormat = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodNumber\", (inst, def) => {\n    _checks_js__WEBPACK_IMPORTED_MODULE_5__.$ZodCheckNumberFormat.init(inst, def);\n    $ZodNumber.init(inst, def); // no format checksp\n});\nconst $ZodBoolean = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodBoolean\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = _regexes_js__WEBPACK_IMPORTED_MODULE_4__.boolean;\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce)\n            try {\n                payload.value = Boolean(payload.value);\n            }\n            catch (_) { }\n        const input = payload.value;\n        if (typeof input === \"boolean\")\n            return payload;\n        payload.issues.push({\n            expected: \"boolean\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nconst $ZodBigInt = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodBigInt\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = _regexes_js__WEBPACK_IMPORTED_MODULE_4__.bigint;\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce)\n            try {\n                payload.value = BigInt(payload.value);\n            }\n            catch (_) { }\n        if (typeof payload.value === \"bigint\")\n            return payload;\n        payload.issues.push({\n            expected: \"bigint\",\n            code: \"invalid_type\",\n            input: payload.value,\n            inst,\n        });\n        return payload;\n    };\n});\nconst $ZodBigIntFormat = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodBigInt\", (inst, def) => {\n    _checks_js__WEBPACK_IMPORTED_MODULE_5__.$ZodCheckBigIntFormat.init(inst, def);\n    $ZodBigInt.init(inst, def); // no format checks\n});\nconst $ZodSymbol = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodSymbol\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (typeof input === \"symbol\")\n            return payload;\n        payload.issues.push({\n            expected: \"symbol\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nconst $ZodUndefined = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodUndefined\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = _regexes_js__WEBPACK_IMPORTED_MODULE_4__.undefined;\n    inst._zod.values = new Set([undefined]);\n    inst._zod.optin = \"optional\";\n    inst._zod.optout = \"optional\";\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (typeof input === \"undefined\")\n            return payload;\n        payload.issues.push({\n            expected: \"undefined\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nconst $ZodNull = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodNull\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = _regexes_js__WEBPACK_IMPORTED_MODULE_4__[\"null\"];\n    inst._zod.values = new Set([null]);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (input === null)\n            return payload;\n        payload.issues.push({\n            expected: \"null\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nconst $ZodAny = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodAny\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload) => payload;\n});\nconst $ZodUnknown = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodUnknown\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload) => payload;\n});\nconst $ZodNever = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodNever\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        payload.issues.push({\n            expected: \"never\",\n            code: \"invalid_type\",\n            input: payload.value,\n            inst,\n        });\n        return payload;\n    };\n});\nconst $ZodVoid = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodVoid\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (typeof input === \"undefined\")\n            return payload;\n        payload.issues.push({\n            expected: \"void\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nconst $ZodDate = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodDate\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce) {\n            try {\n                payload.value = new Date(payload.value);\n            }\n            catch (_err) { }\n        }\n        const input = payload.value;\n        const isDate = input instanceof Date;\n        const isValidDate = isDate && !Number.isNaN(input.getTime());\n        if (isValidDate)\n            return payload;\n        payload.issues.push({\n            expected: \"date\",\n            code: \"invalid_type\",\n            input,\n            ...(isDate ? { received: \"Invalid Date\" } : {}),\n            inst,\n        });\n        return payload;\n    };\n});\nfunction handleArrayResult(result, final, index) {\n    if (result.issues.length) {\n        final.issues.push(..._util_js__WEBPACK_IMPORTED_MODULE_2__.prefixIssues(index, result.issues));\n    }\n    final.value[index] = result.value;\n}\nconst $ZodArray = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodArray\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!Array.isArray(input)) {\n            payload.issues.push({\n                expected: \"array\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        payload.value = Array(input.length);\n        const proms = [];\n        for (let i = 0; i < input.length; i++) {\n            const item = input[i];\n            const result = def.element._zod.run({\n                value: item,\n                issues: [],\n            }, ctx);\n            if (result instanceof Promise) {\n                proms.push(result.then((result) => handleArrayResult(result, payload, i)));\n            }\n            else {\n                handleArrayResult(result, payload, i);\n            }\n        }\n        if (proms.length) {\n            return Promise.all(proms).then(() => payload);\n        }\n        return payload; //handleArrayResultsAsync(parseResults, final);\n    };\n});\nfunction handlePropertyResult(result, final, key, input) {\n    if (result.issues.length) {\n        final.issues.push(..._util_js__WEBPACK_IMPORTED_MODULE_2__.prefixIssues(key, result.issues));\n    }\n    if (result.value === undefined) {\n        if (key in input) {\n            final.value[key] = undefined;\n        }\n    }\n    else {\n        final.value[key] = result.value;\n    }\n}\nfunction normalizeDef(def) {\n    const keys = Object.keys(def.shape);\n    for (const k of keys) {\n        if (!def.shape[k]._zod.traits.has(\"$ZodType\")) {\n            throw new Error(`Invalid element at key \"${k}\": expected a Zod schema`);\n        }\n    }\n    const okeys = _util_js__WEBPACK_IMPORTED_MODULE_2__.optionalKeys(def.shape);\n    return {\n        ...def,\n        keys,\n        keySet: new Set(keys),\n        numKeys: keys.length,\n        optionalKeys: new Set(okeys),\n    };\n}\nfunction handleCatchall(proms, input, payload, ctx, def, inst) {\n    const unrecognized = [];\n    // iterate over input keys\n    const keySet = def.keySet;\n    const _catchall = def.catchall._zod;\n    const t = _catchall.def.type;\n    for (const key of Object.keys(input)) {\n        if (keySet.has(key))\n            continue;\n        if (t === \"never\") {\n            unrecognized.push(key);\n            continue;\n        }\n        const r = _catchall.run({ value: input[key], issues: [] }, ctx);\n        if (r instanceof Promise) {\n            proms.push(r.then((r) => handlePropertyResult(r, payload, key, input)));\n        }\n        else {\n            handlePropertyResult(r, payload, key, input);\n        }\n    }\n    if (unrecognized.length) {\n        payload.issues.push({\n            code: \"unrecognized_keys\",\n            keys: unrecognized,\n            input,\n            inst,\n        });\n    }\n    if (!proms.length)\n        return payload;\n    return Promise.all(proms).then(() => {\n        return payload;\n    });\n}\nconst $ZodObject = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodObject\", (inst, def) => {\n    // requires cast because technically $ZodObject doesn't extend\n    $ZodType.init(inst, def);\n    const _normalized = _util_js__WEBPACK_IMPORTED_MODULE_2__.cached(() => normalizeDef(def));\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"propValues\", () => {\n        const shape = def.shape;\n        const propValues = {};\n        for (const key in shape) {\n            const field = shape[key]._zod;\n            if (field.values) {\n                propValues[key] ?? (propValues[key] = new Set());\n                for (const v of field.values)\n                    propValues[key].add(v);\n            }\n        }\n        return propValues;\n    });\n    const isObject = _util_js__WEBPACK_IMPORTED_MODULE_2__.isObject;\n    const catchall = def.catchall;\n    let value;\n    inst._zod.parse = (payload, ctx) => {\n        value ?? (value = _normalized.value);\n        const input = payload.value;\n        if (!isObject(input)) {\n            payload.issues.push({\n                expected: \"object\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        payload.value = {};\n        const proms = [];\n        const shape = value.shape;\n        for (const key of value.keys) {\n            const el = shape[key];\n            const r = el._zod.run({ value: input[key], issues: [] }, ctx);\n            if (r instanceof Promise) {\n                proms.push(r.then((r) => handlePropertyResult(r, payload, key, input)));\n            }\n            else {\n                handlePropertyResult(r, payload, key, input);\n            }\n        }\n        if (!catchall) {\n            return proms.length ? Promise.all(proms).then(() => payload) : payload;\n        }\n        return handleCatchall(proms, input, payload, ctx, _normalized.value, inst);\n    };\n});\nconst $ZodObjectJIT = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodObjectJIT\", (inst, def) => {\n    // requires cast because technically $ZodObject doesn't extend\n    $ZodObject.init(inst, def);\n    const superParse = inst._zod.parse;\n    const _normalized = _util_js__WEBPACK_IMPORTED_MODULE_2__.cached(() => normalizeDef(def));\n    const generateFastpass = (shape) => {\n        const doc = new _doc_js__WEBPACK_IMPORTED_MODULE_6__.Doc([\"shape\", \"payload\", \"ctx\"]);\n        const normalized = _normalized.value;\n        const parseStr = (key) => {\n            const k = _util_js__WEBPACK_IMPORTED_MODULE_2__.esc(key);\n            return `shape[${k}]._zod.run({ value: input[${k}], issues: [] }, ctx)`;\n        };\n        doc.write(`const input = payload.value;`);\n        const ids = Object.create(null);\n        let counter = 0;\n        for (const key of normalized.keys) {\n            ids[key] = `key_${counter++}`;\n        }\n        // A: preserve key order {\n        doc.write(`const newResult = {}`);\n        for (const key of normalized.keys) {\n            const id = ids[key];\n            const k = _util_js__WEBPACK_IMPORTED_MODULE_2__.esc(key);\n            doc.write(`const ${id} = ${parseStr(key)};`);\n            doc.write(`\n        if (${id}.issues.length) {\n          payload.issues = payload.issues.concat(${id}.issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [${k}, ...iss.path] : [${k}]\n          })));\n        }\n        \n        if (${id}.value === undefined) {\n          if (${k} in input) {\n            newResult[${k}] = undefined;\n          }\n        } else {\n          newResult[${k}] = ${id}.value;\n        }\n      `);\n        }\n        doc.write(`payload.value = newResult;`);\n        doc.write(`return payload;`);\n        const fn = doc.compile();\n        return (payload, ctx) => fn(shape, payload, ctx);\n    };\n    let fastpass;\n    const isObject = _util_js__WEBPACK_IMPORTED_MODULE_2__.isObject;\n    const jit = !_core_js__WEBPACK_IMPORTED_MODULE_0__.globalConfig.jitless;\n    const allowsEval = _util_js__WEBPACK_IMPORTED_MODULE_2__.allowsEval;\n    const fastEnabled = jit && allowsEval.value; // && !def.catchall;\n    const catchall = def.catchall;\n    let value;\n    inst._zod.parse = (payload, ctx) => {\n        value ?? (value = _normalized.value);\n        const input = payload.value;\n        if (!isObject(input)) {\n            payload.issues.push({\n                expected: \"object\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        if (jit && fastEnabled && ctx?.async === false && ctx.jitless !== true) {\n            // always synchronous\n            if (!fastpass)\n                fastpass = generateFastpass(def.shape);\n            payload = fastpass(payload, ctx);\n            if (!catchall)\n                return payload;\n            return handleCatchall([], input, payload, ctx, value, inst);\n        }\n        return superParse(payload, ctx);\n    };\n});\nfunction handleUnionResults(results, final, inst, ctx) {\n    for (const result of results) {\n        if (result.issues.length === 0) {\n            final.value = result.value;\n            return final;\n        }\n    }\n    const nonaborted = results.filter((r) => !_util_js__WEBPACK_IMPORTED_MODULE_2__.aborted(r));\n    if (nonaborted.length === 1) {\n        final.value = nonaborted[0].value;\n        return nonaborted[0];\n    }\n    final.issues.push({\n        code: \"invalid_union\",\n        input: final.value,\n        inst,\n        errors: results.map((result) => result.issues.map((iss) => _util_js__WEBPACK_IMPORTED_MODULE_2__.finalizeIssue(iss, ctx, _core_js__WEBPACK_IMPORTED_MODULE_0__.config()))),\n    });\n    return final;\n}\nconst $ZodUnion = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodUnion\", (inst, def) => {\n    $ZodType.init(inst, def);\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"optin\", () => def.options.some((o) => o._zod.optin === \"optional\") ? \"optional\" : undefined);\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"optout\", () => def.options.some((o) => o._zod.optout === \"optional\") ? \"optional\" : undefined);\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"values\", () => {\n        if (def.options.every((o) => o._zod.values)) {\n            return new Set(def.options.flatMap((option) => Array.from(option._zod.values)));\n        }\n        return undefined;\n    });\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"pattern\", () => {\n        if (def.options.every((o) => o._zod.pattern)) {\n            const patterns = def.options.map((o) => o._zod.pattern);\n            return new RegExp(`^(${patterns.map((p) => _util_js__WEBPACK_IMPORTED_MODULE_2__.cleanRegex(p.source)).join(\"|\")})$`);\n        }\n        return undefined;\n    });\n    const single = def.options.length === 1;\n    const first = def.options[0]._zod.run;\n    inst._zod.parse = (payload, ctx) => {\n        if (single) {\n            return first(payload, ctx);\n        }\n        let async = false;\n        const results = [];\n        for (const option of def.options) {\n            const result = option._zod.run({\n                value: payload.value,\n                issues: [],\n            }, ctx);\n            if (result instanceof Promise) {\n                results.push(result);\n                async = true;\n            }\n            else {\n                if (result.issues.length === 0)\n                    return result;\n                results.push(result);\n            }\n        }\n        if (!async)\n            return handleUnionResults(results, payload, inst, ctx);\n        return Promise.all(results).then((results) => {\n            return handleUnionResults(results, payload, inst, ctx);\n        });\n    };\n});\nconst $ZodDiscriminatedUnion = \n/*@__PURE__*/\n_core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodDiscriminatedUnion\", (inst, def) => {\n    $ZodUnion.init(inst, def);\n    const _super = inst._zod.parse;\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"propValues\", () => {\n        const propValues = {};\n        for (const option of def.options) {\n            const pv = option._zod.propValues;\n            if (!pv || Object.keys(pv).length === 0)\n                throw new Error(`Invalid discriminated union option at index \"${def.options.indexOf(option)}\"`);\n            for (const [k, v] of Object.entries(pv)) {\n                if (!propValues[k])\n                    propValues[k] = new Set();\n                for (const val of v) {\n                    propValues[k].add(val);\n                }\n            }\n        }\n        return propValues;\n    });\n    const disc = _util_js__WEBPACK_IMPORTED_MODULE_2__.cached(() => {\n        const opts = def.options;\n        const map = new Map();\n        for (const o of opts) {\n            const values = o._zod.propValues?.[def.discriminator];\n            if (!values || values.size === 0)\n                throw new Error(`Invalid discriminated union option at index \"${def.options.indexOf(o)}\"`);\n            for (const v of values) {\n                if (map.has(v)) {\n                    throw new Error(`Duplicate discriminator value \"${String(v)}\"`);\n                }\n                map.set(v, o);\n            }\n        }\n        return map;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!_util_js__WEBPACK_IMPORTED_MODULE_2__.isObject(input)) {\n            payload.issues.push({\n                code: \"invalid_type\",\n                expected: \"object\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        const opt = disc.value.get(input?.[def.discriminator]);\n        if (opt) {\n            return opt._zod.run(payload, ctx);\n        }\n        if (def.unionFallback) {\n            return _super(payload, ctx);\n        }\n        // no matching discriminator\n        payload.issues.push({\n            code: \"invalid_union\",\n            errors: [],\n            note: \"No matching discriminator\",\n            discriminator: def.discriminator,\n            input,\n            path: [def.discriminator],\n            inst,\n        });\n        return payload;\n    };\n});\nconst $ZodIntersection = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodIntersection\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        const left = def.left._zod.run({ value: input, issues: [] }, ctx);\n        const right = def.right._zod.run({ value: input, issues: [] }, ctx);\n        const async = left instanceof Promise || right instanceof Promise;\n        if (async) {\n            return Promise.all([left, right]).then(([left, right]) => {\n                return handleIntersectionResults(payload, left, right);\n            });\n        }\n        return handleIntersectionResults(payload, left, right);\n    };\n});\nfunction mergeValues(a, b) {\n    // const aType = parse.t(a);\n    // const bType = parse.t(b);\n    if (a === b) {\n        return { valid: true, data: a };\n    }\n    if (a instanceof Date && b instanceof Date && +a === +b) {\n        return { valid: true, data: a };\n    }\n    if (_util_js__WEBPACK_IMPORTED_MODULE_2__.isPlainObject(a) && _util_js__WEBPACK_IMPORTED_MODULE_2__.isPlainObject(b)) {\n        const bKeys = Object.keys(b);\n        const sharedKeys = Object.keys(a).filter((key) => bKeys.indexOf(key) !== -1);\n        const newObj = { ...a, ...b };\n        for (const key of sharedKeys) {\n            const sharedValue = mergeValues(a[key], b[key]);\n            if (!sharedValue.valid) {\n                return {\n                    valid: false,\n                    mergeErrorPath: [key, ...sharedValue.mergeErrorPath],\n                };\n            }\n            newObj[key] = sharedValue.data;\n        }\n        return { valid: true, data: newObj };\n    }\n    if (Array.isArray(a) && Array.isArray(b)) {\n        if (a.length !== b.length) {\n            return { valid: false, mergeErrorPath: [] };\n        }\n        const newArray = [];\n        for (let index = 0; index < a.length; index++) {\n            const itemA = a[index];\n            const itemB = b[index];\n            const sharedValue = mergeValues(itemA, itemB);\n            if (!sharedValue.valid) {\n                return {\n                    valid: false,\n                    mergeErrorPath: [index, ...sharedValue.mergeErrorPath],\n                };\n            }\n            newArray.push(sharedValue.data);\n        }\n        return { valid: true, data: newArray };\n    }\n    return { valid: false, mergeErrorPath: [] };\n}\nfunction handleIntersectionResults(result, left, right) {\n    if (left.issues.length) {\n        result.issues.push(...left.issues);\n    }\n    if (right.issues.length) {\n        result.issues.push(...right.issues);\n    }\n    if (_util_js__WEBPACK_IMPORTED_MODULE_2__.aborted(result))\n        return result;\n    const merged = mergeValues(left.value, right.value);\n    if (!merged.valid) {\n        throw new Error(`Unmergable intersection. Error path: ` + `${JSON.stringify(merged.mergeErrorPath)}`);\n    }\n    result.value = merged.data;\n    return result;\n}\nconst $ZodTuple = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodTuple\", (inst, def) => {\n    $ZodType.init(inst, def);\n    const items = def.items;\n    const optStart = items.length - [...items].reverse().findIndex((item) => item._zod.optin !== \"optional\");\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!Array.isArray(input)) {\n            payload.issues.push({\n                input,\n                inst,\n                expected: \"tuple\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        payload.value = [];\n        const proms = [];\n        if (!def.rest) {\n            const tooBig = input.length > items.length;\n            const tooSmall = input.length < optStart - 1;\n            if (tooBig || tooSmall) {\n                payload.issues.push({\n                    ...(tooBig ? { code: \"too_big\", maximum: items.length } : { code: \"too_small\", minimum: items.length }),\n                    input,\n                    inst,\n                    origin: \"array\",\n                });\n                return payload;\n            }\n        }\n        let i = -1;\n        for (const item of items) {\n            i++;\n            if (i >= input.length)\n                if (i >= optStart)\n                    continue;\n            const result = item._zod.run({\n                value: input[i],\n                issues: [],\n            }, ctx);\n            if (result instanceof Promise) {\n                proms.push(result.then((result) => handleTupleResult(result, payload, i)));\n            }\n            else {\n                handleTupleResult(result, payload, i);\n            }\n        }\n        if (def.rest) {\n            const rest = input.slice(items.length);\n            for (const el of rest) {\n                i++;\n                const result = def.rest._zod.run({\n                    value: el,\n                    issues: [],\n                }, ctx);\n                if (result instanceof Promise) {\n                    proms.push(result.then((result) => handleTupleResult(result, payload, i)));\n                }\n                else {\n                    handleTupleResult(result, payload, i);\n                }\n            }\n        }\n        if (proms.length)\n            return Promise.all(proms).then(() => payload);\n        return payload;\n    };\n});\nfunction handleTupleResult(result, final, index) {\n    if (result.issues.length) {\n        final.issues.push(..._util_js__WEBPACK_IMPORTED_MODULE_2__.prefixIssues(index, result.issues));\n    }\n    final.value[index] = result.value;\n}\nconst $ZodRecord = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodRecord\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!_util_js__WEBPACK_IMPORTED_MODULE_2__.isPlainObject(input)) {\n            payload.issues.push({\n                expected: \"record\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        const proms = [];\n        if (def.keyType._zod.values) {\n            const values = def.keyType._zod.values;\n            payload.value = {};\n            for (const key of values) {\n                if (typeof key === \"string\" || typeof key === \"number\" || typeof key === \"symbol\") {\n                    const result = def.valueType._zod.run({ value: input[key], issues: [] }, ctx);\n                    if (result instanceof Promise) {\n                        proms.push(result.then((result) => {\n                            if (result.issues.length) {\n                                payload.issues.push(..._util_js__WEBPACK_IMPORTED_MODULE_2__.prefixIssues(key, result.issues));\n                            }\n                            payload.value[key] = result.value;\n                        }));\n                    }\n                    else {\n                        if (result.issues.length) {\n                            payload.issues.push(..._util_js__WEBPACK_IMPORTED_MODULE_2__.prefixIssues(key, result.issues));\n                        }\n                        payload.value[key] = result.value;\n                    }\n                }\n            }\n            let unrecognized;\n            for (const key in input) {\n                if (!values.has(key)) {\n                    unrecognized = unrecognized ?? [];\n                    unrecognized.push(key);\n                }\n            }\n            if (unrecognized && unrecognized.length > 0) {\n                payload.issues.push({\n                    code: \"unrecognized_keys\",\n                    input,\n                    inst,\n                    keys: unrecognized,\n                });\n            }\n        }\n        else {\n            payload.value = {};\n            for (const key of Reflect.ownKeys(input)) {\n                if (key === \"__proto__\")\n                    continue;\n                const keyResult = def.keyType._zod.run({ value: key, issues: [] }, ctx);\n                if (keyResult instanceof Promise) {\n                    throw new Error(\"Async schemas not supported in object keys currently\");\n                }\n                if (keyResult.issues.length) {\n                    payload.issues.push({\n                        code: \"invalid_key\",\n                        origin: \"record\",\n                        issues: keyResult.issues.map((iss) => _util_js__WEBPACK_IMPORTED_MODULE_2__.finalizeIssue(iss, ctx, _core_js__WEBPACK_IMPORTED_MODULE_0__.config())),\n                        input: key,\n                        path: [key],\n                        inst,\n                    });\n                    payload.value[keyResult.value] = keyResult.value;\n                    continue;\n                }\n                const result = def.valueType._zod.run({ value: input[key], issues: [] }, ctx);\n                if (result instanceof Promise) {\n                    proms.push(result.then((result) => {\n                        if (result.issues.length) {\n                            payload.issues.push(..._util_js__WEBPACK_IMPORTED_MODULE_2__.prefixIssues(key, result.issues));\n                        }\n                        payload.value[keyResult.value] = result.value;\n                    }));\n                }\n                else {\n                    if (result.issues.length) {\n                        payload.issues.push(..._util_js__WEBPACK_IMPORTED_MODULE_2__.prefixIssues(key, result.issues));\n                    }\n                    payload.value[keyResult.value] = result.value;\n                }\n            }\n        }\n        if (proms.length) {\n            return Promise.all(proms).then(() => payload);\n        }\n        return payload;\n    };\n});\nconst $ZodMap = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodMap\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!(input instanceof Map)) {\n            payload.issues.push({\n                expected: \"map\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        const proms = [];\n        payload.value = new Map();\n        for (const [key, value] of input) {\n            const keyResult = def.keyType._zod.run({ value: key, issues: [] }, ctx);\n            const valueResult = def.valueType._zod.run({ value: value, issues: [] }, ctx);\n            if (keyResult instanceof Promise || valueResult instanceof Promise) {\n                proms.push(Promise.all([keyResult, valueResult]).then(([keyResult, valueResult]) => {\n                    handleMapResult(keyResult, valueResult, payload, key, input, inst, ctx);\n                }));\n            }\n            else {\n                handleMapResult(keyResult, valueResult, payload, key, input, inst, ctx);\n            }\n        }\n        if (proms.length)\n            return Promise.all(proms).then(() => payload);\n        return payload;\n    };\n});\nfunction handleMapResult(keyResult, valueResult, final, key, input, inst, ctx) {\n    if (keyResult.issues.length) {\n        if (_util_js__WEBPACK_IMPORTED_MODULE_2__.propertyKeyTypes.has(typeof key)) {\n            final.issues.push(..._util_js__WEBPACK_IMPORTED_MODULE_2__.prefixIssues(key, keyResult.issues));\n        }\n        else {\n            final.issues.push({\n                code: \"invalid_key\",\n                origin: \"map\",\n                input,\n                inst,\n                issues: keyResult.issues.map((iss) => _util_js__WEBPACK_IMPORTED_MODULE_2__.finalizeIssue(iss, ctx, _core_js__WEBPACK_IMPORTED_MODULE_0__.config())),\n            });\n        }\n    }\n    if (valueResult.issues.length) {\n        if (_util_js__WEBPACK_IMPORTED_MODULE_2__.propertyKeyTypes.has(typeof key)) {\n            final.issues.push(..._util_js__WEBPACK_IMPORTED_MODULE_2__.prefixIssues(key, valueResult.issues));\n        }\n        else {\n            final.issues.push({\n                origin: \"map\",\n                code: \"invalid_element\",\n                input,\n                inst,\n                key: key,\n                issues: valueResult.issues.map((iss) => _util_js__WEBPACK_IMPORTED_MODULE_2__.finalizeIssue(iss, ctx, _core_js__WEBPACK_IMPORTED_MODULE_0__.config())),\n            });\n        }\n    }\n    final.value.set(keyResult.value, valueResult.value);\n}\nconst $ZodSet = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodSet\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!(input instanceof Set)) {\n            payload.issues.push({\n                input,\n                inst,\n                expected: \"set\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        const proms = [];\n        payload.value = new Set();\n        for (const item of input) {\n            const result = def.valueType._zod.run({ value: item, issues: [] }, ctx);\n            if (result instanceof Promise) {\n                proms.push(result.then((result) => handleSetResult(result, payload)));\n            }\n            else\n                handleSetResult(result, payload);\n        }\n        if (proms.length)\n            return Promise.all(proms).then(() => payload);\n        return payload;\n    };\n});\nfunction handleSetResult(result, final) {\n    if (result.issues.length) {\n        final.issues.push(...result.issues);\n    }\n    final.value.add(result.value);\n}\nconst $ZodEnum = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodEnum\", (inst, def) => {\n    $ZodType.init(inst, def);\n    const values = _util_js__WEBPACK_IMPORTED_MODULE_2__.getEnumValues(def.entries);\n    const valuesSet = new Set(values);\n    inst._zod.values = valuesSet;\n    inst._zod.pattern = new RegExp(`^(${values\n        .filter((k) => _util_js__WEBPACK_IMPORTED_MODULE_2__.propertyKeyTypes.has(typeof k))\n        .map((o) => (typeof o === \"string\" ? _util_js__WEBPACK_IMPORTED_MODULE_2__.escapeRegex(o) : o.toString()))\n        .join(\"|\")})$`);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (valuesSet.has(input)) {\n            return payload;\n        }\n        payload.issues.push({\n            code: \"invalid_value\",\n            values,\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nconst $ZodLiteral = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodLiteral\", (inst, def) => {\n    $ZodType.init(inst, def);\n    if (def.values.length === 0) {\n        throw new Error(\"Cannot create literal schema with no valid values\");\n    }\n    inst._zod.values = new Set(def.values);\n    inst._zod.pattern = new RegExp(`^(${def.values\n        .map((o) => (typeof o === \"string\" ? _util_js__WEBPACK_IMPORTED_MODULE_2__.escapeRegex(o) : o ? _util_js__WEBPACK_IMPORTED_MODULE_2__.escapeRegex(o.toString()) : String(o)))\n        .join(\"|\")})$`);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (inst._zod.values.has(input)) {\n            return payload;\n        }\n        payload.issues.push({\n            code: \"invalid_value\",\n            values: def.values,\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nconst $ZodFile = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodFile\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        // @ts-ignore\n        if (input instanceof File)\n            return payload;\n        payload.issues.push({\n            expected: \"file\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nconst $ZodTransform = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodTransform\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            throw new _core_js__WEBPACK_IMPORTED_MODULE_0__.$ZodEncodeError(inst.constructor.name);\n        }\n        const _out = def.transform(payload.value, payload);\n        if (ctx.async) {\n            const output = _out instanceof Promise ? _out : Promise.resolve(_out);\n            return output.then((output) => {\n                payload.value = output;\n                return payload;\n            });\n        }\n        if (_out instanceof Promise) {\n            throw new _core_js__WEBPACK_IMPORTED_MODULE_0__.$ZodAsyncError();\n        }\n        payload.value = _out;\n        return payload;\n    };\n});\nfunction handleOptionalResult(result, input) {\n    if (result.issues.length && input === undefined) {\n        return { issues: [], value: undefined };\n    }\n    return result;\n}\nconst $ZodOptional = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodOptional\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.optin = \"optional\";\n    inst._zod.optout = \"optional\";\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"values\", () => {\n        return def.innerType._zod.values ? new Set([...def.innerType._zod.values, undefined]) : undefined;\n    });\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"pattern\", () => {\n        const pattern = def.innerType._zod.pattern;\n        return pattern ? new RegExp(`^(${_util_js__WEBPACK_IMPORTED_MODULE_2__.cleanRegex(pattern.source)})?$`) : undefined;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        if (def.innerType._zod.optin === \"optional\") {\n            const result = def.innerType._zod.run(payload, ctx);\n            if (result instanceof Promise)\n                return result.then((r) => handleOptionalResult(r, payload.value));\n            return handleOptionalResult(result, payload.value);\n        }\n        if (payload.value === undefined) {\n            return payload;\n        }\n        return def.innerType._zod.run(payload, ctx);\n    };\n});\nconst $ZodNullable = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodNullable\", (inst, def) => {\n    $ZodType.init(inst, def);\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"optin\", () => def.innerType._zod.optin);\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"optout\", () => def.innerType._zod.optout);\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"pattern\", () => {\n        const pattern = def.innerType._zod.pattern;\n        return pattern ? new RegExp(`^(${_util_js__WEBPACK_IMPORTED_MODULE_2__.cleanRegex(pattern.source)}|null)$`) : undefined;\n    });\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"values\", () => {\n        return def.innerType._zod.values ? new Set([...def.innerType._zod.values, null]) : undefined;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        // Forward direction (decode): allow null to pass through\n        if (payload.value === null)\n            return payload;\n        return def.innerType._zod.run(payload, ctx);\n    };\n});\nconst $ZodDefault = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodDefault\", (inst, def) => {\n    $ZodType.init(inst, def);\n    // inst._zod.qin = \"true\";\n    inst._zod.optin = \"optional\";\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            return def.innerType._zod.run(payload, ctx);\n        }\n        // Forward direction (decode): apply defaults for undefined input\n        if (payload.value === undefined) {\n            payload.value = def.defaultValue;\n            /**\n             * $ZodDefault returns the default value immediately in forward direction.\n             * It doesn't pass the default value into the validator (\"prefault\"). There's no reason to pass the default value through validation. The validity of the default is enforced by TypeScript statically. Otherwise, it's the responsibility of the user to ensure the default is valid. In the case of pipes with divergent in/out types, you can specify the default on the `in` schema of your ZodPipe to set a \"prefault\" for the pipe.   */\n            return payload;\n        }\n        // Forward direction: continue with default handling\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => handleDefaultResult(result, def));\n        }\n        return handleDefaultResult(result, def);\n    };\n});\nfunction handleDefaultResult(payload, def) {\n    if (payload.value === undefined) {\n        payload.value = def.defaultValue;\n    }\n    return payload;\n}\nconst $ZodPrefault = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodPrefault\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.optin = \"optional\";\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            return def.innerType._zod.run(payload, ctx);\n        }\n        // Forward direction (decode): apply prefault for undefined input\n        if (payload.value === undefined) {\n            payload.value = def.defaultValue;\n        }\n        return def.innerType._zod.run(payload, ctx);\n    };\n});\nconst $ZodNonOptional = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodNonOptional\", (inst, def) => {\n    $ZodType.init(inst, def);\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"values\", () => {\n        const v = def.innerType._zod.values;\n        return v ? new Set([...v].filter((x) => x !== undefined)) : undefined;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => handleNonOptionalResult(result, inst));\n        }\n        return handleNonOptionalResult(result, inst);\n    };\n});\nfunction handleNonOptionalResult(payload, inst) {\n    if (!payload.issues.length && payload.value === undefined) {\n        payload.issues.push({\n            code: \"invalid_type\",\n            expected: \"nonoptional\",\n            input: payload.value,\n            inst,\n        });\n    }\n    return payload;\n}\nconst $ZodSuccess = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodSuccess\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            throw new _core_js__WEBPACK_IMPORTED_MODULE_0__.$ZodEncodeError(\"ZodSuccess\");\n        }\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => {\n                payload.value = result.issues.length === 0;\n                return payload;\n            });\n        }\n        payload.value = result.issues.length === 0;\n        return payload;\n    };\n});\nconst $ZodCatch = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodCatch\", (inst, def) => {\n    $ZodType.init(inst, def);\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"optin\", () => def.innerType._zod.optin);\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"optout\", () => def.innerType._zod.optout);\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            return def.innerType._zod.run(payload, ctx);\n        }\n        // Forward direction (decode): apply catch logic\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => {\n                payload.value = result.value;\n                if (result.issues.length) {\n                    payload.value = def.catchValue({\n                        ...payload,\n                        error: {\n                            issues: result.issues.map((iss) => _util_js__WEBPACK_IMPORTED_MODULE_2__.finalizeIssue(iss, ctx, _core_js__WEBPACK_IMPORTED_MODULE_0__.config())),\n                        },\n                        input: payload.value,\n                    });\n                    payload.issues = [];\n                }\n                return payload;\n            });\n        }\n        payload.value = result.value;\n        if (result.issues.length) {\n            payload.value = def.catchValue({\n                ...payload,\n                error: {\n                    issues: result.issues.map((iss) => _util_js__WEBPACK_IMPORTED_MODULE_2__.finalizeIssue(iss, ctx, _core_js__WEBPACK_IMPORTED_MODULE_0__.config())),\n                },\n                input: payload.value,\n            });\n            payload.issues = [];\n        }\n        return payload;\n    };\n});\nconst $ZodNaN = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodNaN\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        if (typeof payload.value !== \"number\" || !Number.isNaN(payload.value)) {\n            payload.issues.push({\n                input: payload.value,\n                inst,\n                expected: \"nan\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        return payload;\n    };\n});\nconst $ZodPipe = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodPipe\", (inst, def) => {\n    $ZodType.init(inst, def);\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"values\", () => def.in._zod.values);\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"optin\", () => def.in._zod.optin);\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"optout\", () => def.out._zod.optout);\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"propValues\", () => def.in._zod.propValues);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            const right = def.out._zod.run(payload, ctx);\n            if (right instanceof Promise) {\n                return right.then((right) => handlePipeResult(right, def.in, ctx));\n            }\n            return handlePipeResult(right, def.in, ctx);\n        }\n        const left = def.in._zod.run(payload, ctx);\n        if (left instanceof Promise) {\n            return left.then((left) => handlePipeResult(left, def.out, ctx));\n        }\n        return handlePipeResult(left, def.out, ctx);\n    };\n});\nfunction handlePipeResult(left, next, ctx) {\n    if (left.issues.length) {\n        // prevent further checks\n        left.aborted = true;\n        return left;\n    }\n    return next._zod.run({ value: left.value, issues: left.issues }, ctx);\n}\nconst $ZodCodec = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodCodec\", (inst, def) => {\n    $ZodType.init(inst, def);\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"values\", () => def.in._zod.values);\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"optin\", () => def.in._zod.optin);\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"optout\", () => def.out._zod.optout);\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"propValues\", () => def.in._zod.propValues);\n    inst._zod.parse = (payload, ctx) => {\n        const direction = ctx.direction || \"forward\";\n        if (direction === \"forward\") {\n            const left = def.in._zod.run(payload, ctx);\n            if (left instanceof Promise) {\n                return left.then((left) => handleCodecAResult(left, def, ctx));\n            }\n            return handleCodecAResult(left, def, ctx);\n        }\n        else {\n            const right = def.out._zod.run(payload, ctx);\n            if (right instanceof Promise) {\n                return right.then((right) => handleCodecAResult(right, def, ctx));\n            }\n            return handleCodecAResult(right, def, ctx);\n        }\n    };\n});\nfunction handleCodecAResult(result, def, ctx) {\n    if (result.issues.length) {\n        // prevent further checks\n        result.aborted = true;\n        return result;\n    }\n    const direction = ctx.direction || \"forward\";\n    if (direction === \"forward\") {\n        const transformed = def.transform(result.value, result);\n        if (transformed instanceof Promise) {\n            return transformed.then((value) => handleCodecTxResult(result, value, def.out, ctx));\n        }\n        return handleCodecTxResult(result, transformed, def.out, ctx);\n    }\n    else {\n        const transformed = def.reverseTransform(result.value, result);\n        if (transformed instanceof Promise) {\n            return transformed.then((value) => handleCodecTxResult(result, value, def.in, ctx));\n        }\n        return handleCodecTxResult(result, transformed, def.in, ctx);\n    }\n}\nfunction handleCodecTxResult(left, value, nextSchema, ctx) {\n    // Check if transform added any issues\n    if (left.issues.length) {\n        left.aborted = true;\n        return left;\n    }\n    return nextSchema._zod.run({ value, issues: left.issues }, ctx);\n}\nconst $ZodReadonly = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodReadonly\", (inst, def) => {\n    $ZodType.init(inst, def);\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"propValues\", () => def.innerType._zod.propValues);\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"optin\", () => def.innerType._zod.optin);\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"optout\", () => def.innerType._zod.optout);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            return def.innerType._zod.run(payload, ctx);\n        }\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then(handleReadonlyResult);\n        }\n        return handleReadonlyResult(result);\n    };\n});\nfunction handleReadonlyResult(payload) {\n    payload.value = Object.freeze(payload.value);\n    return payload;\n}\nconst $ZodTemplateLiteral = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodTemplateLiteral\", (inst, def) => {\n    $ZodType.init(inst, def);\n    const regexParts = [];\n    for (const part of def.parts) {\n        if (typeof part === \"object\" && part !== null) {\n            // is Zod schema\n            if (!part._zod.pattern) {\n                // if (!source)\n                throw new Error(`Invalid template literal part, no pattern found: ${[...part._zod.traits].shift()}`);\n            }\n            const source = part._zod.pattern instanceof RegExp ? part._zod.pattern.source : part._zod.pattern;\n            if (!source)\n                throw new Error(`Invalid template literal part: ${part._zod.traits}`);\n            const start = source.startsWith(\"^\") ? 1 : 0;\n            const end = source.endsWith(\"$\") ? source.length - 1 : source.length;\n            regexParts.push(source.slice(start, end));\n        }\n        else if (part === null || _util_js__WEBPACK_IMPORTED_MODULE_2__.primitiveTypes.has(typeof part)) {\n            regexParts.push(_util_js__WEBPACK_IMPORTED_MODULE_2__.escapeRegex(`${part}`));\n        }\n        else {\n            throw new Error(`Invalid template literal part: ${part}`);\n        }\n    }\n    inst._zod.pattern = new RegExp(`^${regexParts.join(\"\")}$`);\n    inst._zod.parse = (payload, _ctx) => {\n        if (typeof payload.value !== \"string\") {\n            payload.issues.push({\n                input: payload.value,\n                inst,\n                expected: \"template_literal\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        inst._zod.pattern.lastIndex = 0;\n        if (!inst._zod.pattern.test(payload.value)) {\n            payload.issues.push({\n                input: payload.value,\n                inst,\n                code: \"invalid_format\",\n                format: def.format ?? \"template_literal\",\n                pattern: inst._zod.pattern.source,\n            });\n            return payload;\n        }\n        return payload;\n    };\n});\nconst $ZodFunction = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodFunction\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._def = def;\n    inst._zod.def = def;\n    inst.implement = (func) => {\n        if (typeof func !== \"function\") {\n            throw new Error(\"implement() must be called with a function\");\n        }\n        return function (...args) {\n            const parsedArgs = inst._def.input ? (0,_parse_js__WEBPACK_IMPORTED_MODULE_3__.parse)(inst._def.input, args) : args;\n            const result = Reflect.apply(func, this, parsedArgs);\n            if (inst._def.output) {\n                return (0,_parse_js__WEBPACK_IMPORTED_MODULE_3__.parse)(inst._def.output, result);\n            }\n            return result;\n        };\n    };\n    inst.implementAsync = (func) => {\n        if (typeof func !== \"function\") {\n            throw new Error(\"implementAsync() must be called with a function\");\n        }\n        return async function (...args) {\n            const parsedArgs = inst._def.input ? await (0,_parse_js__WEBPACK_IMPORTED_MODULE_3__.parseAsync)(inst._def.input, args) : args;\n            const result = await Reflect.apply(func, this, parsedArgs);\n            if (inst._def.output) {\n                return await (0,_parse_js__WEBPACK_IMPORTED_MODULE_3__.parseAsync)(inst._def.output, result);\n            }\n            return result;\n        };\n    };\n    inst._zod.parse = (payload, _ctx) => {\n        if (typeof payload.value !== \"function\") {\n            payload.issues.push({\n                code: \"invalid_type\",\n                expected: \"function\",\n                input: payload.value,\n                inst,\n            });\n            return payload;\n        }\n        // Check if output is a promise type to determine if we should use async implementation\n        const hasPromiseOutput = inst._def.output && inst._def.output._zod.def.type === \"promise\";\n        if (hasPromiseOutput) {\n            payload.value = inst.implementAsync(payload.value);\n        }\n        else {\n            payload.value = inst.implement(payload.value);\n        }\n        return payload;\n    };\n    inst.input = (...args) => {\n        const F = inst.constructor;\n        if (Array.isArray(args[0])) {\n            return new F({\n                type: \"function\",\n                input: new $ZodTuple({\n                    type: \"tuple\",\n                    items: args[0],\n                    rest: args[1],\n                }),\n                output: inst._def.output,\n            });\n        }\n        return new F({\n            type: \"function\",\n            input: args[0],\n            output: inst._def.output,\n        });\n    };\n    inst.output = (output) => {\n        const F = inst.constructor;\n        return new F({\n            type: \"function\",\n            input: inst._def.input,\n            output,\n        });\n    };\n    return inst;\n});\nconst $ZodPromise = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodPromise\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        return Promise.resolve(payload.value).then((inner) => def.innerType._zod.run({ value: inner, issues: [] }, ctx));\n    };\n});\nconst $ZodLazy = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodLazy\", (inst, def) => {\n    $ZodType.init(inst, def);\n    // let _innerType!: any;\n    // util.defineLazy(def, \"getter\", () => {\n    //   if (!_innerType) {\n    //     _innerType = def.getter();\n    //   }\n    //   return () => _innerType;\n    // });\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"innerType\", () => def.getter());\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"pattern\", () => inst._zod.innerType._zod.pattern);\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"propValues\", () => inst._zod.innerType._zod.propValues);\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"optin\", () => inst._zod.innerType._zod.optin ?? undefined);\n    _util_js__WEBPACK_IMPORTED_MODULE_2__.defineLazy(inst._zod, \"optout\", () => inst._zod.innerType._zod.optout ?? undefined);\n    inst._zod.parse = (payload, ctx) => {\n        const inner = inst._zod.innerType;\n        return inner._zod.run(payload, ctx);\n    };\n});\nconst $ZodCustom = /*@__PURE__*/ _core_js__WEBPACK_IMPORTED_MODULE_0__.$constructor(\"$ZodCustom\", (inst, def) => {\n    _checks_js__WEBPACK_IMPORTED_MODULE_5__.$ZodCheck.init(inst, def);\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _) => {\n        return payload;\n    };\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const r = def.fn(input);\n        if (r instanceof Promise) {\n            return r.then((r) => handleRefineResult(r, payload, input, inst));\n        }\n        handleRefineResult(r, payload, input, inst);\n        return;\n    };\n});\nfunction handleRefineResult(result, payload, input, inst) {\n    if (!result) {\n        const _iss = {\n            code: \"custom\",\n            input,\n            inst, // incorporates params.error into issue reporting\n            path: [...(inst._zod.def.path ?? [])], // incorporates params.error into issue reporting\n            continue: !inst._zod.def.abort,\n            // params: inst._zod.def.params,\n        };\n        if (inst._zod.def.params)\n            _iss.params = inst._zod.def.params;\n        payload.issues.push(_util_js__WEBPACK_IMPORTED_MODULE_2__.issue(_iss));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvbm9kZV9tb2R1bGVzL3pvZC92NC9jb3JlL3NjaGVtYXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNDO0FBQ0o7QUFDSDtBQUMyQztBQUNsQztBQUNOO0FBQ007QUFDakMsK0JBQStCLGtEQUFpQjtBQUN2RDtBQUNBLHNCQUFzQjtBQUN0Qix5QkFBeUI7QUFDekIseUNBQXlDO0FBQ3pDLHdCQUF3QixpREFBTztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsNkNBQVk7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsb0RBQW1CO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsNkNBQVk7QUFDcEQscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyw2Q0FBWTtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiw2Q0FBWTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixvREFBbUI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxrQ0FBa0Ms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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsMkNBQVU7QUFDdEM7QUFDQSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhbWFhblxcT25lRHJpdmVcXERlc2t0b3BcXEthbmRpZF8yXFxOZXcgZm9sZGVyICgyKVxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcbm9kZV9tb2R1bGVzXFx6b2RcXHY0XFxjb3JlXFxzY2hlbWFzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGNoZWNrcyBmcm9tIFwiLi9jaGVja3MuanNcIjtcbmltcG9ydCAqIGFzIGNvcmUgZnJvbSBcIi4vY29yZS5qc1wiO1xuaW1wb3J0IHsgRG9jIH0gZnJvbSBcIi4vZG9jLmpzXCI7XG5pbXBvcnQgeyBwYXJzZSwgcGFyc2VBc3luYywgc2FmZVBhcnNlLCBzYWZlUGFyc2VBc3luYyB9IGZyb20gXCIuL3BhcnNlLmpzXCI7XG5pbXBvcnQgKiBhcyByZWdleGVzIGZyb20gXCIuL3JlZ2V4ZXMuanNcIjtcbmltcG9ydCAqIGFzIHV0aWwgZnJvbSBcIi4vdXRpbC5qc1wiO1xuaW1wb3J0IHsgdmVyc2lvbiB9IGZyb20gXCIuL3ZlcnNpb25zLmpzXCI7XG5leHBvcnQgY29uc3QgJFpvZFR5cGUgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZFR5cGVcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIHZhciBfYTtcbiAgICBpbnN0ID8/IChpbnN0ID0ge30pO1xuICAgIGluc3QuX3pvZC5kZWYgPSBkZWY7IC8vIHNldCBfZGVmIHByb3BlcnR5XG4gICAgaW5zdC5fem9kLmJhZyA9IGluc3QuX3pvZC5iYWcgfHwge307IC8vIGluaXRpYWxpemUgX2JhZyBvYmplY3RcbiAgICBpbnN0Ll96b2QudmVyc2lvbiA9IHZlcnNpb247XG4gICAgY29uc3QgY2hlY2tzID0gWy4uLihpbnN0Ll96b2QuZGVmLmNoZWNrcyA/PyBbXSldO1xuICAgIC8vIGlmIGluc3QgaXMgaXRzZWxmIGEgY2hlY2tzLiRab2RDaGVjaywgcnVuIGl0IGFzIGEgY2hlY2tcbiAgICBpZiAoaW5zdC5fem9kLnRyYWl0cy5oYXMoXCIkWm9kQ2hlY2tcIikpIHtcbiAgICAgICAgY2hlY2tzLnVuc2hpZnQoaW5zdCk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgY2ggb2YgY2hlY2tzKSB7XG4gICAgICAgIGZvciAoY29uc3QgZm4gb2YgY2guX3pvZC5vbmF0dGFjaCkge1xuICAgICAgICAgICAgZm4oaW5zdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNoZWNrcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gZGVmZXJyZWQgaW5pdGlhbGl6ZXJcbiAgICAgICAgLy8gaW5zdC5fem9kLnBhcnNlIGlzIG5vdCB5ZXQgZGVmaW5lZFxuICAgICAgICAoX2EgPSBpbnN0Ll96b2QpLmRlZmVycmVkID8/IChfYS5kZWZlcnJlZCA9IFtdKTtcbiAgICAgICAgaW5zdC5fem9kLmRlZmVycmVkPy5wdXNoKCgpID0+IHtcbiAgICAgICAgICAgIGluc3QuX3pvZC5ydW4gPSBpbnN0Ll96b2QucGFyc2U7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgcnVuQ2hlY2tzID0gKHBheWxvYWQsIGNoZWNrcywgY3R4KSA9PiB7XG4gICAgICAgICAgICBsZXQgaXNBYm9ydGVkID0gdXRpbC5hYm9ydGVkKHBheWxvYWQpO1xuICAgICAgICAgICAgbGV0IGFzeW5jUmVzdWx0O1xuICAgICAgICAgICAgZm9yIChjb25zdCBjaCBvZiBjaGVja3MpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2guX3pvZC5kZWYud2hlbikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzaG91bGRSdW4gPSBjaC5fem9kLmRlZi53aGVuKHBheWxvYWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXNob3VsZFJ1bilcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc0Fib3J0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJMZW4gPSBwYXlsb2FkLmlzc3Vlcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgY29uc3QgXyA9IGNoLl96b2QuY2hlY2socGF5bG9hZCk7XG4gICAgICAgICAgICAgICAgaWYgKF8gaW5zdGFuY2VvZiBQcm9taXNlICYmIGN0eD8uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBjb3JlLiRab2RBc3luY0Vycm9yKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChhc3luY1Jlc3VsdCB8fCBfIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICBhc3luY1Jlc3VsdCA9IChhc3luY1Jlc3VsdCA/PyBQcm9taXNlLnJlc29sdmUoKSkudGhlbihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBfO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dExlbiA9IHBheWxvYWQuaXNzdWVzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0TGVuID09PSBjdXJyTGVuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNBYm9ydGVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQWJvcnRlZCA9IHV0aWwuYWJvcnRlZChwYXlsb2FkLCBjdXJyTGVuKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0TGVuID0gcGF5bG9hZC5pc3N1ZXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dExlbiA9PT0gY3VyckxlbilcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzQWJvcnRlZClcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQWJvcnRlZCA9IHV0aWwuYWJvcnRlZChwYXlsb2FkLCBjdXJyTGVuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXN5bmNSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXN5bmNSZXN1bHQudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgICAgIH07XG4gICAgICAgIC8vIGNvbnN0IGhhbmRsZUNoZWNrc1Jlc3VsdCA9IChcbiAgICAgICAgLy8gICBjaGVja1Jlc3VsdDogUGFyc2VQYXlsb2FkLFxuICAgICAgICAvLyAgIG9yaWdpbmFsUmVzdWx0OiBQYXJzZVBheWxvYWQsXG4gICAgICAgIC8vICAgY3R4OiBQYXJzZUNvbnRleHRJbnRlcm5hbFxuICAgICAgICAvLyApOiB1dGlsLk1heWJlQXN5bmM8UGFyc2VQYXlsb2FkPiA9PiB7XG4gICAgICAgIC8vICAgLy8gaWYgdGhlIGNoZWNrcyBtdXRhdGVkIHRoZSB2YWx1ZSAmJiB0aGVyZSBhcmUgbm8gaXNzdWVzLCByZS1wYXJzZSB0aGUgcmVzdWx0XG4gICAgICAgIC8vICAgaWYgKGNoZWNrUmVzdWx0LnZhbHVlICE9PSBvcmlnaW5hbFJlc3VsdC52YWx1ZSAmJiAhY2hlY2tSZXN1bHQuaXNzdWVzLmxlbmd0aClcbiAgICAgICAgLy8gICAgIHJldHVybiBpbnN0Ll96b2QucGFyc2UoY2hlY2tSZXN1bHQsIGN0eCk7XG4gICAgICAgIC8vICAgcmV0dXJuIG9yaWdpbmFsUmVzdWx0O1xuICAgICAgICAvLyB9O1xuICAgICAgICBjb25zdCBoYW5kbGVDYW5hcnlSZXN1bHQgPSAoY2FuYXJ5LCBwYXlsb2FkLCBjdHgpID0+IHtcbiAgICAgICAgICAgIC8vIGFib3J0IGlmIHRoZSBjYW5hcnkgaXMgYWJvcnRlZFxuICAgICAgICAgICAgaWYgKHV0aWwuYWJvcnRlZChjYW5hcnkpKSB7XG4gICAgICAgICAgICAgICAgY2FuYXJ5LmFib3J0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybiBjYW5hcnk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBydW4gY2hlY2tzIGZpcnN0LCB0aGVuXG4gICAgICAgICAgICBjb25zdCBjaGVja1Jlc3VsdCA9IHJ1bkNoZWNrcyhwYXlsb2FkLCBjaGVja3MsIGN0eCk7XG4gICAgICAgICAgICBpZiAoY2hlY2tSZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGN0eC5hc3luYyA9PT0gZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBjb3JlLiRab2RBc3luY0Vycm9yKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoZWNrUmVzdWx0LnRoZW4oKGNoZWNrUmVzdWx0KSA9PiBpbnN0Ll96b2QucGFyc2UoY2hlY2tSZXN1bHQsIGN0eCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGluc3QuX3pvZC5wYXJzZShjaGVja1Jlc3VsdCwgY3R4KTtcbiAgICAgICAgfTtcbiAgICAgICAgaW5zdC5fem9kLnJ1biA9IChwYXlsb2FkLCBjdHgpID0+IHtcbiAgICAgICAgICAgIGlmIChjdHguc2tpcENoZWNrcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbnN0Ll96b2QucGFyc2UocGF5bG9hZCwgY3R4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjdHguZGlyZWN0aW9uID09PSBcImJhY2t3YXJkXCIpIHtcbiAgICAgICAgICAgICAgICAvLyBydW4gY2FuYXJ5XG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbCBwYXNzIChubyBjaGVja3MpXG4gICAgICAgICAgICAgICAgY29uc3QgY2FuYXJ5ID0gaW5zdC5fem9kLnBhcnNlKHsgdmFsdWU6IHBheWxvYWQudmFsdWUsIGlzc3VlczogW10gfSwgeyAuLi5jdHgsIHNraXBDaGVja3M6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGNhbmFyeSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbmFyeS50aGVuKChjYW5hcnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGVDYW5hcnlSZXN1bHQoY2FuYXJ5LCBwYXlsb2FkLCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUNhbmFyeVJlc3VsdChjYW5hcnksIHBheWxvYWQsIGN0eCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBmb3J3YXJkXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBpbnN0Ll96b2QucGFyc2UocGF5bG9hZCwgY3R4KTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGN0eC5hc3luYyA9PT0gZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBjb3JlLiRab2RBc3luY0Vycm9yKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKChyZXN1bHQpID0+IHJ1bkNoZWNrcyhyZXN1bHQsIGNoZWNrcywgY3R4KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcnVuQ2hlY2tzKHJlc3VsdCwgY2hlY2tzLCBjdHgpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBpbnN0W1wifnN0YW5kYXJkXCJdID0ge1xuICAgICAgICB2YWxpZGF0ZTogKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBzYWZlUGFyc2UoaW5zdCwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiByLnN1Y2Nlc3MgPyB7IHZhbHVlOiByLmRhdGEgfSA6IHsgaXNzdWVzOiByLmVycm9yPy5pc3N1ZXMgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChfKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNhZmVQYXJzZUFzeW5jKGluc3QsIHZhbHVlKS50aGVuKChyKSA9PiAoci5zdWNjZXNzID8geyB2YWx1ZTogci5kYXRhIH0gOiB7IGlzc3Vlczogci5lcnJvcj8uaXNzdWVzIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgdmVuZG9yOiBcInpvZFwiLFxuICAgICAgICB2ZXJzaW9uOiAxLFxuICAgIH07XG59KTtcbmV4cG9ydCB7IGNsb25lIH0gZnJvbSBcIi4vdXRpbC5qc1wiO1xuZXhwb3J0IGNvbnN0ICRab2RTdHJpbmcgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZFN0cmluZ1wiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX3pvZC5wYXR0ZXJuID0gWy4uLihpbnN0Py5fem9kLmJhZz8ucGF0dGVybnMgPz8gW10pXS5wb3AoKSA/PyByZWdleGVzLnN0cmluZyhpbnN0Ll96b2QuYmFnKTtcbiAgICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgXykgPT4ge1xuICAgICAgICBpZiAoZGVmLmNvZXJjZSlcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcGF5bG9hZC52YWx1ZSA9IFN0cmluZyhwYXlsb2FkLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChfKSB7IH1cbiAgICAgICAgaWYgKHR5cGVvZiBwYXlsb2FkLnZhbHVlID09PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgZXhwZWN0ZWQ6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICBjb2RlOiBcImludmFsaWRfdHlwZVwiLFxuICAgICAgICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsXG4gICAgICAgICAgICBpbnN0LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgfTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RTdHJpbmdGb3JtYXQgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZFN0cmluZ0Zvcm1hdFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgLy8gY2hlY2sgaW5pdGlhbGl6YXRpb24gbXVzdCBjb21lIGZpcnN0XG4gICAgY2hlY2tzLiRab2RDaGVja1N0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG4gICAgJFpvZFN0cmluZy5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kR1VJRCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kR1VJRFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgZGVmLnBhdHRlcm4gPz8gKGRlZi5wYXR0ZXJuID0gcmVnZXhlcy5ndWlkKTtcbiAgICAkWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RVVUlEID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RVVUlEXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBpZiAoZGVmLnZlcnNpb24pIHtcbiAgICAgICAgY29uc3QgdmVyc2lvbk1hcCA9IHtcbiAgICAgICAgICAgIHYxOiAxLFxuICAgICAgICAgICAgdjI6IDIsXG4gICAgICAgICAgICB2MzogMyxcbiAgICAgICAgICAgIHY0OiA0LFxuICAgICAgICAgICAgdjU6IDUsXG4gICAgICAgICAgICB2NjogNixcbiAgICAgICAgICAgIHY3OiA3LFxuICAgICAgICAgICAgdjg6IDgsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHYgPSB2ZXJzaW9uTWFwW2RlZi52ZXJzaW9uXTtcbiAgICAgICAgaWYgKHYgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBVVUlEIHZlcnNpb246IFwiJHtkZWYudmVyc2lvbn1cImApO1xuICAgICAgICBkZWYucGF0dGVybiA/PyAoZGVmLnBhdHRlcm4gPSByZWdleGVzLnV1aWQodikpO1xuICAgIH1cbiAgICBlbHNlXG4gICAgICAgIGRlZi5wYXR0ZXJuID8/IChkZWYucGF0dGVybiA9IHJlZ2V4ZXMudXVpZCgpKTtcbiAgICAkWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RFbWFpbCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kRW1haWxcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGRlZi5wYXR0ZXJuID8/IChkZWYucGF0dGVybiA9IHJlZ2V4ZXMuZW1haWwpO1xuICAgICRab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xufSk7XG5leHBvcnQgY29uc3QgJFpvZFVSTCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kVVJMXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAkWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QuY2hlY2sgPSAocGF5bG9hZCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gVHJpbSB3aGl0ZXNwYWNlIGZyb20gaW5wdXRcbiAgICAgICAgICAgIGNvbnN0IHRyaW1tZWQgPSBwYXlsb2FkLnZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwodHJpbW1lZCk7XG4gICAgICAgICAgICBpZiAoZGVmLmhvc3RuYW1lKSB7XG4gICAgICAgICAgICAgICAgZGVmLmhvc3RuYW1lLmxhc3RJbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKCFkZWYuaG9zdG5hbWUudGVzdCh1cmwuaG9zdG5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogXCJpbnZhbGlkX2Zvcm1hdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBcInVybFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbm90ZTogXCJJbnZhbGlkIGhvc3RuYW1lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuOiByZWdleGVzLmhvc3RuYW1lLnNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiBwYXlsb2FkLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOiAhZGVmLmFib3J0LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGVmLnByb3RvY29sKSB7XG4gICAgICAgICAgICAgICAgZGVmLnByb3RvY29sLmxhc3RJbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKCFkZWYucHJvdG9jb2wudGVzdCh1cmwucHJvdG9jb2wuZW5kc1dpdGgoXCI6XCIpID8gdXJsLnByb3RvY29sLnNsaWNlKDAsIC0xKSA6IHVybC5wcm90b2NvbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBcImludmFsaWRfZm9ybWF0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IFwidXJsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBub3RlOiBcIkludmFsaWQgcHJvdG9jb2xcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm46IGRlZi5wcm90b2NvbC5zb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogcGF5bG9hZC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3QsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTogIWRlZi5hYm9ydCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gU2V0IHRoZSBvdXRwdXQgdmFsdWUgYmFzZWQgb24gbm9ybWFsaXplIGZsYWdcbiAgICAgICAgICAgIGlmIChkZWYubm9ybWFsaXplKSB7XG4gICAgICAgICAgICAgICAgLy8gVXNlIG5vcm1hbGl6ZWQgVVJMXG4gICAgICAgICAgICAgICAgcGF5bG9hZC52YWx1ZSA9IHVybC5ocmVmO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gUHJlc2VydmUgdGhlIG9yaWdpbmFsIGlucHV0ICh0cmltbWVkKVxuICAgICAgICAgICAgICAgIHBheWxvYWQudmFsdWUgPSB0cmltbWVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChfKSB7XG4gICAgICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBjb2RlOiBcImludmFsaWRfZm9ybWF0XCIsXG4gICAgICAgICAgICAgICAgZm9ybWF0OiBcInVybFwiLFxuICAgICAgICAgICAgICAgIGlucHV0OiBwYXlsb2FkLnZhbHVlLFxuICAgICAgICAgICAgICAgIGluc3QsXG4gICAgICAgICAgICAgICAgY29udGludWU6ICFkZWYuYWJvcnQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kRW1vamkgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZEVtb2ppXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBkZWYucGF0dGVybiA/PyAoZGVmLnBhdHRlcm4gPSByZWdleGVzLmVtb2ppKCkpO1xuICAgICRab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xufSk7XG5leHBvcnQgY29uc3QgJFpvZE5hbm9JRCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kTmFub0lEXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBkZWYucGF0dGVybiA/PyAoZGVmLnBhdHRlcm4gPSByZWdleGVzLm5hbm9pZCk7XG4gICAgJFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kQ1VJRCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kQ1VJRFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgZGVmLnBhdHRlcm4gPz8gKGRlZi5wYXR0ZXJuID0gcmVnZXhlcy5jdWlkKTtcbiAgICAkWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RDVUlEMiA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kQ1VJRDJcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGRlZi5wYXR0ZXJuID8/IChkZWYucGF0dGVybiA9IHJlZ2V4ZXMuY3VpZDIpO1xuICAgICRab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xufSk7XG5leHBvcnQgY29uc3QgJFpvZFVMSUQgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZFVMSURcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGRlZi5wYXR0ZXJuID8/IChkZWYucGF0dGVybiA9IHJlZ2V4ZXMudWxpZCk7XG4gICAgJFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kWElEID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RYSURcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGRlZi5wYXR0ZXJuID8/IChkZWYucGF0dGVybiA9IHJlZ2V4ZXMueGlkKTtcbiAgICAkWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RLU1VJRCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kS1NVSURcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGRlZi5wYXR0ZXJuID8/IChkZWYucGF0dGVybiA9IHJlZ2V4ZXMua3N1aWQpO1xuICAgICRab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xufSk7XG5leHBvcnQgY29uc3QgJFpvZElTT0RhdGVUaW1lID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RJU09EYXRlVGltZVwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgZGVmLnBhdHRlcm4gPz8gKGRlZi5wYXR0ZXJuID0gcmVnZXhlcy5kYXRldGltZShkZWYpKTtcbiAgICAkWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RJU09EYXRlID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RJU09EYXRlXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBkZWYucGF0dGVybiA/PyAoZGVmLnBhdHRlcm4gPSByZWdleGVzLmRhdGUpO1xuICAgICRab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xufSk7XG5leHBvcnQgY29uc3QgJFpvZElTT1RpbWUgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZElTT1RpbWVcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGRlZi5wYXR0ZXJuID8/IChkZWYucGF0dGVybiA9IHJlZ2V4ZXMudGltZShkZWYpKTtcbiAgICAkWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RJU09EdXJhdGlvbiA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kSVNPRHVyYXRpb25cIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGRlZi5wYXR0ZXJuID8/IChkZWYucGF0dGVybiA9IHJlZ2V4ZXMuZHVyYXRpb24pO1xuICAgICRab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xufSk7XG5leHBvcnQgY29uc3QgJFpvZElQdjQgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZElQdjRcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGRlZi5wYXR0ZXJuID8/IChkZWYucGF0dGVybiA9IHJlZ2V4ZXMuaXB2NCk7XG4gICAgJFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLm9uYXR0YWNoLnB1c2goKGluc3QpID0+IHtcbiAgICAgICAgY29uc3QgYmFnID0gaW5zdC5fem9kLmJhZztcbiAgICAgICAgYmFnLmZvcm1hdCA9IGBpcHY0YDtcbiAgICB9KTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RJUHY2ID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RJUHY2XCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBkZWYucGF0dGVybiA/PyAoZGVmLnBhdHRlcm4gPSByZWdleGVzLmlwdjYpO1xuICAgICRab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX3pvZC5vbmF0dGFjaC5wdXNoKChpbnN0KSA9PiB7XG4gICAgICAgIGNvbnN0IGJhZyA9IGluc3QuX3pvZC5iYWc7XG4gICAgICAgIGJhZy5mb3JtYXQgPSBgaXB2NmA7XG4gICAgfSk7XG4gICAgaW5zdC5fem9kLmNoZWNrID0gKHBheWxvYWQpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIG5ldyBVUkwoYGh0dHA6Ly9bJHtwYXlsb2FkLnZhbHVlfV1gKTtcbiAgICAgICAgICAgIC8vIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBjb2RlOiBcImludmFsaWRfZm9ybWF0XCIsXG4gICAgICAgICAgICAgICAgZm9ybWF0OiBcImlwdjZcIixcbiAgICAgICAgICAgICAgICBpbnB1dDogcGF5bG9hZC52YWx1ZSxcbiAgICAgICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgICAgIGNvbnRpbnVlOiAhZGVmLmFib3J0LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufSk7XG5leHBvcnQgY29uc3QgJFpvZENJRFJ2NCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kQ0lEUnY0XCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBkZWYucGF0dGVybiA/PyAoZGVmLnBhdHRlcm4gPSByZWdleGVzLmNpZHJ2NCk7XG4gICAgJFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kQ0lEUnY2ID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RDSURSdjZcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGRlZi5wYXR0ZXJuID8/IChkZWYucGF0dGVybiA9IHJlZ2V4ZXMuY2lkcnY2KTsgLy8gbm90IHVzZWQgZm9yIHZhbGlkYXRpb25cbiAgICAkWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QuY2hlY2sgPSAocGF5bG9hZCkgPT4ge1xuICAgICAgICBjb25zdCBbYWRkcmVzcywgcHJlZml4XSA9IHBheWxvYWQudmFsdWUuc3BsaXQoXCIvXCIpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKCFwcmVmaXgpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgICAgICAgICBjb25zdCBwcmVmaXhOdW0gPSBOdW1iZXIocHJlZml4KTtcbiAgICAgICAgICAgIGlmIChgJHtwcmVmaXhOdW19YCAhPT0gcHJlZml4KVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgICAgICAgICAgaWYgKHByZWZpeE51bSA8IDAgfHwgcHJlZml4TnVtID4gMTI4KVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgbmV3IFVSTChgaHR0cDovL1ske2FkZHJlc3N9XWApO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgICAgIGNvZGU6IFwiaW52YWxpZF9mb3JtYXRcIixcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IFwiY2lkcnY2XCIsXG4gICAgICAgICAgICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsXG4gICAgICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgICAgICAgICBjb250aW51ZTogIWRlZi5hYm9ydCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbn0pO1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vICAgWm9kQmFzZTY0ICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZEJhc2U2NChkYXRhKSB7XG4gICAgaWYgKGRhdGEgPT09IFwiXCIpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGlmIChkYXRhLmxlbmd0aCAlIDQgIT09IDApXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGF0b2IoZGF0YSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5leHBvcnQgY29uc3QgJFpvZEJhc2U2NCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kQmFzZTY0XCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBkZWYucGF0dGVybiA/PyAoZGVmLnBhdHRlcm4gPSByZWdleGVzLmJhc2U2NCk7XG4gICAgJFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLm9uYXR0YWNoLnB1c2goKGluc3QpID0+IHtcbiAgICAgICAgaW5zdC5fem9kLmJhZy5jb250ZW50RW5jb2RpbmcgPSBcImJhc2U2NFwiO1xuICAgIH0pO1xuICAgIGluc3QuX3pvZC5jaGVjayA9IChwYXlsb2FkKSA9PiB7XG4gICAgICAgIGlmIChpc1ZhbGlkQmFzZTY0KHBheWxvYWQudmFsdWUpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgIGNvZGU6IFwiaW52YWxpZF9mb3JtYXRcIixcbiAgICAgICAgICAgIGZvcm1hdDogXCJiYXNlNjRcIixcbiAgICAgICAgICAgIGlucHV0OiBwYXlsb2FkLnZhbHVlLFxuICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgICAgIGNvbnRpbnVlOiAhZGVmLmFib3J0LFxuICAgICAgICB9KTtcbiAgICB9O1xufSk7XG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gICBab2RCYXNlNjQgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbGlkQmFzZTY0VVJMKGRhdGEpIHtcbiAgICBpZiAoIXJlZ2V4ZXMuYmFzZTY0dXJsLnRlc3QoZGF0YSkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBjb25zdCBiYXNlNjQgPSBkYXRhLnJlcGxhY2UoL1stX10vZywgKGMpID0+IChjID09PSBcIi1cIiA/IFwiK1wiIDogXCIvXCIpKTtcbiAgICBjb25zdCBwYWRkZWQgPSBiYXNlNjQucGFkRW5kKE1hdGguY2VpbChiYXNlNjQubGVuZ3RoIC8gNCkgKiA0LCBcIj1cIik7XG4gICAgcmV0dXJuIGlzVmFsaWRCYXNlNjQocGFkZGVkKTtcbn1cbmV4cG9ydCBjb25zdCAkWm9kQmFzZTY0VVJMID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RCYXNlNjRVUkxcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIGRlZi5wYXR0ZXJuID8/IChkZWYucGF0dGVybiA9IHJlZ2V4ZXMuYmFzZTY0dXJsKTtcbiAgICAkWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2Qub25hdHRhY2gucHVzaCgoaW5zdCkgPT4ge1xuICAgICAgICBpbnN0Ll96b2QuYmFnLmNvbnRlbnRFbmNvZGluZyA9IFwiYmFzZTY0dXJsXCI7XG4gICAgfSk7XG4gICAgaW5zdC5fem9kLmNoZWNrID0gKHBheWxvYWQpID0+IHtcbiAgICAgICAgaWYgKGlzVmFsaWRCYXNlNjRVUkwocGF5bG9hZC52YWx1ZSkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgY29kZTogXCJpbnZhbGlkX2Zvcm1hdFwiLFxuICAgICAgICAgICAgZm9ybWF0OiBcImJhc2U2NHVybFwiLFxuICAgICAgICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsXG4gICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgY29udGludWU6ICFkZWYuYWJvcnQsXG4gICAgICAgIH0pO1xuICAgIH07XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kRTE2NCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kRTE2NFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgZGVmLnBhdHRlcm4gPz8gKGRlZi5wYXR0ZXJuID0gcmVnZXhlcy5lMTY0KTtcbiAgICAkWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbn0pO1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vICAgWm9kSldUICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZEpXVCh0b2tlbiwgYWxnb3JpdGhtID0gbnVsbCkge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHRva2Vuc1BhcnRzID0gdG9rZW4uc3BsaXQoXCIuXCIpO1xuICAgICAgICBpZiAodG9rZW5zUGFydHMubGVuZ3RoICE9PSAzKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBjb25zdCBbaGVhZGVyXSA9IHRva2Vuc1BhcnRzO1xuICAgICAgICBpZiAoIWhlYWRlcilcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBjb25zdCBwYXJzZWRIZWFkZXIgPSBKU09OLnBhcnNlKGF0b2IoaGVhZGVyKSk7XG4gICAgICAgIGlmIChcInR5cFwiIGluIHBhcnNlZEhlYWRlciAmJiBwYXJzZWRIZWFkZXI/LnR5cCAhPT0gXCJKV1RcIilcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKCFwYXJzZWRIZWFkZXIuYWxnKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoYWxnb3JpdGhtICYmICghKFwiYWxnXCIgaW4gcGFyc2VkSGVhZGVyKSB8fCBwYXJzZWRIZWFkZXIuYWxnICE9PSBhbGdvcml0aG0pKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuZXhwb3J0IGNvbnN0ICRab2RKV1QgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZEpXVFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgJFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLmNoZWNrID0gKHBheWxvYWQpID0+IHtcbiAgICAgICAgaWYgKGlzVmFsaWRKV1QocGF5bG9hZC52YWx1ZSwgZGVmLmFsZykpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgY29kZTogXCJpbnZhbGlkX2Zvcm1hdFwiLFxuICAgICAgICAgICAgZm9ybWF0OiBcImp3dFwiLFxuICAgICAgICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsXG4gICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgY29udGludWU6ICFkZWYuYWJvcnQsXG4gICAgICAgIH0pO1xuICAgIH07XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kQ3VzdG9tU3RyaW5nRm9ybWF0ID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RDdXN0b21TdHJpbmdGb3JtYXRcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX3pvZC5jaGVjayA9IChwYXlsb2FkKSA9PiB7XG4gICAgICAgIGlmIChkZWYuZm4ocGF5bG9hZC52YWx1ZSkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgY29kZTogXCJpbnZhbGlkX2Zvcm1hdFwiLFxuICAgICAgICAgICAgZm9ybWF0OiBkZWYuZm9ybWF0LFxuICAgICAgICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsXG4gICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgY29udGludWU6ICFkZWYuYWJvcnQsXG4gICAgICAgIH0pO1xuICAgIH07XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kTnVtYmVyID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2ROdW1iZXJcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QucGF0dGVybiA9IGluc3QuX3pvZC5iYWcucGF0dGVybiA/PyByZWdleGVzLm51bWJlcjtcbiAgICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgX2N0eCkgPT4ge1xuICAgICAgICBpZiAoZGVmLmNvZXJjZSlcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcGF5bG9hZC52YWx1ZSA9IE51bWJlcihwYXlsb2FkLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChfKSB7IH1cbiAgICAgICAgY29uc3QgaW5wdXQgPSBwYXlsb2FkLnZhbHVlO1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0ID09PSBcIm51bWJlclwiICYmICFOdW1iZXIuaXNOYU4oaW5wdXQpICYmIE51bWJlci5pc0Zpbml0ZShpbnB1dCkpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlY2VpdmVkID0gdHlwZW9mIGlucHV0ID09PSBcIm51bWJlclwiXG4gICAgICAgICAgICA/IE51bWJlci5pc05hTihpbnB1dClcbiAgICAgICAgICAgICAgICA/IFwiTmFOXCJcbiAgICAgICAgICAgICAgICA6ICFOdW1iZXIuaXNGaW5pdGUoaW5wdXQpXG4gICAgICAgICAgICAgICAgICAgID8gXCJJbmZpbml0eVwiXG4gICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICBleHBlY3RlZDogXCJudW1iZXJcIixcbiAgICAgICAgICAgIGNvZGU6IFwiaW52YWxpZF90eXBlXCIsXG4gICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgIGluc3QsXG4gICAgICAgICAgICAuLi4ocmVjZWl2ZWQgPyB7IHJlY2VpdmVkIH0gOiB7fSksXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICB9O1xufSk7XG5leHBvcnQgY29uc3QgJFpvZE51bWJlckZvcm1hdCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kTnVtYmVyXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjaGVja3MuJFpvZENoZWNrTnVtYmVyRm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbiAgICAkWm9kTnVtYmVyLmluaXQoaW5zdCwgZGVmKTsgLy8gbm8gZm9ybWF0IGNoZWNrc3Bcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RCb29sZWFuID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RCb29sZWFuXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAkWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLnBhdHRlcm4gPSByZWdleGVzLmJvb2xlYW47XG4gICAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQsIF9jdHgpID0+IHtcbiAgICAgICAgaWYgKGRlZi5jb2VyY2UpXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHBheWxvYWQudmFsdWUgPSBCb29sZWFuKHBheWxvYWQudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKF8pIHsgfVxuICAgICAgICBjb25zdCBpbnB1dCA9IHBheWxvYWQudmFsdWU7XG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT09IFwiYm9vbGVhblwiKVxuICAgICAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgZXhwZWN0ZWQ6IFwiYm9vbGVhblwiLFxuICAgICAgICAgICAgY29kZTogXCJpbnZhbGlkX3R5cGVcIixcbiAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgIH07XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kQmlnSW50ID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RCaWdJbnRcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QucGF0dGVybiA9IHJlZ2V4ZXMuYmlnaW50O1xuICAgIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBfY3R4KSA9PiB7XG4gICAgICAgIGlmIChkZWYuY29lcmNlKVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBwYXlsb2FkLnZhbHVlID0gQmlnSW50KHBheWxvYWQudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKF8pIHsgfVxuICAgICAgICBpZiAodHlwZW9mIHBheWxvYWQudmFsdWUgPT09IFwiYmlnaW50XCIpXG4gICAgICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICBleHBlY3RlZDogXCJiaWdpbnRcIixcbiAgICAgICAgICAgIGNvZGU6IFwiaW52YWxpZF90eXBlXCIsXG4gICAgICAgICAgICBpbnB1dDogcGF5bG9hZC52YWx1ZSxcbiAgICAgICAgICAgIGluc3QsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICB9O1xufSk7XG5leHBvcnQgY29uc3QgJFpvZEJpZ0ludEZvcm1hdCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kQmlnSW50XCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICBjaGVja3MuJFpvZENoZWNrQmlnSW50Rm9ybWF0LmluaXQoaW5zdCwgZGVmKTtcbiAgICAkWm9kQmlnSW50LmluaXQoaW5zdCwgZGVmKTsgLy8gbm8gZm9ybWF0IGNoZWNrc1xufSk7XG5leHBvcnQgY29uc3QgJFpvZFN5bWJvbCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kU3ltYm9sXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAkWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQsIF9jdHgpID0+IHtcbiAgICAgICAgY29uc3QgaW5wdXQgPSBwYXlsb2FkLnZhbHVlO1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0ID09PSBcInN5bWJvbFwiKVxuICAgICAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgZXhwZWN0ZWQ6IFwic3ltYm9sXCIsXG4gICAgICAgICAgICBjb2RlOiBcImludmFsaWRfdHlwZVwiLFxuICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICBpbnN0LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgfTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RVbmRlZmluZWQgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZFVuZGVmaW5lZFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX3pvZC5wYXR0ZXJuID0gcmVnZXhlcy51bmRlZmluZWQ7XG4gICAgaW5zdC5fem9kLnZhbHVlcyA9IG5ldyBTZXQoW3VuZGVmaW5lZF0pO1xuICAgIGluc3QuX3pvZC5vcHRpbiA9IFwib3B0aW9uYWxcIjtcbiAgICBpbnN0Ll96b2Qub3B0b3V0ID0gXCJvcHRpb25hbFwiO1xuICAgIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBfY3R4KSA9PiB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gcGF5bG9hZC52YWx1ZTtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgIGV4cGVjdGVkOiBcInVuZGVmaW5lZFwiLFxuICAgICAgICAgICAgY29kZTogXCJpbnZhbGlkX3R5cGVcIixcbiAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgIH07XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kTnVsbCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kTnVsbFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX3pvZC5wYXR0ZXJuID0gcmVnZXhlcy5udWxsO1xuICAgIGluc3QuX3pvZC52YWx1ZXMgPSBuZXcgU2V0KFtudWxsXSk7XG4gICAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQsIF9jdHgpID0+IHtcbiAgICAgICAgY29uc3QgaW5wdXQgPSBwYXlsb2FkLnZhbHVlO1xuICAgICAgICBpZiAoaW5wdXQgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICBleHBlY3RlZDogXCJudWxsXCIsXG4gICAgICAgICAgICBjb2RlOiBcImludmFsaWRfdHlwZVwiLFxuICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICBpbnN0LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgfTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RBbnkgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZEFueVwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkKSA9PiBwYXlsb2FkO1xufSk7XG5leHBvcnQgY29uc3QgJFpvZFVua25vd24gPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZFVua25vd25cIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCkgPT4gcGF5bG9hZDtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2ROZXZlciA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kTmV2ZXJcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgX2N0eCkgPT4ge1xuICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgIGV4cGVjdGVkOiBcIm5ldmVyXCIsXG4gICAgICAgICAgICBjb2RlOiBcImludmFsaWRfdHlwZVwiLFxuICAgICAgICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsXG4gICAgICAgICAgICBpbnN0LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgfTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RWb2lkID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RWb2lkXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAkWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQsIF9jdHgpID0+IHtcbiAgICAgICAgY29uc3QgaW5wdXQgPSBwYXlsb2FkLnZhbHVlO1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0ID09PSBcInVuZGVmaW5lZFwiKVxuICAgICAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgZXhwZWN0ZWQ6IFwidm9pZFwiLFxuICAgICAgICAgICAgY29kZTogXCJpbnZhbGlkX3R5cGVcIixcbiAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgIH07XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kRGF0ZSA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kRGF0ZVwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBfY3R4KSA9PiB7XG4gICAgICAgIGlmIChkZWYuY29lcmNlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHBheWxvYWQudmFsdWUgPSBuZXcgRGF0ZShwYXlsb2FkLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChfZXJyKSB7IH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbnB1dCA9IHBheWxvYWQudmFsdWU7XG4gICAgICAgIGNvbnN0IGlzRGF0ZSA9IGlucHV0IGluc3RhbmNlb2YgRGF0ZTtcbiAgICAgICAgY29uc3QgaXNWYWxpZERhdGUgPSBpc0RhdGUgJiYgIU51bWJlci5pc05hTihpbnB1dC5nZXRUaW1lKCkpO1xuICAgICAgICBpZiAoaXNWYWxpZERhdGUpXG4gICAgICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICBleHBlY3RlZDogXCJkYXRlXCIsXG4gICAgICAgICAgICBjb2RlOiBcImludmFsaWRfdHlwZVwiLFxuICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICAuLi4oaXNEYXRlID8geyByZWNlaXZlZDogXCJJbnZhbGlkIERhdGVcIiB9IDoge30pLFxuICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgIH07XG59KTtcbmZ1bmN0aW9uIGhhbmRsZUFycmF5UmVzdWx0KHJlc3VsdCwgZmluYWwsIGluZGV4KSB7XG4gICAgaWYgKHJlc3VsdC5pc3N1ZXMubGVuZ3RoKSB7XG4gICAgICAgIGZpbmFsLmlzc3Vlcy5wdXNoKC4uLnV0aWwucHJlZml4SXNzdWVzKGluZGV4LCByZXN1bHQuaXNzdWVzKSk7XG4gICAgfVxuICAgIGZpbmFsLnZhbHVlW2luZGV4XSA9IHJlc3VsdC52YWx1ZTtcbn1cbmV4cG9ydCBjb25zdCAkWm9kQXJyYXkgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZEFycmF5XCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAkWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQsIGN0eCkgPT4ge1xuICAgICAgICBjb25zdCBpbnB1dCA9IHBheWxvYWQudmFsdWU7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcbiAgICAgICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgY29kZTogXCJpbnZhbGlkX3R5cGVcIixcbiAgICAgICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICAgICAgfVxuICAgICAgICBwYXlsb2FkLnZhbHVlID0gQXJyYXkoaW5wdXQubGVuZ3RoKTtcbiAgICAgICAgY29uc3QgcHJvbXMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IGlucHV0W2ldO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gZGVmLmVsZW1lbnQuX3pvZC5ydW4oe1xuICAgICAgICAgICAgICAgIHZhbHVlOiBpdGVtLFxuICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICB9LCBjdHgpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICBwcm9tcy5wdXNoKHJlc3VsdC50aGVuKChyZXN1bHQpID0+IGhhbmRsZUFycmF5UmVzdWx0KHJlc3VsdCwgcGF5bG9hZCwgaSkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGhhbmRsZUFycmF5UmVzdWx0KHJlc3VsdCwgcGF5bG9hZCwgaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb21zLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21zKS50aGVuKCgpID0+IHBheWxvYWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXlsb2FkOyAvL2hhbmRsZUFycmF5UmVzdWx0c0FzeW5jKHBhcnNlUmVzdWx0cywgZmluYWwpO1xuICAgIH07XG59KTtcbmZ1bmN0aW9uIGhhbmRsZVByb3BlcnR5UmVzdWx0KHJlc3VsdCwgZmluYWwsIGtleSwgaW5wdXQpIHtcbiAgICBpZiAocmVzdWx0Lmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgZmluYWwuaXNzdWVzLnB1c2goLi4udXRpbC5wcmVmaXhJc3N1ZXMoa2V5LCByZXN1bHQuaXNzdWVzKSk7XG4gICAgfVxuICAgIGlmIChyZXN1bHQudmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoa2V5IGluIGlucHV0KSB7XG4gICAgICAgICAgICBmaW5hbC52YWx1ZVtrZXldID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBmaW5hbC52YWx1ZVtrZXldID0gcmVzdWx0LnZhbHVlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZURlZihkZWYpIHtcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoZGVmLnNoYXBlKTtcbiAgICBmb3IgKGNvbnN0IGsgb2Yga2V5cykge1xuICAgICAgICBpZiAoIWRlZi5zaGFwZVtrXS5fem9kLnRyYWl0cy5oYXMoXCIkWm9kVHlwZVwiKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGVsZW1lbnQgYXQga2V5IFwiJHtrfVwiOiBleHBlY3RlZCBhIFpvZCBzY2hlbWFgKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBva2V5cyA9IHV0aWwub3B0aW9uYWxLZXlzKGRlZi5zaGFwZSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4uZGVmLFxuICAgICAgICBrZXlzLFxuICAgICAgICBrZXlTZXQ6IG5ldyBTZXQoa2V5cyksXG4gICAgICAgIG51bUtleXM6IGtleXMubGVuZ3RoLFxuICAgICAgICBvcHRpb25hbEtleXM6IG5ldyBTZXQob2tleXMpLFxuICAgIH07XG59XG5mdW5jdGlvbiBoYW5kbGVDYXRjaGFsbChwcm9tcywgaW5wdXQsIHBheWxvYWQsIGN0eCwgZGVmLCBpbnN0KSB7XG4gICAgY29uc3QgdW5yZWNvZ25pemVkID0gW107XG4gICAgLy8gaXRlcmF0ZSBvdmVyIGlucHV0IGtleXNcbiAgICBjb25zdCBrZXlTZXQgPSBkZWYua2V5U2V0O1xuICAgIGNvbnN0IF9jYXRjaGFsbCA9IGRlZi5jYXRjaGFsbC5fem9kO1xuICAgIGNvbnN0IHQgPSBfY2F0Y2hhbGwuZGVmLnR5cGU7XG4gICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoaW5wdXQpKSB7XG4gICAgICAgIGlmIChrZXlTZXQuaGFzKGtleSkpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgaWYgKHQgPT09IFwibmV2ZXJcIikge1xuICAgICAgICAgICAgdW5yZWNvZ25pemVkLnB1c2goa2V5KTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHIgPSBfY2F0Y2hhbGwucnVuKHsgdmFsdWU6IGlucHV0W2tleV0sIGlzc3VlczogW10gfSwgY3R4KTtcbiAgICAgICAgaWYgKHIgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICBwcm9tcy5wdXNoKHIudGhlbigocikgPT4gaGFuZGxlUHJvcGVydHlSZXN1bHQociwgcGF5bG9hZCwga2V5LCBpbnB1dCkpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGhhbmRsZVByb3BlcnR5UmVzdWx0KHIsIHBheWxvYWQsIGtleSwgaW5wdXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICh1bnJlY29nbml6ZWQubGVuZ3RoKSB7XG4gICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgY29kZTogXCJ1bnJlY29nbml6ZWRfa2V5c1wiLFxuICAgICAgICAgICAga2V5czogdW5yZWNvZ25pemVkLFxuICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICBpbnN0LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKCFwcm9tcy5sZW5ndGgpXG4gICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9tcykudGhlbigoKSA9PiB7XG4gICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgIH0pO1xufVxuZXhwb3J0IGNvbnN0ICRab2RPYmplY3QgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZE9iamVjdFwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgLy8gcmVxdWlyZXMgY2FzdCBiZWNhdXNlIHRlY2huaWNhbGx5ICRab2RPYmplY3QgZG9lc24ndCBleHRlbmRcbiAgICAkWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgY29uc3QgX25vcm1hbGl6ZWQgPSB1dGlsLmNhY2hlZCgoKSA9PiBub3JtYWxpemVEZWYoZGVmKSk7XG4gICAgdXRpbC5kZWZpbmVMYXp5KGluc3QuX3pvZCwgXCJwcm9wVmFsdWVzXCIsICgpID0+IHtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSBkZWYuc2hhcGU7XG4gICAgICAgIGNvbnN0IHByb3BWYWx1ZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc2hhcGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkID0gc2hhcGVba2V5XS5fem9kO1xuICAgICAgICAgICAgaWYgKGZpZWxkLnZhbHVlcykge1xuICAgICAgICAgICAgICAgIHByb3BWYWx1ZXNba2V5XSA/PyAocHJvcFZhbHVlc1trZXldID0gbmV3IFNldCgpKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgZmllbGQudmFsdWVzKVxuICAgICAgICAgICAgICAgICAgICBwcm9wVmFsdWVzW2tleV0uYWRkKHYpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwcm9wVmFsdWVzO1xuICAgIH0pO1xuICAgIGNvbnN0IGlzT2JqZWN0ID0gdXRpbC5pc09iamVjdDtcbiAgICBjb25zdCBjYXRjaGFsbCA9IGRlZi5jYXRjaGFsbDtcbiAgICBsZXQgdmFsdWU7XG4gICAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQsIGN0eCkgPT4ge1xuICAgICAgICB2YWx1ZSA/PyAodmFsdWUgPSBfbm9ybWFsaXplZC52YWx1ZSk7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gcGF5bG9hZC52YWx1ZTtcbiAgICAgICAgaWYgKCFpc09iamVjdChpbnB1dCkpIHtcbiAgICAgICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBcIm9iamVjdFwiLFxuICAgICAgICAgICAgICAgIGNvZGU6IFwiaW52YWxpZF90eXBlXCIsXG4gICAgICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgICAgIH1cbiAgICAgICAgcGF5bG9hZC52YWx1ZSA9IHt9O1xuICAgICAgICBjb25zdCBwcm9tcyA9IFtdO1xuICAgICAgICBjb25zdCBzaGFwZSA9IHZhbHVlLnNoYXBlO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB2YWx1ZS5rZXlzKSB7XG4gICAgICAgICAgICBjb25zdCBlbCA9IHNoYXBlW2tleV07XG4gICAgICAgICAgICBjb25zdCByID0gZWwuX3pvZC5ydW4oeyB2YWx1ZTogaW5wdXRba2V5XSwgaXNzdWVzOiBbXSB9LCBjdHgpO1xuICAgICAgICAgICAgaWYgKHIgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcHJvbXMucHVzaChyLnRoZW4oKHIpID0+IGhhbmRsZVByb3BlcnR5UmVzdWx0KHIsIHBheWxvYWQsIGtleSwgaW5wdXQpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVQcm9wZXJ0eVJlc3VsdChyLCBwYXlsb2FkLCBrZXksIGlucHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWNhdGNoYWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvbXMubGVuZ3RoID8gUHJvbWlzZS5hbGwocHJvbXMpLnRoZW4oKCkgPT4gcGF5bG9hZCkgOiBwYXlsb2FkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBoYW5kbGVDYXRjaGFsbChwcm9tcywgaW5wdXQsIHBheWxvYWQsIGN0eCwgX25vcm1hbGl6ZWQudmFsdWUsIGluc3QpO1xuICAgIH07XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kT2JqZWN0SklUID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RPYmplY3RKSVRcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgIC8vIHJlcXVpcmVzIGNhc3QgYmVjYXVzZSB0ZWNobmljYWxseSAkWm9kT2JqZWN0IGRvZXNuJ3QgZXh0ZW5kXG4gICAgJFpvZE9iamVjdC5pbml0KGluc3QsIGRlZik7XG4gICAgY29uc3Qgc3VwZXJQYXJzZSA9IGluc3QuX3pvZC5wYXJzZTtcbiAgICBjb25zdCBfbm9ybWFsaXplZCA9IHV0aWwuY2FjaGVkKCgpID0+IG5vcm1hbGl6ZURlZihkZWYpKTtcbiAgICBjb25zdCBnZW5lcmF0ZUZhc3RwYXNzID0gKHNoYXBlKSA9PiB7XG4gICAgICAgIGNvbnN0IGRvYyA9IG5ldyBEb2MoW1wic2hhcGVcIiwgXCJwYXlsb2FkXCIsIFwiY3R4XCJdKTtcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IF9ub3JtYWxpemVkLnZhbHVlO1xuICAgICAgICBjb25zdCBwYXJzZVN0ciA9IChrZXkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGsgPSB1dGlsLmVzYyhrZXkpO1xuICAgICAgICAgICAgcmV0dXJuIGBzaGFwZVske2t9XS5fem9kLnJ1bih7IHZhbHVlOiBpbnB1dFske2t9XSwgaXNzdWVzOiBbXSB9LCBjdHgpYDtcbiAgICAgICAgfTtcbiAgICAgICAgZG9jLndyaXRlKGBjb25zdCBpbnB1dCA9IHBheWxvYWQudmFsdWU7YCk7XG4gICAgICAgIGNvbnN0IGlkcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIGxldCBjb3VudGVyID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Ygbm9ybWFsaXplZC5rZXlzKSB7XG4gICAgICAgICAgICBpZHNba2V5XSA9IGBrZXlfJHtjb3VudGVyKyt9YDtcbiAgICAgICAgfVxuICAgICAgICAvLyBBOiBwcmVzZXJ2ZSBrZXkgb3JkZXIge1xuICAgICAgICBkb2Mud3JpdGUoYGNvbnN0IG5ld1Jlc3VsdCA9IHt9YCk7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIG5vcm1hbGl6ZWQua2V5cykge1xuICAgICAgICAgICAgY29uc3QgaWQgPSBpZHNba2V5XTtcbiAgICAgICAgICAgIGNvbnN0IGsgPSB1dGlsLmVzYyhrZXkpO1xuICAgICAgICAgICAgZG9jLndyaXRlKGBjb25zdCAke2lkfSA9ICR7cGFyc2VTdHIoa2V5KX07YCk7XG4gICAgICAgICAgICBkb2Mud3JpdGUoYFxuICAgICAgICBpZiAoJHtpZH0uaXNzdWVzLmxlbmd0aCkge1xuICAgICAgICAgIHBheWxvYWQuaXNzdWVzID0gcGF5bG9hZC5pc3N1ZXMuY29uY2F0KCR7aWR9Lmlzc3Vlcy5tYXAoaXNzID0+ICh7XG4gICAgICAgICAgICAuLi5pc3MsXG4gICAgICAgICAgICBwYXRoOiBpc3MucGF0aCA/IFske2t9LCAuLi5pc3MucGF0aF0gOiBbJHtrfV1cbiAgICAgICAgICB9KSkpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoJHtpZH0udmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGlmICgke2t9IGluIGlucHV0KSB7XG4gICAgICAgICAgICBuZXdSZXN1bHRbJHtrfV0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ld1Jlc3VsdFske2t9XSA9ICR7aWR9LnZhbHVlO1xuICAgICAgICB9XG4gICAgICBgKTtcbiAgICAgICAgfVxuICAgICAgICBkb2Mud3JpdGUoYHBheWxvYWQudmFsdWUgPSBuZXdSZXN1bHQ7YCk7XG4gICAgICAgIGRvYy53cml0ZShgcmV0dXJuIHBheWxvYWQ7YCk7XG4gICAgICAgIGNvbnN0IGZuID0gZG9jLmNvbXBpbGUoKTtcbiAgICAgICAgcmV0dXJuIChwYXlsb2FkLCBjdHgpID0+IGZuKHNoYXBlLCBwYXlsb2FkLCBjdHgpO1xuICAgIH07XG4gICAgbGV0IGZhc3RwYXNzO1xuICAgIGNvbnN0IGlzT2JqZWN0ID0gdXRpbC5pc09iamVjdDtcbiAgICBjb25zdCBqaXQgPSAhY29yZS5nbG9iYWxDb25maWcuaml0bGVzcztcbiAgICBjb25zdCBhbGxvd3NFdmFsID0gdXRpbC5hbGxvd3NFdmFsO1xuICAgIGNvbnN0IGZhc3RFbmFibGVkID0gaml0ICYmIGFsbG93c0V2YWwudmFsdWU7IC8vICYmICFkZWYuY2F0Y2hhbGw7XG4gICAgY29uc3QgY2F0Y2hhbGwgPSBkZWYuY2F0Y2hhbGw7XG4gICAgbGV0IHZhbHVlO1xuICAgIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBjdHgpID0+IHtcbiAgICAgICAgdmFsdWUgPz8gKHZhbHVlID0gX25vcm1hbGl6ZWQudmFsdWUpO1xuICAgICAgICBjb25zdCBpbnB1dCA9IHBheWxvYWQudmFsdWU7XG4gICAgICAgIGlmICghaXNPYmplY3QoaW5wdXQpKSB7XG4gICAgICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogXCJvYmplY3RcIixcbiAgICAgICAgICAgICAgICBjb2RlOiBcImludmFsaWRfdHlwZVwiLFxuICAgICAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgICAgIGluc3QsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChqaXQgJiYgZmFzdEVuYWJsZWQgJiYgY3R4Py5hc3luYyA9PT0gZmFsc2UgJiYgY3R4LmppdGxlc3MgIT09IHRydWUpIHtcbiAgICAgICAgICAgIC8vIGFsd2F5cyBzeW5jaHJvbm91c1xuICAgICAgICAgICAgaWYgKCFmYXN0cGFzcylcbiAgICAgICAgICAgICAgICBmYXN0cGFzcyA9IGdlbmVyYXRlRmFzdHBhc3MoZGVmLnNoYXBlKTtcbiAgICAgICAgICAgIHBheWxvYWQgPSBmYXN0cGFzcyhwYXlsb2FkLCBjdHgpO1xuICAgICAgICAgICAgaWYgKCFjYXRjaGFsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVDYXRjaGFsbChbXSwgaW5wdXQsIHBheWxvYWQsIGN0eCwgdmFsdWUsIGluc3QpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdXBlclBhcnNlKHBheWxvYWQsIGN0eCk7XG4gICAgfTtcbn0pO1xuZnVuY3Rpb24gaGFuZGxlVW5pb25SZXN1bHRzKHJlc3VsdHMsIGZpbmFsLCBpbnN0LCBjdHgpIHtcbiAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiByZXN1bHRzKSB7XG4gICAgICAgIGlmIChyZXN1bHQuaXNzdWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgZmluYWwudmFsdWUgPSByZXN1bHQudmFsdWU7XG4gICAgICAgICAgICByZXR1cm4gZmluYWw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qgbm9uYWJvcnRlZCA9IHJlc3VsdHMuZmlsdGVyKChyKSA9PiAhdXRpbC5hYm9ydGVkKHIpKTtcbiAgICBpZiAobm9uYWJvcnRlZC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgZmluYWwudmFsdWUgPSBub25hYm9ydGVkWzBdLnZhbHVlO1xuICAgICAgICByZXR1cm4gbm9uYWJvcnRlZFswXTtcbiAgICB9XG4gICAgZmluYWwuaXNzdWVzLnB1c2goe1xuICAgICAgICBjb2RlOiBcImludmFsaWRfdW5pb25cIixcbiAgICAgICAgaW5wdXQ6IGZpbmFsLnZhbHVlLFxuICAgICAgICBpbnN0LFxuICAgICAgICBlcnJvcnM6IHJlc3VsdHMubWFwKChyZXN1bHQpID0+IHJlc3VsdC5pc3N1ZXMubWFwKChpc3MpID0+IHV0aWwuZmluYWxpemVJc3N1ZShpc3MsIGN0eCwgY29yZS5jb25maWcoKSkpKSxcbiAgICB9KTtcbiAgICByZXR1cm4gZmluYWw7XG59XG5leHBvcnQgY29uc3QgJFpvZFVuaW9uID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RVbmlvblwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIHV0aWwuZGVmaW5lTGF6eShpbnN0Ll96b2QsIFwib3B0aW5cIiwgKCkgPT4gZGVmLm9wdGlvbnMuc29tZSgobykgPT4gby5fem9kLm9wdGluID09PSBcIm9wdGlvbmFsXCIpID8gXCJvcHRpb25hbFwiIDogdW5kZWZpbmVkKTtcbiAgICB1dGlsLmRlZmluZUxhenkoaW5zdC5fem9kLCBcIm9wdG91dFwiLCAoKSA9PiBkZWYub3B0aW9ucy5zb21lKChvKSA9PiBvLl96b2Qub3B0b3V0ID09PSBcIm9wdGlvbmFsXCIpID8gXCJvcHRpb25hbFwiIDogdW5kZWZpbmVkKTtcbiAgICB1dGlsLmRlZmluZUxhenkoaW5zdC5fem9kLCBcInZhbHVlc1wiLCAoKSA9PiB7XG4gICAgICAgIGlmIChkZWYub3B0aW9ucy5ldmVyeSgobykgPT4gby5fem9kLnZhbHVlcykpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU2V0KGRlZi5vcHRpb25zLmZsYXRNYXAoKG9wdGlvbikgPT4gQXJyYXkuZnJvbShvcHRpb24uX3pvZC52YWx1ZXMpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9KTtcbiAgICB1dGlsLmRlZmluZUxhenkoaW5zdC5fem9kLCBcInBhdHRlcm5cIiwgKCkgPT4ge1xuICAgICAgICBpZiAoZGVmLm9wdGlvbnMuZXZlcnkoKG8pID0+IG8uX3pvZC5wYXR0ZXJuKSkge1xuICAgICAgICAgICAgY29uc3QgcGF0dGVybnMgPSBkZWYub3B0aW9ucy5tYXAoKG8pID0+IG8uX3pvZC5wYXR0ZXJuKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVnRXhwKGBeKCR7cGF0dGVybnMubWFwKChwKSA9PiB1dGlsLmNsZWFuUmVnZXgocC5zb3VyY2UpKS5qb2luKFwifFwiKX0pJGApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSk7XG4gICAgY29uc3Qgc2luZ2xlID0gZGVmLm9wdGlvbnMubGVuZ3RoID09PSAxO1xuICAgIGNvbnN0IGZpcnN0ID0gZGVmLm9wdGlvbnNbMF0uX3pvZC5ydW47XG4gICAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQsIGN0eCkgPT4ge1xuICAgICAgICBpZiAoc2luZ2xlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmlyc3QocGF5bG9hZCwgY3R4KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgYXN5bmMgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IG9wdGlvbiBvZiBkZWYub3B0aW9ucykge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gb3B0aW9uLl96b2QucnVuKHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcGF5bG9hZC52YWx1ZSxcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgfSwgY3R4KTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgYXN5bmMgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5pc3N1ZXMubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChyZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghYXN5bmMpXG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlVW5pb25SZXN1bHRzKHJlc3VsdHMsIHBheWxvYWQsIGluc3QsIGN0eCk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChyZXN1bHRzKS50aGVuKChyZXN1bHRzKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlVW5pb25SZXN1bHRzKHJlc3VsdHMsIHBheWxvYWQsIGluc3QsIGN0eCk7XG4gICAgICAgIH0pO1xuICAgIH07XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kRGlzY3JpbWluYXRlZFVuaW9uID0gXG4vKkBfX1BVUkVfXyovXG5jb3JlLiRjb25zdHJ1Y3RvcihcIiRab2REaXNjcmltaW5hdGVkVW5pb25cIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RVbmlvbi5pbml0KGluc3QsIGRlZik7XG4gICAgY29uc3QgX3N1cGVyID0gaW5zdC5fem9kLnBhcnNlO1xuICAgIHV0aWwuZGVmaW5lTGF6eShpbnN0Ll96b2QsIFwicHJvcFZhbHVlc1wiLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHByb3BWYWx1ZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBvcHRpb24gb2YgZGVmLm9wdGlvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IHB2ID0gb3B0aW9uLl96b2QucHJvcFZhbHVlcztcbiAgICAgICAgICAgIGlmICghcHYgfHwgT2JqZWN0LmtleXMocHYpLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgZGlzY3JpbWluYXRlZCB1bmlvbiBvcHRpb24gYXQgaW5kZXggXCIke2RlZi5vcHRpb25zLmluZGV4T2Yob3B0aW9uKX1cImApO1xuICAgICAgICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMocHYpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFwcm9wVmFsdWVzW2tdKVxuICAgICAgICAgICAgICAgICAgICBwcm9wVmFsdWVzW2tdID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdmFsIG9mIHYpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvcFZhbHVlc1trXS5hZGQodmFsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHByb3BWYWx1ZXM7XG4gICAgfSk7XG4gICAgY29uc3QgZGlzYyA9IHV0aWwuY2FjaGVkKCgpID0+IHtcbiAgICAgICAgY29uc3Qgb3B0cyA9IGRlZi5vcHRpb25zO1xuICAgICAgICBjb25zdCBtYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIGZvciAoY29uc3QgbyBvZiBvcHRzKSB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZXMgPSBvLl96b2QucHJvcFZhbHVlcz8uW2RlZi5kaXNjcmltaW5hdG9yXTtcbiAgICAgICAgICAgIGlmICghdmFsdWVzIHx8IHZhbHVlcy5zaXplID09PSAwKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBkaXNjcmltaW5hdGVkIHVuaW9uIG9wdGlvbiBhdCBpbmRleCBcIiR7ZGVmLm9wdGlvbnMuaW5kZXhPZihvKX1cImApO1xuICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIHZhbHVlcykge1xuICAgICAgICAgICAgICAgIGlmIChtYXAuaGFzKHYpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRHVwbGljYXRlIGRpc2NyaW1pbmF0b3IgdmFsdWUgXCIke1N0cmluZyh2KX1cImApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBtYXAuc2V0KHYsIG8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXA7XG4gICAgfSk7XG4gICAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQsIGN0eCkgPT4ge1xuICAgICAgICBjb25zdCBpbnB1dCA9IHBheWxvYWQudmFsdWU7XG4gICAgICAgIGlmICghdXRpbC5pc09iamVjdChpbnB1dCkpIHtcbiAgICAgICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgICAgIGNvZGU6IFwiaW52YWxpZF90eXBlXCIsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFwib2JqZWN0XCIsXG4gICAgICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3B0ID0gZGlzYy52YWx1ZS5nZXQoaW5wdXQ/LltkZWYuZGlzY3JpbWluYXRvcl0pO1xuICAgICAgICBpZiAob3B0KSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0Ll96b2QucnVuKHBheWxvYWQsIGN0eCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZi51bmlvbkZhbGxiYWNrKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyKHBheWxvYWQsIGN0eCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gbm8gbWF0Y2hpbmcgZGlzY3JpbWluYXRvclxuICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgIGNvZGU6IFwiaW52YWxpZF91bmlvblwiLFxuICAgICAgICAgICAgZXJyb3JzOiBbXSxcbiAgICAgICAgICAgIG5vdGU6IFwiTm8gbWF0Y2hpbmcgZGlzY3JpbWluYXRvclwiLFxuICAgICAgICAgICAgZGlzY3JpbWluYXRvcjogZGVmLmRpc2NyaW1pbmF0b3IsXG4gICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgIHBhdGg6IFtkZWYuZGlzY3JpbWluYXRvcl0sXG4gICAgICAgICAgICBpbnN0LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgfTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RJbnRlcnNlY3Rpb24gPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZEludGVyc2VjdGlvblwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBjdHgpID0+IHtcbiAgICAgICAgY29uc3QgaW5wdXQgPSBwYXlsb2FkLnZhbHVlO1xuICAgICAgICBjb25zdCBsZWZ0ID0gZGVmLmxlZnQuX3pvZC5ydW4oeyB2YWx1ZTogaW5wdXQsIGlzc3VlczogW10gfSwgY3R4KTtcbiAgICAgICAgY29uc3QgcmlnaHQgPSBkZWYucmlnaHQuX3pvZC5ydW4oeyB2YWx1ZTogaW5wdXQsIGlzc3VlczogW10gfSwgY3R4KTtcbiAgICAgICAgY29uc3QgYXN5bmMgPSBsZWZ0IGluc3RhbmNlb2YgUHJvbWlzZSB8fCByaWdodCBpbnN0YW5jZW9mIFByb21pc2U7XG4gICAgICAgIGlmIChhc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFtsZWZ0LCByaWdodF0pLnRoZW4oKFtsZWZ0LCByaWdodF0pID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlSW50ZXJzZWN0aW9uUmVzdWx0cyhwYXlsb2FkLCBsZWZ0LCByaWdodCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGFuZGxlSW50ZXJzZWN0aW9uUmVzdWx0cyhwYXlsb2FkLCBsZWZ0LCByaWdodCk7XG4gICAgfTtcbn0pO1xuZnVuY3Rpb24gbWVyZ2VWYWx1ZXMoYSwgYikge1xuICAgIC8vIGNvbnN0IGFUeXBlID0gcGFyc2UudChhKTtcbiAgICAvLyBjb25zdCBiVHlwZSA9IHBhcnNlLnQoYik7XG4gICAgaWYgKGEgPT09IGIpIHtcbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRhdGE6IGEgfTtcbiAgICB9XG4gICAgaWYgKGEgaW5zdGFuY2VvZiBEYXRlICYmIGIgaW5zdGFuY2VvZiBEYXRlICYmICthID09PSArYikge1xuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogYSB9O1xuICAgIH1cbiAgICBpZiAodXRpbC5pc1BsYWluT2JqZWN0KGEpICYmIHV0aWwuaXNQbGFpbk9iamVjdChiKSkge1xuICAgICAgICBjb25zdCBiS2V5cyA9IE9iamVjdC5rZXlzKGIpO1xuICAgICAgICBjb25zdCBzaGFyZWRLZXlzID0gT2JqZWN0LmtleXMoYSkuZmlsdGVyKChrZXkpID0+IGJLZXlzLmluZGV4T2Yoa2V5KSAhPT0gLTEpO1xuICAgICAgICBjb25zdCBuZXdPYmogPSB7IC4uLmEsIC4uLmIgfTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Ygc2hhcmVkS2V5cykge1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVkVmFsdWUgPSBtZXJnZVZhbHVlcyhhW2tleV0sIGJba2V5XSk7XG4gICAgICAgICAgICBpZiAoIXNoYXJlZFZhbHVlLnZhbGlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXJnZUVycm9yUGF0aDogW2tleSwgLi4uc2hhcmVkVmFsdWUubWVyZ2VFcnJvclBhdGhdLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdPYmpba2V5XSA9IHNoYXJlZFZhbHVlLmRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRhdGE6IG5ld09iaiB9O1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShhKSAmJiBBcnJheS5pc0FycmF5KGIpKSB7XG4gICAgICAgIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgbWVyZ2VFcnJvclBhdGg6IFtdIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV3QXJyYXkgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGEubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtQSA9IGFbaW5kZXhdO1xuICAgICAgICAgICAgY29uc3QgaXRlbUIgPSBiW2luZGV4XTtcbiAgICAgICAgICAgIGNvbnN0IHNoYXJlZFZhbHVlID0gbWVyZ2VWYWx1ZXMoaXRlbUEsIGl0ZW1CKTtcbiAgICAgICAgICAgIGlmICghc2hhcmVkVmFsdWUudmFsaWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG1lcmdlRXJyb3JQYXRoOiBbaW5kZXgsIC4uLnNoYXJlZFZhbHVlLm1lcmdlRXJyb3JQYXRoXSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3QXJyYXkucHVzaChzaGFyZWRWYWx1ZS5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogbmV3QXJyYXkgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBtZXJnZUVycm9yUGF0aDogW10gfTtcbn1cbmZ1bmN0aW9uIGhhbmRsZUludGVyc2VjdGlvblJlc3VsdHMocmVzdWx0LCBsZWZ0LCByaWdodCkge1xuICAgIGlmIChsZWZ0Lmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgcmVzdWx0Lmlzc3Vlcy5wdXNoKC4uLmxlZnQuaXNzdWVzKTtcbiAgICB9XG4gICAgaWYgKHJpZ2h0Lmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgcmVzdWx0Lmlzc3Vlcy5wdXNoKC4uLnJpZ2h0Lmlzc3Vlcyk7XG4gICAgfVxuICAgIGlmICh1dGlsLmFib3J0ZWQocmVzdWx0KSlcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICBjb25zdCBtZXJnZWQgPSBtZXJnZVZhbHVlcyhsZWZ0LnZhbHVlLCByaWdodC52YWx1ZSk7XG4gICAgaWYgKCFtZXJnZWQudmFsaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbm1lcmdhYmxlIGludGVyc2VjdGlvbi4gRXJyb3IgcGF0aDogYCArIGAke0pTT04uc3RyaW5naWZ5KG1lcmdlZC5tZXJnZUVycm9yUGF0aCl9YCk7XG4gICAgfVxuICAgIHJlc3VsdC52YWx1ZSA9IG1lcmdlZC5kYXRhO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5leHBvcnQgY29uc3QgJFpvZFR1cGxlID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RUdXBsZVwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGNvbnN0IGl0ZW1zID0gZGVmLml0ZW1zO1xuICAgIGNvbnN0IG9wdFN0YXJ0ID0gaXRlbXMubGVuZ3RoIC0gWy4uLml0ZW1zXS5yZXZlcnNlKCkuZmluZEluZGV4KChpdGVtKSA9PiBpdGVtLl96b2Qub3B0aW4gIT09IFwib3B0aW9uYWxcIik7XG4gICAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQsIGN0eCkgPT4ge1xuICAgICAgICBjb25zdCBpbnB1dCA9IHBheWxvYWQudmFsdWU7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcbiAgICAgICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgICAgIGluc3QsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFwidHVwbGVcIixcbiAgICAgICAgICAgICAgICBjb2RlOiBcImludmFsaWRfdHlwZVwiLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICAgICAgfVxuICAgICAgICBwYXlsb2FkLnZhbHVlID0gW107XG4gICAgICAgIGNvbnN0IHByb21zID0gW107XG4gICAgICAgIGlmICghZGVmLnJlc3QpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvb0JpZyA9IGlucHV0Lmxlbmd0aCA+IGl0ZW1zLmxlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gaW5wdXQubGVuZ3RoIDwgb3B0U3RhcnQgLSAxO1xuICAgICAgICAgICAgaWYgKHRvb0JpZyB8fCB0b29TbWFsbCkge1xuICAgICAgICAgICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAuLi4odG9vQmlnID8geyBjb2RlOiBcInRvb19iaWdcIiwgbWF4aW11bTogaXRlbXMubGVuZ3RoIH0gOiB7IGNvZGU6IFwidG9vX3NtYWxsXCIsIG1pbmltdW06IGl0ZW1zLmxlbmd0aCB9KSxcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICAgICAgICAgIGluc3QsXG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbjogXCJhcnJheVwiLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBpID0gLTE7XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgaWYgKGkgPj0gaW5wdXQubGVuZ3RoKVxuICAgICAgICAgICAgICAgIGlmIChpID49IG9wdFN0YXJ0KVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGl0ZW0uX3pvZC5ydW4oe1xuICAgICAgICAgICAgICAgIHZhbHVlOiBpbnB1dFtpXSxcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgfSwgY3R4KTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcHJvbXMucHVzaChyZXN1bHQudGhlbigocmVzdWx0KSA9PiBoYW5kbGVUdXBsZVJlc3VsdChyZXN1bHQsIHBheWxvYWQsIGkpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVUdXBsZVJlc3VsdChyZXN1bHQsIHBheWxvYWQsIGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYucmVzdCkge1xuICAgICAgICAgICAgY29uc3QgcmVzdCA9IGlucHV0LnNsaWNlKGl0ZW1zLmxlbmd0aCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVsIG9mIHJlc3QpIHtcbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gZGVmLnJlc3QuX3pvZC5ydW4oe1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZWwsXG4gICAgICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICAgICAgfSwgY3R4KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICBwcm9tcy5wdXNoKHJlc3VsdC50aGVuKChyZXN1bHQpID0+IGhhbmRsZVR1cGxlUmVzdWx0KHJlc3VsdCwgcGF5bG9hZCwgaSkpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZVR1cGxlUmVzdWx0KHJlc3VsdCwgcGF5bG9hZCwgaSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9tcy5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbXMpLnRoZW4oKCkgPT4gcGF5bG9hZCk7XG4gICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgIH07XG59KTtcbmZ1bmN0aW9uIGhhbmRsZVR1cGxlUmVzdWx0KHJlc3VsdCwgZmluYWwsIGluZGV4KSB7XG4gICAgaWYgKHJlc3VsdC5pc3N1ZXMubGVuZ3RoKSB7XG4gICAgICAgIGZpbmFsLmlzc3Vlcy5wdXNoKC4uLnV0aWwucHJlZml4SXNzdWVzKGluZGV4LCByZXN1bHQuaXNzdWVzKSk7XG4gICAgfVxuICAgIGZpbmFsLnZhbHVlW2luZGV4XSA9IHJlc3VsdC52YWx1ZTtcbn1cbmV4cG9ydCBjb25zdCAkWm9kUmVjb3JkID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RSZWNvcmRcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgY3R4KSA9PiB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gcGF5bG9hZC52YWx1ZTtcbiAgICAgICAgaWYgKCF1dGlsLmlzUGxhaW5PYmplY3QoaW5wdXQpKSB7XG4gICAgICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogXCJyZWNvcmRcIixcbiAgICAgICAgICAgICAgICBjb2RlOiBcImludmFsaWRfdHlwZVwiLFxuICAgICAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgICAgIGluc3QsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByb21zID0gW107XG4gICAgICAgIGlmIChkZWYua2V5VHlwZS5fem9kLnZhbHVlcykge1xuICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gZGVmLmtleVR5cGUuX3pvZC52YWx1ZXM7XG4gICAgICAgICAgICBwYXlsb2FkLnZhbHVlID0ge307XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB2YWx1ZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGtleSA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2Yga2V5ID09PSBcIm51bWJlclwiIHx8IHR5cGVvZiBrZXkgPT09IFwic3ltYm9sXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gZGVmLnZhbHVlVHlwZS5fem9kLnJ1bih7IHZhbHVlOiBpbnB1dFtrZXldLCBpc3N1ZXM6IFtdIH0sIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9tcy5wdXNoKHJlc3VsdC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCguLi51dGlsLnByZWZpeElzc3VlcyhrZXksIHJlc3VsdC5pc3N1ZXMpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZC52YWx1ZVtrZXldID0gcmVzdWx0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5pc3N1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCguLi51dGlsLnByZWZpeElzc3VlcyhrZXksIHJlc3VsdC5pc3N1ZXMpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWQudmFsdWVba2V5XSA9IHJlc3VsdC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCB1bnJlY29nbml6ZWQ7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBpbnB1dCkge1xuICAgICAgICAgICAgICAgIGlmICghdmFsdWVzLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHVucmVjb2duaXplZCA9IHVucmVjb2duaXplZCA/PyBbXTtcbiAgICAgICAgICAgICAgICAgICAgdW5yZWNvZ25pemVkLnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodW5yZWNvZ25pemVkICYmIHVucmVjb2duaXplZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFwidW5yZWNvZ25pemVkX2tleXNcIixcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICAgICAgICAgIGluc3QsXG4gICAgICAgICAgICAgICAgICAgIGtleXM6IHVucmVjb2duaXplZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBheWxvYWQudmFsdWUgPSB7fTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIFJlZmxlY3Qub3duS2V5cyhpbnB1dCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSBcIl9fcHJvdG9fX1wiKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXlSZXN1bHQgPSBkZWYua2V5VHlwZS5fem9kLnJ1bih7IHZhbHVlOiBrZXksIGlzc3VlczogW10gfSwgY3R4KTtcbiAgICAgICAgICAgICAgICBpZiAoa2V5UmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBc3luYyBzY2hlbWFzIG5vdCBzdXBwb3J0ZWQgaW4gb2JqZWN0IGtleXMgY3VycmVudGx5XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoa2V5UmVzdWx0Lmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBcImludmFsaWRfa2V5XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46IFwicmVjb3JkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IGtleVJlc3VsdC5pc3N1ZXMubWFwKChpc3MpID0+IHV0aWwuZmluYWxpemVJc3N1ZShpc3MsIGN0eCwgY29yZS5jb25maWcoKSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IFtrZXldLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQudmFsdWVba2V5UmVzdWx0LnZhbHVlXSA9IGtleVJlc3VsdC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGRlZi52YWx1ZVR5cGUuX3pvZC5ydW4oeyB2YWx1ZTogaW5wdXRba2V5XSwgaXNzdWVzOiBbXSB9LCBjdHgpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb21zLnB1c2gocmVzdWx0LnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5pc3N1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCguLi51dGlsLnByZWZpeElzc3VlcyhrZXksIHJlc3VsdC5pc3N1ZXMpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWQudmFsdWVba2V5UmVzdWx0LnZhbHVlXSA9IHJlc3VsdC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5pc3N1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKC4uLnV0aWwucHJlZml4SXNzdWVzKGtleSwgcmVzdWx0Lmlzc3VlcykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQudmFsdWVba2V5UmVzdWx0LnZhbHVlXSA9IHJlc3VsdC52YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb21zLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21zKS50aGVuKCgpID0+IHBheWxvYWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgIH07XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kTWFwID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RNYXBcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgY3R4KSA9PiB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gcGF5bG9hZC52YWx1ZTtcbiAgICAgICAgaWYgKCEoaW5wdXQgaW5zdGFuY2VvZiBNYXApKSB7XG4gICAgICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogXCJtYXBcIixcbiAgICAgICAgICAgICAgICBjb2RlOiBcImludmFsaWRfdHlwZVwiLFxuICAgICAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgICAgIGluc3QsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByb21zID0gW107XG4gICAgICAgIHBheWxvYWQudmFsdWUgPSBuZXcgTWFwKCk7XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGlucHV0KSB7XG4gICAgICAgICAgICBjb25zdCBrZXlSZXN1bHQgPSBkZWYua2V5VHlwZS5fem9kLnJ1bih7IHZhbHVlOiBrZXksIGlzc3VlczogW10gfSwgY3R4KTtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlUmVzdWx0ID0gZGVmLnZhbHVlVHlwZS5fem9kLnJ1bih7IHZhbHVlOiB2YWx1ZSwgaXNzdWVzOiBbXSB9LCBjdHgpO1xuICAgICAgICAgICAgaWYgKGtleVJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UgfHwgdmFsdWVSZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcHJvbXMucHVzaChQcm9taXNlLmFsbChba2V5UmVzdWx0LCB2YWx1ZVJlc3VsdF0pLnRoZW4oKFtrZXlSZXN1bHQsIHZhbHVlUmVzdWx0XSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBoYW5kbGVNYXBSZXN1bHQoa2V5UmVzdWx0LCB2YWx1ZVJlc3VsdCwgcGF5bG9hZCwga2V5LCBpbnB1dCwgaW5zdCwgY3R4KTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVNYXBSZXN1bHQoa2V5UmVzdWx0LCB2YWx1ZVJlc3VsdCwgcGF5bG9hZCwga2V5LCBpbnB1dCwgaW5zdCwgY3R4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvbXMubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21zKS50aGVuKCgpID0+IHBheWxvYWQpO1xuICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICB9O1xufSk7XG5mdW5jdGlvbiBoYW5kbGVNYXBSZXN1bHQoa2V5UmVzdWx0LCB2YWx1ZVJlc3VsdCwgZmluYWwsIGtleSwgaW5wdXQsIGluc3QsIGN0eCkge1xuICAgIGlmIChrZXlSZXN1bHQuaXNzdWVzLmxlbmd0aCkge1xuICAgICAgICBpZiAodXRpbC5wcm9wZXJ0eUtleVR5cGVzLmhhcyh0eXBlb2Yga2V5KSkge1xuICAgICAgICAgICAgZmluYWwuaXNzdWVzLnB1c2goLi4udXRpbC5wcmVmaXhJc3N1ZXMoa2V5LCBrZXlSZXN1bHQuaXNzdWVzKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmaW5hbC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgY29kZTogXCJpbnZhbGlkX2tleVwiLFxuICAgICAgICAgICAgICAgIG9yaWdpbjogXCJtYXBcIixcbiAgICAgICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgICAgIGlzc3Vlczoga2V5UmVzdWx0Lmlzc3Vlcy5tYXAoKGlzcykgPT4gdXRpbC5maW5hbGl6ZUlzc3VlKGlzcywgY3R4LCBjb3JlLmNvbmZpZygpKSksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAodmFsdWVSZXN1bHQuaXNzdWVzLmxlbmd0aCkge1xuICAgICAgICBpZiAodXRpbC5wcm9wZXJ0eUtleVR5cGVzLmhhcyh0eXBlb2Yga2V5KSkge1xuICAgICAgICAgICAgZmluYWwuaXNzdWVzLnB1c2goLi4udXRpbC5wcmVmaXhJc3N1ZXMoa2V5LCB2YWx1ZVJlc3VsdC5pc3N1ZXMpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZpbmFsLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBvcmlnaW46IFwibWFwXCIsXG4gICAgICAgICAgICAgICAgY29kZTogXCJpbnZhbGlkX2VsZW1lbnRcIixcbiAgICAgICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgICAgIGtleToga2V5LFxuICAgICAgICAgICAgICAgIGlzc3VlczogdmFsdWVSZXN1bHQuaXNzdWVzLm1hcCgoaXNzKSA9PiB1dGlsLmZpbmFsaXplSXNzdWUoaXNzLCBjdHgsIGNvcmUuY29uZmlnKCkpKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZpbmFsLnZhbHVlLnNldChrZXlSZXN1bHQudmFsdWUsIHZhbHVlUmVzdWx0LnZhbHVlKTtcbn1cbmV4cG9ydCBjb25zdCAkWm9kU2V0ID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RTZXRcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgY3R4KSA9PiB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gcGF5bG9hZC52YWx1ZTtcbiAgICAgICAgaWYgKCEoaW5wdXQgaW5zdGFuY2VvZiBTZXQpKSB7XG4gICAgICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBcInNldFwiLFxuICAgICAgICAgICAgICAgIGNvZGU6IFwiaW52YWxpZF90eXBlXCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByb21zID0gW107XG4gICAgICAgIHBheWxvYWQudmFsdWUgPSBuZXcgU2V0KCk7XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpbnB1dCkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gZGVmLnZhbHVlVHlwZS5fem9kLnJ1bih7IHZhbHVlOiBpdGVtLCBpc3N1ZXM6IFtdIH0sIGN0eCk7XG4gICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIHByb21zLnB1c2gocmVzdWx0LnRoZW4oKHJlc3VsdCkgPT4gaGFuZGxlU2V0UmVzdWx0KHJlc3VsdCwgcGF5bG9hZCkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBoYW5kbGVTZXRSZXN1bHQocmVzdWx0LCBwYXlsb2FkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvbXMubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21zKS50aGVuKCgpID0+IHBheWxvYWQpO1xuICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICB9O1xufSk7XG5mdW5jdGlvbiBoYW5kbGVTZXRSZXN1bHQocmVzdWx0LCBmaW5hbCkge1xuICAgIGlmIChyZXN1bHQuaXNzdWVzLmxlbmd0aCkge1xuICAgICAgICBmaW5hbC5pc3N1ZXMucHVzaCguLi5yZXN1bHQuaXNzdWVzKTtcbiAgICB9XG4gICAgZmluYWwudmFsdWUuYWRkKHJlc3VsdC52YWx1ZSk7XG59XG5leHBvcnQgY29uc3QgJFpvZEVudW0gPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZEVudW1cIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBjb25zdCB2YWx1ZXMgPSB1dGlsLmdldEVudW1WYWx1ZXMoZGVmLmVudHJpZXMpO1xuICAgIGNvbnN0IHZhbHVlc1NldCA9IG5ldyBTZXQodmFsdWVzKTtcbiAgICBpbnN0Ll96b2QudmFsdWVzID0gdmFsdWVzU2V0O1xuICAgIGluc3QuX3pvZC5wYXR0ZXJuID0gbmV3IFJlZ0V4cChgXigke3ZhbHVlc1xuICAgICAgICAuZmlsdGVyKChrKSA9PiB1dGlsLnByb3BlcnR5S2V5VHlwZXMuaGFzKHR5cGVvZiBrKSlcbiAgICAgICAgLm1hcCgobykgPT4gKHR5cGVvZiBvID09PSBcInN0cmluZ1wiID8gdXRpbC5lc2NhcGVSZWdleChvKSA6IG8udG9TdHJpbmcoKSkpXG4gICAgICAgIC5qb2luKFwifFwiKX0pJGApO1xuICAgIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBfY3R4KSA9PiB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gcGF5bG9hZC52YWx1ZTtcbiAgICAgICAgaWYgKHZhbHVlc1NldC5oYXMoaW5wdXQpKSB7XG4gICAgICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICAgICAgfVxuICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgIGNvZGU6IFwiaW52YWxpZF92YWx1ZVwiLFxuICAgICAgICAgICAgdmFsdWVzLFxuICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICBpbnN0LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgfTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RMaXRlcmFsID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RMaXRlcmFsXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAkWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaWYgKGRlZi52YWx1ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBjcmVhdGUgbGl0ZXJhbCBzY2hlbWEgd2l0aCBubyB2YWxpZCB2YWx1ZXNcIik7XG4gICAgfVxuICAgIGluc3QuX3pvZC52YWx1ZXMgPSBuZXcgU2V0KGRlZi52YWx1ZXMpO1xuICAgIGluc3QuX3pvZC5wYXR0ZXJuID0gbmV3IFJlZ0V4cChgXigke2RlZi52YWx1ZXNcbiAgICAgICAgLm1hcCgobykgPT4gKHR5cGVvZiBvID09PSBcInN0cmluZ1wiID8gdXRpbC5lc2NhcGVSZWdleChvKSA6IG8gPyB1dGlsLmVzY2FwZVJlZ2V4KG8udG9TdHJpbmcoKSkgOiBTdHJpbmcobykpKVxuICAgICAgICAuam9pbihcInxcIil9KSRgKTtcbiAgICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgX2N0eCkgPT4ge1xuICAgICAgICBjb25zdCBpbnB1dCA9IHBheWxvYWQudmFsdWU7XG4gICAgICAgIGlmIChpbnN0Ll96b2QudmFsdWVzLmhhcyhpbnB1dCkpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICB9XG4gICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgY29kZTogXCJpbnZhbGlkX3ZhbHVlXCIsXG4gICAgICAgICAgICB2YWx1ZXM6IGRlZi52YWx1ZXMsXG4gICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgIGluc3QsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICB9O1xufSk7XG5leHBvcnQgY29uc3QgJFpvZEZpbGUgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZEZpbGVcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgX2N0eCkgPT4ge1xuICAgICAgICBjb25zdCBpbnB1dCA9IHBheWxvYWQudmFsdWU7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgaWYgKGlucHV0IGluc3RhbmNlb2YgRmlsZSlcbiAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgIGV4cGVjdGVkOiBcImZpbGVcIixcbiAgICAgICAgICAgIGNvZGU6IFwiaW52YWxpZF90eXBlXCIsXG4gICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgIGluc3QsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICB9O1xufSk7XG5leHBvcnQgY29uc3QgJFpvZFRyYW5zZm9ybSA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kVHJhbnNmb3JtXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAkWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQsIGN0eCkgPT4ge1xuICAgICAgICBpZiAoY3R4LmRpcmVjdGlvbiA9PT0gXCJiYWNrd2FyZFwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgY29yZS4kWm9kRW5jb2RlRXJyb3IoaW5zdC5jb25zdHJ1Y3Rvci5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBfb3V0ID0gZGVmLnRyYW5zZm9ybShwYXlsb2FkLnZhbHVlLCBwYXlsb2FkKTtcbiAgICAgICAgaWYgKGN0eC5hc3luYykge1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gX291dCBpbnN0YW5jZW9mIFByb21pc2UgPyBfb3V0IDogUHJvbWlzZS5yZXNvbHZlKF9vdXQpO1xuICAgICAgICAgICAgcmV0dXJuIG91dHB1dC50aGVuKChvdXRwdXQpID0+IHtcbiAgICAgICAgICAgICAgICBwYXlsb2FkLnZhbHVlID0gb3V0cHV0O1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9vdXQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgY29yZS4kWm9kQXN5bmNFcnJvcigpO1xuICAgICAgICB9XG4gICAgICAgIHBheWxvYWQudmFsdWUgPSBfb3V0O1xuICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICB9O1xufSk7XG5mdW5jdGlvbiBoYW5kbGVPcHRpb25hbFJlc3VsdChyZXN1bHQsIGlucHV0KSB7XG4gICAgaWYgKHJlc3VsdC5pc3N1ZXMubGVuZ3RoICYmIGlucHV0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHsgaXNzdWVzOiBbXSwgdmFsdWU6IHVuZGVmaW5lZCB9O1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZXhwb3J0IGNvbnN0ICRab2RPcHRpb25hbCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kT3B0aW9uYWxcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2Qub3B0aW4gPSBcIm9wdGlvbmFsXCI7XG4gICAgaW5zdC5fem9kLm9wdG91dCA9IFwib3B0aW9uYWxcIjtcbiAgICB1dGlsLmRlZmluZUxhenkoaW5zdC5fem9kLCBcInZhbHVlc1wiLCAoKSA9PiB7XG4gICAgICAgIHJldHVybiBkZWYuaW5uZXJUeXBlLl96b2QudmFsdWVzID8gbmV3IFNldChbLi4uZGVmLmlubmVyVHlwZS5fem9kLnZhbHVlcywgdW5kZWZpbmVkXSkgOiB1bmRlZmluZWQ7XG4gICAgfSk7XG4gICAgdXRpbC5kZWZpbmVMYXp5KGluc3QuX3pvZCwgXCJwYXR0ZXJuXCIsICgpID0+IHtcbiAgICAgICAgY29uc3QgcGF0dGVybiA9IGRlZi5pbm5lclR5cGUuX3pvZC5wYXR0ZXJuO1xuICAgICAgICByZXR1cm4gcGF0dGVybiA/IG5ldyBSZWdFeHAoYF4oJHt1dGlsLmNsZWFuUmVnZXgocGF0dGVybi5zb3VyY2UpfSk/JGApIDogdW5kZWZpbmVkO1xuICAgIH0pO1xuICAgIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBjdHgpID0+IHtcbiAgICAgICAgaWYgKGRlZi5pbm5lclR5cGUuX3pvZC5vcHRpbiA9PT0gXCJvcHRpb25hbFwiKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBkZWYuaW5uZXJUeXBlLl96b2QucnVuKHBheWxvYWQsIGN0eCk7XG4gICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0LnRoZW4oKHIpID0+IGhhbmRsZU9wdGlvbmFsUmVzdWx0KHIsIHBheWxvYWQudmFsdWUpKTtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVPcHRpb25hbFJlc3VsdChyZXN1bHQsIHBheWxvYWQudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXlsb2FkLnZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWYuaW5uZXJUeXBlLl96b2QucnVuKHBheWxvYWQsIGN0eCk7XG4gICAgfTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2ROdWxsYWJsZSA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kTnVsbGFibGVcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICB1dGlsLmRlZmluZUxhenkoaW5zdC5fem9kLCBcIm9wdGluXCIsICgpID0+IGRlZi5pbm5lclR5cGUuX3pvZC5vcHRpbik7XG4gICAgdXRpbC5kZWZpbmVMYXp5KGluc3QuX3pvZCwgXCJvcHRvdXRcIiwgKCkgPT4gZGVmLmlubmVyVHlwZS5fem9kLm9wdG91dCk7XG4gICAgdXRpbC5kZWZpbmVMYXp5KGluc3QuX3pvZCwgXCJwYXR0ZXJuXCIsICgpID0+IHtcbiAgICAgICAgY29uc3QgcGF0dGVybiA9IGRlZi5pbm5lclR5cGUuX3pvZC5wYXR0ZXJuO1xuICAgICAgICByZXR1cm4gcGF0dGVybiA/IG5ldyBSZWdFeHAoYF4oJHt1dGlsLmNsZWFuUmVnZXgocGF0dGVybi5zb3VyY2UpfXxudWxsKSRgKSA6IHVuZGVmaW5lZDtcbiAgICB9KTtcbiAgICB1dGlsLmRlZmluZUxhenkoaW5zdC5fem9kLCBcInZhbHVlc1wiLCAoKSA9PiB7XG4gICAgICAgIHJldHVybiBkZWYuaW5uZXJUeXBlLl96b2QudmFsdWVzID8gbmV3IFNldChbLi4uZGVmLmlubmVyVHlwZS5fem9kLnZhbHVlcywgbnVsbF0pIDogdW5kZWZpbmVkO1xuICAgIH0pO1xuICAgIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBjdHgpID0+IHtcbiAgICAgICAgLy8gRm9yd2FyZCBkaXJlY3Rpb24gKGRlY29kZSk6IGFsbG93IG51bGwgdG8gcGFzcyB0aHJvdWdoXG4gICAgICAgIGlmIChwYXlsb2FkLnZhbHVlID09PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgICAgIHJldHVybiBkZWYuaW5uZXJUeXBlLl96b2QucnVuKHBheWxvYWQsIGN0eCk7XG4gICAgfTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2REZWZhdWx0ID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2REZWZhdWx0XCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAkWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgLy8gaW5zdC5fem9kLnFpbiA9IFwidHJ1ZVwiO1xuICAgIGluc3QuX3pvZC5vcHRpbiA9IFwib3B0aW9uYWxcIjtcbiAgICB1dGlsLmRlZmluZUxhenkoaW5zdC5fem9kLCBcInZhbHVlc1wiLCAoKSA9PiBkZWYuaW5uZXJUeXBlLl96b2QudmFsdWVzKTtcbiAgICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgY3R4KSA9PiB7XG4gICAgICAgIGlmIChjdHguZGlyZWN0aW9uID09PSBcImJhY2t3YXJkXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBkZWYuaW5uZXJUeXBlLl96b2QucnVuKHBheWxvYWQsIGN0eCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRm9yd2FyZCBkaXJlY3Rpb24gKGRlY29kZSk6IGFwcGx5IGRlZmF1bHRzIGZvciB1bmRlZmluZWQgaW5wdXRcbiAgICAgICAgaWYgKHBheWxvYWQudmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcGF5bG9hZC52YWx1ZSA9IGRlZi5kZWZhdWx0VmFsdWU7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqICRab2REZWZhdWx0IHJldHVybnMgdGhlIGRlZmF1bHQgdmFsdWUgaW1tZWRpYXRlbHkgaW4gZm9yd2FyZCBkaXJlY3Rpb24uXG4gICAgICAgICAgICAgKiBJdCBkb2Vzbid0IHBhc3MgdGhlIGRlZmF1bHQgdmFsdWUgaW50byB0aGUgdmFsaWRhdG9yIChcInByZWZhdWx0XCIpLiBUaGVyZSdzIG5vIHJlYXNvbiB0byBwYXNzIHRoZSBkZWZhdWx0IHZhbHVlIHRocm91Z2ggdmFsaWRhdGlvbi4gVGhlIHZhbGlkaXR5IG9mIHRoZSBkZWZhdWx0IGlzIGVuZm9yY2VkIGJ5IFR5cGVTY3JpcHQgc3RhdGljYWxseS4gT3RoZXJ3aXNlLCBpdCdzIHRoZSByZXNwb25zaWJpbGl0eSBvZiB0aGUgdXNlciB0byBlbnN1cmUgdGhlIGRlZmF1bHQgaXMgdmFsaWQuIEluIHRoZSBjYXNlIG9mIHBpcGVzIHdpdGggZGl2ZXJnZW50IGluL291dCB0eXBlcywgeW91IGNhbiBzcGVjaWZ5IHRoZSBkZWZhdWx0IG9uIHRoZSBgaW5gIHNjaGVtYSBvZiB5b3VyIFpvZFBpcGUgdG8gc2V0IGEgXCJwcmVmYXVsdFwiIGZvciB0aGUgcGlwZS4gICAqL1xuICAgICAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRm9yd2FyZCBkaXJlY3Rpb246IGNvbnRpbnVlIHdpdGggZGVmYXVsdCBoYW5kbGluZ1xuICAgICAgICBjb25zdCByZXN1bHQgPSBkZWYuaW5uZXJUeXBlLl96b2QucnVuKHBheWxvYWQsIGN0eCk7XG4gICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LnRoZW4oKHJlc3VsdCkgPT4gaGFuZGxlRGVmYXVsdFJlc3VsdChyZXN1bHQsIGRlZikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBoYW5kbGVEZWZhdWx0UmVzdWx0KHJlc3VsdCwgZGVmKTtcbiAgICB9O1xufSk7XG5mdW5jdGlvbiBoYW5kbGVEZWZhdWx0UmVzdWx0KHBheWxvYWQsIGRlZikge1xuICAgIGlmIChwYXlsb2FkLnZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcGF5bG9hZC52YWx1ZSA9IGRlZi5kZWZhdWx0VmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBwYXlsb2FkO1xufVxuZXhwb3J0IGNvbnN0ICRab2RQcmVmYXVsdCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kUHJlZmF1bHRcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2Qub3B0aW4gPSBcIm9wdGlvbmFsXCI7XG4gICAgdXRpbC5kZWZpbmVMYXp5KGluc3QuX3pvZCwgXCJ2YWx1ZXNcIiwgKCkgPT4gZGVmLmlubmVyVHlwZS5fem9kLnZhbHVlcyk7XG4gICAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQsIGN0eCkgPT4ge1xuICAgICAgICBpZiAoY3R4LmRpcmVjdGlvbiA9PT0gXCJiYWNrd2FyZFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gZGVmLmlubmVyVHlwZS5fem9kLnJ1bihwYXlsb2FkLCBjdHgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEZvcndhcmQgZGlyZWN0aW9uIChkZWNvZGUpOiBhcHBseSBwcmVmYXVsdCBmb3IgdW5kZWZpbmVkIGlucHV0XG4gICAgICAgIGlmIChwYXlsb2FkLnZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHBheWxvYWQudmFsdWUgPSBkZWYuZGVmYXVsdFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWYuaW5uZXJUeXBlLl96b2QucnVuKHBheWxvYWQsIGN0eCk7XG4gICAgfTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2ROb25PcHRpb25hbCA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kTm9uT3B0aW9uYWxcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICB1dGlsLmRlZmluZUxhenkoaW5zdC5fem9kLCBcInZhbHVlc1wiLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHYgPSBkZWYuaW5uZXJUeXBlLl96b2QudmFsdWVzO1xuICAgICAgICByZXR1cm4gdiA/IG5ldyBTZXQoWy4uLnZdLmZpbHRlcigoeCkgPT4geCAhPT0gdW5kZWZpbmVkKSkgOiB1bmRlZmluZWQ7XG4gICAgfSk7XG4gICAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQsIGN0eCkgPT4ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBkZWYuaW5uZXJUeXBlLl96b2QucnVuKHBheWxvYWQsIGN0eCk7XG4gICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LnRoZW4oKHJlc3VsdCkgPT4gaGFuZGxlTm9uT3B0aW9uYWxSZXN1bHQocmVzdWx0LCBpbnN0KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGhhbmRsZU5vbk9wdGlvbmFsUmVzdWx0KHJlc3VsdCwgaW5zdCk7XG4gICAgfTtcbn0pO1xuZnVuY3Rpb24gaGFuZGxlTm9uT3B0aW9uYWxSZXN1bHQocGF5bG9hZCwgaW5zdCkge1xuICAgIGlmICghcGF5bG9hZC5pc3N1ZXMubGVuZ3RoICYmIHBheWxvYWQudmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgIGNvZGU6IFwiaW52YWxpZF90eXBlXCIsXG4gICAgICAgICAgICBleHBlY3RlZDogXCJub25vcHRpb25hbFwiLFxuICAgICAgICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsXG4gICAgICAgICAgICBpbnN0LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHBheWxvYWQ7XG59XG5leHBvcnQgY29uc3QgJFpvZFN1Y2Nlc3MgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZFN1Y2Nlc3NcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgY3R4KSA9PiB7XG4gICAgICAgIGlmIChjdHguZGlyZWN0aW9uID09PSBcImJhY2t3YXJkXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBjb3JlLiRab2RFbmNvZGVFcnJvcihcIlpvZFN1Y2Nlc3NcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gZGVmLmlubmVyVHlwZS5fem9kLnJ1bihwYXlsb2FkLCBjdHgpO1xuICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICBwYXlsb2FkLnZhbHVlID0gcmVzdWx0Lmlzc3Vlcy5sZW5ndGggPT09IDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBwYXlsb2FkLnZhbHVlID0gcmVzdWx0Lmlzc3Vlcy5sZW5ndGggPT09IDA7XG4gICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgIH07XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kQ2F0Y2ggPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZENhdGNoXCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAkWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgdXRpbC5kZWZpbmVMYXp5KGluc3QuX3pvZCwgXCJvcHRpblwiLCAoKSA9PiBkZWYuaW5uZXJUeXBlLl96b2Qub3B0aW4pO1xuICAgIHV0aWwuZGVmaW5lTGF6eShpbnN0Ll96b2QsIFwib3B0b3V0XCIsICgpID0+IGRlZi5pbm5lclR5cGUuX3pvZC5vcHRvdXQpO1xuICAgIHV0aWwuZGVmaW5lTGF6eShpbnN0Ll96b2QsIFwidmFsdWVzXCIsICgpID0+IGRlZi5pbm5lclR5cGUuX3pvZC52YWx1ZXMpO1xuICAgIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBjdHgpID0+IHtcbiAgICAgICAgaWYgKGN0eC5kaXJlY3Rpb24gPT09IFwiYmFja3dhcmRcIikge1xuICAgICAgICAgICAgcmV0dXJuIGRlZi5pbm5lclR5cGUuX3pvZC5ydW4ocGF5bG9hZCwgY3R4KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBGb3J3YXJkIGRpcmVjdGlvbiAoZGVjb2RlKTogYXBwbHkgY2F0Y2ggbG9naWNcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gZGVmLmlubmVyVHlwZS5fem9kLnJ1bihwYXlsb2FkLCBjdHgpO1xuICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICBwYXlsb2FkLnZhbHVlID0gcmVzdWx0LnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuaXNzdWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBwYXlsb2FkLnZhbHVlID0gZGVmLmNhdGNoVmFsdWUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4ucGF5bG9hZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVzOiByZXN1bHQuaXNzdWVzLm1hcCgoaXNzKSA9PiB1dGlsLmZpbmFsaXplSXNzdWUoaXNzLCBjdHgsIGNvcmUuY29uZmlnKCkpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogcGF5bG9hZC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQuaXNzdWVzID0gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcGF5bG9hZC52YWx1ZSA9IHJlc3VsdC52YWx1ZTtcbiAgICAgICAgaWYgKHJlc3VsdC5pc3N1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBwYXlsb2FkLnZhbHVlID0gZGVmLmNhdGNoVmFsdWUoe1xuICAgICAgICAgICAgICAgIC4uLnBheWxvYWQsXG4gICAgICAgICAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgICAgICAgICAgaXNzdWVzOiByZXN1bHQuaXNzdWVzLm1hcCgoaXNzKSA9PiB1dGlsLmZpbmFsaXplSXNzdWUoaXNzLCBjdHgsIGNvcmUuY29uZmlnKCkpKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGlucHV0OiBwYXlsb2FkLnZhbHVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBwYXlsb2FkLmlzc3VlcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgIH07XG59KTtcbmV4cG9ydCBjb25zdCAkWm9kTmFOID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2ROYU5cIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgX2N0eCkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIHBheWxvYWQudmFsdWUgIT09IFwibnVtYmVyXCIgfHwgIU51bWJlci5pc05hTihwYXlsb2FkLnZhbHVlKSkge1xuICAgICAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsXG4gICAgICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogXCJuYW5cIixcbiAgICAgICAgICAgICAgICBjb2RlOiBcImludmFsaWRfdHlwZVwiLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICB9O1xufSk7XG5leHBvcnQgY29uc3QgJFpvZFBpcGUgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZFBpcGVcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICB1dGlsLmRlZmluZUxhenkoaW5zdC5fem9kLCBcInZhbHVlc1wiLCAoKSA9PiBkZWYuaW4uX3pvZC52YWx1ZXMpO1xuICAgIHV0aWwuZGVmaW5lTGF6eShpbnN0Ll96b2QsIFwib3B0aW5cIiwgKCkgPT4gZGVmLmluLl96b2Qub3B0aW4pO1xuICAgIHV0aWwuZGVmaW5lTGF6eShpbnN0Ll96b2QsIFwib3B0b3V0XCIsICgpID0+IGRlZi5vdXQuX3pvZC5vcHRvdXQpO1xuICAgIHV0aWwuZGVmaW5lTGF6eShpbnN0Ll96b2QsIFwicHJvcFZhbHVlc1wiLCAoKSA9PiBkZWYuaW4uX3pvZC5wcm9wVmFsdWVzKTtcbiAgICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgY3R4KSA9PiB7XG4gICAgICAgIGlmIChjdHguZGlyZWN0aW9uID09PSBcImJhY2t3YXJkXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHJpZ2h0ID0gZGVmLm91dC5fem9kLnJ1bihwYXlsb2FkLCBjdHgpO1xuICAgICAgICAgICAgaWYgKHJpZ2h0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByaWdodC50aGVuKChyaWdodCkgPT4gaGFuZGxlUGlwZVJlc3VsdChyaWdodCwgZGVmLmluLCBjdHgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVQaXBlUmVzdWx0KHJpZ2h0LCBkZWYuaW4sIGN0eCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGVmdCA9IGRlZi5pbi5fem9kLnJ1bihwYXlsb2FkLCBjdHgpO1xuICAgICAgICBpZiAobGVmdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBsZWZ0LnRoZW4oKGxlZnQpID0+IGhhbmRsZVBpcGVSZXN1bHQobGVmdCwgZGVmLm91dCwgY3R4KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGhhbmRsZVBpcGVSZXN1bHQobGVmdCwgZGVmLm91dCwgY3R4KTtcbiAgICB9O1xufSk7XG5mdW5jdGlvbiBoYW5kbGVQaXBlUmVzdWx0KGxlZnQsIG5leHQsIGN0eCkge1xuICAgIGlmIChsZWZ0Lmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgLy8gcHJldmVudCBmdXJ0aGVyIGNoZWNrc1xuICAgICAgICBsZWZ0LmFib3J0ZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm4gbGVmdDtcbiAgICB9XG4gICAgcmV0dXJuIG5leHQuX3pvZC5ydW4oeyB2YWx1ZTogbGVmdC52YWx1ZSwgaXNzdWVzOiBsZWZ0Lmlzc3VlcyB9LCBjdHgpO1xufVxuZXhwb3J0IGNvbnN0ICRab2RDb2RlYyA9IC8qQF9fUFVSRV9fKi8gY29yZS4kY29uc3RydWN0b3IoXCIkWm9kQ29kZWNcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICB1dGlsLmRlZmluZUxhenkoaW5zdC5fem9kLCBcInZhbHVlc1wiLCAoKSA9PiBkZWYuaW4uX3pvZC52YWx1ZXMpO1xuICAgIHV0aWwuZGVmaW5lTGF6eShpbnN0Ll96b2QsIFwib3B0aW5cIiwgKCkgPT4gZGVmLmluLl96b2Qub3B0aW4pO1xuICAgIHV0aWwuZGVmaW5lTGF6eShpbnN0Ll96b2QsIFwib3B0b3V0XCIsICgpID0+IGRlZi5vdXQuX3pvZC5vcHRvdXQpO1xuICAgIHV0aWwuZGVmaW5lTGF6eShpbnN0Ll96b2QsIFwicHJvcFZhbHVlc1wiLCAoKSA9PiBkZWYuaW4uX3pvZC5wcm9wVmFsdWVzKTtcbiAgICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgY3R4KSA9PiB7XG4gICAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IGN0eC5kaXJlY3Rpb24gfHwgXCJmb3J3YXJkXCI7XG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09IFwiZm9yd2FyZFwiKSB7XG4gICAgICAgICAgICBjb25zdCBsZWZ0ID0gZGVmLmluLl96b2QucnVuKHBheWxvYWQsIGN0eCk7XG4gICAgICAgICAgICBpZiAobGVmdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbGVmdC50aGVuKChsZWZ0KSA9PiBoYW5kbGVDb2RlY0FSZXN1bHQobGVmdCwgZGVmLCBjdHgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVDb2RlY0FSZXN1bHQobGVmdCwgZGVmLCBjdHgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgcmlnaHQgPSBkZWYub3V0Ll96b2QucnVuKHBheWxvYWQsIGN0eCk7XG4gICAgICAgICAgICBpZiAocmlnaHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJpZ2h0LnRoZW4oKHJpZ2h0KSA9PiBoYW5kbGVDb2RlY0FSZXN1bHQocmlnaHQsIGRlZiwgY3R4KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlQ29kZWNBUmVzdWx0KHJpZ2h0LCBkZWYsIGN0eCk7XG4gICAgICAgIH1cbiAgICB9O1xufSk7XG5mdW5jdGlvbiBoYW5kbGVDb2RlY0FSZXN1bHQocmVzdWx0LCBkZWYsIGN0eCkge1xuICAgIGlmIChyZXN1bHQuaXNzdWVzLmxlbmd0aCkge1xuICAgICAgICAvLyBwcmV2ZW50IGZ1cnRoZXIgY2hlY2tzXG4gICAgICAgIHJlc3VsdC5hYm9ydGVkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgY29uc3QgZGlyZWN0aW9uID0gY3R4LmRpcmVjdGlvbiB8fCBcImZvcndhcmRcIjtcbiAgICBpZiAoZGlyZWN0aW9uID09PSBcImZvcndhcmRcIikge1xuICAgICAgICBjb25zdCB0cmFuc2Zvcm1lZCA9IGRlZi50cmFuc2Zvcm0ocmVzdWx0LnZhbHVlLCByZXN1bHQpO1xuICAgICAgICBpZiAodHJhbnNmb3JtZWQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJhbnNmb3JtZWQudGhlbigodmFsdWUpID0+IGhhbmRsZUNvZGVjVHhSZXN1bHQocmVzdWx0LCB2YWx1ZSwgZGVmLm91dCwgY3R4KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGhhbmRsZUNvZGVjVHhSZXN1bHQocmVzdWx0LCB0cmFuc2Zvcm1lZCwgZGVmLm91dCwgY3R4KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybWVkID0gZGVmLnJldmVyc2VUcmFuc2Zvcm0ocmVzdWx0LnZhbHVlLCByZXN1bHQpO1xuICAgICAgICBpZiAodHJhbnNmb3JtZWQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJhbnNmb3JtZWQudGhlbigodmFsdWUpID0+IGhhbmRsZUNvZGVjVHhSZXN1bHQocmVzdWx0LCB2YWx1ZSwgZGVmLmluLCBjdHgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGFuZGxlQ29kZWNUeFJlc3VsdChyZXN1bHQsIHRyYW5zZm9ybWVkLCBkZWYuaW4sIGN0eCk7XG4gICAgfVxufVxuZnVuY3Rpb24gaGFuZGxlQ29kZWNUeFJlc3VsdChsZWZ0LCB2YWx1ZSwgbmV4dFNjaGVtYSwgY3R4KSB7XG4gICAgLy8gQ2hlY2sgaWYgdHJhbnNmb3JtIGFkZGVkIGFueSBpc3N1ZXNcbiAgICBpZiAobGVmdC5pc3N1ZXMubGVuZ3RoKSB7XG4gICAgICAgIGxlZnQuYWJvcnRlZCA9IHRydWU7XG4gICAgICAgIHJldHVybiBsZWZ0O1xuICAgIH1cbiAgICByZXR1cm4gbmV4dFNjaGVtYS5fem9kLnJ1bih7IHZhbHVlLCBpc3N1ZXM6IGxlZnQuaXNzdWVzIH0sIGN0eCk7XG59XG5leHBvcnQgY29uc3QgJFpvZFJlYWRvbmx5ID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RSZWFkb25seVwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIHV0aWwuZGVmaW5lTGF6eShpbnN0Ll96b2QsIFwicHJvcFZhbHVlc1wiLCAoKSA9PiBkZWYuaW5uZXJUeXBlLl96b2QucHJvcFZhbHVlcyk7XG4gICAgdXRpbC5kZWZpbmVMYXp5KGluc3QuX3pvZCwgXCJ2YWx1ZXNcIiwgKCkgPT4gZGVmLmlubmVyVHlwZS5fem9kLnZhbHVlcyk7XG4gICAgdXRpbC5kZWZpbmVMYXp5KGluc3QuX3pvZCwgXCJvcHRpblwiLCAoKSA9PiBkZWYuaW5uZXJUeXBlLl96b2Qub3B0aW4pO1xuICAgIHV0aWwuZGVmaW5lTGF6eShpbnN0Ll96b2QsIFwib3B0b3V0XCIsICgpID0+IGRlZi5pbm5lclR5cGUuX3pvZC5vcHRvdXQpO1xuICAgIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBjdHgpID0+IHtcbiAgICAgICAgaWYgKGN0eC5kaXJlY3Rpb24gPT09IFwiYmFja3dhcmRcIikge1xuICAgICAgICAgICAgcmV0dXJuIGRlZi5pbm5lclR5cGUuX3pvZC5ydW4ocGF5bG9hZCwgY3R4KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSBkZWYuaW5uZXJUeXBlLl96b2QucnVuKHBheWxvYWQsIGN0eCk7XG4gICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LnRoZW4oaGFuZGxlUmVhZG9ubHlSZXN1bHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBoYW5kbGVSZWFkb25seVJlc3VsdChyZXN1bHQpO1xuICAgIH07XG59KTtcbmZ1bmN0aW9uIGhhbmRsZVJlYWRvbmx5UmVzdWx0KHBheWxvYWQpIHtcbiAgICBwYXlsb2FkLnZhbHVlID0gT2JqZWN0LmZyZWV6ZShwYXlsb2FkLnZhbHVlKTtcbiAgICByZXR1cm4gcGF5bG9hZDtcbn1cbmV4cG9ydCBjb25zdCAkWm9kVGVtcGxhdGVMaXRlcmFsID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RUZW1wbGF0ZUxpdGVyYWxcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBjb25zdCByZWdleFBhcnRzID0gW107XG4gICAgZm9yIChjb25zdCBwYXJ0IG9mIGRlZi5wYXJ0cykge1xuICAgICAgICBpZiAodHlwZW9mIHBhcnQgPT09IFwib2JqZWN0XCIgJiYgcGFydCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gaXMgWm9kIHNjaGVtYVxuICAgICAgICAgICAgaWYgKCFwYXJ0Ll96b2QucGF0dGVybikge1xuICAgICAgICAgICAgICAgIC8vIGlmICghc291cmNlKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCB0ZW1wbGF0ZSBsaXRlcmFsIHBhcnQsIG5vIHBhdHRlcm4gZm91bmQ6ICR7Wy4uLnBhcnQuX3pvZC50cmFpdHNdLnNoaWZ0KCl9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzb3VyY2UgPSBwYXJ0Ll96b2QucGF0dGVybiBpbnN0YW5jZW9mIFJlZ0V4cCA/IHBhcnQuX3pvZC5wYXR0ZXJuLnNvdXJjZSA6IHBhcnQuX3pvZC5wYXR0ZXJuO1xuICAgICAgICAgICAgaWYgKCFzb3VyY2UpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHRlbXBsYXRlIGxpdGVyYWwgcGFydDogJHtwYXJ0Ll96b2QudHJhaXRzfWApO1xuICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBzb3VyY2Uuc3RhcnRzV2l0aChcIl5cIikgPyAxIDogMDtcbiAgICAgICAgICAgIGNvbnN0IGVuZCA9IHNvdXJjZS5lbmRzV2l0aChcIiRcIikgPyBzb3VyY2UubGVuZ3RoIC0gMSA6IHNvdXJjZS5sZW5ndGg7XG4gICAgICAgICAgICByZWdleFBhcnRzLnB1c2goc291cmNlLnNsaWNlKHN0YXJ0LCBlbmQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwYXJ0ID09PSBudWxsIHx8IHV0aWwucHJpbWl0aXZlVHlwZXMuaGFzKHR5cGVvZiBwYXJ0KSkge1xuICAgICAgICAgICAgcmVnZXhQYXJ0cy5wdXNoKHV0aWwuZXNjYXBlUmVnZXgoYCR7cGFydH1gKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgdGVtcGxhdGUgbGl0ZXJhbCBwYXJ0OiAke3BhcnR9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW5zdC5fem9kLnBhdHRlcm4gPSBuZXcgUmVnRXhwKGBeJHtyZWdleFBhcnRzLmpvaW4oXCJcIil9JGApO1xuICAgIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBfY3R4KSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgcGF5bG9hZC52YWx1ZSAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsXG4gICAgICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogXCJ0ZW1wbGF0ZV9saXRlcmFsXCIsXG4gICAgICAgICAgICAgICAgY29kZTogXCJpbnZhbGlkX3R5cGVcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgICAgIH1cbiAgICAgICAgaW5zdC5fem9kLnBhdHRlcm4ubGFzdEluZGV4ID0gMDtcbiAgICAgICAgaWYgKCFpbnN0Ll96b2QucGF0dGVybi50ZXN0KHBheWxvYWQudmFsdWUpKSB7XG4gICAgICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBpbnB1dDogcGF5bG9hZC52YWx1ZSxcbiAgICAgICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgICAgIGNvZGU6IFwiaW52YWxpZF9mb3JtYXRcIixcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IGRlZi5mb3JtYXQgPz8gXCJ0ZW1wbGF0ZV9saXRlcmFsXCIsXG4gICAgICAgICAgICAgICAgcGF0dGVybjogaW5zdC5fem9kLnBhdHRlcm4uc291cmNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICB9O1xufSk7XG5leHBvcnQgY29uc3QgJFpvZEZ1bmN0aW9uID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RGdW5jdGlvblwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX2RlZiA9IGRlZjtcbiAgICBpbnN0Ll96b2QuZGVmID0gZGVmO1xuICAgIGluc3QuaW1wbGVtZW50ID0gKGZ1bmMpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiBmdW5jICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImltcGxlbWVudCgpIG11c3QgYmUgY2FsbGVkIHdpdGggYSBmdW5jdGlvblwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZEFyZ3MgPSBpbnN0Ll9kZWYuaW5wdXQgPyBwYXJzZShpbnN0Ll9kZWYuaW5wdXQsIGFyZ3MpIDogYXJncztcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IFJlZmxlY3QuYXBwbHkoZnVuYywgdGhpcywgcGFyc2VkQXJncyk7XG4gICAgICAgICAgICBpZiAoaW5zdC5fZGVmLm91dHB1dCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZShpbnN0Ll9kZWYub3V0cHV0LCByZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGluc3QuaW1wbGVtZW50QXN5bmMgPSAoZnVuYykgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIGZ1bmMgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaW1wbGVtZW50QXN5bmMoKSBtdXN0IGJlIGNhbGxlZCB3aXRoIGEgZnVuY3Rpb25cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFzeW5jIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWRBcmdzID0gaW5zdC5fZGVmLmlucHV0ID8gYXdhaXQgcGFyc2VBc3luYyhpbnN0Ll9kZWYuaW5wdXQsIGFyZ3MpIDogYXJncztcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFJlZmxlY3QuYXBwbHkoZnVuYywgdGhpcywgcGFyc2VkQXJncyk7XG4gICAgICAgICAgICBpZiAoaW5zdC5fZGVmLm91dHB1dCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBwYXJzZUFzeW5jKGluc3QuX2RlZi5vdXRwdXQsIHJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgIH07XG4gICAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQsIF9jdHgpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiBwYXlsb2FkLnZhbHVlICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goe1xuICAgICAgICAgICAgICAgIGNvZGU6IFwiaW52YWxpZF90eXBlXCIsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFwiZnVuY3Rpb25cIixcbiAgICAgICAgICAgICAgICBpbnB1dDogcGF5bG9hZC52YWx1ZSxcbiAgICAgICAgICAgICAgICBpbnN0LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICAgICAgfVxuICAgICAgICAvLyBDaGVjayBpZiBvdXRwdXQgaXMgYSBwcm9taXNlIHR5cGUgdG8gZGV0ZXJtaW5lIGlmIHdlIHNob3VsZCB1c2UgYXN5bmMgaW1wbGVtZW50YXRpb25cbiAgICAgICAgY29uc3QgaGFzUHJvbWlzZU91dHB1dCA9IGluc3QuX2RlZi5vdXRwdXQgJiYgaW5zdC5fZGVmLm91dHB1dC5fem9kLmRlZi50eXBlID09PSBcInByb21pc2VcIjtcbiAgICAgICAgaWYgKGhhc1Byb21pc2VPdXRwdXQpIHtcbiAgICAgICAgICAgIHBheWxvYWQudmFsdWUgPSBpbnN0LmltcGxlbWVudEFzeW5jKHBheWxvYWQudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGF5bG9hZC52YWx1ZSA9IGluc3QuaW1wbGVtZW50KHBheWxvYWQudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgIH07XG4gICAgaW5zdC5pbnB1dCA9ICguLi5hcmdzKSA9PiB7XG4gICAgICAgIGNvbnN0IEYgPSBpbnN0LmNvbnN0cnVjdG9yO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcmdzWzBdKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBGKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcImZ1bmN0aW9uXCIsXG4gICAgICAgICAgICAgICAgaW5wdXQ6IG5ldyAkWm9kVHVwbGUoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInR1cGxlXCIsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zOiBhcmdzWzBdLFxuICAgICAgICAgICAgICAgICAgICByZXN0OiBhcmdzWzFdLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG91dHB1dDogaW5zdC5fZGVmLm91dHB1dCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgRih7XG4gICAgICAgICAgICB0eXBlOiBcImZ1bmN0aW9uXCIsXG4gICAgICAgICAgICBpbnB1dDogYXJnc1swXSxcbiAgICAgICAgICAgIG91dHB1dDogaW5zdC5fZGVmLm91dHB1dCxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBpbnN0Lm91dHB1dCA9IChvdXRwdXQpID0+IHtcbiAgICAgICAgY29uc3QgRiA9IGluc3QuY29uc3RydWN0b3I7XG4gICAgICAgIHJldHVybiBuZXcgRih7XG4gICAgICAgICAgICB0eXBlOiBcImZ1bmN0aW9uXCIsXG4gICAgICAgICAgICBpbnB1dDogaW5zdC5fZGVmLmlucHV0LFxuICAgICAgICAgICAgb3V0cHV0LFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBpbnN0O1xufSk7XG5leHBvcnQgY29uc3QgJFpvZFByb21pc2UgPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZFByb21pc2VcIiwgKGluc3QsIGRlZikgPT4ge1xuICAgICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTtcbiAgICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgY3R4KSA9PiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocGF5bG9hZC52YWx1ZSkudGhlbigoaW5uZXIpID0+IGRlZi5pbm5lclR5cGUuX3pvZC5ydW4oeyB2YWx1ZTogaW5uZXIsIGlzc3VlczogW10gfSwgY3R4KSk7XG4gICAgfTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RMYXp5ID0gLypAX19QVVJFX18qLyBjb3JlLiRjb25zdHJ1Y3RvcihcIiRab2RMYXp5XCIsIChpbnN0LCBkZWYpID0+IHtcbiAgICAkWm9kVHlwZS5pbml0KGluc3QsIGRlZik7XG4gICAgLy8gbGV0IF9pbm5lclR5cGUhOiBhbnk7XG4gICAgLy8gdXRpbC5kZWZpbmVMYXp5KGRlZiwgXCJnZXR0ZXJcIiwgKCkgPT4ge1xuICAgIC8vICAgaWYgKCFfaW5uZXJUeXBlKSB7XG4gICAgLy8gICAgIF9pbm5lclR5cGUgPSBkZWYuZ2V0dGVyKCk7XG4gICAgLy8gICB9XG4gICAgLy8gICByZXR1cm4gKCkgPT4gX2lubmVyVHlwZTtcbiAgICAvLyB9KTtcbiAgICB1dGlsLmRlZmluZUxhenkoaW5zdC5fem9kLCBcImlubmVyVHlwZVwiLCAoKSA9PiBkZWYuZ2V0dGVyKCkpO1xuICAgIHV0aWwuZGVmaW5lTGF6eShpbnN0Ll96b2QsIFwicGF0dGVyblwiLCAoKSA9PiBpbnN0Ll96b2QuaW5uZXJUeXBlLl96b2QucGF0dGVybik7XG4gICAgdXRpbC5kZWZpbmVMYXp5KGluc3QuX3pvZCwgXCJwcm9wVmFsdWVzXCIsICgpID0+IGluc3QuX3pvZC5pbm5lclR5cGUuX3pvZC5wcm9wVmFsdWVzKTtcbiAgICB1dGlsLmRlZmluZUxhenkoaW5zdC5fem9kLCBcIm9wdGluXCIsICgpID0+IGluc3QuX3pvZC5pbm5lclR5cGUuX3pvZC5vcHRpbiA/PyB1bmRlZmluZWQpO1xuICAgIHV0aWwuZGVmaW5lTGF6eShpbnN0Ll96b2QsIFwib3B0b3V0XCIsICgpID0+IGluc3QuX3pvZC5pbm5lclR5cGUuX3pvZC5vcHRvdXQgPz8gdW5kZWZpbmVkKTtcbiAgICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgY3R4KSA9PiB7XG4gICAgICAgIGNvbnN0IGlubmVyID0gaW5zdC5fem9kLmlubmVyVHlwZTtcbiAgICAgICAgcmV0dXJuIGlubmVyLl96b2QucnVuKHBheWxvYWQsIGN0eCk7XG4gICAgfTtcbn0pO1xuZXhwb3J0IGNvbnN0ICRab2RDdXN0b20gPSAvKkBfX1BVUkVfXyovIGNvcmUuJGNvbnN0cnVjdG9yKFwiJFpvZEN1c3RvbVwiLCAoaW5zdCwgZGVmKSA9PiB7XG4gICAgY2hlY2tzLiRab2RDaGVjay5pbml0KGluc3QsIGRlZik7XG4gICAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpO1xuICAgIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBfKSA9PiB7XG4gICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgIH07XG4gICAgaW5zdC5fem9kLmNoZWNrID0gKHBheWxvYWQpID0+IHtcbiAgICAgICAgY29uc3QgaW5wdXQgPSBwYXlsb2FkLnZhbHVlO1xuICAgICAgICBjb25zdCByID0gZGVmLmZuKGlucHV0KTtcbiAgICAgICAgaWYgKHIgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICByZXR1cm4gci50aGVuKChyKSA9PiBoYW5kbGVSZWZpbmVSZXN1bHQociwgcGF5bG9hZCwgaW5wdXQsIGluc3QpKTtcbiAgICAgICAgfVxuICAgICAgICBoYW5kbGVSZWZpbmVSZXN1bHQociwgcGF5bG9hZCwgaW5wdXQsIGluc3QpO1xuICAgICAgICByZXR1cm47XG4gICAgfTtcbn0pO1xuZnVuY3Rpb24gaGFuZGxlUmVmaW5lUmVzdWx0KHJlc3VsdCwgcGF5bG9hZCwgaW5wdXQsIGluc3QpIHtcbiAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICBjb25zdCBfaXNzID0ge1xuICAgICAgICAgICAgY29kZTogXCJjdXN0b21cIixcbiAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgaW5zdCwgLy8gaW5jb3Jwb3JhdGVzIHBhcmFtcy5lcnJvciBpbnRvIGlzc3VlIHJlcG9ydGluZ1xuICAgICAgICAgICAgcGF0aDogWy4uLihpbnN0Ll96b2QuZGVmLnBhdGggPz8gW10pXSwgLy8gaW5jb3Jwb3JhdGVzIHBhcmFtcy5lcnJvciBpbnRvIGlzc3VlIHJlcG9ydGluZ1xuICAgICAgICAgICAgY29udGludWU6ICFpbnN0Ll96b2QuZGVmLmFib3J0LFxuICAgICAgICAgICAgLy8gcGFyYW1zOiBpbnN0Ll96b2QuZGVmLnBhcmFtcyxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGluc3QuX3pvZC5kZWYucGFyYW1zKVxuICAgICAgICAgICAgX2lzcy5wYXJhbXMgPSBpbnN0Ll96b2QuZGVmLnBhcmFtcztcbiAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh1dGlsLmlzc3VlKF9pc3MpKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/schemas.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/util.js":
/*!*******************************************************************!*\
  !*** ./node_modules/better-auth/node_modules/zod/v4/core/util.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BIGINT_FORMAT_RANGES: () => (/* binding */ BIGINT_FORMAT_RANGES),\n/* harmony export */   Class: () => (/* binding */ Class),\n/* harmony export */   NUMBER_FORMAT_RANGES: () => (/* binding */ NUMBER_FORMAT_RANGES),\n/* harmony export */   aborted: () => (/* binding */ aborted),\n/* harmony export */   allowsEval: () => (/* binding */ allowsEval),\n/* harmony export */   assert: () => (/* binding */ assert),\n/* harmony export */   assertEqual: () => (/* binding */ assertEqual),\n/* harmony export */   assertIs: () => (/* binding */ assertIs),\n/* harmony export */   assertNever: () => (/* binding */ assertNever),\n/* harmony export */   assertNotEqual: () => (/* binding */ assertNotEqual),\n/* harmony export */   assignProp: () => (/* binding */ assignProp),\n/* harmony export */   base64ToUint8Array: () => (/* binding */ base64ToUint8Array),\n/* harmony export */   base64urlToUint8Array: () => (/* binding */ base64urlToUint8Array),\n/* harmony export */   cached: () => (/* binding */ cached),\n/* harmony export */   captureStackTrace: () => (/* binding */ captureStackTrace),\n/* harmony export */   cleanEnum: () => (/* binding */ cleanEnum),\n/* harmony export */   cleanRegex: () => (/* binding */ cleanRegex),\n/* harmony export */   clone: () => (/* binding */ clone),\n/* harmony export */   cloneDef: () => (/* binding */ cloneDef),\n/* harmony export */   createTransparentProxy: () => (/* binding */ createTransparentProxy),\n/* harmony export */   defineLazy: () => (/* binding */ defineLazy),\n/* harmony export */   esc: () => (/* binding */ esc),\n/* harmony export */   escapeRegex: () => (/* binding */ escapeRegex),\n/* harmony export */   extend: () => (/* binding */ extend),\n/* harmony export */   finalizeIssue: () => (/* binding */ finalizeIssue),\n/* harmony export */   floatSafeRemainder: () => (/* binding */ floatSafeRemainder),\n/* harmony export */   getElementAtPath: () => (/* binding */ getElementAtPath),\n/* harmony export */   getEnumValues: () => (/* binding */ getEnumValues),\n/* harmony export */   getLengthableOrigin: () => (/* binding */ getLengthableOrigin),\n/* harmony export */   getParsedType: () => (/* binding */ getParsedType),\n/* harmony export */   getSizableOrigin: () => (/* binding */ getSizableOrigin),\n/* harmony export */   hexToUint8Array: () => (/* binding */ hexToUint8Array),\n/* harmony export */   isObject: () => (/* binding */ isObject),\n/* harmony export */   isPlainObject: () => (/* binding */ isPlainObject),\n/* harmony export */   issue: () => (/* binding */ issue),\n/* harmony export */   joinValues: () => (/* binding */ joinValues),\n/* harmony export */   jsonStringifyReplacer: () => (/* binding */ jsonStringifyReplacer),\n/* harmony export */   merge: () => (/* binding */ merge),\n/* harmony export */   mergeDefs: () => (/* binding */ mergeDefs),\n/* harmony export */   normalizeParams: () => (/* binding */ normalizeParams),\n/* harmony export */   nullish: () => (/* binding */ nullish),\n/* harmony export */   numKeys: () => (/* binding */ numKeys),\n/* harmony export */   objectClone: () => (/* binding */ objectClone),\n/* harmony export */   omit: () => (/* binding */ omit),\n/* harmony export */   optionalKeys: () => (/* binding */ optionalKeys),\n/* harmony export */   partial: () => (/* binding */ partial),\n/* harmony export */   pick: () => (/* binding */ pick),\n/* harmony export */   prefixIssues: () => (/* binding */ prefixIssues),\n/* harmony export */   primitiveTypes: () => (/* binding */ primitiveTypes),\n/* harmony export */   promiseAllObject: () => (/* binding */ promiseAllObject),\n/* harmony export */   propertyKeyTypes: () => (/* binding */ propertyKeyTypes),\n/* harmony export */   randomString: () => (/* binding */ randomString),\n/* harmony export */   required: () => (/* binding */ required),\n/* harmony export */   safeExtend: () => (/* binding */ safeExtend),\n/* harmony export */   shallowClone: () => (/* binding */ shallowClone),\n/* harmony export */   stringifyPrimitive: () => (/* binding */ stringifyPrimitive),\n/* harmony export */   uint8ArrayToBase64: () => (/* binding */ uint8ArrayToBase64),\n/* harmony export */   uint8ArrayToBase64url: () => (/* binding */ uint8ArrayToBase64url),\n/* harmony export */   uint8ArrayToHex: () => (/* binding */ uint8ArrayToHex),\n/* harmony export */   unwrapMessage: () => (/* binding */ unwrapMessage)\n/* harmony export */ });\n// functions\nfunction assertEqual(val) {\n    return val;\n}\nfunction assertNotEqual(val) {\n    return val;\n}\nfunction assertIs(_arg) { }\nfunction assertNever(_x) {\n    throw new Error();\n}\nfunction assert(_) { }\nfunction getEnumValues(entries) {\n    const numericValues = Object.values(entries).filter((v) => typeof v === \"number\");\n    const values = Object.entries(entries)\n        .filter(([k, _]) => numericValues.indexOf(+k) === -1)\n        .map(([_, v]) => v);\n    return values;\n}\nfunction joinValues(array, separator = \"|\") {\n    return array.map((val) => stringifyPrimitive(val)).join(separator);\n}\nfunction jsonStringifyReplacer(_, value) {\n    if (typeof value === \"bigint\")\n        return value.toString();\n    return value;\n}\nfunction cached(getter) {\n    const set = false;\n    return {\n        get value() {\n            if (!set) {\n                const value = getter();\n                Object.defineProperty(this, \"value\", { value });\n                return value;\n            }\n            throw new Error(\"cached value already set\");\n        },\n    };\n}\nfunction nullish(input) {\n    return input === null || input === undefined;\n}\nfunction cleanRegex(source) {\n    const start = source.startsWith(\"^\") ? 1 : 0;\n    const end = source.endsWith(\"$\") ? source.length - 1 : source.length;\n    return source.slice(start, end);\n}\nfunction floatSafeRemainder(val, step) {\n    const valDecCount = (val.toString().split(\".\")[1] || \"\").length;\n    const stepString = step.toString();\n    let stepDecCount = (stepString.split(\".\")[1] || \"\").length;\n    if (stepDecCount === 0 && /\\d?e-\\d?/.test(stepString)) {\n        const match = stepString.match(/\\d?e-(\\d?)/);\n        if (match?.[1]) {\n            stepDecCount = Number.parseInt(match[1]);\n        }\n    }\n    const decCount = valDecCount > stepDecCount ? valDecCount : stepDecCount;\n    const valInt = Number.parseInt(val.toFixed(decCount).replace(\".\", \"\"));\n    const stepInt = Number.parseInt(step.toFixed(decCount).replace(\".\", \"\"));\n    return (valInt % stepInt) / 10 ** decCount;\n}\nconst EVALUATING = Symbol(\"evaluating\");\nfunction defineLazy(object, key, getter) {\n    let value = undefined;\n    Object.defineProperty(object, key, {\n        get() {\n            if (value === EVALUATING) {\n                // Circular reference detected, return undefined to break the cycle\n                return undefined;\n            }\n            if (value === undefined) {\n                value = EVALUATING;\n                value = getter();\n            }\n            return value;\n        },\n        set(v) {\n            Object.defineProperty(object, key, {\n                value: v,\n                // configurable: true,\n            });\n            // object[key] = v;\n        },\n        configurable: true,\n    });\n}\nfunction objectClone(obj) {\n    return Object.create(Object.getPrototypeOf(obj), Object.getOwnPropertyDescriptors(obj));\n}\nfunction assignProp(target, prop, value) {\n    Object.defineProperty(target, prop, {\n        value,\n        writable: true,\n        enumerable: true,\n        configurable: true,\n    });\n}\nfunction mergeDefs(...defs) {\n    const mergedDescriptors = {};\n    for (const def of defs) {\n        const descriptors = Object.getOwnPropertyDescriptors(def);\n        Object.assign(mergedDescriptors, descriptors);\n    }\n    return Object.defineProperties({}, mergedDescriptors);\n}\nfunction cloneDef(schema) {\n    return mergeDefs(schema._zod.def);\n}\nfunction getElementAtPath(obj, path) {\n    if (!path)\n        return obj;\n    return path.reduce((acc, key) => acc?.[key], obj);\n}\nfunction promiseAllObject(promisesObj) {\n    const keys = Object.keys(promisesObj);\n    const promises = keys.map((key) => promisesObj[key]);\n    return Promise.all(promises).then((results) => {\n        const resolvedObj = {};\n        for (let i = 0; i < keys.length; i++) {\n            resolvedObj[keys[i]] = results[i];\n        }\n        return resolvedObj;\n    });\n}\nfunction randomString(length = 10) {\n    const chars = \"abcdefghijklmnopqrstuvwxyz\";\n    let str = \"\";\n    for (let i = 0; i < length; i++) {\n        str += chars[Math.floor(Math.random() * chars.length)];\n    }\n    return str;\n}\nfunction esc(str) {\n    return JSON.stringify(str);\n}\nconst captureStackTrace = (\"captureStackTrace\" in Error ? Error.captureStackTrace : (..._args) => { });\nfunction isObject(data) {\n    return typeof data === \"object\" && data !== null && !Array.isArray(data);\n}\nconst allowsEval = cached(() => {\n    // @ts-ignore\n    if (typeof navigator !== \"undefined\" && navigator?.userAgent?.includes(\"Cloudflare\")) {\n        return false;\n    }\n    try {\n        const F = Function;\n        new F(\"\");\n        return true;\n    }\n    catch (_) {\n        return false;\n    }\n});\nfunction isPlainObject(o) {\n    if (isObject(o) === false)\n        return false;\n    // modified constructor\n    const ctor = o.constructor;\n    if (ctor === undefined)\n        return true;\n    // modified prototype\n    const prot = ctor.prototype;\n    if (isObject(prot) === false)\n        return false;\n    // ctor doesn't have static `isPrototypeOf`\n    if (Object.prototype.hasOwnProperty.call(prot, \"isPrototypeOf\") === false) {\n        return false;\n    }\n    return true;\n}\nfunction shallowClone(o) {\n    if (isPlainObject(o))\n        return { ...o };\n    return o;\n}\nfunction numKeys(data) {\n    let keyCount = 0;\n    for (const key in data) {\n        if (Object.prototype.hasOwnProperty.call(data, key)) {\n            keyCount++;\n        }\n    }\n    return keyCount;\n}\nconst getParsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"undefined\":\n            return \"undefined\";\n        case \"string\":\n            return \"string\";\n        case \"number\":\n            return Number.isNaN(data) ? \"nan\" : \"number\";\n        case \"boolean\":\n            return \"boolean\";\n        case \"function\":\n            return \"function\";\n        case \"bigint\":\n            return \"bigint\";\n        case \"symbol\":\n            return \"symbol\";\n        case \"object\":\n            if (Array.isArray(data)) {\n                return \"array\";\n            }\n            if (data === null) {\n                return \"null\";\n            }\n            if (data.then && typeof data.then === \"function\" && data.catch && typeof data.catch === \"function\") {\n                return \"promise\";\n            }\n            if (typeof Map !== \"undefined\" && data instanceof Map) {\n                return \"map\";\n            }\n            if (typeof Set !== \"undefined\" && data instanceof Set) {\n                return \"set\";\n            }\n            if (typeof Date !== \"undefined\" && data instanceof Date) {\n                return \"date\";\n            }\n            // @ts-ignore\n            if (typeof File !== \"undefined\" && data instanceof File) {\n                return \"file\";\n            }\n            return \"object\";\n        default:\n            throw new Error(`Unknown data type: ${t}`);\n    }\n};\nconst propertyKeyTypes = new Set([\"string\", \"number\", \"symbol\"]);\nconst primitiveTypes = new Set([\"string\", \"number\", \"bigint\", \"boolean\", \"symbol\", \"undefined\"]);\nfunction escapeRegex(str) {\n    return str.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n}\n// zod-specific utils\nfunction clone(inst, def, params) {\n    const cl = new inst._zod.constr(def ?? inst._zod.def);\n    if (!def || params?.parent)\n        cl._zod.parent = inst;\n    return cl;\n}\nfunction normalizeParams(_params) {\n    const params = _params;\n    if (!params)\n        return {};\n    if (typeof params === \"string\")\n        return { error: () => params };\n    if (params?.message !== undefined) {\n        if (params?.error !== undefined)\n            throw new Error(\"Cannot specify both `message` and `error` params\");\n        params.error = params.message;\n    }\n    delete params.message;\n    if (typeof params.error === \"string\")\n        return { ...params, error: () => params.error };\n    return params;\n}\nfunction createTransparentProxy(getter) {\n    let target;\n    return new Proxy({}, {\n        get(_, prop, receiver) {\n            target ?? (target = getter());\n            return Reflect.get(target, prop, receiver);\n        },\n        set(_, prop, value, receiver) {\n            target ?? (target = getter());\n            return Reflect.set(target, prop, value, receiver);\n        },\n        has(_, prop) {\n            target ?? (target = getter());\n            return Reflect.has(target, prop);\n        },\n        deleteProperty(_, prop) {\n            target ?? (target = getter());\n            return Reflect.deleteProperty(target, prop);\n        },\n        ownKeys(_) {\n            target ?? (target = getter());\n            return Reflect.ownKeys(target);\n        },\n        getOwnPropertyDescriptor(_, prop) {\n            target ?? (target = getter());\n            return Reflect.getOwnPropertyDescriptor(target, prop);\n        },\n        defineProperty(_, prop, descriptor) {\n            target ?? (target = getter());\n            return Reflect.defineProperty(target, prop, descriptor);\n        },\n    });\n}\nfunction stringifyPrimitive(value) {\n    if (typeof value === \"bigint\")\n        return value.toString() + \"n\";\n    if (typeof value === \"string\")\n        return `\"${value}\"`;\n    return `${value}`;\n}\nfunction optionalKeys(shape) {\n    return Object.keys(shape).filter((k) => {\n        return shape[k]._zod.optin === \"optional\" && shape[k]._zod.optout === \"optional\";\n    });\n}\nconst NUMBER_FORMAT_RANGES = {\n    safeint: [Number.MIN_SAFE_INTEGER, Number.MAX_SAFE_INTEGER],\n    int32: [-2147483648, 2147483647],\n    uint32: [0, 4294967295],\n    float32: [-3.4028234663852886e38, 3.4028234663852886e38],\n    float64: [-Number.MAX_VALUE, Number.MAX_VALUE],\n};\nconst BIGINT_FORMAT_RANGES = {\n    int64: [/* @__PURE__*/ BigInt(\"-9223372036854775808\"), /* @__PURE__*/ BigInt(\"9223372036854775807\")],\n    uint64: [/* @__PURE__*/ BigInt(0), /* @__PURE__*/ BigInt(\"18446744073709551615\")],\n};\nfunction pick(schema, mask) {\n    const currDef = schema._zod.def;\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const newShape = {};\n            for (const key in mask) {\n                if (!(key in currDef.shape)) {\n                    throw new Error(`Unrecognized key: \"${key}\"`);\n                }\n                if (!mask[key])\n                    continue;\n                newShape[key] = currDef.shape[key];\n            }\n            assignProp(this, \"shape\", newShape); // self-caching\n            return newShape;\n        },\n        checks: [],\n    });\n    return clone(schema, def);\n}\nfunction omit(schema, mask) {\n    const currDef = schema._zod.def;\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const newShape = { ...schema._zod.def.shape };\n            for (const key in mask) {\n                if (!(key in currDef.shape)) {\n                    throw new Error(`Unrecognized key: \"${key}\"`);\n                }\n                if (!mask[key])\n                    continue;\n                delete newShape[key];\n            }\n            assignProp(this, \"shape\", newShape); // self-caching\n            return newShape;\n        },\n        checks: [],\n    });\n    return clone(schema, def);\n}\nfunction extend(schema, shape) {\n    if (!isPlainObject(shape)) {\n        throw new Error(\"Invalid input to extend: expected a plain object\");\n    }\n    const checks = schema._zod.def.checks;\n    const hasChecks = checks && checks.length > 0;\n    if (hasChecks) {\n        throw new Error(\"Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.\");\n    }\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const _shape = { ...schema._zod.def.shape, ...shape };\n            assignProp(this, \"shape\", _shape); // self-caching\n            return _shape;\n        },\n        checks: [],\n    });\n    return clone(schema, def);\n}\nfunction safeExtend(schema, shape) {\n    if (!isPlainObject(shape)) {\n        throw new Error(\"Invalid input to safeExtend: expected a plain object\");\n    }\n    const def = {\n        ...schema._zod.def,\n        get shape() {\n            const _shape = { ...schema._zod.def.shape, ...shape };\n            assignProp(this, \"shape\", _shape); // self-caching\n            return _shape;\n        },\n        checks: schema._zod.def.checks,\n    };\n    return clone(schema, def);\n}\nfunction merge(a, b) {\n    const def = mergeDefs(a._zod.def, {\n        get shape() {\n            const _shape = { ...a._zod.def.shape, ...b._zod.def.shape };\n            assignProp(this, \"shape\", _shape); // self-caching\n            return _shape;\n        },\n        get catchall() {\n            return b._zod.def.catchall;\n        },\n        checks: [], // delete existing checks\n    });\n    return clone(a, def);\n}\nfunction partial(Class, schema, mask) {\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const oldShape = schema._zod.def.shape;\n            const shape = { ...oldShape };\n            if (mask) {\n                for (const key in mask) {\n                    if (!(key in oldShape)) {\n                        throw new Error(`Unrecognized key: \"${key}\"`);\n                    }\n                    if (!mask[key])\n                        continue;\n                    // if (oldShape[key]!._zod.optin === \"optional\") continue;\n                    shape[key] = Class\n                        ? new Class({\n                            type: \"optional\",\n                            innerType: oldShape[key],\n                        })\n                        : oldShape[key];\n                }\n            }\n            else {\n                for (const key in oldShape) {\n                    // if (oldShape[key]!._zod.optin === \"optional\") continue;\n                    shape[key] = Class\n                        ? new Class({\n                            type: \"optional\",\n                            innerType: oldShape[key],\n                        })\n                        : oldShape[key];\n                }\n            }\n            assignProp(this, \"shape\", shape); // self-caching\n            return shape;\n        },\n        checks: [],\n    });\n    return clone(schema, def);\n}\nfunction required(Class, schema, mask) {\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const oldShape = schema._zod.def.shape;\n            const shape = { ...oldShape };\n            if (mask) {\n                for (const key in mask) {\n                    if (!(key in shape)) {\n                        throw new Error(`Unrecognized key: \"${key}\"`);\n                    }\n                    if (!mask[key])\n                        continue;\n                    // overwrite with non-optional\n                    shape[key] = new Class({\n                        type: \"nonoptional\",\n                        innerType: oldShape[key],\n                    });\n                }\n            }\n            else {\n                for (const key in oldShape) {\n                    // overwrite with non-optional\n                    shape[key] = new Class({\n                        type: \"nonoptional\",\n                        innerType: oldShape[key],\n                    });\n                }\n            }\n            assignProp(this, \"shape\", shape); // self-caching\n            return shape;\n        },\n        checks: [],\n    });\n    return clone(schema, def);\n}\n// invalid_type | too_big | too_small | invalid_format | not_multiple_of | unrecognized_keys | invalid_union | invalid_key | invalid_element | invalid_value | custom\nfunction aborted(x, startIndex = 0) {\n    if (x.aborted === true)\n        return true;\n    for (let i = startIndex; i < x.issues.length; i++) {\n        if (x.issues[i]?.continue !== true) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction prefixIssues(path, issues) {\n    return issues.map((iss) => {\n        var _a;\n        (_a = iss).path ?? (_a.path = []);\n        iss.path.unshift(path);\n        return iss;\n    });\n}\nfunction unwrapMessage(message) {\n    return typeof message === \"string\" ? message : message?.message;\n}\nfunction finalizeIssue(iss, ctx, config) {\n    const full = { ...iss, path: iss.path ?? [] };\n    // for backwards compatibility\n    if (!iss.message) {\n        const message = unwrapMessage(iss.inst?._zod.def?.error?.(iss)) ??\n            unwrapMessage(ctx?.error?.(iss)) ??\n            unwrapMessage(config.customError?.(iss)) ??\n            unwrapMessage(config.localeError?.(iss)) ??\n            \"Invalid input\";\n        full.message = message;\n    }\n    // delete (full as any).def;\n    delete full.inst;\n    delete full.continue;\n    if (!ctx?.reportInput) {\n        delete full.input;\n    }\n    return full;\n}\nfunction getSizableOrigin(input) {\n    if (input instanceof Set)\n        return \"set\";\n    if (input instanceof Map)\n        return \"map\";\n    // @ts-ignore\n    if (input instanceof File)\n        return \"file\";\n    return \"unknown\";\n}\nfunction getLengthableOrigin(input) {\n    if (Array.isArray(input))\n        return \"array\";\n    if (typeof input === \"string\")\n        return \"string\";\n    return \"unknown\";\n}\nfunction issue(...args) {\n    const [iss, input, inst] = args;\n    if (typeof iss === \"string\") {\n        return {\n            message: iss,\n            code: \"custom\",\n            input,\n            inst,\n        };\n    }\n    return { ...iss };\n}\nfunction cleanEnum(obj) {\n    return Object.entries(obj)\n        .filter(([k, _]) => {\n        // return true if NaN, meaning it's not a number, thus a string key\n        return Number.isNaN(Number.parseInt(k, 10));\n    })\n        .map((el) => el[1]);\n}\n// Codec utility functions\nfunction base64ToUint8Array(base64) {\n    const binaryString = atob(base64);\n    const bytes = new Uint8Array(binaryString.length);\n    for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n    }\n    return bytes;\n}\nfunction uint8ArrayToBase64(bytes) {\n    let binaryString = \"\";\n    for (let i = 0; i < bytes.length; i++) {\n        binaryString += String.fromCharCode(bytes[i]);\n    }\n    return btoa(binaryString);\n}\nfunction base64urlToUint8Array(base64url) {\n    const base64 = base64url.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    const padding = \"=\".repeat((4 - (base64.length % 4)) % 4);\n    return base64ToUint8Array(base64 + padding);\n}\nfunction uint8ArrayToBase64url(bytes) {\n    return uint8ArrayToBase64(bytes).replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=/g, \"\");\n}\nfunction hexToUint8Array(hex) {\n    const cleanHex = hex.replace(/^0x/, \"\");\n    if (cleanHex.length % 2 !== 0) {\n        throw new Error(\"Invalid hex string length\");\n    }\n    const bytes = new Uint8Array(cleanHex.length / 2);\n    for (let i = 0; i < cleanHex.length; i += 2) {\n        bytes[i / 2] = Number.parseInt(cleanHex.slice(i, i + 2), 16);\n    }\n    return bytes;\n}\nfunction uint8ArrayToHex(bytes) {\n    return Array.from(bytes)\n        .map((b) => b.toString(16).padStart(2, \"0\"))\n        .join(\"\");\n}\n// instanceof\nclass Class {\n    constructor(..._args) { }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvbm9kZV9tb2R1bGVzL3pvZC92NC9jb3JlL3V0aWwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDTztBQUNQO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDTztBQUNBO0FBQ1A7QUFDQTtBQUNPO0FBQ0E7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXVELE9BQU87QUFDOUQ7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGlCQUFpQjtBQUN6QztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDTztBQUNQO0FBQ0E7QUFDQSxvQkFBb0IsWUFBWTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNPLHFHQUFxRztBQUNyRztBQUNQO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDTTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELEVBQUU7QUFDcEQ7QUFDQTtBQUNPO0FBQ0E7QUFDQTtBQUNQLGlDQUFpQztBQUNqQztBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ087QUFDUDtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsTUFBTTtBQUN6QixjQUFjLE1BQU07QUFDcEI7QUFDTztBQUNQO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQsSUFBSTtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlEO0FBQ2pEO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0EsMERBQTBELElBQUk7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRDtBQUNqRDtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QiwrQ0FBK0M7QUFDL0M7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCLCtDQUErQztBQUMvQztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QiwrQ0FBK0M7QUFDL0M7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0EsOERBQThELElBQUk7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEM7QUFDOUM7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBLDhEQUE4RCxJQUFJO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLDhDQUE4QztBQUM5QztBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSw2QkFBNkIscUJBQXFCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNPO0FBQ1A7QUFDQTtBQUNPO0FBQ1AsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLG9CQUFvQix5QkFBeUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0Esb0JBQW9CLGtCQUFrQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IscUJBQXFCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFtYWFuXFxPbmVEcml2ZVxcRGVza3RvcFxcS2FuZGlkXzJcXE5ldyBmb2xkZXIgKDIpXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxub2RlX21vZHVsZXNcXHpvZFxcdjRcXGNvcmVcXHV0aWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZnVuY3Rpb25zXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0RXF1YWwodmFsKSB7XG4gICAgcmV0dXJuIHZhbDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnROb3RFcXVhbCh2YWwpIHtcbiAgICByZXR1cm4gdmFsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydElzKF9hcmcpIHsgfVxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydE5ldmVyKF94KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCk7XG59XG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0KF8pIHsgfVxuZXhwb3J0IGZ1bmN0aW9uIGdldEVudW1WYWx1ZXMoZW50cmllcykge1xuICAgIGNvbnN0IG51bWVyaWNWYWx1ZXMgPSBPYmplY3QudmFsdWVzKGVudHJpZXMpLmZpbHRlcigodikgPT4gdHlwZW9mIHYgPT09IFwibnVtYmVyXCIpO1xuICAgIGNvbnN0IHZhbHVlcyA9IE9iamVjdC5lbnRyaWVzKGVudHJpZXMpXG4gICAgICAgIC5maWx0ZXIoKFtrLCBfXSkgPT4gbnVtZXJpY1ZhbHVlcy5pbmRleE9mKCtrKSA9PT0gLTEpXG4gICAgICAgIC5tYXAoKFtfLCB2XSkgPT4gdik7XG4gICAgcmV0dXJuIHZhbHVlcztcbn1cbmV4cG9ydCBmdW5jdGlvbiBqb2luVmFsdWVzKGFycmF5LCBzZXBhcmF0b3IgPSBcInxcIikge1xuICAgIHJldHVybiBhcnJheS5tYXAoKHZhbCkgPT4gc3RyaW5naWZ5UHJpbWl0aXZlKHZhbCkpLmpvaW4oc2VwYXJhdG9yKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBqc29uU3RyaW5naWZ5UmVwbGFjZXIoXywgdmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcImJpZ2ludFwiKVxuICAgICAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoKTtcbiAgICByZXR1cm4gdmFsdWU7XG59XG5leHBvcnQgZnVuY3Rpb24gY2FjaGVkKGdldHRlcikge1xuICAgIGNvbnN0IHNldCA9IGZhbHNlO1xuICAgIHJldHVybiB7XG4gICAgICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgICAgIGlmICghc2V0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBnZXR0ZXIoKTtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ2YWx1ZVwiLCB7IHZhbHVlIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImNhY2hlZCB2YWx1ZSBhbHJlYWR5IHNldFwiKTtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIG51bGxpc2goaW5wdXQpIHtcbiAgICByZXR1cm4gaW5wdXQgPT09IG51bGwgfHwgaW5wdXQgPT09IHVuZGVmaW5lZDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjbGVhblJlZ2V4KHNvdXJjZSkge1xuICAgIGNvbnN0IHN0YXJ0ID0gc291cmNlLnN0YXJ0c1dpdGgoXCJeXCIpID8gMSA6IDA7XG4gICAgY29uc3QgZW5kID0gc291cmNlLmVuZHNXaXRoKFwiJFwiKSA/IHNvdXJjZS5sZW5ndGggLSAxIDogc291cmNlLmxlbmd0aDtcbiAgICByZXR1cm4gc291cmNlLnNsaWNlKHN0YXJ0LCBlbmQpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZsb2F0U2FmZVJlbWFpbmRlcih2YWwsIHN0ZXApIHtcbiAgICBjb25zdCB2YWxEZWNDb3VudCA9ICh2YWwudG9TdHJpbmcoKS5zcGxpdChcIi5cIilbMV0gfHwgXCJcIikubGVuZ3RoO1xuICAgIGNvbnN0IHN0ZXBTdHJpbmcgPSBzdGVwLnRvU3RyaW5nKCk7XG4gICAgbGV0IHN0ZXBEZWNDb3VudCA9IChzdGVwU3RyaW5nLnNwbGl0KFwiLlwiKVsxXSB8fCBcIlwiKS5sZW5ndGg7XG4gICAgaWYgKHN0ZXBEZWNDb3VudCA9PT0gMCAmJiAvXFxkP2UtXFxkPy8udGVzdChzdGVwU3RyaW5nKSkge1xuICAgICAgICBjb25zdCBtYXRjaCA9IHN0ZXBTdHJpbmcubWF0Y2goL1xcZD9lLShcXGQ/KS8pO1xuICAgICAgICBpZiAobWF0Y2g/LlsxXSkge1xuICAgICAgICAgICAgc3RlcERlY0NvdW50ID0gTnVtYmVyLnBhcnNlSW50KG1hdGNoWzFdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBkZWNDb3VudCA9IHZhbERlY0NvdW50ID4gc3RlcERlY0NvdW50ID8gdmFsRGVjQ291bnQgOiBzdGVwRGVjQ291bnQ7XG4gICAgY29uc3QgdmFsSW50ID0gTnVtYmVyLnBhcnNlSW50KHZhbC50b0ZpeGVkKGRlY0NvdW50KS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG4gICAgY29uc3Qgc3RlcEludCA9IE51bWJlci5wYXJzZUludChzdGVwLnRvRml4ZWQoZGVjQ291bnQpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcbiAgICByZXR1cm4gKHZhbEludCAlIHN0ZXBJbnQpIC8gMTAgKiogZGVjQ291bnQ7XG59XG5jb25zdCBFVkFMVUFUSU5HID0gU3ltYm9sKFwiZXZhbHVhdGluZ1wiKTtcbmV4cG9ydCBmdW5jdGlvbiBkZWZpbmVMYXp5KG9iamVjdCwga2V5LCBnZXR0ZXIpIHtcbiAgICBsZXQgdmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iamVjdCwga2V5LCB7XG4gICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gRVZBTFVBVElORykge1xuICAgICAgICAgICAgICAgIC8vIENpcmN1bGFyIHJlZmVyZW5jZSBkZXRlY3RlZCwgcmV0dXJuIHVuZGVmaW5lZCB0byBicmVhayB0aGUgY3ljbGVcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IEVWQUxVQVRJTkc7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBnZXR0ZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0KHYpIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmplY3QsIGtleSwge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB2LFxuICAgICAgICAgICAgICAgIC8vIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gb2JqZWN0W2tleV0gPSB2O1xuICAgICAgICB9LFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gb2JqZWN0Q2xvbmUob2JqKSB7XG4gICAgcmV0dXJuIE9iamVjdC5jcmVhdGUoT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaiksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG9iaikpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFzc2lnblByb3AodGFyZ2V0LCBwcm9wLCB2YWx1ZSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3AsIHtcbiAgICAgICAgdmFsdWUsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VEZWZzKC4uLmRlZnMpIHtcbiAgICBjb25zdCBtZXJnZWREZXNjcmlwdG9ycyA9IHt9O1xuICAgIGZvciAoY29uc3QgZGVmIG9mIGRlZnMpIHtcbiAgICAgICAgY29uc3QgZGVzY3JpcHRvcnMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhkZWYpO1xuICAgICAgICBPYmplY3QuYXNzaWduKG1lcmdlZERlc2NyaXB0b3JzLCBkZXNjcmlwdG9ycyk7XG4gICAgfVxuICAgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh7fSwgbWVyZ2VkRGVzY3JpcHRvcnMpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNsb25lRGVmKHNjaGVtYSkge1xuICAgIHJldHVybiBtZXJnZURlZnMoc2NoZW1hLl96b2QuZGVmKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50QXRQYXRoKG9iaiwgcGF0aCkge1xuICAgIGlmICghcGF0aClcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICByZXR1cm4gcGF0aC5yZWR1Y2UoKGFjYywga2V5KSA9PiBhY2M/LltrZXldLCBvYmopO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHByb21pc2VBbGxPYmplY3QocHJvbWlzZXNPYmopIHtcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMocHJvbWlzZXNPYmopO1xuICAgIGNvbnN0IHByb21pc2VzID0ga2V5cy5tYXAoKGtleSkgPT4gcHJvbWlzZXNPYmpba2V5XSk7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKChyZXN1bHRzKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc29sdmVkT2JqID0ge307XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcmVzb2x2ZWRPYmpba2V5c1tpXV0gPSByZXN1bHRzW2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXNvbHZlZE9iajtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByYW5kb21TdHJpbmcobGVuZ3RoID0gMTApIHtcbiAgICBjb25zdCBjaGFycyA9IFwiYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpcIjtcbiAgICBsZXQgc3RyID0gXCJcIjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHN0ciArPSBjaGFyc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFycy5sZW5ndGgpXTtcbiAgICB9XG4gICAgcmV0dXJuIHN0cjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBlc2Moc3RyKSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHN0cik7XG59XG5leHBvcnQgY29uc3QgY2FwdHVyZVN0YWNrVHJhY2UgPSAoXCJjYXB0dXJlU3RhY2tUcmFjZVwiIGluIEVycm9yID8gRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UgOiAoLi4uX2FyZ3MpID0+IHsgfSk7XG5leHBvcnQgZnVuY3Rpb24gaXNPYmplY3QoZGF0YSkge1xuICAgIHJldHVybiB0eXBlb2YgZGF0YSA9PT0gXCJvYmplY3RcIiAmJiBkYXRhICE9PSBudWxsICYmICFBcnJheS5pc0FycmF5KGRhdGEpO1xufVxuZXhwb3J0IGNvbnN0IGFsbG93c0V2YWwgPSBjYWNoZWQoKCkgPT4ge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gXCJ1bmRlZmluZWRcIiAmJiBuYXZpZ2F0b3I/LnVzZXJBZ2VudD8uaW5jbHVkZXMoXCJDbG91ZGZsYXJlXCIpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgRiA9IEZ1bmN0aW9uO1xuICAgICAgICBuZXcgRihcIlwiKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNhdGNoIChfKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59KTtcbmV4cG9ydCBmdW5jdGlvbiBpc1BsYWluT2JqZWN0KG8pIHtcbiAgICBpZiAoaXNPYmplY3QobykgPT09IGZhbHNlKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgLy8gbW9kaWZpZWQgY29uc3RydWN0b3JcbiAgICBjb25zdCBjdG9yID0gby5jb25zdHJ1Y3RvcjtcbiAgICBpZiAoY3RvciA9PT0gdW5kZWZpbmVkKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAvLyBtb2RpZmllZCBwcm90b3R5cGVcbiAgICBjb25zdCBwcm90ID0gY3Rvci5wcm90b3R5cGU7XG4gICAgaWYgKGlzT2JqZWN0KHByb3QpID09PSBmYWxzZSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIC8vIGN0b3IgZG9lc24ndCBoYXZlIHN0YXRpYyBgaXNQcm90b3R5cGVPZmBcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHByb3QsIFwiaXNQcm90b3R5cGVPZlwiKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzaGFsbG93Q2xvbmUobykge1xuICAgIGlmIChpc1BsYWluT2JqZWN0KG8pKVxuICAgICAgICByZXR1cm4geyAuLi5vIH07XG4gICAgcmV0dXJuIG87XG59XG5leHBvcnQgZnVuY3Rpb24gbnVtS2V5cyhkYXRhKSB7XG4gICAgbGV0IGtleUNvdW50ID0gMDtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBkYXRhKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZGF0YSwga2V5KSkge1xuICAgICAgICAgICAga2V5Q291bnQrKztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ga2V5Q291bnQ7XG59XG5leHBvcnQgY29uc3QgZ2V0UGFyc2VkVHlwZSA9IChkYXRhKSA9PiB7XG4gICAgY29uc3QgdCA9IHR5cGVvZiBkYXRhO1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgICBjYXNlIFwidW5kZWZpbmVkXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJ1bmRlZmluZWRcIjtcbiAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgICAgcmV0dXJuIFwic3RyaW5nXCI7XG4gICAgICAgIGNhc2UgXCJudW1iZXJcIjpcbiAgICAgICAgICAgIHJldHVybiBOdW1iZXIuaXNOYU4oZGF0YSkgPyBcIm5hblwiIDogXCJudW1iZXJcIjtcbiAgICAgICAgY2FzZSBcImJvb2xlYW5cIjpcbiAgICAgICAgICAgIHJldHVybiBcImJvb2xlYW5cIjtcbiAgICAgICAgY2FzZSBcImZ1bmN0aW9uXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJmdW5jdGlvblwiO1xuICAgICAgICBjYXNlIFwiYmlnaW50XCI6XG4gICAgICAgICAgICByZXR1cm4gXCJiaWdpbnRcIjtcbiAgICAgICAgY2FzZSBcInN5bWJvbFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwic3ltYm9sXCI7XG4gICAgICAgIGNhc2UgXCJvYmplY3RcIjpcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiYXJyYXlcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwibnVsbFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEudGhlbiAmJiB0eXBlb2YgZGF0YS50aGVuID09PSBcImZ1bmN0aW9uXCIgJiYgZGF0YS5jYXRjaCAmJiB0eXBlb2YgZGF0YS5jYXRjaCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwicHJvbWlzZVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBNYXAgIT09IFwidW5kZWZpbmVkXCIgJiYgZGF0YSBpbnN0YW5jZW9mIE1hcCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcIm1hcFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBTZXQgIT09IFwidW5kZWZpbmVkXCIgJiYgZGF0YSBpbnN0YW5jZW9mIFNldCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcInNldFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBEYXRlICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZGF0ZVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBGaWxlICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBGaWxlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZmlsZVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0XCI7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gZGF0YSB0eXBlOiAke3R9YCk7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBwcm9wZXJ0eUtleVR5cGVzID0gbmV3IFNldChbXCJzdHJpbmdcIiwgXCJudW1iZXJcIiwgXCJzeW1ib2xcIl0pO1xuZXhwb3J0IGNvbnN0IHByaW1pdGl2ZVR5cGVzID0gbmV3IFNldChbXCJzdHJpbmdcIiwgXCJudW1iZXJcIiwgXCJiaWdpbnRcIiwgXCJib29sZWFuXCIsIFwic3ltYm9sXCIsIFwidW5kZWZpbmVkXCJdKTtcbmV4cG9ydCBmdW5jdGlvbiBlc2NhcGVSZWdleChzdHIpIHtcbiAgICByZXR1cm4gc3RyLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCBcIlxcXFwkJlwiKTtcbn1cbi8vIHpvZC1zcGVjaWZpYyB1dGlsc1xuZXhwb3J0IGZ1bmN0aW9uIGNsb25lKGluc3QsIGRlZiwgcGFyYW1zKSB7XG4gICAgY29uc3QgY2wgPSBuZXcgaW5zdC5fem9kLmNvbnN0cihkZWYgPz8gaW5zdC5fem9kLmRlZik7XG4gICAgaWYgKCFkZWYgfHwgcGFyYW1zPy5wYXJlbnQpXG4gICAgICAgIGNsLl96b2QucGFyZW50ID0gaW5zdDtcbiAgICByZXR1cm4gY2w7XG59XG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplUGFyYW1zKF9wYXJhbXMpIHtcbiAgICBjb25zdCBwYXJhbXMgPSBfcGFyYW1zO1xuICAgIGlmICghcGFyYW1zKVxuICAgICAgICByZXR1cm4ge307XG4gICAgaWYgKHR5cGVvZiBwYXJhbXMgPT09IFwic3RyaW5nXCIpXG4gICAgICAgIHJldHVybiB7IGVycm9yOiAoKSA9PiBwYXJhbXMgfTtcbiAgICBpZiAocGFyYW1zPy5tZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKHBhcmFtcz8uZXJyb3IgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBzcGVjaWZ5IGJvdGggYG1lc3NhZ2VgIGFuZCBgZXJyb3JgIHBhcmFtc1wiKTtcbiAgICAgICAgcGFyYW1zLmVycm9yID0gcGFyYW1zLm1lc3NhZ2U7XG4gICAgfVxuICAgIGRlbGV0ZSBwYXJhbXMubWVzc2FnZTtcbiAgICBpZiAodHlwZW9mIHBhcmFtcy5lcnJvciA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgcmV0dXJuIHsgLi4ucGFyYW1zLCBlcnJvcjogKCkgPT4gcGFyYW1zLmVycm9yIH07XG4gICAgcmV0dXJuIHBhcmFtcztcbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUcmFuc3BhcmVudFByb3h5KGdldHRlcikge1xuICAgIGxldCB0YXJnZXQ7XG4gICAgcmV0dXJuIG5ldyBQcm94eSh7fSwge1xuICAgICAgICBnZXQoXywgcHJvcCwgcmVjZWl2ZXIpIHtcbiAgICAgICAgICAgIHRhcmdldCA/PyAodGFyZ2V0ID0gZ2V0dGVyKCkpO1xuICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3QuZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpO1xuICAgICAgICB9LFxuICAgICAgICBzZXQoXywgcHJvcCwgdmFsdWUsIHJlY2VpdmVyKSB7XG4gICAgICAgICAgICB0YXJnZXQgPz8gKHRhcmdldCA9IGdldHRlcigpKTtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LnNldCh0YXJnZXQsIHByb3AsIHZhbHVlLCByZWNlaXZlcik7XG4gICAgICAgIH0sXG4gICAgICAgIGhhcyhfLCBwcm9wKSB7XG4gICAgICAgICAgICB0YXJnZXQgPz8gKHRhcmdldCA9IGdldHRlcigpKTtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0Lmhhcyh0YXJnZXQsIHByb3ApO1xuICAgICAgICB9LFxuICAgICAgICBkZWxldGVQcm9wZXJ0eShfLCBwcm9wKSB7XG4gICAgICAgICAgICB0YXJnZXQgPz8gKHRhcmdldCA9IGdldHRlcigpKTtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LmRlbGV0ZVByb3BlcnR5KHRhcmdldCwgcHJvcCk7XG4gICAgICAgIH0sXG4gICAgICAgIG93bktleXMoXykge1xuICAgICAgICAgICAgdGFyZ2V0ID8/ICh0YXJnZXQgPSBnZXR0ZXIoKSk7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5vd25LZXlzKHRhcmdldCk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihfLCBwcm9wKSB7XG4gICAgICAgICAgICB0YXJnZXQgPz8gKHRhcmdldCA9IGdldHRlcigpKTtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIHByb3ApO1xuICAgICAgICB9LFxuICAgICAgICBkZWZpbmVQcm9wZXJ0eShfLCBwcm9wLCBkZXNjcmlwdG9yKSB7XG4gICAgICAgICAgICB0YXJnZXQgPz8gKHRhcmdldCA9IGdldHRlcigpKTtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgcHJvcCwgZGVzY3JpcHRvcik7XG4gICAgICAgIH0sXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gc3RyaW5naWZ5UHJpbWl0aXZlKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJiaWdpbnRcIilcbiAgICAgICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCkgKyBcIm5cIjtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKVxuICAgICAgICByZXR1cm4gYFwiJHt2YWx1ZX1cImA7XG4gICAgcmV0dXJuIGAke3ZhbHVlfWA7XG59XG5leHBvcnQgZnVuY3Rpb24gb3B0aW9uYWxLZXlzKHNoYXBlKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHNoYXBlKS5maWx0ZXIoKGspID0+IHtcbiAgICAgICAgcmV0dXJuIHNoYXBlW2tdLl96b2Qub3B0aW4gPT09IFwib3B0aW9uYWxcIiAmJiBzaGFwZVtrXS5fem9kLm9wdG91dCA9PT0gXCJvcHRpb25hbFwiO1xuICAgIH0pO1xufVxuZXhwb3J0IGNvbnN0IE5VTUJFUl9GT1JNQVRfUkFOR0VTID0ge1xuICAgIHNhZmVpbnQ6IFtOdW1iZXIuTUlOX1NBRkVfSU5URUdFUiwgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVJdLFxuICAgIGludDMyOiBbLTIxNDc0ODM2NDgsIDIxNDc0ODM2NDddLFxuICAgIHVpbnQzMjogWzAsIDQyOTQ5NjcyOTVdLFxuICAgIGZsb2F0MzI6IFstMy40MDI4MjM0NjYzODUyODg2ZTM4LCAzLjQwMjgyMzQ2NjM4NTI4ODZlMzhdLFxuICAgIGZsb2F0NjQ6IFstTnVtYmVyLk1BWF9WQUxVRSwgTnVtYmVyLk1BWF9WQUxVRV0sXG59O1xuZXhwb3J0IGNvbnN0IEJJR0lOVF9GT1JNQVRfUkFOR0VTID0ge1xuICAgIGludDY0OiBbLyogQF9fUFVSRV9fKi8gQmlnSW50KFwiLTkyMjMzNzIwMzY4NTQ3NzU4MDhcIiksIC8qIEBfX1BVUkVfXyovIEJpZ0ludChcIjkyMjMzNzIwMzY4NTQ3NzU4MDdcIildLFxuICAgIHVpbnQ2NDogWy8qIEBfX1BVUkVfXyovIEJpZ0ludCgwKSwgLyogQF9fUFVSRV9fKi8gQmlnSW50KFwiMTg0NDY3NDQwNzM3MDk1NTE2MTVcIildLFxufTtcbmV4cG9ydCBmdW5jdGlvbiBwaWNrKHNjaGVtYSwgbWFzaykge1xuICAgIGNvbnN0IGN1cnJEZWYgPSBzY2hlbWEuX3pvZC5kZWY7XG4gICAgY29uc3QgZGVmID0gbWVyZ2VEZWZzKHNjaGVtYS5fem9kLmRlZiwge1xuICAgICAgICBnZXQgc2hhcGUoKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbWFzaykge1xuICAgICAgICAgICAgICAgIGlmICghKGtleSBpbiBjdXJyRGVmLnNoYXBlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVucmVjb2duaXplZCBrZXk6IFwiJHtrZXl9XCJgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFtYXNrW2tleV0pXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIG5ld1NoYXBlW2tleV0gPSBjdXJyRGVmLnNoYXBlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhc3NpZ25Qcm9wKHRoaXMsIFwic2hhcGVcIiwgbmV3U2hhcGUpOyAvLyBzZWxmLWNhY2hpbmdcbiAgICAgICAgICAgIHJldHVybiBuZXdTaGFwZTtcbiAgICAgICAgfSxcbiAgICAgICAgY2hlY2tzOiBbXSxcbiAgICB9KTtcbiAgICByZXR1cm4gY2xvbmUoc2NoZW1hLCBkZWYpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG9taXQoc2NoZW1hLCBtYXNrKSB7XG4gICAgY29uc3QgY3VyckRlZiA9IHNjaGVtYS5fem9kLmRlZjtcbiAgICBjb25zdCBkZWYgPSBtZXJnZURlZnMoc2NoZW1hLl96b2QuZGVmLCB7XG4gICAgICAgIGdldCBzaGFwZSgpIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld1NoYXBlID0geyAuLi5zY2hlbWEuX3pvZC5kZWYuc2hhcGUgfTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG1hc2spIHtcbiAgICAgICAgICAgICAgICBpZiAoIShrZXkgaW4gY3VyckRlZi5zaGFwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnJlY29nbml6ZWQga2V5OiBcIiR7a2V5fVwiYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghbWFza1trZXldKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWxldGUgbmV3U2hhcGVba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFzc2lnblByb3AodGhpcywgXCJzaGFwZVwiLCBuZXdTaGFwZSk7IC8vIHNlbGYtY2FjaGluZ1xuICAgICAgICAgICAgcmV0dXJuIG5ld1NoYXBlO1xuICAgICAgICB9LFxuICAgICAgICBjaGVja3M6IFtdLFxuICAgIH0pO1xuICAgIHJldHVybiBjbG9uZShzY2hlbWEsIGRlZik7XG59XG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kKHNjaGVtYSwgc2hhcGUpIHtcbiAgICBpZiAoIWlzUGxhaW5PYmplY3Qoc2hhcGUpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgaW5wdXQgdG8gZXh0ZW5kOiBleHBlY3RlZCBhIHBsYWluIG9iamVjdFwiKTtcbiAgICB9XG4gICAgY29uc3QgY2hlY2tzID0gc2NoZW1hLl96b2QuZGVmLmNoZWNrcztcbiAgICBjb25zdCBoYXNDaGVja3MgPSBjaGVja3MgJiYgY2hlY2tzLmxlbmd0aCA+IDA7XG4gICAgaWYgKGhhc0NoZWNrcykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJPYmplY3Qgc2NoZW1hcyBjb250YWluaW5nIHJlZmluZW1lbnRzIGNhbm5vdCBiZSBleHRlbmRlZC4gVXNlIGAuc2FmZUV4dGVuZCgpYCBpbnN0ZWFkLlwiKTtcbiAgICB9XG4gICAgY29uc3QgZGVmID0gbWVyZ2VEZWZzKHNjaGVtYS5fem9kLmRlZiwge1xuICAgICAgICBnZXQgc2hhcGUoKSB7XG4gICAgICAgICAgICBjb25zdCBfc2hhcGUgPSB7IC4uLnNjaGVtYS5fem9kLmRlZi5zaGFwZSwgLi4uc2hhcGUgfTtcbiAgICAgICAgICAgIGFzc2lnblByb3AodGhpcywgXCJzaGFwZVwiLCBfc2hhcGUpOyAvLyBzZWxmLWNhY2hpbmdcbiAgICAgICAgICAgIHJldHVybiBfc2hhcGU7XG4gICAgICAgIH0sXG4gICAgICAgIGNoZWNrczogW10sXG4gICAgfSk7XG4gICAgcmV0dXJuIGNsb25lKHNjaGVtYSwgZGVmKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzYWZlRXh0ZW5kKHNjaGVtYSwgc2hhcGUpIHtcbiAgICBpZiAoIWlzUGxhaW5PYmplY3Qoc2hhcGUpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgaW5wdXQgdG8gc2FmZUV4dGVuZDogZXhwZWN0ZWQgYSBwbGFpbiBvYmplY3RcIik7XG4gICAgfVxuICAgIGNvbnN0IGRlZiA9IHtcbiAgICAgICAgLi4uc2NoZW1hLl96b2QuZGVmLFxuICAgICAgICBnZXQgc2hhcGUoKSB7XG4gICAgICAgICAgICBjb25zdCBfc2hhcGUgPSB7IC4uLnNjaGVtYS5fem9kLmRlZi5zaGFwZSwgLi4uc2hhcGUgfTtcbiAgICAgICAgICAgIGFzc2lnblByb3AodGhpcywgXCJzaGFwZVwiLCBfc2hhcGUpOyAvLyBzZWxmLWNhY2hpbmdcbiAgICAgICAgICAgIHJldHVybiBfc2hhcGU7XG4gICAgICAgIH0sXG4gICAgICAgIGNoZWNrczogc2NoZW1hLl96b2QuZGVmLmNoZWNrcyxcbiAgICB9O1xuICAgIHJldHVybiBjbG9uZShzY2hlbWEsIGRlZik7XG59XG5leHBvcnQgZnVuY3Rpb24gbWVyZ2UoYSwgYikge1xuICAgIGNvbnN0IGRlZiA9IG1lcmdlRGVmcyhhLl96b2QuZGVmLCB7XG4gICAgICAgIGdldCBzaGFwZSgpIHtcbiAgICAgICAgICAgIGNvbnN0IF9zaGFwZSA9IHsgLi4uYS5fem9kLmRlZi5zaGFwZSwgLi4uYi5fem9kLmRlZi5zaGFwZSB9O1xuICAgICAgICAgICAgYXNzaWduUHJvcCh0aGlzLCBcInNoYXBlXCIsIF9zaGFwZSk7IC8vIHNlbGYtY2FjaGluZ1xuICAgICAgICAgICAgcmV0dXJuIF9zaGFwZTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0IGNhdGNoYWxsKCkge1xuICAgICAgICAgICAgcmV0dXJuIGIuX3pvZC5kZWYuY2F0Y2hhbGw7XG4gICAgICAgIH0sXG4gICAgICAgIGNoZWNrczogW10sIC8vIGRlbGV0ZSBleGlzdGluZyBjaGVja3NcbiAgICB9KTtcbiAgICByZXR1cm4gY2xvbmUoYSwgZGVmKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJ0aWFsKENsYXNzLCBzY2hlbWEsIG1hc2spIHtcbiAgICBjb25zdCBkZWYgPSBtZXJnZURlZnMoc2NoZW1hLl96b2QuZGVmLCB7XG4gICAgICAgIGdldCBzaGFwZSgpIHtcbiAgICAgICAgICAgIGNvbnN0IG9sZFNoYXBlID0gc2NoZW1hLl96b2QuZGVmLnNoYXBlO1xuICAgICAgICAgICAgY29uc3Qgc2hhcGUgPSB7IC4uLm9sZFNoYXBlIH07XG4gICAgICAgICAgICBpZiAobWFzaykge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG1hc2spIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIG9sZFNoYXBlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnJlY29nbml6ZWQga2V5OiBcIiR7a2V5fVwiYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXNrW2tleV0pXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgKG9sZFNoYXBlW2tleV0hLl96b2Qub3B0aW4gPT09IFwib3B0aW9uYWxcIikgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIHNoYXBlW2tleV0gPSBDbGFzc1xuICAgICAgICAgICAgICAgICAgICAgICAgPyBuZXcgQ2xhc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwib3B0aW9uYWxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbm5lclR5cGU6IG9sZFNoYXBlW2tleV0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBvbGRTaGFwZVtrZXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG9sZFNoYXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIChvbGRTaGFwZVtrZXldIS5fem9kLm9wdGluID09PSBcIm9wdGlvbmFsXCIpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICBzaGFwZVtrZXldID0gQ2xhc3NcbiAgICAgICAgICAgICAgICAgICAgICAgID8gbmV3IENsYXNzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm9wdGlvbmFsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJUeXBlOiBvbGRTaGFwZVtrZXldLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogb2xkU2hhcGVba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhc3NpZ25Qcm9wKHRoaXMsIFwic2hhcGVcIiwgc2hhcGUpOyAvLyBzZWxmLWNhY2hpbmdcbiAgICAgICAgICAgIHJldHVybiBzaGFwZTtcbiAgICAgICAgfSxcbiAgICAgICAgY2hlY2tzOiBbXSxcbiAgICB9KTtcbiAgICByZXR1cm4gY2xvbmUoc2NoZW1hLCBkZWYpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlcXVpcmVkKENsYXNzLCBzY2hlbWEsIG1hc2spIHtcbiAgICBjb25zdCBkZWYgPSBtZXJnZURlZnMoc2NoZW1hLl96b2QuZGVmLCB7XG4gICAgICAgIGdldCBzaGFwZSgpIHtcbiAgICAgICAgICAgIGNvbnN0IG9sZFNoYXBlID0gc2NoZW1hLl96b2QuZGVmLnNoYXBlO1xuICAgICAgICAgICAgY29uc3Qgc2hhcGUgPSB7IC4uLm9sZFNoYXBlIH07XG4gICAgICAgICAgICBpZiAobWFzaykge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG1hc2spIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIHNoYXBlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnJlY29nbml6ZWQga2V5OiBcIiR7a2V5fVwiYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXNrW2tleV0pXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gb3ZlcndyaXRlIHdpdGggbm9uLW9wdGlvbmFsXG4gICAgICAgICAgICAgICAgICAgIHNoYXBlW2tleV0gPSBuZXcgQ2xhc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJub25vcHRpb25hbFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJUeXBlOiBvbGRTaGFwZVtrZXldLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvbGRTaGFwZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBvdmVyd3JpdGUgd2l0aCBub24tb3B0aW9uYWxcbiAgICAgICAgICAgICAgICAgICAgc2hhcGVba2V5XSA9IG5ldyBDbGFzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm5vbm9wdGlvbmFsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbm5lclR5cGU6IG9sZFNoYXBlW2tleV0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFzc2lnblByb3AodGhpcywgXCJzaGFwZVwiLCBzaGFwZSk7IC8vIHNlbGYtY2FjaGluZ1xuICAgICAgICAgICAgcmV0dXJuIHNoYXBlO1xuICAgICAgICB9LFxuICAgICAgICBjaGVja3M6IFtdLFxuICAgIH0pO1xuICAgIHJldHVybiBjbG9uZShzY2hlbWEsIGRlZik7XG59XG4vLyBpbnZhbGlkX3R5cGUgfCB0b29fYmlnIHwgdG9vX3NtYWxsIHwgaW52YWxpZF9mb3JtYXQgfCBub3RfbXVsdGlwbGVfb2YgfCB1bnJlY29nbml6ZWRfa2V5cyB8IGludmFsaWRfdW5pb24gfCBpbnZhbGlkX2tleSB8IGludmFsaWRfZWxlbWVudCB8IGludmFsaWRfdmFsdWUgfCBjdXN0b21cbmV4cG9ydCBmdW5jdGlvbiBhYm9ydGVkKHgsIHN0YXJ0SW5kZXggPSAwKSB7XG4gICAgaWYgKHguYWJvcnRlZCA9PT0gdHJ1ZSlcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0SW5kZXg7IGkgPCB4Lmlzc3Vlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoeC5pc3N1ZXNbaV0/LmNvbnRpbnVlICE9PSB0cnVlKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnQgZnVuY3Rpb24gcHJlZml4SXNzdWVzKHBhdGgsIGlzc3Vlcykge1xuICAgIHJldHVybiBpc3N1ZXMubWFwKChpc3MpID0+IHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICAoX2EgPSBpc3MpLnBhdGggPz8gKF9hLnBhdGggPSBbXSk7XG4gICAgICAgIGlzcy5wYXRoLnVuc2hpZnQocGF0aCk7XG4gICAgICAgIHJldHVybiBpc3M7XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gdW53cmFwTWVzc2FnZShtZXNzYWdlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBtZXNzYWdlID09PSBcInN0cmluZ1wiID8gbWVzc2FnZSA6IG1lc3NhZ2U/Lm1lc3NhZ2U7XG59XG5leHBvcnQgZnVuY3Rpb24gZmluYWxpemVJc3N1ZShpc3MsIGN0eCwgY29uZmlnKSB7XG4gICAgY29uc3QgZnVsbCA9IHsgLi4uaXNzLCBwYXRoOiBpc3MucGF0aCA/PyBbXSB9O1xuICAgIC8vIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eVxuICAgIGlmICghaXNzLm1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IHVud3JhcE1lc3NhZ2UoaXNzLmluc3Q/Ll96b2QuZGVmPy5lcnJvcj8uKGlzcykpID8/XG4gICAgICAgICAgICB1bndyYXBNZXNzYWdlKGN0eD8uZXJyb3I/Lihpc3MpKSA/P1xuICAgICAgICAgICAgdW53cmFwTWVzc2FnZShjb25maWcuY3VzdG9tRXJyb3I/Lihpc3MpKSA/P1xuICAgICAgICAgICAgdW53cmFwTWVzc2FnZShjb25maWcubG9jYWxlRXJyb3I/Lihpc3MpKSA/P1xuICAgICAgICAgICAgXCJJbnZhbGlkIGlucHV0XCI7XG4gICAgICAgIGZ1bGwubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgfVxuICAgIC8vIGRlbGV0ZSAoZnVsbCBhcyBhbnkpLmRlZjtcbiAgICBkZWxldGUgZnVsbC5pbnN0O1xuICAgIGRlbGV0ZSBmdWxsLmNvbnRpbnVlO1xuICAgIGlmICghY3R4Py5yZXBvcnRJbnB1dCkge1xuICAgICAgICBkZWxldGUgZnVsbC5pbnB1dDtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bGw7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0U2l6YWJsZU9yaWdpbihpbnB1dCkge1xuICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIFNldClcbiAgICAgICAgcmV0dXJuIFwic2V0XCI7XG4gICAgaWYgKGlucHV0IGluc3RhbmNlb2YgTWFwKVxuICAgICAgICByZXR1cm4gXCJtYXBcIjtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgaWYgKGlucHV0IGluc3RhbmNlb2YgRmlsZSlcbiAgICAgICAgcmV0dXJuIFwiZmlsZVwiO1xuICAgIHJldHVybiBcInVua25vd25cIjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRMZW5ndGhhYmxlT3JpZ2luKGlucHV0KSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKVxuICAgICAgICByZXR1cm4gXCJhcnJheVwiO1xuICAgIGlmICh0eXBlb2YgaW5wdXQgPT09IFwic3RyaW5nXCIpXG4gICAgICAgIHJldHVybiBcInN0cmluZ1wiO1xuICAgIHJldHVybiBcInVua25vd25cIjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc3N1ZSguLi5hcmdzKSB7XG4gICAgY29uc3QgW2lzcywgaW5wdXQsIGluc3RdID0gYXJncztcbiAgICBpZiAodHlwZW9mIGlzcyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWVzc2FnZTogaXNzLFxuICAgICAgICAgICAgY29kZTogXCJjdXN0b21cIixcbiAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgaW5zdCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgLi4uaXNzIH07XG59XG5leHBvcnQgZnVuY3Rpb24gY2xlYW5FbnVtKG9iaikge1xuICAgIHJldHVybiBPYmplY3QuZW50cmllcyhvYmopXG4gICAgICAgIC5maWx0ZXIoKFtrLCBfXSkgPT4ge1xuICAgICAgICAvLyByZXR1cm4gdHJ1ZSBpZiBOYU4sIG1lYW5pbmcgaXQncyBub3QgYSBudW1iZXIsIHRodXMgYSBzdHJpbmcga2V5XG4gICAgICAgIHJldHVybiBOdW1iZXIuaXNOYU4oTnVtYmVyLnBhcnNlSW50KGssIDEwKSk7XG4gICAgfSlcbiAgICAgICAgLm1hcCgoZWwpID0+IGVsWzFdKTtcbn1cbi8vIENvZGVjIHV0aWxpdHkgZnVuY3Rpb25zXG5leHBvcnQgZnVuY3Rpb24gYmFzZTY0VG9VaW50OEFycmF5KGJhc2U2NCkge1xuICAgIGNvbnN0IGJpbmFyeVN0cmluZyA9IGF0b2IoYmFzZTY0KTtcbiAgICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGJpbmFyeVN0cmluZy5sZW5ndGgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmluYXJ5U3RyaW5nLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGJ5dGVzW2ldID0gYmluYXJ5U3RyaW5nLmNoYXJDb2RlQXQoaSk7XG4gICAgfVxuICAgIHJldHVybiBieXRlcztcbn1cbmV4cG9ydCBmdW5jdGlvbiB1aW50OEFycmF5VG9CYXNlNjQoYnl0ZXMpIHtcbiAgICBsZXQgYmluYXJ5U3RyaW5nID0gXCJcIjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ5dGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGJpbmFyeVN0cmluZyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIGJ0b2EoYmluYXJ5U3RyaW5nKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBiYXNlNjR1cmxUb1VpbnQ4QXJyYXkoYmFzZTY0dXJsKSB7XG4gICAgY29uc3QgYmFzZTY0ID0gYmFzZTY0dXJsLnJlcGxhY2UoLy0vZywgXCIrXCIpLnJlcGxhY2UoL18vZywgXCIvXCIpO1xuICAgIGNvbnN0IHBhZGRpbmcgPSBcIj1cIi5yZXBlYXQoKDQgLSAoYmFzZTY0Lmxlbmd0aCAlIDQpKSAlIDQpO1xuICAgIHJldHVybiBiYXNlNjRUb1VpbnQ4QXJyYXkoYmFzZTY0ICsgcGFkZGluZyk7XG59XG5leHBvcnQgZnVuY3Rpb24gdWludDhBcnJheVRvQmFzZTY0dXJsKGJ5dGVzKSB7XG4gICAgcmV0dXJuIHVpbnQ4QXJyYXlUb0Jhc2U2NChieXRlcykucmVwbGFjZSgvXFwrL2csIFwiLVwiKS5yZXBsYWNlKC9cXC8vZywgXCJfXCIpLnJlcGxhY2UoLz0vZywgXCJcIik7XG59XG5leHBvcnQgZnVuY3Rpb24gaGV4VG9VaW50OEFycmF5KGhleCkge1xuICAgIGNvbnN0IGNsZWFuSGV4ID0gaGV4LnJlcGxhY2UoL14weC8sIFwiXCIpO1xuICAgIGlmIChjbGVhbkhleC5sZW5ndGggJSAyICE9PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgaGV4IHN0cmluZyBsZW5ndGhcIik7XG4gICAgfVxuICAgIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoY2xlYW5IZXgubGVuZ3RoIC8gMik7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjbGVhbkhleC5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgICBieXRlc1tpIC8gMl0gPSBOdW1iZXIucGFyc2VJbnQoY2xlYW5IZXguc2xpY2UoaSwgaSArIDIpLCAxNik7XG4gICAgfVxuICAgIHJldHVybiBieXRlcztcbn1cbmV4cG9ydCBmdW5jdGlvbiB1aW50OEFycmF5VG9IZXgoYnl0ZXMpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShieXRlcylcbiAgICAgICAgLm1hcCgoYikgPT4gYi50b1N0cmluZygxNikucGFkU3RhcnQoMiwgXCIwXCIpKVxuICAgICAgICAuam9pbihcIlwiKTtcbn1cbi8vIGluc3RhbmNlb2ZcbmV4cG9ydCBjbGFzcyBDbGFzcyB7XG4gICAgY29uc3RydWN0b3IoLi4uX2FyZ3MpIHsgfVxufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/util.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/versions.js":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/node_modules/zod/v4/core/versions.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   version: () => (/* binding */ version)\n/* harmony export */ });\nconst version = {\n    major: 4,\n    minor: 1,\n    patch: 5,\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvbm9kZV9tb2R1bGVzL3pvZC92NC9jb3JlL3ZlcnNpb25zLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFtYWFuXFxPbmVEcml2ZVxcRGVza3RvcFxcS2FuZGlkXzJcXE5ldyBmb2xkZXIgKDIpXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxub2RlX21vZHVsZXNcXHpvZFxcdjRcXGNvcmVcXHZlcnNpb25zLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCB2ZXJzaW9uID0ge1xuICAgIG1ham9yOiA0LFxuICAgIG1pbm9yOiAxLFxuICAgIHBhdGNoOiA1LFxufTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/node_modules/zod/v4/core/versions.js\n");

/***/ })

};
;